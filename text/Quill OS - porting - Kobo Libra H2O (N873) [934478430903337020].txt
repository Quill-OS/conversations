==============================================================
Guild: Quill OS
Channel: Development / porting / Kobo Libra H2O (N873)
==============================================================

[1/22/2022 5:03 PM] tux_linux
@btwarch147 Tell me when you're ready to start. A serial connection would be better for debugging and un-bricking if ever that happens, if it is not possible we can try without too.


[1/22/2022 5:24 PM] btwarch147
I think I might have gotten a bit too worried about bricking it... I'm thinking I might buy a kobo touch on ebay as they seem to be pretty cheap.


[1/22/2022 5:26 PM] tux_linux
You shouldn't be afraid. The possibility we reach a bricking state is pretty much the same as a hardware failure. Even if we erase the entire Linux rootfs, Nickel, and partitions, if we have the bootloader (U-Boot) still there, there's a 100% recovery chance, and if not, I didn't test it on mine, but some e-mails with Andreas Kemnade, who ported Linux 5.16 to those Kobos, pointed out that recovery with even the bootloader corrupted was possible.


[1/22/2022 5:27 PM] btwarch147
Lets go for it

{Reactions}
😀 

[1/22/2022 5:27 PM] btwarch147
I'll get  my ereader


[1/22/2022 5:30 PM] tux_linux
I suggest that first you do a backup of the eMMC.
If you have a serial port, you can enter this command in U-Boot prompt:
`ums 0 mmc 0`
It will export the entire eMMC over USB and you'll be able to `dd if=` out of it and backup that to an img file. (Note: at this point this doesn't write anything to the eMMC, it just exports it as Nickel would do it with the onboard partition)
Similarly, if we get to a bricked state, a factory recovery should be possible this way too. We could also reflash a kernel manually, or download it over USB in RAM and populate the partitions with the default Nickel system within a Linux initrd


[1/22/2022 5:31 PM] btwarch147
To get a serial port presumably I'd need to open the device up?


[1/22/2022 5:32 PM] tux_linux
Yeah, a credit card and maybe an Exacto can do


[1/22/2022 5:32 PM] tux_linux
It's not sealed, so you won't lose waterproofing there


[1/22/2022 5:33 PM] tux_linux
Only the PCB and components are


[1/22/2022 5:33 PM] tux_linux
(But you can still access the serial port)


[1/22/2022 5:34 PM] btwarch147
Could we get away with not backing it up at first and then if it does get bricked we could open after that to restore a stock nickel image


[1/22/2022 5:34 PM] btwarch147
I've already backed up my books and stuff


[1/22/2022 5:34 PM] tux_linux
Well, you could, but we'd still need serial port


[1/22/2022 5:35 PM] btwarch147
Do I need an arduino to get the serial port when I open it up?


[1/22/2022 5:35 PM] the.mightydill
or a rpi


[1/22/2022 5:35 PM] the.mightydill
i tried arduino for my mini and it didnt work but idk :/


[1/22/2022 5:35 PM] tux_linux
Yeah, either, or whatever Linux board you have hanging around


[1/22/2022 5:35 PM] btwarch147
I've got one a raspberry pi


[1/22/2022 5:35 PM] tux_linux
(that has a serial port)


[1/22/2022 5:35 PM] tux_linux
Will work


[1/22/2022 5:35 PM] tux_linux
Works very well too


[1/22/2022 5:35 PM] btwarch147
so there's definitely no way to do it without a serial port


[1/22/2022 5:36 PM] tux_linux
Unless you want to guess what's not working, no


[1/22/2022 5:37 PM] tux_linux
Don't worry, I've been there
If you want to be absolutely safe, you can connect the wires without soldering them, hold them with toothpicks and don't power on the Kobo or the RPi until you have all that connected up and ready


[1/22/2022 5:37 PM] the.mightydill
or that thingy


[1/22/2022 5:37 PM] the.mightydill
uh


[1/22/2022 5:37 PM] the.mightydill
playdoh i think


[1/22/2022 5:38 PM] btwarch147
Blu Tack?


[1/22/2022 5:38 PM] the.mightydill
yea


[1/22/2022 5:38 PM] the.mightydill
any clay or tack i guess


[1/22/2022 5:38 PM] tux_linux
Yeah, you can hold them with sticky gum or whatever "gommette" is called in English


[1/22/2022 5:39 PM] tux_linux
If you use Ethernet wires, they're so strong that you just have to stick them in and they hold themselves without effort


[1/22/2022 5:39 PM] tux_linux
But you probably won't be able with your RPi since it has soldered headers


[1/22/2022 5:40 PM] btwarch147
Ive got some jumper wires


[1/22/2022 5:40 PM] btwarch147
Will that work?


[1/22/2022 5:40 PM] the.mightydill
||eraser|| IM KIDDING that's gomme right?


[1/22/2022 5:40 PM] the.mightydill
probably


[1/22/2022 5:40 PM] tux_linux
Yeah


[1/22/2022 5:40 PM] tux_linux
yeah


[1/22/2022 5:40 PM] the.mightydill
yesssss im smart now


[1/22/2022 5:40 PM] tux_linux
Well we call it "Efface" here


[1/22/2022 5:41 PM] the.mightydill
i can barely speak french despite having french class for 8 years 😎


[1/22/2022 5:42 PM] btwarch147
That was easier than expected


[1/22/2022 5:42 PM] btwarch147
The back is off


[1/22/2022 5:42 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220122_164116083-1A579.jpg


[1/22/2022 5:42 PM] tux_linux
yeah, pops out quite easily


[1/22/2022 5:42 PM] tux_linux
This is what I use for my RPi


[1/22/2022 5:43 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/DCCCAADB-248B-41B5-849F-5A9F2239B107-3F93E.jpg


[1/22/2022 5:43 PM] the.mightydill
pretty sure arduino jumpers should work with rpi


[1/22/2022 5:43 PM] the.mightydill
you could also attempt the arduino


[1/22/2022 5:43 PM] tux_linux
And you can connect them like that

{Attachments}
/mnt/data/projects/git/conversations/media/OaA8nzquDzcfKAtwFYMD38TE4gbbvoOsmKD7l_zB38-02B0E.png


[1/22/2022 5:46 PM] btwarch147
So where do I connect them?


[1/22/2022 5:51 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/DCCCAADB-248B-41B5-849F-5A9F2239B1072-52F5D.jpg


[1/22/2022 5:52 PM] tux_linux
```
Kobo Tx -> Pi Rx
Kobo Rx -> Pi Tx
Kobo GND -> Pi GND
```


[1/22/2022 5:55 PM] btwarch147
Is the ground pin the one on the leftmost side in your picture?


[1/22/2022 5:55 PM] tux_linux
yes


[1/22/2022 5:56 PM] tux_linux
The one with that symbol


[1/22/2022 5:56 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/674px-Earth_Ground.svg-CD835.png


[1/22/2022 5:58 PM] tux_linux
You can install the `minicom` and `microcom` packages on your RPi


[1/22/2022 5:58 PM] btwarch147
Just flashing the sd

{Reactions}
👍 

[1/22/2022 5:58 PM] tux_linux
Then run `sudo minicom -D /dev/ttyS0 -b 115200`


[1/22/2022 5:59 PM] tux_linux
Oh, and before you'll have to enable the serial port in `raspi-config`, and **don't** enable the login shell, only the serial port


[1/22/2022 6:10 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-52E59.png


[1/22/2022 6:10 PM] btwarch147
This is what I've got


[1/22/2022 6:10 PM] btwarch147
Moving the wires a little appears to produce an output


[1/22/2022 6:11 PM] tux_linux
Ok, good, so the Kobo isn't powered on yet?


[1/22/2022 6:11 PM] btwarch147
No


[1/22/2022 6:11 PM] btwarch147
Its powered off


[1/22/2022 6:11 PM] tux_linux
Ok, the Pi has the wires in the correct headers?


[1/22/2022 6:11 PM] btwarch147
I believe so


[1/22/2022 6:11 PM] the.mightydill
what is it?


[1/22/2022 6:11 PM] tux_linux
Nothing is plugged in the 5V ports?


[1/22/2022 6:11 PM] tux_linux
garbage


[1/22/2022 6:12 PM] btwarch147
No


[1/22/2022 6:12 PM] btwarch147
Yup


[1/22/2022 6:12 PM] the.mightydill
same with what happened to me then


[1/22/2022 6:12 PM] btwarch147
Its garbage


[1/22/2022 6:12 PM] tux_linux
Ok, because 5V could hardware-brick the Kobo


[1/22/2022 6:12 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/Raspberry-Pi-3-B-Pinout-in-detail-8CC19.png


[1/22/2022 6:13 PM] btwarch147
I've got a 3B+ and ive got it plugged into the one third from top on the left for ground


[1/22/2022 6:13 PM] tux_linux
so gpio 14, 15 and ground


[1/22/2022 6:13 PM] btwarch147
Yes


[1/22/2022 6:13 PM] tux_linux
If it produces output when you move the wires it's a good sign


[1/22/2022 6:13 PM] tux_linux
Make sure they don't touch each other and power on the Kobo


[1/22/2022 6:14 PM] btwarch147
things are happening


[1/22/2022 6:14 PM] btwarch147
starting kernel


[1/22/2022 6:14 PM] tux_linux
Ok good !!


[1/22/2022 6:14 PM] tux_linux
So it's booting Nickel


[1/22/2022 6:15 PM] btwarch147
I'm not sure if my pi sd card is big enough for a backup


[1/22/2022 6:15 PM] btwarch147
its only 4gb


[1/22/2022 6:15 PM] tux_linux
Oh; you can plug in the Kobo to another computer


[1/22/2022 6:15 PM] btwarch147
although i did install raspbian lite


[1/22/2022 6:15 PM] tux_linux
(via USB)


[1/22/2022 6:15 PM] tux_linux
keep the serial wires there


[1/22/2022 6:15 PM] btwarch147
Well


[1/22/2022 6:15 PM] btwarch147
this is an issue


[1/22/2022 6:16 PM] btwarch147
I used my known working micro data wire to plug in the pi


[1/22/2022 6:16 PM] btwarch147
I'll find another one


[1/22/2022 6:16 PM] tux_linux
Maybe you could use a power-only wire if you have one?


[1/22/2022 6:17 PM] btwarch147
Id have to turn off the pi


[1/22/2022 6:17 PM] btwarch147
is that OK?


[1/22/2022 6:17 PM] tux_linux
Yeah sure


[1/22/2022 6:18 PM] tux_linux
Honestly, I'm just telling you to be very careful because I know that some unexpected things could maybe happen, but so far I didn't encounter device bricks with serial port, even with "hotplugging" Kobos to the serial port


[1/22/2022 6:30 PM] tux_linux
So as soon as there's output on the serial console, you hit keys on your keyboard until you get to the U-Boot prompt. There, you can enter the `ums 0 mmc 0` command.
It should be a bit like this:
```
U-Boot 2016.03-00063-gb1f1e06 (Jul 23 2019 - 13:43:57 +0800)

CPU:   Freescale i.MX6SLL rev1.1 996 MHz (running at 792 MHz)
CPU:   Commercial temperature grade (0C to 95C) at 34C
Reset cause: POR
Board: MX6SLL LPDDR2 NTX
I2C:   ready
DRAM:  512 MiB
__get_sd_number(),cfg23=0,cfg24=0 
force_idle_bus: sda=1 scl=0 sda.gp=0x56 scl.gp=0x55
MMC:   board_mmc_init() : isd=0 
board_mmc_init() : wifi=2 
FSL_SDHC: 0, FSL_SDHC: 1
In:    serial
Out:   serial
Err:   serial
ntx_hw_early_init() 0
ram p=80000000,size=536870912
switch to partitions #0, OK
mmc0(part 0) is current device
mmc read 0x9ffffe00 0x3ff 0x1

MMC read: dev # 0, block # 1023, count 1 ... 1 blocks read: OK
mmc read 0x9ffffe00 0x400 0x1

MMC read: dev # 0, block # 1024, count 1 ... 1 blocks read: OK
RC5T619_regulator_init : VDD_SOC_IN : 1275000uV, VDD_ARM_IN : 1275000uV
RC5T619_watchdog(1,32)
ntx_hw_late_init()
mmc read 0x9ffffc00 0x1 0x1

MMC read: dev # 0, block # 1, count 1 ... 1 blocks read: OK
NTXSN not avalible !
ntx_gpio_get_value(404) : error parameter ! null ptr !
ntx_config_fastboot_layout():10 binaries partition added
ntx_config_fastboot_layout: get partition:recoveryfs fail !!
ntx_config_fastboot_layout():3 mbr partition added
check_and_clean: reg 0, flag_set 0
Fastboot: Normal
Net:   CPU Net Initialization Failed
No ethernet found.
Hit any key to stop autoboot:  0 
RC5T619_watchdog(0,0)
eBR-1A # ums 0 mmc 0
UMS: LUN 0, dev 0, hwpart 0, sector 0x0, count 0xe90000
```


[1/22/2022 6:30 PM] btwarch147
Great


[1/22/2022 6:30 PM] btwarch147
Had to reboot my pc because it was acting weird


[1/22/2022 6:31 PM] btwarch147
It’s taking it’s time…


[1/22/2022 6:31 PM] btwarch147
This might be an example of some Arch reliability


[1/22/2022 6:31 PM] the.mightydill
arch linux?


[1/22/2022 6:31 PM] tux_linux
I'm on Gentoo ;p


[1/22/2022 6:31 PM] tux_linux
And Fedora (on my laptop)


[1/22/2022 6:32 PM] btwarch147
Well


[1/22/2022 6:32 PM] btwarch147
I used to use arch


[1/22/2022 6:32 PM] btwarch147
but its manjaro so...


[1/22/2022 6:32 PM] btwarch147
Partial credit?


[1/22/2022 6:32 PM] the.mightydill
yeah i guess


[1/22/2022 6:32 PM] btwarch147
Its working now

{Reactions}
👍 

[1/22/2022 6:32 PM] the.mightydill
not really a fan of manjaro but eh


[1/22/2022 6:33 PM] btwarch147
Keep hitting keys?


[1/22/2022 6:34 PM] tux_linux
Yeah, well login as `root`, reboot the device, then hit keys


[1/22/2022 6:34 PM] tux_linux
until you get the `eBR-1A #` prompt


[1/22/2022 6:35 PM] btwarch147
Login as root on the raspberry pi?


[1/22/2022 6:35 PM] tux_linux
on kobo


[1/22/2022 6:36 PM] tux_linux
or well, find a way to reset/restart it


[1/22/2022 6:36 PM] tux_linux
So you can get the bootloader prompt


[1/22/2022 6:36 PM] btwarch147
Is turning off and on again valid?


[1/22/2022 6:36 PM] tux_linux
yeah


[1/22/2022 6:36 PM] tux_linux
But you have like half a second for it to register your input, so be quick


[1/22/2022 6:41 PM] btwarch147
we're in


[1/22/2022 6:42 PM] btwarch147
I've run the command


[1/22/2022 6:42 PM] tux_linux
Nice!
So enter `ums 0 mmc 0`, plug in your Kobo via usb to your computer and it should show up as a block device


[1/22/2022 6:42 PM] tux_linux
Like `/dev/sdc`


[1/22/2022 6:42 PM] btwarch147
Yup


[1/22/2022 6:42 PM] btwarch147
got it


[1/22/2022 6:42 PM] btwarch147
so now a dd?


[1/22/2022 6:43 PM] btwarch147
'Linux UMS drive'


[1/22/2022 6:43 PM] tux_linux
Then you can do ```sudo dd if=/dev/whatever-your-block-device-is status=progress | xz -T 0 > kobo-backup-20210122.img.xz```


[1/22/2022 6:43 PM] btwarch147
is what it shows up as


[1/22/2022 6:43 PM] btwarch147
It's going


[1/22/2022 6:44 PM] btwarch147
Looks like it's going to take a while...


[1/22/2022 6:44 PM] tux_linux
It should copy ~8G of data and compress it through xz
if it's less than that, something's wrong

{Reactions}
👍 

[1/22/2022 6:44 PM] btwarch147
It's doing 4MB/s


[1/22/2022 6:44 PM] tux_linux
It does show the progress?


[1/22/2022 6:44 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-23AC9.png

{Reactions}
👍 

[1/22/2022 6:45 PM] tux_linux
You can also do `ls -sh kobo-backup-20210122.img.xz` to see how well it compresses


[1/22/2022 6:45 PM] btwarch147
Might have lost the serial port


[1/22/2022 6:45 PM] btwarch147
But presumeably thats OK at the moment


[1/22/2022 6:46 PM] tux_linux
Don't hit ctrl-c

{Reactions}
👍 

[1/22/2022 6:46 PM] tux_linux
Yeah, serial port is not like when you lose a ssh session


[1/22/2022 6:46 PM] tux_linux
You could just reconnect it and it would continue where it was


[1/22/2022 6:47 PM] tux_linux
Teaser if you want to see how InkBox should boot on your device once everything's setup

{Attachments}
/mnt/data/projects/git/conversations/media/message-67E1C.txt


[1/22/2022 6:49 PM] btwarch147
So i can just switch between inkbox and nickel by pressing the power button at boot?


[1/22/2022 6:49 PM] tux_linux
Yeah


[1/22/2022 6:56 PM] tux_linux
It's handled by that script: https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.33-libra_spl/_install/etc/init.d/rcS


[1/22/2022 6:57 PM] tux_linux
Well, while it's doing the backup, you might as well clone `https://github.com/Kobo-InkBox/kernel`


[1/22/2022 7:19 PM] btwarch147
All Done


[1/22/2022 7:19 PM] btwarch147
3.9GB


[1/22/2022 7:21 PM] tux_linux
the compressed image?


[1/22/2022 7:21 PM] btwarch147
Yes


[1/22/2022 7:21 PM] btwarch147
I'm just cloning the repo


[1/22/2022 7:21 PM] btwarch147
It said 7.8GB copied


[1/22/2022 7:21 PM] tux_linux
ok
So now yeah, you need to compile the kernels


[1/22/2022 7:21 PM] tux_linux
Right, that should be fine


[1/22/2022 7:23 PM] btwarch147
It's finished cloning


[1/22/2022 7:23 PM] btwarch147
What commands should I run?


[1/22/2022 7:24 PM] tux_linux
```env GITDIR=/home/build/inkbox/kernel TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf/ THREADS=16 TARGET=arm-nickel-linux-gnueabihf scripts/build_kernel.sh n873 spl``` then ```env GITDIR=/home/build/inkbox/kernel TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf/ THREADS=16 TARGET=arm-nickel-linux-gnueabihf scripts/build_kernel.sh n873 root```


[1/22/2022 7:24 PM] tux_linux
(and replace the paths)

{Reactions}
👍 

[1/22/2022 7:24 PM] tux_linux
Oh; wait


[1/22/2022 7:24 PM] tux_linux
First
```env GITDIR=/kernel/git/dir scripts/make_devicenodes.sh```


[1/22/2022 7:26 PM] tux_linux
Then you have to edit `kernel/config/config-n873` and `kernel/config/config-n873-spl` and edit `CONFIG_INITRAMFS_SOURCE` option to match the kernel git dir location


[1/22/2022 7:26 PM] tux_linux
Then you can run the two commands above

{Reactions}
👍 

[1/22/2022 7:29 PM] btwarch147
All done


[1/22/2022 7:29 PM] tux_linux
Both were successful?


[1/22/2022 7:29 PM] btwarch147
Yes


[1/22/2022 7:30 PM] tux_linux
So you have files in `kernel/out/n873/`?


[1/22/2022 7:30 PM] btwarch147
It said output saved to /home/build/inkbox/kernel/kernel/out/n873/zImage-root or something for both


[1/22/2022 7:30 PM] btwarch147
I ended up just making the build directory in the right place


[1/22/2022 7:30 PM] tux_linux
Wait, even the build user?


[1/22/2022 7:30 PM] tux_linux
nice


[1/22/2022 7:30 PM] btwarch147
I mean


[1/22/2022 7:30 PM] btwarch147
Just the directory


[1/22/2022 7:30 PM] btwarch147
in /home


[1/22/2022 7:30 PM] tux_linux
oh


[1/22/2022 7:30 PM] btwarch147
it seems to have worked...


[1/22/2022 7:30 PM] tux_linux
well good too


[1/22/2022 7:31 PM] tux_linux
Ok, so now you can try something
We'll flash the SPL (secondary program loader) kernel to the eMMC


[1/22/2022 7:31 PM] tux_linux
0% brick chance since we can restore another kernel later with access to U-Boot


[1/22/2022 7:31 PM] btwarch147
Nice


[1/22/2022 7:31 PM] tux_linux
So
Get to the U-Boot prompt and type `fastboot 0`


[1/22/2022 7:31 PM] tux_linux
(Restart if necessary)


[1/22/2022 7:32 PM] btwarch147
So ctrl+c to stop the usb mount


[1/22/2022 7:32 PM] tux_linux
Yeah


[1/22/2022 7:32 PM] tux_linux
You should also install `android-tools` or whatever provides fastboot on your PC


[1/22/2022 7:32 PM] btwarch147
I've run the command


[1/22/2022 7:33 PM] btwarch147
Installed


[1/22/2022 7:33 PM] tux_linux
Ok, when you've got fastboot there you can run
`sudo fastboot flash kernel kernel/out/n873/zImage-spl`


[1/22/2022 7:33 PM] btwarch147
Flashed


[1/22/2022 7:33 PM] tux_linux
Ok `sudo fastboot reboot`


[1/22/2022 7:33 PM] tux_linux
Now you should see a prompt when the kernel starts


[1/22/2022 7:33 PM] btwarch147
Yep


[1/22/2022 7:33 PM] btwarch147
I do


[1/22/2022 7:34 PM] tux_linux
So hit any key to get a shell on the initrd


[1/22/2022 7:34 PM] btwarch147
Ah


[1/22/2022 7:34 PM] btwarch147
need to restart then


[1/22/2022 7:34 PM] btwarch147
ive got a kobo login shell


[1/22/2022 7:34 PM] btwarch147
but i missed the stop auto boot prompt


[1/22/2022 7:34 PM] tux_linux
Yeah it will fail to boot for now, you just get a bare minimum busybox initrd


[1/22/2022 7:34 PM] tux_linux
No, not in U-Boot


[1/22/2022 7:34 PM] tux_linux
The other stop auto-boot prompt


[1/22/2022 7:35 PM] tux_linux
So yeah, the kobo login shell


[1/22/2022 7:35 PM] tux_linux
Login as root and there should be no password


[1/22/2022 7:35 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-07105.png


[1/22/2022 7:35 PM] btwarch147
This is my output


[1/22/2022 7:35 PM] btwarch147
Does this look right?


[1/22/2022 7:35 PM] tux_linux
Yep alright


[1/22/2022 7:36 PM] tux_linux
Basically it resorted to the shell since it couldn't find a kernel anywhere


[1/22/2022 7:36 PM] btwarch147
I'm logged in


[1/22/2022 7:36 PM] tux_linux
So now to get Nickel working at least, we'll put `zImage-nickel` in mmcblk0p3
Go get the latest firmware upgrade zip file for your Kobo


[1/22/2022 7:37 PM] tux_linux
Probably that one https://kbdownload1-a.akamaihd.net/firmwares/kobo7/Jan2022/kobo-update-4.31.19086.zip


[1/22/2022 7:37 PM] tux_linux
(assuming you were on 4.31.19086, but even then it shouldn't matter very much)


[1/22/2022 7:38 PM] btwarch147
I'm p[retty sure it was fully up to date


[1/22/2022 7:38 PM] tux_linux
So in that zip file there's a zImage kernel you can use for Nickel


[1/22/2022 7:38 PM] tux_linux
You could compile your own too but it's less complicated that way


[1/22/2022 7:39 PM] btwarch147
Less complicated is good


[1/22/2022 7:39 PM] tux_linux
So once you downloaded it you can show me the directory listing to be sure


[1/22/2022 7:39 PM] tux_linux
I'm on a limited connection where I am right now


[1/22/2022 7:39 PM] tux_linux
IIRC there were several kernels for several boards


[1/22/2022 7:42 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-691BC.png


[1/22/2022 7:43 PM] btwarch147
This is the top level directory


[1/22/2022 7:43 PM] tux_linux
Probably in the upgrade dir then


[1/22/2022 7:43 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-81314.png


[1/22/2022 7:43 PM] tux_linux
mx6sll-ntx


[1/22/2022 7:43 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-01826.png


[1/22/2022 7:44 PM] tux_linux
Ok so take zImage-E70K00


[1/22/2022 7:44 PM] tux_linux
Even if you choose the wrong one it's not a problem


[1/22/2022 7:45 PM] tux_linux
Restart the Kobo in U-Boot prompt and type `ums 0 mmc 0` again
Mount partition 3 (onboard) and throw `zImage-E70K00` there. Then, rename it to `zImage-nickel`.
Then `sync`, umount partitions and reset the device.


[1/22/2022 7:46 PM] tux_linux
After that, when it says "Hit any key to stop auto-boot", press any key
Get to the Linux shell prompt, and do


[1/22/2022 7:47 PM] tux_linux
```mount /dev/mmcblk0p3 /mnt```
```kexec -l --append="console=ttymxc0,115200 rootwait rw quiet no_console_suspend hwcfg_p=0x9ffffe00 hwcfg_sz=110 waveform_p=0x9fd70000 waveform_sz=2686291 ntxfw_p=0x9fd6da00 ntxfw_sz=9474 mem=509M boot_port=0 rootfstype=ext4 root=/dev/mmcblk0p1 printk.time" "/mnt/zImage-nickel"```


[1/22/2022 7:47 PM] btwarch147
So the onboard partition is the one where the books are?


[1/22/2022 7:48 PM] btwarch147
I've also got rootfs or recovery


[1/22/2022 7:48 PM] tux_linux
To ensure that it works
After that, we'll delete the current partition layout and create a new one where Nickel rootfs will be on mmcblk0p6


[1/22/2022 7:48 PM] tux_linux
Yeah


[1/22/2022 7:49 PM] btwarch147
All commands run


[1/22/2022 7:50 PM] btwarch147
Last one didn't produce any output so presumeably it worked


[1/22/2022 7:50 PM] tux_linux
Ok, now the decisive command
`kexec -e`


[1/22/2022 7:50 PM] tux_linux
That basically starts a new kernel from userspace without the need of a reset or a bootloader


[1/22/2022 7:50 PM] btwarch147
I've got some output


[1/22/2022 7:51 PM] btwarch147
it looks like it's doing it


[1/22/2022 7:51 PM] tux_linux
Ok, do you have a login prompt for Nickel?


[1/22/2022 7:51 PM] btwarch147
Not yet


[1/22/2022 7:51 PM] tux_linux
What's your output?


[1/22/2022 7:51 PM] btwarch147
I do actually


[1/22/2022 7:51 PM] btwarch147
it was just a bit hidden with text


[1/22/2022 7:51 PM] tux_linux
Yeah ok
Now try to turn around the device a bit and you should see Nickel UI on the screen


[1/22/2022 7:52 PM] btwarch147
I do


[1/22/2022 7:52 PM] tux_linux
Ok alright !


[1/22/2022 7:52 PM] tux_linux
So now put back the Kobo in UMS mode


[1/22/2022 7:53 PM] btwarch147
Done


[1/22/2022 7:54 PM] tux_linux
Ok, mount partition 2 and extract `upgrade/fs.tgz`


[1/22/2022 7:54 PM] tux_linux
Copy it somewhere
Will allow easier recovery


[1/22/2022 7:55 PM] btwarch147
Do i need to mount it anywhere specific?


[1/22/2022 7:55 PM] btwarch147
Oh


[1/22/2022 7:55 PM] btwarch147
As in to my PC


[1/22/2022 7:55 PM] tux_linux
No, you basically just take fs.tgz from the partition and copy it on your PC somewhere


[1/22/2022 7:56 PM] btwarch147
It's copying


[1/22/2022 7:56 PM] btwarch147
Done


[1/22/2022 7:56 PM] tux_linux
When it's done, backup the whole recoveryfs partition


[1/22/2022 7:57 PM] btwarch147
dd?


[1/22/2022 7:57 PM] tux_linux
`sudo tar cJvf /path/to/where/the/backup/will/be/stored.tar.xz /path/to/recoveryfs/partition`


[1/22/2022 7:57 PM] tux_linux
Ideally we'll want to restore the Kobo manually, not by reflashing the whole eMMC over, bad for writes count


[1/22/2022 7:58 PM] btwarch147
It's backing up


[1/22/2022 7:59 PM] tux_linux
If you can, could you please send me your tar file of the recoveryfs after that? I don't know where I put mine but it sure won't be nice if I get to brick the device...


[1/22/2022 7:59 PM] tux_linux
When it's finished, do the same backup thing for the rootfs on partition 1


[1/22/2022 8:00 PM] btwarch147
Hmm


[1/22/2022 8:00 PM] btwarch147
It'll have to be a google drive link


[1/22/2022 8:00 PM] tux_linux
no problem


[1/22/2022 8:00 PM] tux_linux
thx


[1/22/2022 8:00 PM] btwarch147
It's started uploading

{Reactions}
👍 

[1/22/2022 8:00 PM] tux_linux
It's already finished compressing?


[1/22/2022 8:00 PM] btwarch147
Yup


[1/22/2022 8:00 PM] tux_linux
your pc is a beast


[1/22/2022 8:01 PM] btwarch147
Its got a ryzen 3600


[1/22/2022 8:01 PM] tux_linux
Mine is not bad but it would be slower than that on single-core compression


[1/22/2022 8:02 PM] tux_linux
Mine is a Ryzen 7 3800XT


[1/22/2022 8:02 PM] btwarch147
Hmm


[1/22/2022 8:02 PM] btwarch147
Interesting


[1/22/2022 8:02 PM] btwarch147
So should be better


[1/22/2022 8:02 PM] btwarch147
Pretty sure I did it right


[1/22/2022 8:02 PM] tux_linux
I guess...?
Maybe it's just been a long time since I compressed a Nickel recoveryfs


[1/22/2022 8:02 PM] btwarch147
sudo tar cJvf /home/george/Downloads/recoveryfs.tar.zx /run/media/george/recoveryfs


[1/22/2022 8:03 PM] btwarch147
Thats the exact command I used


[1/22/2022 8:03 PM] tux_linux
Actually, yes, last time I did that I didn't have this PC


[1/22/2022 8:03 PM] tux_linux
Check the size


[1/22/2022 8:03 PM] btwarch147
184MB


[1/22/2022 8:03 PM] tux_linux
Should be around 60-70M maybe?


[1/22/2022 8:03 PM] tux_linux
Oh


[1/22/2022 8:03 PM] tux_linux
Well


[1/22/2022 8:03 PM] tux_linux
I guess that's good


[1/22/2022 8:03 PM] btwarch147
https://drive.google.com/file/d/1B84v25dhRA1Xss7IYsp5zbICvxv7ahW6/view?usp=sharing

{Embed}
https://drive.google.com/file/d/1B84v25dhRA1Xss7IYsp5zbICvxv7ahW6/view?usp=sharing
recoveryfs.tar.zx


[1/22/2022 8:03 PM] btwarch147
Here's the link


[1/22/2022 8:03 PM] tux_linux
Anyway if ever something really bad happens you've got the full eMMC backup


[1/22/2022 8:03 PM] tux_linux
Thanks !


[1/22/2022 8:04 PM] tux_linux
You might want to rename it ;p
(zx)


[1/22/2022 8:04 PM] btwarch147
Whoops!


[1/22/2022 8:04 PM] tux_linux
It's not an issue; thankfully Linux isn't like Windows when it comes to file names


[1/22/2022 8:05 PM] tux_linux
So yeah, umount partition 2 and tar up the rootfs on partition 1


[1/22/2022 8:05 PM] btwarch147
So sam command?


[1/22/2022 8:06 PM] tux_linux
Yeah, just change the output file name


[1/22/2022 8:06 PM] btwarch147
Do you want me to send you that as well on gdrive


[1/22/2022 8:06 PM] tux_linux
No it's fine


[1/22/2022 8:07 PM] tux_linux
Basically the only thing you need to restore an entire Kobo from scratch is the recoveryfs


[1/22/2022 8:07 PM] tux_linux
But the recoveryfs contains the rootfs file (`fs.tgz`) that was there at the launch of the device, and it is never updated


[1/22/2022 8:07 PM] btwarch147
Now I've seen how the uboot prompt works it definetly seems like it would be hard to brick it


[1/22/2022 8:07 PM] btwarch147
Its finished


[1/22/2022 8:08 PM] tux_linux
So I suggest you back up the current rootfs partition so that you won't have to go through the whole update process again


[1/22/2022 8:08 PM] tux_linux
nice


[1/22/2022 8:08 PM] tux_linux
You might as well do the same thing for the onboard partition to back up the database and etc.


[1/22/2022 8:09 PM] btwarch147
Its running


[1/22/2022 8:09 PM] tux_linux
What's your `fdisk -l` output on the Kobo exported block device?


[1/22/2022 8:10 PM] btwarch147
The original dd?


[1/22/2022 8:10 PM] tux_linux
No, just as it is now


[1/22/2022 8:10 PM] tux_linux
To see the partition layout


[1/22/2022 8:10 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-EDE07.png


[1/22/2022 8:10 PM] tux_linux (pinned)
When everything is finished it should look like that:
```
Disk /dev/sdb: 7.28 GiB, 7818182656 bytes, 15269888 sectors
Disk model: UMS disk 0      
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00000000

Device     Boot    Start      End Sectors  Size Id Type
/dev/sdb1          49152    79871   30720   15M 83 Linux
/dev/sdb2       10590210 15269887 4679678  2.2G  5 Extended
/dev/sdb3         104448  4298752 4194305    2G  b W95 FAT32
/dev/sdb4        4298753 10590209 6291457    3G 83 Linux
/dev/sdb5       10590226 11614225 1024000  500M 83 Linux
/dev/sdb6       11614242 12138529  524288  256M 83 Linux
/dev/sdb7       12138546 12662833  524288  256M 83 Linux
```


[1/22/2022 8:11 PM] tux_linux
Ok very good


[1/22/2022 8:11 PM] tux_linux
So when it's finished backing up you can umount all partitions and launch fdisk on the PC


[1/22/2022 8:11 PM] tux_linux
Have you used fdisk before?


[1/22/2022 8:11 PM] btwarch147
Yes


[1/22/2022 8:11 PM] btwarch147
But I've not used it much


[1/22/2022 8:12 PM] tux_linux
Ok so basically create a new partition layout with `o` first


[1/22/2022 8:12 PM] btwarch147
Installing arch many times...

{Reactions}
😅 

[1/22/2022 8:12 PM] btwarch147
Might take a bit


[1/22/2022 8:12 PM] btwarch147
I've got like 4Gb of books


[1/22/2022 8:12 PM] tux_linux
no problem


[1/22/2022 8:14 PM] tux_linux
So when making the partition layout, you have to follow **exactly** the sectors numbering I posted above

{Reactions}
👍 

[1/22/2022 8:14 PM] tux_linux
I'll guide you


[1/22/2022 8:15 PM] tux_linux
Example for partition 1 (`boot`):
```
nicolas@fedora ~> sudo fdisk /dev/sdb
[sudo] password for nicolas: 

Welcome to fdisk (util-linux 2.37.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): o
Created a new DOS disklabel with disk identifier 0x9227c7eb.

Command (m for help): p
Disk /dev/sdb: 7.28 GiB, 7818182656 bytes, 15269888 sectors
Disk model: UMS disk 0      
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x9227c7eb

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-15269887, default 2048): 49152
Last sector, +/-sectors or +/-size{K,M,G,T,P} (49152-15269887, default 15269887): 79871

Created a new partition 1 of type 'Linux' and of size 15 MiB.
Partition #1 contains a ext4 signature.

Do you want to remove the signature? [Y]es/[N]o: y

The signature will be removed by a write command.

Command (m for help): p
Disk /dev/sdb: 7.28 GiB, 7818182656 bytes, 15269888 sectors
Disk model: UMS disk 0      
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x9227c7eb

Device     Boot Start   End Sectors Size Id Type
/dev/sdb1       49152 79871   30720  15M 83 Linux

Filesystem/RAID signature on partition 1 will be wiped.

Command (m for help): q

nicolas@fedora ~>
```


[1/22/2022 8:30 PM] btwarch147
I think it’s almost done


[1/22/2022 8:30 PM] btwarch147
So this will remove all the existing partitions


[1/22/2022 8:46 PM] btwarch147
@tux-linux  All done now


[1/22/2022 9:09 PM] btwarch147
Thanks so much for your help so far

{Reactions}
👍 

[1/22/2022 9:30 PM] tux_linux
Yeah but wait


[1/22/2022 9:30 PM] tux_linux
I'm busy right now
I'll get back to you in about half an hour

{Reactions}
👍 

[1/22/2022 10:03 PM] tux_linux
Did you delete the partition table yet?
Don't do it


[1/22/2022 10:03 PM] tux_linux
(if you didn't do it yet)


[1/22/2022 10:03 PM] tux_linux
Instead, delete all the partitions


[1/22/2022 10:04 PM] tux_linux
It should not be an issue to delete the partition table but it's just to be safe


[1/22/2022 10:04 PM] btwarch147
so i need to use fdisk


[1/22/2022 10:05 PM] btwarch147
and follow the example you sent


[1/22/2022 10:07 PM] tux_linux
Yeah, but don't type o


[1/22/2022 10:08 PM] tux_linux
Wait a sec

{Reactions}
👍 

[1/22/2022 10:09 PM] tux_linux
It should look like this


[1/22/2022 10:10 PM] tux_linux
Try to make it look like this

{Attachments}
/mnt/data/projects/git/conversations/media/message-5ABA9.txt


[1/22/2022 10:11 PM] tux_linux
Here I had 7 partitions already, but in your case there are only three.
Start by deleting all of them like the first one where I typed `d` and chose `1` as the partition number. Replace `1` with `2` and `3` then


[1/22/2022 10:12 PM] btwarch147
Do ineed to do anything with partitions 1 and 2 once i've delted them?


[1/22/2022 10:13 PM] tux_linux
Not yet


[1/22/2022 10:14 PM] btwarch147
So i should write


[1/22/2022 10:14 PM] btwarch147
ill send the output of p to make sure i've done it right


[1/22/2022 10:14 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DE724.png


[1/22/2022 10:15 PM] tux_linux
P1 should end at sector 79871


[1/22/2022 10:16 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-0F7C6.png


[1/22/2022 10:16 PM] btwarch147
So do these partitions contain the bootloader


[1/22/2022 10:16 PM] tux_linux
No


[1/22/2022 10:16 PM] tux_linux
Bootloader is in unpartitioned space


[1/22/2022 10:17 PM] btwarch147
That’s good to know


[1/22/2022 10:17 PM] tux_linux
Before sector 49152


[1/22/2022 10:17 PM] btwarch147
I did have the option to write a partition there


[1/22/2022 10:17 PM] btwarch147
would it have crashed?


[1/22/2022 10:17 PM] tux_linux
That's why you don't want your partition before this sector


[1/22/2022 10:18 PM] btwarch147
Ah


[1/22/2022 10:18 PM] tux_linux
No, not immediately I think


[1/22/2022 10:18 PM] tux_linux
Once you'd have started writing things there, absolutely, yes


[1/22/2022 10:18 PM] btwarch147
So i should write these changes now?


[1/22/2022 10:18 PM] tux_linux
What's your p output?


[1/22/2022 10:18 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DD56F.png


[1/22/2022 10:19 PM] tux_linux
All good


[1/22/2022 10:19 PM] btwarch147
Whoops


[1/22/2022 10:19 PM] btwarch147
forgot to unmount them


[1/22/2022 10:19 PM] btwarch147
have to do it again


[1/22/2022 10:19 PM] tux_linux
Quit fdisk and start over to be sure


[1/22/2022 10:19 PM] tux_linux
Don't type `o`


[1/22/2022 10:20 PM] btwarch147
Actually seems to have worked


[1/22/2022 10:20 PM] tux_linux
Oh


[1/22/2022 10:20 PM] btwarch147
I've redone the ums0 mmc0 command as well


[1/22/2022 10:20 PM] btwarch147
to make sure


[1/22/2022 10:20 PM] tux_linux
Ok if you reset the board nothing burnt into fire?


[1/22/2022 10:21 PM] btwarch147
Burnt into fire?


[1/22/2022 10:21 PM] btwarch147
So reboot


[1/22/2022 10:21 PM] tux_linux
I mean, does U-Boot start


[1/22/2022 10:21 PM] btwarch147
It's still running


[1/22/2022 10:21 PM] btwarch147
But shall I try a restart


[1/22/2022 10:21 PM] tux_linux
Yes


[1/22/2022 10:22 PM] tux_linux
It's running in RAM


[1/22/2022 10:22 PM] tux_linux
I want to see if it is still in the eMMC


[1/22/2022 10:22 PM] btwarch147
Yup


[1/22/2022 10:22 PM] btwarch147
Reboot still working


[1/22/2022 10:22 PM] tux_linux
Nice!


[1/22/2022 10:22 PM] btwarch147
I got to the kobo login shell when i missed it first time


[1/22/2022 10:22 PM] tux_linux
Very good


[1/22/2022 10:22 PM] btwarch147
so doesn't look like it removed the partitions


[1/22/2022 10:23 PM] btwarch147
oh


[1/22/2022 10:23 PM] tux_linux
What


[1/22/2022 10:23 PM] btwarch147
so tahts good?


[1/22/2022 10:23 PM] tux_linux
It should have removed them


[1/22/2022 10:23 PM] btwarch147
Yep


[1/22/2022 10:23 PM] tux_linux
Only the first one should be there


[1/22/2022 10:23 PM] btwarch147
Definetly gone


[1/22/2022 10:23 PM] tux_linux
Oh ok


[1/22/2022 10:24 PM] tux_linux
So now so the same thing for the other partitions


[1/22/2022 10:24 PM] tux_linux
Try to make it look like this


[1/22/2022 10:25 PM] tux_linux
Follow the sectors and types


[1/22/2022 10:25 PM] tux_linux
Tell me if you need help


[1/22/2022 10:25 PM] btwarch147
Should they all be primary partitions?


[1/22/2022 10:25 PM] tux_linux
No


[1/22/2022 10:25 PM] tux_linux
Look on the left column


[1/22/2022 10:25 PM] tux_linux
It's specified there


[1/22/2022 10:26 PM] btwarch147
So only the first one is primary


[1/22/2022 10:26 PM] btwarch147
the rest are logical


[1/22/2022 10:28 PM] tux_linux
Yeah


[1/22/2022 10:28 PM] tux_linux
Hm no


[1/22/2022 10:29 PM] tux_linux
If the start sector is greater than part 2 start sector, it's a logical one


[1/22/2022 10:29 PM] tux_linux
Otherwise it's primary

{Reactions}
👍 

[1/22/2022 10:30 PM] tux_linux
Send me your p output before writing changes


[1/22/2022 10:33 PM] btwarch147
Partition 5 doesn't seem to want to create


[1/22/2022 10:33 PM] btwarch147
I've got a value out of range error


[1/22/2022 10:33 PM] btwarch147
I'll send p output

{Reactions}
👍 

[1/22/2022 10:33 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D41E6.png


[1/22/2022 10:34 PM] tux_linux
Pinned a message.


[1/22/2022 10:35 PM] tux_linux
This makes no sense


[1/22/2022 10:36 PM] tux_linux
Well


[1/22/2022 10:36 PM] tux_linux
Can you cancel that operation and write changes?


[1/22/2022 10:36 PM] tux_linux
You'll have the first 4


[1/22/2022 10:37 PM] btwarch147
Done


[1/22/2022 10:37 PM] tux_linux
Reboot in the Kobo and get to the Linux initrd
Use the built-in fdisk


[1/22/2022 10:37 PM] tux_linux
It's more stripped down and maybe won't spit out an error like that

{Reactions}
👍 

[1/22/2022 10:37 PM] tux_linux
The block device in the Kobo is mmcblk0


[1/22/2022 10:38 PM] btwarch147
Looks like I can now


[1/22/2022 10:39 PM] tux_linux
Hehe


[1/22/2022 10:40 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CEC3D.png


[1/22/2022 10:40 PM] btwarch147
Here's the final output


[1/22/2022 10:41 PM] tux_linux
If you compare it to the ones I gave above and nothing seems abnormal, go for it and write


[1/22/2022 10:42 PM] btwarch147
Looks good to me


[1/22/2022 10:42 PM] btwarch147
Done


[1/22/2022 10:42 PM] tux_linux
Only thing is that your 4G of books won't fit on the onboard partition
Sorry


[1/22/2022 10:42 PM] tux_linux
Nice !


[1/22/2022 10:42 PM] btwarch147
Thats fine


[1/22/2022 10:42 PM] btwarch147
There's lots of magazines and stuff i can delete


[1/22/2022 10:42 PM] tux_linux
Ok reboot and see if nothing has exploded


[1/22/2022 10:42 PM] btwarch147
Looks good


[1/22/2022 10:42 PM] btwarch147
Starting kernel


[1/22/2022 10:43 PM] btwarch147
Back to logon


[1/22/2022 10:43 PM] tux_linux
Nice!!


[1/22/2022 10:43 PM] btwarch147
That was the risk part i assume


[1/22/2022 10:44 PM] tux_linux
Yeah


[1/22/2022 10:44 PM] tux_linux
Most of it


[1/22/2022 10:44 PM] tux_linux
Now we have two options


[1/22/2022 10:45 PM] tux_linux
First, I send you all the signed packages but it'll take a fair while (200kb/s upload speed)


[1/22/2022 10:45 PM] tux_linux
Second, you can sign the packages yourself with the emulator private key available publicly here: https://github.com/Kobo-InkBox/emu
But you'll have to sign all future updates too manually

{Embed}
https://github.com/Kobo-InkBox/emu
GitHub - Kobo-InkBox/emu: InkBox OS emulator
InkBox OS emulator. Contribute to Kobo-InkBox/emu development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/emu-884F6


[1/22/2022 10:46 PM] btwarch147
Could you send them?


[1/22/2022 10:46 PM] tux_linux
actually there https://github.com/Kobo-InkBox/emu/blob/main/keys/private.pem


[1/22/2022 10:46 PM] btwarch147
Then we can pick this up some time tommorow (for me)


[1/22/2022 10:46 PM] tux_linux
Ok


[1/22/2022 10:46 PM] btwarch147
Thanks so much for your help so far

{Reactions}
👍 

[1/22/2022 10:46 PM] tux_linux
Well, the rootfs will probably have finished uploading in like 20mins


[1/22/2022 10:47 PM] tux_linux
But the user partition will take longer (~400MB)


[1/22/2022 10:47 PM] btwarch147
I probably should go to bed as well, got to get up fairly early tomorrow

{Reactions}
👍 

[1/22/2022 10:48 PM] btwarch147
Is it possible to flash nickel for now?


[1/22/2022 10:48 PM] tux_linux
Oh


[1/22/2022 10:48 PM] tux_linux
Yes


[1/22/2022 10:49 PM] tux_linux
Hmm get in ums mode


[1/22/2022 10:49 PM] btwarch147
done


[1/22/2022 10:49 PM] tux_linux
`mkfs.ext4 /dev/sdh6`
`mkfs.vfat /dev/sdh3`


[1/22/2022 10:50 PM] btwarch147
done


[1/22/2022 10:50 PM] tux_linux
Mount `/dev/sdh6` somewhere
What's the capacity to be sure?


[1/22/2022 10:50 PM] btwarch147
268MB


[1/22/2022 10:50 PM] tux_linux
Extract rootfs.tar.xz there


[1/22/2022 10:50 PM] tux_linux
alright good


[1/22/2022 10:50 PM] tux_linux
Extract with sudo


[1/22/2022 10:53 PM] tux_linux
Don't forget to `sync` before unmounting

{Reactions}
👍 

[1/22/2022 10:53 PM] btwarch147
It's extracting

{Reactions}
👍 

[1/22/2022 10:54 PM] tux_linux
Since your books won't fit all in the onboard storage, you might just start with the initial setup and put the books you want from there. Otherwise database will be confused

{Reactions}
👍 

[1/22/2022 10:54 PM] tux_linux
But at least you'll be on the latest firmware


[1/22/2022 10:55 PM] btwarch147
All done


[1/22/2022 10:55 PM] tux_linux
Ok


[1/22/2022 10:55 PM] tux_linux
Now throw `zImage-E70K00` in sdh3


[1/22/2022 10:56 PM] tux_linux
and rename it to `zImage-nickel`
as you did before


[1/22/2022 10:56 PM] tux_linux
`sync` and that \*should\* be enough for it to boot

{Reactions}
👍 

[1/22/2022 10:58 PM] tux_linux
So when it starts to say "Hit any key to stop auto-boot" once the kernel has started, press repeatedly on the power button and/or on one of the page turn buttons


[1/22/2022 10:59 PM] btwarch147
Sucsess!


[1/22/2022 10:59 PM] btwarch147
Brilliant

{Reactions}
😀 

[1/22/2022 11:00 PM] tux_linux
Thanks!


[1/22/2022 11:00 PM] tux_linux
Nice that it works!


[1/22/2022 11:00 PM] tux_linux
And Nickel doesn't know nothing about it


[1/22/2022 11:00 PM] btwarch147
I mean


[1/22/2022 11:01 PM] btwarch147
I've got to re set it up


[1/22/2022 11:01 PM] btwarch147
But thats fine


[1/22/2022 11:01 PM] btwarch147
Although it has saved my wifi


[1/22/2022 11:01 PM] btwarch147
Very strange


[1/22/2022 11:02 PM] tux_linux (pinned)
Caution though; when there will be updates, it will try to flash a kernel which obviously won't work because the bootargs are set to `root=/dev/mmcblk0p1` and rootfs is now at `mmcblk0p6`.
This might lead your Kobo to be un-bootable. Disable automatic sync/updates.
If it happens, don't panic (I did), connect your Kobo on the serial port and fire up `fastboot 0` to flash `zImage-spl` and all should be back in working order.
You should also replace `zImage-nickel` in p3 by the new `zImage-E70K00` provided by the firmware update.

{Reactions}
👍 

[1/22/2022 11:02 PM] tux_linux
Maybe credentials are stored in unpartitioned space


[1/22/2022 11:03 PM] btwarch147
Thank you very much

{Reactions}
👍 

[1/22/2022 11:03 PM] btwarch147
I'll let you know when I'm ready to install inkbox...

{Reactions}
👍 

[1/22/2022 11:09 PM] daboone72
Hi Well I'm here too.


[1/22/2022 11:09 PM] tux_linux
Hello!


[1/22/2022 11:09 PM] daboone72
just reading about the getting a serial connection finally a use for old ethernet cable I  haven't thrown out


[1/22/2022 11:09 PM] daboone72
And a bunch of toothpicks :-0


[1/22/2022 11:10 PM] tux_linux
You won't need toothpicks with Ethernet cables ;p


[1/22/2022 11:10 PM] tux_linux
But yeah, even without soldering output is clear and without any garbage when you get the wires put right


[1/22/2022 11:10 PM] daboone72
Actually I have a USB to serial dongle


[1/22/2022 11:11 PM] daboone72
For Astronomy most telescopes are serial at heart


[1/22/2022 11:11 PM] daboone72
I've found an image of the Clara HD board


[1/22/2022 11:11 PM] tux_linux
Did you receive it yet?


[1/22/2022 11:11 PM] daboone72
Won't be till next week

{Reactions}
👍 

[1/22/2022 11:12 PM] tux_linux
I ordered a tiny eInk screen from China on Jan 6... still hasn't arrived ;p


[1/22/2022 11:12 PM] tux_linux
But I don't worry about it because the Banana Pi M2 Zero and Lichee Pi Zero both took one month to come


[1/22/2022 11:12 PM] daboone72
That's interesting the GLO HD has two serials


[1/22/2022 11:13 PM] tux_linux
The Touches have three


[1/22/2022 11:13 PM] tux_linux
Only one is working


[1/22/2022 11:13 PM] daboone72


{Attachments}
/mnt/data/projects/git/conversations/media/HighResGloAndClara-9CC78.jpg


[1/22/2022 11:13 PM] tux_linux
You have to write code to get the other two up


[1/22/2022 11:13 PM] tux_linux
Glo HD has three actually


[1/22/2022 11:14 PM] daboone72
I see it bottom right


[1/22/2022 11:14 PM] tux_linux
...and bottom left


[1/22/2022 11:14 PM] tux_linux
No


[1/22/2022 11:14 PM] tux_linux
It has four 😅


[1/22/2022 11:14 PM] daboone72
yes four 🙂


[1/22/2022 11:15 PM] tux_linux
Two at the top


[1/22/2022 11:15 PM] tux_linux
That's ridiculous


[1/22/2022 11:15 PM] tux_linux
I think the correct one is either J4 or J9 IIRC


[1/22/2022 11:15 PM] tux_linux
Not any of the ones at the bottom


[1/22/2022 11:16 PM] tux_linux
I'm worried about the Wi-Fi chip I saw though, I thought it was some RTL8189 thingy


[1/22/2022 11:16 PM] tux_linux
But actually it's the same shitty one that is in the Mini/Touch/Glo


[1/22/2022 11:16 PM] daboone72
Interesting I'd have thought J1


[1/22/2022 11:16 PM] tux_linux
So uhm yeah, you made a good choice with the Clara HD


[1/22/2022 11:17 PM] tux_linux
Well, with mine (half-broken), it's the ones at the top


[1/22/2022 11:17 PM] daboone72
Yes we can definitely get there it's already running on postmarket OS.


[1/22/2022 11:17 PM] daboone72
Annotated

{Attachments}
/mnt/data/projects/git/conversations/media/HighResGloAndClaraAnnotated-55929.jpg


[1/22/2022 11:17 PM] tux_linux
It's the same driver as the Libra I guess, which is already working with Wi-Fi


[1/22/2022 11:18 PM] tux_linux
Nice


[1/22/2022 11:18 PM] tux_linux
I guess some of the non-punched soldering headers might also be serial ports too


[1/22/2022 11:18 PM] daboone72
I was looking for the tell tale Rx Tx as well can't see any


[1/22/2022 11:19 PM] tux_linux
But that doesn't mean having a working driver is impossible


[1/22/2022 11:19 PM] tux_linux
Sometimes you don't get them...


[1/22/2022 11:19 PM] daboone72
Yeah that's fine there's a driver for that


[1/22/2022 11:19 PM] daboone72
I recall seeing it mentioned


[1/22/2022 11:19 PM] tux_linux
I had a vTech Storio (kid's tablet) I opened once and it of course ran Linux
Quite a wild and thrilling experience


[1/22/2022 11:20 PM] tux_linux
There weren't any indications of where the serial port was


[1/22/2022 11:20 PM] daboone72
I won't need to image the eMMC for the Clara at least


[1/22/2022 11:20 PM] tux_linux
No
Well you can backup the SD


[1/22/2022 11:21 PM] daboone72
I can image it and clone it.


[1/22/2022 11:21 PM] daboone72
Win32 Disk Imager my preferred get some kind of read verify

{Reactions}
👍 

[1/22/2022 11:21 PM] tux_linux
I also once hacked a LeapPad that ran Linux 2.6 https://www.youtube.com/watch?v=6EfoECqD9Pk

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=6EfoECqD9Pk
LeapPad 1 Linux hacking
/mnt/data/projects/git/conversations/media/maxresdefault-C19BB.jpg


[1/22/2022 11:22 PM] daboone72
This is all new to me but  will be fun I haven't used minicom in ages.


[1/22/2022 11:22 PM] daboone72
Since I was debugging the old PPP dial up 🙂


[1/22/2022 11:22 PM] daboone72
Cool


[1/22/2022 11:22 PM] tux_linux
It's strange, your generation had the luxury of the serial port, serial connector that you didn't have to plug in wires by yourself.
Now it's like we're getting back in time ;p


[1/22/2022 11:22 PM] daboone72
But hacking devices I haven't done it before. Pleased to read they are not too hard to brick


[1/22/2022 11:23 PM] tux_linux
That LeapPad had a 2G eMMC


[1/22/2022 11:24 PM] daboone72
Four serials on the Glo wonder if you can directly write a new boot firmware access to the flash etc


[1/22/2022 11:25 PM] tux_linux
Maybe
I guess there could be a way to connect an SPI flash somewhere on the board too and get the SoC to start a copy of U-Boot stored there


[1/22/2022 11:25 PM] tux_linux
The Lichee Pi Nano does that


[1/22/2022 11:25 PM] daboone72
Ahh good to knwo.

{Reactions}
👍 

[1/22/2022 11:27 PM] daboone72
I'm unfamiliar with reading motherboads is TP test point?


[1/22/2022 11:27 PM] tux_linux
I don't know either


[1/22/2022 11:28 PM] tux_linux
But yeah, probably


[1/22/2022 11:28 PM] tux_linux
Maybe for JTAG


[1/22/2022 11:28 PM] tux_linux
Which is even lower-level debugging


[1/22/2022 11:28 PM] tux_linux
At like SoC-level


[1/22/2022 11:28 PM] daboone72
https://www.electronics-notes.com/articles/analogue_circuits/circuits-symbols-diagrams/electronics-circuit-symbols-overview.php

{Embed}
https://www.electronics-notes.com/articles/analogue_circuits/circuits-symbols-diagrams/electronics-circuit-symbols-overview.php
Electronic Circuit Symbols: Component Schematic Symbols » Electroni...
Electronic circuits are key to designing and defining electronic circuits: each different type of component has its own circuit symbol enabling circuits to be drawn and read concisely.


[1/22/2022 11:28 PM] daboone72
It is Test Point


[1/22/2022 11:29 PM] tux_linux
Nice


[1/22/2022 11:30 PM] daboone72
Where on earth would we be without Georg Ohm and Ohm's Law


[1/22/2022 11:31 PM] tux_linux
Sadly, I'm in high school and I'm 16 so I can't really answer your question ;p


[1/22/2022 11:31 PM] daboone72
Blimy I had you for older and you wrote an OS already


[1/22/2022 11:32 PM] tux_linux
I was 8 the first time I started using Linux


[1/22/2022 11:33 PM] daboone72
Great start I started I think aged 12 wasn't doing great things back then

{Reactions}
👍 

[1/22/2022 11:33 PM] tux_linux
It was with Ubuntu 13.10 for me


[1/22/2022 11:33 PM] daboone72
Raspberry Pi?


[1/22/2022 11:34 PM] tux_linux
No, just an Acer Aspire laptop that ran Windows XP


[1/22/2022 11:34 PM] tux_linux
And I completely wiped the drive without knowing what I was doing hehe


[1/22/2022 11:34 PM] daboone72
Ah you learn fast


[1/22/2022 11:34 PM] tux_linux
But the PC was mine so it wasn't that bad


[1/22/2022 11:35 PM] tux_linux
I think I was 7 when I started programming in Visual Basic


[1/22/2022 11:36 PM] daboone72
Excellent and then to C I guess and then C++.


[1/22/2022 11:36 PM] tux_linux
No, more like to Python, then C++, then Bash, then C 😅


[1/22/2022 11:36 PM] tux_linux
And even now my C knowledge is pretty limited compared to my C++ knowledge


[1/22/2022 11:38 PM] daboone72
Well I can see you working on the color nano tech e-readers in the future will happily buy one from your company 😉


[1/22/2022 11:38 PM] daboone72
https://goodereader.com/blog/e-paper/nanobrick-introduces-worlds-first-color-e-paper-film-using-nanotechnology

{Embed}
Sovan Mandal
https://goodereader.com/blog/e-paper/nanobrick-introduces-worlds-first-color-e-paper-film-using-nanotechnology
Nanobrick introduces world’s first color e-paper film using nanotec...
Nanobrick announced they have been able to develop a full color e-paper film using photonic crystals, the South Korean publication, Asiae reported. The company that specializes in developing advanced materials using nano particles said they achieved the feat through extensive modifications of the nanomaterials as well as process improvements whi...
/mnt/data/projects/git/conversations/media/nanobrick-full-color-e-paper-display-81BC0.jpeg


[1/22/2022 11:39 PM] daboone72
When you graduate I'd imagine the tech will be hitting the market.


[1/22/2022 11:39 PM] tux_linux
Sometimes I just want to get back to 2013 when I had that computer and life was so much simpler (I was still a kid).
Like, get back to the time of Ubuntu 14.04, blindly follow online tutorials, play Minetest and just be happy in life
Don't you? (well, scale 2013 to your first steps in Linux)


[1/22/2022 11:39 PM] daboone72
I did love the early days of installing every daemon I could lay my hands on for fun


[1/22/2022 11:40 PM] tux_linux
If I remember some things well I did everything I could to get my laptop to look like a Mac


[1/22/2022 11:40 PM] daboone72
I had a lovely bound copy of the https://tldp.org/  on  dictionary like paper.

{Embed}
https://tldp.org/
The Linux Documentation Project
The Linux Documentation Project is working
towards developing free, high quality documentation for the Linux operating
system. The overall goal of the LDP is to collaborate in all of the issues
of Linux documentation.


[1/22/2022 11:40 PM] daboone72
All the Howto's printed


[1/22/2022 11:41 PM] tux_linux
I remember typing precisely those commands without knowing how to copy-paste into a terminal https://www.noobslab.com/2014/11/mbuntu-macbuntu-1410-transformation.html

{Embed}
https://www.noobslab.com/2014/11/mbuntu-macbuntu-1410-transformation.html
MBuntu (MacBuntu) 14.04 Transformation Pack Is Ready For Ubuntu 14.04
Tutorials for Ubuntu Linux Mint and other Linux versions. We serve themes and conky, Applications, wallpapers, tweaks/tip, tutorial videos & many more
/mnt/data/projects/git/conversations/media/mac-3-C1F28.jpg


[1/22/2022 11:41 PM] tux_linux
ooh nice


[1/22/2022 11:41 PM] daboone72
I think that's why Gentoo  is still popular, get back to just building the software.


[1/22/2022 11:41 PM] daboone72
That's nice I was a Mac user from way back.


[1/22/2022 11:42 PM] daboone72
My first Computer LCII Pizza box


[1/22/2022 11:42 PM] daboone72
https://en.wikipedia.org/wiki/Macintosh_LC_II

{Embed}
https://en.wikipedia.org/wiki/Macintosh_LC_II
Macintosh LC II
The Macintosh LC II is a personal computer designed, manufactured, and sold by Apple Computer from March 1992 to March 1993. The LC II is an update to the original Macintosh LC, replacing its Motorola 68020 processor with a 68030 and increasing the onboard memory to 4 MB. The LC II was priced at US$1,699, fully $800 less than the original LC whe...
/mnt/data/projects/git/conversations/media/Macintosh_LC_II-97BE2.jpg


[1/22/2022 11:42 PM] tux_linux
Wow that's a **way** back


[1/22/2022 11:42 PM] daboone72
Cost me a fortune with a color monitor


[1/22/2022 11:42 PM] tux_linux
Do you still have it?


[1/22/2022 11:42 PM] daboone72
No sadly it was too expensive to keep


[1/22/2022 11:43 PM] tux_linux
Aah
Well, nice anyways


[1/22/2022 11:43 PM] daboone72
I went from that to Linux so needed an X86 started with a 386 as I recall


[1/22/2022 11:43 PM] tux_linux
I have an iMac G3 at home, very first generation (Rev. A)


[1/22/2022 11:43 PM] tux_linux
I got it from someone last year


[1/22/2022 11:43 PM] tux_linux
233mhz CPU and 32MB of RAM
I upgraded the RAM to 256MB because it wasn't bearable


[1/22/2022 11:44 PM] tux_linux
Early days of Mac OS X were sweet


[1/22/2022 11:44 PM] daboone72
Well actually the LCII wasn't my first strictly my first was an Atari 600XL but first Mac of my own


[1/22/2022 11:44 PM] tux_linux
The Atari ran BASIC?


[1/22/2022 11:45 PM] tux_linux
Since you live in the UK I would've thought you could've started with a BBC Micro


[1/22/2022 11:45 PM] daboone72
Yes it did


[1/22/2022 11:45 PM] tux_linux
nice


[1/22/2022 11:45 PM] daboone72
Well I grew up in New Zealand actually


[1/22/2022 11:45 PM] tux_linux
ooh


[1/22/2022 11:46 PM] daboone72
The BBC made it out there but was ridiculously expensive.


[1/22/2022 11:46 PM] tux_linux
I guess the import fees were quite high


[1/22/2022 11:46 PM] daboone72
I almost ended up with a ZX Sprectrum but the Atari keyboards were better


[1/22/2022 11:46 PM] tux_linux
I think I agree even if I didn't actually ever own any of those


[1/22/2022 11:46 PM] daboone72
And everything was polished there were a series of good books on Coding

{Reactions}
👍 

[1/22/2022 11:47 PM] daboone72
I still have the Atari 🙂


[1/22/2022 11:47 PM] tux_linux
very cool


[1/22/2022 11:47 PM] tux_linux
The iMac G3 is quite a nice machine too; it can run latest OpenBSD


[1/22/2022 11:47 PM] daboone72
It can run on bootable cartridges will was an excellent idea I haven't powered it up in years but I bet they still work


[1/22/2022 11:48 PM] daboone72
No moving parts etc


[1/22/2022 11:48 PM] tux_linux
Maybe yeah


[1/22/2022 11:48 PM] tux_linux
Though sometimes you can have some surprises with them


[1/22/2022 11:49 PM] daboone72
If the solder joints have gone but  then good solder back then

{Reactions}
👍 

[1/23/2022 12:00 AM] tux_linux
Pinned a message.


[1/23/2022 12:11 AM] daboone72
I thought Pin mapping was worth pinning as well.


[1/23/2022 12:11 AM] daboone72
Enhanced Pin mapping Raspberry Pi 3B 
Kobo Tx -> Pi Rx -> GPIO 15
Kobo Rx -> Pi Tx -> GPIO 14 
Kobo GND -> Pi GND


[1/23/2022 12:12 AM] daboone72
What does "ums 0 mmc 0" do?


[1/23/2022 2:37 PM] tux_linux
Export the entire eMMC over USB and show up as a block device in Linux
Very useful


[1/23/2022 2:38 PM] tux_linux
As if you had connected an SD card to the computer


[1/23/2022 3:02 PM] daboone72
Must be a more recent or applicable doc somewhere couldn't see ums in this one. https://mediawiki.compulab.com/w/index.php?title=U-Boot:_Quick_reference#USB_support

{Embed}
https://mediawiki.compulab.com/w/index.php?title=U-Boot:_Quick_reference
Index.php


[1/23/2022 6:12 PM] btwarch147
I'm ready to continue


[1/23/2022 6:12 PM] btwarch147
Could you send the files?


[1/23/2022 6:20 PM] tux_linux
Whoops, I completely forgot that
I'm sorry

In the meantime I learnt that I had caught COVID, so that's awesome news (sarcasm)...
I'm doing fairly well so far.


[1/23/2022 6:20 PM] tux_linux
I'll try to make you a bundle today

{Reactions}
👍 

[1/23/2022 6:20 PM] btwarch147
Get well soon!

{Reactions}
👍 

[1/23/2022 7:09 PM] tux_linux
PM interruption


[1/23/2022 7:10 PM] tux_linux
So you have the key pair safe somewhere?


[1/23/2022 7:10 PM] btwarch147
Yup


[1/23/2022 7:10 PM] btwarch147
I copied the contents of /tmp/key somewhere


[1/23/2022 7:10 PM] btwarch147
Is that what I needed to do?


[1/23/2022 7:10 PM] tux_linux
You have the private key too?


[1/23/2022 7:10 PM] btwarch147
yes


[1/23/2022 7:10 PM] btwarch147
kobox-graphic-public.pem  kobox-nographic-public.pem  private.pem  public.pem


[1/23/2022 7:10 PM] tux_linux
Ok hang on a little bit


[1/23/2022 7:14 PM] tux_linux
Go clone the emu repo


[1/23/2022 7:14 PM] tux_linux
https://github.com/Kobo-InkBox/emu

{Embed}
https://github.com/Kobo-InkBox/emu
GitHub - Kobo-InkBox/emu: InkBox OS emulator
InkBox OS emulator. Contribute to Kobo-InkBox/emu development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/emu-884F6


[1/23/2022 7:14 PM] tux_linux
Do
`cat sd/user.sqsh.* > user.sqsh`


[1/23/2022 7:15 PM] tux_linux
`unsquashfs -d /some/persistent/dir user.sqsh`


[1/23/2022 7:16 PM] tux_linux
Leave that aside for the moment


[1/23/2022 7:16 PM] tux_linux
We'll create the rootfs archive and sign it, then put it into the Kobo


[1/23/2022 7:17 PM] tux_linux
So `sudo git clone https://github.com/Kobo-InkBox/rootfs`
(sudo is important)


[1/23/2022 7:17 PM] btwarch147
FATAL ERROR: dir_scan: failed to make directory /home/george/Scripts/Software/usersqhs/, because File exists


[1/23/2022 7:17 PM] btwarch147
Got this error


[1/23/2022 7:17 PM] tux_linux
Then cd into the rootfs repo and do
`env GITDIR=${PWD} ./release.sh`


[1/23/2022 7:17 PM] btwarch147
On the unsquashfs comamnd


[1/23/2022 7:17 PM] tux_linux
Maybe you created it earlier?


[1/23/2022 7:18 PM] btwarch147
I made a new directory


[1/23/2022 7:18 PM] tux_linux
unsquashfs normally wants to create the directory by itself


[1/23/2022 7:18 PM] tux_linux
you can use `-f` to force extract into existing directory


[1/23/2022 7:18 PM] btwarch147
Read on filesystem failed because Is a directory
FATAL ERROR: Can't find a valid SQUASHFS superblock on /home/george/Scripts/Software/usersqhs/


[1/23/2022 7:19 PM] tux_linux
You put the squashfs file after the `-d` argument 😉


[1/23/2022 7:19 PM] tux_linux
Should look like that `unsquashfs -f -d /home/george/Scripts/Software/usersqhs user.sqsh`


[1/23/2022 7:19 PM] tux_linux
btw, it's `sqsh`, not `sqhs` but anyways


[1/23/2022 7:20 PM] btwarch147
Looks like it's doing something


[1/23/2022 7:20 PM] tux_linux
It means `squash` in "squashed" form ;p

{Reactions}
👍 

[1/23/2022 7:20 PM] btwarch147
finished


[1/23/2022 7:20 PM] tux_linux
Ok good


[1/23/2022 7:20 PM] tux_linux
Did you clone the rootfs repo?


[1/23/2022 7:20 PM] btwarch147
I've run the env script


[1/23/2022 7:20 PM] tux_linux
Ok, so you have `rootfs.squashfs` in parent dir?


[1/23/2022 7:21 PM] btwarch147
I do


[1/23/2022 7:21 PM] tux_linux
BTW if you didn't know squashfs is like a mountable tar archive that doesn't consume space when uncompressed on-the-fly, very useful

{Reactions}
👍 

[1/23/2022 7:21 PM] tux_linux
So do


[1/23/2022 7:21 PM] tux_linux
`openssl dgst -sha256 -sign /path/to/private.pem -out rootfs.squashfs.dgst rootfs.squashfs`


[1/23/2022 7:22 PM] btwarch147
Done


[1/23/2022 7:22 PM] tux_linux
Put your Kobo in UMS mode


[1/23/2022 7:22 PM] btwarch147
Already is


[1/23/2022 7:22 PM] tux_linux
Mount p3


[1/23/2022 7:22 PM] tux_linux
And copy rootfs.squashfs* in there


[1/23/2022 7:23 PM] tux_linux
Root directory, not in any subdirectory


[1/23/2022 7:23 PM] tux_linux
It will coexist with your books


[1/23/2022 7:23 PM] btwarch147
the rootfs we just signed?


[1/23/2022 7:23 PM] btwarch147
or both


[1/23/2022 7:24 PM] tux_linux
Digest (dgst) and rootfs


[1/23/2022 7:24 PM] tux_linux
The .dgst file is the signature

{Reactions}
👍 

[1/23/2022 7:24 PM] btwarch147
Copying

{Reactions}
👍 

[1/23/2022 7:25 PM] btwarch147
Done


[1/23/2022 7:25 PM] tux_linux
Ok nice


[1/23/2022 7:26 PM] tux_linux
Now copy `overlaymount-rootfs.squashfs` from `[emu-repo]/sd` to that partition too


[1/23/2022 7:26 PM] tux_linux
Sign it in a similar way


[1/23/2022 7:26 PM] tux_linux
`openssl dgst -sha256 -sign /path/to/private.pem -out overlaymount-rootfs.squashfs.dgst overlaymount-rootfs.squashfs`


[1/23/2022 7:26 PM] btwarch147
Looks like it already has a dgst file


[1/23/2022 7:26 PM] btwarch147
Is that not what we want?


[1/23/2022 7:26 PM] tux_linux
It's not signed against the right signature

{Reactions}
👍 

[1/23/2022 7:27 PM] tux_linux
It's signed against emu private key here https://github.com/Kobo-InkBox/emu/blob/main/keys/private.pem
which only works in emulator


[1/23/2022 7:27 PM] tux_linux
I made it available publicly because, well, it's an emulator


[1/23/2022 7:28 PM] btwarch147
Done


[1/23/2022 7:28 PM] btwarch147
I'll just cp it


[1/23/2022 7:28 PM] tux_linux
Ok now, please sync and reset the kobo and post boot output


[1/23/2022 7:28 PM] tux_linux
It should be full of errors but I want to see if everything's fine there


[1/23/2022 7:28 PM] tux_linux
Don't press on power button, let it boot InkBox kernel


[1/23/2022 7:29 PM] tux_linux
Oh, did we actually put a kernel in p1?


[1/23/2022 7:29 PM] btwarch147
Booting default InkBox kernel ...
Cannot open `/boot/zImage-inkbox': No such file or directory
umount: can't unmount /boot: Invalid argument


[1/23/2022 7:29 PM] btwarch147
Is this the relevant bit?


[1/23/2022 7:29 PM] tux_linux
Yeah ok we need to copy zImage-root there


[1/23/2022 7:29 PM] tux_linux
`cp kernel/out/n873/zImage-root /partition/1/zImage-inkbox`


[1/23/2022 7:31 PM] btwarch147
Partition 1 as in the 16MB one


[1/23/2022 7:31 PM] tux_linux
yep


[1/23/2022 7:31 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F1E4B.png


[1/23/2022 7:31 PM] tux_linux
While you're at it, do also `mkdir /partition/1/flags`


[1/23/2022 7:31 PM] btwarch147
Got an error


[1/23/2022 7:31 PM] tux_linux
Maybe you didn't format it? 😉


[1/23/2022 7:32 PM] tux_linux
`mkfs.ext4 /dev/sdh1`


[1/23/2022 7:32 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D09CE.png


[1/23/2022 7:32 PM] tux_linux
Good, that's the old Nickel rootfs part


[1/23/2022 7:32 PM] tux_linux
That's why it says rootfs


[1/23/2022 7:33 PM] tux_linux
But now Nickel rootfs is on p6


[1/23/2022 7:33 PM] btwarch147
So overwrite?


[1/23/2022 7:33 PM] tux_linux
yep


[1/23/2022 7:34 PM] btwarch147
Looks like I don't have an out directory


[1/23/2022 7:34 PM] btwarch147
In my kernel build folder


[1/23/2022 7:34 PM] tux_linux
in the kernel repo?


[1/23/2022 7:34 PM] btwarch147
Ah


[1/23/2022 7:34 PM] btwarch147
Nvm


[1/23/2022 7:34 PM] btwarch147
found it

{Reactions}
👍 

[1/23/2022 7:34 PM] btwarch147
It's copying


[1/23/2022 7:34 PM] btwarch147
Done


[1/23/2022 7:35 PM] tux_linux
ok sync and reboot the kobo


[1/23/2022 7:35 PM] tux_linux
post boot log


[1/23/2022 7:35 PM] tux_linux
you can use backticks \` for code blocks


[1/23/2022 7:36 PM] btwarch147
Booting default InkBox kernel ...
Cannot open `/boot/zImage-inkbox': No such file or directory
Nothing has been loaded!


[1/23/2022 7:36 PM] tux_linux
what


[1/23/2022 7:36 PM] tux_linux
Did you rename zImage-root


[1/23/2022 7:36 PM] tux_linux
?


[1/23/2022 7:36 PM] btwarch147
Ah


[1/23/2022 7:36 PM] btwarch147
no


[1/23/2022 7:36 PM] tux_linux
then there's our problem


[1/23/2022 7:36 PM] tux_linux
wait


[1/23/2022 7:36 PM] tux_linux
Rename it but don't reboot it yet


[1/23/2022 7:37 PM] tux_linux
`dd if=/dev/sdh bs=256 skip=2 count=1 of=serial`


[1/23/2022 7:37 PM] tux_linux
Will backup your serial number in unpartitioned space

{Reactions}
👍 

[1/23/2022 7:37 PM] tux_linux
Do `cat serial` to see if you see your serial number


[1/23/2022 7:37 PM] btwarch147
Got it


[1/23/2022 7:38 PM] tux_linux
Because InkBox will try to overwrite that with an UID (random string) and Nickel probably won't like it
It showed up some errors for me the first time, so what you can do is to let InkBox create the UID and write it, then write back your serial number:
`dd if=serial of=/dev/sdh bs=256 seek=2`


[1/23/2022 7:39 PM] tux_linux
Check that `serial` contains your serial number to be sure before doing that


[1/23/2022 7:39 PM] tux_linux
But that's not now; let InkBox boot and write it after


[1/23/2022 7:39 PM] btwarch147
Whoops


[1/23/2022 7:39 PM] btwarch147
just wrote it


[1/23/2022 7:39 PM] btwarch147
is that a problem?


[1/23/2022 7:39 PM] tux_linux
no


[1/23/2022 7:39 PM] tux_linux
was it your serial number?


[1/23/2022 7:40 PM] tux_linux
don't publish that

{Reactions}
👍 

[1/23/2022 7:40 PM] tux_linux
But yeah looks fine


[1/23/2022 7:40 PM] tux_linux
You should delete your message if you want


[1/23/2022 7:40 PM] btwarch147
It's booting


[1/23/2022 7:40 PM] tux_linux
nice


[1/23/2022 7:41 PM] btwarch147
Starting kernel


[1/23/2022 7:41 PM] btwarch147
Ah


[1/23/2022 7:41 PM] btwarch147
Some errors


[1/23/2022 7:41 PM] tux_linux
normal


[1/23/2022 7:41 PM] btwarch147
mount: mounting /dev/mmcblk0p5 on /recoveryfs-part failed: Invalid argument
Utility root filesystem's signature is invalid! Shutting down ...
umount: can't unmount /recoveryfs-part: Invalid argument
mount: mounting /dev/mmcblk0p1 on /mnt/boot failed: No such file or directory
WARNING: User violated security policy!
Flashing a new kernel that does not allow root access...
dd: can't open '/mnt/opt/recovery/restore/uImage-std': No such file or directory
/etc/init.d/rcS: line 177: can't create /mnt/boot/flags/ALERT: nonexistent directory
umount: can't unmount /mnt/boot: No such file or directory


[1/23/2022 7:41 PM] tux_linux
can you post the full boot log?


[1/23/2022 7:41 PM] btwarch147
Might be tricky


[1/23/2022 7:41 PM] tux_linux
looks very good tho for now


[1/23/2022 7:42 PM] btwarch147
Can't seem to scroll up


[1/23/2022 7:42 PM] tux_linux
oh


[1/23/2022 7:42 PM] tux_linux
are you on microcom, minicom?


[1/23/2022 7:42 PM] btwarch147
One of them


[1/23/2022 7:42 PM] tux_linux
Normally you can scroll up in minicom


[1/23/2022 7:42 PM] tux_linux
otherwise do `sudo microcom` and you should be able to scroll up no problem


[1/23/2022 7:43 PM] tux_linux
Though from what I saw the errors are normal and expected


[1/23/2022 7:43 PM] tux_linux
So you don't need to post the rest


[1/23/2022 7:43 PM] tux_linux
Did it shut down?


[1/23/2022 7:43 PM] btwarch147
It did


[1/23/2022 7:43 PM] tux_linux
very good


[1/23/2022 7:43 PM] btwarch147
Using microcom now


[1/23/2022 7:44 PM] tux_linux
Now ums and copy the same overlaymount-rootfs.squashfs.* files to sdh5


[1/23/2022 7:44 PM] tux_linux
`mkfs` before if needed

{Reactions}
👍 

[1/23/2022 7:45 PM] btwarch147
Done


[1/23/2022 7:46 PM] tux_linux
ok hang on a second while I make the inkbox GUI package

{Reactions}
👍 

[1/23/2022 7:46 PM] tux_linux
that's the only one i'll upload


[1/23/2022 7:48 PM] tux_linux
Ok it's uploading, should be there in ~5min


[1/23/2022 7:48 PM] btwarch147
Great


[1/23/2022 7:49 PM] tux_linux
Meanwhile you can extract whole user.sqsh to sdh4


[1/23/2022 7:50 PM] tux_linux
after formatting it


[1/23/2022 7:51 PM] btwarch147
Extract it?


[1/23/2022 7:51 PM] btwarch147
So the contents of


[1/23/2022 7:51 PM] tux_linux
yeah sorry
I told you to extract it already but it was a mistake


[1/23/2022 7:51 PM] tux_linux
So extract it directly in the partition


[1/23/2022 7:51 PM] tux_linux
with `-f -d`


[1/23/2022 7:53 PM] btwarch147
Is this with tar?


[1/23/2022 7:53 PM] tux_linux
no unsquashfs


[1/23/2022 7:54 PM] btwarch147
Ah


[1/23/2022 7:54 PM] btwarch147
Yes, that does make sense...


[1/23/2022 7:54 PM] tux_linux
there


[1/23/2022 7:54 PM] btwarch147
[PupplesManjaro emu]# unsquashfs -f user.sqsh -d /run/media/george/a2c3b224-0130-45ff-83e8-4da35c035c75
Parallel unsquashfs: Using 12 processors
0 inodes (0 blocks) to write



created 0 files
created 1 directory
created 0 symlinks
created 0 devices
created 0 fifos
created 0 sockets


[1/23/2022 7:54 PM] btwarch147
Didn't seem to do much


[1/23/2022 7:54 PM] tux_linux
but add `-f` and replace `/some/persistent/dir` by `/run/media/george` etc


[1/23/2022 7:54 PM] tux_linux
no


[1/23/2022 7:54 PM] btwarch147
Is this the user.sqhs in the emu repo


[1/23/2022 7:54 PM] tux_linux
`-f -d`


[1/23/2022 7:55 PM] tux_linux
after the directory you put user.sqsh


[1/23/2022 7:55 PM] tux_linux
yes


[1/23/2022 7:55 PM] tux_linux
`-d` means directory


[1/23/2022 7:55 PM] tux_linux
and it expects the sqsh file as the last argument


[1/23/2022 7:55 PM] btwarch147
It's doing it now

{Reactions}
👍 

[1/23/2022 7:56 PM] tux_linux
it should take some time, iirc it's like 2g+ of data


[1/23/2022 7:57 PM] tux_linux
Go get this `http://23.163.0.39/bundles/private/update-n873.isa`


[1/23/2022 7:57 PM] tux_linux
When extracting of user has finished


[1/23/2022 7:58 PM] btwarch147
I've lost the serial port


[1/23/2022 7:58 PM] btwarch147
Might need to reboot

{Reactions}
👍 

[1/23/2022 7:58 PM] tux_linux
Just sync once it has finished extracting two or three times, umount all the partitions and reboot


[1/23/2022 7:59 PM] tux_linux
```unsquashfs -d /tmp/update update-n873.isa
cd /tmp/update
rm *.dgst
openssl dgst -sha256 -sign private.pem -out inkbox.isa.dgst inkbox.isa```


[1/23/2022 7:59 PM] tux_linux
Do the same for all other .isa files that are there


[1/23/2022 7:59 PM] tux_linux
then


[1/23/2022 7:59 PM] tux_linux
`mksquashfs . /some/path/to/store/update.isa -b 1048576 -comp xz -Xdict-size 100% -always-use-fragments`


[1/23/2022 8:00 PM] btwarch147
Parallel unsquashfs: Using 12 processors
15 inodes (2631 blocks) to write

[=============================================================================================================|] 2631/2631 100%

created 15 files
created 23 directories
created 0 symlinks
created 0 devices
created 0 fifos
created 0 sockets


[1/23/2022 8:00 PM] btwarch147
Didn't seem to take too long in the end


[1/23/2022 8:00 PM] btwarch147
Hang on


[1/23/2022 8:00 PM] btwarch147
It wasn't mounted


[1/23/2022 8:03 PM] tux_linux
whoops


[1/23/2022 8:04 PM] btwarch147
Where are the .isa files?


[1/23/2022 8:04 PM] btwarch147
Is it in the emu repo


[1/23/2022 8:04 PM] tux_linux
.


[1/23/2022 8:04 PM] tux_linux
.


[1/23/2022 8:04 PM] btwarch147
Aha


[1/23/2022 8:05 PM] btwarch147
So sign the other isa files


[1/23/2022 8:07 PM] btwarch147
[PupplesManjaro update]# ls
changelog       gui_rootfs.isa.dgst  inkbox.isa.dgst  python.isa       qt.isa       version
gui_rootfs.isa  inkbox.isa           license          python.isa.dgst  qt.isa.dgst


[1/23/2022 8:07 PM] btwarch147
Here's whats in the update folder


[1/23/2022 8:09 PM] btwarch147
I've run the makesqhs command as well


[1/23/2022 8:10 PM] tux_linux
ok it should work


[1/23/2022 8:10 PM] tux_linux
so you have a new `update.isa` file?


[1/23/2022 8:10 PM] btwarch147
Yes


[1/23/2022 8:11 PM] tux_linux
Ok now throw this file in `[p4]/update/update.isa`


[1/23/2022 8:11 PM] btwarch147
So make a directory


[1/23/2022 8:11 PM] tux_linux
The directory is not already there?


[1/23/2022 8:12 PM] tux_linux
Did you extract user.sqsh to this partition?


[1/23/2022 8:12 PM] btwarch147
nvm


[1/23/2022 8:12 PM] btwarch147
it is

{Reactions}
👍 

[1/23/2022 8:12 PM] btwarch147
Done


[1/23/2022 8:12 PM] btwarch147
The size of ipdate.isa was about 64MB


[1/23/2022 8:12 PM] tux_linux
So now you need to sign `gui_rootfs.isa` which is located at `[p4]/gui_rootfs.isa` as well


[1/23/2022 8:12 PM] tux_linux
just right


[1/23/2022 8:13 PM] btwarch147
Already done


[1/23/2022 8:13 PM] tux_linux
Ok that one too?


[1/23/2022 8:13 PM] btwarch147
This is the contents of the update directory


[1/23/2022 8:13 PM] btwarch147
changelog       gui_rootfs.isa.dgst  inkbox.isa.dgst  python.isa       qt.isa       version
gui_rootfs.isa  inkbox.isa           license          python.isa.dgst  qt.isa.dgst


[1/23/2022 8:13 PM] tux_linux
You mean `[p4]/update`?


[1/23/2022 8:13 PM] btwarch147
Ah


[1/23/2022 8:13 PM] btwarch147
Not signed that one yet


[1/23/2022 8:13 PM] tux_linux
in `[p4]/update` there should be only `update.isa`


[1/23/2022 8:13 PM] btwarch147
Yes


[1/23/2022 8:14 PM] tux_linux
in `[p4]/` you need to sign `gui_rootfs.isa`


[1/23/2022 8:14 PM] btwarch147
Thats correct


[1/23/2022 8:14 PM] btwarch147
Yep


[1/23/2022 8:14 PM] btwarch147
I see that


[1/23/2022 8:14 PM] tux_linux
Then, `echo '1.8' > update/version`


[1/23/2022 8:14 PM] tux_linux
If it needs root
`sudo su -c "echo '1.8' > update/version"`


[1/23/2022 8:14 PM] btwarch147
Done


[1/23/2022 8:14 PM] tux_linux
both?


[1/23/2022 8:14 PM] btwarch147
Yes


[1/23/2022 8:14 PM] btwarch147
config  gui_rootfs  gui_rootfs.isa  gui_rootfs.isa.dgst  lost+found  onboard  tmpfs  update  X11


[1/23/2022 8:15 PM] btwarch147
contents of p4


[1/23/2022 8:15 PM] tux_linux
and p4/update?


[1/23/2022 8:15 PM] btwarch147
update.isa  version


[1/23/2022 8:15 PM] tux_linux
very good


[1/23/2022 8:15 PM] tux_linux
so you should be good to sync and reboot


[1/23/2022 8:15 PM] tux_linux
hopefully inkbox will boot

{Reactions}
🤞 

[1/23/2022 8:16 PM] tux_linux
but there will probably be some errors since well we're humans


[1/23/2022 8:16 PM] tux_linux
in which case we'll try to fix them


[1/23/2022 8:16 PM] btwarch147
sync is taking it's time


[1/23/2022 8:16 PM] tux_linux
oooh


[1/23/2022 8:16 PM] tux_linux
wait


[1/23/2022 8:16 PM] tux_linux
normal


[1/23/2022 8:16 PM] tux_linux
`echo 'rooted' | dd of=/dev/sdh bs=512 seek=79872`


[1/23/2022 8:16 PM] tux_linux
otherwise it won't boot


[1/23/2022 8:17 PM] btwarch147
sync still going


[1/23/2022 8:17 PM] btwarch147
But looks like sdh4 is filling up


[1/23/2022 8:17 PM] btwarch147
So should be writing data


[1/23/2022 8:17 PM] tux_linux
it's quite a big write you did on it


[1/23/2022 8:17 PM] tux_linux
yeah


[1/23/2022 8:17 PM] btwarch147
used 2GB


[1/23/2022 8:17 PM] btwarch147
on p4


[1/23/2022 8:17 PM] tux_linux
pretty much how it should be


[1/23/2022 8:24 PM] tux_linux
did it finish syncing?


[1/23/2022 8:25 PM] btwarch147
Not yet


[1/23/2022 8:25 PM] btwarch147
Th epartitions almost full


[1/23/2022 8:25 PM] tux_linux
probably slow because of ums transfer speed then


[1/23/2022 8:25 PM] tux_linux
Libra eMMC is fairly fast normally


[1/23/2022 8:25 PM] btwarch147
It's finished


[1/23/2022 8:26 PM] tux_linux
nice


[1/23/2022 8:26 PM] tux_linux
did you write the rooted thing?


[1/23/2022 8:26 PM] btwarch147
I did


[1/23/2022 8:26 PM] btwarch147
Lets see if it boots


[1/23/2022 8:26 PM] tux_linux
ok


[1/23/2022 8:26 PM] tux_linux
lets goo


[1/23/2022 8:28 PM] btwarch147
It says the digital signature is invalid


[1/23/2022 8:28 PM] tux_linux
of what


[1/23/2022 8:29 PM] btwarch147
Well


[1/23/2022 8:29 PM] btwarch147
Irritatingly dinner is ready


[1/23/2022 8:29 PM] tux_linux
ok


[1/23/2022 8:29 PM] btwarch147
So I can’t tell you specifically what


[1/23/2022 8:29 PM] tux_linux
there should be an error code on the display


[1/23/2022 8:29 PM] btwarch147
We’ll have to continue this hopefully later

{Reactions}
👍 

[1/23/2022 8:30 PM] tux_linux
At least the main setup is there


[1/23/2022 8:31 PM] btwarch147
Thanks so much for your help so far

{Reactions}
👍 

[1/23/2022 9:07 PM] btwarch147
(initrd) Hit any key to stop auto-boot ... 
Security policy not enforced; root access permitted.
EXPRESS_VERIFICATION: overlaymount-rootfs.squashfs: checksum invalid!
Verifying root filesystem's digital signature ...
Root filesystem's digital signature is invalid! Shutting down ...


[1/23/2022 9:08 PM] btwarch147
@tux-linux this is the error


[1/23/2022 9:08 PM] btwarch147
Not sure i'll be able to finish this tonight but thought i'd send i for you to think about


[1/23/2022 9:09 PM] tux_linux
ok


[1/23/2022 9:10 PM] tux_linux
it means that rootfs.squashfs.dgst is not what it expects it to be


[1/23/2022 9:10 PM] tux_linux
Try re-signing it


[1/23/2022 9:10 PM] btwarch147
with the provate key


[1/23/2022 9:10 PM] tux_linux
`openssl dgst -sha256 -sign private.pem -out rootfs.squashfs.dgst rootfs.squashfs`


[1/23/2022 9:10 PM] tux_linux
yeah


[1/23/2022 9:11 PM] tux_linux
sha256sum the local files you have and the ones on the Kobo to see if there has been corruption during transfer


[1/23/2022 9:16 PM] btwarch147
I'll sort this out in the morning

{Reactions}
👍 

[1/23/2022 9:16 PM] tux_linux
quite strange, it's only 15:16PM here


[1/23/2022 9:17 PM] tux_linux
which means I might talk to you when you wake up and it'll be like 10PM here ;p


[1/25/2022 5:31 PM] btwarch147
@tux-linux Hope covid hasn't affected you too much, is that the squashfs files in the onboard partition eg: the ones I store books on?


[1/25/2022 5:32 PM] tux_linux
It's fine currently
I was better yesterday but today is slightly worse
But it's supportable


[1/25/2022 5:32 PM] tux_linux
What are you talking about?


[1/25/2022 5:33 PM] btwarch147
The rootfs.squashfs and overlaymount-rootfs.squashfs that seem to be corrupted


[1/25/2022 5:33 PM] tux_linux
You should put `rootfs.squashfs.dgst` and `rootfs.squashfs` in the onboard partition where you store books


[1/25/2022 5:33 PM] btwarch147
I've also got overlaymount-rootfs there as well


[1/25/2022 5:33 PM] btwarch147
does that sound right?


[1/25/2022 5:33 PM] tux_linux
You also got the dgst file for overlaymount-rootfs?


[1/25/2022 5:33 PM] btwarch147
Yes


[1/25/2022 5:33 PM] tux_linux
What are the file's size?


[1/25/2022 5:33 PM] btwarch147
I'll try re transferring them now


[1/25/2022 5:33 PM] tux_linux
Do they look alright


[1/25/2022 5:34 PM] btwarch147
overlaymount-rootfs.squashfs is 3.9MB


[1/25/2022 5:34 PM] tux_linux
That's as it should be


[1/25/2022 5:34 PM] tux_linux
And rootfs?


[1/25/2022 5:34 PM] btwarch147
rootfs.squashfs is 74MB


[1/25/2022 5:34 PM] tux_linux
normal too


[1/25/2022 5:35 PM] tux_linux
Are you 100% sure that in `[kernel-repo]/initrd/n873/opt/key.sqsh` there's a public key file and it's named public.pem, and it's the one you made?


[1/25/2022 5:36 PM] btwarch147
So i'd use unsquashfs to view that


[1/25/2022 5:37 PM] tux_linux
Yeah, or you can mount the squashfs too


[1/25/2022 5:37 PM] tux_linux
`mount key.sqsh /mnt`


[1/25/2022 5:38 PM] btwarch147
kobox-graphic-public.pem  kobox-nographic-public.pem  public.pem


[1/25/2022 5:38 PM] btwarch147
This is the contents


[1/25/2022 5:38 PM] tux_linux
Ok alright


[1/25/2022 5:38 PM] tux_linux
Does public.pem match your public.pem?


[1/25/2022 5:39 PM] btwarch147
[george@PupplesManjaro]$ cat  /home/george/MountKobo/public.pem                       /home/build/inkbox/kernel/initrd/n873/opt
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA6aGNvCuVgEYQBxbo3XdO
c+7hdITITX/uEBhCQCBloQd2B0u5+uBdOaZtDnOTSlnNmhl//4hP5dxJ3igx2QPK
iseoNSn+dKSeWyX+iMLkT4Phyunj7bW87s/fU11UqMxNmdL9w3R8zeWUv1EPRtg2
Ck/wH34AnKcfHa6j14KjlnfhQHBJQRE4SttlfiiUCWl4XxtBsSGxJ0hhoxex8Fsd
cuEOlDfb8j8/dObc2sQGK32EzymdEa/Ub4FcHiMdtXSxoIW3dyslARs4ojhfplHJ
IerCt8FAMgxMG1+/hLBAYjbFxCNHhbxMVfyHmjkn6AIMJ6SNK/cK/oEIu6TTp2fx
2wIDAQAB
-----END PUBLIC KEY-----
[george@PupplesManjaro]$ cat /home/george/Scripts/Ke3ys/Inkbox/public.pem             /home/build/inkbox/kernel/initrd/n873/opt
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA6aGNvCuVgEYQBxbo3XdO
c+7hdITITX/uEBhCQCBloQd2B0u5+uBdOaZtDnOTSlnNmhl//4hP5dxJ3igx2QPK
iseoNSn+dKSeWyX+iMLkT4Phyunj7bW87s/fU11UqMxNmdL9w3R8zeWUv1EPRtg2
Ck/wH34AnKcfHa6j14KjlnfhQHBJQRE4SttlfiiUCWl4XxtBsSGxJ0hhoxex8Fsd
cuEOlDfb8j8/dObc2sQGK32EzymdEa/Ub4FcHiMdtXSxoIW3dyslARs4ojhfplHJ
IerCt8FAMgxMG1+/hLBAYjbFxCNHhbxMVfyHmjkn6AIMJ6SNK/cK/oEIu6TTp2fx
2wIDAQAB
-----END PUBLIC KEY-----
[george@PupplesManjaro]$


[1/25/2022 5:39 PM] btwarch147
Looks like it does


[1/25/2022 5:40 PM] tux_linux
And if you power on the Kobo, at the **third** stop auto-boot prompt, you hit a key and do
```mount /opt/key.sqsh /mnt
cat /mnt/public.pem```
Do they match?


[1/25/2022 5:40 PM] btwarch147
I'll try that in a sec

{Reactions}
👍 

[1/25/2022 5:40 PM] btwarch147
I'll need to re set up my serial connection


[1/25/2022 5:40 PM] tux_linux
np


[1/25/2022 5:41 PM] btwarch147
I'll also try recopying the files


[1/25/2022 5:41 PM] tux_linux
yeah ok


[1/25/2022 5:43 PM] tux_linux
Just to clarify, by the third I mean you let U-Boot go, you let the SPL kernel one go and you hit a key the third time it asks you that (in full InkBox kernel)

{Reactions}
👍 

[1/25/2022 5:44 PM] btwarch147
Just trying a normal boot now after copying the files

{Reactions}
👍 

[1/25/2022 5:45 PM] btwarch147
It shows the inkbox logo and progress bar and then shows the error code 3 screen


[1/25/2022 5:45 PM] tux_linux
So that's rootfs


[1/25/2022 5:45 PM] tux_linux
It failed there https://github.com/Kobo-InkBox/kernel/blob/23284b395f9e835688a71cb390893fb91d902837/initrd/common/overlay-mount#L47


[1/25/2022 5:45 PM] tux_linux
Maybe


[1/25/2022 5:46 PM] tux_linux
Did you recompile the kernel after changing the public key, or did we just forgot to do it at all?


[1/25/2022 5:47 PM] btwarch147
Ah


[1/25/2022 5:47 PM] btwarch147
We didn't recompile it


[1/25/2022 5:47 PM] btwarch147
Thats a problem


[1/25/2022 5:47 PM] tux_linux
There's our problem 😄


[1/25/2022 5:47 PM] tux_linux
The second one


[1/25/2022 5:48 PM] tux_linux
After that, put it into ums and overwrite `zImage-inkbox` in partition 1

{Reactions}
👍 

[1/25/2022 5:49 PM] btwarch147
So I don't need to change the rootfs.squashfs files


[1/25/2022 5:49 PM] tux_linux
No, if you signed against your private key now it should verify fine

{Reactions}
👍 

[1/25/2022 5:49 PM] tux_linux
It was verifying with the old public key


[1/25/2022 5:55 PM] btwarch147
Moment of truth


[1/25/2022 5:56 PM] tux_linux
lets goo


[1/25/2022 5:56 PM] btwarch147
🤞


[1/25/2022 5:56 PM] btwarch147
It's starting the kernel


[1/25/2022 5:56 PM] btwarch147
Checking filesystems


[1/25/2022 5:56 PM] btwarch147
Oh dear


[1/25/2022 5:56 PM] btwarch147
Same error as before


[1/25/2022 5:56 PM] tux_linux
what-


[1/25/2022 5:57 PM] btwarch147
I'll send the full boot log

{Reactions}
👍 

[1/25/2022 5:57 PM] tux_linux
Try that
Does the kernel build time match yours?


[1/25/2022 5:57 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/message-5A7D4.txt


[1/25/2022 5:58 PM] btwarch147
Linux inkbox 4.1.15-inkbox #1 SMP PREEMPT Tue Jan 25 16:49:56 GMT 2022 armv7l GNU/Linux


[1/25/2022 5:58 PM] btwarch147
Looks like yes


[1/25/2022 5:58 PM] tux_linux
Ok


[1/25/2022 5:58 PM] btwarch147
I mean


[1/25/2022 5:58 PM] tux_linux
So try what I put above


[1/25/2022 5:58 PM] btwarch147
Is it possible to remove the checksum reuirement from the script?


[1/25/2022 5:58 PM] tux_linux
Also, you may try verifying the rootfs manually in the initrd with the built-in openssl


[1/25/2022 5:59 PM] tux_linux
Checksum errors are not fatal


[1/25/2022 5:59 PM] tux_linux
Usually it fetches checksums at http://inkbox.ddns.net:500/keyserver with Wi-Fi and checksums the local files, then compare the two to see if the file is genuine (it's faster this way)


[1/25/2022 6:00 PM] tux_linux
If not, it fall backs to openssl


[1/25/2022 6:01 PM] btwarch147
Hit any key to stop auto-boot ... \
Waiting 5 seconds for any input event ...
llllllllllllllllllllllllllllTerminated


[1/25/2022 6:01 PM] btwarch147
I hit the key there


[1/25/2022 6:01 PM] tux_linux
Uh, no, you should have waited till the next prompt

{Reactions}
👍 

[1/25/2022 6:02 PM] tux_linux
`(initrd) Hit any key to stop auto-boot ... ` that one


[1/25/2022 6:02 PM] btwarch147
I think I did it


[1/25/2022 6:02 PM] btwarch147
I'm at kobo login


[1/25/2022 6:02 PM] btwarch147
Linux kobo 4.1.15 #1 SMP PREEMPT Sat Jan 22 18:28:12 GMT 2022 armv7l GNU/Linux
InkBox Linux SPL kernel release 0.1 - Copyright (C) 2021-2022 Nicolas Mailloux

Hit any key to stop auto-boot ... |

kobo login:


[1/25/2022 6:02 PM] tux_linux
Ok, user is root


[1/25/2022 6:02 PM] tux_linux
yeah


[1/25/2022 6:02 PM] tux_linux
no password


[1/25/2022 6:02 PM] tux_linux
uh no actually


[1/25/2022 6:02 PM] tux_linux
That's just the SPL


[1/25/2022 6:03 PM] tux_linux
There has to be `(initrd)` before the "Hit any key to stop auto-boot"

{Reactions}
👍 

[1/25/2022 6:04 PM] btwarch147
Got it


[1/25/2022 6:04 PM] tux_linux
Ok, now two things


[1/25/2022 6:05 PM] btwarch147
lic.pem~ # cat /mnt/public.pem
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA6aGNvCuVgEYQBxbo3XdO
c+7hdITITX/uEBhCQCBloQd2B0u5+uBdOaZtDnOTSlnNmhl//4hP5dxJ3igx2QPK
iseoNSn+dKSeWyX+iMLkT4Phyunj7bW87s/fU11UqMxNmdL9w3R8zeWUv1EPRtg2
Ck/wH34AnKcfHa6j14KjlnfhQHBJQRE4SttlfiiUCWl4XxtBsSGxJ0hhoxex8Fsd
cuEOlDfb8j8/dObc2sQGK32EzymdEa/Ub4FcHiMdtXSxoIW3dyslARs4ojhfplHJ
IerCt8FAMgxMG1+/hLBAYjbFxCNHhbxMVfyHmjkn6AIMJ6SNK/cK/oEIu6TTp2fx
2wIDAQAB
-----END PUBLIC KEY-----


[1/25/2022 6:05 PM] btwarch147
Looks like it is the same


[1/25/2022 6:05 PM] tux_linux
yep


[1/25/2022 6:05 PM] tux_linux
hang on a second

{Reactions}
👍 

[1/25/2022 6:07 PM] tux_linux
```
InkBox OS, kernel build gFtVILNv
Copyright (C) 2021-2022 Nicolas Mailloux <nicolecrivain@gmail.com>

Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p1: clean, 14/4872 files, 1963/19456 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p2: clean, 13/128016 files, 30485/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p3: recovering journal
/dev/mmcblk0p3: clean, 21/32768 files, 86192/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p4: clean, 78/219024 files, 720977/874752 blocks

(initrd) Hit any key to stop auto-boot ... 

inkbox login: root
login[106]: root login on 'ttyAMA0'
~ # mkdir /key
~ # mount /opt/key.sqsh /key
~ # mount /dev/mmcblk0p3 /mnt
~ # ls /mnt
lost+found                         rootfs
overlaymount-rootfs.squashfs       rootfs.squashfs
overlaymount-rootfs.squashfs.dgst  rootfs.squashfs.dgst
~ # ls /key
kobox-graphic-public.pem    public.pem
kobox-nographic-public.pem
~ # openssl dgst -sha256 -verify /key/public.pem -signature /mnt/rootfs.squashfs
.dgst /mnt/rootfs.squashfs
Verified OK
~ #
```


[1/25/2022 6:07 PM] tux_linux
Do this


[1/25/2022 6:07 PM] tux_linux
If it doesn't work, it will say `Verification Failure`.


[1/25/2022 6:10 PM] btwarch147
Verification failure


[1/25/2022 6:10 PM] tux_linux
oh


[1/25/2022 6:10 PM] btwarch147
But I signed that one with the private key


[1/25/2022 6:10 PM] tux_linux
So we know the problem


[1/25/2022 6:10 PM] btwarch147
Was that wrong?


[1/25/2022 6:10 PM] tux_linux
No


[1/25/2022 6:11 PM] tux_linux
Verify that file against your public key on your computer with the same command


[1/25/2022 6:13 PM] btwarch147
It's taking a while...


[1/25/2022 6:13 PM] tux_linux
You're verifying against the file in the Kobo's eMMC?


[1/25/2022 6:13 PM] btwarch147
No


[1/25/2022 6:13 PM] btwarch147
The one that on my local machine


[1/25/2022 6:13 PM] tux_linux
Then it shouldn't take a while


[1/25/2022 6:13 PM] btwarch147
openssl dgst -sha256 -verify /home/george/Scripts/Ke3ys/Inkbox/public.pem -signature rootfs.squashfs
.dgst rootfs.squashfs


[1/25/2022 6:13 PM] btwarch147
This is what I ran


[1/25/2022 6:14 PM] tux_linux
Seems fine


[1/25/2022 6:14 PM] tux_linux
Still running?


[1/25/2022 6:14 PM] btwarch147
Yep


[1/25/2022 6:14 PM] tux_linux
Then you probably have a corrupted disk sector or something


[1/25/2022 6:14 PM] tux_linux
Is it consuming CPU much?


[1/25/2022 6:15 PM] btwarch147
Doesn't look like it


[1/25/2022 6:15 PM] tux_linux
Then something is wrong


[1/25/2022 6:15 PM] btwarch147
Shall i try and resign it again?


[1/25/2022 6:15 PM] tux_linux
Yeah, but you should also regenerate the rootfs again


[1/25/2022 6:15 PM] tux_linux
`env GITDIR=/rootfs/git/path ./release.sh`

{Reactions}
👍 

[1/25/2022 6:16 PM] tux_linux
Try mounting it also, see if there isn't any errors


[1/25/2022 6:17 PM] tux_linux
`mount rootfs.squashfs /mnt`


[1/25/2022 6:17 PM] tux_linux
(you should see the normal structure of a root filesystem)


[1/25/2022 6:18 PM] btwarch147
I've just regenerated it


[1/25/2022 6:18 PM] btwarch147
And it mounts fine


[1/25/2022 6:18 PM] btwarch147
I'll try and sign it


[1/25/2022 6:18 PM] tux_linux
ok


[1/25/2022 6:18 PM] tux_linux
Verify it after that too

{Reactions}
👍 

[1/25/2022 6:20 PM] btwarch147
Still not working


[1/25/2022 6:20 PM] tux_linux
uhhh


[1/25/2022 6:20 PM] tux_linux
Then


[1/25/2022 6:20 PM] btwarch147
I've got an ssd so seems unlikely to be a dodgy disk


[1/25/2022 6:21 PM] tux_linux
transfer the private key to your Kobo in some place (p3) for example (do not copy-paste it as text, put the .pem file there instead)


[1/25/2022 6:21 PM] tux_linux
this is not what should be attempted normally but since we don't have any other option we'll try it


[1/25/2022 6:21 PM] tux_linux
Then sign the rootfs file from your Kobo


[1/25/2022 6:21 PM] tux_linux
with the built-in openssl


[1/25/2022 6:21 PM] tux_linux
verify it and if it doesn't work your Kobo's damned


[1/25/2022 6:26 PM] btwarch147
openssl dgst -sha256 -verify private.pem -signature rootfs.squashfs.dgst 
rootfs.squashfs 
unable to load key file


[1/25/2022 6:26 PM] btwarch147
Unable to load keyfile


[1/25/2022 6:26 PM] tux_linux
Do you want to sign it or verify it?


[1/25/2022 6:26 PM] btwarch147
Verify


[1/25/2022 6:26 PM] tux_linux
Also, you missed `rootfs.squashfs` as the last argument


[1/25/2022 6:26 PM] btwarch147
I signed it sucessfully


[1/25/2022 6:26 PM] tux_linux
Is private.pem really there?


[1/25/2022 6:26 PM] tux_linux
oh ok


[1/25/2022 6:27 PM] tux_linux
well you have the last argument


[1/25/2022 6:27 PM] tux_linux
Does private.pem look alright?


[1/25/2022 6:27 PM] tux_linux
Dummy example I just generated:
```
-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAmgzwEzKAQn47t56Sf4r5YMkKyuA5Zclnw/uUefy86NxVpJok
5mCbI3BgWr1qLpv91Q/YRn3jMZPeL+W+kH6GQdZFfLDWeiuUdHoVHuGopatyZeIu
yJU/ZGD3tsRFLxg+8v2RSnu9ti5Fd0EFKQYnA2V4lYzEVx82Ca6/rBQwZwXH/4JU
pXRQh3BLabxH/80wuBvHrBYRYoVWqFif5rRBfdRyFFgymQCBN/5Wf5shQFS/ROQD
sq91DozhePyVSVcvmQvZ8kkt9a5WSUFqwGxx3Kum+MJE0wQWyENzrfc4otrFQTru
3/fx0sg39rYZ4Jf5Xz0co/O/h4WhVEuE3NaGZwIDAQABAoIBADc9vnVT3bR6adWt
kmEUJ9ryHOGlSE/cyk34EEUyQVfLcxakg+js6ZTqvlKrq8DtBTf7B5Y3nFnx6XIJ
k61jAafoO2C8VRzYNdMS2DILv5sxAMPSOO6KvoGzWAD9HsYFjsU58njgKKaErzpV
YZFVeHX6VCRkpx+KvKj6Nhdx4e1/EczWZ2N5EzblkGbUCVvNh3IMnwskNPptW6eC
oFt3mv6SZpHiGo9XP+3mWy/K9njVEXX9KkkytdvEgqXjmaHSNXkTOeDp1Zl3gJUL
VkI2FaJ09hEJ568XdWGiagn8LliHIR2nAuxu3AzhWttTKh7cCIOf1F45lcqQzHIl
Rpw4JsECgYEAxxtVrAy8U+4PKJt/6F60N0EUoifxPWoAx9S5vHdeuOcfos4zvtxB
T7U99uipgCfuZuJEaLOFaBWykr/KHI75z/W2DhmK4V/0ZBZ9BsQhLo1c/T8vlT46
18AliDS2pnRGpvo0ci5HQgE4isRIvtk9/dkWXQvhvfGJvlcc0P0gBaECgYEAxhG9
AFTT2ArB/qALSXal7d5LVjB7UX8e708JerfOggSoUEzgvw8AzMe2gNV61ih44dhn
gLJbTxPR+D/NGB93QKTXeAiAh4ZByH5NGKoOzr9Fgc0uVIwR7lsixVUVpf0ms08e
GOATWgmwci5t3NpiBIDzmuqK/EHqQCMPmvd7/wcCgYA+qRKYN9XZEBWDMRTa+1r5
/KhStAFO05p1STQ+5M5RoKMrKHvOeCCxxhc/Kk+Vvntfs5vV25GDhTiSyHsB69kg
onJuE4nKjdkq2oz0YSsULHb0WDtQW6pHFfh52iUVU4icqidxO7E/S4UQ3t8J+PJy
fix0kfW0QlyYI3A1MUQvoQKBgFwravkZgE87ilTT4wy3krVjSUl9XBVrg1i3PeEG
YamtQynC7J7b+3JPyUSgkv3PbZkjG98OoGDnB0FvZyA/nD3Pt5ja0/y85CXJaFT+
5c8dwNmLQnEDkWCKtl5/nohUikrMmWPX+glfEuW/Z05rrUsNOs8vL6f9gGWCK0Pg
wKnHAoGAGAGiPsVv0UkAyOzLPw9kqWinNFmHBg6uiDSjpNwbWVr03njGPYXRLVJr
1fNWMWZrpQ7LwlXEulVRW2URlFpZicBOg30ifvjJ+z89cZIqplLvcUwY0v76Jjnd
34qZycIG8iM6aE6gxGXzpxraDUyL/OFVA9DbXUJ1dda/Wm7YjbQ=
-----END RSA PRIVATE KEY-----
```


[1/25/2022 6:27 PM] btwarch147
Yep


[1/25/2022 6:28 PM] btwarch147
It looks like that


[1/25/2022 6:28 PM] tux_linux
Did you create the private key like that?
`openssl genrsa -out private.pem 2048`


[1/25/2022 6:28 PM] tux_linux
OOH


[1/25/2022 6:28 PM] tux_linux
Well, you need to verify against public key, not private


[1/25/2022 6:28 PM] btwarch147
Not sure


[1/25/2022 6:29 PM] btwarch147
I followed the guide you sent


[1/25/2022 6:29 PM] tux_linux
That's really the issue here I think


[1/25/2022 6:29 PM] btwarch147
Well


[1/25/2022 6:29 PM] btwarch147
I'm trying a reboot after signing them


[1/25/2022 6:30 PM] tux_linux
Did you verify them? Or you just rebooted?
Anyways we'll see


[1/25/2022 6:30 PM] btwarch147
Same error


[1/25/2022 6:30 PM] tux_linux
nonsense


[1/25/2022 6:31 PM] tux_linux
What if you try verifying it with the public key?


[1/25/2022 6:31 PM] btwarch147
I'll try that

{Reactions}
👍 

[1/25/2022 6:35 PM] btwarch147
Verification failure


[1/25/2022 6:35 PM] tux_linux
i have no words


[1/25/2022 6:35 PM] btwarch147
It must be that the keys are wrong


[1/25/2022 6:35 PM] tux_linux
yeah


[1/25/2022 6:35 PM] tux_linux
but even then


[1/25/2022 6:35 PM] btwarch147
https://www.bradfordembedded.com/2016/06/openssl-file-signing


[1/25/2022 6:36 PM] btwarch147
openssl genrsa -out private.pem 2048


[1/25/2022 6:36 PM] btwarch147
So I used this


[1/25/2022 6:36 PM] tux_linux
Yeah


[1/25/2022 6:36 PM] tux_linux
That's the one I use too


[1/25/2022 6:36 PM] btwarch147
openssl rsa -in private.pem -out public.pem -outform PEM -pubout


[1/25/2022 6:36 PM] btwarch147
And then this


[1/25/2022 6:37 PM] tux_linux
What if you try verifying overlaymount-rootfs.squashfs with it?


[1/25/2022 6:38 PM] btwarch147
Verification failed


[1/25/2022 6:38 PM] btwarch147
Maybe we can generate the keys on device?


[1/25/2022 6:38 PM] tux_linux
Ok so it's the key


[1/25/2022 6:38 PM] tux_linux
yeah you can


[1/25/2022 6:38 PM] tux_linux
Try to generate a keypair and sign, then verify rootfs.squashfs


[1/25/2022 6:39 PM] tux_linux
Then if it works, put the files in a partition and transfer them to your computer via UMS (no text copy-paste)


[1/25/2022 6:39 PM] tux_linux
Recompile the kernel with that public.pem in key.sqsh


[1/25/2022 6:40 PM] btwarch147
Verified OK!!!


[1/25/2022 6:40 PM] tux_linux
Yay!


[1/25/2022 6:40 PM] tux_linux
Now you need to sign all the packages in the Kobo


[1/25/2022 6:40 PM] tux_linux
That's less fun


[1/25/2022 6:40 PM] btwarch147
Ah


[1/25/2022 6:40 PM] tux_linux
But transfer the keys before


[1/25/2022 6:40 PM] tux_linux
And recompile the kernel, maybe we could get at least the rootfs booting


[1/25/2022 6:40 PM] btwarch147
Shall I sign it with public or private


[1/25/2022 6:40 PM] btwarch147
Now it seems to be working


[1/25/2022 6:41 PM] tux_linux
No, you sign with private key

{Reactions}
👍 

[1/25/2022 6:41 PM] tux_linux
So that only you are the genuine "owner" of the files


[1/25/2022 6:41 PM] tux_linux
You can distribute the public key so others can verify against the digest and OpenSSL tells you if the file is genuine or not


[1/25/2022 6:41 PM] tux_linux
But you keep the private key for you


[1/25/2022 6:42 PM] btwarch147
I'll try a reboot to see if we get further in the boot process


[1/25/2022 6:42 PM] tux_linux
Well it won't work since you didn't recompile the kernel


[1/25/2022 6:42 PM] tux_linux
So it will use the old non-working public key


[1/25/2022 6:42 PM] btwarch147
Ah


[1/25/2022 6:42 PM] btwarch147
Yes


[1/25/2022 6:42 PM] btwarch147
Thats a good point

{Reactions}
👍 

[1/25/2022 6:43 PM] tux_linux
The bit about recompiling the kernel with a new public key is in your PMs


[1/25/2022 6:44 PM] tux_linux
I'll post screenshots of our discussion if you don't mind, for future readers


[1/25/2022 6:46 PM] btwarch147
Now shall I run just the first or second of the env + script commands to recompile the kernel


[1/25/2022 6:46 PM] tux_linux
Just the second


[1/25/2022 6:46 PM] tux_linux
SPL kernel hasn't anything to do with package signing


[1/25/2022 6:47 PM] tux_linux
Its job is just to decide if it has to load the Nickel or InkBox kernel based on power button events


[1/25/2022 6:47 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-829C3.png


[1/25/2022 6:47 PM] btwarch147
Yup


[1/25/2022 6:47 PM] btwarch147
Did that


[1/25/2022 6:48 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5359A.png


[1/25/2022 6:48 PM] tux_linux
Yeah, it's for posterity if others want to put InkBox or their Libra

{Reactions}
👍 

[1/25/2022 6:48 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/2022-01-25_12.48.42_discord.com_185bdf9261-3CCF5.png


[1/25/2022 6:49 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-87374.png


[1/25/2022 6:50 PM] btwarch147
I'm rebuilding the kernel

{Reactions}
👍 

[1/25/2022 6:52 PM] btwarch147
It's booting


[1/25/2022 6:53 PM] tux_linux
ok, now we should see some progress


[1/25/2022 6:54 PM] btwarch147
Unbelievable


[1/25/2022 6:54 PM] btwarch147
Same error again


[1/25/2022 6:54 PM] tux_linux
lmao


[1/25/2022 6:54 PM] btwarch147
So I need to sign the kernel with the private key?


[1/25/2022 6:54 PM] tux_linux
that's just pure nonsense


[1/25/2022 6:54 PM] tux_linux
Not the kernel


[1/25/2022 6:54 PM] btwarch147
Yeah


[1/25/2022 6:54 PM] btwarch147
I used the public key


[1/25/2022 6:54 PM] tux_linux
Yeah, you put the public key in key.sqsh?


[1/25/2022 6:55 PM] btwarch147
I'll just double check its the right one

{Reactions}
👍 

[1/25/2022 6:55 PM] tux_linux
Welp, looks like I'm gonna have to image mine and send you the files


[1/25/2022 6:55 PM] tux_linux
Maybe it won't be too big, I can just send you a working kernel and the files that need to be signed with it


[1/25/2022 6:56 PM] tux_linux
What's your `rootfs.squashfs` sha256sum?


[1/25/2022 6:58 PM] btwarch147
e37d849c3b0266617e84fb4461000d806fd8d779aad62404ae013545d95d8f5a  /run/media/george/C1B5-00A6/rootfs.squashfs


[1/25/2022 6:59 PM] tux_linux
What's `ls -l` on it?


[1/25/2022 6:59 PM] btwarch147
-rw-r--r-- 1 george george 74338304 Jan 25 16:42 /run/media/george/C1B5-00A6/rootfs.squashfs


[1/25/2022 6:59 PM] tux_linux
ok fine


[1/25/2022 7:00 PM] tux_linux
I'll make you a pack with the things you need and you can transfer them to your Kobo

{Reactions}
👍 

[1/25/2022 7:00 PM] tux_linux
Probably not the best outcome of this, but I can't really suggest anything else


[1/25/2022 7:00 PM] btwarch147
Is very strange


[1/25/2022 7:00 PM] btwarch147
Just to double check


[1/25/2022 7:00 PM] btwarch147
The command I ran to recompile the kernel was:


[1/25/2022 7:01 PM] btwarch147
env GITDIR=/home/build/inkbox/kernel TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf/ THREADS=16 TARGET=arm-nickel-linux-gnueabihf scripts/build_kernel.sh n873 root


[1/25/2022 7:01 PM] tux_linux
yep it's that


[1/25/2022 7:01 PM] btwarch147
And the key.sqhs file is in opt (not in a key folder)


[1/25/2022 7:01 PM] tux_linux
yeah, but it's key.sqsh


[1/25/2022 7:02 PM] btwarch147
Yes


[1/25/2022 7:02 PM] btwarch147
One day I'll get that right...


[1/25/2022 7:03 PM] btwarch147
Hang on


[1/25/2022 7:04 PM] btwarch147
We didn't replace kobox-graphic-public.pem


[1/25/2022 7:04 PM] btwarch147
Do we need to do that?


[1/25/2022 7:04 PM] tux_linux
That isn't related


[1/25/2022 7:04 PM] tux_linux
At least, not for the rootfs


[1/25/2022 7:04 PM] btwarch147
and kobox-nographic-public.pem


[1/25/2022 7:04 PM] tux_linux
It's for X11 packages

{Reactions}
👍 

[1/25/2022 7:04 PM] tux_linux
too


[1/25/2022 7:05 PM] btwarch147
I assume the package is going to take a long time to send...


[1/25/2022 7:05 PM] tux_linux
maybe we can try something


[1/25/2022 7:05 PM] tux_linux
So you said that with the public key in the partition, you could successfully verify rootfs.squashfs


[1/25/2022 7:05 PM] tux_linux
When you put the public key in the kernel it wouldn't


[1/25/2022 7:05 PM] tux_linux
right?


[1/25/2022 7:06 PM] btwarch147
Well


[1/25/2022 7:06 PM] btwarch147
It didn't boot when we tried it


[1/25/2022 7:06 PM] btwarch147
But it definetly worked when I verified it on the kobo


[1/25/2022 7:06 PM] tux_linux
Do you still have the keypair?


[1/25/2022 7:07 PM] btwarch147
Yes


[1/25/2022 7:07 PM] tux_linux
PM the two files to me and I'll compile a kernel with them here


[1/25/2022 7:07 PM] tux_linux
Maybe somehow your machine is damned


[1/25/2022 7:08 PM] tux_linux
I'll also try signing/verifying some packages to see if it's working correctly

{Reactions}
👍 

[1/25/2022 7:24 PM] tux_linux
`cat xa* > zImage-inkbox`

{Attachments}
/mnt/data/projects/git/conversations/media/xaa-1F747
/mnt/data/projects/git/conversations/media/xab-3BB47


[1/25/2022 7:25 PM] tux_linux
sha256sum is `82cfc52b8599396f4046b35a7a5f57817eee427971e955e79271354856b58ca4`


[1/25/2022 7:25 PM] tux_linux
(of zImage-inkbox)


[1/25/2022 7:35 PM] tux_linux
Changed the channel name: Kobo Libra H2O (N873)


[1/25/2022 7:40 PM] btwarch147
So my checksum is wrong


[1/25/2022 7:40 PM] btwarch147
Or should I run this


[1/25/2022 7:41 PM] tux_linux
Well try, maybe it will work


[1/25/2022 7:42 PM] tux_linux
When I download the two files and join them, I have the correct checksum though


[1/25/2022 7:43 PM] btwarch147
[george@PupplesManjaro]$ sha256sum zImage-inkbox                                                                    ~/Downloads
82cfc52b8599396f4046b35a7a5f57817eee427971e955e79271354856b58ca4  zImage-inkbox


[1/25/2022 7:43 PM] tux_linux
that's the right one


[1/25/2022 7:43 PM] btwarch147
It won't fit on the partition though


[1/25/2022 7:43 PM] tux_linux
even if you overwrite?


[1/25/2022 7:43 PM] btwarch147
Yes


[1/25/2022 7:43 PM] btwarch147
Hang on


[1/25/2022 7:43 PM] btwarch147
Lets try


[1/25/2022 7:43 PM] tux_linux
what's the size of current zImage-inkbox


[1/25/2022 7:43 PM] btwarch147
10.1MB


[1/25/2022 7:43 PM] btwarch147
before the cat


[1/25/2022 7:44 PM] tux_linux
Well cat is to join both files since Discord can't let me upload more than 8mb files


[1/25/2022 7:44 PM] btwarch147
It did work


[1/25/2022 7:44 PM] btwarch147
Hang on


[1/25/2022 7:44 PM] btwarch147
Ah


[1/25/2022 7:44 PM] btwarch147
I see


[1/25/2022 7:46 PM] btwarch147
Nope


[1/25/2022 7:46 PM] btwarch147
Still doesn't work


[1/25/2022 7:47 PM] tux_linux
what if you try verifying manually


[1/25/2022 7:47 PM] btwarch147
Maybe it's a problem with how overlaymount-rootfs.squashfs was built?


[1/25/2022 7:47 PM] btwarch147
What should I verify


[1/25/2022 7:47 PM] tux_linux
maybe idk


[1/25/2022 7:47 PM] btwarch147
zImage-inkbox


[1/25/2022 7:47 PM] tux_linux
both

{Reactions}
👍 

[1/25/2022 7:47 PM] btwarch147
or overlaymount-rootfs.squashfs


[1/25/2022 7:47 PM] tux_linux
rootfs and overlaymount


[1/25/2022 7:47 PM] btwarch147
I'll use the inkbox preboot shell

{Reactions}
👍 

[1/25/2022 7:49 PM] btwarch147
Hmm


[1/25/2022 7:49 PM] btwarch147
can't mount p1


[1/25/2022 7:49 PM] btwarch147
[   64.370918] EXT3-fs (mmcblk0p1): error: couldn't mount because of unsupported optional features (2c0)


[1/25/2022 7:50 PM] tux_linux
it mounted it


[1/25/2022 7:50 PM] tux_linux
i can assure you


[1/25/2022 7:50 PM] tux_linux
it was formatted as ext4


[1/25/2022 7:50 PM] btwarch147
It did


[1/25/2022 7:50 PM] tux_linux
so it says it can't mount it as ext3


[1/25/2022 7:50 PM] tux_linux
but then it tried as ext4 and it works


[1/25/2022 7:50 PM] tux_linux
check dmesg to see if you want


[1/25/2022 7:51 PM] btwarch147
What should I use as the signature for the zImage-inkbox file?


[1/25/2022 7:51 PM] tux_linux
you don't have to sign it


[1/25/2022 7:51 PM] btwarch147
As it doesn;t have a dgst file


[1/25/2022 7:51 PM] tux_linux
it isn't verified


[1/25/2022 7:51 PM] tux_linux
(Well it should be but I didn't implement that in SPL yet)


[1/25/2022 7:52 PM] btwarch147
So i only need to verify the squashfs files


[1/25/2022 7:52 PM] tux_linux
yes


[1/25/2022 7:54 PM] btwarch147
/mnt/p3 # ls
Files                              overlaymount-rootfs.squashfs
InkBox                             overlaymount-rootfs.squashfs.dgst
KoBox                              private.pem
LOST.DIR                           private.pem.old
RSYNCTEST                          public.pem
book.pdf                           public.pem.old
inkvt.png                          rootfs
kfmon.png                          rootfs.squashfs
kfmon.sdr                          rootfs.squashfs.dgst
koreader.png                       syncthing
koreader.sdr                       vlasovsoft.png
neofetch                           zImage-nickel
/mnt/p3 # openssl dgst -sha256 -verify private.pem -signature rootfs.squashfs.dg
st rootfs.squashfs
unable to load key file
/mnt/p3 #


[1/25/2022 7:54 PM] btwarch147
Seems like it can't load the keyfile


[1/25/2022 7:54 PM] tux_linux
verify with public.pem


[1/25/2022 7:54 PM] btwarch147
It is definetly there


[1/25/2022 7:54 PM] btwarch147
Ah


[1/25/2022 7:54 PM] btwarch147
Verified OK


[1/25/2022 7:55 PM] tux_linux
ok now verify with public.pem that is inside key.sqsh

{Reactions}
👍 

[1/25/2022 7:55 PM] btwarch147
And we definetly can't just skip the verification step?


[1/25/2022 7:55 PM] tux_linux
it's difficult


[1/25/2022 7:56 PM] tux_linux
for other things than rootfs, yes, with a developer key, but rootfs is the only thing that is verified no matter if you have a developer key or not


[1/25/2022 7:56 PM] btwarch147
Oh


[1/25/2022 7:56 PM] btwarch147
Hang on


[1/25/2022 7:56 PM] btwarch147
I just found some other overlaymount-rootfs files in partition 5


[1/25/2022 7:57 PM] tux_linux
that's for recovery


[1/25/2022 7:57 PM] tux_linux
maybe it fails there idk


[1/25/2022 7:57 PM] btwarch147
Ah


[1/25/2022 7:57 PM] tux_linux
re-sign them too if you want


[1/25/2022 7:57 PM] btwarch147
Ill try and resign the,


[1/25/2022 7:57 PM] tux_linux
can't harm


[1/25/2022 7:57 PM] btwarch147
signed


[1/25/2022 7:57 PM] btwarch147
ill try a reboot

{Reactions}
👍 

[1/25/2022 7:59 PM] btwarch147
Didn't work


[1/25/2022 7:59 PM] btwarch147
HAng on


[1/25/2022 7:59 PM] btwarch147
I think it maybe got a bit further


[1/25/2022 7:59 PM] tux_linux
yes????


[1/25/2022 7:59 PM] btwarch147
(initrd) Hit any key to stop auto-boot ... 
Security policy not enforced; root access permitted.
EXPRESS_VERIFICATION: overlaymount-rootfs.squashfs: checksum invalid!
Verifying root filesystem's digital signature ...
Done.
FATAL: InkBox GUI root filesystem's signature is invalid!
Aborting boot and powering off ...
The system is going down NOW!
Sent SIGTERM to all processes
Sent SIGKILL to all processes
Requesting system poweroff
[   43.476854] reboot: Power down


[1/25/2022 7:59 PM] tux_linux
yaaaaayyyy


[1/25/2022 7:59 PM] btwarch147
I don't think it complained about the GUI before


[1/25/2022 7:59 PM] tux_linux
It VERIFIED THE ROOTFS SUCCESSFULLY!!!!!!!


[1/25/2022 8:00 PM] btwarch147
YES!!!!


[1/25/2022 8:00 PM] tux_linux
So now you need to sign gui_rootfs.isa

{Reactions}
👍 

[1/25/2022 8:00 PM] tux_linux
In partition 4


[1/25/2022 8:00 PM] tux_linux
It is signed with the old private key currently


[1/25/2022 8:00 PM] tux_linux
You also need to sign the isa packages in update.isa squashfs

{Reactions}
👍 

[1/25/2022 8:01 PM] tux_linux
Maybe there's more but that's all I recall for now


[1/25/2022 8:01 PM] btwarch147
Can i do this from the inkbox terminal?


[1/25/2022 8:01 PM] tux_linux
Yes


[1/25/2022 8:01 PM] tux_linux
With your private key in p3


[1/25/2022 8:03 PM] btwarch147
There are filesystem-specific -o flags.


[1/25/2022 8:03 PM] btwarch147
Do i need a different openssl commandf?


[1/25/2022 8:04 PM] tux_linux
?


[1/25/2022 8:04 PM] btwarch147
Thats an error


[1/25/2022 8:04 PM] tux_linux
huh


[1/25/2022 8:04 PM] btwarch147
Hang on


[1/25/2022 8:04 PM] btwarch147
Silly me


[1/25/2022 8:04 PM] tux_linux
then cp private.pem into /tmp or whatever


[1/25/2022 8:04 PM] btwarch147
HAd a rouge mount at the start


[1/25/2022 8:04 PM] btwarch147
Signed


[1/25/2022 8:04 PM] btwarch147
Shall i try a reboot?


[1/25/2022 8:05 PM] tux_linux
what's a rouge mount?


[1/25/2022 8:05 PM] btwarch147
For some reason I started typing the mount command


[1/25/2022 8:05 PM] btwarch147
And then copied the openssl command

{Reactions}
😅 

[1/25/2022 8:06 PM] btwarch147
So it got very confused


[1/25/2022 8:06 PM] btwarch147
Its booting


[1/25/2022 8:06 PM] tux_linux
did you unsquashfs update.isa, then signed all the .isa files inside it, then repackaged it with `mksquashfs . ../update.isa -b 1048576 -comp gzip -always-use-fragments`?


[1/25/2022 8:06 PM] btwarch147
Lots of things are happening


[1/25/2022 8:06 PM] tux_linux
really


[1/25/2022 8:06 PM] tux_linux
awesome


[1/25/2022 8:06 PM] btwarch147
Lots of [ok]


[1/25/2022 8:06 PM] btwarch147
hang  on


[1/25/2022 8:06 PM] tux_linux
openrc has started!


[1/25/2022 8:06 PM] btwarch147
* Starting InkBox GUI ...
 * WARNING: xorg is already stopped
 * Starting InkBox Daemon (ibxd) ...
 [ ok ]
UI bundle signature verification failed! Aborting launch ...

Broadcast message from @kobo
        (not a tty) at 19:06:36 ...

The system is going down for power off NOW!

Broadcast message from @kobo
        (not a tty) at 19:06:36 ...

The system is going down for power off NOW!
 * Unmounting onboard storage filesystem ...
 [ ok ]
**** Mounting root filesystem read-only ****
 [ ok ]
/lib/rc/sh/openrc-run.sh: line 148: grep: Socket not connected
 * Error: fopen(/var/log/rc.log) failed: Socket not connected


[1/25/2022 8:06 PM] tux_linux
nice colored output?


[1/25/2022 8:07 PM] btwarch147
No


[1/25/2022 8:07 PM] btwarch147
But might be because of the serial connection


[1/25/2022 8:07 PM] tux_linux
Yeah, that's because you didn't sign the update.isa contents

{Reactions}
👍 

[1/25/2022 8:07 PM] tux_linux
Are you on microcom?


[1/25/2022 8:07 PM] btwarch147
Yes


[1/25/2022 8:07 PM] tux_linux
it should work...


[1/25/2022 8:07 PM] tux_linux
.


[1/25/2022 8:07 PM] tux_linux
You can do that in the Kobo or via UMS


[1/25/2022 8:08 PM] btwarch147
I'll just use the kobo


[1/25/2022 8:08 PM] tux_linux
If you do it via UMS you might use xz compression instead `mksquashfs . ../update.isa -b 1048576 -comp xz -Xdict-size 100% -always-use-fragments` it will be smaller


[1/25/2022 8:09 PM] btwarch147
I feel we are very close


[1/25/2022 8:09 PM] tux_linux
we are


[1/25/2022 8:10 PM] btwarch147
Which partition is it in?


[1/25/2022 8:10 PM] tux_linux
p4


[1/25/2022 8:10 PM] tux_linux
update folder


[1/25/2022 8:10 PM] tux_linux
.


[1/25/2022 8:10 PM] tux_linux
Follow from there


[1/25/2022 8:11 PM] btwarch147
Filesystem uses xz compression, this is unsupported by this version
Decompressors available:
        gzip


[1/25/2022 8:11 PM] btwarch147
We might need to use UMS


[1/25/2022 8:11 PM] tux_linux
Yeah you can replace xz by gzip and remove Xdict-size


[1/25/2022 8:12 PM] tux_linux
But the bundle will probably be slightly bigger than if you went with xz


[1/25/2022 8:14 PM] tux_linux
Color is supposed to look like that


[1/25/2022 8:14 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-89284.png


[1/25/2022 8:20 PM] btwarch147
Booting now


[1/25/2022 8:21 PM] btwarch147
I'm at kobo login


[1/25/2022 8:21 PM] btwarch147
So sucess?


[1/25/2022 8:22 PM] btwarch147
IT WORKS!!!!


[1/25/2022 8:22 PM] btwarch147
YES!


[1/25/2022 8:22 PM] tux_linux
yay


[1/25/2022 8:22 PM] tux_linux
So you have the UI there?


[1/25/2022 8:22 PM] tux_linux
no signing errors?


[1/25/2022 8:22 PM] btwarch147
Nope


[1/25/2022 8:22 PM] btwarch147
GUI works great


[1/25/2022 8:22 PM] btwarch147
Thanks so much for your help


[1/25/2022 8:23 PM] tux_linux
Nice, it looks beautiful on 300ppi screens


[1/25/2022 8:23 PM] btwarch147
For anyone thinking of doing this in the future, although it may look hard from this thread, I'm pretty sure now we've worked it out it shoudl be easier next time

{Reactions}
👍 

[1/25/2022 8:23 PM] tux_linux
You might encounter UI freezes sometimes in Qt GUI, not in KoBox but in Qt; to fix quickly you can put it to sleep mode and wake it up (press on power button, wait 15 sec, press again), it will unfreeze


[1/25/2022 8:24 PM] btwarch147
Also now I understand how the boot loader works I see why the risk of bricking is quite low

{Reactions}
👍 

[1/25/2022 8:24 PM] btwarch147
Is there a way I can acess my books from onboard storage


[1/25/2022 8:24 PM] tux_linux
To enable SSH you can create a file named `USBNET_ENABLE` in `/boot/flags` and echo `true` in it


[1/25/2022 8:25 PM] tux_linux
Can't you?


[1/25/2022 8:25 PM] tux_linux
When you press on "Reader"


[1/25/2022 8:25 PM] tux_linux
There should be a file manager


[1/25/2022 8:25 PM] tux_linux
To enable KoBox you can go in KoBox settings and enable KoBox, then X11 apps will show up in the Apps menu


[1/25/2022 8:26 PM] btwarch147
So I can use xterm to mount the onboard partition


[1/25/2022 8:27 PM] tux_linux
you shouldn't have to


[1/25/2022 8:27 PM] tux_linux
If you do `df -h` on the Kobo, what does it print?


[1/25/2022 8:27 PM] btwarch147
I'll try in a sec


[1/25/2022 8:27 PM] btwarch147
It's rebooting to apply the kobox settings


[1/25/2022 8:28 PM] btwarch147
What command should I use for dd to back this partiton layout up?


[1/25/2022 8:28 PM] tux_linux
The partition layout?


[1/25/2022 8:28 PM] tux_linux
Or the whole eMMC?


[1/25/2022 8:28 PM] btwarch147
Well


[1/25/2022 8:28 PM] btwarch147
Yes


[1/25/2022 8:28 PM] btwarch147
The whole eMMC


[1/25/2022 8:29 PM] btwarch147
Hmm


[1/25/2022 8:29 PM] btwarch147
Kobox didn't seem to enable


[1/25/2022 8:29 PM] tux_linux
.

{Reactions}
👍 

[1/25/2022 8:29 PM] btwarch147
I'll try again...


[1/25/2022 8:29 PM] tux_linux
What's the problem?


[1/25/2022 8:30 PM] btwarch147
After I rebooted after enabling kobox it still seemed to think it was disabled


[1/25/2022 8:30 PM] btwarch147
I'm trying it again


[1/25/2022 8:30 PM] tux_linux
oh


[1/25/2022 8:30 PM] tux_linux
Did you create a `flags` folder in partition 1?


[1/25/2022 8:30 PM] btwarch147
No


[1/25/2022 8:30 PM] btwarch147
Not yet


[1/25/2022 8:30 PM] tux_linux
It has to be there

{Reactions}
👍 

[1/25/2022 8:31 PM] tux_linux
http://inkbox.ddns.net:40/wiki/index.php?title=Boot_flags
See here for possible options

{Embed}
http://inkbox.ddns.net:40/wiki/index.php?title=Boot_flags
Boot flags


[1/25/2022 8:33 PM] btwarch147
Is there an on screen keyboard?


[1/25/2022 8:33 PM] tux_linux
for what?


[1/25/2022 8:33 PM] tux_linux
If you launched Geany, wait a little bit


[1/25/2022 8:33 PM] btwarch147
Hmm


[1/25/2022 8:33 PM] btwarch147
I was using the file picker to make the folder


[1/25/2022 8:33 PM] btwarch147
Is that geany?


[1/25/2022 8:33 PM] tux_linux
that is probably the worst way to make a folder ;p


[1/25/2022 8:34 PM] tux_linux
At this point, you can't really do anything else than reconnect serial

{Reactions}
👍 

[1/25/2022 8:34 PM] tux_linux
Also, there will probably be KoBox errors too, because we never seem to get around that ;p


[1/25/2022 8:35 PM] tux_linux
So it's a good thing to have it plugged in


[1/25/2022 8:36 PM] btwarch147
Whats the default password


[1/25/2022 8:37 PM] tux_linux
So you can do
```
mkdir /boot/flags
echo "true" > /boot/flags/USBNET_ENABLE
echo "true" > /boot/flags/X11_START
sync && reboot
```


[1/25/2022 8:37 PM] tux_linux
`root` is the default password

{Reactions}
👍 

[1/25/2022 8:44 PM] btwarch147
Launching kobox subsystem


[1/25/2022 8:44 PM] tux_linux
yay


[1/25/2022 8:44 PM] btwarch147
Probably should have read the wiki before doing this...

{Reactions}
👍 

[1/25/2022 8:44 PM] btwarch147
It explains lots of things


[1/25/2022 8:44 PM] tux_linux
You mean the `General information` article?


[1/25/2022 8:45 PM] btwarch147
Yes


[1/25/2022 8:45 PM] tux_linux
Yeah, it's quite extensive


[1/25/2022 8:46 PM] btwarch147
I assume updating to a later newer version of inkbox will be difficult


[1/25/2022 8:46 PM] tux_linux
Yeah, sadly


[1/25/2022 8:46 PM] tux_linux
You're on the bleeding edge though


[1/25/2022 8:46 PM] tux_linux
This is not "real" 1.8


[1/25/2022 8:46 PM] tux_linux
It's InkBox with the latest commits


[1/25/2022 8:47 PM] btwarch147
I mean


[1/25/2022 8:47 PM] tux_linux
So you get all new features


[1/25/2022 8:47 PM] btwarch147
Im very happy with the way it is

{Reactions}
👍 

[1/25/2022 8:47 PM] btwarch147
Is there an easy way to add new kobox apps


[1/25/2022 8:47 PM] tux_linux
Look into KoBox extensions


[1/25/2022 8:47 PM] tux_linux
There aren't much now


[1/25/2022 8:47 PM] tux_linux
Only a Commodore 64 emulator


[1/25/2022 8:48 PM] tux_linux
http://23.163.0.39/bundles/kobox/extensions/


[1/25/2022 8:48 PM] tux_linux
Go to KoBox settings, and export KoBox extensions storage

{Reactions}
👍 

[1/25/2022 8:48 PM] tux_linux
Copy those two files there and a new app should appear in your KoBox Apps list


[1/25/2022 8:48 PM] tux_linux
You can look around KoBox in KTerm though


[1/26/2022 5:33 PM] tux_linux
@btwarch147 Does Wi-Fi work alright in your Kobo with InkBox?


[1/26/2022 11:33 PM] andi15701
does the display work with this old kernel: https://github.com/kobolabs/Kobo-Reader/blob/abf8b05576c8608e19511340032e32ec3a4b935b/hw/imx6sll-librah2o/kernel.tar.bz2

{Embed}
https://github.com/kobolabs/Kobo-Reader/blob/abf8b05576c8608e19511340032e32ec3a4b935b/hw/imx6sll-librah2o/kernel.tar.bz2
Kobo-Reader/kernel.tar.bz2 at abf8b05576c8608e19511340032e32ec3a4b9...
Contribute to kobolabs/Kobo-Reader development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/Kobo-Reader-A041B


[1/26/2022 11:33 PM] tux_linux
Absolutely


[1/26/2022 11:33 PM] tux_linux
Oh, from this specific commit?


[1/26/2022 11:34 PM] andi15701
yes


[1/26/2022 11:34 PM] andi15701
I would like to find out the change needed from the Kobo Clara kernel


[1/26/2022 11:35 PM] andi15701
to make it work


[1/26/2022 11:35 PM] tux_linux
From which time is it?


[1/26/2022 11:35 PM] andi15701
Sep 17, 2019


[1/26/2022 11:36 PM] andi15701
so the idea would be to roll things back towards the Kobo clara kernel release the same time


[1/26/2022 11:37 PM] andi15701
until the 4 pixel stripes appear


[1/26/2022 11:38 PM] andi15701
everything suspicios is different in recent kernels


[1/26/2022 11:39 PM] andi15701
so I cannot easily apply changes between clara and libra vendor kernels on top of my new near-mainline kernels


[1/26/2022 11:45 PM] tux_linux
Ok, I'll try to compile one from that commit and get back to you


[1/27/2022 5:47 AM] tux_linux
I downloaded the tarball, will try it tomorrow morning probably. FWIW though, the only reason why it was updated was because I asked for an update there this summer : https://github.com/kobolabs/Kobo-Reader/issues/103#issuecomment-875667378
I'm pretty sure it worked before though, maybe some minor changes were made in-between.


[1/27/2022 5:53 PM] btwarch147
It doesn’t at the moment


[1/27/2022 5:54 PM] btwarch147
Is that a known issue?


[1/27/2022 5:54 PM] tux_linux
Really?


[1/27/2022 5:54 PM] tux_linux
What is your Wi-Fi security?


[1/27/2022 5:54 PM] btwarch147
Might be because I have boosters so my SSID shows up more than once


[1/27/2022 5:54 PM] btwarch147
I believe it’s WPA2


[1/27/2022 5:54 PM] tux_linux
It should work then


[1/27/2022 5:54 PM] tux_linux
It works here


[1/27/2022 5:54 PM] tux_linux
Maybe you could debug via usbnet


[1/27/2022 5:55 PM] tux_linux
There's a script at `/usr/local/bin/wifi/connect_to_network.sh`


[1/27/2022 5:55 PM] andi15701
80211W?


[1/27/2022 5:55 PM] btwarch147
Interesting, I’ll give it a go

{Reactions}
👍 

[1/27/2022 5:55 PM] tux_linux
First argument is Wi-Fi SSID and second is Wi-Fi passphrase


[1/27/2022 5:55 PM] tux_linux
USBNet IP is 192.168.2.2


[1/27/2022 5:57 PM] btwarch147
usbnet?


[1/27/2022 5:57 PM] btwarch147
so I don't have to acess a serial port


[1/27/2022 5:58 PM] tux_linux
Like if you connected an Ethernet cable to your Kobo via USB


[1/27/2022 5:58 PM] tux_linux
Yeah


[1/27/2022 5:58 PM] tux_linux
It's only available in the main system


[1/27/2022 5:58 PM] btwarch147
With an OTG cable


[1/27/2022 5:58 PM] tux_linux
That's why we needed serial first


[1/27/2022 5:58 PM] tux_linux
yeah


[1/27/2022 5:58 PM] btwarch147
Whoa


[1/27/2022 5:58 PM] btwarch147
That is very cool


[1/27/2022 5:58 PM] tux_linux
So you can SSH, SCP, etc.


[1/27/2022 5:58 PM] tux_linux
You can even connect to Internet with a bridge via USB


[1/27/2022 5:59 PM] btwarch147
Can I connect a keyboard as well over OTG?


[1/27/2022 5:59 PM] andi15701
yes


[1/27/2022 5:59 PM] tux_linux
Depends how much power it consumes


[1/27/2022 5:59 PM] andi15701
but you need a special cable probably


[1/27/2022 5:59 PM] tux_linux
You need to change usb role too in debugfs IIRC


[1/27/2022 5:59 PM] tux_linux
self-powered USB hub


[1/27/2022 6:00 PM] andi15701
or some y-cable giving power to the kobo


[1/27/2022 6:01 PM] tux_linux
yeah


[1/27/2022 6:01 PM] tux_linux
Maybe connecting VCC too could help


[1/27/2022 6:01 PM] tux_linux
Although that could be dangerous


[1/27/2022 6:02 PM] btwarch147
No lights on the ethernet dongle yet...


[1/27/2022 6:02 PM] tux_linux
hmm no


[1/27/2022 6:03 PM] tux_linux
You actually just connect the USB cable to your PC


[1/27/2022 6:03 PM] tux_linux
As if you were transferring files


[1/27/2022 6:03 PM] btwarch147
Ah


[1/27/2022 6:04 PM] btwarch147
I think it's working


[1/27/2022 6:05 PM] btwarch147
It showed up as a network device


[1/27/2022 6:05 PM] tux_linux
So you can set your computer's IP to 192.168.2.1


[1/27/2022 6:05 PM] tux_linux
And do `ssh user@192.168.2.2`


[1/27/2022 6:05 PM] btwarch147
And I set it to link local to get it to connect


[1/27/2022 6:05 PM] tux_linux
there's no dhcp though, you need to set the ips yourself


[1/27/2022 6:10 PM] andi15701
that is my solution for usb

{Attachments}
/mnt/data/projects/git/conversations/media/IMG20220127180824-BAE8B.jpg


[1/27/2022 6:11 PM] tux_linux
a bluetooth dongle?


[1/27/2022 6:11 PM] andi15701
I have a bluetooth dongle inserted


[1/27/2022 6:11 PM] tux_linux
nice


[1/27/2022 6:11 PM] tux_linux
That's a neat idea


[1/27/2022 6:11 PM] andi15701
and on the kobo side there is a magnetic adaptor


[1/27/2022 6:12 PM] andi15701
I put the plug into some charger or powerbank


[1/27/2022 6:13 PM] andi15701
I created the devicetree for the Tolino Vision 5 with that cable (and a bluetooth keyboard)


[1/27/2022 6:13 PM] andi15701
on my Kobo Clara


[1/27/2022 6:13 PM] btwarch147
Not sketchy atall...


[1/27/2022 6:13 PM] tux_linux
cool


[1/27/2022 6:13 PM] btwarch147
Is the kobo always at 192.168.2.2


[1/27/2022 6:13 PM] tux_linux
yes


[1/27/2022 6:15 PM] btwarch147
Do I need to set any gateways/routes/netmasks


[1/27/2022 6:15 PM] tux_linux
no


[1/27/2022 6:15 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D6324.png


[1/27/2022 6:15 PM] tux_linux
In Linux I just do
`ifconfig usb0 192.168.2.1`
`ssh user@192.168.2.2`


[1/27/2022 6:15 PM] btwarch147
That probaly is a better idea


[1/27/2022 6:15 PM] andi15701
maybe your upstream link is also in that network


[1/27/2022 6:15 PM] andi15701
?


[1/27/2022 6:16 PM] andi15701
in that address range


[1/27/2022 6:16 PM] andi15701
that might conflict


[1/27/2022 6:16 PM] tux_linux
caution; it seems you're using gnome w/ networkmanager, so disable that network device before launching those commands ("Turn off") otherwise it will randomly hang your ssh session

{Reactions}
👍 

[1/27/2022 6:16 PM] tux_linux
yes it is possible


[1/27/2022 6:16 PM] andi15701
or run them in a loop


[1/27/2022 6:16 PM] andi15701
with a sleep in between


[1/27/2022 6:16 PM] tux_linux
I need to change that sometime


[1/27/2022 6:16 PM] tux_linux
put an option to set the USBNet ip and subnet


[1/27/2022 6:19 PM] btwarch147
Looks like the ssh is working now


[1/27/2022 6:19 PM] btwarch147
What is the default user password?


[1/27/2022 6:19 PM] tux_linux
`user`


[1/27/2022 6:19 PM] btwarch147
Just guessed it!


[1/27/2022 6:20 PM] tux_linux
I don't bother to really set them even if passwd is read-only, since for non-rooted devices any kind of login is impossible


[1/27/2022 6:20 PM] btwarch147
Permission denied


[1/27/2022 6:21 PM] btwarch147
Maybe I need to login as root?


[1/27/2022 6:21 PM] tux_linux
No


[1/27/2022 6:21 PM] tux_linux
that won't work


[1/27/2022 6:21 PM] tux_linux
are you sure you don't have caps on or anything?


[1/27/2022 6:21 PM] btwarch147
ifconfig: ioctl 0x8913 failed: No such device
insmod: ERROR: could not insert module /modules/drivers/mmc/card/sdio_wifi_pwr.ko: Operation not permitted
insmod: ERROR: could not insert module /modules/wifi/8189fs.ko: Operation not permitted
ifconfig: ioctl 0x8913 failed: No such device
/usr/local/bin/wifi/connect_to_network.sh: line 56: can't create /run/wpa_supplicant.conf: Permission denied
Successfully initialized wpa_supplicant
Failed to open config file '/run/wpa_supplicant.conf', error: No such file or directory
Failed to read or parse configuration '/run/wpa_supplicant.conf'.
Failed to connect to network 'SKYNK8RH'
ifconfig: ioctl 0x8913 failed: No such device


[1/27/2022 6:21 PM] btwarch147
Although the first error looks like it can't find the device


[1/27/2022 6:22 PM] tux_linux
oh


[1/27/2022 6:22 PM] tux_linux
what's dmesg output?


[1/27/2022 6:22 PM] tux_linux
waaaaiit


[1/27/2022 6:22 PM] tux_linux
Yes, you need to login as root


[1/27/2022 6:22 PM] tux_linux
But not from ssh


[1/27/2022 6:22 PM] tux_linux
`su`


[1/27/2022 6:23 PM] tux_linux
SSH root authentication is disabled

{Reactions}
👍 

[1/27/2022 6:23 PM] btwarch147
It's running

{Reactions}
👍 

[1/27/2022 6:23 PM] btwarch147
'Waiting for carrier'


[1/27/2022 6:23 PM] tux_linux
ok


[1/27/2022 6:23 PM] tux_linux
now do ctrl-c


[1/27/2022 6:23 PM] tux_linux
and then


[1/27/2022 6:23 PM] tux_linux
`busybox udhcpc -i eth0`


[1/27/2022 6:24 PM] btwarch147
lease obtained


[1/27/2022 6:24 PM] tux_linux
ok


[1/27/2022 6:24 PM] tux_linux
so dhcpcd was the problem


[1/27/2022 6:24 PM] tux_linux
strange


[1/27/2022 6:24 PM] tux_linux
now you can ping google.com?


[1/27/2022 6:25 PM] btwarch147
Doesn't look like it


[1/27/2022 6:25 PM] btwarch147
Running the original network connection produces this:


[1/27/2022 6:25 PM] tux_linux
Did you obtain an IP from the DHCP server?


[1/27/2022 6:25 PM] btwarch147
Successfully initialized wpa_supplicant
rfkill: Cannot get wiphy information
ioctl[SIOCSIWAP]: Operation not permitted
no such user dhcpcd
dhcpcd-9.4.0 starting
eth0: waiting for carrier
timed out
dhcpcd exited
dhcpcd_fork_cb: truncated read 0 (expected 4)
DHCP request failed.


[1/27/2022 6:25 PM] tux_linux
Yeah that's dhcpcd


[1/27/2022 6:26 PM] btwarch147
I'll try it with my phone hotspot

{Reactions}
👍 

[1/27/2022 6:27 PM] btwarch147
Doesn't work with that either


[1/27/2022 6:27 PM] tux_linux
ok, udhcpc then?


[1/27/2022 6:27 PM] btwarch147
Nope


[1/27/2022 6:27 PM] btwarch147
udhcpc failed to get a DHCP lease


[1/27/2022 6:27 PM] tux_linux
Ok what's dmesg then?


[1/27/2022 6:29 PM] btwarch147


{Attachments}
/mnt/data/projects/git/conversations/media/message-F7805.txt


[1/27/2022 6:30 PM] btwarch147
Hopefully this is the relevant part


[1/27/2022 6:30 PM] tux_linux
Seems it loaded the module fine


[1/27/2022 6:30 PM] tux_linux
No clue


[1/27/2022 6:31 PM] btwarch147
[ 1528.521929] RTL871X: ERROR sdio_chk_hci_resume(eth0) err:-110
[ 1528.522001] RTL871X: 3_sd_cmd52_read: FAIL!(-110) addr=0x00086


[1/27/2022 6:31 PM] btwarch147
There was a lot of this further up


[1/27/2022 6:31 PM] tux_linux
Did you put the Kobo to sleep?


[1/27/2022 6:31 PM] andi15701
what about playing around with wpa_supplicant / wpa_cli


[1/27/2022 6:31 PM] btwarch147
I don't think so


[1/27/2022 6:31 PM] tux_linux
Yeah, you can do that too


[1/27/2022 6:32 PM] tux_linux
Look at the scripts in `/usr/local/bin/wifi` to get insight


[1/27/2022 6:32 PM] andi15701
like scanning for networks, etc


[1/27/2022 6:32 PM] tux_linux
`/usr/local/bin/wifi/list_networks.sh` will do it


[1/27/2022 6:32 PM] andi15701
for compiling 8189fs, I set CONFIG_RTW_SDIO_PM_KEEP_POWER = n

{Reactions}
👍 

[1/27/2022 6:32 PM] tux_linux
List will be printed to `/run/wifi_networks_list` or something like that


[1/27/2022 6:33 PM] andi15701
that avoids some suspend related troubles


[1/27/2022 6:33 PM] btwarch147
List's networks fine


[1/27/2022 6:33 PM] andi15701
either in that makefile or in the commandline while compling it (then without spaces of course)


[1/27/2022 6:34 PM] tux_linux
@andi I compiled the Libra kernel from the tarball you sent, you just want me to check if the display behaves as it should?


[1/27/2022 6:34 PM] btwarch147
I'm getting a no such user dhcpcd error when I try and connect


[1/27/2022 6:34 PM] tux_linux
That's not really an issue


[1/27/2022 6:34 PM] andi15701
yes


[1/27/2022 6:34 PM] tux_linux
ok


[1/27/2022 6:35 PM] andi15701
then I will do a diff clara-vendor-kernel libra-vendor-kernel


[1/27/2022 6:35 PM] andi15701
and split that up


[1/27/2022 6:35 PM] tux_linux
There is actually a way to put it in fastboot without serial it seems


[1/27/2022 6:36 PM] andi15701
yes, page down while powering on


[1/27/2022 6:36 PM] tux_linux
there's a timeout too IIRC


[1/27/2022 6:36 PM] andi15701
yes


[1/27/2022 6:36 PM] tux_linux
Which dtb to use with vendor kernel?


[1/27/2022 6:38 PM] andi15701
imx6sll-e70k02.dtb


[1/27/2022 6:38 PM] tux_linux
ok thanks


[1/27/2022 6:39 PM] andi15701
For wifi I use this: https://github.com/jwrdegoede/rtl8189ES_linux.git  branch rtl8189fs

{Embed}
https://github.com/jwrdegoede/rtl8189ES_linux.git
GitHub - jwrdegoede/rtl8189ES_linux
Contribute to jwrdegoede/rtl8189ES_linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rtl8189ES_linux-B355A


[1/27/2022 6:39 PM] andi15701
seems to work better even with vendor kernel


[1/27/2022 6:40 PM] andi15701
than the vendor stuff


[1/27/2022 6:40 PM] tux_linux
oh cool


[1/27/2022 6:41 PM] andi15701
there is the cfg80211 interface, allowing more modern tools to use that device

{Reactions}
👍 

[1/27/2022 6:43 PM] andi15701
jwrdegoede is a kernel maintainer, so at least there is someone with real kernel knowledge behind it

{Reactions}
👍 

[1/27/2022 6:45 PM] tux_linux
OK, it works fine!
Strange thing though is that with current firmware it seems to refresh slower than it does usually. Pickel boot animation is also taking more time printing dots on the screen


[1/27/2022 6:46 PM] tux_linux
But there aren't any EPD corruption problems, everything displays fine


[1/27/2022 6:48 PM] andi15701
so next step would be that I split up the diff between clara and libra kernel into reasonable chunks, so that we can to step by step towards the clara kernel and hopefully we see the same corruption as with my experimental branch

{Reactions}
👍 

[1/27/2022 6:49 PM] tux_linux
But why wouldn't you take the latest kernel tarball and not the one from Sep 2019?


[1/27/2022 6:51 PM] andi15701
well, I have more experience with that old clara vendor kernel and it reduces the amount of code to analyze, I guess changes might go into both kernels

{Reactions}
👍 

[1/27/2022 6:52 PM] andi15701
so maybe the newer clara kernel also contains the changes needed to fix the libra display problem

{Reactions}
👍 

[2/6/2022 10:17 PM] andi15701
does that one break the epdc

{Attachments}
/mnt/data/projects/git/conversations/media/0001-revert-epdc-changes-towards-clara-hd--F95A6.patch


[2/6/2022 10:17 PM] andi15701
on the old libra h2o kernel


[2/6/2022 10:18 PM] tux_linux
Which old Libra H2O kernel? ;p
Vendor one, or older vendor one?


[2/6/2022 10:18 PM] andi15701
older vendor one

{Reactions}
👍 

[2/6/2022 10:18 PM] tux_linux
In which way should it break epdc?


[2/6/2022 10:19 PM] andi15701
to give the same 4 pixel pattern as near-mainline

{Reactions}
👍 

[2/7/2022 2:39 PM] tux_linux
I'll give it a try tonight


[2/12/2022 6:57 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-7E5B7.txt


[2/12/2022 7:01 PM] daboone72
Are you making good progress with the Libra?


[2/12/2022 7:01 PM] tux_linux
That's the compilation error I got with @andi patch


[2/12/2022 7:01 PM] tux_linux
I'll try with newer 11.2.1 GCC


[2/12/2022 7:02 PM] andi15701
no


[2/12/2022 7:02 PM] andi15701
does not make sense


[2/12/2022 7:03 PM] andi15701
I have done a git init on the libra sources


[2/12/2022 7:03 PM] andi15701
and then unpacked the clara sources on top of it


[2/12/2022 7:03 PM] andi15701
and did a partial commit


[2/12/2022 7:03 PM] andi15701
but that was too partial


[2/12/2022 7:03 PM] tux_linux
I used the stock vendor sources from 17 Sep 2019


[2/12/2022 7:03 PM] andi15701
correct


[2/12/2022 7:03 PM] tux_linux
Then `patch -p1 < patchfile`


[2/12/2022 7:04 PM] andi15701
yes, correct


[2/12/2022 7:04 PM] tux_linux
And it patched correctly


[2/12/2022 7:04 PM] andi15701
error on my side


[2/12/2022 7:04 PM] andi15701
sorry


[2/12/2022 7:04 PM] tux_linux
But GCC used for compiling was 4.9.4


[2/12/2022 7:04 PM] tux_linux
ok


[2/12/2022 7:04 PM] tux_linux
Do you have another patch?


[2/12/2022 7:04 PM] andi15701
that is good


[2/12/2022 7:04 PM] andi15701
I am preparing

{Reactions}
👍 

[2/12/2022 7:06 PM] andi15701
hmm, did I say at some time that I hate kobo vendor kernels?


[2/12/2022 7:06 PM] tux_linux
you said that about U-Boot


[2/12/2022 7:06 PM] tux_linux
but I hate them too


[2/12/2022 7:07 PM] tux_linux
;p


[2/12/2022 7:10 PM] andi15701
CC      kernel/bounds.s
In file included from include/linux/kernel.h:11,
                 from include/asm-generic/bug.h:13,
                 from ./arch/arm/include/asm/bug.h:61,
                 from include/linux/bug.h:4,
                 from include/linux/page-flags.h:9,
                 from kernel/bounds.c:9:
include/linux/log2.h:22:1: warning: ignoring attribute ‘noreturn’ because it conflicts with attribute ‘const’ [-Wattributes]
   22 | int ____ilog2_NaN(void);


[2/12/2022 7:10 PM] andi15701
that happens if you use gcc10


[2/12/2022 7:12 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/0001-revert-epdc-changes-towards-clara-hd--0069C.patch


[2/12/2022 7:13 PM] andi15701
no suitable compiler here


[2/12/2022 7:13 PM] andi15701
I hope that one works


[2/12/2022 7:14 PM] tux_linux
I'll try that


[2/12/2022 7:15 PM] tux_linux
Ok, compiling; let's see


[2/12/2022 7:18 PM] tux_linux
Sadly not working


[2/12/2022 7:18 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-48FC9.txt


[2/12/2022 7:18 PM] tux_linux
Still with 4.9.4


[2/12/2022 7:19 PM] andi15701
ok, I will dig that compiler out

{Reactions}
👍 

[2/12/2022 7:20 PM] tux_linux
Otherwise, if you have a working source tree, you can share that too


[2/12/2022 7:22 PM] andi15701
a last quick try

{Attachments}
/mnt/data/projects/git/conversations/media/0001-tce-clock-diff-towards-clara-C28D1.patch


[2/12/2022 7:23 PM] tux_linux
Do I need to apply all previous patches or only this one?


[2/12/2022 7:23 PM] andi15701
only this one


[2/12/2022 7:23 PM] tux_linux
ok


[2/12/2022 7:24 PM] tux_linux
So I untar the source tree again and patch with this file, right?


[2/12/2022 7:24 PM] andi15701
yes


[2/12/2022 7:24 PM] tux_linux
ok


[2/12/2022 7:27 PM] tux_linux
I get a whole bunch of warnings but it compiles


[2/12/2022 7:28 PM] tux_linux
Do you have the little initrd you made in January that I could append to an Android image?


[2/12/2022 7:28 PM] tux_linux
Or maybe I can just boot Nickel with it


[2/12/2022 7:28 PM] tux_linux
What's better?


[2/12/2022 7:29 PM] andi15701
you can just try Nickel or whatever you want


[2/12/2022 7:29 PM] tux_linux
ok


[2/12/2022 7:32 PM] tux_linux
So it would be that dtb
`  DTC     arch/arm/boot/dts/imx6sll-e70k02.dtb`


[2/12/2022 7:37 PM] andi15701
yes


[2/12/2022 7:38 PM] andi15701
but that is the same as the stock one


[2/12/2022 7:38 PM] tux_linux
display's not behaving correctly...


[2/12/2022 7:39 PM] tux_linux
wait I'll send a pic


[2/12/2022 7:40 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220212_183838691-0B282.jpg


[2/12/2022 7:42 PM] andi15701
hmm, that is interesting, so that is a different problem


[2/12/2022 7:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220212_184302593-7895C.jpg


[2/12/2022 7:45 PM] andi15701
dmesg output?


[2/12/2022 7:46 PM] tux_linux
sure
Let me connect it via serial


[2/12/2022 7:53 PM] tux_linux
Lately my Libra has been encountering serial port issues
Like I can't send return


[2/12/2022 8:19 PM] tux_linux
ok finally


[2/12/2022 8:19 PM] tux_linux
```[    1.273176] EPDC_QoS not supported on this platform !
[    1.339477] imx_epdc_v2_fb 20f4000.epdc: Unable to get an accurate EPDC pix clkdesired = 25000000, actual = 40000000```


[2/12/2022 8:23 PM] andi15701
hmm, totally confusing


[2/12/2022 8:25 PM] tux_linux
Complete log

{Attachments}
/mnt/data/projects/git/conversations/media/message-EEB26.txt


[2/12/2022 8:26 PM] andi15701
ok, understood


[2/12/2022 8:27 PM] andi15701
totally wrong mode


[2/12/2022 8:27 PM] andi15701
avoid that kernel


[2/12/2022 8:28 PM] tux_linux
Dangerous for hardware?


[2/12/2022 8:28 PM] andi15701
not sure, but then I should try things on my broken display first


[2/12/2022 8:28 PM] andi15701
makes more sense


[2/12/2022 8:29 PM] tux_linux
Well, display does work fine when booting a working kernel


[2/12/2022 8:30 PM] andi15701
I have not killed any display by experiments with them, but I know someone who was worried to experiment


[2/12/2022 8:31 PM] andi15701
And in this case, there is a safer solution


[4/28/2022 5:36 PM] andi15701
pixel


[6/13/2022 2:33 AM] commutativity
aaa


[6/13/2022 2:33 AM] commutativity
a


[6/13/2022 2:47 AM] tux_linux
i told ya


[6/13/2022 2:50 AM] commutativity
i just cant get out of autoboot lol


[6/13/2022 2:51 AM] tux_linux
is your rx connected correctly?


[6/13/2022 2:51 AM] commutativity
yep


[6/13/2022 2:51 AM] tux_linux
hit any key even before it says that?


[6/13/2022 2:52 AM] tux_linux
(and when it says that)


[6/13/2022 2:52 AM] commutativity
yep


[6/13/2022 2:52 AM] tux_linux
what's the boot log?


[6/13/2022 2:56 AM] commutativity


{Attachments}
/mnt/data/projects/git/conversations/media/message-B6392.txt


[6/13/2022 2:57 AM] tux_linux
can you input something once the system is booted?


[6/13/2022 2:58 AM] commutativity
doesnt look like it


[6/13/2022 2:58 AM] commutativity
is it supposed to echo back?


[6/13/2022 2:58 AM] tux_linux
touch the screen and answer this question again


[6/13/2022 3:03 AM] commutativity
nada


[6/13/2022 3:03 AM] tux_linux
then your rx connection is not set up correctly


[6/13/2022 3:06 AM] commutativity
wait im fucking stupid


[6/13/2022 3:06 AM] commutativity
i had rx -> rx


[6/13/2022 3:06 AM] tux_linux
but then how was the serial line sending info


[6/13/2022 3:06 AM] commutativity
i have no idea


[6/13/2022 3:06 AM] tux_linux
you probably had rx->gnd


[6/13/2022 3:06 AM] tux_linux
no?


[6/13/2022 3:07 AM] commutativity
nope


[6/13/2022 3:08 AM] tux_linux
Anyways, the stop autoboot thing should work now


[8/23/2022 1:26 AM] Deleted User
okay wow


[8/23/2022 1:27 AM] Deleted User
I skim read what happened so far


[8/23/2022 1:27 AM] Deleted User
whats the status @btwarch147


[8/23/2022 1:27 AM] Deleted User
did you get it to work ?


[8/23/2022 1:27 AM] tux_linux
yes he did


[8/23/2022 1:27 AM] Deleted User
so like its fully usable now ?


[8/23/2022 1:27 AM] Deleted User
thats good to hear


[8/23/2022 1:28 AM] tux_linux
you have to be really careful with automatic updates in kobo software though


[8/23/2022 1:28 AM] tux_linux
yes


[8/23/2022 1:28 AM] Deleted User
wdym by auto updates


[8/23/2022 1:29 AM] Deleted User
I mean after I download a dictionary onto it so I can read words I don't ever connect it to wifi anyway


[8/23/2022 1:29 AM] tux_linux
you can overwrite the kernel; inkbox uses a different kernel type


[8/23/2022 1:29 AM] tux_linux
that permits dual boot


[8/23/2022 1:29 AM] tux_linux
but if you don't use inkbox os' kernel the device is bricked until you connect it back to a serial port


[8/23/2022 1:29 AM] Deleted User
ohh so it doesn't wipe the kobo stuff?


[8/23/2022 1:29 AM] tux_linux
kinda


[8/23/2022 1:29 AM] Deleted User
how can I make sure that it always stays on inkbox os so i never have to worry about this happening


[8/23/2022 1:30 AM] Deleted User
because i dont plan on ever touching the kobo stuff again


[8/23/2022 1:30 AM] Deleted User
if this works


[8/23/2022 1:30 AM] tux_linux
just don't reinstall the kobo stuff while you install inkbox


[8/23/2022 1:31 AM] tux_linux
there


[8/23/2022 1:31 AM] Deleted User
Sure I am not quite sure what you mean but I think during the process I will se whats up


[8/23/2022 1:31 AM] Deleted User
can I just not connect it to wifi


[8/23/2022 1:31 AM] Deleted User
and it wont be able to do this?


[8/23/2022 1:32 AM] Deleted User
but anyway where do I start reading for the step by step guide


[8/23/2022 1:41 AM] Deleted User
Well its getting late now I will come back tomorrow and check on the updates. Thanks for the help looking forward to getting this !


[8/23/2022 2:17 AM] tux_linux
Start at the beginning of this thread


[8/23/2022 2:17 AM] tux_linux
If you have questions, ask


[8/23/2022 12:18 PM] Deleted User
oh I just realised I don't have a raspberry pi


[8/23/2022 12:18 PM] Deleted User
do I need one for this


[8/23/2022 12:18 PM] Deleted User
or another single board computer with pins


[8/23/2022 2:47 PM] tux_linux
You can buy an Arduino probably


[8/23/2022 2:48 PM] tux_linux
Or simply an USB to serial adapter


[8/23/2022 2:54 PM] Deleted User
I might just get that usb to serial then


[8/23/2022 2:54 PM] Deleted User
I do have an arduino but really don't know how to use that


[8/23/2022 2:59 PM] tux_linux
https://create.arduino.cc/projecthub/PatelDarshil/ways-to-use-arduino-as-usb-to-ttl-converter-475533

{Embed}
https://create.arduino.cc/projecthub/PatelDarshil/ways-to-use-arduino-as-usb-to-ttl-converter-475533
Ways to Use Arduino as USB to TTL Converter
Three ways to use Arduino as a USB to TTL converter. Helpful one! By Patel Darshil.
/mnt/data/projects/git/conversations/media/p1090232_fuFcwLKLgT-AFDEE.JPG


[8/23/2022 3:03 PM] Deleted User
so I just connect this to the kobo and then connect this to the computer ?


[8/23/2022 3:03 PM] Deleted User
and it just acts like an adapter?


[8/23/2022 3:03 PM] Deleted User
that is pretty cool


[8/23/2022 3:03 PM] Deleted User
thanks

{Reactions}
👍 

[8/23/2022 3:03 PM] Deleted User
I have the arduino uno and I think I can use that


[8/23/2022 3:11 PM] tux_linux
It should


[8/23/2022 4:41 PM] szybet
god i hate discord porting threads


[8/23/2022 4:41 PM] szybet
they never notify me properly


[8/25/2022 11:52 AM] andi15701
btw: I have described a method to backup the Kobo Libra H2O in the postmarketos porting merge request, maybe that is also interesting here


[8/25/2022 12:21 PM] andi15701
it does work without serial console


[8/25/2022 3:08 PM] tux_linux
Very cool
Sadly it seems I lost mine


[8/27/2022 7:44 PM] Deleted User
https://discordapp.com/channels/809205711778480158/934478430903337020/934478433369604238


[8/27/2022 8:13 PM] Deleted User
hey @tux-linux


[8/27/2022 8:13 PM] tux_linux
yes?


[8/27/2022 8:13 PM] Deleted User
I connected the arduino to the computer and the two rx and tx cables to the kobo


[8/27/2022 8:13 PM] Deleted User
and i soldered them on


[8/27/2022 8:13 PM] Deleted User
so it dont fall of


[8/27/2022 8:13 PM] Deleted User
now what do i do


[8/27/2022 8:13 PM] tux_linux
do you have access to the serial console?


[8/27/2022 8:14 PM] Deleted User
how do I do that


[8/27/2022 8:14 PM] tux_linux
.


[8/27/2022 8:14 PM] Deleted User
right now i have this


[8/27/2022 8:15 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_a4da9eb3-9f82-43f-31402.jpg


[8/27/2022 8:15 PM] tux_linux
you're connected via usb to the arduino?


[8/27/2022 8:15 PM] Deleted User
did the picture send


[8/27/2022 8:15 PM] szybet
yes


[8/27/2022 8:15 PM] Deleted User
I just took out the arduino from the box i never used it before


[8/27/2022 8:16 PM] Deleted User
I looked on the link but for this method he didnt say anythign about code


[8/27/2022 8:16 PM] szybet
you need code


[8/27/2022 8:19 PM] szybet
well


[8/27/2022 8:19 PM] szybet
no


[8/27/2022 8:19 PM] tux_linux
at the end you should see a `/dev/ttyUSB0` or `/dev/ttyACM0` on your linux machine


[8/27/2022 8:19 PM] szybet
connect gnd to reset on the arduino


[8/27/2022 8:19 PM] szybet
and no need to code


[8/27/2022 8:23 PM] Deleted User
oh i didnt connect ground


[8/27/2022 8:23 PM] Deleted User
from the arduino to the ground on the kobo


[8/27/2022 8:24 PM] Deleted User
maybe thats why


[8/27/2022 8:24 PM] Deleted User
mb


[8/27/2022 8:24 PM] szybet
bro...


[8/27/2022 8:24 PM] szybet
i hope you didnt destroyed your kobo


[8/27/2022 8:25 PM] tux_linux
don't worry, it has been multiple times when I forgot to connect ground to my kobo and nothing bad happened


[8/27/2022 8:25 PM] tux_linux
though usually I always connect it


[8/27/2022 8:25 PM] Deleted User
The soldering is also a bit messy I hope i can clean it up later


[8/27/2022 8:25 PM] szybet
this can do damage


[8/27/2022 8:25 PM] Deleted User
it went on some of the resistors


[8/27/2022 8:25 PM] szybet
WHAT


[8/27/2022 8:25 PM] szybet
wait


[8/27/2022 8:25 PM] tux_linux
oops


[8/27/2022 8:25 PM] szybet
show me it


[8/27/2022 8:25 PM] Deleted User
okay


[8/27/2022 8:25 PM] szybet
dont turn on anything


[8/27/2022 8:26 PM] tux_linux
a good reason not to solder on kobo


[8/27/2022 8:26 PM] szybet
no, first you learn to solder on scrap, then on kobos


[8/27/2022 8:26 PM] tux_linux
maybe, I don't know his experience


[8/27/2022 8:28 PM] Deleted User
i hope u can see it


[8/27/2022 8:28 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_57a58069-fb8a-403-6B139.jpg


[8/27/2022 8:29 PM] Deleted User
I did solder before but it was on bigger things


[8/27/2022 8:29 PM] tux_linux
hm well


[8/27/2022 8:29 PM] tux_linux
not good news


[8/27/2022 8:29 PM] tux_linux
it seems


[8/27/2022 8:29 PM] szybet
dont turn on turn on your kobo


[8/27/2022 8:29 PM] szybet
90% its already dead


[8/27/2022 8:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DFD2C.png


[8/27/2022 8:29 PM] szybet
are those battery connectors?


[8/27/2022 8:29 PM] tux_linux
maybe put high heat near those places and try to at least separate the contacts


[8/27/2022 8:29 PM] tux_linux
yes, they are already soldered


[8/27/2022 8:29 PM] Deleted User
its not dead


[8/27/2022 8:30 PM] Deleted User
how do i remove the excess solder using a wick


[8/27/2022 8:30 PM] tux_linux
how do you know it


[8/27/2022 8:30 PM] szybet
how did you try it


[8/27/2022 8:30 PM] Deleted User
it was already on


[8/27/2022 8:30 PM] szybet
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA


[8/27/2022 8:30 PM] tux_linux
aaaaaahhhhhhhh


[8/27/2022 8:30 PM] szybet
AAAAAAAAAAAAAAAAAAAAAAAAAA


[8/27/2022 8:30 PM] szybet
AAAAAAAAAAAAAAAAAAAAAA


[8/27/2022 8:30 PM] szybet
AAAAAAAAAAAA


[8/27/2022 8:30 PM] tux_linux
never do that


[8/27/2022 8:30 PM] tux_linux
when turned on


[8/27/2022 8:30 PM] szybet
YOU KNOW YOU CAN START A FIRE?


[8/27/2022 8:30 PM] szybet
LITHIUM BATTERIES ARE DANGEROUS


[8/27/2022 8:30 PM] tux_linux
maybe just connecting wires is ok, but soldering needs power off


[8/27/2022 8:31 PM] szybet
FIRST, NOW YOU DESOLDER THE RED WIRE OF THE BATTERY VERY CAREFULLY


[8/27/2022 8:31 PM] szybet
and put the wire into isolation tape


[8/27/2022 8:31 PM] Deleted User
okay


[8/27/2022 8:31 PM] tux_linux
why that


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] tux_linux
I mean, by that time it would already have catched on fire


[8/27/2022 8:32 PM] szybet
because i dont want him dead


[8/27/2022 8:32 PM] szybet
;_;


[8/27/2022 8:32 PM] tux_linux
maybe you can just try a force power off first


[8/27/2022 8:32 PM] tux_linux
hold power button for 10 seconds


[8/27/2022 8:32 PM] szybet
maybe this too


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] szybet
be very carefull to not touch anything with the read wire


[8/27/2022 8:32 PM] tux_linux
yes


[8/27/2022 8:34 PM] Deleted User
do i need any specific packages


[8/27/2022 8:34 PM] szybet
for what?...


[8/27/2022 8:34 PM] Deleted User
to see the /dev/xxxx


[8/27/2022 8:35 PM] tux_linux
minicom


[8/27/2022 8:35 PM] tux_linux
but not for just seeing it


[8/27/2022 8:35 PM] tux_linux
it should be there


[8/27/2022 8:35 PM] szybet
did you dissoldered the wire?...


[8/27/2022 8:35 PM] tux_linux
check dmesg


[8/27/2022 8:35 PM] Deleted User
oh I see ttyACM0: USB ACM DEVICE


[8/27/2022 8:35 PM] tux_linux
yes, that one


[8/27/2022 8:35 PM] Deleted User
but I dont see it in lsblk


[8/27/2022 8:35 PM] szybet
Hello?


[8/27/2022 8:35 PM] tux_linux
is the battery hot


[8/27/2022 8:35 PM] Deleted User
no


[8/27/2022 8:36 PM] Deleted User
its cold


[8/27/2022 8:36 PM] szybet
answer me


[8/27/2022 8:36 PM] Deleted User
i didnt desolder anything


[8/27/2022 8:36 PM] tux_linux
can you try to separate the contacts on the resistors?


[8/27/2022 8:36 PM] tux_linux
before booting it


[8/27/2022 8:36 PM] Deleted User
wdym


[8/27/2022 8:36 PM] tux_linux
you soldered unwanted things on resistors?


[8/27/2022 8:36 PM] tux_linux
right?


[8/27/2022 8:36 PM] Deleted User
oh that


[8/27/2022 8:36 PM] Deleted User
okay


[8/27/2022 8:37 PM] szybet
god stop


[8/27/2022 8:37 PM] tux_linux
be careful not to unsolder the resistors


[8/27/2022 8:37 PM] szybet
even more chance to short something


[8/27/2022 8:37 PM] tux_linux
depends on skill


[8/27/2022 8:37 PM] tux_linux
well, do it if you feel you can do it


[8/27/2022 8:37 PM] szybet
no


[8/27/2022 8:37 PM] szybet
no


[8/27/2022 8:37 PM] szybet
no


[8/27/2022 8:37 PM] szybet
no


[8/27/2022 8:37 PM] szybet
disconnect the battery please


[8/27/2022 8:38 PM] tux_linux
but then what use will be the ereader


[8/27/2022 8:38 PM] Deleted User
do i take the battery out of the whole kobo


[8/27/2022 8:38 PM] szybet
NO


[8/27/2022 8:38 PM] tux_linux
?


[8/27/2022 8:38 PM] szybet
disconnect only the red wire


[8/27/2022 8:38 PM] szybet
nothing more


[8/27/2022 8:38 PM] Deleted User
alright


[8/27/2022 8:38 PM] szybet
and isolate its end


[8/27/2022 8:38 PM] tux_linux
well, yeah, would be safer to get it out if something else catched on fire


[8/27/2022 8:38 PM] tux_linux
but you should be fine with the wire only


[8/27/2022 8:39 PM] tux_linux
careful, you could unsolder the pad too


[8/27/2022 8:39 PM] tux_linux
which... is a nightmare


[8/27/2022 8:39 PM] szybet
NO
its propably glued, he can damage it


[8/27/2022 8:39 PM] szybet
just use flux and you are fine


[8/27/2022 8:39 PM] tux_linux
batteries are not so hard to remove on ereaders


[8/27/2022 8:40 PM] tux_linux
on sony, it took a credit-card-like card and little time and it was out


[8/27/2022 8:40 PM] tux_linux
did not bend anything iirc


[8/27/2022 8:40 PM] szybet
he dropped solder on resistors on a working ereader with connected battery

please stop saying that things are not hard


[8/27/2022 8:40 PM] tux_linux
well, it would be a safer approach


[8/27/2022 8:40 PM] tux_linux
depends on PoV


[8/27/2022 8:41 PM] tux_linux
the first error was leaving it on


[8/27/2022 8:41 PM] szybet
and dropping solder


[8/27/2022 8:41 PM] tux_linux
it happened on kindle with flux


[8/27/2022 8:42 PM] szybet
well still, soldering skills


[8/27/2022 8:42 PM] szybet
did you used a tin with lead in it?


[8/27/2022 8:43 PM] szybet
how is desoldering the wire going?


[8/27/2022 8:43 PM] szybet
i hope you didnt used too much solder


[8/27/2022 8:43 PM] szybet
YOU DIDNT USED TOO MUCH SOLDER RIGHT?


[8/27/2022 8:43 PM] tux_linux
calm down, requires patience and concentration


[8/27/2022 8:44 PM] szybet
if he connected + and - with solder...


[8/27/2022 8:44 PM] tux_linux
well, boom


[8/27/2022 8:44 PM] szybet
first it requires knowledge


[8/27/2022 8:44 PM] Deleted User
okay so


[8/27/2022 8:44 PM] szybet
dont use too much solder


[8/27/2022 8:44 PM] tux_linux
probably should isolate the other soldered part with tape


[8/27/2022 8:44 PM] Deleted User
I cant desolder the battery


[8/27/2022 8:45 PM] szybet
turn the ereader off


[8/27/2022 8:45 PM] Deleted User
i tried but it didnt do anything


[8/27/2022 8:45 PM] tux_linux
i think it's already off?


[8/27/2022 8:45 PM] Deleted User
i stopped cause i saw sparks


[8/27/2022 8:45 PM] szybet
use flux and tin with lead


[8/27/2022 8:45 PM] tux_linux
ok, well, better not to go further


[8/27/2022 8:45 PM] szybet
oh for fuck.......................


[8/27/2022 8:45 PM] Deleted User
the battery is cold


[8/27/2022 8:45 PM] Deleted User
its just from the connection


[8/27/2022 8:45 PM] szybet
https://tenor.com/view/kopfsch%C3%BCtteln-an-kopf-fassen-oh-no-facepalm-gif-14989627

{Embed}
https://tenor.com/view/kopfsch%C3%BCtteln-an-kopf-fassen-oh-no-facepalm-gif-14989627
/mnt/data/projects/git/conversations/media/kopfsch%25C3%25BCtteln-an-kopf-fassen-oh-n-9156D.png


[8/27/2022 8:45 PM] tux_linux
.


[8/27/2022 8:46 PM] szybet
well not only that


[8/27/2022 8:46 PM] szybet
everything that is next to the read wire solder pad


[8/27/2022 8:46 PM] tux_linux
or the whole board


[8/27/2022 8:46 PM] szybet
i did this with capton tape ;p


[8/27/2022 8:46 PM] tux_linux
cardboard or smth


[8/27/2022 8:47 PM] Deleted User
anyway if i saw it on dmesg


[8/27/2022 8:47 PM] Deleted User
should it come up in lsblk


[8/27/2022 8:47 PM] tux_linux
that's your arduino


[8/27/2022 8:47 PM] tux_linux
no


[8/27/2022 8:47 PM] Deleted User
then how do i access it


[8/27/2022 8:47 PM] szybet
he saw sparks


[8/27/2022 8:47 PM] szybet
and you still are doing it


[8/27/2022 8:47 PM] tux_linux
`sudo minicom -D /dev/ttyACM0 -b 115200 -w`


[8/27/2022 8:47 PM] tux_linux
but don't turn it on


[8/27/2022 8:47 PM] Deleted User
okay


[8/27/2022 8:47 PM] szybet
there is solder on random resistors


[8/27/2022 8:47 PM] Deleted User
i type this command while its off?


[8/27/2022 8:47 PM] tux_linux
or bring a fire extinguisher near you, then turn it on


[8/27/2022 8:47 PM] szybet
no


[8/27/2022 8:48 PM] szybet
no


[8/27/2022 8:48 PM] tux_linux
well, he will have to turn it on some day


[8/27/2022 8:48 PM] szybet
thats not how lithium batteries explode


[8/27/2022 8:48 PM] szybet
dont turn it on


[8/27/2022 8:48 PM] tux_linux
the battery should already have exploded if the resistors were in cause


[8/27/2022 8:48 PM] szybet
the resistors are cpu related


[8/27/2022 8:48 PM] szybet
still not good.


[8/27/2022 8:49 PM] tux_linux
can you post a picture of the current state of the board?


[8/27/2022 8:51 PM] Deleted User
im trying to desolder the stuff from the board atm


[8/27/2022 8:51 PM] Deleted User
im nearly done


[8/27/2022 8:51 PM] andi15701
well, just again, you can backup things without soldering


[8/27/2022 8:52 PM] szybet
thats what i would do:
0. go outside and do it outside. if it explodes a fire extinguisher will not help
1. disconnect the red wire, carefully with proper tin and flux
1.5 click the power button to discharge capacitors
2. remove the solder from resistors. you can propably scrap it, its not soldered together. but very carefully. or just collect the solder. there are many ways. google it
3. make sure everything is fine with the board
4. measure the voltage of the battery, if its below 3.0, its destroyed and run
5. connect it outside, and turn it on


[8/27/2022 8:53 PM] szybet
and i dont want have to do with this conversation anything, im not responsible for anything, idk why im the only one that likes safety and knows the risk with lithium polimer batteries


[8/27/2022 8:53 PM] tux_linux
well, I know it's dangerous


[8/27/2022 8:53 PM] szybet
he doesnt know


[8/27/2022 8:53 PM] tux_linux
he knows we are not responsible


[8/27/2022 8:53 PM] tux_linux
he stated it


[8/27/2022 8:53 PM] szybet
and you dont try to stop him


[8/27/2022 8:53 PM] szybet
thats not the reason to not teach him properly about things.


[8/27/2022 8:54 PM] tux_linux
https://discord.com/channels/809205711778480158/809205711778480162/1011801905502093463


[8/27/2022 8:54 PM] andi15701
well, lithium batterys have protection circuits


[8/27/2022 8:54 PM] andi15701
in fcc tested devices


[8/27/2022 8:54 PM] tux_linux
absolutely not
it was to answer your statement


[8/27/2022 8:54 PM] andi15701
I would not totally rely on it, still be careful

{Reactions}
👍 (2) 

[8/27/2022 8:54 PM] andi15701
but not panic

{Reactions}
👍 

[8/27/2022 8:55 PM] andi15701
During FCC/CE certification such things are tested


[8/27/2022 8:55 PM] szybet
its not a reason to test again


[8/27/2022 8:56 PM] szybet
😞


[8/27/2022 8:56 PM] tux_linux
i don't believe that's what he meant...


[8/27/2022 8:56 PM] szybet
i know


[8/27/2022 8:56 PM] szybet
i just cant believe what is happening in this chat


[8/27/2022 8:58 PM] tux_linux
you still alright?


[8/27/2022 8:58 PM] andi15701
I just meant, no panic if you see open wires at such a cell, just sit back and be a bit careful


[8/27/2022 8:58 PM] Deleted User
okay im done


[8/27/2022 8:58 PM] szybet
everything cool but there were sparks already


[8/27/2022 8:58 PM] Deleted User
no more excess solder


[8/27/2022 8:59 PM] szybet
can we look at it?


[8/27/2022 8:59 PM] tux_linux
yes, send a picture


[8/27/2022 8:59 PM] Deleted User
yeah but my camera is not that good appologies


[8/27/2022 8:59 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_5592ee57-b3e4-485-03AFE.jpg


[8/27/2022 9:00 PM] tux_linux
looks way better


[8/27/2022 9:00 PM] tux_linux
but you haven't soldered ground


[8/27/2022 9:00 PM] tux_linux
at this point, just connect it


[8/27/2022 9:00 PM] tux_linux
don't solder it


[8/27/2022 9:00 PM] Deleted User
Alright


[8/27/2022 9:00 PM] tux_linux
we will avoid... issues


[8/27/2022 9:00 PM] andi15701
well, GND is connected via usb


[8/27/2022 9:01 PM] szybet
thats a good point


[8/27/2022 9:01 PM] tux_linux
i suppose


[8/27/2022 9:01 PM] tux_linux
but gnd was connected by usb to a small linux board I had, kindle would not display things properly unless I connected it


[8/27/2022 9:02 PM] Deleted User
i done it


[8/27/2022 9:02 PM] Deleted User
so now i plug the things in?


[8/27/2022 9:02 PM] tux_linux
(has a diy level shifter 3.3v->1.8v)


[8/27/2022 9:02 PM] tux_linux
you are certain there isn't excess solder anywhere


[8/27/2022 9:02 PM] Deleted User
yeah certain


[8/27/2022 9:02 PM] tux_linux
and you should go outside


[8/27/2022 9:02 PM] tux_linux
just to be sure


[8/27/2022 9:03 PM] tux_linux
bring arduino and stuff too if possible


[8/27/2022 9:03 PM] tux_linux
and you didn't unsolder anything by accident


[8/27/2022 9:03 PM] Deleted User
no no


[8/27/2022 9:03 PM] Deleted User
so now what


[8/27/2022 9:03 PM] Deleted User
its raining outside


[8/27/2022 9:03 PM] tux_linux
oh


[8/27/2022 9:03 PM] tux_linux
then don't go


[8/27/2022 9:03 PM] tux_linux
worst idea


[8/27/2022 9:04 PM] tux_linux
open a window


[8/27/2022 9:04 PM] Deleted User
can i power it on


[8/27/2022 9:04 PM] Deleted User
window is open


[8/27/2022 9:04 PM] tux_linux
@Szybet


[8/27/2022 9:04 PM] tux_linux
i think you can
but wait


[8/27/2022 9:05 PM] Deleted User
alright


[8/27/2022 9:05 PM] szybet
stop


[8/27/2022 9:05 PM] Deleted User
i didnt turn on the kobo


[8/27/2022 9:05 PM] szybet
if you want to hear me out, stop


[8/27/2022 9:05 PM] szybet
do you have a multimeter?


[8/27/2022 9:05 PM] Deleted User
i do not


[8/27/2022 9:05 PM] szybet
well thats bad


[8/27/2022 9:05 PM] szybet
🥴


[8/27/2022 9:05 PM] tux_linux
you could have tested the battery


[8/27/2022 9:05 PM] tux_linux
i think?


[8/27/2022 9:05 PM] szybet
can i have a look at the batter connection?


[8/27/2022 9:05 PM] tux_linux
it looks fine


[8/27/2022 9:05 PM] szybet
below 3V and the battery is dead


[8/27/2022 9:06 PM] Deleted User
can you recommend me a mulitmeter to buy


[8/27/2022 9:06 PM] Deleted User
i have next day


[8/27/2022 9:06 PM] tux_linux
well, at least if it's dead it won't explode (probably)


[8/27/2022 9:06 PM] tux_linux
a voltmeter should be enough


[8/27/2022 9:06 PM] tux_linux
and cheaper too


[8/27/2022 9:07 PM] szybet
not that much


[8/27/2022 9:07 PM] szybet
google it, ask on reddit etc


[8/27/2022 9:07 PM] tux_linux
fluke is good


[8/27/2022 9:07 PM] tux_linux
maybe a bit expensive


[8/27/2022 9:08 PM] szybet
well?


[8/27/2022 9:08 PM] tux_linux
he sent a picture


[8/27/2022 9:08 PM] tux_linux
it looks fine


[8/27/2022 9:08 PM] tux_linux
really fine


[8/27/2022 9:08 PM] szybet
there arent battery connections


[8/27/2022 9:08 PM] tux_linux
.


[8/27/2022 9:08 PM] tux_linux
then what are they


[8/27/2022 9:08 PM] tux_linux
the red and black wire are battery ones


[8/27/2022 9:09 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-90846.png


[8/27/2022 9:09 PM] szybet
old picture


[8/27/2022 9:09 PM] tux_linux
oh


[8/27/2022 9:09 PM] tux_linux
actually it's for the power button right?


[8/27/2022 9:10 PM] tux_linux
or I mixed up the two


[8/27/2022 9:10 PM] szybet
IDK


[8/27/2022 9:10 PM] szybet
i want to see both


[8/27/2022 9:10 PM] szybet
to be sure


[8/27/2022 9:10 PM] tux_linux
on mine there were connections similar for the battery and power button


[8/27/2022 9:11 PM] andi15701
near searial port is power key


[8/27/2022 9:11 PM] andi15701
checked it on mine


[8/27/2022 9:11 PM] tux_linux
oh, that's better


[8/27/2022 9:11 PM] tux_linux
so battery is probably not dead


[8/27/2022 9:11 PM] tux_linux
at all


[8/27/2022 9:11 PM] Deleted User
thats the power


[8/27/2022 9:11 PM] Deleted User
the battery is the one further away


[8/27/2022 9:12 PM] Deleted User
the one thats closest to the tx rx is the power button


[8/27/2022 9:12 PM] Deleted User
do i need to go to the store and get a multimeter


[8/27/2022 9:12 PM] tux_linux
probably not
but don't turn it on just yet


[8/27/2022 9:13 PM] szybet
no


[8/27/2022 9:13 PM] szybet
send a picture of the connection


[8/27/2022 9:13 PM] tux_linux
yes


[8/27/2022 9:13 PM] Deleted User
of the battery?


[8/27/2022 9:13 PM] tux_linux
yes


[8/27/2022 9:13 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_2ee3f4e2-3379-4f6-623B9.jpg


[8/27/2022 9:14 PM] Deleted User
i tried to unsolder the red one but couldnt


[8/27/2022 9:14 PM] Deleted User
before when you told me to do that


[8/27/2022 9:14 PM] tux_linux
do you have a better picture of it? it's blurred


[8/27/2022 9:14 PM] tux_linux
but there doesn't seem to be contamination


[8/27/2022 9:14 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_ca6f9001-b95f-46d-00CC5.jpg


[8/27/2022 9:15 PM] andi15701
well, if nothing there was touched, i would worry


[8/27/2022 9:15 PM] tux_linux
*not worry?


[8/27/2022 9:15 PM] Deleted User
however i will say one thing


[8/27/2022 9:15 PM] andi15701
not worry


[8/27/2022 9:15 PM] Deleted User
when i tried to unsolder the red wire


[8/27/2022 9:15 PM] Deleted User
i saw one tiny spark


[8/27/2022 9:15 PM] Deleted User
but then i stopped


[8/27/2022 9:15 PM] tux_linux
the red one isn't touching the rounded thing ahead of it?


[8/27/2022 9:15 PM] szybet
you propably killed the ereader


[8/27/2022 9:15 PM] andi15701
probably not


[8/27/2022 9:15 PM] Deleted User
no ereader turns on


[8/27/2022 9:16 PM] tux_linux
hm ok so you powered it on


[8/27/2022 9:16 PM] szybet
you tested it already?


[8/27/2022 9:16 PM] szybet
god...


[8/27/2022 9:16 PM] tux_linux
that's great.. safety measures


[8/27/2022 9:16 PM] Deleted User
no it isnt the round thing isnt touching it


[8/27/2022 9:16 PM] tux_linux
ok


[8/27/2022 9:16 PM] Deleted User
i didnt turn it on


[8/27/2022 9:16 PM] Deleted User
It was before


[8/27/2022 9:16 PM] szybet
oh


[8/27/2022 9:16 PM] tux_linux
well yeah, before you saw sparkles?


[8/27/2022 9:16 PM] Deleted User
its still off


[8/27/2022 9:16 PM] Deleted User
no after i saw the sparkles


[8/27/2022 9:16 PM] tux_linux
oh ok


[8/27/2022 9:16 PM] Deleted User
i turned it off before i even unsoldered the excess stufd


[8/27/2022 9:16 PM] Deleted User
and still have not tuened it on


[8/27/2022 9:17 PM] Deleted User
turned*


[8/27/2022 9:17 PM] tux_linux
then that's a huge risk, will not congratulate you on that
but there should be no issue now


[8/27/2022 9:17 PM] Deleted User
alright


[8/27/2022 9:17 PM] andi15701
it was running after any short circuits, then no trouble ahead


[8/27/2022 9:17 PM] andi15701
I would say


[8/27/2022 9:17 PM] szybet
well no go next to the window, turn the ereader on, if it starts smoking, or sparking, throw it away of the window

i hope you dont live high in the building?


[8/27/2022 9:17 PM] Deleted User
okay


[8/27/2022 9:18 PM] Deleted User
do i unlock the ereader


[8/27/2022 9:19 PM] andi15701
One important thing about those protection circuits at batteries:


[8/27/2022 9:19 PM] szybet
what


[8/27/2022 9:19 PM] tux_linux
?


[8/27/2022 9:19 PM] andi15701
often they  switch power off until there is really no load


[8/27/2022 9:20 PM] andi15701
so if you have a  short circuit, you might not measure any power behind the protection circuit


[8/27/2022 9:21 PM] andi15701
until you either charge or completely disconnect the battery


[8/27/2022 9:21 PM] Deleted User
i turned it on


[8/27/2022 9:21 PM] szybet
thats true


[8/27/2022 9:21 PM] Deleted User
everything is fine


[8/27/2022 9:21 PM] Deleted User
no sparks no smoke


[8/27/2022 9:21 PM] tux_linux
good


[8/27/2022 9:21 PM] szybet
you know how lucky you are?


[8/27/2022 9:21 PM] Deleted User
battery cold


[8/27/2022 9:21 PM] tux_linux
then see if you get anything with minicom


[8/27/2022 9:22 PM] Deleted User
```doas  minicom -D /dev/ttyACM0 -b 115200 -w``` this right


[8/27/2022 9:22 PM] tux_linux
yes


[8/27/2022 9:22 PM] tux_linux
you using openbsd?


[8/27/2022 9:22 PM] Deleted User
no not this machine


[8/27/2022 9:22 PM] Deleted User
i just use opendoas


[8/27/2022 9:22 PM] tux_linux
ok


[8/27/2022 9:22 PM] tux_linux
cool


[8/27/2022 9:22 PM] Deleted User
okay so


[8/27/2022 9:22 PM] Deleted User
i see this


[8/27/2022 9:23 PM] Deleted User
http://0x0.st/o9Cz.png

{Embed}
http://0x0.st/o9Cz.png
/mnt/data/projects/git/conversations/media/o9Cz-34A70.png


[8/27/2022 9:23 PM] tux_linux
power it off


[8/27/2022 9:23 PM] tux_linux
then power it on


[8/27/2022 9:23 PM] Deleted User
okay


[8/27/2022 9:23 PM] tux_linux
you should see logs on serial


[8/27/2022 9:23 PM] tux_linux
if not there is a problem


[8/27/2022 9:23 PM] Deleted User
power what off


[8/27/2022 9:24 PM] Deleted User
the arduino or the kobo


[8/27/2022 9:24 PM] szybet
did you connected reset to gnd?


[8/27/2022 9:24 PM] tux_linux
kobo


[8/27/2022 9:24 PM] Deleted User
yes


[8/27/2022 9:24 PM] Deleted User
i did


[8/27/2022 9:24 PM] Deleted User
i send a picture


[8/27/2022 9:26 PM] Deleted User
its really hard to power it off and power it back on


[8/27/2022 9:27 PM] tux_linux
use your fingernail


[8/27/2022 9:27 PM] tux_linux
if you have nails


[8/27/2022 9:27 PM] tux_linux
or a toothpick


[8/27/2022 9:27 PM] Deleted User
okay so now


[8/27/2022 9:27 PM] szybet
gnd propably isint connected properly?


[8/27/2022 9:27 PM] szybet
or tx and rx isint switched


[8/27/2022 9:27 PM] Deleted User
my ereader doesnt turn on


[8/27/2022 9:27 PM] tux_linux
that's just great


[8/27/2022 9:27 PM] Deleted User
the white light is a solid light on the left


[8/27/2022 9:28 PM] Deleted User
right*


[8/27/2022 9:28 PM] Deleted User
does that mean anything


[8/27/2022 9:28 PM] tux_linux
hmm


[8/27/2022 9:28 PM] tux_linux
maybe you triggered download mode


[8/27/2022 9:28 PM] tux_linux
interesting


[8/27/2022 9:28 PM] andi15701
echo on the serial console


[8/27/2022 9:28 PM] tux_linux
what did you do


[8/27/2022 9:28 PM] Deleted User
i honestly just


[8/27/2022 9:28 PM] andi15701
might cause break into uboot


[8/27/2022 9:28 PM] tux_linux
or you are on u-boot prompt


[8/27/2022 9:28 PM] Deleted User
powered it off


[8/27/2022 9:28 PM] Deleted User
@��>�H@0r�<��@


[8/27/2022 9:28 PM] Deleted User
this came up on the logs


[8/27/2022 9:28 PM] szybet
GND isint connected propely


[8/27/2022 9:28 PM] szybet
:)


[8/27/2022 9:28 PM] tux_linux
yes, connect gnd


[8/27/2022 9:28 PM] tux_linux
to the kobo


[8/27/2022 9:28 PM] andi15701
do you see anything on usb


[8/27/2022 9:28 PM] tux_linux
no solder


[8/27/2022 9:29 PM] Deleted User
it keeps falling out


[8/27/2022 9:29 PM] tux_linux
use a toothpick to hold it in place if needed


[8/27/2022 9:29 PM] Deleted User
okay


[8/27/2022 9:29 PM] andi15701
do you have usb connected to the reader?


[8/27/2022 9:29 PM] andi15701
that should also give you a gnd connection


[8/27/2022 9:29 PM] szybet
and usb connected to the same device as minicom is running*?


[8/27/2022 9:30 PM] tux_linux
at least something is happening


[8/27/2022 9:30 PM] tux_linux
yes, too


[8/27/2022 9:32 PM] Deleted User
yeah so its saying its offline


[8/27/2022 9:32 PM] andi15701
just a note: for making a backup we do not need serial


[8/27/2022 9:32 PM] Deleted User
let me send a pic


[8/27/2022 9:32 PM] Deleted User
but ereader turned on


[8/27/2022 9:32 PM] tux_linux
isn't related


[8/27/2022 9:32 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_2fb33f67-6a55-4f4-906D5.jpg


[8/27/2022 9:32 PM] Deleted User
thats what i have


[8/27/2022 9:32 PM] andi15701
rts/cts should be turned off?


[8/27/2022 9:33 PM] tux_linux
SH!T


[8/27/2022 9:33 PM] tux_linux
you connected VCC


[8/27/2022 9:33 PM] Deleted User
what


[8/27/2022 9:33 PM] tux_linux
stop


[8/27/2022 9:33 PM] tux_linux
unconnect the leftmost cable


[8/27/2022 9:33 PM] tux_linux
immediately


[8/27/2022 9:33 PM] Deleted User
i did


[8/27/2022 9:33 PM] tux_linux
ok


[8/27/2022 9:33 PM] tux_linux
ground is the rightmost hole
let me verify


[8/27/2022 9:33 PM] Deleted User
it didnt even go in anyway


[8/27/2022 9:34 PM] tux_linux
yes, it's the leftmost


[8/27/2022 9:34 PM] Deleted User
can i solder it on


[8/27/2022 9:34 PM] Deleted User
what


[8/27/2022 9:34 PM] tux_linux
no


[8/27/2022 9:34 PM] tux_linux
sorry


[8/27/2022 9:34 PM] tux_linux
rightmost


[8/27/2022 9:34 PM] Deleted User
if i solder it on it stays


[8/27/2022 9:34 PM] Deleted User
the tooth pick doesnt work


[8/27/2022 9:35 PM] tux_linux
try blue tack


[8/27/2022 9:35 PM] andi15701
do we really need serial?


[8/27/2022 9:35 PM] tux_linux
yes


[8/27/2022 9:35 PM] tux_linux
to reformat the emmc


[8/27/2022 9:35 PM] andi15701
no


[8/27/2022 9:36 PM] andi15701
you do not need it


[8/27/2022 9:36 PM] tux_linux
and other things


[8/27/2022 9:36 PM] tux_linux
i think


[8/27/2022 9:36 PM] andi15701
if anything goes wrong with inkbox, you will need it yes


[8/27/2022 9:36 PM] Deleted User
got my blue tack


[8/27/2022 9:36 PM] Deleted User
stuck it


[8/27/2022 9:37 PM] Deleted User
http://0x0.st/o9CX.png

{Embed}
http://0x0.st/o9CX.png
/mnt/data/projects/git/conversations/media/o9CX-55870.png


[8/27/2022 9:37 PM] tux_linux
that's self-feedback


[8/27/2022 9:37 PM] tux_linux
try poweroff/on


[8/27/2022 9:38 PM] Deleted User
yeah i dont see anything


[8/27/2022 9:38 PM] Deleted User
just two question marks and an at sign


[8/27/2022 9:38 PM] tux_linux
is tx -> rx and rx -> tx?


[8/27/2022 9:38 PM] Deleted User
they are


[8/27/2022 9:39 PM] tux_linux
is gnd actually connected to gnd?


[8/27/2022 9:39 PM] andi15701
gpsd is running?


[8/27/2022 9:39 PM] andi15701
or modemmanager?


[8/27/2022 9:39 PM] tux_linux
try to plug in the kobo via usb to ensure we get gnd


[8/27/2022 9:39 PM] tux_linux
stay close to the window


[8/27/2022 9:39 PM] Deleted User
on the arduino


[8/27/2022 9:39 PM] tux_linux
we never know


[8/27/2022 9:39 PM] Deleted User
the tx light is flashing


[8/27/2022 9:40 PM] Deleted User
flickering


[8/27/2022 9:43 PM] Deleted User
just to be sure coudl you tell me the tx and rx points on the kobo so i can double check


[8/27/2022 9:44 PM] tux_linux
leftmost one is vcc
then tx
then rx
then gnd


[8/27/2022 9:47 PM] Deleted User
okay so the tx goes to rx on the arduino


[8/27/2022 9:47 PM] tux_linux
yes


[8/27/2022 9:47 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_d9d25719-cfba-488-432A7.jpg


[8/27/2022 9:47 PM] Deleted User
so the tx goes to this one that says rx?


[8/27/2022 9:48 PM] tux_linux
yes


[8/27/2022 9:48 PM] andi15701
maybe you can also connect rx/tx on arduino


[8/27/2022 9:48 PM] andi15701
and check whether there is an echo


[8/27/2022 9:48 PM] andi15701
without connection to the libra


[8/27/2022 9:49 PM] Deleted User
the arrows on this ardunio makes it look confusing


[8/27/2022 9:49 PM] Deleted User
but i did what you said


[8/27/2022 9:49 PM] andi15701
and check if the echo goes away without that shourt circuit


[8/27/2022 9:50 PM] andi15701
so we can rule out any problems on pc side


[8/27/2022 9:51 PM] Deleted User
what do you want me to do?


[8/27/2022 9:51 PM] Deleted User
what is an echo


[8/27/2022 9:51 PM] andi15701
so you type in characters and they come back


[8/27/2022 9:52 PM] Deleted User
oh so like i type hello


[8/27/2022 9:52 PM] Deleted User
and it will say hello


[8/27/2022 9:52 PM] andi15701
yes


[8/27/2022 9:52 PM] Deleted User
yeah i cant type anything on this


[8/27/2022 9:52 PM] andi15701
you type it on the pc side in minicom


[8/27/2022 9:52 PM] Deleted User
yeah


[8/27/2022 9:52 PM] Deleted User
cant type anything


[8/27/2022 9:52 PM] andi15701
and it should only work if there is the connection


[8/27/2022 9:52 PM] Deleted User
kobo is powered on


[8/27/2022 9:52 PM] andi15701
without kobo


[8/27/2022 9:53 PM] Deleted User
ohhhh


[8/27/2022 9:53 PM] Deleted User
i get you


[8/27/2022 9:53 PM] Deleted User
do i take off the grnd and reset cable too?


[8/27/2022 9:53 PM] Deleted User
or no


[8/27/2022 9:53 PM] andi15701
to


[8/27/2022 9:53 PM] andi15701
no


[8/27/2022 9:53 PM] Deleted User
ok


[8/27/2022 9:53 PM] Deleted User
yeah kobo not connected


[8/27/2022 9:53 PM] Deleted User
cant type


[8/27/2022 9:54 PM] Deleted User
it just has a | for where i can type


[8/27/2022 9:54 PM] Deleted User
but i cant type


[8/27/2022 9:54 PM] andi15701
then minicom needs to be tamed


[8/27/2022 9:54 PM] andi15701
it has some pitfalls


[8/27/2022 9:55 PM] andi15701
and you should check whether gpsd wants to talk with your device


[8/27/2022 9:55 PM] andi15701
or modemmanager


[8/27/2022 9:56 PM] Deleted User
oh i have to type ctrl a


[8/27/2022 9:56 PM] andi15701
sometimes these programs talk with random serial ports


[8/27/2022 9:57 PM] Deleted User
it says local echo on


[8/27/2022 9:57 PM] Deleted User
but when i type something it doesnt do anything


[8/27/2022 9:57 PM] andi15701
well, then minicom does the echo


[8/27/2022 9:57 PM] Deleted User
like i type hello and press enter


[8/27/2022 9:57 PM] andi15701
crtl-a o


[8/27/2022 9:57 PM] Deleted User
it just shows hello but doesnt give me another hello


[8/27/2022 9:58 PM] Deleted User
and then


[8/27/2022 9:58 PM] andi15701
yes, that is already an echo


[8/27/2022 9:58 PM] andi15701
but if that local echo is turned on, minicom will do that


[8/27/2022 9:58 PM] Deleted User
oh so its good?


[8/27/2022 9:58 PM] andi15701
and not the wire in arduino


[8/27/2022 9:58 PM] Deleted User
like everything is fine


[8/27/2022 9:58 PM] andi15701
no


[8/27/2022 9:58 PM] Deleted User
oh


[8/27/2022 9:59 PM] Deleted User
so i did a ctrl a then o and now it shows config


[8/27/2022 9:59 PM] andi15701
if local echo is on you should get the echo from minicom and the arduino


[8/27/2022 9:59 PM] andi15701
so twice


[8/27/2022 9:59 PM] andi15701
serial port setup


[8/27/2022 9:59 PM] andi15701
flow control needs to be off


[8/27/2022 10:00 PM] Deleted User
doas  minicom -D /dev/ttyACM0 -b 115200 -w should i change the numbers around here?


[8/27/2022 10:00 PM] Deleted User
or flags


[8/27/2022 10:01 PM] andi15701
I have never used commandline there


[8/27/2022 10:02 PM] tux_linux
it's 115200


[8/27/2022 10:02 PM] andi15701
so in that configuration menu, is flow control off


[8/27/2022 10:03 PM] andi15701
as root: fuser /dev/ttyACM0


[8/27/2022 10:03 PM] andi15701
anything unexpected there?


[8/27/2022 10:03 PM] Deleted User
http://0x0.st/o9CM.png

{Embed}
http://0x0.st/o9CM.png
/mnt/data/projects/git/conversations/media/o9CM-00978.png


[8/27/2022 10:03 PM] Deleted User
this is what ctr a o give sme


[8/27/2022 10:04 PM] andi15701
select serial port setup


[8/27/2022 10:04 PM] Deleted User
it says


[8/27/2022 10:04 PM] Deleted User
hardware flow control: yes


[8/27/2022 10:04 PM] Deleted User
software flow control: no


[8/27/2022 10:04 PM] andi15701
hardware flow control must be off


[8/27/2022 10:04 PM] Deleted User
alright


[8/27/2022 10:04 PM] andi15701
if you do not have rts/cts lines involved


[8/27/2022 10:05 PM] Deleted User
now what


[8/27/2022 10:05 PM] andi15701
turn it off, and exit that menu


[8/27/2022 10:05 PM] Deleted User
yeah did that


[8/27/2022 10:05 PM] andi15701
does that change anything?


[8/27/2022 10:05 PM] Deleted User
nope


[8/27/2022 10:06 PM] andi15701
does save setup as dfl work?


[8/27/2022 10:06 PM] Deleted User
it says config saves


[8/27/2022 10:06 PM] Deleted User
saved


[8/27/2022 10:06 PM] Deleted User
when i do that


[8/27/2022 10:07 PM] andi15701
then exit minicom and start without parameters


[8/27/2022 10:07 PM] Deleted User
what so like doas minicom


[8/27/2022 10:07 PM] Deleted User
?


[8/27/2022 10:07 PM] andi15701
it uses the saved configuration


[8/27/2022 10:07 PM] Deleted User
but now it shows /dev/ttyS1


[8/27/2022 10:08 PM] Deleted User
which isnt the right device right


[8/27/2022 10:08 PM] andi15701
again ctrl+a o


[8/27/2022 10:08 PM] andi15701
serial port setup


[8/27/2022 10:08 PM] andi15701
and set the right device


[8/27/2022 10:09 PM] andi15701
and save the configuration


[8/27/2022 10:09 PM] Deleted User
yeah it says no


[8/27/2022 10:09 PM] Deleted User
like the config is saved


[8/27/2022 10:09 PM] Deleted User
but i have to specify the device


[8/27/2022 10:09 PM] Deleted User
in the terminal


[8/27/2022 10:09 PM] andi15701
the is also "Serial device" some lines


[8/27/2022 10:09 PM] andi15701
above


[8/27/2022 10:10 PM] andi15701
and there should also be /dev/ttyACM0


[8/27/2022 10:10 PM] Deleted User
it still doesn't work


[8/27/2022 10:13 PM] Deleted User
http://0x0.st/o9Ce.png

{Embed}
http://0x0.st/o9Ce.png
/mnt/data/projects/git/conversations/media/o9Ce-C3F80.png


[8/27/2022 10:13 PM] Deleted User
this is where i am at


[8/27/2022 10:13 PM] andi15701
and local echo is off?


[8/27/2022 10:13 PM] Deleted User
local echo is on


[8/27/2022 10:13 PM] andi15701
so no hello if it is off?


[8/27/2022 10:14 PM] Deleted User
if i turn local echo off


[8/27/2022 10:14 PM] Deleted User
i cant type anything


[8/27/2022 10:14 PM] Deleted User
if i turn it on then i can type that hello you see there


[8/27/2022 10:14 PM] andi15701
it minicom the only user of /dev/ttyACM0?


[8/27/2022 10:14 PM] Deleted User
what do you mean


[8/27/2022 10:14 PM] andi15701
try fuser /dev/ttyACM0


[8/27/2022 10:14 PM] andi15701
other processes might use it


[8/27/2022 10:14 PM] Deleted User
what is fuser


[8/27/2022 10:15 PM] andi15701
and steal the input


[8/27/2022 10:15 PM] Deleted User
i dont have fuser


[8/27/2022 10:15 PM] Deleted User
nothing else is using it


[8/27/2022 10:15 PM] andi15701
how do you know?


[8/27/2022 10:15 PM] Deleted User
because why would it


[8/27/2022 10:16 PM] andi15701
so you do not have the command fuser


[8/27/2022 10:16 PM] Deleted User
yes


[8/27/2022 10:16 PM] Deleted User
i do not


[8/27/2022 10:17 PM] andi15701
is the process modemmanger or gpsd running?


[8/27/2022 10:17 PM] Deleted User
nope


[8/27/2022 10:18 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_79dab293-1d35-4be-46797.jpg


[8/27/2022 10:18 PM] Deleted User
this is the only connection on the arduino


[8/27/2022 10:18 PM] andi15701
ok, then chances are high that nothing else is playing with that serial port


[8/27/2022 10:19 PM] andi15701
I meant, connect tx of the arduino with rx of the arduino


[8/27/2022 10:19 PM] Deleted User
what


[8/27/2022 10:19 PM] Deleted User
you want another cable to connect those to?


[8/27/2022 10:19 PM] andi15701
yes


[8/27/2022 10:19 PM] Deleted User
okay so its weird


[8/27/2022 10:20 PM] Deleted User
if i type one letter


[8/27/2022 10:20 PM] Deleted User
it becomes two


[8/27/2022 10:20 PM] andi15701
and if you turn off local echo


[8/27/2022 10:20 PM] andi15701
you have only one


[8/27/2022 10:20 PM] Deleted User
http://0x0.st/o9C_.png

{Embed}
http://0x0.st/o9C_.png
/mnt/data/projects/git/conversations/media/o9C_-97521.png


[8/27/2022 10:20 PM] Deleted User
i tried to type hello


[8/27/2022 10:20 PM] Deleted User
but this is what happened


[8/27/2022 10:20 PM] Deleted User
its not me


[8/27/2022 10:20 PM] andi15701
so turn off local echo


[8/27/2022 10:20 PM] Deleted User
yeah if i turn off local echo


[8/27/2022 10:20 PM] Deleted User
its just normal


[8/27/2022 10:21 PM] andi15701
yes fine


[8/27/2022 10:21 PM] andi15701
we now know that minicom is working


[8/27/2022 10:21 PM] Deleted User
I wrote this 3 lines


[8/27/2022 10:21 PM] Deleted User
btw


[8/27/2022 10:21 PM] Deleted User
I tried writing hello 3 times


[8/27/2022 10:21 PM] Deleted User
but it couldn't say hello properly


[8/27/2022 10:21 PM] andi15701
and the arduino board


[8/27/2022 10:21 PM] Deleted User
what


[8/27/2022 10:22 PM] andi15701
well, data went from minicom to arduino tx, back to arduino rx


[8/27/2022 10:22 PM] Deleted User
http://0x0.st/o9Cp.png

{Embed}
http://0x0.st/o9Cp.png
/mnt/data/projects/git/conversations/media/o9Cp-C9BE3.png


[8/27/2022 10:22 PM] andi15701
back to minicom


[8/27/2022 10:22 PM] Deleted User
so all good ?


[8/27/2022 10:22 PM] andi15701
if you turn local echo off, all good


[8/27/2022 10:23 PM] Deleted User
so you don't want me to have local echo


[8/27/2022 10:23 PM] andi15701
yes, correct


[8/27/2022 10:23 PM] Deleted User
okay local echo off


[8/27/2022 10:23 PM] Deleted User
now what


[8/27/2022 10:23 PM] andi15701
you can disconnect that rx/tx loop


[8/27/2022 10:23 PM] Deleted User
done


[8/27/2022 10:24 PM] andi15701
and connect tx of the kobo to rx of the arduino


[8/27/2022 10:24 PM] Deleted User
i do this


[8/27/2022 10:25 PM] Deleted User
right done that


[8/27/2022 10:25 PM] Deleted User
power on?


[8/27/2022 10:25 PM] andi15701
yes


[8/27/2022 10:26 PM] Deleted User
okay


[8/27/2022 10:26 PM] Deleted User
nothing


[8/27/2022 10:26 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_470265fe-da7d-414-8A5C0.jpg


[8/27/2022 10:26 PM] Deleted User
the arduino tx and rx rlight are not shining


[8/27/2022 10:26 PM] Deleted User
is that okay


[8/27/2022 10:28 PM] tux_linux
i'm under the impression that the led flashing might actually be eating the input


[8/27/2022 10:28 PM] tux_linux
like a diode would do


[8/27/2022 10:28 PM] tux_linux
but i'm probably wrong


[8/27/2022 10:28 PM] andi15701
I have not had an arduino in my hands for age


[8/27/2022 10:28 PM] Deleted User
when i wiggle the gnd connection on the kobo


[8/27/2022 10:28 PM] Deleted User
the tx light flickers


[8/27/2022 10:28 PM] tux_linux
ensure gnd doesn't touch tx


[8/27/2022 10:28 PM] Deleted User
nothing happens on the rx light


[8/27/2022 10:29 PM] Deleted User
so what do i have to do cause the minicom is not displaying anything


[8/27/2022 10:30 PM] tux_linux
try picocom


[8/27/2022 10:31 PM] andi15701
well, minicom seems to work as tested with the echo test


[8/27/2022 10:31 PM] tux_linux
yeah, at this point i'm not sure anything else will work but it's worth a try


[8/27/2022 10:32 PM] tux_linux
`doas picocom -b 115200 /dev/ttyACM0`


[8/27/2022 10:32 PM] andi15701
I can confirm that

{Reactions}
👍 

[8/27/2022 10:36 PM] Deleted User
whats piccom


[8/27/2022 10:36 PM] tux_linux
some program


[8/27/2022 10:36 PM] tux_linux
install it


[8/27/2022 10:37 PM] Deleted User
okay i see


[8/27/2022 10:38 PM] Deleted User
http://0x0.st/o9CJ.png

{Embed}
http://0x0.st/o9CJ.png
/mnt/data/projects/git/conversations/media/o9CJ-018B1.png


[8/27/2022 10:39 PM] tux_linux
yes that


[8/27/2022 10:39 PM] Deleted User
now what


[8/27/2022 10:39 PM] Deleted User
p off p on?


[8/27/2022 10:39 PM] tux_linux
yes


[8/27/2022 10:41 PM] Deleted User
nothing


[8/27/2022 10:41 PM] Deleted User
what could be wrong


[8/27/2022 10:41 PM] Deleted User
the tx rx connection?


[8/27/2022 10:41 PM] tux_linux
do the rx/tx solder touch each other?


[8/27/2022 10:41 PM] Deleted User
no


[8/27/2022 10:42 PM] tux_linux
at this point I really don't know


[8/27/2022 10:42 PM] tux_linux
try to power it on and at the same time, hit random keys on the keyboard
if the power light stays on, kobo rx works


[8/27/2022 10:43 PM] Deleted User
which power


[8/27/2022 10:44 PM] tux_linux
the power led


[8/27/2022 10:44 PM] tux_linux
on the kobo


[8/27/2022 10:44 PM] Deleted User
its on


[8/27/2022 10:44 PM] Deleted User
solid


[8/27/2022 10:44 PM] tux_linux
and it stays on


[8/27/2022 10:44 PM] Deleted User
yeah


[8/27/2022 10:45 PM] Deleted User
http://0x0.st/o9Cw.png

{Embed}
http://0x0.st/o9Cw.png
/mnt/data/projects/git/conversations/media/o9Cw-606B3.png


[8/27/2022 10:45 PM] Deleted User
i swaped around the cables and thats what i got


[8/27/2022 10:45 PM] tux_linux
can you input something?


[8/27/2022 10:45 PM] Deleted User
nope


[8/27/2022 10:52 PM] andi15701
and the device does not boot further?


[8/27/2022 10:53 PM] Deleted User
its stuck on the 3 circles


[8/27/2022 10:53 PM] Deleted User
i can type on the thing now tho


[8/27/2022 10:53 PM] andi15701
so rx/tx were swapped?


[8/27/2022 10:53 PM] Deleted User
no i just didnt know what you wanted to see


[8/27/2022 10:53 PM] Deleted User
I thought you wanted me to power on the kobo


[8/27/2022 10:53 PM] Deleted User
and unlock it


[8/27/2022 10:53 PM] Deleted User
but i didnt realise i didnt have to unlock it and wait for a solid light


[8/27/2022 10:54 PM] Deleted User
until now


[8/27/2022 10:54 PM] tux_linux
do you see something?


[8/27/2022 10:54 PM] Deleted User
but yes i can type under terminal ready


[8/27/2022 10:54 PM] Deleted User
i cant see a thing tho


[8/27/2022 10:54 PM] andi15701
and have a linux shell?


[8/27/2022 10:54 PM] Deleted User
i can type but i cant backspace


[8/27/2022 10:54 PM] tux_linux
can you enter?


[8/27/2022 10:54 PM] Deleted User
what should i type


[8/27/2022 10:55 PM] tux_linux
does it make a newline or it just goes back to the initial char


[8/27/2022 10:55 PM] tux_linux
return


[8/27/2022 10:55 PM] Deleted User
it goe sback to the initial char


[8/27/2022 10:55 PM] tux_linux
bad serial connection


[8/27/2022 10:55 PM] Deleted User
oh


[8/27/2022 10:55 PM] tux_linux
but you are coming closer it seems


[8/27/2022 10:56 PM] andi15701
so we are probably not in the bootloader anymore


[8/27/2022 10:57 PM] Deleted User
i cant power it off


[8/27/2022 10:57 PM] andi15701
10s press on the power button or so


[8/27/2022 10:57 PM] andi15701
emergency power off


[8/27/2022 10:57 PM] Deleted User
i press it for 10 seconds


[8/27/2022 10:57 PM] Deleted User
then it turns of the light


[8/27/2022 10:57 PM] Deleted User
and turns it right back on


[8/27/2022 10:57 PM] Deleted User
and becomes solid again


[8/27/2022 10:57 PM] andi15701
and no output to picocom


[8/27/2022 10:57 PM] Deleted User
yeah


[8/27/2022 10:58 PM] Deleted User
no output


[8/27/2022 11:02 PM] andi15701
you still have the serial cable swapped?


[8/27/2022 11:02 PM] Deleted User
now it does not go back into the solid whit elight


[8/27/2022 11:02 PM] Deleted User
light


[8/27/2022 11:02 PM] Deleted User
white*


[8/27/2022 11:02 PM] Deleted User
i dont have it swapped i have it the right way


[8/27/2022 11:02 PM] Deleted User
do i swap them?


[8/27/2022 11:02 PM] andi15701
no


[8/27/2022 11:03 PM] Deleted User
yeah idk how to make the solid white light happen agian


[8/27/2022 11:06 PM] Deleted User
back in the solid white light


[8/27/2022 11:06 PM] Deleted User
after taking off the ground pin


[8/27/2022 11:07 PM] Deleted User
when i type tho the rx and tx light flashes on teh arduiono


[8/27/2022 11:08 PM] Deleted User
when i press enter it just goes back to the first line


[8/27/2022 11:08 PM] Deleted User
and when i type it overwrites what i previously wrote


[8/27/2022 11:09 PM] andi15701
hmm, enter print


[8/27/2022 11:09 PM] andi15701
and return


[8/27/2022 11:09 PM] andi15701
does that show up something


[8/27/2022 11:10 PM] Deleted User
okay


[8/27/2022 11:11 PM] Deleted User
it does not


[8/27/2022 11:11 PM] Deleted User
what did tux mean about poor serial connection


[8/27/2022 11:11 PM] Deleted User
should i unsolder the sstuff and just connect it using hands


[8/27/2022 11:11 PM] Deleted User
and bluetack


[8/27/2022 11:12 PM] tux_linux
i never solder serial wires to my kobos


[8/27/2022 11:12 PM] tux_linux
but it's up to you


[8/27/2022 11:12 PM] tux_linux
though given what happened earlier...


[8/27/2022 11:12 PM] tux_linux
i would suggest


[8/27/2022 11:12 PM] tux_linux
don't touch it


[8/27/2022 11:13 PM] tux_linux
if I didn't solder the wires, I would move them around and probably get a working input at some point


[8/27/2022 11:13 PM] szybet
and i always


[8/27/2022 11:13 PM] szybet
;p


[8/27/2022 11:13 PM] andi15701
and I sometimes


[8/27/2022 11:13 PM] andi15701
mostly I use pogo pins


[8/27/2022 11:14 PM] tux_linux
it's better when you have ~8 devices that you debug from time to time, not to solder wires to every one of them


[8/27/2022 11:14 PM] andi15701
on the libra I have solded it


[8/27/2022 11:14 PM] andi15701
but nowhere else


[8/27/2022 11:14 PM] szybet
i had too much problems with faulty connections on microcontrolers, now i always solder


[8/27/2022 11:15 PM] Deleted User
what are pogo pins


[8/27/2022 11:15 PM] szybet
well you could do something like this, solder gold pins to it

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-38DBD.png


[8/27/2022 11:15 PM] szybet
better connections than pogo pins


[8/27/2022 11:16 PM] Deleted User
so okay now i cant type anything


[8/27/2022 11:16 PM] szybet
i dont want to be mean, but you have the entire knowledge of humanity in google and you are asking us this thing


[8/27/2022 11:16 PM] Deleted User
i just searched it


[8/27/2022 11:16 PM] szybet
pogo pins get faulty after some time, thats why i dont like them


[8/27/2022 11:18 PM] andi15701
https://eu.mouser.com/ProductDetail/Mill-Max/319-10-104-00-006000?qs=493kPxzlxfIW9IUgxOI%2FtQ%3D%3D


[8/27/2022 11:18 PM] andi15701
I am not sure, but maybe I am using these


[8/27/2022 11:21 PM] andi15701
I am using them because I want to be able to remove things easily


[8/27/2022 11:21 PM] andi15701
and use the device outside of the "lab"


[8/27/2022 11:22 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/kobo-debug-pogo-FF4F5.jpg


[8/27/2022 11:23 PM] andi15701
I removed the original backcover and I have debug covers with holes in them


[8/27/2022 11:23 PM] andi15701
so no chance for short circuit


[8/27/2022 11:23 PM] andi15701
and that small board has bluetooth


[8/27/2022 11:25 PM] szybet
well i did a prettier thing and 3d printed the whole cover
https://github.com/Szybet/niAudio/blob/main/case/guide.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/case/guide.md
niAudio/guide.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-7924C


[8/27/2022 11:25 PM] szybet
bluetooth serial?


[8/27/2022 11:26 PM] andi15701
custom board with BLE-only SoC. Yes, it converts bluetooth to serial


[8/27/2022 11:26 PM] szybet
sooo cool


[8/27/2022 11:29 PM] Deleted User
so when i dont have the ground pin connected to the kobo


[8/27/2022 11:29 PM] Deleted User
i can type but the enter thing dont work


[8/27/2022 11:29 PM] Deleted User
but when i connect it or try to


[8/27/2022 11:29 PM] Deleted User
i cant type


[8/27/2022 11:32 PM] andi15701
yes, that looks pretty,


[8/27/2022 11:32 PM] Deleted User
so andi


[8/27/2022 11:32 PM] Deleted User
when you use pogo pins


[8/27/2022 11:32 PM] Deleted User
hwo do you connect them to the arduino


[8/27/2022 11:34 PM] andi15701
solder them to a breadboard with connected-through holes and solder wires on the other side


[8/27/2022 11:34 PM] Deleted User
i think im just having problems with the connections


[8/27/2022 11:35 PM] andi15701
of the holes


[8/27/2022 11:35 PM] andi15701
but that is also a bit tricky


[8/27/2022 11:36 PM] andi15701
on the postmarketOS merge request for the libra I have outlined a method how to back up a system without using serial port, install pmOS, restore the backup


[8/27/2022 11:37 PM] andi15701
Something similar should work with inkbox


[8/27/2022 11:37 PM] andi15701
but that should be tried first on my libra


[8/27/2022 11:37 PM] andi15701
with broken display


[8/27/2022 11:37 PM] tux_linux
next step was to compile a kernel with automatic g_mass_storage module loading


[8/27/2022 11:37 PM] tux_linux
and boom, done


[8/27/2022 11:38 PM] andi15701
you would probably update the kernel


[8/27/2022 11:38 PM] andi15701
later


[8/27/2022 11:38 PM] andi15701
at some point


[8/27/2022 11:38 PM] andi15701
less to do so with the bootloader


[8/27/2022 11:38 PM] tux_linux
inkbox uses a dual boot kernel


[8/27/2022 11:39 PM] tux_linux
on this device


[8/27/2022 11:39 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.33-libra_spl/_install/etc/init.d/rcS


[8/27/2022 11:39 PM] andi15701
of course you can fastboot a kernel with mass storage enabled


[8/27/2022 11:41 PM] andi15701
but being able to enable mass storage in the bootloader is a bit more "safety belt" thing


[8/27/2022 11:41 PM] tux_linux
yes


[8/27/2022 11:42 PM] andi15701
so you can happily mess with everything else


[8/27/2022 11:56 PM] Deleted User
alright guys its been good


[8/27/2022 11:56 PM] Deleted User
I guess i probably must of destroyed the contact points by soldering them


[8/27/2022 11:56 PM] Deleted User
thats why i dont get a good connection


[8/27/2022 11:56 PM] Deleted User
so i guess its over


[8/27/2022 11:57 PM] tux_linux
i think there is a way to put it into fastboot without serial


[8/27/2022 11:57 PM] tux_linux
@andi ?


[8/27/2022 11:57 PM] tux_linux
oh, I think I remember, you have to hold a combination of buttons


[8/27/2022 11:58 PM] Deleted User
what


[8/27/2022 11:58 PM] tux_linux
to get inkbox running on it without serial port


[8/27/2022 11:58 PM] Deleted User
ooooh


[8/27/2022 11:58 PM] Deleted User
i need to know


[8/27/2022 11:58 PM] Deleted User
so lets say whatever method he will say will work


[8/27/2022 11:58 PM] Deleted User
what will actually be the process


[8/27/2022 11:59 PM] Deleted User
i connect the usb to the microusb and then flash something


[8/27/2022 11:59 PM] Deleted User
?


[8/28/2022 12:00 AM] szybet
by bad soldering them*

if you want be better, get some scrap electronics and learn desoldering components on them, do it many times, watch how people are doing it on yt. Soon you will be able to come back and repair broken off solder pads


[8/28/2022 12:00 AM] Deleted User
i actually did solder before


[8/28/2022 12:00 AM] Deleted User
i made my own keyboard


[8/28/2022 12:00 AM] Deleted User
i guess i just rushed it this time


[8/28/2022 12:02 AM] szybet
can i see the solder connections you made?


[8/28/2022 12:03 AM] Deleted User
i already closed the lid


[8/28/2022 12:03 AM] Deleted User
after removing everything


[8/28/2022 12:03 AM] szybet
okay


[8/28/2022 12:03 AM] Deleted User
im in uboot


[8/28/2022 12:04 AM] szybet
but still, learn more and get some  experience if you want play with electronics. Lithium polimer batteries are dangerous.


[8/28/2022 12:07 AM] Deleted User
thanks for the heads up


[8/28/2022 12:08 AM] Deleted User
@tux-linux


[8/28/2022 12:08 AM] Deleted User
im in uboot


[8/28/2022 12:08 AM] tux_linux
... what


[8/28/2022 12:08 AM] tux_linux
how


[8/28/2022 12:09 AM] Deleted User
the key combinationm


[8/28/2022 12:09 AM] Deleted User
https://wiki.postmarketos.org/index.php?title=Kobo_Libra_H2O_(kobo-librah2o)&mobileaction=toggle_view_desktop

{Embed}
https://wiki.postmarketos.org/index.php?title=Kobo_Libra_H2O_(kobo-librah2o)&mobileaction=toggle_view_desktop
Index.php


[8/28/2022 12:09 AM] tux_linux
your serial console works?


[8/28/2022 12:09 AM] Deleted User
no


[8/28/2022 12:13 AM] szybet
why?


[8/28/2022 12:42 AM] Deleted User
@tux-linux did you read up on that link


[8/28/2022 12:50 AM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/zImage-root


[8/28/2022 12:50 AM] tux_linux
try `fastboot boot zImage-root`


[8/28/2022 12:50 AM] tux_linux
and check if you see something appearing on dmesg


[8/28/2022 12:50 AM] Deleted User
zImage-root?


[8/28/2022 12:51 AM] Deleted User
is that a flag


[8/28/2022 12:51 AM] tux_linux
look up what a zimage is


[8/28/2022 12:51 AM] Deleted User
or suppose to be  a file


[8/28/2022 12:51 AM] tux_linux
.


[8/28/2022 12:52 AM] Deleted User
oh is this for inkbox?


[8/28/2022 12:53 AM] Deleted User
which package is fastboot in


[8/28/2022 1:01 AM] Deleted User
i think its in android-tools


[8/28/2022 1:22 AM] Deleted User
tbh idk what uboot even looks like


[8/28/2022 1:22 AM] Deleted User
i may have just did something else


[8/28/2022 1:22 AM] Deleted User
ah well


[8/28/2022 1:22 AM] Deleted User
back to giving up I guess


[8/28/2022 1:29 AM] Deleted User
@Szybet


[8/28/2022 1:29 AM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220828_002924-3AACD.jpg


[8/28/2022 2:05 AM] Deleted User
the kobo factory reset


[8/28/2022 2:05 AM] Deleted User
i resoldered new cables to the ports


[8/28/2022 2:05 AM] Deleted User
but i am struggling to get it back to the solid white line


[8/28/2022 2:05 AM] Deleted User
need some help


[8/28/2022 2:06 AM] szybet
i dont understans?


[8/28/2022 2:06 AM] szybet
which white line


[8/28/2022 2:07 AM] Deleted User
sorry i mean


[8/28/2022 2:07 AM] Deleted User
solid white light


[8/28/2022 2:07 AM] Deleted User
during boot up


[8/28/2022 2:07 AM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_a38a4efa-0623-4c6-6CC45.jpg


[8/28/2022 2:07 AM] Deleted User
i soldered it on


[8/28/2022 2:07 AM] Deleted User
but now what do i do


[8/28/2022 2:08 AM] szybet
now i dont understand anything


[8/28/2022 2:08 AM] szybet
describe the process


[8/28/2022 2:08 AM] Deleted User
okay so i connected the arduino the the computer and then connected the grnd with reset


[8/28/2022 2:08 AM] Deleted User
then i connected 3 pins rx tx and grnd from the arduino to the kobo


[8/28/2022 2:09 AM] Deleted User
the kobo right now is powered off and factory reset


[8/28/2022 2:09 AM] Deleted User
i have picocom and minicom installed


[8/28/2022 2:09 AM] Deleted User
where do I go from here


[8/28/2022 2:09 AM] szybet
does the kobo turn on / work?


[8/28/2022 2:09 AM] Deleted User
yes it turns on and works


[8/28/2022 2:10 AM] Deleted User
but it doesn't like go into the "uboot" or "fastboot" or whatever mode


[8/28/2022 2:10 AM] Deleted User
that was described above


[8/28/2022 2:10 AM] Deleted User
its just a normal boot


[8/28/2022 2:10 AM] szybet
well okay, i can guide you tommorow


[8/28/2022 2:10 AM] Deleted User
alright i will leave things as they are now


[8/28/2022 2:10 AM] Deleted User
thanks for the help today


[8/28/2022 3:45 AM] tux_linux
So the serial console is still not working?


[8/28/2022 2:10 PM] andi15701
I have updated the Kobo Libra device wiki page https://wiki.postmarketos.org/index.php?title=Kobo_Libra_H2O_(kobo-librah2o)&mobileaction=toggle_view_desktop

{Embed}
https://wiki.postmarketos.org/index.php?title=Kobo_Libra_H2O_(kobo-librah2o)&mobileaction=toggle_view_desktop
Index.php


[8/28/2022 2:10 PM] andi15701
regarding backups


[8/28/2022 2:11 PM] andi15701
if you want to boot anything via fastboot boot, make sure to use mkbootimage to create a suitable image


[8/28/2022 2:45 PM] tux_linux
Oh
That's right


[8/28/2022 4:49 PM] Deleted User
I am here


[8/28/2022 4:49 PM] Deleted User
guys


[8/28/2022 4:49 PM] Deleted User
lets get this kobo thing sorted


[8/28/2022 4:50 PM] Deleted User
@tux-linux I did everything again


[8/28/2022 4:50 PM] Deleted User
But I am struggling to get into that solid white light you want


[8/28/2022 5:03 PM] szybet
you mean


[8/28/2022 5:03 PM] szybet
?


[8/28/2022 5:04 PM] Deleted User
what steps


[8/28/2022 5:04 PM] Deleted User
do i go from here


[8/28/2022 5:05 PM] Deleted User
powered off kobo soldered and connected everythign to the arduino and computer


[8/28/2022 5:05 PM] szybet
does the kobo still work?


[8/28/2022 5:05 PM] Deleted User
yeah


[8/28/2022 5:05 PM] Deleted User
it works it powers on


[8/28/2022 5:05 PM] Deleted User
and i can click stuff


[8/28/2022 5:05 PM] szybet
cool


[8/28/2022 5:05 PM] szybet
show me your arduino


[8/28/2022 5:05 PM] szybet
connections


[8/28/2022 5:05 PM] Deleted User
alright


[8/28/2022 5:07 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_11a84571-dd63-4b2-BDD0D.jpg


[8/28/2022 5:07 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_b9df67f5-2b99-4af-2F7E8.jpg


[8/28/2022 5:07 PM] Deleted User
i know the vcc one is messed up but dont worry they dont touch the others


[8/28/2022 5:07 PM] Deleted User
the solders are seperate


[8/28/2022 5:08 PM] szybet
can i get a clearer picture of this?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-46EF9.png


[8/28/2022 5:08 PM] Deleted User
i will try


[8/28/2022 5:09 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_dd9e109d-ab0c-42b-505C7.jpg


[8/28/2022 5:13 PM] szybet
well im worried about this mess


[8/28/2022 5:13 PM] szybet
well connect your arduino to pc and check which serial port does it use in /dev


[8/28/2022 5:15 PM] Deleted User
alright


[8/28/2022 5:15 PM] Deleted User
the arduino uses ttyACM0


[8/28/2022 5:16 PM] szybet
does the arduno some diodes?


[8/28/2022 5:16 PM] szybet
led*


[8/28/2022 5:16 PM] Deleted User
yes it has led


[8/28/2022 5:16 PM] szybet
show me


[8/28/2022 5:16 PM] Deleted User
okay


[8/28/2022 5:17 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_9c394b4b-04b6-4ae-E2FB7.jpg


[8/28/2022 5:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E2BE8.png


[8/28/2022 5:17 PM] Deleted User
the tx and rx are leds


[8/28/2022 5:17 PM] szybet
launch minicom on baud rate 11520 and spam space


[8/28/2022 5:17 PM] Deleted User
uh


[8/28/2022 5:17 PM] szybet
if the tx diode flickers, tell me


[8/28/2022 5:18 PM] Deleted User
doas  minicom -D /dev/ttyACM0 -b 115200 -w


[8/28/2022 5:18 PM] Deleted User
this one right?


[8/28/2022 5:18 PM] Deleted User
no lights flicker


[8/28/2022 5:18 PM] szybet
without **-w**


[8/28/2022 5:18 PM] Deleted User
okay


[8/28/2022 5:18 PM] Deleted User
no lights flicker


[8/28/2022 5:19 PM] Deleted User
the kobo is powered off


[8/28/2022 5:19 PM] szybet
go to settings and change the hard ware flow setting


[8/28/2022 5:19 PM] szybet
it doesnt matter now


[8/28/2022 5:19 PM] Deleted User
change it to what


[8/28/2022 5:19 PM] Deleted User
no or yes


[8/28/2022 5:19 PM] szybet
to the other state that isint setted now


[8/28/2022 5:19 PM] Deleted User
okay


[8/28/2022 5:19 PM] Deleted User
now i restart it?


[8/28/2022 5:19 PM] andi15701
we need flow off


[8/28/2022 5:20 PM] szybet
what restart


[8/28/2022 5:20 PM] Deleted User
the minicom


[8/28/2022 5:20 PM] szybet
no


[8/28/2022 5:20 PM] szybet
set it and check the diode


[8/28/2022 5:20 PM] szybet
maybe spam other buttons too


[8/28/2022 5:20 PM] Deleted User
okay so the lights dont flicker


[8/28/2022 5:20 PM] Deleted User
if i type stuff on the minicomocm the rx light flickers tho


[8/28/2022 5:20 PM] andi15701
we did a loopback on the arduino


[8/28/2022 5:20 PM] andi15701
yesterday


[8/28/2022 5:20 PM] szybet
okay thats good then


[8/28/2022 5:20 PM] szybet
but strange anyway


[8/28/2022 5:20 PM] andi15701
and managed to get echo in minicom


[8/28/2022 5:21 PM] szybet
good


[8/28/2022 5:21 PM] szybet
well now turn the kobo on and spam buttons all the time


[8/28/2022 5:21 PM] szybet
be sure no cables move


[8/28/2022 5:21 PM] Deleted User
okay so while turning on the kobo i spam buttons on the minicom?


[8/28/2022 5:21 PM] szybet
connect the kobo via usb to the same pc which has arduino connected


[8/28/2022 5:21 PM] szybet
yea


[8/28/2022 5:21 PM] Deleted User
alright


[8/28/2022 5:22 PM] Deleted User
one sec


[8/28/2022 5:24 PM] Deleted User
the grnd popped off


[8/28/2022 5:24 PM] Deleted User
so i gotta reconnect it


[8/28/2022 5:28 PM] Deleted User
HEYYYY


[8/28/2022 5:28 PM] Deleted User
bro I got both lights to flicker now


[8/28/2022 5:28 PM] szybet
whats on the screen


[8/28/2022 5:28 PM] Deleted User
oh i didnt power it on yet


[8/28/2022 5:29 PM] Deleted User
one sec


[8/28/2022 5:29 PM] szybet
remember to spam


[8/28/2022 5:30 PM] Deleted User
after spamming nothing happens


[8/28/2022 5:30 PM] Deleted User
after i plugged in the cable to the computer


[8/28/2022 5:30 PM] Deleted User
only the rx light flashed


[8/28/2022 5:30 PM] Deleted User
the tx didnt do anythign


[8/28/2022 5:31 PM] szybet
try some more times


[8/28/2022 5:33 PM] Deleted User
alright


[8/28/2022 5:39 PM] Deleted User
the kobo is factory reset


[8/28/2022 5:39 PM] Deleted User
does that change anything?


[8/28/2022 5:39 PM] Deleted User
like on powering on it just gives the option to select language


[8/28/2022 5:40 PM] Deleted User
also if i dont have the kobo plugged in it does have tx and rx flicker but if i plug it in only rx flickers


[8/28/2022 5:40 PM] Deleted User
plugged in to the pc


[8/28/2022 5:40 PM] szybet
it all doesnt matter


[8/28/2022 5:41 PM] szybet
idk what is going on
1. you maybe fryied the serial part of the cpu
2. maybe the resistors there have a short


[8/28/2022 5:41 PM] szybet
do you have pure alcohol?


[8/28/2022 5:41 PM] Deleted User
yeah


[8/28/2022 5:41 PM] Deleted User
i do


[8/28/2022 5:42 PM] szybet
turn of the kobo, get a clean toothbrush, sink it in the alcohol, and clean the resistors there. be sure to not use too much alcohol and dont put too much force and pressure. its your own risk


[8/28/2022 5:43 PM] Deleted User
okay


[8/28/2022 5:51 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_0ba30a60-f834-444-9B0F5.jpg


[8/28/2022 5:51 PM] Deleted User
better ?


[8/28/2022 5:52 PM] szybet
show me the other size of those... capacitors


[8/28/2022 5:52 PM] szybet
also try to get a better picture


[8/28/2022 5:52 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_b513b7cc-6c22-4ac-9C085.jpg


[8/28/2022 5:53 PM] szybet
looks better


[8/28/2022 5:53 PM] szybet
look arround for solder, if its there, pick it up


[8/28/2022 5:54 PM] szybet
look closely


[8/28/2022 5:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-401A1.png


[8/28/2022 5:54 PM] szybet
this is your ground?


[8/28/2022 5:54 PM] Deleted User
yeah


[8/28/2022 5:54 PM] szybet
this will never work


[8/28/2022 5:54 PM] Deleted User
the solder keeps coming out


[8/28/2022 5:54 PM] Deleted User
im trying


[8/28/2022 5:54 PM] szybet
from where


[8/28/2022 5:54 PM] Deleted User
like i just replaced this


[8/28/2022 5:54 PM] Deleted User
and going to solder again


[8/28/2022 5:54 PM] Deleted User
but the solder never goes to the bottom


[8/28/2022 5:54 PM] szybet
doesnt do that


[8/28/2022 5:55 PM] szybet
the solder cant go to the bottom


[8/28/2022 5:55 PM] szybet
just make sure there is a solid connection


[8/28/2022 5:55 PM] Deleted User
alright


[8/28/2022 6:14 PM] andi15701
if we can boot some kernel+ initrd from usb which does ``` (stty raw ; yes UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU | tr -d \\n ) >/dev/ttymxc0 ``` we could measure with some voltmeter if we have 1.8v at  kobo tx


[8/28/2022 6:14 PM] szybet
no voltmeter


[8/28/2022 6:18 PM] szybet
is it really 1.8?


[8/28/2022 6:19 PM] andi15701
well U = 0x55 = 01010101 = 50% duty cycle


[8/28/2022 6:19 PM] szybet
oh ok


[8/28/2022 6:19 PM] andi15701
50% of 3.3V is 1.65V


[8/28/2022 6:19 PM] andi15701
sorry a bit wrong


[8/28/2022 6:20 PM] szybet
i though kobos serial is 1.8


[8/28/2022 6:20 PM] szybet
but at the same time they are 5V tollerant


[8/28/2022 6:20 PM] szybet
which would be weird


[8/28/2022 6:20 PM] andi15701
it is 3.3v


[8/28/2022 6:39 PM] Deleted User
can you tell me


[8/28/2022 6:39 PM] Deleted User
what i expect ot see


[8/28/2022 6:39 PM] Deleted User
to*


[8/28/2022 6:39 PM] Deleted User
on minicom


[8/28/2022 6:39 PM] szybet
command line


[8/28/2022 6:39 PM] szybet
show me your soldered gnd


[8/28/2022 6:39 PM] Deleted User
okay


[8/28/2022 6:44 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_65447b7b-6802-406-A5A15.jpg


[8/28/2022 6:44 PM] szybet
looks good...


[8/28/2022 6:45 PM] szybet
now try spamming and booting up the kobo


[8/28/2022 6:45 PM] Deleted User
alright


[8/28/2022 6:46 PM] Deleted User
nothing


[8/28/2022 6:46 PM] szybet
try more


[8/28/2022 6:46 PM] Deleted User
just keeps on booting to the select language page


[8/28/2022 6:46 PM] Deleted User
when i type when the kobo is powered off the tx and rx light fllickers but the moment it powers on


[8/28/2022 6:46 PM] Deleted User
it is just hte rx light


[8/28/2022 6:47 PM] szybet
you need to spam and turn it on at the same time


[8/28/2022 6:47 PM] szybet
and spam a lot


[8/28/2022 6:47 PM] szybet
diffrent buttons


[8/28/2022 6:47 PM] Deleted User
do i press enter


[8/28/2022 6:47 PM] Deleted User
as well


[8/28/2022 6:47 PM] szybet
yes, too


[8/28/2022 6:49 PM] szybet
when you spam, does rx or tx diode turn on?


[8/28/2022 6:53 PM] Deleted User
yes


[8/28/2022 6:53 PM] Deleted User
thats what im saying


[8/28/2022 6:54 PM] Deleted User
when i spam when its powered off both turn on


[8/28/2022 6:54 PM] Deleted User
when i spam as its powering on only the rx light turns on


[8/28/2022 6:54 PM] szybet
thats okay i think


[8/28/2022 6:54 PM] Deleted User
is this how i boot into nickel


[8/28/2022 6:55 PM] szybet
?


[8/28/2022 6:55 PM] Deleted User
nvm


[8/28/2022 6:55 PM] szybet
you dont see anything on minicom?


[8/28/2022 6:55 PM] Deleted User
nothing


[8/28/2022 6:55 PM] szybet
switch rx and tx on the arduino


[8/28/2022 6:55 PM] Deleted User
okay


[8/28/2022 6:57 PM] Deleted User
its different now


[8/28/2022 6:57 PM] szybet
show me


[8/28/2022 6:58 PM] Deleted User
as i power on


[8/28/2022 6:58 PM] Deleted User
both lights flicker


[8/28/2022 6:58 PM] Deleted User
not just the rx


[8/28/2022 6:58 PM] Deleted User
but thats it


[8/28/2022 6:59 PM] szybet
try to "push" those cables inside the plastic cover, but be carefull not to break things


[8/28/2022 6:59 PM] szybet
also send me a picture of all your arduino connections


[8/28/2022 7:00 PM] Deleted User
i

{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_e55517cf-f79e-449-B3FEF.jpg


[8/28/2022 7:00 PM] szybet
closer


[8/28/2022 7:00 PM] szybet
i dont see anything


[8/28/2022 7:00 PM] szybet
arduino


[8/28/2022 7:00 PM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/rn_image_picker_lib_temp_9fafdb81-ff9e-441-CACB6.jpg


[8/28/2022 7:01 PM] szybet
try these


[8/28/2022 7:03 PM] Deleted User
what do u mean by them


[8/28/2022 7:04 PM] Deleted User
push them on the arduino side ?


[8/28/2022 7:04 PM] szybet
those cables are ended in those plastic covers


[8/28/2022 7:04 PM] szybet
push the cable into the plastic


[8/28/2022 7:04 PM] szybet
only a bit


[8/28/2022 7:04 PM] szybet
0 force


[8/28/2022 7:05 PM] Deleted User
done


[8/28/2022 7:05 PM] szybet
do you run minicom with root?


[8/28/2022 7:05 PM] Deleted User
yes


[8/28/2022 7:06 PM] szybet
turn off and on the kobo


[8/28/2022 7:06 PM] Deleted User
spam too?


[8/28/2022 7:06 PM] szybet
no need to


[8/28/2022 7:06 PM] Deleted User
and with the tx and rx swapped?


[8/28/2022 7:06 PM] szybet
yea


[8/28/2022 7:06 PM] Deleted User
swapped back to normal


[8/28/2022 7:06 PM] Deleted User
or as it is


[8/28/2022 7:07 PM] szybet
leave it swapped


[8/28/2022 7:07 PM] szybet
and try


[8/28/2022 7:07 PM] Deleted User
okay


[8/28/2022 7:07 PM] Deleted User
nothing


[8/28/2022 7:08 PM] Deleted User
did the same when its normal


[8/28/2022 7:08 PM] Deleted User
and nothing


[8/28/2022 7:08 PM] Deleted User
i still boot into select language


[8/28/2022 7:09 PM] szybet
the screen refreshses etc?


[8/28/2022 7:09 PM] Deleted User
wdym


[8/28/2022 7:09 PM] Deleted User
yseh


[8/28/2022 7:09 PM] Deleted User
yeah


[8/28/2022 7:09 PM] szybet
good


[8/28/2022 7:10 PM] Deleted User
�$0�>|�<�[H
           % `��3.��0y};(H���?h�g��[H
                                     �����`p88���
����������~��|��[1;78H                                                       �[1;78H�[1;78H


[8/28/2022 7:10 PM] Deleted User
kobo was powered off


[8/28/2022 7:10 PM] Deleted User
and this randomly happened


[8/28/2022 7:11 PM] szybet
@andi is the baud rate correct for 100%?


[8/28/2022 7:11 PM] tux_linux
Yes, 115200


[8/28/2022 7:11 PM] tux_linux
100%


[8/28/2022 7:11 PM] szybet
@Deleted User what command you use for minicom


[8/28/2022 7:12 PM] Deleted User
the one above


[8/28/2022 7:12 PM] Deleted User
doas minicom -D /dev/ttyACM0 -b 115200


[8/28/2022 7:13 PM] szybet
try some more times with on / off


[8/28/2022 7:13 PM] szybet
and try to move the cables a bit


[8/28/2022 7:15 PM] Deleted User
i dont think this is working


[8/28/2022 7:16 PM] szybet
i have no idea


[8/28/2022 7:16 PM] Deleted User
that post market os thing that andi sent


[8/28/2022 7:16 PM] Deleted User
it talked about a key combination


[8/28/2022 7:16 PM] szybet
you can try some more, maybe solder another cables, look for tin on the kobo


[8/28/2022 7:16 PM] szybet
i have no idea


[8/28/2022 7:16 PM] Deleted User
could you tell me what this serial stuff does


[8/28/2022 7:16 PM] tux_linux
no
will only make things worse


[8/28/2022 7:16 PM] Deleted User
like what are we doing


[8/28/2022 7:16 PM] szybet
60% you broke the serial connection on the kobo


[8/28/2022 7:16 PM] Deleted User
we get to the terminal and then what


[8/28/2022 7:16 PM] szybet
20% bad connection


[8/28/2022 7:16 PM] Deleted User
back stuff up?


[8/28/2022 7:17 PM] tux_linux
flash inkbox


[8/28/2022 7:17 PM] tux_linux
debug it


[8/28/2022 7:17 PM] tux_linux
etc


[8/28/2022 7:17 PM] szybet
thats my bet


[8/28/2022 7:17 PM] Deleted User
oh


[8/28/2022 7:17 PM] Deleted User
if the serial is through do we see something on linux


[8/28/2022 7:17 PM] Deleted User
like a new /dev/thing


[8/28/2022 7:17 PM] tux_linux
no, only ACM0


[8/28/2022 7:19 PM] Deleted User
damn


[8/28/2022 7:19 PM] tux_linux
https://discord.com/channels/809205711778480158/936757234153689188/939733416172208140
it would like something like this


[8/28/2022 7:21 PM] szybet
what cpu does thhis device have


[8/28/2022 7:21 PM] Deleted User
no idea


[8/28/2022 7:21 PM] tux_linux
imx6sll


[8/28/2022 7:28 PM] szybet
i havent found anything in the datasheet ( maybe because i cant find the cool big one ) but i asked a experienced person, its possible that the cpu uart system can go down ( fry, or just a protection fuse ) and the rest of the cpu will work as normal, so in my opinion its what happened here


[8/28/2022 7:30 PM] Deleted User
well its been good


[8/28/2022 7:30 PM] Deleted User
i guess i just have to give up now


[8/28/2022 7:31 PM] szybet
it only depends on you, you can try more if you want


[8/28/2022 7:32 PM] Deleted User
yeah but as you said its likely its just destroyed


[8/28/2022 7:34 PM] szybet
👀


[8/28/2022 8:52 PM] andi15701
well, you still have usb


[8/28/2022 8:52 PM] andi15701
so you can 1. backup the current system


[8/28/2022 8:52 PM] andi15701
2. you can flash something which gives you a shell


[8/28/2022 8:53 PM] andi15701
as long as you do not replace uboot with something which does not provide recovery


[8/28/2022 8:54 PM] szybet
doesnt removing uboot launches usbms as an error?


[8/28/2022 8:54 PM] tux_linux
no


[8/28/2022 8:54 PM] tux_linux
download mode


[8/28/2022 8:54 PM] tux_linux
that's not usbms


[8/28/2022 8:54 PM] szybet
its the same thing


[8/28/2022 8:54 PM] tux_linux
not at all


[8/28/2022 8:54 PM] andi15701
so


[8/28/2022 8:54 PM] andi15701
no


[8/28/2022 8:55 PM] szybet
whats the diffrence


[8/28/2022 8:55 PM] andi15701
cat /dev/zero gives some hid device


[8/28/2022 8:55 PM] andi15701
cat /dev/zero >/dev/mmcblk0


[8/28/2022 8:55 PM] tux_linux
and you can run uuu on it


[8/28/2022 8:55 PM] tux_linux
load u-boot


[8/28/2022 8:55 PM] andi15701
to load u-boot into ram


[8/28/2022 8:56 PM] andi15701
and go further from there (which might include usbms)


[8/28/2022 8:56 PM] andi15701
no uboot is not a problem, a bad uboot (or something which looks like a bootloader to the cpu) is a problem


[8/28/2022 8:57 PM] tux_linux
yes


[8/28/2022 10:43 PM] Deleted User
wait what


[8/28/2022 10:43 PM] Deleted User
how do i do that


[8/29/2022 4:48 PM] Deleted User
@andi could you please explain the process I need to go through?


[8/29/2022 5:12 PM] Deleted User
I don't know how to backup the current system or what to flash


[8/29/2022 5:21 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/libra.img
`fastboot boot libra.img`


[8/29/2022 5:22 PM] szybet
will this work?.........


[8/29/2022 5:22 PM] tux_linux
yes


[8/29/2022 5:22 PM] szybet
fastboot boot didnt worked on the nia


[8/29/2022 5:22 PM] tux_linux
probably


[8/29/2022 5:22 PM] tux_linux
you need to make an android image


[8/29/2022 5:22 PM] tux_linux
because stock u-boot is a mess


[8/29/2022 5:23 PM] Deleted User
alright


[8/29/2022 5:23 PM] Deleted User
fastboot is part of what package


[8/29/2022 5:24 PM] tux_linux
google: exists


[8/29/2022 5:24 PM] Deleted User
adb?


[8/29/2022 5:24 PM] Deleted User
right


[8/29/2022 5:24 PM] tux_linux
fastboot-tools or something


[8/29/2022 5:24 PM] Deleted User
ohhh alright thanks


[8/29/2022 5:24 PM] tux_linux
android-tools-fastboot


[8/29/2022 5:28 PM] Deleted User
yeah it just says waiting for any device


[8/29/2022 5:28 PM] tux_linux
well, yes, press the key combination


[8/29/2022 5:29 PM] Deleted User
ah yes


[8/29/2022 5:29 PM] Deleted User
it did it


[8/29/2022 5:29 PM] tux_linux
it booted it?


[8/29/2022 5:29 PM] Deleted User
something is happening


[8/29/2022 5:30 PM] Deleted User
screen going from black to white


[8/29/2022 5:30 PM] Deleted User
and white light is flashing


[8/29/2022 5:30 PM] Deleted User
so its loading


[8/29/2022 5:30 PM] tux_linux
ok, it booted the kernel


[8/29/2022 5:30 PM] tux_linux
now look in your computer


[8/29/2022 5:30 PM] tux_linux
`dmesg`


[8/29/2022 5:30 PM] tux_linux
send `dmesg | tail` here


[8/29/2022 5:31 PM] Deleted User
```
[ 7838.711549] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[ 7838.711563] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[ 7843.020519] usb 1-10: new high-speed USB device number 10 using xhci_hcd
[ 7843.146921] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 7843.147268] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 7843.147273] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 7843.147275] usb 1-10: Product: USB download gadget
[ 7843.147276] usb 1-10: Manufacturer: FSL
[ 7843.147277] usb 1-10: SerialNumber: 1872020071501963980
[ 7848.584590] usb 1-10: USB disconnect, device number 10```


[8/29/2022 5:33 PM] tux_linux
what is `fdisk -l`?


[8/29/2022 5:33 PM] Deleted User
it doesnt show up there


[8/29/2022 5:33 PM] tux_linux
is the led still blinking? what is on the screen


[8/29/2022 5:33 PM] Deleted User
yeah the led still blinking


[8/29/2022 5:33 PM] Deleted User
just black screen


[8/29/2022 5:33 PM] tux_linux
black or white screen?


[8/29/2022 5:34 PM] Deleted User
black


[8/29/2022 5:34 PM] tux_linux
oh


[8/29/2022 5:34 PM] tux_linux
strange


[8/29/2022 5:34 PM] Deleted User
should I power off / on


[8/29/2022 5:34 PM] Deleted User
btw the key combination I did was the power button and the page down


[8/29/2022 5:34 PM] tux_linux
trigger key combination again


[8/29/2022 5:34 PM] tux_linux
and wait


[8/29/2022 5:35 PM] Deleted User
okay i did the key combination


[8/29/2022 5:35 PM] Deleted User
and the light went away


[8/29/2022 5:35 PM] Deleted User
i will do it again


[8/29/2022 5:35 PM] tux_linux
no wait


[8/29/2022 5:35 PM] Deleted User
oh now it just reset


[8/29/2022 5:36 PM] tux_linux
well I think I gave you a wrong kernel
will not make your device catch in fire or brick or anything though


[8/29/2022 5:36 PM] tux_linux
let it restore then


[8/29/2022 5:36 PM] tux_linux
don't do **anything** while it does that


[8/29/2022 5:36 PM] tux_linux
If you were to shut it down while it restores U-Boot...


[8/29/2022 5:37 PM] tux_linux
then you would be screwed


[8/29/2022 5:37 PM] Deleted User
big oof


[8/29/2022 5:37 PM] Deleted User
its already reset


[8/29/2022 5:37 PM] Deleted User
its fine


[8/29/2022 5:37 PM] tux_linux
ok


[8/29/2022 5:37 PM] tux_linux
hang on I will send you the correct kernel


[8/29/2022 5:37 PM] Deleted User
alright


[8/29/2022 5:46 PM] tux_linux
done, I uploaded it to the same url


[8/29/2022 5:46 PM] tux_linux
try with that updated version


[8/29/2022 5:50 PM] Deleted User
oh


[8/29/2022 5:50 PM] Deleted User
alright cool

{Reactions}
👍 

[8/29/2022 5:51 PM] Deleted User
done


[8/29/2022 5:52 PM] Deleted User
flashing white white screen


[8/29/2022 5:52 PM] tux_linux
`dmesg`


[8/29/2022 5:52 PM] Deleted User
```[ 8223.991136] usb 1-10: SerialNumber: 1872020071501963980
[ 8224.409992] usb 1-10: USB disconnect, device number 11
[ 9181.417412] usb 1-10: new high-speed USB device number 12 using xhci_hcd
[ 9181.543917] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 9181.544291] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 9181.544294] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 9181.544295] usb 1-10: Product: USB download gadget
[ 9181.544296] usb 1-10: Manufacturer: FSL
[ 9181.544297] usb 1-10: SerialNumber: 1872020071501963980
[ 9187.002798] usb 1-10: USB disconnect, device number 12
```


[8/29/2022 5:52 PM] tux_linux
i suppose you have nothing in fdisk -l


[8/29/2022 5:52 PM] Deleted User
yeah nothing


[8/29/2022 5:53 PM] tux_linux
screen is still white?


[8/29/2022 5:53 PM] Deleted User
yeppo


[8/29/2022 5:53 PM] Deleted User
and flashing white led


[8/29/2022 5:53 PM] tux_linux
if you unplug/replug your kobo to the computer, is there something in dmesg or fdisk?


[8/29/2022 5:54 PM] Deleted User
```[ 8223.991136] usb 1-10: SerialNumber: 1872020071501963980
[ 8224.409992] usb 1-10: USB disconnect, device number 11
[ 9181.417412] usb 1-10: new high-speed USB device number 12 using xhci_hcd
[ 9181.543917] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 9181.544291] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 9181.544294] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 9181.544295] usb 1-10: Product: USB download gadget
[ 9181.544296] usb 1-10: Manufacturer: FSL
[ 9181.544297] usb 1-10: SerialNumber: 1872020071501963980
[ 9187.002798] usb 1-10: USB disconnect, device number 12
```


[8/29/2022 5:55 PM] Deleted User
I dont think my computer is actually seeing it


[8/29/2022 5:55 PM] tux_linux
install uuu tool


[8/29/2022 5:55 PM] tux_linux
yes it is seeing it


[8/29/2022 5:55 PM] tux_linux
but not in the right way


[8/29/2022 5:55 PM] Deleted User
no I mean like this is the same stuff from before


[8/29/2022 5:55 PM] Deleted User
there are no new entries


[8/29/2022 5:55 PM] Deleted User
when i replugged


[8/29/2022 5:55 PM] tux_linux
oh


[8/29/2022 5:57 PM] Deleted User
compiling mfgtools from github


[8/29/2022 5:57 PM] Deleted User
hopefully i got all the deps


[8/29/2022 5:57 PM] Deleted User
yes i do


[8/29/2022 5:57 PM] Deleted User
nice


[8/29/2022 5:57 PM] Deleted User
I have uuu


[8/29/2022 5:57 PM] Deleted User
what do I do now


[8/29/2022 6:01 PM] tux_linux
actually uuu might be of no use


[8/29/2022 6:01 PM] tux_linux
wait, i'm compiling a new kernel


[8/29/2022 6:02 PM] Deleted User
ah alright


[8/29/2022 6:02 PM] Deleted User
i think i have to do a fastboot reboot after the fastboot command?


[8/29/2022 6:02 PM] tux_linux
no


[8/29/2022 6:03 PM] Deleted User
http://0x0.st/opqJ.png

{Embed}
http://0x0.st/opqJ.png
/mnt/data/projects/git/conversations/media/opqJ-309AB.png


[8/29/2022 6:03 PM] Deleted User
ah alright


[8/29/2022 6:19 PM] Deleted User
i will be back in an hour so take your time


[8/29/2022 6:22 PM] tux_linux
ok


[8/29/2022 6:27 PM] tux_linux
kindle serial is


[8/29/2022 6:28 PM] szybet
oh, that explains my memory

{Reactions}
👍 

[8/29/2022 6:30 PM] tux_linux
i finally found mine, is there a way to trigger fastboot mode, then USBMS via U-Boot without flashing an env? Or should I just make a kernel that automatically goes into that mode to flash InkBox?


[8/29/2022 6:44 PM] andi15701
no idea


[8/29/2022 6:44 PM] andi15701
but that env is easily restoreable


[8/29/2022 6:45 PM] andi15701
but just use not pure ums 0 mmc 0


[8/29/2022 6:45 PM] andi15701
the watchdog needs to be switched off


[8/29/2022 6:45 PM] andi15701
so use the  env from my link

{Reactions}
👍 

[8/29/2022 6:46 PM] andi15701
what about a kernel which offers *both* usbms and usbether


[8/29/2022 6:47 PM] andi15701
login via usb and insert a "medium" into usbms


[8/29/2022 6:47 PM] andi15701
and do stuff from computer


[8/29/2022 6:47 PM] andi15701
eject it


[8/29/2022 6:47 PM] andi15701
mount it


[8/29/2022 6:47 PM] andi15701
and do some basic checks


[8/29/2022 6:48 PM] andi15701
but I really thing there is no problem with this env flashing as long as it done right


[8/29/2022 6:49 PM] tux_linux
inkbox kernel does that, but it needs flags to know what to do instead of booting the main system


[8/29/2022 6:51 PM] andi15701
you can even have both at the same time as long as the same block device is not mounted twice


[8/29/2022 6:51 PM] andi15701
I have never seen any code for it in initrd


[8/29/2022 6:51 PM] andi15701
of inkbox


[8/29/2022 6:51 PM] andi15701
so where is it?


[8/29/2022 6:52 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/d95c329c0ece45fabe3ad90a16d22498623c06b8/initrd/common/rcS-root#L224-L234

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/d95c329c0ece45fabe3ad90a16d22498623c06b8/initrd/common/rcS-root
kernel/rcS-root at d95c329c0ece45fabe3ad90a16d22498623c06b8 · Kobo-...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[8/29/2022 6:52 PM] tux_linux
refer to functions, it's in the same file


[8/29/2022 6:52 PM] tux_linux
it will soon be replaced by C code


[8/29/2022 6:52 PM] tux_linux
but will do the same thing


[8/29/2022 6:54 PM] andi15701
did  not find it


[8/29/2022 6:54 PM] tux_linux
what are you looking for


[8/29/2022 6:58 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/config-gadget-1E285.sh


[8/29/2022 6:58 PM] andi15701
something like this


[8/29/2022 6:59 PM] tux_linux
oh, both at the same time


[8/29/2022 6:59 PM] tux_linux
no, we don't do that


[8/29/2022 6:59 PM] tux_linux
though you can transfer files in usbms, we start a ftp server


[8/29/2022 6:59 PM] tux_linux
and there is telnet, wget, etc.


[8/29/2022 7:08 PM] andi15701
in that case, you need a fastboot reboot but not when flashing but booting something via fastboot boot, you do not need that


[8/29/2022 7:09 PM] andi15701
that script is my favourite way to install  debian on new laptops/pcs


[8/29/2022 7:09 PM] andi15701
and people think, hey, what he is doing there...


[8/29/2022 7:10 PM] andi15701
I also did that with the GTA04 smartphone


[8/29/2022 7:12 PM] tux_linux
nice


[8/29/2022 8:45 PM] Deleted User
back


[8/29/2022 8:46 PM] Deleted User
How are things @tux-linux


[8/29/2022 9:02 PM] Deleted User
sorry for being late


[8/29/2022 9:04 PM] Deleted User
wait what


[8/29/2022 9:04 PM] Deleted User
so you have an img file of debian and you run this script from a booted usb or something


[8/29/2022 9:10 PM] andi15701
yes


[8/29/2022 9:11 PM] Deleted User
ah alright


[8/29/2022 9:11 PM] andi15701
and if the network of the new device does not work properly, i can use the usb ethernet to route packet download traffic through the kobo or the gta04


[8/29/2022 9:12 PM] Deleted User
gta4 😮


[8/29/2022 9:14 PM] andi15701
www.gta04.org


[8/29/2022 9:14 PM] szybet
thats a cool little rpi ;D


[8/29/2022 9:20 PM] tux_linux
yep


[8/29/2022 9:20 PM] tux_linux
@Deleted User grab the same file from the server, I updated it
then boot it with fastboot like before


[8/29/2022 9:21 PM] Deleted User
oh


[8/29/2022 9:21 PM] Deleted User
I just did that nothing happened


[8/29/2022 9:21 PM] Deleted User
i will try again


[8/29/2022 9:21 PM] tux_linux
I just updated it


[8/29/2022 9:21 PM] tux_linux
like, 2mins ago


[8/29/2022 9:22 PM] Deleted User
oh yeah the i dont hav ethat one


[8/29/2022 9:23 PM] Deleted User
```[21867.135898] usb 1-10: New USB device found, idVendor=0525, idProduct=a4a2, bcdDevice= 4.01
[21867.135900] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[21867.135904] usb 1-10: Product: RNDIS/Ethernet Gadget
[21867.135905] usb 1-10: Manufacturer: Linux 4.1.15-inkbox with 2184000.usb
[21867.142155] cdc_subset: probe of 1-10:1.0 failed with error -22
[21867.143370] cdc_subset 1-10:1.1 usb0: register 'cdc_subset' at usb-0000:00:14.0-10, Linux Device, b2:37:16:ad:d9:36
[21867.143385] usbcore: registered new interface driver cdc_subset
[21867.143390] cdc_ether: probe of 1-10:1.0 failed with error -16
[21867.143401] usbcore: registered new interface driver cdc_ether
[21867.143916] cdc_subset 1-10:1.1 enp0s20f0u10i1: renamed from usb0
```


[8/29/2022 9:23 PM] Deleted User
There is a difference now


[8/29/2022 9:23 PM] Deleted User
nothing in fdisk


[8/29/2022 9:24 PM] tux_linux
yay


[8/29/2022 9:24 PM] tux_linux
`sudo ifconfig enp0s20f0u10i1 192.168.2.1`


[8/29/2022 9:24 PM] tux_linux
`telnet 192.168.2.2`


[8/29/2022 9:24 PM] tux_linux
do you get a shell? login with `root`


[8/29/2022 9:25 PM] Deleted User
okay


[8/29/2022 9:25 PM] Deleted User
telnet


[8/29/2022 9:27 PM] Deleted User
i typed telnet 192.168.2.2 as not root


[8/29/2022 9:27 PM] Deleted User
and it is saying trying 192.168.2.2


[8/29/2022 9:27 PM] Deleted User
is telnet like ssh


[8/29/2022 9:28 PM] Deleted User
```
~/downloads telnet 192.168.2.2
Trying 192.168.2.2...

```


[8/29/2022 9:29 PM] Deleted User
whats the root password


[8/29/2022 9:29 PM] Deleted User
anyway


[8/29/2022 9:30 PM] tux_linux
root


[8/29/2022 9:30 PM] tux_linux
or nothing


[8/29/2022 9:31 PM] tux_linux
what's `ip a`?


[8/29/2022 9:31 PM] Deleted User
yeah i cant telnet into it


[8/29/2022 9:31 PM] Deleted User
but when i do ssh root@192.168.2.1


[8/29/2022 9:31 PM] Deleted User
i do get a query saying whats the passwrod


[8/29/2022 9:31 PM] tux_linux
what distro are you using


[8/29/2022 9:31 PM] Deleted User
void


[8/29/2022 9:31 PM] tux_linux
.2.1 is your pc


[8/29/2022 9:31 PM] tux_linux
.2.2 is the kobo


[8/29/2022 9:31 PM] Deleted User
```
4: enp0s20f0u10i1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether b2:37:16:ad:d9:36 brd ff:ff:ff:ff:ff:ff
    inet 192.168.2.1/24 brd 192.168.2.255 scope global noprefixroute enp0s20f0u10i1
       valid_lft forever preferred_lft forever
    inet 169.254.194.147/16 brd 169.254.255.255 scope global noprefixroute enp0s20f0u10i1
       valid_lft forever preferred_lft forever
    inet6 fe80::11b5:c4ae:b7ef:b2dc/64 scope link
       valid_lft forever preferred_lft forever```


[8/29/2022 9:31 PM] Deleted User
oh lol


[8/29/2022 9:32 PM] Deleted User
yeah i cant ssh into it


[8/29/2022 9:32 PM] Deleted User
or telnet into it


[8/29/2022 9:32 PM] Deleted User
it just goes a blinking cursor


[8/29/2022 9:32 PM] tux_linux
`ftp 192.168.2.2`?


[8/29/2022 9:32 PM] andi15701
can you ping it


[8/29/2022 9:32 PM] tux_linux
yes, try that


[8/29/2022 9:32 PM] Deleted User
i cant ping it


[8/29/2022 9:32 PM] Deleted User
blinking cursor


[8/29/2022 9:32 PM] tux_linux
is your usb cable connected properly


[8/29/2022 9:33 PM] Deleted User
yeah


[8/29/2022 9:33 PM] tux_linux
and you aren't using networkmanager


[8/29/2022 9:33 PM] Deleted User
nope


[8/29/2022 9:33 PM] szybet
network manager or other thing is shutting down / powering off, then trying to get dhcp ( thats from where 169.254.194.147/16 is from )


[8/29/2022 9:33 PM] Deleted User
i only have dhcpcd and wpa_supplicant


[8/29/2022 9:33 PM] szybet
the interface*


[8/29/2022 9:33 PM] tux_linux
did something show up on the screen or is it still white?


[8/29/2022 9:33 PM] szybet
then dhcpcd is turned on for all interfaces


[8/29/2022 9:33 PM] Deleted User
its still all white


[8/29/2022 9:34 PM] tux_linux
then try @andi 's trick with U-Boot env


[8/29/2022 9:34 PM] Deleted User
do you think there is a problem with dhcpcd


[8/29/2022 9:34 PM] tux_linux
like in the postmarketos wiki


[8/29/2022 9:34 PM] Deleted User
Uh


[8/29/2022 9:34 PM] tux_linux
you don't ever need dhcp in this process


[8/29/2022 9:34 PM] Deleted User
so i type in fastboot flash bootenv libra.img?


[8/29/2022 9:35 PM] szybet
but it is there anyway, he needs to shut it off


[8/29/2022 9:35 PM] andi15701
not libra.img


[8/29/2022 9:35 PM] tux_linux
**NO**


[8/29/2022 9:35 PM] andi15701
this


[8/29/2022 9:35 PM] tux_linux
yes that


[8/29/2022 9:36 PM] Deleted User
alright


[8/29/2022 9:36 PM] andi15701
there is a download link


[8/29/2022 9:36 PM] andi15701
to get that binary


[8/29/2022 9:36 PM] Deleted User
i got it


[8/29/2022 9:37 PM] Deleted User
I SEE IT IN /dev/sdb!!!!


[8/29/2022 9:37 PM] andi15701
so do a backup of itt


[8/29/2022 9:37 PM] andi15701
of full /dev/sdb


[8/29/2022 9:37 PM] tux_linux
yes


[8/29/2022 9:38 PM] tux_linux
yes


[8/29/2022 9:38 PM] Deleted User
there is 3 partitions


[8/29/2022 9:38 PM] tux_linux
yes


[8/29/2022 9:38 PM] Deleted User
do i mount all 3


[8/29/2022 9:38 PM] andi15701
first backup


[8/29/2022 9:38 PM] tux_linux
`sudo dd if=/dev/sdb status=progress | xz > backup-libra.xz`


[8/29/2022 9:38 PM] szybet
ugh


[8/29/2022 9:38 PM] tux_linux
mount none


[8/29/2022 9:39 PM] Deleted User
so the dd is writing the file contents to stdout and then xz is compressing that into a file


[8/29/2022 9:40 PM] tux_linux
yes


[8/29/2022 9:40 PM] Deleted User
gotcha


[8/29/2022 9:40 PM] Deleted User
so far 246 MiB out of a grand total of 7.3G


[8/29/2022 9:40 PM] Deleted User
its gonna take a while


[8/29/2022 9:40 PM] Deleted User
3.6MB/s


[8/29/2022 9:40 PM] tux_linux
better that than brick your device forever


[8/29/2022 9:40 PM] Deleted User
TRUE


[8/29/2022 9:41 PM] Deleted User
so if I did brick the device how would i restore from this backup


[8/29/2022 9:41 PM] Deleted User
like whats the command


[8/29/2022 9:41 PM] Deleted User
dd ?


[8/29/2022 9:42 PM] Deleted User
xzcat file.xz | dd of=/dev/sdb status=progres?


[8/29/2022 9:42 PM] tux_linux
it would be
`xzcat backup-libra.xz | sudo dd of=/dev/sdb bs=512 status=progress`
then
`sync`


[8/29/2022 9:42 PM] Deleted User
ooh i got to specify bs ?


[8/29/2022 9:42 PM] tux_linux
no, it's just a habit for me


[8/29/2022 9:42 PM] Deleted User
ahh


[8/29/2022 9:42 PM] tux_linux
it's at 512 by default anyway


[8/29/2022 9:42 PM] Deleted User
nice nice


[8/29/2022 9:43 PM] Deleted User
wait so what does the sync do


[8/29/2022 9:43 PM] andi15701
you also need to recover the bootenv


[8/29/2022 9:44 PM] tux_linux
`man sync`


[8/29/2022 9:44 PM] Deleted User
yeah im reading the man page

{Reactions}
👍 

[8/29/2022 9:44 PM] andi15701
also described in the pmOS wiki


[8/29/2022 9:44 PM] Deleted User
but what does it mean by synchronize cached writes to persistent storage


[8/29/2022 9:45 PM] Deleted User
the ums mmc stuff?


[8/29/2022 9:45 PM] Deleted User
i need to find the package for that then i will do it


[8/29/2022 9:45 PM] andi15701
yes


[8/29/2022 9:45 PM] tux_linux
the kernel lies to you by default by saying it's finished to writes things to disk but actually it hasn't, it's just to help you do things faster


[8/29/2022 9:45 PM] andi15701
now at every boot, it will go into msd mode


[8/29/2022 9:45 PM] tux_linux
but if you unplug the device it can't write the remainder of it


[8/29/2022 9:45 PM] tux_linux
that's why you need to sync before unplug


[8/29/2022 9:45 PM] Deleted User
ohh


[8/29/2022 9:45 PM] tux_linux
I think `eject` does that too


[8/29/2022 9:46 PM] szybet
file managers do sync anyway right?


[8/29/2022 9:46 PM] Deleted User
so sync is like make sure the writing is done


[8/29/2022 9:46 PM] andi15701
yes


[8/29/2022 9:46 PM] tux_linux
m a y b e


[8/29/2022 9:46 PM] tux_linux
linux cli commands don't


[8/29/2022 9:46 PM] Deleted User
i thought umount does that rip


[8/29/2022 9:46 PM] andi15701
afaik unmount does


[8/29/2022 9:47 PM] andi15701
but adding sync does not harm


[8/29/2022 9:47 PM] tux_linux
I always do sync before umount


[8/29/2022 9:47 PM] szybet
sync is the weirdest thing in linux

every linux user does that, no one thrusts file managers


[8/29/2022 9:48 PM] andi15701
I usually trust umount/eject to sync


[8/29/2022 9:48 PM] andi15701
and at all, I sync after the last write operation


[8/29/2022 9:48 PM] andi15701
and umount still may clean some dirty flag


[8/29/2022 9:48 PM] andi15701
depending on file system


[8/29/2022 9:49 PM] Deleted User
andi is the ums mmc from the mgftools?


[8/29/2022 9:49 PM] andi15701
no


[8/29/2022 9:51 PM] andi15701
it is just ```bootcmd=ricoh_watchdog disable; ums 0 mmc 0``` put into a file and converted that file using mkimage from u-boot-tools


[8/29/2022 9:54 PM] Deleted User
whats the watchdog


[8/29/2022 9:56 PM] Deleted User
nearly halfway done guys

{Reactions}
👍 

[8/29/2022 9:58 PM] szybet
https://searchengineland.com/guide/how-to-use-google-to-search

{Embed}
seladmin
https://searchengineland.com/guide/how-to-use-google-to-search
How To Use Google To Search
Google is the most popular search engine in the world. But while so many people use it, few actually get formal instructions on how to search with Google.
/mnt/data/projects/git/conversations/media/google-searches-9EC2D.jpg


[8/29/2022 10:02 PM] Deleted User
Look I know, I try to search things before hand


[8/29/2022 10:02 PM] Deleted User
But I couldnt find it


[8/29/2022 10:03 PM] Deleted User
http://0x0.st/opcV.png

{Embed}
http://0x0.st/opcV.png
/mnt/data/projects/git/conversations/media/opcV-8E76D.png


[8/29/2022 10:03 PM] tux_linux
tip: don't use `what is` or anything like that
go straight to the point


[8/29/2022 10:03 PM] the.mightydill
"watchdog linux"


[8/29/2022 10:03 PM] tux_linux
`watchdog linux`


[8/29/2022 10:03 PM] tux_linux
simply


[8/29/2022 10:03 PM] the.mightydill
good point

{Reactions}
👍 

[8/29/2022 10:04 PM] Deleted User
ohhh


[8/29/2022 10:04 PM] Deleted User
I get it now


[8/29/2022 10:04 PM] tux_linux
well, more like `watchdog u-boot`


[8/29/2022 10:04 PM] tux_linux
but it's more-or-less the same thing


[8/29/2022 10:04 PM] Deleted User
and we disable that to make sure it doesn't auto reset and brick something?


[8/29/2022 10:05 PM] tux_linux
yes


[8/29/2022 10:05 PM] Deleted User
smart


[8/29/2022 10:05 PM] tux_linux
not so smart (@NonaSuomy)


[8/29/2022 10:05 PM] Deleted User
what


[8/29/2022 10:05 PM] tux_linux
look at Sony PRS-T1 porting thread


[8/29/2022 10:05 PM] Deleted User
okay


[8/29/2022 10:06 PM] Deleted User
@andi Is there a reason you didnt put the disable watchdog on the postmarket page


[8/29/2022 10:07 PM] tux_linux
lack of time? 😉


[8/29/2022 10:07 PM] Deleted User
ahh


[8/29/2022 10:07 PM] Deleted User
hahaha


[8/29/2022 10:08 PM] Deleted User
comedian


[8/29/2022 10:08 PM] tux_linux
no pun was intended


[8/29/2022 10:08 PM] tux_linux
but i guess it is appropriate here


[8/29/2022 10:09 PM] Deleted User
6.8 GB out of 7.3G


[8/29/2022 10:12 PM] Deleted User
sorry wrong information


[8/29/2022 10:12 PM] Deleted User
6.9 GiB of 7.3 GiB


[8/29/2022 10:13 PM] Deleted User
actualy he did write it it just wasnt in the same code block


[8/29/2022 10:14 PM] Deleted User
its done now I will do the ums stuff


[8/29/2022 10:16 PM] Deleted User
actually i installed u-boot-tools but the command ums is not found


[8/29/2022 10:16 PM] Deleted User
uhh


[8/29/2022 10:17 PM] Deleted User
actually what I am doing might be super incorrect


[8/29/2022 10:20 PM] tux_linux
you are already in ums


[8/29/2022 10:20 PM] Deleted User
what


[8/29/2022 10:20 PM] tux_linux
Usb Mass Storage


[8/29/2022 10:20 PM] tux_linux
U M S


[8/29/2022 10:20 PM] Deleted User
oh


[8/29/2022 10:21 PM] Deleted User
so do i just type ```bootcmd=ricoh_watchdog disable; ums 0 mmc 0 ```as not root


[8/29/2022 10:21 PM] tux_linux
that's for the serial console


[8/29/2022 10:21 PM] tux_linux
but since you don't have a serial console


[8/29/2022 10:21 PM] tux_linux
no


[8/29/2022 10:21 PM] Deleted User
oh so i dont need to worry


[8/29/2022 10:21 PM] tux_linux
`/dev/sdb` is still there?


[8/29/2022 10:21 PM] Deleted User
yeah its still there


[8/29/2022 10:21 PM] Deleted User
i guess if i made a back up of the full /dev/sdb


[8/29/2022 10:22 PM] Deleted User
then that means that i can just restore from this


[8/29/2022 10:22 PM] Deleted User
and dont need anythign else right


[8/29/2022 10:22 PM] tux_linux (pinned)
format it like this with fdisk
```
Device       Boot StartCHS    EndCHS        StartLBA     EndLBA    Sectors  Size Id Type
/dev/mmcblk0p1    768,0,1     1023,3,16        49152      79871      30720 15.0M 83 Linux
/dev/mmcblk0p2    1023,3,16   1023,3,16     10590210   15269887    4679678 2284M  5 Extended
/dev/mmcblk0p3    1023,3,16   1023,3,16       104448    4298752    4194305 2048M  b Win95 FAT32
/dev/mmcblk0p4    1023,3,16   1023,3,16      4298753   10590209    6291457 3072M 83 Linux
/dev/mmcblk0p5    1023,3,16   1023,3,16     10590226   11614225    1024000  500M 83 Linux
/dev/mmcblk0p6    1023,3,16   1023,3,16     11614242   12138529     524288  256M 83 Linux
/dev/mmcblk0p7    1023,3,16   1023,3,16     12138546   12662833     524288  256M 83 Linux
```


[8/29/2022 10:22 PM] tux_linux
**respect the sector numbering**


[8/29/2022 10:22 PM] tux_linux
**it's very important**


[8/29/2022 10:22 PM] Deleted User
YIKES


[8/29/2022 10:23 PM] tux_linux
you said you wanted to install inkbox on your libra


[8/29/2022 10:23 PM] Deleted User
Yes


[8/29/2022 10:23 PM] tux_linux
well, I said it would be difficult


[8/29/2022 10:23 PM] tux_linux
didn't I


[8/29/2022 10:23 PM] Deleted User
I am just wondering when I used fdisk before


[8/29/2022 10:24 PM] Deleted User
I only used the g, n, t options


[8/29/2022 10:24 PM] Deleted User
and specified the sizes


[8/29/2022 10:24 PM] tux_linux
don't write `w` until I review it


[8/29/2022 10:24 PM] Deleted User
not anything of the other stuff that is on here


[8/29/2022 10:24 PM] Deleted User
alright


[8/29/2022 10:24 PM] tux_linux
you can use `p` to print the layout without writing it


[8/29/2022 10:24 PM] Deleted User
i usually use parted myself


[8/29/2022 10:24 PM] tux_linux
if you can make it look like that with parted it's ok


[8/29/2022 10:24 PM] Deleted User
do i make it into gpt?


[8/29/2022 10:24 PM] tux_linux
but the partition types, sector numbers, etc. need to exactly match


[8/29/2022 10:24 PM] tux_linux
no


[8/29/2022 10:24 PM] tux_linux
mbr


[8/29/2022 10:24 PM] Deleted User
okay


[8/29/2022 10:25 PM] tux_linux
**don't format the whole disk**


[8/29/2022 10:25 PM] tux_linux
only delete partitions


[8/29/2022 10:25 PM] Deleted User
ohh


[8/29/2022 10:25 PM] Deleted User
just delete and add partitions?


[8/29/2022 10:25 PM] tux_linux
delete the three partitions


[8/29/2022 10:25 PM] Deleted User
gotcha


[8/29/2022 10:25 PM] tux_linux
then add a new one at sector 49152 to sector 79871


[8/29/2022 10:26 PM] tux_linux
Pinned a message.


[8/29/2022 10:26 PM] Deleted User
primary right


[8/29/2022 10:26 PM] Deleted User
not extended


[8/29/2022 10:26 PM] tux_linux
the first is primary


[8/29/2022 10:26 PM] tux_linux
second is extended


[8/29/2022 10:27 PM] tux_linux
mmcblk0p3 is primary
mmcblk0p4 is primary
p5-p6-p7 are in the extended container of mmcblk0p2


[8/29/2022 10:27 PM] Deleted User
I remove all the signatures right


[8/29/2022 10:27 PM] andi15701
next time create a scripft for sfdisk


[8/29/2022 10:27 PM] tux_linux
yes


[8/29/2022 10:27 PM] tux_linux
yes, would be useful


[8/29/2022 10:30 PM] Deleted User
how do i make it windows 95 fat32


[8/29/2022 10:30 PM] tux_linux
are you in fdisk?


[8/29/2022 10:30 PM] Deleted User
yeah


[8/29/2022 10:30 PM] tux_linux
`t`


[8/29/2022 10:30 PM] tux_linux
then `l`


[8/29/2022 10:30 PM] tux_linux
and choose the correct one, can't remember


[8/29/2022 10:31 PM] Deleted User
alright


[8/29/2022 10:31 PM] Deleted User
oh i was wondering


[8/29/2022 10:31 PM] Deleted User
if you knew what that was


[8/29/2022 10:31 PM] Deleted User
lol


[8/29/2022 10:31 PM] the.mightydill
it should show a list


[8/29/2022 10:31 PM] tux_linux
what?


[8/29/2022 10:31 PM] the.mightydill
wait... are you doing just fdiskor are you doing the other one


[8/29/2022 10:31 PM] the.mightydill
sfdisk


[8/29/2022 10:31 PM] Deleted User
cause rn im seeing 1b hidden w95 fat3 and 1c hidden w95 fat3


[8/29/2022 10:31 PM] the.mightydill
i think


[8/29/2022 10:31 PM] the.mightydill
thats what its called


[8/29/2022 10:31 PM] tux_linux
fdisk
sfdisk is for automation


[8/29/2022 10:32 PM] tux_linux
max up your terminal window?


[8/29/2022 10:32 PM] the.mightydill
huh? which one had a tui


[8/29/2022 10:32 PM] the.mightydill
i forgot


[8/29/2022 10:32 PM] Deleted User
it is maxed


[8/29/2022 10:32 PM] Deleted User
one sec


[8/29/2022 10:32 PM] tux_linux
unzoom


[8/29/2022 10:32 PM] Deleted User
http://0x0.st/opcI.png

{Embed}
http://0x0.st/opcI.png
/mnt/data/projects/git/conversations/media/opcI-628AF.png


[8/29/2022 10:33 PM] Deleted User
it doesn't get any bigger


[8/29/2022 10:33 PM] Deleted User
idk if its 1b or 1c but they say its hidden so idk if its the right one


[8/29/2022 10:33 PM] tux_linux
`0C`


[8/29/2022 10:33 PM] Deleted User
ah i am blind


[8/29/2022 10:34 PM] Deleted User
btw the names are not /dev/mmc*


[8/29/2022 10:34 PM] Deleted User
they are /dev/sdb


[8/29/2022 10:34 PM] Deleted User
is that fine


[8/29/2022 10:34 PM] tux_linux
well, sdb


[8/29/2022 10:35 PM] Deleted User
gotcha


[8/29/2022 10:37 PM] Deleted User
```
Device     Boot    Start      End Sectors  Size Id Type
/dev/sdb1          49152    79871   30720   15M 83 Linux
/dev/sdb2       10590210 15269887 4679678  2.2G  5 Extende
/dev/sdb3         104448  4298752 4194305    2G  c W95 FAT
/dev/sdb4        4298753 10590209 6291457    3G 83 Linux
```


[8/29/2022 10:37 PM] Deleted User
I have this so far


[8/29/2022 10:37 PM] Deleted User
but when I create the fifth one it says out of range


[8/29/2022 10:38 PM] Deleted User
```
Device       Boot StartCHS    EndCHS        StartLBA     EndLBA    Sectors  Size Id Type
/dev/mmcblk0p1    768,0,1     1023,3,16        49152      79871      30720 15.0M 83 Linux
/dev/mmcblk0p2    1023,3,16   1023,3,16     10590210   15269887    4679678 2284M  5 Extended
/dev/mmcblk0p3    1023,3,16   1023,3,16       104448    4298752    4194305 2048M  b Win95 FAT32
/dev/mmcblk0p4    1023,3,16   1023,3,16      4298753   10590209    6291457 3072M 83 Linux
/dev/mmcblk0p5    1023,3,16   1023,3,16     10590226   11614225    1024000  500M 83 Linux
/dev/mmcblk0p6    1023,3,16   1023,3,16     11614242   12138529     524288  256M 83 Linux
/dev/mmcblk0p7    1023,3,16   1023,3,16     12138546   12662833     524288  256M 83 Linux
```


[8/29/2022 10:39 PM] tux_linux
you have to create it as an extended partition


[8/29/2022 10:39 PM] Deleted User
it says adding logical partition 5


[8/29/2022 10:39 PM] tux_linux
yes


[8/29/2022 10:39 PM] tux_linux
that's what it should be


[8/29/2022 10:40 PM] Deleted User
http://0x0.st/opc5.png

{Embed}
http://0x0.st/opc5.png
/mnt/data/projects/git/conversations/media/opc5-01D85.png


[8/29/2022 10:41 PM] andi15701
paranoia


[8/29/2022 10:42 PM] tux_linux
oh


[8/29/2022 10:42 PM] tux_linux
use busybox fdisk


[8/29/2022 10:42 PM] andi15701
fdisk seems to enforce some extra alignment here


[8/29/2022 10:42 PM] Deleted User
kekw


[8/29/2022 10:42 PM] tux_linux
`q`


[8/29/2022 10:42 PM] tux_linux
no `w` for now


[8/29/2022 10:43 PM] andi15701
does the exact position here matter much?


[8/29/2022 10:43 PM] tux_linux
yes


[8/29/2022 10:43 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/d95c329c0ece45fabe3ad90a16d22498623c06b8/initrd/common/rcS-root#L266

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/d95c329c0ece45fabe3ad90a16d22498623c06b8/initrd/common/rcS-root
kernel/rcS-root at d95c329c0ece45fabe3ad90a16d22498623c06b8 · Kobo-...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[8/29/2022 10:43 PM] Deleted User
I type busybox fdisk


[8/29/2022 10:44 PM] tux_linux
yes


[8/29/2022 10:44 PM] tux_linux
sudo


[8/29/2022 10:44 PM] tux_linux
doas


[8/29/2022 10:44 PM] szybet
can you make it flexible using a config file in the new init?


[8/29/2022 10:45 PM] tux_linux
it's not supposed to be flexible


[8/29/2022 10:45 PM] tux_linux
it was made like that on purpose


[8/29/2022 10:45 PM] andi15701
why does it infere with that position


[8/29/2022 10:45 PM] szybet
like, increasing the alpine partition for *scientific* ~~fun~~ purpuses would be cool


[8/29/2022 10:45 PM] andi15701
export ROOT_FLAG=$(dd if=/dev/mmcblk0 bs=512 skip=98304 count=1 status=none | head -c6)


[8/29/2022 10:45 PM] andi15701
if you mean that


[8/29/2022 10:45 PM] tux_linux
yes


[8/29/2022 10:46 PM] tux_linux
it's fine like that


[8/29/2022 10:46 PM] tux_linux
i think you can merge other partitions for write too


[8/29/2022 10:46 PM] tux_linux
unionfs


[8/29/2022 10:46 PM] szybet
you talked once that you would want to do that


[8/29/2022 10:46 PM] szybet
but then the initiative was lost somewhere


[8/29/2022 10:46 PM] szybet
¯\_(ツ)_/¯


[8/29/2022 10:47 PM] tux_linux
look into that


[8/29/2022 10:47 PM] andi15701
10590226 is far away from 98304


[8/29/2022 10:47 PM] tux_linux
98304 is for the kindle


[8/29/2022 10:48 PM] andi15701
so it should not infer with that if the partition 5 starts at a higher sector


[8/29/2022 10:48 PM] andi15701
79872 is for kobo?


[8/29/2022 10:48 PM] tux_linux
yes


[8/29/2022 10:49 PM] andi15701
so that is just the hole after partition 1


[8/29/2022 10:49 PM] tux_linux
i think


[8/29/2022 10:50 PM] andi15701
so we are free to do things later on


[8/29/2022 10:50 PM] andi15701
so the padding from standard fdisk can be accepted


[8/29/2022 10:52 PM] Deleted User
```
Device  Boot StartCHS    EndCHS        StartLBA     EndLBA    Sectors  Size Id Type
/dev/sdb1    768,0,1     1023,3,16        49152      79871      30720 15.0M 83 Linux
/dev/sdb2    1023,3,16   1023,3,16     10590210   15269887    4679678 2284M  5 Extended
/dev/sdb3    1023,3,16   1023,3,16       104448    4298752    4194305 2048M  c Win95 FAT32 (LBA)
/dev/sdb4    1023,3,16   1023,3,16      4298753   10590209    6291457 3072M 83 Linux
/dev/sdb5    1023,3,16   1023,3,16     10590226   11614225    1024000  500M 83 Linux
/dev/sdb6    1023,3,16   1023,3,16     11614242   12138529     524288  256M 83 Linux
/dev/sdb7    1023,3,16   1023,3,16     12138546   12662833     524288  256M 83 Linux

Partition table entries are not in disk order```


[8/29/2022 10:53 PM] Deleted User
let me just create two files and do a diff


[8/29/2022 10:53 PM] andi15701
sfdisk -d /dev/sdb >parttable.txt


[8/29/2022 10:53 PM] tux_linux
@Deleted User do that afterwards if the diff is identical


[8/29/2022 10:55 PM] Deleted User
the diff is different


[8/29/2022 10:55 PM] Deleted User
on the sdb3 it has an id of b


[8/29/2022 10:55 PM] Deleted User
on my one it has an id of c


[8/29/2022 10:55 PM] Deleted User
also it has (LBA) on my one too


[8/29/2022 10:56 PM] tux_linux
hm yeah


[8/29/2022 10:56 PM] tux_linux
`t`


[8/29/2022 10:56 PM] tux_linux
and change it


[8/29/2022 10:56 PM] tux_linux
`0B`


[8/29/2022 10:56 PM] Deleted User
I just typed b


[8/29/2022 10:58 PM] Deleted User
now there is no difference


[8/29/2022 10:58 PM] Deleted User
woop


[8/29/2022 10:58 PM] tux_linux
what did you do


[8/29/2022 10:59 PM] Deleted User
i wrote it


[8/29/2022 10:59 PM] Deleted User
after confirming it was both the same


[8/29/2022 11:00 PM] Deleted User
```
label: dos
label-id: 0x00000000
device: /dev/sdb
unit: sectors
sector-size: 512

/dev/sdb1 : start=       49152, size=       30720, type=83
/dev/sdb2 : start=    10590210, size=     4679678, type=5
/dev/sdb3 : start=      104448, size=     4194305, type=b
/dev/sdb4 : start=     4298753, size=     6291457, type=83
/dev/sdb5 : start=    10590226, size=     1024000, type=83
/dev/sdb6 : start=    11614242, size=      524288, type=83
/dev/sdb7 : start=    12138546, size=      524288, type=83
```


[8/29/2022 11:00 PM] tux_linux
well ok


[8/29/2022 11:00 PM] tux_linux
andi, is there a quick way to check if uboot is not messed up before rebooting?


[8/29/2022 11:01 PM] andi15701
compare with backup


[8/29/2022 11:01 PM] Deleted User
how


[8/29/2022 11:02 PM] andi15701
cmp -i 1024 /dev/sdb backup.img

{Reactions}
👍 

[8/29/2022 11:03 PM] andi15701
and we need to restore uboot env before it can boot into anything


[8/29/2022 11:04 PM] andi15701
as documented in the wiki


[8/29/2022 11:04 PM] tux_linux
probably will need to xzcat the backup a bit
`xzcat libra-backup.xz | dd of=test.img bs=1 count=1024`


[8/29/2022 11:05 PM] tux_linux
then you can run cmp


[8/29/2022 11:05 PM] Deleted User
yeah i got the test.img


[8/29/2022 11:05 PM] andi15701
that is only the partition table


[8/29/2022 11:06 PM] andi15701
of=test.img bs=512 count=49152


[8/29/2022 11:07 PM] Deleted User
the cmp thing is not working


[8/29/2022 11:08 PM] tux_linux
`xzcat libra-backup.xz | dd of=test.img bs=512 count=49152` then


[8/29/2022 11:08 PM] Deleted User
oh okay


[8/29/2022 11:09 PM] Deleted User
its doing something


[8/29/2022 11:09 PM] Deleted User
cmp: EOF on test.img after byte 25164800, in line 33342


[8/29/2022 11:09 PM] andi15701
so things are same


[8/29/2022 11:09 PM] Deleted User
im running cmp -i 1024 /dev/sdb test.img


[8/29/2022 11:09 PM] Deleted User
btw


[8/29/2022 11:09 PM] andi15701
correct


[8/29/2022 11:09 PM] Deleted User
is this output bad


[8/29/2022 11:10 PM] andi15701
both files are different, but in size


[8/29/2022 11:10 PM] Deleted User
how do i back up the uboot


[8/29/2022 11:10 PM] Deleted User
do i even need to do that


[8/29/2022 11:10 PM] tux_linux
it's already done


[8/29/2022 11:10 PM] Deleted User
cause i got the libra.xz


[8/29/2022 11:10 PM] andi15701
which is expectedd


[8/29/2022 11:10 PM] Deleted User
backup-libra.xz


[8/29/2022 11:10 PM] Deleted User
ah alright


[8/29/2022 11:10 PM] Deleted User
so now what


[8/29/2022 11:11 PM] tux_linux
download the latest kobo update package for your device


[8/29/2022 11:11 PM] Deleted User
from the kobo website?


[8/29/2022 11:12 PM] tux_linux
https://kbdownload1-a.akamaihd.net/firmwares/kobo7/Jul2022/kobo-update-4.33.19759.zip


[8/29/2022 11:12 PM] tux_linux
Get `zImage-E70K00` from the upgrade/mx6sll-ntx folder


[8/29/2022 11:12 PM] Deleted User
so this firmware update is for


[8/29/2022 11:13 PM] tux_linux
then `xzcat libra-backup.xz > /tmp/libra.img` if you have enough RAM, otherwise extract to disk


[8/29/2022 11:14 PM] tux_linux
you said you didn't want Nickel back at all actually?


[8/29/2022 11:14 PM] Deleted User
what is nickel


[8/29/2022 11:14 PM] Deleted User
the normal kobo thing


[8/29/2022 11:14 PM] Deleted User
ui


[8/29/2022 11:15 PM] tux_linux
yes


[8/29/2022 11:15 PM] Deleted User
yeah fck that

{Reactions}
😆 

[8/29/2022 11:15 PM] Deleted User
i do not want to see that ever again


[8/29/2022 11:15 PM] tux_linux
well, ok, because we partitionned the device for dual boot


[8/29/2022 11:15 PM] Deleted User
oh


[8/29/2022 11:15 PM] Deleted User
🥴


[8/29/2022 11:15 PM] tux_linux
we can do single-boot


[8/29/2022 11:15 PM] tux_linux
but then while we're at it


[8/29/2022 11:15 PM] tux_linux
also restore nickel


[8/29/2022 11:16 PM] Deleted User
I am not sure how that will work but right now I am doing the xzcat command


[8/29/2022 11:16 PM] Deleted User
I would like to have single boot yes


[8/29/2022 11:17 PM] tux_linux
ok


[8/29/2022 11:17 PM] tux_linux
then wait


[8/29/2022 11:17 PM] Deleted User
the xzcat is done


[8/29/2022 11:17 PM] andi15701
it the sfdisk file somewhere?


[8/29/2022 11:17 PM] tux_linux
yes do that


[8/29/2022 11:18 PM] andi15701
so the next one has an easier job


[8/29/2022 11:18 PM] andi15701
it would be good to script all that with some  safety belts added


[8/29/2022 11:18 PM] andi15701
like checking if original partitions look sane


[8/29/2022 11:19 PM] andi15701
e.g.


[8/29/2022 11:19 PM] Deleted User
oh you want me to upload the sfdisk here


[8/29/2022 11:20 PM] andi15701
that dump file can be used with sfdisk /dev/sdb <output_of_sfdisk-d.txt


[8/29/2022 11:20 PM] Deleted User
```
label: dos
label-id: 0x00000000
device: /dev/sdb
unit: sectors
sector-size: 512

/dev/sdb1 : start=       49152, size=       30720, type=83
/dev/sdb2 : start=    10590210, size=     4679678, type=5
/dev/sdb3 : start=      104448, size=     4194305, type=b
/dev/sdb4 : start=     4298753, size=     6291457, type=83
/dev/sdb5 : start=    10590226, size=     1024000, type=83
/dev/sdb6 : start=    11614242, size=      524288, type=83
/dev/sdb7 : start=    12138546, size=      524288, type=83
```


[8/29/2022 11:20 PM] Deleted User
here it is


[8/29/2022 11:20 PM] andi15701
as a file


[8/29/2022 11:20 PM] andi15701
not pasted


[8/29/2022 11:21 PM] Deleted User (pinned)


{Attachments}
/mnt/data/projects/git/conversations/media/parttable-B726C.txt


[8/29/2022 11:21 PM] tux_linux
Pinned a message.


[8/29/2022 11:22 PM] Deleted User
so now what do i do


[8/29/2022 11:22 PM] Deleted User
im not sure what the zImage is for is it the back up for the nickel?


[8/29/2022 11:22 PM] Deleted User
or the uboot


[8/29/2022 11:36 PM] andi15701
the backup of the uboot env, you need to restore in order to make  u-boot do anything else than booting into msd

{Attachments}
/mnt/data/projects/git/conversations/media/u-boot-9F667.mmc


[8/29/2022 11:36 PM] andi15701
as documented in the wiki


[8/29/2022 11:37 PM] Deleted User
but tux said i didnt hve to


[8/29/2022 11:37 PM] Deleted User
have*


[8/29/2022 11:37 PM] tux_linux
no you do


[8/29/2022 11:37 PM] Deleted User
oh


[8/29/2022 11:37 PM] andi15701
uboot environment is the configuration for uboot


[8/29/2022 11:37 PM] Deleted User
mb


[8/29/2022 11:38 PM] andi15701
and now we have reconfigured uboot to not boot a system but to switch into msd mode


[8/29/2022 11:38 PM] Deleted User
so I do a bootcmd=ricoh_watchdog disable; ums 0 mmc 0


[8/29/2022 11:38 PM] Deleted User
?


[8/29/2022 11:38 PM] andi15701
that we already have done


[8/29/2022 11:39 PM] Deleted User
```
 mount /dev/sdX1 /mnt
 dd if=/mnt/etc/u-boot/mx6sll-ntx/u-boot.mmc bs=128K seek=6 of=/dev/sdX
 umount /mnt```


[8/29/2022 11:39 PM] Deleted User
this?


[8/29/2022 11:39 PM] Deleted User
i didnt run this command


[8/29/2022 11:40 PM] andi15701
yes, practically after you are done with installing


[8/29/2022 11:40 PM] andi15701
you did


[8/29/2022 11:40 PM] Deleted User
ah


[8/29/2022 11:40 PM] Deleted User
so so im on the wiki


[8/29/2022 11:41 PM] Deleted User
but i am not sure which part talks about backing up the boot env


[8/29/2022 11:41 PM] andi15701
by doinng fastboot flash bootenv ums-env.bin


[8/29/2022 11:41 PM] andi15701
you made uboot


[8/29/2022 11:41 PM] Deleted User
ohhh


[8/29/2022 11:41 PM] Deleted User
so its the ums-env


[8/29/2022 11:41 PM] Deleted User
i just keep it right?


[8/29/2022 11:41 PM] andi15701
to run that ums 0 mmc 0 stuff


[8/29/2022 11:41 PM] andi15701
at every boot


[8/29/2022 11:42 PM] Deleted User
so it auto does that every boot


[8/29/2022 11:42 PM] andi15701
yes


[8/29/2022 11:42 PM] Deleted User
so now do i just power on my ereader?


[8/29/2022 11:42 PM] andi15701
and you are again in mass storage mode


[8/29/2022 11:43 PM] andi15701
nothing will boot


[8/29/2022 11:43 PM] andi15701
so after you are done with installing (and you are not ready yet)


[8/29/2022 11:44 PM] andi15701
you need to reconfigure uboot again to do the normal thing


[8/29/2022 11:44 PM] Deleted User
oh makes sense


[8/29/2022 11:44 PM] andi15701
i.e. booting the system


[8/29/2022 11:44 PM] Deleted User
so what are the next steps for the installation process


[8/29/2022 11:45 PM] andi15701
that is tux-linux job


[8/29/2022 11:45 PM] Deleted User
ah


[8/29/2022 11:45 PM] tux_linux
wait


[8/29/2022 11:45 PM] andi15701
i am going to bed soon and what to make sure that there are no "help, I bricked my device" messages when I wake up


[8/29/2022 11:46 PM] Deleted User
hahaa


[8/29/2022 11:46 PM] Deleted User
hopefully that does not happen


[8/29/2022 11:46 PM] andi15701
so after you are done with installing, you take the u-boot.mmc file I sent you


[8/29/2022 11:46 PM] Deleted User
which you created


[8/29/2022 11:46 PM] andi15701
I took it from my backup


[8/29/2022 11:47 PM] Deleted User
ooooh


[8/29/2022 11:47 PM] Deleted User
which you did from doing the serial stuff with the kobo?


[8/29/2022 11:47 PM] Deleted User
https://tenor.com/view/all-coming-together-gif-21949585

{Embed}
https://tenor.com/view/all-coming-together-gif-21949585
/mnt/data/projects/git/conversations/media/all-coming-together-731BC.png


[8/29/2022 11:48 PM] andi15701 (pinned)
dd if=u-boot.mmc bs=128K seek=6 of=/dev/sdb   to restore the uboot env to normal configuration


[8/29/2022 11:49 PM] Deleted User
thank you


[8/29/2022 11:49 PM] Deleted User
but wont that interfere with the 7 paritions?


[8/29/2022 11:50 PM] andi15701
no


[8/29/2022 11:50 PM] andi15701
it is before the portitioned space


[8/29/2022 11:50 PM] Deleted User
ahh


[8/29/2022 11:51 PM] tux_linux
Pinned a message.


[8/30/2022 12:02 AM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/libra-20220829.tar.xz


[8/30/2022 12:02 AM] tux_linux
and clone this
https://github.com/Kobo-InkBox/emu.git


[8/30/2022 12:03 AM] tux_linux
then `cat sd/user.sqsh.* > user.sqsh`


[8/30/2022 12:03 AM] tux_linux
tell me when it's done


[8/30/2022 12:03 AM] Deleted User
alrighty


[8/30/2022 12:05 AM] Deleted User
done


[8/30/2022 12:07 AM] tux_linux
`mount /dev/sdb4 /mnt`


[8/30/2022 12:07 AM] tux_linux
then `df -h`


[8/30/2022 12:07 AM] tux_linux
also, what is the size of the xz archive of your backup?


[8/30/2022 12:07 AM] Deleted User
wrong fs type


[8/30/2022 12:07 AM] Deleted User
```
mount: /mnt: wrong fs type, bad option, bad superblock on /dev/sdb4, missing codepage or helper program, or other error.
       dmesg(1) may have more information after failed mount system call.```


[8/30/2022 12:08 AM] Deleted User
the archive backup is 1.1GiB


[8/30/2022 12:10 AM] tux_linux
ok


[8/30/2022 12:10 AM] tux_linux
`mkfs.ext4 /dev/sdb4 -O "^metadata_csum"`


[8/30/2022 12:10 AM] andi15701
missing mkfs


[8/30/2022 12:11 AM] tux_linux
yes


[8/30/2022 12:11 AM] Deleted User
what does this command do


[8/30/2022 12:11 AM] Deleted User
i get it it makes ext4


[8/30/2022 12:11 AM] Deleted User
but never seen the -O "^metadata_csum"


[8/30/2022 12:12 AM] Deleted User
its taking a bit of time


[8/30/2022 12:12 AM] Deleted User
done


[8/30/2022 12:12 AM] tux_linux
it's for older kernels
and maybe this one too


[8/30/2022 12:12 AM] tux_linux
they don't support ext4 without this option


[8/30/2022 12:12 AM] Deleted User
oooh


[8/30/2022 12:12 AM] Deleted User
so now i mount


[8/30/2022 12:12 AM] tux_linux
yes


[8/30/2022 12:13 AM] andi15701
ext4 has got several extentios over the years, and you can turn them off


[8/30/2022 12:13 AM] Deleted User
```

du: cannot read directory '/mnt/lost+found': Permission denied
16K    /mnt/lost+found
20K    /mnt```


[8/30/2022 12:13 AM] tux_linux
`sudo unsquashfs -f -d /mnt user.sqsh`
it **will** take a long time
be patient, don't disconnect USB


[8/30/2022 12:14 AM] Deleted User
lsblk says that sdb4 has 3G


[8/30/2022 12:14 AM] Deleted User
but du only says like 36K


[8/30/2022 12:14 AM] tux_linux
3G is the size of the partition


[8/30/2022 12:15 AM] Deleted User
ah yes


[8/30/2022 12:17 AM] Deleted User
so does this command move this user.sqsh to the sdb4


[8/30/2022 12:17 AM] Deleted User
and this essentially is inkbox


[8/30/2022 12:18 AM] Deleted User
yeah you are right its taking a long time its stuck on 74 percent


[8/30/2022 12:18 AM] tux_linux
it's normal


[8/30/2022 12:18 AM] tux_linux
not essentially


[8/30/2022 12:19 AM] tux_linux
it's only a part of it


[8/30/2022 12:19 AM] Deleted User
oh


[8/30/2022 12:19 AM] Deleted User
what are the next things to do


[8/30/2022 12:20 AM] tux_linux
wait


[8/30/2022 12:29 AM] Deleted User
its done


[8/30/2022 12:31 AM] Deleted User
@tux-linux


[8/30/2022 12:31 AM] Deleted User
😮


[8/30/2022 12:35 AM] tux_linux
`sync`


[8/30/2022 12:35 AM] Deleted User
done


[8/30/2022 12:36 AM] tux_linux
`tar -xvf libra-*.tar.xz`


[8/30/2022 12:36 AM] Deleted User
done


[8/30/2022 12:37 AM] tux_linux
```
sudo cp update.isa /mnt/update
sudo umount /mnt
```


[8/30/2022 12:37 AM] Deleted User
done


[8/30/2022 12:44 AM] Deleted User
now what


[8/30/2022 12:45 AM] tux_linux
```
mount /dev/sdb3 /mnt
cp rootfs.squashfs* /mnt
cp overlaymount-rootfs.squashfs* /mnt
umount /mnt

mount /dev/sdb1 /mnt
cp zImage-root /mnt/boot/zImage-inkbox
mkdir -p /mnt/flags
echo true > /mnt/flags/DISPLAY_DEBUG
umount /mnt

mount /dev/sdb2 /mnt
cp overlaymount-rootfs.squashfs* /mnt
umount /mnt

echo rooted | dd of=/dev/sdb bs=512 seek=79872
```
get zImage-root from here: http://pkgs-inkbox.duckdns.org:25560/misc/zImage-root
get overlaymount-rootfs.squashfs* in attachment

{Attachments}
/mnt/data/projects/git/conversations/media/overlaymount-rootfs.squashfs-4B3C6.dgst
/mnt/data/projects/git/conversations/media/overlaymount-rootfs-2EC6B.squashfs


[8/30/2022 12:46 AM] tux_linux
do it one command at at time


[8/30/2022 12:47 AM] Deleted User
damn


[8/30/2022 12:47 AM] Deleted User
alright


[8/30/2022 12:47 AM] Deleted User
we are copying the overlaymount to both sdb2 and 3


[8/30/2022 12:48 AM] tux_linux
yes


[8/30/2022 12:48 AM] Deleted User
all of them will have the mounting problem


[8/30/2022 12:48 AM] Deleted User
fs type


[8/30/2022 12:48 AM] tux_linux
waiiiit


[8/30/2022 12:48 AM] tux_linux
format sdb3 as fat32


[8/30/2022 12:48 AM] tux_linux
the rest as ext4


[8/30/2022 12:49 AM] Deleted User
```mkfs.ext4 /dev/sdb4 -O "^metadata_csum"```


[8/30/2022 12:49 AM] tux_linux
yes


[8/30/2022 12:49 AM] Deleted User
this is the ext4 command


[8/30/2022 12:49 AM] Deleted User
and is ```
mkfs.vfat -F32 /dev/sdb3 ``` fine?


[8/30/2022 12:50 AM] tux_linux
yes


[8/30/2022 1:00 AM] Deleted User
when i try to mkfs sdb1


[8/30/2022 1:00 AM] Deleted User
it says


[8/30/2022 1:00 AM] Deleted User
```
/dev/sdb1 contains a ext4 file system labelled 'rootfs'
    last mounted on / on Mon Aug 29 22:38:01 2022
Proceed anyway? (y,N) N```


[8/30/2022 1:00 AM] Deleted User
is that bad


[8/30/2022 1:02 AM] tux_linux
no


[8/30/2022 1:02 AM] tux_linux
say y


[8/30/2022 1:03 AM] Deleted User
i am doing what you said i just added a line where it created the /mnt/boot for sdb1


[8/30/2022 1:03 AM] Deleted User
and for the echo true | doas tee filepath


[8/30/2022 1:04 AM] tux_linux
you can just `su root`


[8/30/2022 1:04 AM] Deleted User
i have root login disabled


[8/30/2022 1:04 AM] Deleted User
```
doas mkfs.ext4 /dev/sdb2 -O "^metadata_csum"
doas (tohka@kotori) password:
mke2fs 1.46.5 (30-Dec-2021)
mkfs.ext4: inode_size (256) * inodes_count (0) too big for a
    filesystem with 0 blocks, specify higher inode_ratio (-i)
    or lower inode count (-N).```


[8/30/2022 1:04 AM] Deleted User
okay this doesnt work


[8/30/2022 1:04 AM] Deleted User
sdb2 is 1K


[8/30/2022 1:05 AM] tux_linux
`fdisk -l`


[8/30/2022 1:05 AM] Deleted User
```
Device     Boot    Start      End Sectors  Size Id Type
/dev/sdb1          49152    79871   30720   15M 83 Linux
/dev/sdb2       10590210 15269887 4679678  2.2G  5 Extended
/dev/sdb3         104448  4298752 4194305    2G  b W95 FAT32
/dev/sdb4        4298753 10590209 6291457    3G 83 Linux
/dev/sdb5       10590226 11614225 1024000  500M 83 Linux
/dev/sdb6       11614242 12138529  524288  256M 83 Linux
/dev/sdb7       12138546 12662833  524288  256M 83 Linux```


[8/30/2022 1:05 AM] tux_linux
oh


[8/30/2022 1:06 AM] Deleted User
isnt sdb2 a map for sdb5 6 7


[8/30/2022 1:07 AM] tux_linux
actually it's `/dev/sdb5`


[8/30/2022 1:07 AM] Deleted User
ah


[8/30/2022 1:07 AM] tux_linux
so everything I wrote for sdb2 you do it for sdb5


[8/30/2022 1:09 AM] Deleted User
and donw


[8/30/2022 1:09 AM] Deleted User
done


[8/30/2022 1:09 AM] Deleted User
the echo rooted what does that do


[8/30/2022 1:10 AM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=General_information#Standard_and_Rooted

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=General_information
Index.php


[8/30/2022 1:11 AM] tux_linux
`sync`


[8/30/2022 1:12 AM] Deleted User
sheesh


[8/30/2022 1:12 AM] Deleted User
so i get more power


[8/30/2022 1:12 AM] Deleted User
is there any reason why this isn't the default


[8/30/2022 1:13 AM] tux_linux
security


[8/30/2022 1:16 AM] Deleted User
oh alright

{Reactions}
👍 

[8/30/2022 1:19 AM] Deleted User
now what do i do


[8/30/2022 1:19 AM] Deleted User
dd if=u-boot.mmc bs=128K seek=6 of=/dev/sdb


[8/30/2022 1:21 AM] tux_linux
yes


[8/30/2022 1:25 AM] Deleted User
done


[8/30/2022 1:25 AM] Deleted User
now what


[8/30/2022 1:27 AM] Deleted User
Do I unplug and reboot?


[8/30/2022 1:39 AM] tux_linux
You can try
Before: echo true > /mnt/flags/BOOT_USB_DEBUG


[8/30/2022 1:40 AM] tux_linux
Then go ahead


[8/30/2022 1:41 AM] Deleted User
what


[8/30/2022 1:42 AM] Deleted User
nothing is mounted at /mnt


[8/30/2022 1:42 AM] Deleted User
what do you want me to mount @tux-linux


[8/30/2022 1:48 AM] tux_linux
p1


[8/30/2022 1:50 AM] Deleted User
alright thanks


[8/30/2022 2:15 AM] Deleted User
device does not power on


[8/30/2022 2:15 AM] Deleted User
flashing white leed


[8/30/2022 2:15 AM] Deleted User
black scren


[8/30/2022 2:16 AM] tux_linux
Try to connect it via usbnet


[8/30/2022 2:16 AM] tux_linux
192.168.2.2


[8/30/2022 2:16 AM] tux_linux
Does telnet work this time?


[8/30/2022 2:16 AM] Deleted User
i disconnected the usb from the kobo


[8/30/2022 2:16 AM] Deleted User
so i dont think it will have the same ip


[8/30/2022 2:16 AM] tux_linux
Then connect it


[8/30/2022 2:17 AM] tux_linux
Yes well change it if needed


[8/30/2022 2:17 AM] Deleted User
i dont see it in ip a


[8/30/2022 2:17 AM] tux_linux
dmesg?


[8/30/2022 2:17 AM] Deleted User
```[32809.695421]  </TASK>
[34918.146662] EXT4-fs (sdb1): bad geometry: block count 262144 exceeds size of device (15360 blocks)
[34966.260111] EXT4-fs (sdb1): mounted filesystem with ordered data mode. Quota mode: none.
[35364.278659] EXT4-fs (sdb5): mounted filesystem with ordered data mode. Quota mode: none.
[35432.336709]  sdb: sdb1 sdb2 < sdb5 sdb6 sdb7 > sdb3 sdb4
[36409.618221]  sdb: sdb1 sdb2 < sdb5 sdb6 sdb7 > sdb3 sdb4
[37938.629430] EXT4-fs (sdb1): mounted filesystem with ordered data mode. Quota mode: none.
[37997.439083] usb 1-10: USB disconnect, device number 21
[37997.454923] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[37997.454938] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
```


[8/30/2022 2:18 AM] tux_linux
Well then do you see sdb?


[8/30/2022 2:18 AM] Deleted User
nope


[8/30/2022 2:18 AM] tux_linux
Ooh


[8/30/2022 2:18 AM] tux_linux
We forgot to flash the kernel


[8/30/2022 2:18 AM] Deleted User
fuck


[8/30/2022 2:18 AM] tux_linux
No it's not bricked


[8/30/2022 2:18 AM] Deleted User
yeah but dont we have to do everything again from scratch


[8/30/2022 2:19 AM] Deleted User
oh actually no


[8/30/2022 2:19 AM] tux_linux
We will boot using fastboot


[8/30/2022 2:19 AM] Deleted User
i just do the fastboot thing


[8/30/2022 2:19 AM] tux_linux
Yes


[8/30/2022 2:19 AM] Deleted User
im getting the hang of this


[8/30/2022 2:19 AM] tux_linux
But with a different kernel
Will give you one in ~20m, can't right now


[8/30/2022 2:21 AM] Deleted User
alright no worries take your time

{Reactions}
👍 

[8/30/2022 3:10 AM] tux_linux
same thing


[8/30/2022 3:24 AM] Deleted User
are you sure this would work


[8/30/2022 3:24 AM] Deleted User
or do i have to use the andi method


[8/30/2022 3:24 AM] Deleted User
is this the new kernel you have uploaded?


[8/30/2022 3:25 AM] tux_linux
yes


[8/30/2022 3:25 AM] tux_linux
you don't trust me? \;)


[8/30/2022 3:40 AM] Deleted User
i do trust you

{Reactions}
👍 

[8/30/2022 3:42 AM] Deleted User
i did it


[8/30/2022 3:42 AM] Deleted User
white screen blinking led


[8/30/2022 3:42 AM] Deleted User
```
[37997.454923] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[37997.454938] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[44614.829633] usb 1-10: new high-speed USB device number 22 using xhci_hcd
[44614.956039] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[44614.956423] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[44614.956427] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[44614.956429] usb 1-10: Product: USB download gadget
[44614.956430] usb 1-10: Manufacturer: FSL
[44614.956431] usb 1-10: SerialNumber: 1872020071501963980
[44618.100952] usb 1-10: USB disconnect, device number 22
```


[8/30/2022 3:46 AM] tux_linux
did you move the device around? it needs to stay still


[8/30/2022 3:46 AM] tux_linux
power it on, leave it on a surface and don't touch it


[8/30/2022 3:46 AM] Deleted User
i do not move it around


[8/30/2022 3:46 AM] Deleted User
do i power it off and then power it on


[8/30/2022 3:46 AM] Deleted User
or do i power it off and then fastboot again then power it on


[8/30/2022 3:47 AM] tux_linux
wait a bit


[8/30/2022 3:48 AM] Deleted User
alright


[8/30/2022 3:48 AM] Deleted User
i just left it on white screen and white light flashing


[8/30/2022 3:50 AM] tux_linux
do the same thing


[8/30/2022 3:50 AM] tux_linux
I updated libra.img


[8/30/2022 3:50 AM] tux_linux
on the server


[8/30/2022 3:51 AM] Deleted User
alright


[8/30/2022 3:53 AM] Deleted User
```
[45243.536106] usb 1-10: SerialNumber: 1872020071501963980
[45248.857083] usb 1-10: USB disconnect, device number 23
[45251.199543] usb 1-10: new high-speed USB device number 24 using xhci_hcd
[45251.328057] usb 1-10: New USB device found, idVendor=0525, idProduct=a4a2, bcdDevice= 4.01
[45251.328060] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[45251.328061] usb 1-10: Product: RNDIS/Ethernet Gadget
[45251.328062] usb 1-10: Manufacturer: Linux 4.1.15-inkbox with 2184000.usb
[45251.329020] cdc_subset: probe of 1-10:1.0 failed with error -22
[45251.330328] cdc_ether 1-10:1.0 usb0: register 'cdc_ether' at usb-0000:00:14.0-10, CDC Ethernet Device, ae:b1:26:ff:9d:83
[45251.332334] cdc_ether 1-10:1.0 enp0s20f0u10: renamed from usb0
```


[8/30/2022 3:54 AM] Deleted User
well now i got the ip a interface


[8/30/2022 3:54 AM] tux_linux
do you see something on the screen?


[8/30/2022 3:55 AM] Deleted User
nope


[8/30/2022 3:55 AM] Deleted User
same as before


[8/30/2022 3:55 AM] tux_linux
can you telnet


[8/30/2022 3:55 AM] Deleted User
if i did i would of screamed


[8/30/2022 3:56 AM] Deleted User
so i use ifconfig to make 192.168.2.2?


[8/30/2022 3:57 AM] Deleted User
actually i made it 192.168.2.1 and im using telnet to do 192.168.2.2


[8/30/2022 3:57 AM] Deleted User
but i am not getting aything


[8/30/2022 3:58 AM] tux_linux
facepalm


[8/30/2022 3:58 AM] Deleted User
what happend


[8/30/2022 3:58 AM] tux_linux
hang on, will try on my device


[8/30/2022 3:58 AM] tux_linux
this is nonsense as always


[8/30/2022 3:58 AM] Deleted User
alright let me use the bathroom


[8/30/2022 4:01 AM] tux_linux
it works on mine


[8/30/2022 4:01 AM] tux_linux
nonsense


[8/30/2022 4:02 AM] Deleted User
yikes


[8/30/2022 4:02 AM] Deleted User
you think I have messed something up on my end


[8/30/2022 4:02 AM] tux_linux
possibly


[8/30/2022 4:02 AM] Deleted User
with the partitions and all of that


[8/30/2022 4:02 AM] tux_linux
no


[8/30/2022 4:02 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220830_020153971-FB99F.jpg


[8/30/2022 4:02 AM] tux_linux
it's supposed to look like this


[8/30/2022 4:02 AM] tux_linux
and I can access telnet


[8/30/2022 4:02 AM] Deleted User
oh yeah i never saw that


[8/30/2022 4:03 AM] tux_linux
on 192.168.2.2


[8/30/2022 4:03 AM] tux_linux
you're getting an usb ether interface, so there's that at least


[8/30/2022 4:03 AM] tux_linux
you know


[8/30/2022 4:03 AM] tux_linux
try booting it again


[8/30/2022 4:03 AM] tux_linux
it should have unset a flag


[8/30/2022 4:03 AM] Deleted User
alright


[8/30/2022 4:03 AM] tux_linux
and boot into the normal system


[8/30/2022 4:03 AM] tux_linux
***should***


[8/30/2022 4:03 AM] Deleted User
so no flash boot?


[8/30/2022 4:03 AM] Deleted User
fastboot?


[8/30/2022 4:03 AM] tux_linux
`fastboot boot libra.img`


[8/30/2022 4:04 AM] Deleted User
ok


[8/30/2022 4:04 AM] tux_linux
the same one


[8/30/2022 4:05 AM] Deleted User
nothing


[8/30/2022 4:05 AM] Deleted User
same thing


[8/30/2022 4:05 AM] Deleted User
I think we should leave it for today


[8/30/2022 4:05 AM] Deleted User
come back to it tomorrow


[8/30/2022 4:05 AM] tux_linux
and dmesg


[8/30/2022 4:05 AM] tux_linux
i would really need a serial connection


[8/30/2022 4:05 AM] Deleted User
```
[45954.831888] usb 1-10: SerialNumber: 1872020071501963980
[45960.168572] usb 1-10: USB disconnect, device number 25
[45962.521241] usb 1-10: new high-speed USB device number 26 using xhci_hcd
[45962.649055] usb 1-10: New USB device found, idVendor=0525, idProduct=a4a2, bcdDevice= 4.01
[45962.649061] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[45962.649064] usb 1-10: Product: RNDIS/Ethernet Gadget
[45962.649065] usb 1-10: Manufacturer: Linux 4.1.15-inkbox with 2184000.usb
[45962.650113] cdc_subset: probe of 1-10:1.0 failed with error -22
[45962.651636] cdc_ether 1-10:1.0 usb0: register 'cdc_ether' at usb-0000:00:14.0-10, CDC Ethernet Device, e2:46:82:0d:45:90
[45962.656288] cdc_ether 1-10:1.0 enp0s20f0u10: renamed from usb0
```


[8/30/2022 4:05 AM] Deleted User
I think i destroyed my serial conneciton


[8/30/2022 4:05 AM] tux_linux
try telnet again


[8/30/2022 4:05 AM] tux_linux
i know


[8/30/2022 4:06 AM] tux_linux
`sudo ifconfig enp0s20f0u10 192.168.2.1`
`telnet 192.168.2.2`


[8/30/2022 4:06 AM] Deleted User
still nothing


[8/30/2022 4:06 AM] tux_linux
how much does `libra.img` weigh?


[8/30/2022 4:06 AM] tux_linux
and also do `nmap 192.168.2.2`


[8/30/2022 4:06 AM] Deleted User
11M


[8/30/2022 4:07 AM] tux_linux
alright, nonsense (TM)


[8/30/2022 4:07 AM] Deleted User
```
Starting Nmap 7.80 ( https://nmap.org ) at 2022-08-30 03:07 BST
Note: Host seems down. If it is really up, but blocking our ping probes, try -Pn
Nmap done: 1 IP address (0 hosts up) scanned in 3.02 seconds```


[8/30/2022 4:08 AM] tux_linux
go back into ums mode
as per andi's trick


[8/30/2022 4:09 AM] Deleted User
oh


[8/30/2022 4:09 AM] tux_linux
! wait


[8/30/2022 4:09 AM] tux_linux
my rcs is wrong


[8/30/2022 4:09 AM] tux_linux
and so is yours


[8/30/2022 4:09 AM] tux_linux
although it should display something


[8/30/2022 4:10 AM] Deleted User
oh


[8/30/2022 4:10 AM] Deleted User
what is rcs


[8/30/2022 4:10 AM] Deleted User
i already did his command


[8/30/2022 4:10 AM] Deleted User
i see all of the partitions


[8/30/2022 4:11 AM] tux_linux
oh you are into ums mode already?


[8/30/2022 4:11 AM] Deleted User
yeah


[8/30/2022 4:11 AM] tux_linux
ok well


[8/30/2022 4:12 AM] tux_linux
```
mount /dev/mmcblk0p1 /mnt
for f in /mnt/flags/*; do echo "${f}: $(cat ${f})"; done
```


[8/30/2022 4:12 AM] tux_linux
send output


[8/30/2022 4:13 AM] Deleted User
```
/mnt/flags/BOOT_USB_DEBUG: true
/mnt/flags/DISPLAY_DEBUG: true
```


[8/30/2022 4:13 AM] tux_linux
ok


[8/30/2022 4:13 AM] tux_linux
remove `BOOT_USB_DEBUG`


[8/30/2022 4:13 AM] Deleted User
alright


[8/30/2022 4:13 AM] Deleted User
done


[8/30/2022 4:14 AM] tux_linux
I updated libra.img


[8/30/2022 4:14 AM] tux_linux
download it and `fastboot boot libra.img` again


[8/30/2022 4:14 AM] tux_linux
don't forget to unset the env


[8/30/2022 4:14 AM] tux_linux
actually it's not needed I think


[8/30/2022 4:15 AM] tux_linux
maybe you can just enter fastboot mode


[8/30/2022 4:15 AM] tux_linux
try it


[8/30/2022 4:15 AM] tux_linux
HM NO


[8/30/2022 4:15 AM] tux_linux
WAIT


[8/30/2022 4:16 AM] tux_linux
do that


[8/30/2022 4:16 AM] tux_linux
but actually I don't think it poses a problem
do it still
to be sure


[8/30/2022 4:20 AM] Deleted User
oh


[8/30/2022 4:20 AM] Deleted User
alright


[8/30/2022 4:25 AM] Deleted User
```
[47066.248245] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[47066.248261] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[47069.579275] usb 1-10: new high-speed USB device number 29 using xhci_hcd
[47069.706490] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[47069.706874] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[47069.706883] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[47069.706888] usb 1-10: Product: USB download gadget
[47069.706893] usb 1-10: Manufacturer: FSL
[47069.706896] usb 1-10: SerialNumber: 1872020071501963980
[47070.877721] usb 1-10: USB disconnect, device number 29
```


[8/30/2022 4:25 AM] Deleted User
not working


[8/30/2022 4:25 AM] tux_linux
!@##$%?$%&*


[8/30/2022 4:25 AM] Deleted User
but the error from before is gone


[8/30/2022 4:25 AM] tux_linux
what error


[8/30/2022 4:25 AM] Deleted User
oh nvm


[8/30/2022 4:25 AM] Deleted User
it was an error for andis method


[8/30/2022 4:27 AM] Deleted User
tux my bro lets return to this tomorrow


[8/30/2022 4:27 AM] Deleted User
we did a lot today


[8/30/2022 4:27 AM] tux_linux
yea


[8/30/2022 4:28 AM] Deleted User
thanks for all the help

{Reactions}
👍 

[8/30/2022 4:28 AM] Deleted User
have a good night

{Reactions}
👋 

[8/30/2022 8:40 AM] andi15701
btw: you should check tcpdump -n -i usb0 (or what it is renamed to, to see whether stuff is sent out)

{Reactions}
👍 

[8/30/2022 4:01 PM] Deleted User
i am back


[8/30/2022 4:01 PM] Deleted User
let me know when you guys want to do this


[8/30/2022 5:12 PM] Deleted User
i kinda did something stupid


[8/30/2022 5:12 PM] Deleted User
i mkfs.ext4 the other partitions as well


[8/30/2022 5:12 PM] Deleted User
i thought that might fix things


[8/30/2022 5:13 PM] Deleted User
the ones that didnt have any files in them


[8/30/2022 5:13 PM] szybet
still less stupid than dropping solder on capacitors


[8/30/2022 5:13 PM] Deleted User
now the network interface doe snot show up


[8/30/2022 7:15 PM] Deleted User
lmk when you are free @tux-linux


[8/30/2022 7:16 PM] szybet
stop pinging

{Reactions}
👍 

[8/30/2022 7:16 PM] szybet
tux-linux reads everything on the server anyway


[8/30/2022 7:29 PM] Deleted User
Oh mb


[8/30/2022 7:30 PM] Deleted User
sorry tux


[8/30/2022 7:39 PM] tux_linux
At school


[8/30/2022 7:40 PM] the.mightydill
if they were empty i think they should be fine


[8/30/2022 7:41 PM] the.mightydill
its reversible


[8/30/2022 7:41 PM] the.mightydill
just wait for nicolas to give further instructions


[8/30/2022 7:48 PM] Deleted User
alrighty


[8/30/2022 8:30 PM] tux_linux
It might not


[8/30/2022 8:32 PM] tux_linux
You should try that, but you say the network interface disappeared?
Set BOOT_USB_DEBUG to true again
Things are half working but I can't figure out why


[8/30/2022 9:20 PM] Deleted User
Alright i am back from gym so i will shower and then i will return


[8/31/2022 12:03 AM] tux_linux
https://www.marzocchi.net/Olafsen/Hardware/CurrentKoboLibraH2O?setview=en
@andi @Szybet @NiLuJe this might interest you

{Embed}
https://www.marzocchi.net/Olafsen/Hardware/CurrentKoboLibraH2O?setview=en
Olafsen – Tech and more : Hardware - Current consumption of the Kob...
Measurement of the current consumption in different modes


[8/31/2022 12:56 AM] ninuje
I can't find my Forma numbers, and it's not fully charged, but I have a vague memory of 38.5mA when idling or something, so it would track with what I get via a USB meter.


[8/31/2022 12:59 AM] Deleted User
i am back


[8/31/2022 12:59 AM] Deleted User
alright I will do that


[8/31/2022 1:02 AM] Deleted User
i cant even power off the ereader


[8/31/2022 1:02 AM] Deleted User
it stays at flashing white


[8/31/2022 1:05 AM] Deleted User
if i press and hold the power button it goes on a solid white


[8/31/2022 1:05 AM] Deleted User
oh im stupid


[8/31/2022 1:05 AM] Deleted User
sorry guys


[8/31/2022 1:05 AM] Deleted User
it was already booted into ums-bin


[8/31/2022 1:05 AM] Deleted User
hahah


[8/31/2022 1:05 AM] Deleted User
but I dont have the wifi interface anymore but i will put th eusb debug file


[8/31/2022 1:09 AM] Deleted User
```
[ 1014.511192] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[ 1014.511257] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[ 1017.822104] usb 1-10: new high-speed USB device number 29 using xhci_hcd
[ 1017.948543] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 1017.948871] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 1017.948873] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 1017.948874] usb 1-10: Product: USB download gadget
[ 1017.948875] usb 1-10: Manufacturer: FSL
[ 1017.948875] usb 1-10: SerialNumber: 1872020071501963980
[ 1019.139823] usb 1-10: USB disconnect, device number 29
```


[8/31/2022 1:09 AM] Deleted User
this is what I have


[8/31/2022 1:09 AM] Deleted User
I dont have a network interface


[8/31/2022 1:09 AM] Deleted User
do you think me formating the other partitions did something to the wireless interface?


[8/31/2022 1:17 AM] tux_linux
Probably not


[8/31/2022 1:18 AM] tux_linux
Can you try reconnecting serial? Maybe just with different wires
No soldering


[8/31/2022 1:18 AM] Deleted User
Haha


[8/31/2022 1:18 AM] Deleted User
I will try but expect nothing

{Reactions}
👍 

[8/31/2022 1:27 AM] Deleted User
yeah nothing


[8/31/2022 1:27 AM] Deleted User
absolutely nothing


[8/31/2022 1:27 AM] tux_linux
I don't really know what to tell you


[8/31/2022 1:30 AM] Deleted User
what does the uImage-root do


[8/31/2022 1:30 AM] tux_linux
it's an error


[8/31/2022 1:30 AM] tux_linux
I put the wrong file


[8/31/2022 1:30 AM] tux_linux
that's why I sent you a zImage after that


[8/31/2022 1:30 AM] Deleted User
ah


[8/31/2022 1:31 AM] Deleted User
safe to delete?


[8/31/2022 1:31 AM] Deleted User
```
backup-libra.xz             overlaymount-rootfs.squashfs       ums-env.bin
emu                         overlaymount-rootfs.squashfs.dgst  update.isa
kobo-update                 rootfs.squashfs                    zImage-E70K00
kobo-update-4.33.19759.zip  rootfs.squashfs.dgst               zImage-root
libra-20220829.tar.xz       u-boot.mmc
libra.img                   uImage-root
```


[8/31/2022 1:31 AM] tux_linux
yes


[8/31/2022 1:31 AM] Deleted User
these are the stuff in my directory


[8/31/2022 1:31 AM] Deleted User
hang on


[8/31/2022 1:31 AM] tux_linux
you do still have the n905a yes?


[8/31/2022 1:31 AM] Deleted User
no i sent that back


[8/31/2022 1:32 AM] tux_linux
you shouldn't have


[8/31/2022 1:32 AM] Deleted User
what do I have here that is not needed


[8/31/2022 1:32 AM] tux_linux
anyway


[8/31/2022 1:32 AM] tux_linux
`kobo-update*`


[8/31/2022 1:33 AM] Deleted User
alright


[8/31/2022 1:33 AM] Deleted User
now doing andis thing doesnt work eitehr


[8/31/2022 1:33 AM] tux_linux
hold the power button for very long


[8/31/2022 1:34 AM] the.mightydill
Yeah like 20 seconds


[8/31/2022 1:34 AM] tux_linux
even more


[8/31/2022 1:34 AM] the.mightydill
It should lose all brightness


[8/31/2022 1:34 AM] the.mightydill
Maybe 30


[8/31/2022 1:34 AM] the.mightydill
I don't remember


[8/31/2022 1:34 AM] Deleted User
yeah i mean after i do the fastboot flash bootenv


[8/31/2022 1:34 AM] Deleted User
and do the fastboot reboot


[8/31/2022 1:34 AM] Deleted User
it doesnt show the partitions anymore


[8/31/2022 1:35 AM] the.mightydill
Huhhhh


[8/31/2022 1:35 AM] tux_linux
rip


[8/31/2022 1:35 AM] the.mightydill
Wtf


[8/31/2022 1:35 AM] Deleted User
```
[ 2461.511749] usb 1-10: SerialNumber: 1872020071501963980
[ 2461.677110] usb 1-10: USB disconnect, device number 33
[ 2556.715737] usb 1-10: new high-speed USB device number 34 using xhci_hcd
[ 2556.842332] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 2556.842655] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 2556.842657] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 2556.842658] usb 1-10: Product: USB download gadget
[ 2556.842659] usb 1-10: Manufacturer: FSL
[ 2556.842659] usb 1-10: SerialNumber: 1872020071501963980
[ 2564.756378] usb 1-10: USB disconnect, device number 34
```


[8/31/2022 1:35 AM] tux_linux
`while true; do uuu -lsusb; done`
and power off/on the device normally


[8/31/2022 1:35 AM] tux_linux
might need to use doas


[8/31/2022 1:38 AM] Deleted User
na i dont see anything


[8/31/2022 1:38 AM] tux_linux
though this tells us it does go into download mode for a very short time


[8/31/2022 1:39 AM] tux_linux
@andi clues? thanks


[8/31/2022 1:39 AM] Deleted User
well i booted into your libra.img


[8/31/2022 1:39 AM] tux_linux
now?


[8/31/2022 1:39 AM] Deleted User
```
[ 2556.842659] usb 1-10: SerialNumber: 1872020071501963980
[ 2564.756378] usb 1-10: USB disconnect, device number 34
[ 2843.398079] usb 1-10: new high-speed USB device number 35 using xhci_hcd
[ 2843.524619] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 2843.525149] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 2843.525157] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 2843.525161] usb 1-10: Product: USB download gadget
[ 2843.525164] usb 1-10: Manufacturer: FSL
[ 2843.525166] usb 1-10: SerialNumber: 1872020071501963980
[ 2844.696844] usb 1-10: USB disconnect, device number 35
```


[8/31/2022 1:39 AM] Deleted User
thats what i get now


[8/31/2022 1:40 AM] tux_linux
oh so fastboot works


[8/31/2022 1:40 AM] tux_linux
at least


[8/31/2022 1:40 AM] tux_linux
that's good


[8/31/2022 1:40 AM] Deleted User
yeah


[8/31/2022 1:40 AM] tux_linux
not totally dead


[8/31/2022 1:41 AM] the.mightydill
Are there any nickel libra images


[8/31/2022 1:42 AM] tux_linux
no


[8/31/2022 1:42 AM] tux_linux
but he made a backup


[8/31/2022 1:42 AM] Deleted User
where do you get the interface from


[8/31/2022 1:42 AM] the.mightydill
I know its emmc but still


[8/31/2022 1:42 AM] the.mightydill
Ohh ok


[8/31/2022 1:42 AM] Deleted User
during the andi method or flashing your libra.img


[8/31/2022 1:42 AM] tux_linux
but he can't restore it


[8/31/2022 1:42 AM] the.mightydill
Why????


[8/31/2022 1:42 AM] the.mightydill
Thats fucked


[8/31/2022 1:42 AM] Deleted User
wait i cant restore it


[8/31/2022 1:42 AM] tux_linux
no


[8/31/2022 1:43 AM] tux_linux
because your fastboot env doesn't work


[8/31/2022 1:43 AM] the.mightydill
Wha???


[8/31/2022 1:43 AM] Deleted User
no like I can make it happen


[8/31/2022 1:43 AM] Deleted User
the comand


[8/31/2022 1:43 AM] Deleted User
it goes throgh


[8/31/2022 1:43 AM] tux_linux
yes but


[8/31/2022 1:43 AM] tux_linux
you don't see the device


[8/31/2022 1:43 AM] tux_linux
so


[8/31/2022 1:44 AM] Deleted User
I SEE IT NOW


[8/31/2022 1:44 AM] Deleted User
WOOP


[8/31/2022 1:44 AM] Deleted User
```
[ 3147.868522] usb 1-10: SerialNumber: 1872020071501963980
[ 3147.870191] usb-storage 1-10:1.0: USB Mass Storage device detected
[ 3147.870759] scsi host6: usb-storage 1-10:1.0
[ 3148.917082] scsi 6:0:0:0: Direct-Access     Linux    UMS disk 0       ffff PQ: 0 ANSI: 2
[ 3148.917372] sd 6:0:0:0: [sdb] 15269888 512-byte logical blocks: (7.82 GB/7.28 GiB)
[ 3148.917492] sd 6:0:0:0: [sdb] Write Protect is off
[ 3148.917493] sd 6:0:0:0: [sdb] Mode Sense: 0f 00 00 00
[ 3148.917618] sd 6:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
[ 3148.932541]  sdb: sdb1 sdb2 < sdb5 sdb6 sdb7 > sdb3 sdb4
[ 3148.933428] sd 6:0:0:0: [sdb] Attached SCSI removable disk
```


[8/31/2022 1:44 AM] Deleted User
my kobo is teasing me


[8/31/2022 1:44 AM] tux_linux
shock?


[8/31/2022 1:44 AM] Deleted User
still no network device


[8/31/2022 1:44 AM] Deleted User
shock?


[8/31/2022 1:44 AM] tux_linux
teasing


[8/31/2022 1:44 AM] Deleted User
like bullying


[8/31/2022 1:45 AM] tux_linux
oh well ok


[8/31/2022 1:45 AM] tux_linux
i thought like a taser


[8/31/2022 1:45 AM] tux_linux
but that doesn't exist in english


[8/31/2022 1:45 AM] tux_linux
anyway


[8/31/2022 1:45 AM] the.mightydill
Nah teasing means taunting


[8/31/2022 1:45 AM] tux_linux
ok well we have one option left


[8/31/2022 1:46 AM] tux_linux
use g_serial


[8/31/2022 1:46 AM] tux_linux
because literally nothing else works


[8/31/2022 1:46 AM] tux_linux
if that doesn't work, i... i... i...


[8/31/2022 1:46 AM] Deleted User
what is g_serial


[8/31/2022 1:47 AM] tux_linux
https://www.kernel.org/doc/Documentation/usb/gadget_serial.txt


[8/31/2022 1:47 AM] the.mightydill
:DuckDuckGo:


[8/31/2022 1:47 AM] the.mightydill
:Google:


[8/31/2022 1:47 AM] the.mightydill
Use


[8/31/2022 1:48 AM] tux_linux
you should learn about compiling your own kernels


[8/31/2022 1:48 AM] tux_linux
do you know a bit about that?


[8/31/2022 1:48 AM] Deleted User
well I did compile a few kernels


[8/31/2022 1:48 AM] Deleted User
for gentoo


[8/31/2022 1:48 AM] tux_linux
genkernel or manual


[8/31/2022 1:48 AM] Deleted User
gentoo sources


[8/31/2022 1:48 AM] Deleted User
the manual one


[8/31/2022 1:48 AM] Deleted User
using the tui


[8/31/2022 1:49 AM] tux_linux
ok


[8/31/2022 1:50 AM] tux_linux
well, clone inkbox kernel repo


[8/31/2022 1:50 AM] tux_linux
https://github.com/Kobo-InkBox/kernel.git

{Embed}
https://github.com/Kobo-InkBox/kernel.git
GitHub - Kobo-InkBox/kernel: Kernel sources for InkBox OS
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[8/31/2022 1:51 AM] Deleted User
yep


[8/31/2022 1:51 AM] Deleted User
done that


[8/31/2022 1:53 AM] tux_linux
```
env GITDIR=/home/build/inkbox/kernel TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf TARGET=arm-nickel-linux-gnueabihf THREADS=$(($(nproc)*2)) scripts/build_kernel.sh n873 root
```


[8/31/2022 2:06 AM] Deleted User
compiling


[8/31/2022 2:06 AM] Deleted User
hopefully it does not fail


[8/31/2022 2:06 AM] the.mightydill
I hope so, too


[8/31/2022 2:07 AM] Deleted User
theres a lot of errors midway in the compile


[8/31/2022 2:07 AM] Deleted User
but the compile is still running


[8/31/2022 2:07 AM] Deleted User
okay now it stopped


[8/31/2022 2:08 AM] the.mightydill
Error message?


[8/31/2022 2:08 AM] Deleted User
let me do it agian


[8/31/2022 2:08 AM] the.mightydill
Or do you mean it finished


[8/31/2022 2:09 AM] Deleted User
no there are errors but i want to try again


[8/31/2022 2:09 AM] the.mightydill
Oh error


[8/31/2022 2:09 AM] the.mightydill
Ok


[8/31/2022 2:09 AM] tux_linux
what is the error


[8/31/2022 2:10 AM] the.mightydill
Yeah that's what I'm asking


[8/31/2022 2:11 AM] Deleted User
it said make error


[8/31/2022 2:11 AM] Deleted User
and it told me to look above


[8/31/2022 2:11 AM] the.mightydill
...oh


[8/31/2022 2:11 AM] Deleted User
thats why im trying agian


[8/31/2022 2:11 AM] Deleted User
how do i pipe the output to a text file


[8/31/2022 2:11 AM] Deleted User
which i can share


[8/31/2022 2:11 AM] Deleted User
actually i can just do a wgetpaste


[8/31/2022 2:12 AM] tux_linux
basic shell redirection?


[8/31/2022 2:12 AM] tux_linux
`command &> file`


[8/31/2022 2:12 AM] tux_linux
attach it here


[8/31/2022 2:12 AM] the.mightydill
`Command >> file`


[8/31/2022 2:12 AM] the.mightydill
No?


[8/31/2022 2:12 AM] tux_linux
no


[8/31/2022 2:12 AM] the.mightydill
Or just one >


[8/31/2022 2:12 AM] tux_linux
no


[8/31/2022 2:12 AM] the.mightydill
...no?


[8/31/2022 2:12 AM] tux_linux
that will only redirect stdout


[8/31/2022 2:12 AM] Deleted User
I thought it was 2&> file


[8/31/2022 2:12 AM] Deleted User
for errors


[8/31/2022 2:12 AM] tux_linux
&> is errors and stdout


[8/31/2022 2:12 AM] the.mightydill
Ohhh ok


[8/31/2022 2:13 AM] tux_linux
¯\_(ツ)_/¯


[8/31/2022 2:17 AM] the.mightydill
Anything?


[8/31/2022 2:18 AM] Deleted User


{Attachments}
/mnt/data/projects/git/conversations/media/log-58E2D


[8/31/2022 2:18 AM] Deleted User
here


[8/31/2022 2:18 AM] Deleted User
i think there is an ownership issue


[8/31/2022 2:19 AM] the.mightydill
Doas


[8/31/2022 2:19 AM] Deleted User
but will that matter?


[8/31/2022 2:19 AM] Deleted User
i did use doas


[8/31/2022 2:19 AM] Deleted User
as this was not my home directory


[8/31/2022 2:19 AM] the.mightydill
Oh


[8/31/2022 2:19 AM] tux_linux
BC      kernel/time/timeconst.h
/bin/sh: 1: bc: not found


[8/31/2022 2:19 AM] tux_linux
did you... read it?


[8/31/2022 2:19 AM] Deleted User
i uploaded it as soon as i got it


[8/31/2022 2:19 AM] tux_linux
well now you know what to do


[8/31/2022 2:19 AM] the.mightydill
Oh uh shit


[8/31/2022 2:20 AM] Deleted User
alright lets gooo


[8/31/2022 2:20 AM] the.mightydill
Huh


[8/31/2022 2:20 AM] the.mightydill
Well I'm just confused


[8/31/2022 2:22 AM] the.mightydill
But isn't that like a big big problem??


[8/31/2022 2:23 AM] tux_linux
you should learn how to use google too \;)


[8/31/2022 2:24 AM] the.mightydill
True but I'm on a phone and not at home and my mom is asking for her phone back

{Reactions}
👍 

[8/31/2022 2:24 AM] the.mightydill
Lmao


[8/31/2022 2:25 AM] Deleted User
wait that was quick


[8/31/2022 2:25 AM] Deleted User
it takes like 5 mins to compile


[8/31/2022 2:25 AM] Deleted User
its done


[8/31/2022 2:26 AM] Deleted User
i got myself a zImage-root


[8/31/2022 2:28 AM] tux_linux
now you need to
```
cd kernel/linux-4.1.15-libra/
PATH="${PATH}:${PWD}/toolchain/arm-nickel-linux-gnueabihf/bin/" make ARCH=arm CROSS_COMPILE=arm-nickel-linux-gnueabihf- dtbs
```


[8/31/2022 2:29 AM] tux_linux
```
mkbootimg --base 0x84800000 --kernel ../out/n873/zImage-root --dtb arch/arm/boot/dts/imx6sll-e70k02.dtb -o libra.img
```
then you have `libra.img`


[8/31/2022 2:29 AM] tux_linux
test it and see if there is the same behavior


[8/31/2022 2:29 AM] tux_linux
if yes, then we can continue debugging on your end


[8/31/2022 2:34 AM] Deleted User
this is wierd


[8/31/2022 2:56 AM] Deleted User
sorry my internet died


[8/31/2022 2:56 AM] Deleted User
```
make: arm-nickel-linux-gnueabihf-dtbsgcc: No such file or directory
  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[1]: 'include/generated/mach-types.h' is up to date.
  CC      kernel/bounds.s
/bin/sh: 1: arm-nickel-linux-gnueabihf-dtbsgcc: not found
make[1]: *** [Kbuild:44: kernel/bounds.s] Error 127
make: *** [Makefile:990: prepare0] Error 2```


[8/31/2022 2:56 AM] Deleted User
this was the error im getting but i just think doas is not using the path


[8/31/2022 2:56 AM] Deleted User
so i will try to chang this


[8/31/2022 2:57 AM] tux_linux
there is a space


[8/31/2022 2:57 AM] tux_linux
it is not a typo


[8/31/2022 3:03 AM] Deleted User
```
PATH="${PATH}:${PWD}/toolchain/arm-nickel-linux-gnueabihf/bin/" doas make ARCH=arm CROSS_COMPILE=arm-nickel-linux-gnueabihf- dtbs
doas (tohka@kotori) password:
make: arm-nickel-linux-gnueabihf-gcc: No such file or directory
  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[1]: 'include/generated/mach-types.h' is up to date.
  CC      kernel/bounds.s
/bin/sh: 1: arm-nickel-linux-gnueabihf-gcc: not found
make[1]: *** [Kbuild:44: kernel/bounds.s] Error 127
make: *** [Makefile:990: prepare0] Error 2```


[8/31/2022 3:05 AM] tux_linux
`doas chown -R "${USER}:${USER}" /home/build/inkbox/kernel`


[8/31/2022 3:05 AM] tux_linux
oh and change


[8/31/2022 3:06 AM] tux_linux
```
PATH="${PATH}:/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf/bin/" make ARCH=arm CROSS_COMPILE=arm-nickel-linux-gnueabihf- dtbs
```
sorry


[8/31/2022 3:06 AM] tux_linux
you need to put the kernel repo at `/home/build/inkbox/kernel`


[8/31/2022 3:10 AM] Deleted User
oh lol


[8/31/2022 3:10 AM] Deleted User
i already did that


[8/31/2022 3:11 AM] Deleted User
the kernel repo part


[8/31/2022 3:11 AM] Deleted User
I will do the others

{Reactions}
👍 

[8/31/2022 3:12 AM] Deleted User
its doing it


[8/31/2022 3:12 AM] Deleted User
done


[8/31/2022 3:13 AM] Deleted User
I am running the command


[8/31/2022 3:13 AM] Deleted User
```
mkbootimg --base 0x84800000 --kernel ../out/n873/zImage-root --dtb arch/arm/boot/dts/imx6sll-e70k02.dtb -o libra.img```


[8/31/2022 3:13 AM] Deleted User
however there is no error


[8/31/2022 3:14 AM] Deleted User
oh its done


[8/31/2022 3:14 AM] Deleted User
i got myself a libra.img


[8/31/2022 3:14 AM] Deleted User
i will flash into it


[8/31/2022 3:15 AM] tux_linux
*boot into it


[8/31/2022 3:17 AM] Deleted User
yes


[8/31/2022 3:19 AM] Deleted User
```
[ 8839.641229] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[ 8839.641244] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[ 8865.456150] usb 1-10: new high-speed USB device number 41 using xhci_hcd
[ 8865.582350] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 8865.582669] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 8865.582671] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 8865.582672] usb 1-10: Product: USB download gadget
[ 8865.582672] usb 1-10: Manufacturer: FSL
[ 8865.582673] usb 1-10: SerialNumber: 1872020071501963980
[ 8866.783751] usb 1-10: USB disconnect, device number 41
```


[8/31/2022 3:20 AM] Deleted User
this is what i see


[8/31/2022 3:20 AM] Deleted User
after booting into it with flashboot boot libra.img


[8/31/2022 3:48 AM] Deleted User
I think I will call it a day


[8/31/2022 3:52 AM] tux_linux
yes, I might get more debugging motivation tomorrow...


[8/31/2022 3:53 AM] Deleted User
should I upload my libra.img here?


[8/31/2022 3:53 AM] tux_linux
no


[8/31/2022 3:53 AM] Deleted User
alright


[8/31/2022 3:53 AM] tux_linux
i trust you


[8/31/2022 3:54 AM] Deleted User
no i mean like if you wanted to do anything with it or something


[8/31/2022 3:55 AM] tux_linux
no it's ok
can't do much with it


[8/31/2022 3:55 AM] Deleted User
is it the exact same libra.img you sent me


[8/31/2022 3:55 AM] Deleted User
what is the differnece


[8/31/2022 3:55 AM] tux_linux
you compiled it


[8/31/2022 3:55 AM] tux_linux
I wanted to see if there were no network errors


[8/31/2022 3:58 AM] Deleted User
ohhh


[8/31/2022 3:58 AM] Deleted User
make sense


[8/31/2022 3:58 AM] Deleted User
so I did it the gentoo way huh

{Reactions}
👍 

[8/31/2022 2:08 PM] tux_linux
I think I made a mistake here
I realized that while updating InkBox on my Libra this morning
Apparently the zImage-inkbox needs to be in `[p1]/zImage-inkbox`, simply, not in any subdirectory


[8/31/2022 3:18 PM] Deleted User
oh


[8/31/2022 5:31 PM] Deleted User
```
[ 3205.577773] sd 6:0:0:0: [sdb] Synchronizing SCSI cache
[ 3205.577790] sd 6:0:0:0: [sdb] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK
[ 3223.817856] usb 1-10: new high-speed USB device number 13 using xhci_hcd
[ 3223.944268] usb 1-10: config 1 interface 0 altsetting 0 bulk endpoint 0x81 has invalid maxpacket 64
[ 3223.944594] usb 1-10: New USB device found, idVendor=18d1, idProduct=0d02, bcdDevice= 2.21
[ 3223.944597] usb 1-10: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[ 3223.944599] usb 1-10: Product: USB download gadget
[ 3223.944600] usb 1-10: Manufacturer: FSL
[ 3223.944601] usb 1-10: SerialNumber: 1872020071501963980
[ 3225.067023] usb 1-10: USB disconnect, device number 13
```


[8/31/2022 5:32 PM] Deleted User
after i moved that and removed the boot


[8/31/2022 5:32 PM] Deleted User
the /mnt/boot


[8/31/2022 5:32 PM] Deleted User
I got this dmesg


[8/31/2022 5:45 PM] tux_linux
Did you put the zimage in the root of that partition?


[8/31/2022 5:45 PM] tux_linux
With the name zImage-inkbox


[8/31/2022 6:52 PM] Deleted User
cp zImage-root /mnt/zImage-inkbox


[8/31/2022 6:55 PM] the.mightydill
if p1 is mounted on /mnt then yes


[8/31/2022 6:55 PM] Deleted User
yh


[8/31/2022 7:09 PM] Deleted User
This is /dev/sdb1 
```
/mnt
├── flags
│   ├── BOOT_USB_DEBUG
│   └── DISPLAY_DEBUG
├── lost+found  [error opening dir]
└── zImage-inkbox```


[8/31/2022 7:10 PM] Deleted User
This is /dev/sdb3


[8/31/2022 7:10 PM] Deleted User
```
/mnt
├── overlaymount-rootfs.squashfs
├── overlaymount-rootfs.squashfs.dgst
├── rootfs.squashfs
└── rootfs.squashfs.dgst

0 directories, 4 files```


[8/31/2022 7:11 PM] Deleted User
This is /dev/sdb5


[8/31/2022 7:11 PM] Deleted User
```
/mnt
├── lost+found  [error opening dir]
├── overlaymount-rootfs.squashfs
└── overlaymount-rootfs.squashfs.dgst

1 directory, 2 files```


[8/31/2022 7:12 PM] Deleted User
for /dev/sdb2 I can't mount it because it because of the error:


[8/31/2022 7:12 PM] Deleted User
```
mount: /mnt: mount(2) system call failed: Cannot allocate memory.
       dmesg(1) may have more information after failed mount system call.```


[8/31/2022 7:13 PM] Deleted User
This is /dev/sdb4
```
/mnt
├── config
│   ├── 01-demo
│   │   └── config
│   ├── 02-clock
│   │   └── config
│   ├── 03-brightness
│   ├── 04-book
│   ├── 05-quote
│   │   ├── config
│   │   ├── quote
│   │   └── quote.sh
│   ├── 06-words
│   ├── 07-words_number
│   │   └── config
│   ├── 08-recent_books
│   ├── 09-dpi
│   │   ├── config
│   │   └── config-enabled
│   ├── 10-dark_mode
│   │   └── config
│   └── 15-sleep_timeout
│       └── config
├── gui_rootfs
│   ├── read
│   ├── work
│   └── write
├── gui_rootfs.isa
├── gui_rootfs.isa.dgst
├── lost+found  [error opening dir]
├── onboard
├── tmpfs
├── update
│   └── update.isa
└── X11
    ├── base.img
    ├── extensions-base.img
    ├── extensions-user.img
    └── rootfs
        ├── work
        └── write

23 directories, 17 files```


[8/31/2022 7:16 PM] Deleted User
the /dev/sdb6 doesn't have anything inside it just has a lost and found


[8/31/2022 7:16 PM] Deleted User
likewise with /dev/sdb7


[8/31/2022 7:16 PM] Deleted User
hopefully this can help in some way


[8/31/2022 7:23 PM] the.mightydill
yeah tux is at school right now


[8/31/2022 7:23 PM] Deleted User
damn he is a student?


[8/31/2022 7:24 PM] the.mightydill
yeah


[8/31/2022 7:24 PM] the.mightydill
high school


[8/31/2022 7:24 PM] the.mightydill
:P


[8/31/2022 7:24 PM] Deleted User
prodigy


[8/31/2022 7:24 PM] the.mightydill
exactly


[8/31/2022 7:24 PM] Deleted User
I hope he continues to go down the path of open source

{Reactions}
👍 

[8/31/2022 7:24 PM] Deleted User
I look forward to his career


[8/31/2022 7:24 PM] the.mightydill
me too


[8/31/2022 8:40 PM] Deleted User
Could there be something wrong with the u-boot.mmc and its not actually reverting back to the normal boot process in order to boot correctly into the libra.img


[8/31/2022 10:09 PM] tux_linux
I wouldn't think so


[8/31/2022 10:10 PM] Deleted User
what can i do now


[8/31/2022 10:14 PM] tux_linux
I don't know


[8/31/2022 10:14 PM] Deleted User
How would I restore from the backup I made btw


[8/31/2022 10:14 PM] tux_linux
I already told you


[8/31/2022 10:15 PM] tux_linux
.


[8/31/2022 10:16 PM] tux_linux
Nothing appeared on the screen?


[8/31/2022 10:16 PM] tux_linux
Did it flash once, then 10 sec pause and then another flash?


[8/31/2022 10:17 PM] Deleted User
wait one sec let me do that command


[8/31/2022 10:17 PM] tux_linux
No????


[8/31/2022 10:17 PM] tux_linux
Don't restore it now!!


[8/31/2022 10:18 PM] tux_linux
Also what's the behavior of the power light?


[8/31/2022 10:19 PM] Deleted User
ohhhh


[8/31/2022 10:19 PM] Deleted User
alright


[8/31/2022 10:19 PM] Deleted User
the flashing flash thing is


[8/31/2022 10:19 PM] Deleted User
a steady rate


[8/31/2022 10:19 PM] Deleted User
flash stop 1 sec flash stop


[8/31/2022 10:19 PM] Deleted User
repeat


[8/31/2022 10:20 PM] tux_linux
And it stays like that forever


[8/31/2022 10:20 PM] tux_linux
Right?


[8/31/2022 10:20 PM] tux_linux
Also this


[8/31/2022 10:20 PM] Deleted User
yeah


[8/31/2022 10:20 PM] Deleted User
it stays like that forever


[8/31/2022 10:20 PM] Deleted User
what do you mean


[8/31/2022 10:21 PM] Deleted User
like did this ever happen?


[8/31/2022 10:21 PM] Deleted User
yeah it probably did


[8/31/2022 10:21 PM] tux_linux
Can you take a video of the complete boot process?


[8/31/2022 10:22 PM] Deleted User
from power off to power on with the fastboot boot libra.img?


[8/31/2022 10:22 PM] Deleted User
with the non ums-boot env


[8/31/2022 10:22 PM] tux_linux
Yes


[8/31/2022 10:23 PM] tux_linux
Thanks


[8/31/2022 10:23 PM] Deleted User
no worries


[8/31/2022 10:23 PM] Deleted User
I will do that

{Reactions}
👍 

[8/31/2022 10:30 PM] Deleted User
one sec


[8/31/2022 10:32 PM] Deleted User
https://0x0.st/oppf.mp4


[8/31/2022 10:33 PM] Deleted User
this was me holding the power off button for like 20 seconds


[8/31/2022 10:33 PM] Deleted User
and this probably is it rebooting


[8/31/2022 10:33 PM] Deleted User
because it doesn't just power off if that makes sense


[8/31/2022 11:13 PM] andi15701
you need to put the u-boot.mmc on top of it


[8/31/2022 11:14 PM] andi15701
if you want to restore everthing


[8/31/2022 11:14 PM] the.mightydill
if it doesnt power off, just hold the power button for a few years or so


[8/31/2022 11:15 PM] andi15701
so backup is copying the image back to /dev/sdb and then put the  u-boot.mmc back


[8/31/2022 11:15 PM] the.mightydill
yeah


[8/31/2022 11:16 PM] Deleted User
alright


[8/31/2022 11:16 PM] Deleted User
but yeah im waiting for tux to see the video


[8/31/2022 11:16 PM] Deleted User
i still think its possible for this to work


[8/31/2022 11:44 PM] tux_linux
wait, the screen isn't even refreshing? that's a big problem


[9/1/2022 12:32 AM] Deleted User
oh


[9/1/2022 12:32 AM] Deleted User
damn well let me see if it does refresh


[9/1/2022 12:35 AM] szybet
can you make your username smaller?


[9/1/2022 12:35 AM] szybet
🥴


[9/1/2022 12:39 AM] Deleted User
done


[9/1/2022 2:30 AM] Deleted User
yeah the screen does not refresh


[9/1/2022 2:31 AM] tux_linux
well, this is a mess


[9/1/2022 2:32 AM] Deleted User
hang on let me test out one more thing


[9/1/2022 2:32 AM] Deleted User
i will record it


[9/1/2022 2:35 AM] Deleted User
alright so during the entire process


[9/1/2022 2:35 AM] Deleted User
of going from andis method


[9/1/2022 2:35 AM] Deleted User
to fasboot boot libra.img


[9/1/2022 2:35 AM] Deleted User
the screen does not refresh


[9/1/2022 2:35 AM] Deleted User
it used to do that i dont knwo what changed


[9/1/2022 2:37 AM] Deleted User
could this have anything to do with the serial connections being messed up


[9/1/2022 2:37 AM] tux_linux
maybe?


[9/1/2022 2:37 AM] Deleted User
should I try resetting it to see if it can go back to normal


[9/1/2022 2:37 AM] Deleted User
and the stuff is actualy working


[9/1/2022 2:37 AM] tux_linux
you won't be able to reset it


[9/1/2022 2:37 AM] Deleted User
how comes


[9/1/2022 2:37 AM] Deleted User
didnt we make a backup


[9/1/2022 2:37 AM] tux_linux
you will need to restore it manually


[9/1/2022 2:37 AM] tux_linux
yes


[9/1/2022 2:38 AM] tux_linux
but you will write 8g of data to the emmc
which is not something you want to do often


[9/1/2022 2:38 AM] Deleted User
yeah so cant we do xzcat backup-libra.xz | sudo dd of=/dev/sdb bs=512 status=progress


[9/1/2022 2:38 AM] Deleted User
ah


[9/1/2022 2:38 AM] tux_linux
https://en.wikipedia.org/wiki/Wear_leveling#Rationale

{Embed}
https://en.wikipedia.org/wiki/Wear_leveling
Wear leveling
Wear leveling (also written as wear levelling) is a technique for prolonging the service life of some kinds of erasable computer storage media, such as flash memory, which is used in solid-state drives (SSDs) and USB flash drives, and phase-change memory. There are several wear leveling mechanisms that provide varying levels of longevity enhance...


[9/1/2022 2:38 AM] Deleted User
i never did that before so do you think it would be a bad thing


[9/1/2022 2:39 AM] Deleted User
like i dont have many reads and writes on this kobo


[9/1/2022 2:39 AM] Deleted User
other than what we did


[9/1/2022 2:39 AM] tux_linux
I would restore it step-by-step, not by dumping the whole backup back


[9/1/2022 2:39 AM] tux_linux
that way you only write ~500M instead of 8G


[9/1/2022 2:39 AM] Deleted User
I am not sure on how to do that


[9/1/2022 2:39 AM] Deleted User
have you done it before?


[9/1/2022 2:40 AM] tux_linux
partition the device like it was before
format partitions
then extract your backup's partition data to them


[9/1/2022 2:40 AM] tux_linux
mainly p1 and p2


[9/1/2022 2:40 AM] Deleted User
i remember there being 3 partitions


[9/1/2022 2:41 AM] Deleted User
but i dont remember the exact split


[9/1/2022 2:41 AM] Deleted User
sector wise etc


[9/1/2022 2:41 AM] tux_linux
just fdisk -l your backup image


[9/1/2022 2:42 AM] Deleted User
is it xzcat backup.xz > libra.img


[9/1/2022 2:42 AM] Deleted User
?


[9/1/2022 2:42 AM] Deleted User
and then fdisk -l libra.img


[9/1/2022 2:43 AM] tux_linux
`/tmp/libra.img`
or you can wear your ssd (well, do ensure `/tmp` is actually a mounted tmpfs)


[9/1/2022 2:43 AM] tux_linux
yes


[9/1/2022 2:44 AM] Deleted User
how can i check if /tmp is tmpfs


[9/1/2022 2:44 AM] tux_linux
`df -h`


[9/1/2022 2:45 AM] Deleted User
tmpfs is on shm run and tmp


[9/1/2022 2:45 AM] tux_linux
will display something like this
```
tmpfs                                    6.0G   38M  6.0G   1% /tmp
```


[9/1/2022 2:45 AM] Deleted User
yes


[9/1/2022 2:45 AM] tux_linux
do you have swap enabled?


[9/1/2022 2:45 AM] Deleted User
i have 16gb on tmpfs for some reason


[9/1/2022 2:45 AM] Deleted User
why isnt it 32


[9/1/2022 2:45 AM] tux_linux
how much ram do you have


[9/1/2022 2:45 AM] Deleted User
32


[9/1/2022 2:45 AM] tux_linux
it sets it by default to 50%


[9/1/2022 2:46 AM] Deleted User
ah


[9/1/2022 2:46 AM] tux_linux
I have 32G too but I set it manually to 6G


[9/1/2022 2:46 AM] Deleted User
nice


[9/1/2022 2:46 AM] Deleted User
thanks for the advice

{Reactions}
👍 

[9/1/2022 2:50 AM] Deleted User
```
Disk /tmp/libra.img: 7.28 GiB, 7818182656 bytes, 15269888 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00000000

Device          Boot   Start      End  Sectors  Size Id Type
/tmp/libra.img1        49152   573440   524289  256M 83 Linux
/tmp/libra.img2       573441  1097729   524289  256M 83 Linux
/tmp/libra.img3      1097730 15237118 14139389  6.7G  b W95 FAT32```


[9/1/2022 2:50 AM] tux_linux
`losetup -P -f --show /tmp/libra.img`


[9/1/2022 2:51 AM] Deleted User
so do i just write to the 1 and 2 normally but then do the dd in small parts for the last one


[9/1/2022 2:51 AM] tux_linux
you don't even have to do a dd


[9/1/2022 2:51 AM] Deleted User
what does that do


[9/1/2022 2:51 AM] Deleted User
this comand


[9/1/2022 2:51 AM] tux_linux
the last one can just be formatted as vfat


[9/1/2022 2:51 AM] Deleted User
it did something /dev/loop0


[9/1/2022 2:51 AM] tux_linux
sets up a loop device so you can mount partitions


[9/1/2022 2:51 AM] Deleted User
i beg your pardon 😳


[9/1/2022 2:52 AM] tux_linux
you can mount `/dev/loop0p1` for p1


[9/1/2022 2:52 AM] Deleted User
so i can mount it and access the contents?


[9/1/2022 2:52 AM] Deleted User
thats so cool


[9/1/2022 2:53 AM] Deleted User
how do i copy over the 1 and 2 to the kindles partitions


[9/1/2022 2:53 AM] Deleted User
and you always tell me not to create a new partition table on the kindle why was taht


[9/1/2022 2:54 AM] tux_linux
kindle?


[9/1/2022 2:55 AM] tux_linux
just delete the partitions and recreate the partition layout with exact sector numbering


[9/1/2022 2:55 AM] Deleted User
kobo


[9/1/2022 2:55 AM] Deleted User
lol


[9/1/2022 2:55 AM] tux_linux
with fdisk


[9/1/2022 2:55 AM] Deleted User
yeah ofc


[9/1/2022 2:55 AM] Deleted User
i was just wondering like


[9/1/2022 2:55 AM] Deleted User
why couldnt i make a new mbr


[9/1/2022 2:55 AM] Deleted User
does it just ruin everything


[9/1/2022 2:55 AM] tux_linux
i don't know if it overwrites some crucial boot thing


[9/1/2022 2:55 AM] tux_linux
and i don't want to try


[9/1/2022 2:55 AM] Deleted User
ohh


[9/1/2022 2:56 AM] Deleted User
and i just do dd if=/dev/loop0p1 of=/dev/sdb1


[9/1/2022 2:56 AM] Deleted User
status=progress etc


[9/1/2022 2:56 AM] tux_linux
maybe


[9/1/2022 2:56 AM] tux_linux
usually I tar up the partition and tar it on the device afterwards


[9/1/2022 2:57 AM] tux_linux
`tar cvf ../part.tar /mnt`
`tar -xvf part.tar -C /mnt`


[9/1/2022 2:57 AM] Deleted User
oh


[9/1/2022 2:57 AM] Deleted User
that is also smart


[9/1/2022 3:23 AM] Deleted User
so I have done all of that


[9/1/2022 3:23 AM] Deleted User
nwo what do i do


[9/1/2022 3:23 AM] Deleted User
just reboot?


[9/1/2022 3:23 AM] tux_linux
did you format partitions as ext4 and the 3rd one as vfat?


[9/1/2022 3:23 AM] Deleted User
yes


[9/1/2022 3:23 AM] tux_linux
sync and reboot


[9/1/2022 3:23 AM] Deleted User
fastboot?


[9/1/2022 3:23 AM] Deleted User
or just normal


[9/1/2022 3:23 AM] tux_linux
you did not overwrite the first unpartitioned space


[9/1/2022 3:24 AM] tux_linux
right


[9/1/2022 3:24 AM] tux_linux
normal


[9/1/2022 3:24 AM] Deleted User
what do you mean the first unpartitioned space


[9/1/2022 3:24 AM] Deleted User
you mean the sector ?


[9/1/2022 3:24 AM] Deleted User
how do i remove the devloop stuff btw


[9/1/2022 3:24 AM] tux_linux
`losetup -d /dev/loop0`


[9/1/2022 3:24 AM] tux_linux
you wrote only to the partitions


[9/1/2022 3:25 AM] Deleted User
yeah i only wrote to the partitions that i made


[9/1/2022 3:26 AM] tux_linux
ok


[9/1/2022 3:26 AM] Deleted User
okay nothing is happeneing


[9/1/2022 3:26 AM] Deleted User
solid white led


[9/1/2022 3:26 AM] Deleted User
white screen


[9/1/2022 3:26 AM] tux_linux
did you flash back the env


[9/1/2022 3:26 AM] Deleted User
which one


[9/1/2022 3:26 AM] tux_linux
to boot normal


[9/1/2022 3:26 AM] Deleted User
the dd stuff?


[9/1/2022 3:27 AM] Deleted User
dd if=u-boot.mmc bs=128K seek=6 of=/dev/sdb


[9/1/2022 3:27 AM] Deleted User
how did andi even figure this out damn


[9/1/2022 3:27 AM] tux_linux
yes


[9/1/2022 3:28 AM] Deleted User
SCRFEEN JUST FLICKERSED


[9/1/2022 3:28 AM] tux_linux
ok


[9/1/2022 3:28 AM] Deleted User
IT SHOWS the reset circle


[9/1/2022 3:28 AM] tux_linux
?


[9/1/2022 3:28 AM] Deleted User
it reset


[9/1/2022 3:29 AM] Deleted User
thank you for the journey tux

{Reactions}
👍 

[9/1/2022 3:29 AM] Deleted User
i have learnt a lot


[9/1/2022 3:29 AM] Deleted User
it was my fault for not making this work


[9/1/2022 3:29 AM] Deleted User
hopefully we can figure this out


[9/1/2022 3:29 AM] Deleted User
but for now atleast we know the screen isnt busted


[9/1/2022 3:29 AM] Deleted User
which i was afraid i did


[9/1/2022 3:29 AM] tux_linux
yea


[9/1/2022 3:29 AM] Deleted User
so it was weird that the screen didnt flicker before


[9/1/2022 3:30 AM] Deleted User
maybe i did something long


[9/1/2022 3:30 AM] Deleted User
Is it cool if I read back and collect all the information that you guys gave me put it into an md file

{Reactions}
👍 

[9/1/2022 3:30 AM] Deleted User
and then share it with you guys


[9/1/2022 3:30 AM] Deleted User
and maybe try making some script to do it


[9/1/2022 3:30 AM] Deleted User
because it might be something along the way that i messed up


[9/1/2022 3:34 AM] Deleted User
Also I wanted to ask since you are in high school where did you learn all of this stuff


[9/1/2022 3:35 AM] Deleted User
would you recommend me anything


[9/1/2022 3:36 AM] tux_linux
by myself


[9/1/2022 3:36 AM] Deleted User
yeah I mean the resources


[9/1/2022 3:36 AM] tux_linux
start from scratch and learn on the way


[9/1/2022 3:37 AM] tux_linux
this isn't a good way to learn
since you write plenty of sacrilegious code from the beginning
but it worked for me


[9/1/2022 3:37 AM] tux_linux
and I write less sacrilegious code now 🙂


[9/1/2022 4:03 AM] Deleted User
big oof


[9/1/2022 4:03 AM] Deleted User
i mean about linux kernel stuff


[9/1/2022 4:12 AM] tux_linux
by studying the code


[9/1/2022 4:12 AM] tux_linux
when bugs appeared


[9/1/2022 5:34 AM] Deleted User
Ahh


[9/1/2022 5:34 AM] Deleted User
thank you

{Reactions}
👍 

[9/2/2022 12:52 AM] the.mightydill
btw i am too


[9/2/2022 12:52 AM] the.mightydill
although i dont contribute to inkbox, i'm just here for the ride :P


[9/2/2022 1:15 AM] Deleted User
haha


[9/2/2022 1:15 AM] Deleted User
thats still cool


==============================================================
Exported 4,259 message(s)
==============================================================
