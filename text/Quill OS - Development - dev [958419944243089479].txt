==============================================================
Guild: Quill OS
Channel: Development / dev
==============================================================

[3/29/2022 7:40 PM] szybet
can i simply widget.show() and something like this appears or is something other needed?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9B147.png


[3/29/2022 7:40 PM] szybet
becouse it shows it as another xorg window


[3/29/2022 8:51 PM] tux_linux
Yeah it works
But you should use showFullScreen


[3/29/2022 8:54 PM] szybet
for the smaller window?


[3/29/2022 10:37 PM] tux_linux
Otherwise it will show strangely


[3/31/2022 3:26 PM] szybet
I think i need for sanki a system package with sqlite library


[3/31/2022 3:26 PM] szybet
And this will be a problem


[3/31/2022 3:28 PM] szybet
Or maybe not?


[3/31/2022 3:34 PM] szybet
Idk👀


[3/31/2022 7:41 PM] tux_linux
The GUI rootfs doesn't have any package manager
Neither is it something we can modify


[3/31/2022 7:41 PM] tux_linux
Maybe we can add a lib directly in the update.isa package


[4/11/2022 8:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A783C.png


[4/11/2022 8:29 PM] szybet
wtf


[4/11/2022 8:29 PM] tux_linux
What's that doing there


[4/11/2022 8:29 PM] szybet
i tryied compiling an app from the guy that created the docker image


[4/11/2022 8:29 PM] szybet
and i try to launch it


[4/11/2022 8:30 PM] szybet
and i got the weirdest error ever


[4/11/2022 8:30 PM] tux_linux
You don't have the appropriate glibc


[4/11/2022 8:30 PM] szybet
?


[4/11/2022 8:30 PM] tux_linux
Try it in the /kobo chroot


[4/11/2022 8:30 PM] tux_linux
Search what a libc is


[4/11/2022 8:30 PM] szybet
`chroot /kobo`?


[4/11/2022 8:31 PM] tux_linux
Yes


[4/11/2022 8:31 PM] tux_linux
You also have to give it the path of Qt libs


[4/11/2022 8:31 PM] szybet
i know, you have diffrent glibc in inkbox?


[4/11/2022 8:31 PM] tux_linux
Yes, the main system is musl


[4/11/2022 8:32 PM] szybet
`chroot: failed to run command ‘/bin/ash’: No such file or directory`


[4/11/2022 8:32 PM] tux_linux
bin sh


[4/11/2022 8:32 PM] tux_linux
`chroot /kobo /bin/sh`


[4/11/2022 8:33 PM] tux_linux
`env LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib QT_QPA_PLATFORM=kobo ./UltimateMangaReader`


[4/11/2022 8:33 PM] szybet
```
kobo:/# chroot /kobo /bin/sh
chroot: failed to run command ‘/bin/sh’: No such file or directory
kobo:/# ls
UltimateMangaReader  include              opt                  sys
bin                  kobo                 proc                 tmp
boot                 lib                  root                 usr
data                 libexec              run                  var
dev                  lost+found           sbin                 xorg
etc                  media                selinux
home                 mnt                  share
idk                  modules              srv
kobo:/# ls kobo/
mnt  opt
kobo:/# 
```


[4/11/2022 8:33 PM] szybet
nope


[4/11/2022 8:33 PM] tux_linux
is inkbox_gui started?


[4/11/2022 8:34 PM] szybet
no... i disabled it becouse another app will use the e-ink ._.


[4/11/2022 8:34 PM] tux_linux
you can just do `killall inkbox-bin`


[4/11/2022 8:34 PM] tux_linux
and keep the service started


[4/11/2022 8:34 PM] szybet
ok :|


[4/11/2022 8:34 PM] tux_linux
otherwise it auto-umounts the chroot


[4/11/2022 8:36 PM] szybet
```
kobo:/# env LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib QT_QPA_PLATFORM=k
obo ./UltimateMangaReader
./UltimateMangaReader: /mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by ./UltimateMangaReader)
kobo:/# 
```


[4/11/2022 8:36 PM] szybet
oh no...


[4/11/2022 8:37 PM] tux_linux
```
env LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib QT_QPA_PLATFORM=kobo /mnt/onboard/.adds/inkbox/inkbox-bin
```
If you try that, does it give the same error?


[4/11/2022 8:38 PM] szybet
it launches inkbox but it cuts off half the screen


[4/11/2022 8:41 PM] szybet
so now what


[4/11/2022 8:49 PM] tux_linux
it's an issue with the glibc used with the toolchain


[4/11/2022 8:50 PM] tux_linux
i can send you my toolchain setup


[4/11/2022 8:56 PM] tux_linux
First get those files:
http://166.62.241.240:500/stuff/qt-bin.sqsh
http://166.62.241.240:500/stuff/x-tools.sqsh
http://166.62.241.240:500/stuff/koxtoolchain.sqsh
Tell me when you have got them


[4/11/2022 8:58 PM] szybet
okay, im downloading them


[4/11/2022 9:00 PM] szybet
got them


[4/11/2022 9:01 PM] tux_linux
Extract x-tools.sqsh to a folder named `x-tools` in your home directory
Extract qt-bin.sqsh to a folder named `qt-bin` in your home directory
Extract koxtoolchain.sqsh wherever you want


[4/11/2022 9:05 PM] tux_linux
Then, to compile a Qt project, InkBox for example:
Make sure you're using bash
```
source /koxtoolchain/dir/path/refs/x-compile.sh kobo env
export PATH="${PATH}:${HOME}/qt-bin/qt-linux-5.15.2-kobo/bin"
cd /inkbox/repo
qmake .
make
```


[4/11/2022 9:06 PM] szybet
thats it?


[4/11/2022 9:06 PM] tux_linux
yeah


[4/11/2022 9:06 PM] tux_linux
well if you want to set up qtcreator for it it's a bit more complicated


[4/11/2022 9:06 PM] tux_linux
but that's how to compile the basic way


[4/11/2022 9:07 PM] szybet
qt-creator + your emulator?


[4/11/2022 9:07 PM] szybet
automatic launch in it?


[4/11/2022 9:07 PM] szybet
well, describe your emulator how to do it


[4/11/2022 9:08 PM] szybet
i can creqtor figure out by myself


[4/11/2022 9:10 PM] tux_linux
You want to use the emulator?


[4/11/2022 9:10 PM] tux_linux
No


[4/11/2022 9:11 PM] szybet
yes


[4/11/2022 9:11 PM] tux_linux
I use that command to speed things up when testing
```
rm /tmp/inkbox; wget 192.168.2.1:8000/inkbox -O /tmp/inkbox; chmod +x /tmp/inkbox; umount -l -f /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; mount --bind /tmp/inkbox /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; killall inkbox-bin inkbox inkbox.sh; env QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh
```


[4/11/2022 9:12 PM] tux_linux
My computer is serving the build dir via http


[4/11/2022 9:18 PM] szybet
so the emulator is not good for testing?


[4/11/2022 9:18 PM] tux_linux
Yes


[4/11/2022 9:19 PM] tux_linux
But it's as good as a real device


[4/11/2022 9:19 PM] tux_linux
Like, there's no automated pairing or anything


[4/11/2022 9:19 PM] tux_linux
It's helpful when you travel and don't want to bring your Kobo for some reason


[4/11/2022 9:19 PM] tux_linux
I run it on my ThinkPad


[4/11/2022 9:22 PM] szybet
`/mnt/HDD/Project/Public/sanki/libs/zip/build//libzip.so: file not recognized: file format not recognized`


[4/11/2022 9:22 PM] szybet
crap


[4/11/2022 9:22 PM] tux_linux
Huh?


[4/11/2022 9:22 PM] szybet
i need to compile it for arm?


[4/11/2022 9:22 PM] szybet
a library


[4/11/2022 9:22 PM] tux_linux
Probably yeah


[4/11/2022 9:26 PM] szybet
$ mkdir build
$ cd build
$ cmake -DBUILD_SHARED_LIBS=true ..
$ cmake --build .

crap x2


[4/11/2022 9:26 PM] szybet
its cmake


[4/11/2022 9:28 PM] tux_linux
Good luck 😂


[4/11/2022 9:28 PM] tux_linux
The joys of cross compiling


[4/11/2022 9:29 PM] tux_linux
I think you share @NiLuJe 's opinion about cross compiling and cmake...


[4/11/2022 9:29 PM] szybet
no, its a cpp thing. for rust its propably only one command diffrent :(


[4/11/2022 9:30 PM] szybet
cross compiling my scripts for an old asus tablet was 2 commands


[4/11/2022 9:34 PM] szybet
```
CC=/home/szybet/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc-7.5.0 CXX=/home/szybet/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-g++
```
this was too easy, it will not work


[4/11/2022 9:35 PM] szybet
```
-- Check for working C compiler: /home/szybet/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc-7.5.0 - skipped
```

{Reactions}
😂 

[4/11/2022 9:35 PM] szybet
XD


[4/11/2022 10:02 PM] szybet
fuck it


[4/11/2022 10:02 PM] szybet
i hate this


[4/11/2022 10:02 PM] szybet
no more


[4/11/2022 10:02 PM] szybet
i need to find another library


[4/11/2022 10:02 PM] szybet
this will be the third one


[4/11/2022 10:02 PM] szybet
for a simple zip extraction


[4/11/2022 10:03 PM] szybet
my god...


[4/11/2022 10:05 PM] szybet
https://github.com/libarchive/libarchive/blob/master/examples/untar.c

{Embed}
https://github.com/libarchive/libarchive/blob/master/examples/untar.c
libarchive/untar.c at master · libarchive/libarchive
Multi-format archive and compression library. Contribute to libarchive/libarchive development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/libarchive-4EB42


[4/11/2022 10:05 PM] szybet
200 lines for extracting a archive


[4/11/2022 10:05 PM] szybet
. _ .


[4/11/2022 10:20 PM] szybet
you have unzip in /kobo... can i use it or would it be better to use a internal library?


[4/11/2022 10:24 PM] tux_linux
Use busybox-initrd unzip


[4/11/2022 10:24 PM] tux_linux
Yeah it's fine


[4/11/2022 10:24 PM] szybet
cpp is a mess


[4/11/2022 10:25 PM] szybet
i understand why rust exists


[4/11/2022 10:34 PM] szybet
why inkbox is relaunching itself... i want to test sanki @tux-linux


[4/11/2022 10:35 PM] tux_linux
Oh because you asked to implement this feature...


[4/11/2022 10:36 PM] tux_linux
killall inkbox.sh should work


[4/11/2022 10:36 PM] szybet
:D yea


[4/11/2022 10:40 PM] szybet
it launched


[4/11/2022 10:40 PM] szybet
nothing really works


[4/11/2022 10:40 PM] szybet
but most important, how do i apply the look from inkbox?


[4/11/2022 10:40 PM] szybet
scroll bars are not existing actually


[4/11/2022 10:42 PM] szybet
`Segmentation fault` is it becouse of memore leaks?


[4/11/2022 10:58 PM] tux_linux
You need to load a stylesheet file
Look in InkBox code
take eink-768x1024.qss from rootfs
Bind mount it like in InkBox GUI service script


[4/11/2022 10:58 PM] tux_linux
Depends


[4/11/2022 10:58 PM] szybet
how do i make it for every device?


[4/11/2022 11:09 PM] tux_linux
Well the bind mount is specifically there for that reason


[4/11/2022 11:10 PM] szybet
oh okay


[4/11/2022 11:10 PM] szybet
can i implement the apps in inkbox as a json file?


[4/11/2022 11:10 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/inkbox_gui#L52

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/inkbox_gui
rootfs/inkbox_gui at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-0E6B6


[4/11/2022 11:10 PM] tux_linux
Ok, for 2.0
Good luck


[4/11/2022 11:11 PM] szybet
better, more modular, easier to manage


[4/11/2022 11:11 PM] szybet
also a enable/disable option would be great


[4/11/2022 11:11 PM] szybet
but not easy to implement


[4/14/2022 11:42 PM] szybet
can i put them on my github? i want to create a script and guide


[4/15/2022 12:55 AM] tux_linux
No


[4/15/2022 12:55 AM] tux_linux
It isn't supposed to be public


[4/15/2022 12:55 AM] tux_linux
I'm going to delete them soon
It's my home server, otherwise everyone will eat my bandwidth


[4/15/2022 8:16 AM] szybet
???


[4/15/2022 8:17 AM] szybet
Not everyone is supposed to create appe for inkbox?


[4/15/2022 2:02 PM] tux_linux
Yeah but it's my setup


[4/15/2022 2:02 PM] tux_linux
It can be public but not there


[4/15/2022 2:03 PM] tux_linux
I'll probably move them to another server


[4/15/2022 2:05 PM] szybet
make it public somewhere, and with the download link i will create a script that will it setup for every qt project


[4/15/2022 2:06 PM] szybet
i mean - script inside a project that downloads ( if its not in /home/~/ somewhere ), compiles and runs it on the device


[4/15/2022 2:06 PM] szybet
i tryied making it with qt-creator, not possible


[4/15/2022 2:07 PM] tux_linux
But this is not how it should be done
It works with your PC but someone running say Alpine is going to have problems


[4/15/2022 2:07 PM] szybet
you mean? what would not work


[4/15/2022 2:08 PM] szybet
if gcc and make, wget is installed then whats the problem


[4/15/2022 2:09 PM] tux_linux
The libc


[4/15/2022 2:10 PM] tux_linux
In 1-2 years, it might not work with the glibc
On Alpine it won't work at all because it is using musl


[4/15/2022 2:11 PM] tux_linux
And users of older LTS distributions will encounter problems because their libc is older than the one the toolchain has been compiled with


[4/15/2022 2:12 PM] szybet
then, describe to me how to create these files manually, with the current setup


[4/15/2022 2:13 PM] tux_linux
OfficerAction had this on his readme at some point
Let me find it


[4/15/2022 2:16 PM] tux_linux
https://github.com/Rain92/UltimateMangaReader#cross-compile-for-kobo

{Embed}
https://github.com/Rain92/UltimateMangaReader
GitHub - Rain92/UltimateMangaReader: A feature-rich online manga re...
A feature-rich online manga reader for Kobo E-Ink devices based on Qt5. - GitHub - Rain92/UltimateMangaReader: A feature-rich online manga reader for Kobo E-Ink devices based on Qt5.
/mnt/data/projects/git/conversations/media/UltimateMangaReader-E6512


[4/15/2022 2:17 PM] szybet
thats complicated at least


[4/15/2022 2:17 PM] tux_linux
Yeah I know
But I got it working that way


[4/15/2022 2:21 PM] tux_linux
InkBox is using qt 5.15.2


[4/15/2022 2:24 PM] szybet
wait


[4/15/2022 2:24 PM] szybet
what is this


[4/15/2022 2:24 PM] szybet
` -no-sql-db2 -no-sql-ibase -no-sql-mysql -no-sql-oci -no-sql-odbc -no-sql-psql -no-sql-sqlite2 -no-sql-tds \`


[4/15/2022 2:24 PM] tux_linux
Oh
Well it seems there is no SQL support


[4/15/2022 2:24 PM] tux_linux
Sorry, I haven't read through those arguments since at least half a year


[4/15/2022 2:26 PM] szybet
thats why sanki didn't worked


[4/15/2022 2:26 PM] szybet
but, why?


[4/15/2022 2:26 PM] szybet
can i enable it?


[4/15/2022 2:27 PM] tux_linux
I think there is a reason why he disabled it
Compile errors probably


[4/15/2022 2:27 PM] szybet
maybe i could ask him?


[4/15/2022 2:27 PM] tux_linux
Yes, but it won't work on your Kobo unless you update the qt libs in the GUI bundle


[4/15/2022 2:27 PM] tux_linux
He's pretty much unreachable
You can try pinging him


[4/15/2022 2:28 PM] szybet
and you didn't want to update the whole qt libs right?


[4/15/2022 2:28 PM] tux_linux
It will probably just add one or two .so files


[4/15/2022 2:28 PM] tux_linux
So it's fine


[4/15/2022 2:28 PM] tux_linux
But you have to use 5.15.2


[4/15/2022 2:29 PM] szybet
okay, then i will try it


[4/15/2022 7:29 PM] szybet
is OpenSSH also needed to compile?


[4/15/2022 10:40 PM] tux_linux
Yes


[4/16/2022 10:56 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-41225.txt


[4/16/2022 10:56 AM] szybet
this is the error while configuring 5.15.1 and 5.15.2


[4/16/2022 11:06 AM] szybet
after some manual fixes from stack overflow i got this: `ERROR: Invalid target platform 'linux-kobo-gnueabihf-g++'.`


[4/16/2022 11:06 AM] szybet
but i added those files


[4/16/2022 11:06 AM] szybet
weird


[4/16/2022 11:11 AM] szybet
i dont think i can do anything about this


[4/16/2022 11:33 AM] szybet
dolphin is trash?


[4/16/2022 11:33 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F7FC6.png


[4/16/2022 1:37 PM] szybet
from where can i get `libstdc++.so.6`


[4/16/2022 1:37 PM] szybet
its the standard library, and im missing it


[4/16/2022 3:22 PM] szybet
i have no idea how to get this library


[4/16/2022 3:53 PM] szybet
I give up, i have no idea


[4/16/2022 3:54 PM] szybet
but sql compiles without problem


[4/16/2022 3:54 PM] szybet
so @tux-linux its in your lib folder, in my not and i have error becouse of it


[4/16/2022 3:54 PM] szybet
its missing


[4/16/2022 4:32 PM] szybet
maybe @NiLuJe?


[4/16/2022 7:23 PM] ninuje
That's the C++ STL


[4/16/2022 7:23 PM] ninuje
You definitely have one


[4/16/2022 7:23 PM] ninuje
Or you can't build/run C++ code


[4/16/2022 7:23 PM] ninuje
You might have a *different* one than the one you want/need though


[4/16/2022 7:23 PM] ninuje
Enter API/ABI hell ;o)


[4/16/2022 7:24 PM] ninuje
(In you case: either match the toolchain of target device/stack; or rebuild the full stack with the same toolchain)


[4/16/2022 7:46 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-908D5.png


[4/16/2022 7:46 PM] szybet
is this from the toolchain?


[4/16/2022 7:46 PM] szybet
i have rebuild it


[4/16/2022 8:01 PM] szybet
maybe it is


[4/16/2022 8:01 PM] szybet
but


[4/16/2022 8:02 PM] szybet
```
kobo:/# env LD_LIBRARY_PATH=/qt-bin-szybet/qt-linux-5.15.2-kobo/lib QT_QPA_PLATFORM=kobo 
./sanki
sanki started 
qt.qpa.plugin: Could not find the Qt platform plugin "kobo" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc.
```


[4/16/2022 8:03 PM] szybet
but i know what it is


[4/16/2022 8:08 PM] tux_linux
You need to compile libkobo.so


[4/16/2022 8:09 PM] szybet
how]


[4/16/2022 8:10 PM] szybet
and from where...


[4/16/2022 8:10 PM] tux_linux
Clone Kobo platform plugin repository from OfficerAction and compile with the last commit from 6th March 2021
The newer code isn't what's your Kobo is using currently


[4/16/2022 8:10 PM] tux_linux
It's like a standard qt project
But what is built is libkobo.so


[4/16/2022 8:10 PM] szybet
hm, okay


[4/16/2022 8:10 PM] szybet
so set up toolchain, qmake and make?


[4/16/2022 8:10 PM] szybet
thats it?


[4/16/2022 8:11 PM] tux_linux
Put libkobo.so in qt-path/plugins/platforms


[4/16/2022 8:11 PM] tux_linux
But there is already libkobo.so in the rootfs


[4/16/2022 8:12 PM] tux_linux
For you it will be /lib/qt5-plugins/libkobo.so.1


[4/16/2022 8:38 PM] szybet
```
qmake .
Project ERROR: Unknown module(s) in QT: devicediscovery_support-private fb_support-private fontdatabase_support-private eventdispatcher_support-private service_support-private
```


[4/16/2022 8:38 PM] szybet
hm


[4/16/2022 8:44 PM] szybet
no idea


[4/16/2022 8:44 PM] szybet
i don't even know how to start debbuging this


[4/16/2022 8:44 PM] szybet
so another ping: @tux-linux


[4/16/2022 8:53 PM] tux_linux
No idea
Just take the libkobo.so in the rootfs
No need to ping, I'm still notified of the messages anyway


[4/16/2022 9:01 PM] szybet
this is not a long run solution, you know


[4/16/2022 9:09 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A677E.png


[4/16/2022 9:09 PM] szybet
and it doesn't work


[4/16/2022 9:09 PM] szybet
stll the same error


[4/16/2022 9:23 PM] tux_linux
What are you trying to do?
You need to rename libkobo.so.1 to libkobo.so


[4/16/2022 9:24 PM] tux_linux
Or do what I do in inkbox_gui service


[4/16/2022 9:25 PM] szybet
launch sanki from my compiled qt


[4/16/2022 9:27 PM] szybet
nothing


[4/16/2022 9:27 PM] szybet
mount bind?...


[4/16/2022 9:29 PM] tux_linux
Error?


[4/16/2022 9:29 PM] szybet
the same


[4/16/2022 9:29 PM] szybet
this one


[4/16/2022 9:29 PM] tux_linux
Yeah, the Glo HD needs .so.2


[4/16/2022 9:30 PM] szybet
but anyway, it should work without binding


[4/16/2022 9:30 PM] tux_linux
If you compiled qt itself with another libc maybe it's complaining about that


[4/16/2022 9:30 PM] tux_linux
Which commit?


[4/16/2022 9:31 PM] szybet
i only did what was in mangareader readme


[4/16/2022 9:31 PM] szybet
19db015bfca7ccac70574ac88e5bff4b42c90ab3


[4/16/2022 9:31 PM] tux_linux
But it's over one year old


[4/16/2022 9:31 PM] tux_linux
git log?


[4/16/2022 9:31 PM] tux_linux
Don't really have access to much internet now


[4/16/2022 9:32 PM] tux_linux
Or maybe dolphin messed up the file names


[4/16/2022 9:33 PM] tux_linux
You should really use cli for file operations IMO


[4/16/2022 9:33 PM] szybet
i did `git reset --hard 19db015bfca7ccac70574ac88e5bff4b42c90ab3`

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-25A5B.png


[4/16/2022 9:33 PM] tux_linux
Ok it should be fine


[4/16/2022 9:33 PM] tux_linux
Have you tried git checkout?


[4/16/2022 9:33 PM] tux_linux
Maybe reset hard is doing the same thing idk


[4/16/2022 9:35 PM] szybet
its fine now


[4/16/2022 9:35 PM] tux_linux
Ok


[4/16/2022 9:35 PM] tux_linux
?


[4/16/2022 9:39 PM] szybet
i can


[4/16/2022 9:54 PM] szybet
nothing really


[4/16/2022 9:54 PM] szybet
IDK


[4/16/2022 9:54 PM] szybet
maybe im missing some dependiencies


[4/16/2022 9:55 PM] szybet
and which qt im supposed to use?


[4/16/2022 9:55 PM] szybet
and how?


[4/16/2022 9:55 PM] szybet
to compile this


[4/16/2022 9:57 PM] tux_linux
I don't know either


[4/16/2022 9:58 PM] szybet
you have done this before


[4/16/2022 9:58 PM] szybet
maybe `history`?


[4/16/2022 10:34 PM] szybet
hmmm https://github.com/Rain92/qt5-kobo-platform-plugin/issues/3

{Embed}
https://github.com/Rain92/qt5-kobo-platform-plugin/issues/3
Build error · Issue #3 · Rain92/qt5-kobo-platform-plugin
Hello, finally decided to update the platform plugin, since the old one from March didn&#39;t work properly with the Glo HD in InkBox. I get the following build error: nicolas@gentoo-ryzen ~/Do...
/mnt/data/projects/git/conversations/media/3-0468F


[4/16/2022 10:50 PM] szybet
this gives me some idea how to do this


[4/16/2022 10:50 PM] szybet
i will try it tommorow


[4/17/2022 5:24 PM] nonasuomy
How would one muster together a build env to make apps for inkbox?


[4/17/2022 5:24 PM] szybet
you mean exactly what?


[4/17/2022 5:24 PM] nonasuomy
Is there a specific version of qt you need to use?


[4/17/2022 5:24 PM] szybet
5.15.1


[4/17/2022 5:27 PM] nonasuomy
Is there details of any dependancies you require and how to test formatting  from pc side?


[4/17/2022 5:28 PM] szybet
for most things, you just make a regular app, and then test it on the device. if something doesn't fit you repair it


[4/17/2022 5:28 PM] szybet
there is also a emulator


[4/17/2022 6:45 PM] tux_linux
5.15.2


[4/17/2022 7:28 PM] ninuje
FWIW, since I'm playing with standby right now, I can confirm that you definitely need to handle unexpected wakeups, because since the gyro injects synthetic events into event0, and that's a wakeup source, rotation wakes the device up.


[4/17/2022 7:29 PM] ninuje
And you generally trigger a rotation during the act of putting the device away.


[4/17/2022 7:29 PM] ninuje
And if you have a cover on it, the cover then starts to generate random touch events ;o)


[4/17/2022 7:32 PM] tux_linux
At least it doesn't happen when state-extended is set to 1


[4/17/2022 9:03 PM] szybet
i needed to use the qmake compiled for the kobo...


[4/17/2022 9:04 PM] szybet
me dumbbb


[4/17/2022 9:39 PM] szybet
i launched anki with my self build qt


[4/17/2022 9:39 PM] szybet
but still there is a problem


[4/17/2022 9:39 PM] szybet
```
Qt Sql Drivers:
  DB2 (IBM) .............................. no
  InterBase .............................. no
  MySql .................................. no
  OCI (Oracle) ........................... no
  ODBC ................................... no
  PostgreSQL ............................. no
  SQLite2 ................................ no
  SQLite ................................. yes
    Using system provided SQLite ......... no
  TDS (Sybase) ........................... no
```
i need to enable something more


[4/17/2022 10:28 PM] tux_linux
Ok nice


[4/17/2022 10:28 PM] szybet
are you here?


[4/17/2022 10:29 PM] szybet
i have a quick question


[4/17/2022 10:29 PM] szybet
`connect(decks, SIGNAL(play_deck_signal(QDir)), this, SLOT(deck_play_show(QDir)));`


[4/17/2022 10:29 PM] szybet
this causes the segmentation fault ( sending QDir )


[4/17/2022 10:29 PM] szybet
on the kobo


[4/17/2022 10:29 PM] szybet
w h y


[4/17/2022 10:34 PM] szybet
its weird, it doesn't use it but its the only one in the path


[4/17/2022 11:12 PM] tux_linux
Because


[4/17/2022 11:12 PM] tux_linux
Sometimes Kobo segfaults for no valid reason


[4/17/2022 11:12 PM] tux_linux
Maybe try to switch from debug build to release build


[4/17/2022 11:20 PM] szybet
`qmake CONFIG+=kobo CONFIG+=release sanki.pro`?


[4/17/2022 11:22 PM] tux_linux
probably?


[4/17/2022 11:22 PM] tux_linux
usually I use qtcreator for this


[4/17/2022 11:23 PM] szybet
so you did it


[4/17/2022 11:24 PM] szybet
how did you managed to launch the file from /refs/ in qt-creator before building?


[4/17/2022 11:24 PM] tux_linux
It's complicated
You have to set up kits in qtcreator


[4/17/2022 11:24 PM] szybet
i tryied


[4/17/2022 11:24 PM] szybet
but i didn't found a way to execute this file


[4/17/2022 11:24 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1CE59.png


[4/17/2022 11:26 PM] szybet
and how did you `source /koxtoolchain/dir/path/refs/x-compile.sh kobo env`?


[4/17/2022 11:28 PM] szybet
this didn't worked


[4/17/2022 11:28 PM] szybet
idk


[4/17/2022 11:28 PM] szybet
you don't use something like this in inkbox, you use global variables, right?


[4/17/2022 11:43 PM] tux_linux
i use it when i need to trigger an event when something has finished


[4/17/2022 11:43 PM] szybet
i mean, passing variables with it


[4/17/2022 11:43 PM] szybet
passing variables with slots and signals


[4/17/2022 11:43 PM] tux_linux
It's just like `export PATH="${PATH}:/toolchain/dir/bin`


[4/17/2022 11:43 PM] tux_linux
I do it sometimes
But most of the time I use inline variables


[4/17/2022 11:43 PM] szybet
this script looks more complicated than this


[4/17/2022 11:44 PM] tux_linux
I know, it handles edge cases


[4/17/2022 11:44 PM] szybet
inline? and what variables?


[4/17/2022 11:44 PM] szybet
big ones?


[4/17/2022 11:44 PM] tux_linux
But you can just do the export PATH thing and it should work


[4/17/2022 11:44 PM] szybet
okay, cool


[4/17/2022 11:44 PM] tux_linux
When I need to get the value of a variable from another class


[4/17/2022 11:45 PM] szybet
thats what i use it for


[4/17/2022 11:45 PM] szybet
but it segments faults


[4/17/2022 11:45 PM] tux_linux
then try inline variables maybe...


[4/17/2022 11:48 PM] szybet
i dont even know what this is


[4/17/2022 11:48 PM] szybet
does inkbox even use C++ 17?


[4/17/2022 11:53 PM] szybet
even google can't explain what you are talking about


[4/17/2022 11:53 PM] szybet
https://www.google.com/search?q=inline+variables+qt+cpp


[4/17/2022 11:53 PM] szybet
and what what


[4/17/2022 11:53 PM] szybet
you dont use `inline` keyword in inkbox


[4/18/2022 12:03 AM] tux_linux
yes


[4/18/2022 12:03 AM] tux_linux
yes


[4/18/2022 12:03 AM] tux_linux
functions.h


[4/18/2022 4:56 PM] szybet
how do you add the kobo plugin to your project?


[4/18/2022 4:56 PM] szybet
copying all files is to the project is ugly


[4/18/2022 5:08 PM] tux_linux
?


[4/18/2022 5:08 PM] tux_linux
What do you mean?


[4/18/2022 5:09 PM] szybet
how do you apply this to your project:
https://github.com/Rain92/qt5-kobo-platform-plugin


[4/18/2022 5:11 PM] szybet
i needed copy all files from this repo to my project


[4/18/2022 5:11 PM] szybet
its ugly then


[4/18/2022 5:12 PM] tux_linux
No you just set qt qpa platform env to kobo and put libkobo.so in qtpath


[4/18/2022 5:30 PM] szybet
then i get this error:


[4/18/2022 5:31 PM] szybet
maybe qt-linux-5.15.2-kobo/lib/qt5-plugins is not a correct directory?


[4/18/2022 5:31 PM] tux_linux
it's qtpath/plugins/platforms


[4/18/2022 5:31 PM] tux_linux
Otherwise it won't see it


[4/18/2022 5:32 PM] szybet
do i need it when building too?


[4/18/2022 5:32 PM] szybet
so: `qt-linux-5.15.2-kobo/plugins/platform/libkobo.so`?


[4/18/2022 5:32 PM] tux_linux
Yes


[4/18/2022 5:32 PM] szybet
hm okay


[4/18/2022 5:32 PM] tux_linux
No


[4/18/2022 5:32 PM] szybet
i will try it


[4/18/2022 5:33 PM] szybet
but i need `CONFIG=+kobo` right?


[4/18/2022 5:33 PM] tux_linux
No?


[4/18/2022 5:33 PM] szybet
well, i wil test it

{Reactions}
👍 

[4/18/2022 7:23 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/qt-on-kobo/setup.md

{Embed}
https://github.com/Szybet/kobo-nia-audio/blob/main/qt-on-kobo/setup.md
kobo-nia-audio/setup.md at main · Szybet/kobo-nia-audio
Kobo nia ereader with audio added. Contribute to Szybet/kobo-nia-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-nia-audio-4BDFE


[4/18/2022 7:23 PM] szybet
And here is everything


[4/18/2022 7:24 PM] szybet
3 days of work and figuring this out, so no one will need to waste time for this


[4/18/2022 7:25 PM] szybet
the best: how qt can provide fault sources?? stupid

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7B199.png


[4/18/2022 7:27 PM] szybet
and here is a working ( working as on the kobo, without `Segmentation fault` ) sanki app

{Attachments}
/mnt/data/projects/git/conversations/media/VID_20220418_191847-16C1A.mp4


[4/18/2022 7:47 PM] tux_linux
Because compiler standards have changed


[4/18/2022 7:49 PM] tux_linux
Nice!
You should apply the stylesheet though


[4/18/2022 8:19 PM] szybet
yes


[4/18/2022 8:19 PM] szybet
:/


[4/19/2022 4:36 AM] lostres
Hi, I want to create a image using the image builder imgtool, what is exactly the 'private key' argument" that bash expect?


[4/19/2022 4:42 AM] tux_linux
my private key
sorry
otherwise you need to recompile the kernel with your private key
it's doable

the images will be on the server tomorrow


[4/19/2022 4:43 AM] lostres
oh okey, tnks

{Reactions}
👍 

[4/19/2022 8:51 AM] szybet
So recompile the kernel with your key and the same key put into imgtool


[4/19/2022 8:55 PM] szybet
```
% file libzip.so                                                             
libzip.so: ELF 32-bit LSB shared object, ARM, EABI5 version 1 (SYSV), dynamically linked, with debug_info, not stripped
```
3 hours to compile this library for arm


[4/19/2022 8:55 PM] szybet
https://tenor.com/view/starwarsday-gif-5413754

{Embed}
https://tenor.com/view/starwarsday-gif-5413754
starwarsday
/mnt/data/projects/git/conversations/media/starwarsday-DA3C3.png


[4/19/2022 8:55 PM] szybet
cpp is a nightmare


[4/19/2022 10:27 PM] the.mightydill
i once took 2 days to compile rust


[4/19/2022 10:31 PM] szybet
wtf?


[4/19/2022 10:31 PM] the.mightydill
old, old, old computer


[4/19/2022 10:31 PM] the.mightydill
lmao


[4/19/2022 10:31 PM] szybet
on rust it works oob or doesn't work at all


[4/19/2022 10:31 PM] the.mightydill
?


[4/19/2022 10:31 PM] the.mightydill
it was linux from scratch


[4/19/2022 10:31 PM] szybet
ah, you mean compiling time


[4/19/2022 10:31 PM] the.mightydill
yeah


[4/19/2022 10:32 PM] szybet
oh god no


[4/19/2022 10:32 PM] the.mightydill
:p


[4/19/2022 11:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-85ECF.png


[4/19/2022 11:00 PM] szybet
what


[4/19/2022 11:00 PM] szybet
this is weird


[4/19/2022 11:05 PM] szybet
i looked into the code


[4/19/2022 11:06 PM] szybet
are you calling log() and then close somewhere else too? just for example


[4/19/2022 11:06 PM] szybet
and from where is classname, i cant find it for gutenberg


[4/19/2022 11:08 PM] szybet
https://stackoverflow.com/questions/41567432/weird-behavior-of-qdebug-crashing-the-application


```
Next, if you don't subclass a QObject entity nor use smart pointers, pay extra attention to news to match them with appropriate deletes. Don't create a variable in a condidional branch. If you need to create an object depending on a condidtion, refactor the differing bits out of the constructor into method you will call from conditional branch after creation. While I'm not sure whether is it good coding style or not, it certainly helped me to fix the crash.

```

{Embed}
https://stackoverflow.com/questions/41567432/weird-behavior-of-qdebug-crashing-the-application
Weird behavior of qDebug() crashing the application
I've been debugging a simple catalogue application and this issue is starting to get the best of me. I want to create a modal dialog, wich will recieve user input on presented data. I have a simple
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[4/19/2022 11:46 PM] tux_linux
i know


[4/19/2022 11:47 PM] tux_linux
at this point, some things just happen on Kobos
there's no purpose in trying to know why
unless purpose means brain damage


[4/19/2022 11:47 PM] szybet
🙄


[4/19/2022 11:48 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/55a870b2a2f016ba6102b8f216756f54e1743aa6/librarywidget.h#L17

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/55a870b2a2f016ba6102b8f216756f54e1743aa6/librarywidget.h
inkbox/librarywidget.h at 55a870b2a2f016ba6102b8f216756f54e1743aa6 ...
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-A963C


[4/19/2022 11:49 PM] tux_linux
I also had a similar issue with encrypted storage, it would segfault for no reason because of the log call if unlocking was successful


[4/19/2022 11:49 PM] tux_linux
I tried too much things and it didn't work


[4/19/2022 11:50 PM] szybet
maybe wait some sec? or sync?


[4/19/2022 11:50 PM] tux_linux
oh, already tried


[4/19/2022 11:50 PM] tux_linux
and once I remove log() calls, magic, everything works


[4/20/2022 12:15 AM] szybet
This?


[4/20/2022 12:15 AM] tux_linux
no


[4/20/2022 12:15 AM] szybet
You are calling metaobject before the object is killed


[4/20/2022 12:15 AM] szybet
This should work IF Qt isin't dumb


[4/20/2022 12:15 AM] szybet
But it is


[4/20/2022 12:16 AM] szybet
Maybe this is it?


[4/20/2022 12:16 AM] tux_linux
It is called at the launch of the class
first thing
it's in the header


[4/20/2022 12:16 AM] szybet
OH okay


[4/20/2022 12:16 AM] tux_linux
I tried with a different className, standard qstring, nope


[4/20/2022 7:36 PM] szybet
sanki for PC and kobo in the same project


[4/20/2022 7:36 PM] szybet
i figured this out with `contains(TARGET_ARCH, Kobo) {` but still weird


[4/20/2022 7:36 PM] szybet
but when i launch it on the kobo:
```
./sanki: error while loading shared libraries: libzip.so: cannot open shared object file: No such file or directory

```


[4/20/2022 7:37 PM] szybet
is there any way to include libraries to one executable?


[4/20/2022 7:39 PM] tux_linux
What do you mean? Sorry


[4/20/2022 7:39 PM] szybet
i compiled `libzip.so` for kobo, but it needs this file on the device and i would like to avoid that


[4/20/2022 7:42 PM] tux_linux
What's the weight of it?


[4/20/2022 7:43 PM] szybet
152K


[4/20/2022 7:43 PM] szybet
but still i would like to avoid this


[4/20/2022 8:40 PM] tux_linux
I can put it in the main qt libs
Is it stripped ?


[4/20/2022 8:40 PM] tux_linux
It could be useful in the future


[4/20/2022 8:40 PM] szybet
not stripped


[4/20/2022 8:40 PM] szybet
what does this even mean


[4/20/2022 8:40 PM] szybet
for adding cbz file format


[4/20/2022 8:43 PM] tux_linux
Removes debug symbols, so reduces size


[4/20/2022 8:43 PM] tux_linux
Sometimes a binary can go from 8M to 250K with stripping


[4/20/2022 8:48 PM] szybet
oh okay


[4/20/2022 8:55 PM] szybet
why the app is so much away from the screen border? i tryied removing margins, nothing


[4/20/2022 9:08 PM] szybet
figured it out


[4/20/2022 9:08 PM] szybet
qt creator is buggy when it comes to many platforms


[4/20/2022 9:15 PM] tux_linux
What solution?


[4/20/2022 9:15 PM] szybet
qt creator wasn't even updating the gui, and then the exec


[4/20/2022 9:15 PM] szybet
i needed to disable shadow builds

{Reactions}
👍 

[4/20/2022 9:16 PM] szybet
and now both arch are building in one directory, so once the kobo got a x86_64 executable, and now the building process looks like this:

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-20A01.png


[4/20/2022 10:25 PM] szybet
why is the text in pusbbutton always big?


[4/20/2022 10:25 PM] szybet
changing the font doesn't work


[4/20/2022 10:25 PM] tux_linux
You have to set font-size attribute in stylesheet


[4/20/2022 10:26 PM] szybet
its just big becouse of the stylesheet?


[4/20/2022 10:26 PM] tux_linux
I think?


[4/20/2022 10:26 PM] szybet
but when i change it manually, it should get smaller?


[4/20/2022 10:26 PM] tux_linux
Yes?


[4/20/2022 10:27 PM] tux_linux
If you change it in the designer it doesn't work


[4/20/2022 10:27 PM] tux_linux
For some reason
You have to use a stylesheet


[4/20/2022 10:27 PM] tux_linux
setStyleSheet


[4/20/2022 10:27 PM] tux_linux
On your button


[4/20/2022 10:28 PM] szybet
this should work too...

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-599A4.png


[4/20/2022 10:28 PM] szybet
i need to write an entire stylesheet?


[4/20/2022 10:28 PM] tux_linux
No
Look in InkBox source


[4/20/2022 10:28 PM] tux_linux
For this


[4/20/2022 10:30 PM] szybet
okay, it works, thanks


[4/20/2022 10:30 PM] szybet
but this should work too


[4/20/2022 10:43 PM] szybet
i can still your icons, right? 😆


[4/20/2022 10:43 PM] szybet
i want to make it look similar to inkbox style


[4/20/2022 11:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220420_231121-B54BB.jpg


[4/20/2022 11:12 PM] szybet
Its hard to design the ui


[4/20/2022 11:12 PM] szybet
Aby suggestions?


[4/20/2022 11:49 PM] tux_linux
reduce font size
use u001 as main font
use Inter when font is bold


[4/20/2022 11:50 PM] tux_linux
yes


[4/20/2022 11:50 PM] szybet
how much to reduce it?


[4/20/2022 11:50 PM] tux_linux
I think on InkBox I put labels and buttons to 10pt


[4/20/2022 11:51 PM] tux_linux
You can try 9 or 9.5 too


[4/20/2022 11:51 PM] szybet
okay


[4/21/2022 3:46 PM] szybet
```
ation terminated.
make: *** [Makefile:1568: card_true_false.o] Error 1
szybet@hostname:~/sanki$ arm-kobo-linux-gnueabihf-g++ -c -pipe --sysroot=/home/nicolas/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot -O3 -march=armv7-a -mfpu=neon -mfloat-abi=hard -D__arm__ -D__ARM_NEON__ -fPIC -fno-omit-frame-pointer -funwind-tables -Wl,--no-merge-exidx-entries -std=gnu++11 -Wall -Wextra -D_REENTRANT -fPIC -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_SQL_LIB -DQT_CORE_LIB -I. -I/home/szybet/sanki/libraries/zip_libraries/zip/src/ -I../qt-linux-5.15.2-kobo/include -I../qt-linux-5.15.2-kobo/include/QtWidgets -I../qt-linux-5.15.2-kobo/include/QtGui -I../qt-linux-5.15.2-kobo/include/QtSql -I../qt-linux-5.15.2-kobo/include/QtCore -I. -I. -I../qt-linux-5.15.2-kobo/mkspecs/linux-kobo-gnueabihf-g++ -o card_true_false.o card_true_false.cpp
In file included from /home/szybet/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/include/c++/11.2.0/arm-kobo-linux-gnueabihf/bits/c++config.h:586,
                 from /home/szybet/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/include/c++/11.2.0/type_traits:38,
                 from ../qt-linux-5.15.2-kobo/include/QtCore/qglobal.h:45,
                 from ../qt-linux-5.15.2-kobo/include/QtGui/qtguiglobal.h:43,
                 from ../qt-linux-5.15.2-kobo/include/QtWidgets/qtwidgetsglobal.h:43,
                 from ../qt-linux-5.15.2-kobo/include/QtWidgets/qwidget.h:43,
                 from ../qt-linux-5.15.2-kobo/include/QtWidgets/QWidget:1,
                 from card_true_false.h:4,
                 from card_true_false.cpp:1:
/home/szybet/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/include/c++/11.2.0/arm-kobo-linux-gnueabihf/bits/os_defines.h:39:10: fatal error: features.h: No such file or directory
   39 | #include <features.h>
      |          ^~~~~~~~~~~~
compilation terminated.

```


[4/21/2022 3:46 PM] szybet
what is this


[4/21/2022 3:46 PM] szybet
i tryied to compile on another machine


[4/21/2022 3:46 PM] szybet
i recompiled koxtoolchain, do i need qt too?


[4/21/2022 10:53 PM] szybet
is there any way to detect writes to the e-ink display?


[4/21/2022 11:12 PM] tux_linux
mxc epdc fb damage
From NiLuJe


[4/21/2022 11:13 PM] szybet
okay, nice


[4/22/2022 7:08 AM] szybet
Will an APP compiled with my Qt work on the kobo with your qt?, always?


[4/22/2022 11:06 AM] szybet
^i needed to recompile Qt


[4/22/2022 9:02 PM] szybet
do i need to set DPI?


[4/22/2022 9:03 PM] szybet
+ how to make the scroll bar smooth


[4/22/2022 10:18 PM] szybet
@tux-linux  isint there a better way than this?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5ECA5.png


[4/22/2022 10:18 PM] szybet
i have a similar problem with anki


[4/22/2022 10:18 PM] szybet
i tryied expanding the pushbutton vertically, with no success


[4/22/2022 10:37 PM] tux_linux
Yes, did you pull the repo?


[4/22/2022 10:37 PM] tux_linux
It's been replaced by deviceID


[4/22/2022 10:37 PM] tux_linux
Unless I missed that function


[4/22/2022 10:38 PM] szybet
i mean, the truncate and cutting of strings


[4/22/2022 10:38 PM] tux_linux
Then no, there isn't


[4/22/2022 10:38 PM] tux_linux
To my knowledge


[4/22/2022 10:39 PM] szybet
emit a signal when textedit / label gets focus?


[4/22/2022 10:39 PM] tux_linux
What are you talking about? This sets the number of characters a recent books button can have


[4/22/2022 10:39 PM] szybet
you can use multiline in qtextedit


[4/22/2022 10:40 PM] szybet
and emit a signal when clicked


[4/22/2022 10:41 PM] tux_linux
But this is about buttons


[4/22/2022 10:41 PM] tux_linux
You can't


[4/22/2022 10:41 PM] szybet
its smooth in inkbox?


[4/22/2022 10:41 PM] tux_linux
You mean rounded corners?


[4/22/2022 10:41 PM] szybet
and im talking about replacing them


[4/22/2022 10:41 PM] tux_linux
Ah


[4/22/2022 10:41 PM] szybet
no


[4/22/2022 10:42 PM] tux_linux
I was thinking of making a giant formatted qtextedit yeah
Or maybe using different qtoolbuttons


[4/22/2022 10:43 PM] szybet
qtoolbuttons are weird


[4/22/2022 10:44 PM] tux_linux
I know


[4/22/2022 11:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220422_231504-8CF72.jpg


[4/22/2022 11:17 PM] szybet
why if 1 textedit is bigger, everyone other is the same size...


[4/22/2022 11:17 PM] szybet
this doesn't make sense


[4/22/2022 11:42 PM] szybet
just... no


[4/22/2022 11:44 PM] szybet
👀


[4/23/2022 5:14 PM] szybet
@tux-linux  i think i found the issue with log()


[4/23/2022 5:14 PM] szybet
look at this:


[4/23/2022 5:14 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CF9D4.png


[4/23/2022 5:14 PM] szybet
global_fun::log is executed when the widget is closed, but qDebug works as intended


[4/23/2022 5:14 PM] szybet
and the function is identical to inkbox


[4/23/2022 5:15 PM] szybet
i dont have any solution for that


[4/23/2022 5:16 PM] tux_linux
log after the widget is closed


[4/23/2022 5:17 PM] tux_linux
From another class
Connect destroyed signal to a log slot


[4/23/2022 5:17 PM] szybet
? what


[4/23/2022 5:17 PM] szybet
thats what inkbox does?


[4/23/2022 5:17 PM] tux_linux
Maybe I misunderstood the problem


[4/23/2022 5:18 PM] tux_linux
It segfaults?


[4/23/2022 5:18 PM] szybet
in my case log() is called when the widget is closed, i think it should not wait for it. maybe thats the issue with the library


[4/23/2022 5:19 PM] tux_linux
Oh


[4/23/2022 5:19 PM] szybet
this makes sense right?


[4/23/2022 5:19 PM] tux_linux
Try qtimer::singleshot maybe


[4/23/2022 5:19 PM] tux_linux
no?


[4/23/2022 5:19 PM] szybet
i mean, this could be the issue for gutenberg library?


[4/23/2022 5:20 PM] tux_linux
I think it doesn't execute even after the widget is closed


[4/23/2022 5:20 PM] tux_linux
Idk


[4/23/2022 5:21 PM] szybet
maybe its the fix


[4/23/2022 5:21 PM] szybet
¯\_(ツ)_/¯


[4/23/2022 5:23 PM] tux_linux
Maybe...


[4/23/2022 5:27 PM] szybet
`    QTimer::singleShot(1, this, SLOT(global_fun::log("Line edit clicked", "edit_deck.cpp", "on_lineEditDeckName_cursorPositionChanged")));` this works


[4/23/2022 5:27 PM] tux_linux
well, good
1 msec?


[4/23/2022 5:27 PM] tux_linux
try with 0, see if it works or not


[4/23/2022 5:29 PM] szybet
it works too but


[4/23/2022 5:29 PM] szybet
`QObject::connect: No such slot edit_deck::global_fun::log("Line edit clicked", "edit_deck.cpp", "on_lineEditDeckName_cursorPositionChanged") in edit_deck.cpp:97`


[4/23/2022 5:29 PM] szybet
actually its the same as for 1 ms


[4/23/2022 5:30 PM] szybet
but this can be fixed by just adding a slot


[4/24/2022 12:37 PM] szybet
umm?


[4/24/2022 12:37 PM] szybet
i think sanki is not so accurate in touch


[4/24/2022 12:37 PM] szybet
and i cant figure out what this code does

{Attachments}
/mnt/data/projects/git/conversations/media/message-B03BE.txt


[4/24/2022 12:47 PM] tux_linux
It just sets the UI scale in Settings


[4/24/2022 12:47 PM] tux_linux
It won't affect touch


[4/24/2022 12:48 PM] tux_linux
See QT_FONT_DPI env var


[4/24/2022 12:48 PM] szybet
oh okay


[4/24/2022 12:49 PM] szybet
any solution?


[4/24/2022 12:49 PM] szybet
it happens only in the keyboard


[4/24/2022 12:49 PM] tux_linux
You're using it from the wrong position


[4/24/2022 12:49 PM] tux_linux
Maybe


[4/24/2022 12:49 PM] szybet
???


[4/24/2022 12:50 PM] tux_linux
From the wrong screen angle, whatever


[4/24/2022 12:51 PM] szybet
not really


[4/24/2022 12:51 PM] szybet
it is acceptable but it could be better


[4/24/2022 7:10 PM] tux_linux
You can use this for logging function name, maybe it's better, that's what I do:
```
QString function = __func__; log(function + ": Not showing update dialog, user dismissed it", className);
```


[4/25/2022 9:52 PM] szybet
```
> main.cpp:4:2: error: #error glibc versions below 2.17 are not supported
>     4 | #error glibc versions below 2.17 are not supported
>       |  ^~~~~
> make: *** [Makefile:529: main.o] Błąd 1
test config.qtwebengine_buildtools.tests.webengine-glibc FAILED
```


[4/25/2022 9:52 PM] szybet
for qtwebengine we only need higher glibc?


[4/25/2022 10:44 PM] tux_linux
Not only that
I'm not sure
You're on your own, I will not try to get it work, too much brain damage already done on my side


[4/25/2022 10:45 PM] szybet
Okay, only one thing: is there any way to get higher glibc version?


[4/26/2022 12:20 AM] ninuje
By not using musl in the first place? 😄


[4/26/2022 12:20 AM] ninuje
(... and actually using an up to date glibc. easy peasy).


[4/26/2022 1:53 AM] tux_linux
Oh, I recall it now: we need an higher glibc, but an higher glibc requires a higher kernel
That's why the compiled glibc in the kobo chroot is so old, otherwise it wouldn't support kernel 2.6.35.3 which Mini, Touch B/C and Glo are using
(`FATAL: Kernel too old!` nightmare)


[4/26/2022 1:53 AM] tux_linux
...nope?


[4/26/2022 2:01 AM] nonasuomy
_pokes @tux-linux_


[4/26/2022 7:52 AM] szybet
Impossible then


[4/26/2022 10:04 AM] szybet
Or maybe? Im confused now


[4/26/2022 10:05 AM] szybet
I hate alpine too, but thats what we have


[4/26/2022 12:43 PM] ninuje
I don't recall which version dropped support for old kernels, but it feels much more recent thzn that


[4/26/2022 12:44 PM] szybet
Well, there are devices with never kernels


[4/26/2022 12:44 PM] szybet
Nią has 4.15


[4/26/2022 12:44 PM] szybet
So how do i get glibc witha higher version? The toolchain is your work, so maybe you know


[4/26/2022 12:45 PM] ninuje
On mobile, can't help ;p


[4/26/2022 12:45 PM] szybet
You can just describe


[4/26/2022 12:45 PM] ninuje
Check the Qt prereq to begin with


[4/26/2022 12:45 PM] ninuje
Check the glibc changelog for the actual break point


[4/26/2022 12:46 PM] ninuje
If something fits, just ct-ng menuconfig after loading the preset


[4/26/2022 12:46 PM] szybet
And there will be an option to chooser higher glibc?


[4/26/2022 12:47 PM] ninuje
Yeah, the layout is fairly easy to follow


[4/26/2022 12:47 PM] szybet
That sounds to easy

{Reactions}
😂 

[4/26/2022 12:48 PM] ninuje
You'll also need the same glibc actually installed on the device


[4/26/2022 12:48 PM] ninuje
Not only your TC


[4/26/2022 12:50 PM] szybet
Its just copying this one file?


[4/26/2022 12:50 PM] szybet
To Qt libs?


[4/26/2022 12:50 PM] szybet
Or is it something diffrent


[4/26/2022 12:51 PM] szybet
If i need to recompile the whole os, then no thanks


[4/26/2022 12:58 PM] szybet
Or copying libc* file


[4/26/2022 1:24 PM] ninuje
You'll want to rebuild th and full os with the right TC, yeah.


[4/26/2022 1:26 PM] ninuje
The kobomk7 sample should be a better starting point for you, it's using the current Kobo glibc (2.19),and actually sets the glibc min kernel to 4.something, so it actually supports newer kernel features.


[4/26/2022 1:54 PM] szybet
No...


[4/26/2022 1:54 PM] szybet
Isin't there a way to use the glibc only with a specific binary?


[4/26/2022 1:55 PM] ninuje
A chroot.


[4/26/2022 1:56 PM] ninuje
So, not really, because you need a base system to swap glibc in a chroot


[4/26/2022 1:56 PM] ninuje
At which point you're better off just updating your real system ;p'


[4/26/2022 1:57 PM] szybet
😞


[4/26/2022 1:57 PM] ninuje
But it can be done (e.g., switching to a hardfp libc on a softfp system).


[4/26/2022 1:57 PM] szybet
Too much pointless work, writing an app only for this one system


[4/26/2022 2:05 PM] ninuje
A very very quick glance at the qtwebengine stuff seems to imply that it only requires >= 2.17


[4/26/2022 2:05 PM] ninuje
That's very very easy to honor (current Kobo FW run 2.19)


[4/26/2022 2:05 PM] ninuje
(use the kobomk7 TC, it does just that)


[4/26/2022 2:06 PM] ninuje
(the nickel one too, for gcc 4.9)


[4/26/2022 2:08 PM] ninuje
And the min kernel for 2.17 is 2.6.16, so, not a problem either


[4/26/2022 2:08 PM] ninuje
2.20 bumps to to 2.6.32, which might still be mostly okay


[4/26/2022 2:09 PM] ninuje
(according to https://man7.org/tlpi/api_changes/#glibc)


[4/26/2022 2:10 PM] ninuje
Which looks sound, the first breakpoint is for nptl


[4/26/2022 2:10 PM] ninuje
Which we already build with


[4/26/2022 2:10 PM] szybet
So @tux-linux what do you think about updating glibc? ( or just providing instruction how to recompile inkbox )


[4/26/2022 2:11 PM] ninuje
2.6.32 is still the lowest for current glibc (2.35 IIRC)


[4/26/2022 2:11 PM] tux_linux
The Kobo chroot uses glibc


[4/26/2022 2:13 PM] tux_linux
Then why Debian 9, 10 and 11 give a fatal kernel too old error?


[4/26/2022 2:14 PM] ninuje
They might be building with a min_kernel_version flag too low


[4/26/2022 2:14 PM] ninuje
It's visible in the exec output iirc


[4/26/2022 2:14 PM] ninuje
(when you run the libc.so)


[4/26/2022 2:14 PM] ninuje
Possibly 2.6.16 because nptl


[4/26/2022 2:14 PM] ninuje
Lunch break over, bye!

{Reactions}
👍 

[4/26/2022 2:15 PM] tux_linux
Alpine is nice
It was my only choice because Debian >8 doesn't work, and Buildroot >2015.x doesn't work either
So best bet to get kind of up-to-date packages without compiling all of them myself


[4/26/2022 2:16 PM] szybet
Well when you make a chroot in it then yes


[4/26/2022 2:16 PM] ninuje
Or the read elf output, actually


[4/26/2022 2:16 PM] ninuje
Or file's


[4/26/2022 2:17 PM] tux_linux
That's why it's in a chroot
Using buildroot 2015.x for the main system wouldn't have been so great


[4/26/2022 2:19 PM] tux_linux
even alpine >3.10 makes 2.6.35.3 kernels segfault busybox and all other binaries
(it shouldn't do that, but it apparently has decided so)


[4/26/2022 2:20 PM] tux_linux
so that's why we're stuck at 3.10
unless we compile our own packages from 3.10, which apparently doesn't make them segfault when compiled against this musl version (I tried to do that for the original KoBox in jan-feb 2021, it worked but at some point it was so overwhelming that I gave up)


[4/26/2022 8:26 PM] szybet
@tux-linux  how do you plan to replace the file chooser? with a QDialog where you choose a file?


[4/26/2022 8:27 PM] szybet
it would be best if I could write it for sanki and then port to inkbox


[4/26/2022 8:39 PM] tux_linux
I don't plan to use a file chooser
I think I will do something similar to Nickel


[4/26/2022 8:40 PM] szybet
and nickel uses?


[4/26/2022 8:41 PM] tux_linux
The "books" tab


[4/26/2022 8:41 PM] tux_linux
Books with big buttons and covers


[4/26/2022 8:41 PM] szybet
so no folders?


[4/26/2022 8:42 PM] tux_linux
Yes but it will merge them


[4/26/2022 8:42 PM] tux_linux
Maybe not
Idk


[4/26/2022 8:42 PM] szybet
i want folders


[4/26/2022 8:42 PM] szybet
D:


[4/26/2022 8:43 PM] tux_linux
Maybe every file and folder will be a dynamically generated/deleted button that will change every time you change the page


[4/26/2022 8:43 PM] szybet
of course you need to generate that dynamically


[4/26/2022 8:43 PM] tux_linux
Or I will just call setText on them, simpler


[4/26/2022 8:44 PM] tux_linux
So only 4 or 5 big buttons


[4/26/2022 8:44 PM] tux_linux
That change depending on which page of the index you are on


[4/26/2022 8:45 PM] nonasuomy
I've always enjoyed a logical direct view of what is actually there than those confusing library views everyone copied from apple.


[4/26/2022 8:45 PM] szybet
idk what your vision is


[4/26/2022 8:46 PM] szybet
but i will make a file chooser for anki


[4/26/2022 8:46 PM] szybet
if you want you can copy it later


[4/26/2022 8:46 PM] tux_linux
Well a simple file chooser won't be nice to see


[4/26/2022 8:47 PM] tux_linux
I want something with book covers and details and everything


[4/26/2022 8:47 PM] szybet
adding books / folders to your library?


[4/26/2022 8:48 PM] tux_linux
If you display that as a simple list, like in file search, it won't be pretty


[4/26/2022 8:48 PM] szybet
a grid


[4/26/2022 8:48 PM] szybet
with icons and names


[4/26/2022 8:49 PM] szybet
and better fitted for the screen


[4/26/2022 8:49 PM] nonasuomy
thumbnail view from a file manager?


[4/26/2022 8:49 PM] tux_linux
Maybe but that's more icons = more used RAM


[4/26/2022 8:49 PM] tux_linux
Online library on the Touch B isn't really a great thing


[4/26/2022 8:49 PM] szybet
folder icon and zip icon?...


[4/26/2022 8:50 PM] tux_linux
No, even with 200x300 pngs


[4/26/2022 8:50 PM] szybet
well, disabling them is one line of code


[4/26/2022 8:50 PM] tux_linux
Disabling what?


[4/26/2022 8:50 PM] nonasuomy
thumbnail cache?


[4/26/2022 8:50 PM] szybet
and if something will lagging i will be the first to encounter that, nia has 255 ram


[4/26/2022 8:51 PM] szybet
icons


[4/26/2022 8:51 PM] tux_linux
Hmm


[4/26/2022 8:51 PM] szybet
the file chooser already uses icons


[4/26/2022 8:51 PM] tux_linux
No, touch B is slower


[4/26/2022 8:51 PM] szybet
well okay


[4/26/2022 8:52 PM] tux_linux
16x16 icons that is


[4/26/2022 8:52 PM] szybet
exactly


[4/28/2022 10:36 PM] szybet
https://streamable.com/3vxxiw

{Embed}
https://streamable.com/3vxxiw
VID_20220428_222741
/mnt/data/projects/git/conversations/media/3vxxiw-9970D.jpg


[4/28/2022 10:36 PM] nonasuomy
Great work!


[4/28/2022 10:36 PM] szybet
suggestions on design are aprreciated


[4/28/2022 10:37 PM] szybet
also the keyboard and file chooser, what about implementing them into inkbox?


[4/28/2022 10:37 PM] szybet
thanks


[4/28/2022 10:38 PM] tux_linux
Looks very nice
But do you generate buttons for each file? RAM's not gonna like that


[4/28/2022 10:40 PM] szybet
i know, there were already "killed" errors becouse the icons were to big
is there a better solution? for devices when this can be a problem we can disable icons, this will be in settings anyway


[4/28/2022 10:41 PM] tux_linux
Change your font to u001
Increase padding
Set some buttons to light gray color
Slightly reduce font size


[4/28/2022 10:41 PM] tux_linux
Maybe you can use Unicode symbols for the icons


[4/28/2022 10:42 PM] szybet
why u001, this one looks nice too. it will be in settings ;p
with padding you mean?
yea need to do that, some more colors
I already did it


[4/28/2022 10:44 PM] tux_linux
u001 is the default font in InkBox
Bold fonts are inter but everything else or almost is u001
It increases readability and I find it's a beautiful font too


[4/28/2022 10:45 PM] szybet
okay sure


[4/28/2022 10:46 PM] szybet
i use them for arrows. there aren't any unicode characters for folders, cards etc


[4/28/2022 10:46 PM] szybet
maybe making a custom font


[4/28/2022 10:47 PM] szybet
if this will be a problem in the future, why not


[4/28/2022 10:47 PM] szybet
for now icons only oncrease loading time for 2s in the biggest directory on the device ( / )


[4/28/2022 10:52 PM] tux_linux
Really?


[4/28/2022 10:52 PM] tux_linux
Then a custom font would be interesting


[4/28/2022 10:53 PM] szybet
why would there be
i tryied a custom arrow and it wasn't there ;p


[4/28/2022 11:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4BF87.png


[4/28/2022 11:03 PM] szybet
this doesn't look toooo complicated


[4/28/2022 11:03 PM] szybet
with some help i could do this with rust


[4/28/2022 11:28 PM] ninuje
Spoiler alert: you don't really need to.


[4/28/2022 11:29 PM] ninuje
This could/should be done trivially in the QPA


[4/28/2022 11:29 PM] szybet
?... QPA?


[4/28/2022 11:29 PM] ninuje
Or, if you're running @ 8bpp, you can just let the kernel do it for you (by swapping the grayscale flag to 2)


[4/28/2022 11:29 PM] ninuje
screen inversion


[4/28/2022 11:30 PM] ninuje
Unless you were talking about the concept of hooking the ioctl in general, and not inversion? ^^


[4/28/2022 11:30 PM] szybet
Inversion, that isin't buggy


[4/28/2022 11:30 PM] ninuje
(technically interposing, not hooking)


[4/28/2022 11:31 PM] ninuje
It's never buggy on Kobo


[4/28/2022 11:31 PM] szybet
On the nia it flickers


[4/28/2022 11:31 PM] szybet
Tooo much


[4/28/2022 11:31 PM] ninuje
(there are very very very few exceptions to that rule: Early Aura kernels; and Mk. 7 devices with some specific combinations of post-processing)


[4/28/2022 11:32 PM] ninuje
Oh, right, that


[4/28/2022 11:32 PM] ninuje
yeah, the whole thing is terrible except on supported devices


[4/28/2022 11:32 PM] ninuje
Sage/Elipsa/Libra 2


[4/28/2022 11:32 PM] ninuje
(needs waveform support)


[4/28/2022 11:33 PM] szybet
QPA means?


[4/28/2022 11:34 PM] szybet
Qt platform addon?


[4/28/2022 11:35 PM] ninuje
Abstraction, i think?


[4/28/2022 11:36 PM] ninuje
can't quite remember ;p


[4/28/2022 11:36 PM] ninuje
definitely Qt Platform ^^


[4/28/2022 11:36 PM] szybet
Hmm it could, will images be inverted too?


[4/28/2022 11:37 PM] ninuje
Yeah, you need to invert 'em yourself


[4/28/2022 11:37 PM] ninuje
(Incidentally, this is why it's not supported in the QPA: it doesn't make much sense for the main use-case of what the QPA was built for, UMR)


[4/28/2022 11:38 PM] ninuje
(nightmode doesn't make much sense *at all* on eink in my book, but it's apparently wildly popular for some unfathomable reason ^^).


[4/28/2022 11:38 PM] szybet
Cool for reading at night


[4/28/2022 11:39 PM] szybet
IF the ereader only has a blue light, not the warm one then its hurting a bit


[4/28/2022 11:42 PM] ninuje
I'm honestly more bothered by the weird interaction between a frontlight on a black blackground than a cold frontlight


[4/28/2022 11:43 PM] ninuje
And I use ereaders mostly in complete darkness


[4/28/2022 11:43 PM] ninuje
Makes perfect sense on OLED, though


[4/28/2022 11:44 PM] szybet
Well black color blocks mord light


[5/2/2022 10:15 PM] szybet
```
// Running rootfs changes script if it's there
    // Not a big security flaw anymore. InkBox OS verifies the digital signature of the update package and aborts the update if it's not genuine.
```
what script?


[5/2/2022 10:28 PM] tux_linux
It was the ancient update system (pre-1.5)
It ran a script if necessary


[5/2/2022 10:28 PM] tux_linux
I should remove that code


[5/2/2022 10:29 PM] szybet
yes you should


[5/2/2022 10:29 PM] szybet
need i to create a issue on github?


[5/2/2022 10:34 PM] tux_linux
No


[5/3/2022 1:38 PM] szybet
battery warnings from inkbox arent working in other apps, right?


[5/3/2022 2:42 PM] tux_linux
Depends


[5/3/2022 2:42 PM] tux_linux
The critical battery alert, yes
It will shut down the Kobo
It's a system service


[5/3/2022 2:42 PM] tux_linux
battery_watchdog iirc


[5/3/2022 2:43 PM] szybet
okay


[5/3/2022 2:43 PM] tux_linux
There
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/battery_watchdog

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/battery_watchdog
rootfs/battery_watchdog at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-0E6B6


[5/3/2022 2:44 PM] szybet
okay, thanks

{Reactions}
👍 

[5/3/2022 2:44 PM] szybet
maybe move callendar app away from inkbox repo? a standarization would be cool


[5/3/2022 2:44 PM] tux_linux
It's just a calendar widget


[5/3/2022 2:45 PM] szybet
but its an app


[5/3/2022 2:46 PM] szybet
and it will be easier to make a dynamic app list when every app will be a external executable


[5/3/2022 2:46 PM] tux_linux
Hmm


[5/3/2022 2:46 PM] szybet
i want to make it


[5/3/2022 2:46 PM] tux_linux
Open KoBox apps can't be an executable


[5/3/2022 2:46 PM] szybet
dont force users to recompile inkbox if they want to add an app


[5/3/2022 2:47 PM] szybet
for kobox, there can be a section separeted with the info and a horizontal line


[5/3/2022 2:47 PM] tux_linux
I think it's better to keep the default apps as they are now and at buttons and labels if others are found in the JSON file


[5/3/2022 2:47 PM] tux_linux
Like, built-in apps and user apps


[5/3/2022 2:48 PM] szybet
yea, thats a good idea

{Reactions}
👍 

[5/3/2022 2:48 PM] szybet
user apps cant be kobox apps, right?


[5/3/2022 2:48 PM] tux_linux
Yes
But it's in the KoBox open dialog


[5/3/2022 2:48 PM] tux_linux
So it doesn't show up directly


[5/3/2022 2:49 PM] tux_linux
Try installing XBoard extension or the puzzles one, you'll see


[5/3/2022 2:49 PM] szybet
with this solution, there cant be a way to disable light maps for example?


[5/3/2022 2:49 PM] szybet
for the json i will just make a enabled: bool thing


[5/3/2022 2:50 PM] tux_linux
It's already disabled on devices without Wi-Fi


[5/3/2022 2:51 PM] szybet
but disable it / dont show it by user preference?


[5/3/2022 2:51 PM] tux_linux
Why?


[5/3/2022 2:51 PM] tux_linux
Then you just don't launch it


[5/3/2022 2:51 PM] szybet
its not a good solution


[5/3/2022 2:52 PM] tux_linux
Why?


[5/3/2022 2:52 PM] szybet
becouse i dont want light maps show up in any way


[5/3/2022 2:53 PM] tux_linux
There is no way to disable the button and label
If we made that user changeable, some people could mess up the file and disable all default apps
That's why I think it's not a good solution


[5/3/2022 3:00 PM] szybet
> There is no way to disable the button and label
a simple if and hide EDIT: OHH its a grid, this complicates things

> If we made that user changeable, some people could mess up the file and disable all default apps
if someone edits the files by hand then its their fault, i think about a in inkbox editor of it, maybe use the buttons for this

> That's why I think it's not a good solution
if I do it properly and make a pull request, will you merge it?


[5/3/2022 3:03 PM] tux_linux
Well I meant there is no way without recompiling


[5/3/2022 3:03 PM] szybet
a simple if and hide?... ( if we change the grid to a diffrent layout )


[5/3/2022 3:04 PM] tux_linux
I think yes


[5/3/2022 3:04 PM] tux_linux
IIRC


[5/3/2022 3:06 PM] tux_linux
Maybe I will merge it
Not sure
Also, where do you intend to put that JSON file into?


[5/3/2022 3:06 PM] tux_linux
There's not much you can do in std kernel


[5/3/2022 3:07 PM] szybet
um somewhere /data/config?


[5/3/2022 3:07 PM] tux_linux
You can't access that in std kernel


[5/3/2022 3:07 PM] tux_linux
Only onboard


[5/3/2022 3:07 PM] szybet
you mean?


[5/3/2022 3:07 PM] szybet
i dont really understand


[5/3/2022 3:08 PM] tux_linux
Standard kernel vs rooted one provides no ssh access, no telnet, no FTP, nothing that can be used to access the device in the inside


[5/3/2022 3:09 PM] szybet
i said it here, an enabled: bool thing and a small editor to edit those values


[5/3/2022 3:10 PM] tux_linux
But how will you add new apps?


[5/3/2022 3:10 PM] tux_linux
Please use InkBox virtual keyboard in generalDialog for consistency


[5/3/2022 3:10 PM] tux_linux
I can explain it to you if some things seem difficult to understand


[5/3/2022 3:11 PM] szybet
if you want that a normal user can add apps... this needs to be rethinked good


[5/3/2022 3:11 PM] szybet
over usb for sure


[5/3/2022 3:12 PM] tux_linux
Maybe I have an idea to export /data/config


[5/3/2022 3:14 PM] szybet
a archive with extension inkapp.tar, something like that that and inside all app, with a cutted out json that will be copied to the main one


[5/3/2022 3:14 PM] szybet
it would half a package manager...


[5/3/2022 3:14 PM] szybet
how are kobox apps managed?


[5/3/2022 3:15 PM] szybet
+ a security risk, they should be signed by you when the kernel isin't rooted

{Reactions}
👍 

[5/3/2022 3:16 PM] tux_linux
Mount KoBox extension isa file and look around, it's a squashfs
It's a mini root filesystem which gets merged with KoBox main rootfs at boot


[5/3/2022 3:17 PM] tux_linux
Also check out initrd/common/startx in kernel repo
And etc/init.d/xorg.sh in rootfs


[5/3/2022 3:18 PM] szybet
too complicated for simple qt apps


[5/4/2022 2:56 PM] szybet
about increasing size of the squashfs where books are made - this could be done with a automated script in inkbox setup


[5/4/2022 2:57 PM] szybet
i think its a good idea


[5/4/2022 2:57 PM] szybet
but its more complicated


[5/4/2022 2:57 PM] szybet
first it would be needed to increase the size of p4 to max


[5/4/2022 3:03 PM] tux_linux
Increasing what squashfs?


[5/4/2022 3:19 PM] szybet
Yea


[5/4/2022 3:19 PM] szybet
Onboard onboard


[5/4/2022 3:19 PM] szybet
I did it last week


[5/4/2022 4:58 PM] tux_linux
It's not a squashfs


[5/4/2022 4:58 PM] tux_linux
It's a file with vfat filesystem


[5/4/2022 5:47 PM] szybet
anyway i could be done with a script


[5/5/2022 10:28 AM] szybet
https://github.com/Kobo-InkBox/emu/issues/2

{Embed}
https://github.com/Kobo-InkBox/emu/issues/2
Problems with running · Issue #2 · Kobo-InkBox/emu
log: % env GITDIR=/mnt/HDD/Project/Public/emu/ ./qemu-boot VNC server running on ::1:5900 Booting Linux on physical CPU 0x0 Linux version 5.15.10 (szybet@ArchSzybet) (armv7l-linux-musleabihf-gcc (G...
/mnt/data/projects/git/conversations/media/2-C91A8


[5/5/2022 12:30 PM] szybet
And what is this: https://github.com/Kobo-InkBox/kernel/commit/069fc2fb3f7544d7b93bd07489af071961d8f958


[5/5/2022 12:30 PM] szybet
looks weird


[5/6/2022 11:23 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220506_232258-6FD17.jpg

{Reactions}
😂 

[5/6/2022 11:23 PM] szybet
https://tenor.com/view/kopfsch%C3%BCtteln-an-kopf-fassen-oh-no-facepalm-gif-14989627

{Embed}
https://tenor.com/view/kopfsch%C3%BCtteln-an-kopf-fassen-oh-no-facepalm-gif-14989627
/mnt/data/projects/git/conversations/media/kopfsch%25C3%25BCtteln-an-kopf-fassen-oh-n-9156D.png


[5/6/2022 11:24 PM] tux_linux
Even your checkbox is completely randomized


[5/6/2022 11:24 PM] szybet
Creating gui with qt in a nutshell


[5/6/2022 11:25 PM] szybet
well i think i found it:
```
QRadioButton::indicator{
color: #184880;
width: 10px;
height: 10px;
background: white;
border-width: 2px;
border-style: solid;
border-radius: 7px;
}

QRadioButton::indicator:checked
{
color: black;
background: black;
border-width: 2px;
border-style: solid;
border-radius: 7px;
border-color: white;
}
```
but where is the documentations about that? this was on the second page on google


[5/6/2022 11:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220506_234013-AF44D.jpg


[5/6/2022 11:40 PM] szybet
It gets better and better


[5/6/2022 11:40 PM] tux_linux
it should randomly change size each time it's called
it will be perfect


[5/6/2022 11:41 PM] szybet
exactly


[5/8/2022 2:33 PM] szybet
```
ui->textBackCard->selectAll();
ui->textBackCard->setAlignment(Qt::AlignCenter);
```
It segment faults on the kobo if there is no text


[5/8/2022 2:33 PM] szybet
🤦‍♂️


[5/8/2022 2:49 PM] szybet
@tux-linux  did you changed `/opt/device` to `inkbox_device`?


[5/8/2022 3:24 PM] tux_linux
for what? where? how?


[5/8/2022 3:24 PM] tux_linux
Welcome to Nonsensical Bugs™️


[5/8/2022 3:26 PM] szybet
for identyfying the device model


[5/8/2022 3:26 PM] szybet
/opt/


[5/8/2022 3:27 PM] tux_linux
in the rootfs and gui rootfs, it is `inkbox_device`
the initrd uses `device`


[5/8/2022 3:28 PM] szybet
why


[5/8/2022 3:28 PM] szybet
it cant be everywhere the same


[5/8/2022 3:28 PM] tux_linux
it's a complicated story


[5/8/2022 3:29 PM] szybet
;/


[5/8/2022 3:29 PM] tux_linux
any subsequent rootfs images will have `device`


[5/8/2022 3:29 PM] tux_linux
x11 rootfs has `device`, for example


[5/8/2022 3:29 PM] tux_linux
maybe i will change everything to `device` someday


[5/8/2022 3:29 PM] szybet
yea it would be nice


[5/8/2022 7:02 PM] szybet
https://github.com/Kobo-InkBox/emu/issues/2 any update on this?

{Embed}
https://github.com/Kobo-InkBox/emu/issues/2
Problems with running · Issue #2 · Kobo-InkBox/emu
log: % env GITDIR=/mnt/HDD/Project/Public/emu/ ./qemu-boot VNC server running on ::1:5900 Booting Linux on physical CPU 0x0 Linux version 5.15.10 (szybet@ArchSzybet) (armv7l-linux-musleabihf-gcc (G...
/mnt/data/projects/git/conversations/media/2-E97AE


[5/8/2022 7:09 PM] tux_linux
posted a new comment now


[5/8/2022 8:48 PM] szybet
how do I refresh the screen from qt, that qt widgets will refresh?


[5/8/2022 9:05 PM] szybet
isin't needed^ but what is this:


[5/8/2022 9:05 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220508_210452-A82BC.jpg


[5/8/2022 9:06 PM] szybet
cutted out text, only sometimes


[5/8/2022 9:06 PM] szybet
hmm


[5/8/2022 9:13 PM] tux_linux
`this->repaint();`


[5/8/2022 9:13 PM] tux_linux
what's it supposed to show?


[5/8/2022 9:13 PM] tux_linux
i don't understand polish


[5/8/2022 9:14 PM] szybet
just text


[5/8/2022 9:14 PM] szybet
an image is below


[5/8/2022 9:14 PM] szybet
and with some random "cards" its cutting off the text at beggining


[5/8/2022 9:14 PM] tux_linux
what are the contents of the container?


[5/8/2022 9:14 PM] szybet
container?


[5/8/2022 9:15 PM] tux_linux
what widgets


[5/8/2022 9:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F3720.png


[5/8/2022 9:16 PM] szybet
and its happening in the red arrow


[5/8/2022 9:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-56ACE.png


[5/8/2022 9:22 PM] tux_linux
ok, what are the contents of qtextbrowser?
html text?


[5/8/2022 9:22 PM] szybet
yes


[5/8/2022 11:59 PM] szybet
https://github.com/Szybet/sanki/releases/tag/testing a testing release

{Embed}
https://github.com/Szybet/sanki/releases/tag/testing
Release 0.1 · Szybet/sanki
Sanki has now all basic features, it is usable as a learning app, but many things are missing. Now im looking for bugs, UI improvments and other devices support and testing. Zip libraries-to-launch...
/mnt/data/projects/git/conversations/media/testing-43871

{Reactions}
🎉 

[5/9/2022 12:02 AM] szybet
@dill i hope you test it, it was, it is your fault ;p


[5/9/2022 10:02 AM] szybet
this question


[5/9/2022 10:02 AM] szybet
im still waiting for explanation


[5/9/2022 1:23 PM] szybet
where are scribble / calculator / other apps source code?


[5/9/2022 1:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FF6E1.png


[5/9/2022 1:26 PM] szybet
branches are, i think a bit of a mess


[5/9/2022 1:58 PM] tux_linux
It only shows busybox symlinks
Completely normal


[5/9/2022 1:59 PM] tux_linux
There aren't
I will upload them
Apart from calculator, they're qt examples


[5/9/2022 1:59 PM] szybet
why is everything symlinked to busybox


[5/9/2022 2:00 PM] szybet
not good


[5/9/2022 2:07 PM] tux_linux
Google that


[5/9/2022 2:18 PM] szybet
https://github.com/MichielDerhaeg/build-linux/issues/17
https://busybox.net/downloads/BusyBox.html
really weird


[5/9/2022 2:18 PM] tux_linux
Not weird, awesome


[5/9/2022 2:19 PM] szybet
like there isin't a better way


[5/9/2022 2:19 PM] tux_linux
Check the binary weight


[5/9/2022 2:19 PM] szybet
symlinks are eating up space to


[5/9/2022 2:19 PM] tux_linux
Not much


[5/9/2022 2:19 PM] szybet
when there are 3000+ of them then yes


[5/9/2022 2:19 PM] tux_linux
Your can invoke `busybox program` too


[5/9/2022 2:20 PM] tux_linux
Still not much, maybe only 50K


[5/9/2022 8:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E4DEA.png


[5/9/2022 8:29 PM] szybet
is this fine?


[5/9/2022 8:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-85B57.png


[5/9/2022 8:51 PM] tux_linux
Built-in


[5/9/2022 8:51 PM] tux_linux
It is good


[5/9/2022 8:51 PM] tux_linux
Add a scroll bar container


[5/9/2022 8:52 PM] szybet
there is one already


[5/9/2022 8:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7A67C.png


[5/9/2022 8:52 PM] tux_linux
Ok good


[5/9/2022 8:52 PM] tux_linux
So only that


[5/9/2022 8:52 PM] szybet
okay


[5/9/2022 8:53 PM] szybet
where apps should be storred? and the json?


[5/9/2022 9:00 PM] szybet
```
/tmp/inkbox: /mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /tmp/inkbox)
```


[5/9/2022 9:01 PM] szybet
I have a never toolchain


[5/9/2022 9:01 PM] szybet
i can use mine self built qt, but it would be good if i didn't need to


[5/9/2022 9:04 PM] szybet
wait... it points manually at `/mnt/onboard/.adds/`, i can't change that


[5/9/2022 9:05 PM] szybet
```
kobo:~# chroot /kobo /bin/ash -c "env LD_LIBRARY_PATH=/qt-linux-5.15.2-kobo/lib QT_QPA_PLATFORM=kobo /tmp/inkbox"
/tmp/inkbox: /mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /tmp/inkbox)
```
WTF


[5/9/2022 9:06 PM] szybet
hmm


[5/9/2022 9:11 PM] szybet
```
chroot /kobo /bin/ash -c "env LD_LIBRARY_PATH="/qt-linux-5.15.2-kobo/lib" QTPATH="/qt-linux-5.15.2-kobo" QT_
QPA_PLATFORM=kobo ADDSPATH="/" /tmp/inkbox"
```


[5/9/2022 9:11 PM] szybet
this doesn't work too


[5/9/2022 9:11 PM] szybet
sanki works fine...


[5/9/2022 9:14 PM] tux_linux
Put /lib in path too maybe


[5/9/2022 9:15 PM] szybet
or i can just bind `/mnt/onboard/.adds/qt-linux-5.15.2-kobo` to mine libs


[5/9/2022 9:15 PM] szybet
but how do i umount it


[5/9/2022 9:15 PM] tux_linux
unmount it


[5/9/2022 9:15 PM] tux_linux
Simply


[5/9/2022 9:16 PM] szybet
nope


[5/9/2022 9:16 PM] szybet
***Resource busy***


[5/9/2022 9:30 PM] szybet
```
chroot /kobo /bin/ash -c "env LD_LIBRARY_PATH="/qt-linux-5.15.2-kobo/lib:lib" QTPATH="/qt-linux-5.15.2-kobo"
 QT_QPA_PLATFORM=kobo ADDSPATH="/" /tmp/inkbox"
``` it launched with this


[5/9/2022 9:30 PM] szybet
for some reason


[5/9/2022 10:12 PM] szybet
actually with this: ( and with umounting the main qt lib )
```
chroot /kobo /bin/ash -c "env LD_LIBRARY_PATH="/qt-linux-5.15.2-kobo/lib:lib" QTPATH="/qt-linux-5.15.2-kobo" QT_QPA_PLATFORM=kobo ADDSPATH="/mnt/onboard/.adds/" PATH="${PATH}:/mnt/onboard/.adds/Python-3.9.2/" DEBUG=true QT_F
ONT_DPI=$(cat /kobo/mnt/onboard/.adds/inkbox/.config/09-dpi/config) LD_PRELOAD=/lib/invert_screen.so /tmp/inkbox"
```


[5/9/2022 10:12 PM] szybet
what is `/lib/invert_screen.so`?...


[5/9/2022 10:22 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220509_222129-944A3.jpg


[5/9/2022 10:22 PM] szybet
looks fine ( maybe more margin between widgets and scroll bar )


[5/9/2022 10:22 PM] szybet
but there is a repaint needed if there is no scrollbar


[5/9/2022 10:23 PM] szybet
scrollbars are broken on kobo's, they show and dissapear, so a blank line is still there


[5/9/2022 10:23 PM] szybet
here are my questions


[5/9/2022 10:24 PM] szybet
and can i create a small widget ( 3 files, ui, cpp and .h) that i will spawn dynamically? it would be better than creating those widgets manually with code?


[5/9/2022 10:34 PM] tux_linux
A new widget is better yeah


[5/9/2022 10:34 PM] tux_linux
I am still thinking about it


[5/9/2022 10:34 PM] szybet
okay, sure


[5/9/2022 10:35 PM] tux_linux
**Built-in**


[5/9/2022 10:35 PM] tux_linux
And fix your stylesheet (also, add lines like around the built-in apps label above)


[5/9/2022 10:35 PM] tux_linux
Otherwise, very nice


[5/9/2022 10:36 PM] szybet
**yes**


[5/9/2022 10:36 PM] szybet
stylesheet? you mean buttons? they were only for testing


[5/9/2022 10:36 PM] tux_linux
It's because you wrote "build-in"


[5/9/2022 10:37 PM] tux_linux
Yeah, well, for later


[5/9/2022 10:37 PM] szybet
yes i know

{Reactions}
👍 

[5/9/2022 10:37 PM] szybet
> add lines like around the built-in apps label above
what


[5/9/2022 10:37 PM] szybet
horizontal ones? where


[5/9/2022 10:37 PM] tux_linux
Yes


[5/9/2022 10:37 PM] tux_linux
Look in the widgets list
You'll find them


[5/9/2022 10:38 PM] tux_linux
'horizontal line'


[5/9/2022 10:38 PM] raycast_
Now install winehq


[5/9/2022 10:39 PM] szybet
there is already a horizontal line under built in


[5/9/2022 10:39 PM] szybet
and then build a rocket


[5/9/2022 10:39 PM] raycast_
No


[5/9/2022 10:40 PM] raycast_
Then I can try if my project works in winehq


[5/9/2022 10:40 PM] tux_linux
Put it around your label


[5/9/2022 10:40 PM] tux_linux
?


[5/9/2022 10:40 PM] raycast_
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P

{Embed}
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P
GitHub - BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P: trying to recreate ...
trying to recreate the cpu from http://simplecpudesign.com/simple_cpu_v1/index.html in the cmd - GitHub - BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P: trying to recreate the cpu from http://simplecpudesi...
/mnt/data/projects/git/conversations/media/c15a6b47-2739-432c-9026-92570303c560-83638


[5/9/2022 10:41 PM] szybet
i dont understand, you can later adjust it as you wish


[5/9/2022 10:42 PM] szybet
1. you know wine is x86 only?
2. holy cow a processor


[5/9/2022 10:43 PM] raycast_
Wine is arm and arm64 compatible too


[5/9/2022 10:43 PM] raycast_
You only need to build it yourself tho


[5/9/2022 10:43 PM] szybet
i have always had respect for people doing things like that, cpu in minecraft for example, its so smart


[5/9/2022 10:43 PM] szybet
um wow


[5/9/2022 10:44 PM] raycast_
Only the ALU works right now


[5/9/2022 10:44 PM] raycast_
No ram yet


[5/9/2022 10:44 PM] szybet
well still


[5/9/2022 10:44 PM] szybet
what resources for learning about cpus did you use?


[5/9/2022 10:44 PM] tux_linux
Probably only compatible with arm apps


[5/9/2022 10:45 PM] raycast_
I just recreated logic gates in the windows cmd


[5/9/2022 10:45 PM] tux_linux
Wine is only a translation layer


[5/9/2022 10:45 PM] raycast_
As long as it runs the cmd, it works


[5/9/2022 10:46 PM] raycast_
http://simplecpudesign.com/simple_cpu_v1/index.html


[5/9/2022 10:46 PM] raycast_
Probably will do a rewrite someday


[5/9/2022 10:47 PM] raycast_
Already had some ideas on how to optimize stuff


[5/9/2022 10:47 PM] szybet
i hate that im not a native english speaker... still thanks, looks interesting


[5/9/2022 10:48 PM] raycast_
I'm Dutch


[5/9/2022 10:49 PM] raycast_
I got forced to learn English cuz my dad wouldn't help me with stuff when I was younger


[5/9/2022 10:50 PM] szybet
good for you


[5/9/2022 10:50 PM] raycast_
I now have more trouble with my native language than with English


[5/9/2022 10:50 PM] szybet
**good for you**


[5/9/2022 10:51 PM] raycast_
Not that I'm that old


[5/9/2022 10:51 PM] szybet
well, i have problems with some specific words, especielly in technical themes


[5/9/2022 10:53 PM] raycast_
Singing karaoke at 2 am is very good for learning English


[5/9/2022 10:54 PM] szybet
a weird way to learn


[5/9/2022 10:55 PM] raycast_
It especially helps when you are in a voicecall on discord with random people from the United States


[5/9/2022 10:56 PM] raycast_
Wait


[5/9/2022 10:56 PM] raycast_
There is someone from the Netherlands in this discord server


[5/9/2022 10:56 PM] raycast_
@MartijnBraam hi other Dutch person


[5/9/2022 10:57 PM] szybet
how do you know he is dutch?


[5/9/2022 10:57 PM] raycast_
His steam


[5/9/2022 10:57 PM] szybet
is it a dutch name?


[5/9/2022 10:57 PM] raycast_
And his name


[5/9/2022 10:57 PM] raycast_
And mostly the pizza part


[5/9/2022 10:58 PM] szybet
every dutch has every other dutch person on steam added? 😁


[5/9/2022 10:58 PM] raycast_
No


[5/9/2022 10:58 PM] szybet
ummm italian?


[5/9/2022 10:58 PM] raycast_
No


[5/9/2022 10:58 PM] raycast_
Dutch people are known for either having pizza in their username or stuff like NL or banaan


[5/9/2022 10:59 PM] raycast_
Or they just have a name that's very Dutch


[5/9/2022 11:00 PM] szybet
what... why


[5/9/2022 11:00 PM] nonasuomy
Will he blow your mind if he's not?


[5/9/2022 11:00 PM] raycast_
Culture


[5/9/2022 11:00 PM] raycast_
Who's not?


[5/9/2022 11:00 PM] szybet
well okay


[5/9/2022 11:01 PM] raycast_
His steam says that he is dutch

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220509-230101_Chrome-34E74.png


[5/9/2022 11:01 PM] szybet
*if he wasn't dutch, **he is now***


[5/9/2022 11:02 PM] raycast_
No


[5/9/2022 11:02 PM] raycast_
Dutch flag can look like the flag of Luxembourg


[5/9/2022 11:02 PM] raycast_
That's why looking at the text is better


[5/9/2022 11:03 PM] raycast_
He might be asleep


[5/9/2022 11:03 PM] raycast_
It's 11pm after all


[5/9/2022 11:04 PM] raycast_
https://youtu.be/Ho0tabGLYmg lol

{Embed}
Jeaney Collects
https://www.youtube.com/watch?v=Ho0tabGLYmg
Two kids hitting each other with pencils
Ha! Your DEATH AND TAXES PUNCH is no match for my COMPOUNDING INTEREST MORTGAGE KICK!

Patreon: 
https://www.patreon.com/jeaneycollects

Twitter:
https://twitter.com/Jeaney_Collects

The Jeaney Collection:
https://www.thejeaneycollection.com/

Images:
https://filmdaily.co/memes/throwback-tumblr/
https://unsplash.com/photos/r4i36eR4g_g

Audio:
ht...
/mnt/data/projects/git/conversations/media/maxresdefault-3DC64.jpg


[5/9/2022 11:04 PM] nonasuomy
What did I just watch?


[5/9/2022 11:05 PM] raycast_
Something fun


[5/9/2022 11:06 PM] nonasuomy
Maybe direct that stuff at #chat instead of #dev.

{Reactions}
😊 

[5/9/2022 11:06 PM] raycast_
Ok


[5/10/2022 1:00 AM] the.mightydill
i certainly will lol


[5/10/2022 2:44 PM] szybet
```json
{
    "list": [
      {
        "AppName": "Sanki",
        "Author": "Szybet",
        "Version": "0.1 testing",
        "IconPath": "/sanki.png",
        "ExecPath": "/sanki",
        "Signed": true,
        "Enabled": false
      },
      {
        "AppName": "Syncthing",
        "Author": "Szybet",
        "Version": "0.1 testing",
        "IconPath": "/syncthing.png",
        "ExecPath": "/syncthing_arm.bin",
        "Signed": false,
        "Enabled": false
      }
    ]
}
```
i think this will be the structure for the json


[5/10/2022 2:44 PM] tux_linux
Ok
Nice
But no icons


[5/10/2022 2:44 PM] szybet
why :(


[5/10/2022 2:44 PM] tux_linux
It won't fit


[5/10/2022 2:44 PM] tux_linux
Eat too much RAM


[5/10/2022 2:44 PM] tux_linux
Crash InkBox


[5/10/2022 2:44 PM] szybet
😆


[5/10/2022 2:45 PM] szybet
set a static size


[5/10/2022 2:45 PM] szybet
common, only in app menu


[5/10/2022 2:45 PM] tux_linux
Even 200x300 icons make devices lag


[5/10/2022 2:45 PM] tux_linux
especially touch models


[5/10/2022 2:45 PM] szybet
you should try out sanki file manager ;p


[5/10/2022 2:45 PM] tux_linux
AAAAAH


[5/10/2022 2:45 PM] szybet
i think 30x30 max


[5/10/2022 2:46 PM] tux_linux
`/data/onboard/.apps/apps.json`
then preferably apps will go in `.apps` but json can point it to something else
json needs to use relative paths from onboard
so, for sanki, `.apps/sanki` as the path
then qt transforms it into absolute path


[5/10/2022 2:46 PM] tux_linux
ok?


[5/10/2022 2:47 PM] szybet
yea

{Reactions}
👍 

[5/10/2022 2:47 PM] szybet
its a security risk if there were full path


[5/10/2022 2:47 PM] tux_linux
yeah


[5/10/2022 2:48 PM] tux_linux
apps will need to be digitally signed
otherwise it's a security risk too


[5/10/2022 2:48 PM] tux_linux
so implement openssl verification like inkbox packages


[5/10/2022 2:48 PM] szybet
on rooted kernel, it will be not needed


[5/10/2022 2:48 PM] tux_linux
it will run, but you will be able to bypass it with a developer key


[5/10/2022 2:49 PM] tux_linux
see fake openssl implementation in /etc/init.d/update_inkbox for example


[5/10/2022 2:49 PM] tux_linux
so three files:
`/data/onboard/.apps/sanki`
`/data/onboard/.apps/sanki.dgst`
`/data/onboard/.apps/apps.json`


[5/10/2022 2:50 PM] szybet
no... make a directory for it


[5/10/2022 2:50 PM] szybet
it will be a mess soon


[5/10/2022 2:50 PM] tux_linux
Please try not to touch anything in mainwindow as I'm currently revamping the homepage and would like not to have to merge anything


[5/10/2022 2:50 PM] tux_linux
a directory per app?


[5/10/2022 2:50 PM] szybet
i won't

{Reactions}
👍 

[5/10/2022 2:50 PM] szybet
yes


[5/10/2022 2:50 PM] tux_linux
the app digest will always have the same name as the app except for the extension (a bit like kobox extensions)


[5/10/2022 2:51 PM] tux_linux
I'm not sure, unless you need config for your own app


[5/10/2022 2:51 PM] tux_linux
ok; make it an option, but users can place apps directly in there without a new directory if they want


[5/10/2022 2:51 PM] tux_linux
if it's too complicated, get back here and we'll try to find something better


[5/10/2022 2:54 PM] szybet
of course i need


[5/10/2022 2:55 PM] tux_linux
ok, then put config in a directory with the app


[5/10/2022 2:55 PM] szybet
how will we fix additional c libraries?


[5/10/2022 2:55 PM] tux_linux
in your launch script


[5/10/2022 2:56 PM] szybet
well okay


[5/10/2022 2:59 PM] szybet
couldn't we make this json for built in apps to? it will be possible to disable them from wiev


[5/10/2022 3:41 PM] tux_linux
No
We already discussed this before


[5/10/2022 3:41 PM] tux_linux
Sorry


[5/10/2022 3:42 PM] tux_linux
The public key to verify against will be located at /opt/key/apps-public.pem and it will be the same for all devices


[5/10/2022 3:43 PM] tux_linux
It would be too dangerous for the user, if the .apps folder was mistakenly deleted


[5/10/2022 5:18 PM] szybet
No folder for built in apps, just a json to represent them, so it was possible to disable them


[5/10/2022 11:19 PM] szybet
https://github.com/Kobo-InkBox/emu/issues/2

{Embed}
https://github.com/Kobo-InkBox/emu/issues/2
Problems with running · Issue #2 · Kobo-InkBox/emu
log: % env GITDIR=/mnt/HDD/Project/Public/emu/ ./qemu-boot VNC server running on ::1:5900 Booting Linux on physical CPU 0x0 Linux version 5.15.10 (szybet@ArchSzybet) (armv7l-linux-musleabihf-gcc (G...
/mnt/data/projects/git/conversations/media/2-09532


[5/10/2022 11:19 PM] szybet
you didn't see this, or you don't know what is causing that?


[5/11/2022 6:08 AM] tux_linux
I don't know what is causing it


[5/11/2022 6:09 AM] tux_linux
Irrelevant to put `AppName`, maybe only `Name`


[5/12/2022 9:35 PM] szybet
@tux-linux is networking working on the emulator?


[5/12/2022 9:36 PM] szybet
or is it simply not managed


[5/12/2022 10:29 PM] tux_linux
Yes it should


[5/12/2022 10:30 PM] szybet
i get this interface:


[5/12/2022 10:30 PM] szybet
br-61a74da3b5c2:


[5/12/2022 10:31 PM] szybet
but it has ip 172- and the kobo has 10-


[5/12/2022 10:31 PM] szybet
what went wrong


[5/12/2022 10:31 PM] szybet
i will try to change it manually


[5/12/2022 10:32 PM] tux_linux
???


[5/12/2022 10:32 PM] tux_linux
Your computer is possessed


[5/12/2022 10:33 PM] tux_linux
It's supposed to be eth0 and auto dhcp


[5/12/2022 10:33 PM] szybet
it has gnome now D:


[5/12/2022 10:33 PM] szybet
its eth0 in kobo


[5/12/2022 10:34 PM] tux_linux
Ok


[5/12/2022 10:34 PM] tux_linux
Oh
It's QEMU own interface


[5/12/2022 10:35 PM] tux_linux
udhcpc -i eth0
doesn't work?


[5/12/2022 11:39 PM] szybet
i will test it tommorow


[5/12/2022 11:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-8ACA1.png


[5/12/2022 11:40 PM] tux_linux
ok


[5/12/2022 11:40 PM] szybet
docker image for inkbox qt dev


[5/12/2022 11:40 PM] tux_linux
it really works?


[5/12/2022 11:40 PM] tux_linux
nice


[5/12/2022 11:40 PM] szybet
i mean


[5/12/2022 11:41 PM] szybet
the toolchain works without problems


[5/12/2022 11:41 PM] szybet
qt creator too


[5/12/2022 11:41 PM] szybet
the only issue i had was opengl and nvidia card


[5/12/2022 11:41 PM] szybet
but now it works


[5/12/2022 11:41 PM] tux_linux
in what way is opengl and nvidia related to compilation?


[5/12/2022 11:42 PM] szybet
without opengl qt designer is disabled in qt creator


[5/12/2022 11:42 PM] szybet
so its useless then


[5/13/2022 12:07 AM] nonasuomy
Do you compile uboot with your builds?


[5/13/2022 12:21 AM] tux_linux
Yes


[5/13/2022 12:41 AM] nonasuomy
have you tried this #define CONFIG_CMD_CACHE 1


[5/13/2022 9:03 AM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/docker-container.md
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/qt-setup.md

Now that everything is done, will you use it and update the libs on kobo's? so i didn't need to ship libraries for my apps


[5/13/2022 1:49 PM] szybet
```
Welcome to InkBox OS!
login[1241]: root login on 'ttyAMA0'
* Warning *
Root filesystem is mounted read-only.
Invoke `ifsctl mnt rootfs rw' to make it read-write.
inkbox:~# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 scope global eth0
       valid_lft forever preferred_lft forever
inkbox:~# udhcpc -i eth0
udhcpc: started, v1.33.0
udhcpc: sending discover
udhcpc: sending select for 10.0.2.15
udhcpc: lease of 10.0.2.15 obtained, lease time 86400
inkbox:~# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 scope global eth0
       valid_lft forever preferred_lft forever
inkbox:~# 


```


[5/13/2022 1:50 PM] szybet
```
sudo ifconfig br-61a74da3b5c2 10.0.2.16/24
13:50 szybet@hyperbookszyb /home/szybet
% ping 10.0.2.15                            
PING 10.0.2.15 (10.0.2.15) 56(84) bytes of data.
From 10.0.2.16 icmp_seq=1 Destination Host Unreachable
```


[5/13/2022 1:50 PM] szybet
nope


[5/13/2022 1:50 PM] szybet
sandly


[5/13/2022 1:51 PM] tux_linux
Ping will not work, it's normal


[5/13/2022 1:51 PM] szybet
???


[5/13/2022 1:51 PM] tux_linux
Look up slirp networking


[5/13/2022 1:51 PM] tux_linux
Try to wget something


[5/13/2022 1:52 PM] szybet
ssh doesn't work too


[5/13/2022 1:52 PM] tux_linux
SSH from where?


[5/13/2022 1:52 PM] szybet
PC to qemu


[5/13/2022 1:52 PM] tux_linux
You won't be able to access the emulator from outside


[5/13/2022 1:52 PM] tux_linux
Only serial console


[5/13/2022 1:52 PM] tux_linux
You can ssh from the emu though


[5/13/2022 1:52 PM] szybet
i need ssh for qtcreator


[5/13/2022 1:53 PM] tux_linux
?


[5/13/2022 1:53 PM] szybet
edited


[5/13/2022 1:53 PM] szybet
does wget really work?


[5/13/2022 1:53 PM] tux_linux
This works


[5/13/2022 1:54 PM] tux_linux
No need to ssh


[5/13/2022 1:54 PM] tux_linux
Just set up an http server in your build dir


[5/13/2022 1:54 PM] szybet
i dont see it works


[5/13/2022 1:54 PM] tux_linux
What's the command?


[5/13/2022 1:55 PM] szybet
wget


[5/13/2022 1:55 PM] tux_linux
The entire command and log


[5/13/2022 1:55 PM] szybet
why is it going to sleep...


[5/13/2022 1:55 PM] szybet
well first how do i wake it up


[5/13/2022 1:55 PM] tux_linux
You can't


[5/13/2022 1:55 PM] tux_linux
Force kill it


[5/13/2022 1:55 PM] szybet
😆


[5/13/2022 1:55 PM] szybet
sure


[5/13/2022 1:56 PM] tux_linux
on next reboot
echo -1 > /data/config/15-sleep_timeout/config


[5/13/2022 1:56 PM] szybet
yea


[5/13/2022 1:56 PM] tux_linux
It should not bother you anymore after that


[5/13/2022 1:56 PM] szybet
why is ssh not working actually?


[5/13/2022 1:56 PM] tux_linux
Might take another reboot to get the setting applied


[5/13/2022 1:57 PM] tux_linux
I could only find a way to forward one local port, the vnc one
It seems you can only forward one


[5/13/2022 1:57 PM] tux_linux
Check up QEMU cmd


[5/13/2022 1:57 PM] tux_linux
qemu-boot script


[5/13/2022 1:57 PM] szybet
wtf thiis sound stupid


[5/13/2022 1:57 PM] tux_linux
I know


[5/13/2022 1:57 PM] tux_linux
Find a way to fix it


[5/13/2022 1:58 PM] tux_linux
And I'll update the repo


[5/13/2022 1:58 PM] szybet
i will make a pull request with some changes soon

{Reactions}
👍 

[5/13/2022 2:00 PM] tux_linux
On mine ping doesn't work but wget does


[5/13/2022 2:04 PM] szybet
```
inkbox:~# wget 10.0.2.16/test/co
--2022-05-13 12:03:35--  http://10.0.2.16/test/co
Connecting to 10.0.2.16:80... failed: Host is unreachable.
inkbox:~# 

```


[5/13/2022 2:04 PM] szybet
soo why is it on the host that it sets another ip subset for br-61a74da3b5c2:


[5/13/2022 2:05 PM] szybet
oh wait, port


[5/13/2022 2:05 PM] szybet
nope


[5/13/2022 2:05 PM] szybet
still nothing


[5/13/2022 2:06 PM] szybet
```
inkbox:~# wget 172.18.0.1:8000/test/co
--2022-05-13 12:06:12--  http://172.18.0.1:8000/test/co
Connecting to 172.18.0.1:8000... failed: Connection refused.
inkbox:~# 

```


[5/13/2022 2:06 PM] szybet
i need to take a look at the script


[5/13/2022 2:06 PM] tux_linux
10.0.2.0 subnet is not accessible from the outside


[5/13/2022 2:07 PM] tux_linux
If you wget google.com?


[5/13/2022 2:07 PM] tux_linux
It's reaching something at least


[5/13/2022 2:08 PM] szybet
i dont think so


[5/13/2022 2:08 PM] szybet
wtf it works


[5/13/2022 2:08 PM] szybet
what is going on


[5/13/2022 2:08 PM] tux_linux
What are your using for http server?


[5/13/2022 2:09 PM] tux_linux
It would say no route to host otherwise


[5/13/2022 2:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-74530.png


[5/13/2022 2:11 PM] szybet
this is so weird


[5/13/2022 2:11 PM] szybet
but it works


[5/13/2022 2:11 PM] szybet
¯\_(ツ)_/¯


[5/13/2022 2:11 PM] tux_linux
Ok good


[5/13/2022 3:09 PM] szybet
you can't use on linux ports below 1024 without root or without using a kernel option 😋


[5/13/2022 5:01 PM] tux_linux
Ooooooooooooh


[5/13/2022 5:01 PM] tux_linux
You're right


[5/13/2022 10:13 PM] szybet
```json
{
    "list": [
      {
        "Name": "Sanki",
        "Author": "Szybet",
        "Version": "0.1 testing",
        "IconPath": "/sanki.png",
        "ExecPath": "/sanki",
        "Signed": true,
        "Enabled": false,
        "SupportedDevices": "n305,xxx,xxx"
      },
      {
        "Name": "Syncthing",
        "Author": "Szybet",
        "Version": "0.1 testing",
        "IconPath": "/syncthing.png",
        "ExecPath": "/syncthing_arm.bin",
        "Signed": false,
        "Enabled": false,
        "SupportedDevices": "n305,xxx,xxx"
      }
    ]
}
```


[5/13/2022 10:13 PM] szybet
updated json


[5/13/2022 10:13 PM] szybet
i hope i will do it this weekend


[5/13/2022 10:28 PM] tux_linux
Nia is n306


[5/13/2022 10:28 PM] szybet
i know, just a template


[5/13/2022 10:28 PM] tux_linux
But good idea for supported devices


[5/13/2022 10:28 PM] tux_linux
Also ideally no spaces in version numbers


[5/13/2022 10:29 PM] tux_linux
Otherwise, very good


[5/13/2022 10:29 PM] szybet
there aren't anny


[5/13/2022 10:29 PM] szybet
i will just use if SupportedDevices.contains(stirng)


[5/13/2022 10:42 PM] tux_linux
`0.1 testing`?


[5/13/2022 10:43 PM] szybet
oh there


[5/13/2022 10:43 PM] szybet
well its to the app developer


[5/13/2022 10:43 PM] szybet
0.1 version and github tag


[5/13/2022 11:21 PM] tux_linux
Ok


[5/14/2022 11:07 PM] szybet
i just cant figure this out


[5/14/2022 11:07 PM] szybet
ssh doesnt work to the emulator


[5/14/2022 11:07 PM] szybet
it doesnt work even from the emulator to the emulator


[5/14/2022 11:08 PM] szybet
its always Connection closed by


[5/14/2022 11:10 PM] tux_linux
is `/dev/pts` mounted?


[5/14/2022 11:10 PM] szybet
where


[5/14/2022 11:10 PM] tux_linux
is there something in `/dev/pts` on the emulator


[5/14/2022 11:10 PM] szybet
```
inkbox:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
fuse-overlayfs  115M   68M   39M  64% /
tmpfs            16M   28K   16M   1% /etc/passwd
/dev/mmcblk0p1   17M   17K   16M   1% /boot
tmpfs           8.0M  4.0K  8.0M   1% /root
/dev/mmcblk0p4  3.3G  2.2G  945M  70% /opt/storage
/dev/loop7      1.0M  1.0M     0 100% /opt/root
/dev/loop6      1.0M  1.0M     0 100% /opt/key
/dev/loop5      1.0M  1.0M     0 100% /modules
devtmpfs         10M     0   10M   0% /dev
tmpfs            16M   12K   16M   1% /tmp
tmpfs           8.0M  4.0K  8.0M   1% /var/log
tmpfs           128K     0  128K   0% /opt/developer
/dev/loop4      1.0M  1.0M     0 100% /lib/firmware
tmpfs           512K     0  512K   0% /var/db/dhcpcd
squashfuse       25M   25M     0 100% /opt/gui_rootfs/read
tmpfs           101M   72K  101M   1% /run
shm             502M     0  502M   0% /dev/shm
/dev/loop0      511M   16K  511M   1% /data/onboard
fuse-overlayfs  3.3G  2.2G  945M  70% /kobo
squashfuse       52M   52M     0 100% /opt/isa
squashfuse       12M   12M     0 100% /kobo/mnt/onboard/.adds/inkbox
squashfuse       24M   24M     0 100% /kobo/mnt/onboard/.adds/qt-linux-5.15.2-kobo
squashfuse       17M   17M     0 100% /kobo/mnt/onboard/.adds/Python-3.9.2
tmpfs           128M   16K  128M   1% /kobo/tmp
tmpfs           502M     0  502M   0% /kobo/inkbox
tmpfs           128M  4.0K  128M   1% /kobo/run

```


[5/14/2022 11:10 PM] tux_linux
`df -h` does not show everything


[5/14/2022 11:10 PM] tux_linux
you need `df -ha`


[5/14/2022 11:11 PM] szybet
;_;


[5/14/2022 11:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-9AEEC.txt


[5/14/2022 11:11 PM] tux_linux
ok it is


[5/14/2022 11:11 PM] tux_linux
it doesn't even work from the emulator?


[5/14/2022 11:11 PM] szybet
```
inkbox:~# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 scope global eth0
       valid_lft forever preferred_lft forever
inkbox:~# ssh root@120.0.2.15
^C
inkbox:~# ssh root@10.0.2.15
Connection closed by 10.0.2.15 port 22
inkbox:~# 


```


[5/14/2022 11:12 PM] tux_linux
then you can try telnet, it works


[5/14/2022 11:13 PM] szybet
how do i start it without boot flag?


[5/14/2022 11:13 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9B6CC.png


[5/14/2022 11:13 PM] tux_linux
You can just use the one from the initrd (`echo true > /boot/flags/INITRD_DEBUG`)


[5/14/2022 11:13 PM] tux_linux
To get a shell on the main rootfs, `chroot /mnt`


[5/14/2022 11:14 PM] tux_linux
You will need to forward on port 23


[5/14/2022 11:15 PM] szybet
i want ssh


[5/14/2022 11:15 PM] szybet
but i will test telnet


[5/14/2022 11:15 PM] tux_linux
do i look like i know why it doesn't work?


[5/14/2022 11:16 PM] szybet
;_;


[5/14/2022 11:16 PM] szybet
im lost with this


[5/14/2022 11:16 PM] tux_linux
telnet is not too bad


[5/14/2022 11:17 PM] tux_linux
you can also forward ftp port


[5/14/2022 11:17 PM] szybet
say qtcreator that


[5/14/2022 11:17 PM] tux_linux
use this


[5/14/2022 11:17 PM] szybet
i will propabyl hack into qtcreator and use this


[5/14/2022 11:17 PM] szybet
but still


[5/14/2022 11:17 PM] szybet
why the heck does ssh not work


[5/14/2022 11:18 PM] tux_linux
or go ahead and setup the whole bridge interface thing


[5/14/2022 11:18 PM] tux_linux
https://gist.github.com/extremecoders-re/e8fd8a67a515fee0c873dcafc81d811c

{Embed}
https://gist.github.com/extremecoders-re/e8fd8a67a515fee0c873dcafc81d811c
Setting up Qemu with a tap interface
Setting up Qemu with a tap interface. GitHub Gist: instantly share code, notes, and snippets.
/mnt/data/projects/git/conversations/media/gist-og-image-17482.png


[5/14/2022 11:18 PM] szybet
NOTHING WORKS


[5/14/2022 11:18 PM] szybet
NOTHING


[5/14/2022 11:18 PM] szybet
its a embedded device


[5/14/2022 11:18 PM] szybet
we need to use -net nic


[5/14/2022 11:18 PM] tux_linux
that way qemu will get an ip on your local subnet


[5/14/2022 11:18 PM] szybet
its not good


[5/14/2022 11:18 PM] tux_linux
what is not good?


[5/14/2022 11:19 PM] szybet
bridging it to lan


[5/14/2022 11:19 PM] tux_linux
it will probably be better than any kind of user networking


[5/14/2022 11:19 PM] tux_linux
besides, SLIRP is really slow


[5/14/2022 11:19 PM] tux_linux
like, 1M/s max download rate even on local network


[5/14/2022 11:22 PM] tux_linux
no way, ssh works on the kindle locally and not the emulator

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-28025.png


[5/14/2022 11:22 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-ACE07.png


[5/14/2022 11:22 PM] tux_linux
good


[5/14/2022 11:22 PM] szybet
what the fuck


[5/14/2022 11:22 PM] szybet
no


[5/14/2022 11:22 PM] szybet
it doesnt make sense


[5/14/2022 11:22 PM] tux_linux
oh, you can't login?


[5/14/2022 11:23 PM] tux_linux
oh, that
yeah, no sense at all


[5/14/2022 11:23 PM] szybet
```
Invoke `ifsctl mnt rootfs rw' to make it read-write.
inkbox:~# busybox-initrd telnetd
inkbox:~# login[1248]: invalid password for 'root' on 'pts/1'
login[1248]: invalid password for 'root' on 'pts/1'

```


[5/14/2022 11:23 PM] szybet
it connects


[5/14/2022 11:23 PM] tux_linux
yeah, you need to use the server from the initrd


[5/14/2022 11:23 PM] tux_linux
or launch telnetd like this:
```
busybox-initrd telnetd -l /bin/sh
```


[5/14/2022 11:24 PM] szybet
https://forum.qt.io/topic/39224/remote-debugging-with-telnet-instead-of-ssh

{Embed}
https://forum.qt.io/topic/39224/remote-debugging-with-telnet-instead-of-ssh
Remote debugging with telnet instead of ssh
I want to create a device for remote debugging in QtCreator 3.0.1, but I have to use telnet instead of ssh because there is no ssh available for my (special) target. Is there a way to achieve this? I tried Tools -> Options -> Devices -> Add and used both ...
/mnt/data/projects/git/conversations/media/8b0c0994983d8079db3c647fd641ebde-17427

{Reactions}
😂 

[5/14/2022 11:24 PM] szybet
hahahaha


[5/14/2022 11:25 PM] tux_linux
I've never used qtcreator for remote debugging


[5/14/2022 11:25 PM] tux_linux
always my trusty oneliner


[5/14/2022 11:27 PM] szybet
i will use it


[5/14/2022 11:27 PM] szybet
with qt creator


[5/14/2022 11:27 PM] szybet
and now i hate qemu


[5/14/2022 11:31 PM] tux_linux
https://lists.qt-project.org/pipermail/qt-creator/2017-December/006957.html
they don't give anything about it


[5/14/2022 11:40 PM] szybet
yea


[5/14/2022 11:40 PM] szybet
shrug


[5/15/2022 1:42 AM] szybet
```
chroot /mnt
chroot: failed to run command ‘/bin/ash’: No such file or directory
```


[5/15/2022 1:42 AM] szybet
mnt is empty


[5/15/2022 1:42 AM] tux_linux
`ls -l /`


[5/15/2022 1:43 AM] szybet
```
nkbox:/# ls -l /
total 5
drwxr-xr-x    2 root     root             0 May 12 18:52 bin
drwxr-xr-x    4 root     root          1024 May 12 18:52 boot
drwxr-xr-x    3 root     root             0 May 12 18:52 data
drwxr-xr-x    9 root     root          3220 May 14 22:19 dev
drwxr-xr-x   40 root     root             0 May 12 18:52 etc
drwxr-xr-x    2 root     root             0 May 12 18:52 home
drwxr-xr-x    4 root     root             0 May 12 18:52 include
drwxr-xr-x   20 user     user          4096 May 12 19:19 kobo
drwxr-xr-x    9 root     root             0 May 12 18:52 lib
drwxr-xr-x    3 root     root             0 May 12 18:52 libexec
drwxr-xr-x    2 root     root             0 May 12 18:52 lost+found
drwxr-xr-x    5 root     root             0 May 12 18:52 media
drwxr-xr-x    2 root     root             0 May 12 18:52 mnt
drwxr-xr-x    2 1001     1001           197 Jul 16  2021 modules
drwxr-xr-x   12 root     root             0 May 12 18:52 opt
dr-xr-xr-x  138 root     root             0 May 14 22:18 proc
drwxrwxrwt    3 root     root            80 May 14 22:20 root
drwxr-xr-x    5 root     root           220 May 14 22:21 run
drwxr-xr-x    2 root     root             0 May 12 18:52 sbin
drwxr-xr-x    2 root     root             0 May 12 18:52 selinux
drwxr-xr-x    3 root     root             0 May 12 18:52 share
drwxr-xr-x    2 root     root             0 May 12 18:52 srv
dr-xr-xr-x   12 root     root             0 May 14 22:18 sys
drwxrwxrwt    2 root     root           120 May 14 22:19 tmp
drwxr-xr-x   10 root     root             0 May 12 18:52 usr
drwxr-xr-x   12 root     root             0 May 12 18:52 var
drwxr-xr-x    2 root     root             0 May 12 18:52 xorg
inkbox:/# 


```


[5/15/2022 1:44 AM] tux_linux
you're already in the main root filesystem


[5/15/2022 1:44 AM] tux_linux
why do you need to chroot?


[5/15/2022 1:44 AM] tux_linux
chroot is only needed if you telnet to the server provided by the initrd


[5/15/2022 1:44 AM] tux_linux
(with `INITRD_DEBUG`)


[5/15/2022 1:44 AM] szybet
```
inkbox:/# ls /kobo
bin            etc            inkbox         lib32          media          opt            root           run            sys            usr
dev            external_root  lib            linuxrc        mnt            proc           rootfs.tar.xz  sbin           tmp            var

```


[5/15/2022 1:45 AM] szybet
where are my files


[5/15/2022 1:45 AM] tux_linux
what files?


[5/15/2022 1:45 AM] szybet
i created them


[5/15/2022 1:45 AM] szybet
some scripts


[5/15/2022 1:45 AM] szybet
oh crap this is the emulator


[5/15/2022 1:45 AM] szybet
im dumb


[5/15/2022 1:45 AM] tux_linux
hehe


[5/15/2022 11:44 AM] szybet
```
inkbox:~# busybox-initrd telnetd -l /bin/ash
inkbox:~# wget 192.168.88.22:8000/exec -O /kobo/tmp/exec;
--2022-05-15 09:43:57--  http://192.168.88.22:8000/exec
Connecting to 192.168.88.22:8000... connected.
HTTP request sent, awaiting response... 200 OK
Length: 7716492 (7.4M) [application/octet-stream]
Saving to: '/kobo/tmp/exec'

/kobo/tmp/exec      100%[===================>]   7.36M   711KB/s    in 11s     

2022-05-15 09:44:07 (711 KB/s) - '/kobo/tmp/exec' saved [7716492/7716492]

inkbox:~# wget 192.168.88.22:8000/exec -O /kobo/tmp/exec;
--2022-05-15 09:44:13--  http://192.168.88.22:8000/exec
Connecting to 192.168.88.22:8000... connected.
HTTP request sent, awaiting response... 200 OK
Length: 7716492 (7.4M) [application/octet-stream]
Saving to: '/kobo/tmp/exec'

/kobo/tmp/exec       90%[=================>  ]   6.63M   521KB/s    in 13s     

2022-05-15 09:44:26 (521 KB/s) - Connection closed at byte 6951457. Retrying.

--2022-05-15 09:44:27--  (try: 2)  http://192.168.88.22:8000/exec
Connecting to 192.168.88.22:8000... connected.
HTTP request sent, awaiting response... 206 Partial Content
Length: 7716492 (7.4M), 765035 (747K) remaining [application/octet-stream]
Saving to: '/kobo/tmp/exec'

/kobo/tmp/exec      100%[++++++++++++++++++=>]   7.36M   250KB/s    in 3.0s    

2022-05-15 09:44:30 (250 KB/s) - '/kobo/tmp/exec' saved [7716492/7716492]
```


[5/15/2022 11:45 AM] szybet
its horribly slow, and many errors


[5/15/2022 11:45 AM] szybet
its impossible to send 40Mb of inkbox


[5/15/2022 12:22 PM] raycast_
There is a typo on the first command


[5/15/2022 12:23 PM] raycast_
Try using curl


[5/15/2022 12:23 PM] raycast_
Or just copy stuff to your ereader using SFTP


[5/15/2022 12:28 PM] szybet
what where


[5/15/2022 12:28 PM] szybet
we will see


[5/15/2022 12:28 PM] raycast_
You typed /bin/ash


[5/15/2022 12:28 PM] raycast_
It should be /bin/bash


[5/15/2022 12:30 PM] szybet
https://en.wikipedia.org/wiki/Almquist_shell

{Embed}
https://en.wikipedia.org/wiki/Almquist_shell
Almquist shell
Almquist shell (also known as A Shell, ash and sh) is a lightweight Unix shell originally written by Kenneth Almquist in the late 1980s. Initially a clone of the System V.4 variant of the Bourne shell, it replaced the original Bourne shell in the BSD versions of Unix released in the early 1990s.


[5/15/2022 12:30 PM] raycast_
Oh


[5/15/2022 12:30 PM] raycast_
Just use bash tho


[5/15/2022 12:31 PM] szybet
i think there isin't bash in the first chroot


[5/15/2022 12:31 PM] raycast_
Chroot?


[5/15/2022 12:32 PM] szybet
inkbox "file system" is complicated


[5/15/2022 12:32 PM] raycast_
Just try if you can execute bash


[5/15/2022 12:32 PM] szybet
main initrd ( alpine ) -> main system chroot -> /kobo application chroot


[5/15/2022 12:32 PM] szybet
ash is fine


[5/15/2022 12:32 PM] raycast_
Bash is better


[5/15/2022 12:33 PM] szybet
sure


[5/15/2022 1:57 PM] szybet
```
inkbox:/kobo# chroot /kobo /bin/ash -c "env LD_LIBRARY_PATH=/qt-linux-5.15.2-kob
o/lib QT_QPA_PLATFORM=vnc /tmp/exec"
LOG: "Sanki started test 12" | file "main.cpp" In function: "main()"
qt.qpa.plugin: Could not load the Qt platform plugin "vnc" in "" even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalli
ng the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted

```


[5/15/2022 1:57 PM] szybet
HMM


[5/15/2022 2:00 PM] tux_linux
That's why I told you to bridge it to LAN
Slirp is really bad


[5/15/2022 2:00 PM] tux_linux
Just add `QT_QPA_PLATFORM=vnc:size=768x1024`


[5/15/2022 2:01 PM] tux_linux
c.f. /usr/bin/inkbox.sh


[5/15/2022 2:01 PM] szybet
i have managed it somehow to work, a pull request with all this is ocming


[5/15/2022 2:01 PM] szybet
oh ok


[5/15/2022 2:02 PM] tux_linux
How??


[5/15/2022 2:07 PM] szybet
`wget -no-http-keep-alive --no-cache --no-cookies -e robots=off -R "index.html*" --recursive --no-parent http://192.168.88.22/`


[5/15/2022 2:07 PM] szybet
especially `-no-http-keep-alive --no-cache`


[5/15/2022 2:07 PM] szybet
with this it maager to download 200 Mb of qt libs folder


[5/15/2022 2:08 PM] tux_linux
No way
Awesome


[5/15/2022 2:16 PM] szybet
https://github.com/Kobo-InkBox/emu/pull/3

{Embed}
https://github.com/Kobo-InkBox/emu/pull/3
telnet, ssh, better readme, small tutorial by Szybet · Pull Request...
I have spend more time on this that i would like to addmit
/mnt/data/projects/git/conversations/media/3-3D024


[5/15/2022 2:16 PM] szybet
4 days


[5/15/2022 2:16 PM] szybet
spend on qemu debuging, docker problems


[5/15/2022 2:16 PM] szybet
🥴


[5/15/2022 2:20 PM] tux_linux
You should change your qt_qpa_platform env in the readme
Good stuff


[5/15/2022 2:20 PM] szybet
qt_qpa_platform? where?


[5/15/2022 2:20 PM] tux_linux
In the readme?


[5/15/2022 2:20 PM] tux_linux
The oneliner


[5/15/2022 2:21 PM] tux_linux
You can just use busybox httpd for an http server


[5/15/2022 2:21 PM] szybet
you mean https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/launch_app.sh ?

{Embed}
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/launch_app.sh
kobo-nia-audio/launch_app.sh at main · Szybet/kobo-nia-audio
Kobo nia ereader with audio added. Contribute to Szybet/kobo-nia-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-nia-audio-4BDFE


[5/15/2022 2:21 PM] raycast_
There is audio on the Kobo Nia?


[5/15/2022 2:21 PM] szybet
there will be


[5/15/2022 2:21 PM] raycast_
How


[5/15/2022 2:21 PM] szybet
im working on it


[5/15/2022 2:21 PM] raycast_
There's no speaker right?


[5/15/2022 2:22 PM] tux_linux
No, in the readme of your pr


[5/15/2022 2:22 PM] szybet
a magnetically connected pcb on the back with a battery / usb sound card


[5/15/2022 2:22 PM] szybet
i still dont know where 🥴


[5/15/2022 2:23 PM] raycast_
Wut


[5/15/2022 2:23 PM] tux_linux
If you want to build with an existing kernel dir, use KERNELDIR env


[5/15/2022 2:23 PM] szybet
yes


[5/15/2022 2:23 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220515-082321-9670E.png


[5/15/2022 2:23 PM] raycast_
I no understand


[5/15/2022 2:23 PM] szybet
i was getting an error still soooo


[5/15/2022 2:23 PM] tux_linux
Ok


[5/15/2022 2:23 PM] szybet
OH, how do i change it now


[5/15/2022 2:24 PM] tux_linux
What error?


[5/15/2022 2:24 PM] tux_linux
Just make a new commit?


[5/15/2022 2:24 PM] tux_linux
In your pr?


[5/15/2022 2:25 PM] szybet
kernel build script looks to /home/build/kernel?


[5/15/2022 2:25 PM] szybet
em ok wait

{Reactions}
👍 

[5/15/2022 2:25 PM] tux_linux
it isn't in /home/build/inkbox/kernel?


[5/15/2022 2:26 PM] szybet
it git clone's it to emu/out or something like that


[5/15/2022 2:26 PM] szybet
so no


[5/15/2022 2:26 PM] szybet
but it looks to  /home/build/inkbox/kernel


[5/15/2022 2:26 PM] szybet
done


[5/15/2022 2:28 PM] raycast_
Explainnnnnnn


[5/15/2022 2:28 PM] szybet
there isin't much


[5/15/2022 2:28 PM] szybet
what part do you not understand


[5/15/2022 2:29 PM] raycast_
How is pcb connected?


[5/15/2022 2:29 PM] szybet
usb


[5/15/2022 2:29 PM] szybet
maybe serial


[5/15/2022 2:29 PM] szybet
propably usb


[5/15/2022 2:29 PM] raycast_
So using the USB port?


[5/15/2022 2:29 PM] raycast_
Otg?


[5/15/2022 2:37 PM] tux_linux
Ok thanks


[5/15/2022 2:37 PM] szybet
exactly


[5/15/2022 2:37 PM] raycast_
Aaaaaaaaah


[5/15/2022 3:34 PM] tux_linux
@Szybet does the PR look alright to you?


[5/15/2022 3:35 PM] raycast_
Can someone please turn off the sun?


[5/15/2022 3:36 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220515_153519-149AB.jpg


[5/15/2022 3:37 PM] raycast_
Hmmm might be a nice screensaver for my ereader


[5/15/2022 3:37 PM] tux_linux
maybe inkbox could implement an option of image-based screensavers


[5/15/2022 3:38 PM] raycast_
Yeah


[5/15/2022 3:40 PM] raycast_
Here's the picture in black and white

{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220515_1535194-43F34.jpg


[5/15/2022 3:40 PM] tux_linux
you should increase the contrast


[5/15/2022 3:40 PM] raycast_
K


[5/15/2022 3:42 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220515_1535195-95D5D.jpg


[5/15/2022 3:42 PM] tux_linux
niceee


[5/15/2022 3:44 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220515_1543192-AAB25.jpg


[5/15/2022 3:48 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220515_1546162-63990.jpg


[5/15/2022 6:13 PM] szybet
Yes


[5/15/2022 6:13 PM] szybet
What?


[5/15/2022 6:20 PM] szybet
um


[5/15/2022 6:20 PM] szybet
`Don't expect fabulous results if your hardware is a crappy i3 CPU from 2013, for example.`


[5/15/2022 6:21 PM] szybet
this sounds too... not nice


[5/15/2022 6:47 PM] tux_linux
well, if it is the case, the emulator will take literally 20 **minutes** to fully start up


[5/15/2022 7:23 PM] raycast_
The xeon x5675 would probably be able to run that


[5/15/2022 8:04 PM] the.mightydill
||like mine?||


[5/15/2022 8:04 PM] tux_linux
well...


[5/15/2022 8:05 PM] tux_linux
it doesn't mean it won't work


[5/15/2022 8:05 PM] tux_linux
but it will be sloooooooooooooooooooooooooooooooooooooooooooooooow


[5/15/2022 8:18 PM] raycast_
Will it run faster on armv7 or armv8 hardware?


[5/15/2022 8:24 PM] szybet
yes


[5/15/2022 8:57 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9FA48.png


[5/15/2022 8:58 PM] szybet
https://tenor.com/view/this-is-fine-fire-house-burning-okay-gif-5263684

{Embed}
https://tenor.com/view/this-is-fine-fire-house-burning-okay-gif-5263684
/mnt/data/projects/git/conversations/media/this-is-fine-fire-1743F.png


[5/15/2022 8:58 PM] szybet
well it compiles and all, but it hurts my eyes


[5/15/2022 8:58 PM] tux_linux
strange


[5/15/2022 8:59 PM] szybet
its running from docker


[5/15/2022 8:59 PM] szybet
soo


[5/15/2022 8:59 PM] szybet
make clean doesnt work


[5/15/2022 8:59 PM] szybet
for some reason


[5/15/2022 9:12 PM] szybet
um @tux-linux  where I can put variables that i use across the single widget?


[5/15/2022 9:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-222E9.png


[5/15/2022 9:12 PM] szybet
im doing something like this in sanki


[5/15/2022 9:13 PM] szybet
i need to store somewhere the QFile and QJsonObject


[5/15/2022 9:32 PM] szybet
```
        showToastNative("App Json File is missing");

```


[5/15/2022 9:32 PM] szybet
doesnt work in apps.cpp


[5/15/2022 9:34 PM] tux_linux
what "doesn't work"?


[5/15/2022 9:34 PM] szybet
it doesn't show the toast


[5/15/2022 9:34 PM] szybet
can i do this?


[5/15/2022 9:35 PM] tux_linux
a status bar?


[5/15/2022 9:35 PM] szybet
put variables in private


[5/15/2022 9:35 PM] szybet
you propably didn't connected the slot


[5/15/2022 9:36 PM] tux_linux
I did

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D9461.png


[5/15/2022 9:36 PM] szybet
well you can test it yourself


[5/15/2022 9:37 PM] tux_linux
what happens after that?


[5/15/2022 9:37 PM] tux_linux
in the code


[5/15/2022 9:37 PM] szybet
nothing


[5/15/2022 9:37 PM] szybet
but before this i added a log


[5/15/2022 9:37 PM] szybet
and the log is shown


[5/15/2022 10:19 PM] szybet
https://stackoverflow.com/questions/60591719/qt-creator-shows-errors-in-fresh-project-but-code-compiles-fine

{Embed}
https://stackoverflow.com/questions/60591719/qt-creator-shows-errors-in-fresh-project-but-code-compiles-fine
Qt Creator shows errors in fresh project, but code compiles fine
Context: I recently switched from debian stable to debian testing so I have updated several hundred packages since the last time I used QT creator.

When I create a new project in QT creator I am g...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[5/15/2022 10:19 PM] szybet
2 years


[5/15/2022 10:19 PM] szybet
still not fixed


[5/15/2022 10:20 PM] szybet
and thats why i use arch as main


[5/15/2022 10:51 PM] szybet
@tux-linux do you want small portions of code to verify or just the whole functionality?


[5/15/2022 10:54 PM] tux_linux
maybe small portions


[5/15/2022 11:21 PM] szybet
```
/mnt/onboard/.kobo/../../../
``` is a path like that a security risk?


[5/15/2022 11:21 PM] szybet
it propably is


[5/15/2022 11:24 PM] tux_linux
maybe?
why do you want to use that in the first place?


[5/15/2022 11:26 PM] szybet
me? no. someone? yes


[5/15/2022 11:26 PM] szybet
maybe? then need I to implement a check for it or not?


[5/15/2022 11:29 PM] tux_linux
if you want
but then you have to implement checks for `/mnt/onboard/.kobo/../../`, etc.


[5/15/2022 11:29 PM] szybet
if(string.contains("..")
{
// oh no


[5/15/2022 11:29 PM] szybet
}


[5/15/2022 11:30 PM] tux_linux
ok go ahead


[5/15/2022 11:51 PM] szybet
here it is as for today:


[5/15/2022 11:51 PM] szybet
https://github.com/Szybet/inkbox/commit/afced82d31cee3290414233762cbc2371ef22325

{Embed}
https://github.com/Szybet/inkbox/commit/afced82d31cee3290414233762cbc2371ef22325
json parsing, validating · Szybet/inkbox@afced82
/mnt/data/projects/git/conversations/media/afced82d31cee3290414233762cbc2371ef22325-E4800


[5/15/2022 11:51 PM] szybet
ignore userapp


[5/15/2022 11:51 PM] szybet
i saw this


[5/15/2022 11:51 PM] raycast_
Saw what?


[5/15/2022 11:52 PM] szybet
too much.


[5/15/2022 11:52 PM] raycast_
Too much what?


[5/15/2022 11:52 PM] szybet
this.


[5/15/2022 11:54 PM] szybet
do you really want to be the reason why a discord server based on a linux distro for ereaders implemented rules?


[5/15/2022 11:54 PM] raycast_
?


[5/15/2022 11:54 PM] raycast_
Me no understand


[5/15/2022 11:55 PM] szybet
dont send dancing no clothing shrek


[5/15/2022 11:55 PM] szybet
thanks


[5/15/2022 11:55 PM] raycast_
https://c.tenor.com/iL1-s5TP0yQAAAAM/el-papu-sdlg.gif

{Embed}
https://c.tenor.com/iL1-s5TP0yQAAAAM/el-papu-sdlg.gif
/mnt/data/projects/git/conversations/media/el-papu-sdlg-F46BA.gif


[5/15/2022 11:57 PM] tux_linux
good stuff


[5/15/2022 11:58 PM] szybet
everything is fine until you see 20 if's next to each other


[5/15/2022 11:59 PM] tux_linux
please respect inkbox coding style a bit;
```
if(something) {
  do_something();
}
else {
  do_stuff();
}
```
instead of
```
if(something)
{
  do_something();
} else {
  do_stuff();
}
```


[5/15/2022 11:59 PM] tux_linux
maybe use a `switch` statement?


[5/15/2022 11:59 PM] szybet
but qt creator does this


[5/15/2022 11:59 PM] tux_linux
i don't


[5/16/2022 12:00 AM] szybet
it wouldn't really help


[5/16/2022 12:00 AM] tux_linux
if is fine


[5/16/2022 12:01 AM] tux_linux
also, camel case variable names and function names


[5/16/2022 12:01 AM] tux_linux
`checkSuccess`


[5/16/2022 12:01 AM] szybet
im doing this


[5/16/2022 12:01 AM] tux_linux
really? (it is `check_success` in your commit)


[5/16/2022 12:02 AM] szybet
oh functions


[5/16/2022 12:02 AM] szybet
um other functions are writted like that


[5/16/2022 12:02 AM] tux_linux
they're really old


[5/16/2022 12:03 AM] tux_linux
new functions all use camel case


[5/16/2022 12:03 AM] szybet
okay, i will try to apply that

{Reactions}
👍 

[5/16/2022 12:06 AM] raycast_
First code triggers my autism


[5/16/2022 12:06 AM] tux_linux
I have autism too


[5/16/2022 12:06 AM] tux_linux
neither is great


[5/16/2022 12:06 AM] tux_linux
but the former takes less space


[5/16/2022 12:06 AM] szybet
its ***personal preference***


[5/16/2022 12:06 AM] raycast_
I prefer putting everything in a single line


[5/16/2022 12:06 AM] tux_linux
not really great for readability

{Reactions}
👍 

[5/16/2022 12:07 AM] raycast_
So?


[5/16/2022 12:07 AM] raycast_
It works for bat scripts


[5/16/2022 12:07 AM] tux_linux
try that in c++ functions


[5/16/2022 12:07 AM] tux_linux
... ouch


[5/16/2022 12:07 AM] szybet
*if you write the code, then you don't read it anymore!*


[5/16/2022 12:07 AM] raycast_
I mostly do it when I need to put 6 or more if statements after each other


[5/16/2022 12:08 AM] szybet
you are gonna hit a wall when you try even bash with writing like that


[5/16/2022 12:08 AM] raycast_
Nah


[5/16/2022 12:08 AM] raycast_
Although I need to fix that code tho


[5/16/2022 12:09 AM] tux_linux
Excuse me?
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/encfs


[5/16/2022 12:09 AM] raycast_
What a mess


[5/16/2022 12:09 AM] tux_linux
And yet, it's not a mess


[5/16/2022 12:10 AM] tux_linux
Everything makes sense


[5/16/2022 12:10 AM] tux_linux
You just need to understand it


[5/16/2022 12:10 AM] szybet
some code needs to look like that


[5/16/2022 12:10 AM] szybet
its not bad


[5/16/2022 12:10 AM] szybet
it would be worse if it was splitted in files


[5/16/2022 12:11 AM] raycast_
https://github.com/BlueMagicalWolf/RaceGame-CMD/blob/main/Race.cmd

It's a shame that it broke

{Embed}
https://github.com/BlueMagicalWolf/RaceGame-CMD/blob/main/Race.cmd
RaceGame-CMD/Race.cmd at main · BlueMagicalWolf/RaceGame-CMD
WIP. Contribute to BlueMagicalWolf/RaceGame-CMD development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/RaceGame-CMD-8B0BE


[5/16/2022 12:12 AM] nonasuomy
Do kernel modules get put into the uImage?


[5/16/2022 12:12 AM] szybet
oh goodness


[5/16/2022 12:12 AM] szybet
they can, but they can be put on a partition too


[5/16/2022 12:13 AM] raycast_
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P

I also need to do a rewrite of this soon

{Embed}
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P
GitHub - BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P: trying to recreate ...
trying to recreate the cpu from http://simplecpudesign.com/simple_cpu_v1/index.html in the cmd - GitHub - BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P: trying to recreate the cpu from http://simplecpudesi...
/mnt/data/projects/git/conversations/media/c15a6b47-2739-432c-9026-92570303c560-83638


[5/16/2022 12:13 AM] raycast_
Want to switch to using functions instead of repeating everything over and over


[5/16/2022 12:14 AM] raycast_
I already wrote the functions


[5/16/2022 12:14 AM] raycast_
But am too lazy to continue for now


[5/16/2022 12:14 AM] raycast_
And I haven't made the ram and shit yet


[5/16/2022 12:15 AM] raycast_
So only the alu works right now


[5/16/2022 12:21 AM] nonasuomy
What happens when autism is triggered?


[5/16/2022 12:34 AM] raycast_
You don't want to know


[5/16/2022 1:20 AM] tux_linux
@Szybet I updated the Qt libs (you will need to recompile kernel, rootfs and gui bundle (including recompiling inkbox with the latest commit, or Wi-Fi will make the GUI crash)


[5/16/2022 1:22 AM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/commit/c7f98e513f522df5bf2b164a19c696b3cda21565 and https://github.com/Kobo-InkBox/gui-bundle/commit/6c33d7d62a576021867d7b59a02acf581ca8be66

{Reactions}
🥳 

[5/16/2022 7:47 AM] szybet
Thanks


[5/16/2022 7:47 AM] szybet
Its weird a bit


[5/16/2022 7:51 AM] szybet
Did my guide work for you?


[5/16/2022 8:00 AM] szybet
And you didn't updated the tollchain in kernel repo right?


[5/16/2022 8:56 AM] szybet
i will make a pull request


[5/16/2022 8:56 AM] szybet
and i hope nothing breaks 🥴


[5/16/2022 12:19 PM] szybet
but its using nickel toolchain


[5/16/2022 12:20 PM] szybet
but the kobo is used for qt


[5/16/2022 12:20 PM] szybet
then why do i need to recompile the kernel


[5/16/2022 1:46 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle/pull/1

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/pull/1
fixes that worked for me, readme and a faster way to download neede...
…things
/mnt/data/projects/git/conversations/media/1-1C67B


[5/16/2022 1:57 PM] szybet
thats cool


[5/16/2022 1:57 PM] szybet
https://skyline.github.com/tux-linux/2021


[5/16/2022 1:57 PM] szybet
https://skyline.github.com/szybet/2021


[5/16/2022 2:05 PM] tux_linux
Qt Creator doesn't build binaries in the project folder by default


[5/16/2022 2:05 PM] szybet
i said that


[5/16/2022 2:05 PM] szybet
2 times


[5/16/2022 2:05 PM] szybet
there


[5/16/2022 2:05 PM] szybet
remove shadow builds


[5/16/2022 2:06 PM] tux_linux
It's that option?


[5/16/2022 2:06 PM] tux_linux
The name makes no sense


[5/16/2022 2:06 PM] szybet
yes.


[5/16/2022 2:08 PM] szybet
this? important question


[5/16/2022 2:08 PM] szybet
there are no changes to the kernel repo


[5/16/2022 2:08 PM] tux_linux
??


[5/16/2022 2:08 PM] szybet
the toolchain is the same


[5/16/2022 2:09 PM] szybet
only thing is kindle touch


[5/16/2022 2:09 PM] tux_linux
It is not directly related, but some things won't work if you don't


[5/16/2022 2:09 PM] tux_linux
Not true


[5/16/2022 2:09 PM] szybet
but if i compile it with the same toolchain


[5/16/2022 2:09 PM] szybet
then whats the diffrence


[5/16/2022 2:09 PM] tux_linux
It doesn't matter


[5/16/2022 2:09 PM] szybet
it doesnt make sense to me


[5/16/2022 2:10 PM] tux_linux
If you don't recompile the kernel, FBInk will not work in the rootfs


[5/16/2022 2:10 PM] tux_linux
There will also be modules issues


[5/16/2022 2:10 PM] szybet
why?


[5/16/2022 2:10 PM] szybet
what changed ;_;


[5/16/2022 2:10 PM] szybet
also how do i install the modulea after this?


[5/16/2022 2:10 PM] szybet
there is propably info on this in nia thread


[5/16/2022 2:10 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/d58aa90cfabbd2f9aef31b54fe76da24faad80f2

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/d58aa90cfabbd2f9aef31b54fe76da24faad80f2
initrd: small fixes · Kobo-InkBox/kernel@d58aa90
/mnt/data/projects/git/conversations/media/d58aa90cfabbd2f9aef31b54fe76da24faad80f2-CE582


[5/16/2022 2:10 PM] szybet
oh okay


[5/16/2022 2:11 PM] szybet
small fixes


[5/16/2022 2:11 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/11d55cb8dfa976c7460c91cc21ada66d20f261d2

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/11d55cb8dfa976c7460c91cc21ada66d20f261d2
KT: Implement ppoll syscall; initrd fixes · Kobo-InkBox/kernel@11d5...
The former was done following this commit: https://github.com/torvalds/linux/commit/369842658a36bcea28ecb643ba4bdb53919330dd
/mnt/data/projects/git/conversations/media/11d55cb8dfa976c7460c91cc21ada66d20f261d2-29695


[5/16/2022 2:11 PM] szybet
its more like redesign then fixes


[5/16/2022 2:11 PM] tux_linux
Well, it's non breaking, but it's not convenient not to have FBInk nor any modules available


[5/16/2022 2:12 PM] szybet
are they built in?


[5/16/2022 2:12 PM] tux_linux
Yes


[5/16/2022 2:12 PM] szybet
so i dont need to tinker with them


[5/16/2022 2:12 PM] szybet
nice


[5/16/2022 2:13 PM] tux_linux
Only thing that changed is that /modules is a symlink now


[5/16/2022 2:14 PM] szybet
okay


[5/17/2022 12:41 AM] szybet
@tux-linux will the new menu have a progress thing for readed pages of the book


[5/17/2022 12:41 AM] szybet
It would be soooo cool


[5/17/2022 1:02 AM] tux_linux
why not


[5/17/2022 1:02 AM] tux_linux
more brain damage is always welcome  (just joking) 😉


[5/17/2022 7:51 AM] szybet
https://github.com/Kobo-InkBox/gui-bundle/pull/1

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/pull/1
fixes that worked for me, readme and a faster way to download neede...
…things
/mnt/data/projects/git/conversations/media/1-1C67B


[5/17/2022 7:51 AM] szybet
what with this


[5/17/2022 10:22 AM] szybet
scp works flawlessly for the emu


[5/17/2022 10:22 AM] szybet
i will make a pull request


[5/17/2022 11:23 AM] raycast_
Why would people wear a facemask?


[5/17/2022 11:23 AM] raycast_
Wearing a book cover seems more effective


[5/17/2022 11:23 AM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_112250-7FF9B.jpg


[5/17/2022 11:24 AM] szybet
becouse book worms


[5/17/2022 11:24 AM] szybet
🥴


[5/17/2022 11:24 AM] raycast_
Imma go wear this when entering the school


[5/17/2022 11:26 AM] raycast_
Why are there so many PCs and shit at my place


[5/17/2022 11:27 AM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_112729-6CBBA.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_112724-03076.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_112717-E19F2.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_112706-353E9.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_112631-7B1CE.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_112622-E7933.jpg


[5/17/2022 11:27 AM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_112620-15DD5.jpg


[5/17/2022 11:28 AM] szybet
clean your room


[5/17/2022 11:28 AM] szybet
😄


[5/17/2022 11:28 AM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_112829-17F37.jpg


[5/17/2022 11:28 AM] raycast_
I know it's a mess


[5/17/2022 11:29 AM] raycast_
1 server
3 working PCs
1 pc that only is missing a power supply, GPU and ram
1 pc that is missing a CPU fan, power supply, ram, GPU and more fans


[5/17/2022 11:30 AM] raycast_
3 laptops


[5/17/2022 11:30 AM] raycast_
3 microtiks


[5/17/2022 11:30 AM] raycast_
Some switches


[5/17/2022 11:30 AM] raycast_
A sophos firewall


[5/17/2022 11:31 AM] raycast_
We also have 3x a raspberry pi 3 of which 2 are broken (one has a molten USB controller the other misses a resistor) and 1x a raspberry pi 4


[5/17/2022 11:32 AM] raycast_
2x a Synology nas


[5/17/2022 11:32 AM] raycast_
3x ancient laptops


[5/17/2022 11:32 AM] szybet
fix the pi's


[5/17/2022 11:32 AM] raycast_
1x playstation 3
2x PlayStation 2


[5/17/2022 11:33 AM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_113255-F3E34.jpg
/mnt/data/projects/git/conversations/media/IMG_20220517_113301-344DF.jpg


[5/17/2022 11:33 AM] raycast_
Can't find the required parts


[5/17/2022 11:33 AM] raycast_
We do have a soldering iron tho


[5/17/2022 11:34 AM] raycast_
The pinecil or something

The firmware is opensource if I remember correctly


[5/17/2022 11:35 AM] raycast_
We also have some  Amazon echo dots and a echo plus


[5/17/2022 11:35 AM] raycast_
Or maybe 2x a echo plus


[5/17/2022 11:41 AM] raycast_
The server has 10 cores and 24gb ram

My pc has 16gb ram, a AMD Radeon R9 280x 3gb and the CPU is a AMD Ryzen 5 5600x

My dad's pc has 32gb ram, a AMD Ryzen 7 3700x I don't remember what his GPU was but I think it was a AMD Radeon Rx 570 6gb

My lil sisters pc has 16gb ram, a Intel i5 3470 and a Nvidia GTX 660 2gb


We still have a Nvidia GTX 750 2gb and a AMD Radeon HD7770 1gb laying around


[5/17/2022 11:42 AM] raycast_
The Synology nas are a DS212j and a DS218+


[5/17/2022 11:44 AM] raycast_
It's a dungeon of tech here I guess


[5/17/2022 8:00 PM] szybet
@tux-linux  you can start thinking about inkbox user app file extension / format to install them


[5/17/2022 8:02 PM] tux_linux
What do you mean?


[5/17/2022 8:02 PM] tux_linux
I'd just think about a signed executable package


[5/17/2022 8:02 PM] tux_linux
Extracted to onboard


[5/17/2022 8:02 PM] tux_linux
Or maybe a squashfs
Idk


[5/17/2022 8:02 PM] szybet
what will it look like? pkg.ink.tar? zip or tar?


[5/17/2022 8:03 PM] tux_linux
Just tar xz
Or.isa if it's a squashfs


[5/17/2022 8:03 PM] szybet
also could you point me to resources / examples how to verify if the package is valid?


[5/17/2022 8:03 PM] szybet
"sign"


[5/17/2022 8:03 PM] tux_linux
https://www.bradfordembedded.com/2016/06/openssl-file-signing


[5/17/2022 8:03 PM] szybet
and in qt?


[5/17/2022 8:04 PM] tux_linux
Nothing


[5/17/2022 8:04 PM] szybet
ym what


[5/17/2022 8:04 PM] tux_linux
Well, note here: I don't embed the digest in the file, they're separate files


[5/17/2022 8:04 PM] tux_linux
I don't use qt to verify things


[5/17/2022 8:04 PM] tux_linux
Shell scripts


[5/17/2022 8:04 PM] tux_linux
You can probably use OpenSSL headers


[5/17/2022 8:04 PM] tux_linux
They are in the sysroot


[5/17/2022 8:05 PM] szybet
so in inkbox i show a qdialog "would you like to install this user app" and then launch a script?


[5/17/2022 8:06 PM] szybet
how do i show errors that they are not signed / signed wrongly? or smth


[5/17/2022 8:07 PM] szybet
also you putted apps to /kobo/mnt/onboard/onboard/ , do you want that the user can edit them?


[5/17/2022 8:07 PM] tux_linux
I don't think they need to be installed


[5/17/2022 8:07 PM] tux_linux
Only put to .apps in exported onboard storage


[5/17/2022 8:07 PM] szybet
?


[5/17/2022 8:07 PM] szybet
they need


[5/17/2022 8:07 PM] szybet
how do i update the json file?...


[5/17/2022 8:08 PM] tux_linux
Check at each boot


[5/17/2022 8:08 PM] szybet
👀


[5/17/2022 8:08 PM] tux_linux
No, better


[5/17/2022 8:08 PM] szybet
you really like to make the boot longer


[5/17/2022 8:08 PM] tux_linux
Check when the usbms session exits


[5/17/2022 8:09 PM] szybet
how and when will they be checked if they are signed


[5/17/2022 8:09 PM] tux_linux
If signature is invalid, just don't show the app
And create a file in subdir of the app containing an error code
E.g. 1 for invalid signature


[5/17/2022 8:10 PM] szybet
its not user friendly


[5/17/2022 8:10 PM] szybet
can i maybe show an error after usbstorage if there is a file with error?


[5/17/2022 8:56 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220517_205605-E6233.jpg


[5/17/2022 8:56 PM] szybet
Hmm, built in apps is in wrong place


[5/17/2022 9:14 PM] tux_linux
Nice


[5/17/2022 9:14 PM] tux_linux
No, it's fine


[5/17/2022 9:14 PM] szybet
no


[5/17/2022 9:14 PM] tux_linux
But please correct your typo
"Built-in apps"


[5/17/2022 9:14 PM] tux_linux
Why?


[5/17/2022 9:15 PM] tux_linux
Ooh


[5/17/2022 9:15 PM] szybet
can you try building the nia kernel? i have problems


[5/17/2022 9:15 PM] tux_linux
Which ones?


[5/17/2022 9:15 PM] szybet
hm?


[5/17/2022 9:15 PM] tux_linux
Don't have access to my computer right now


[5/17/2022 9:15 PM] szybet
okay, i will try some more


[5/17/2022 9:15 PM] tux_linux
Which problems


[5/17/2022 9:16 PM] szybet
fbink something errored while compiling kernel


[5/17/2022 9:16 PM] tux_linux
Huh


[5/17/2022 9:16 PM] tux_linux
Log?


[5/17/2022 9:16 PM] szybet
i recently wiped out my machine, maybe im missing some dependiences


[5/17/2022 9:16 PM] szybet
+ im building it as root


[5/17/2022 9:16 PM] tux_linux
Please


[5/17/2022 9:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-9E0E9.txt


[5/17/2022 11:40 PM] szybet
https://github.com/Szybet/inkbox/commit/71af21d198ec7c37285644630c32d1a214e8abe5

{Embed}
https://github.com/Szybet/inkbox/commit/71af21d198ec7c37285644630c32d1a214e8abe5
userapps widget - showing · Szybet/inkbox@71af21d
/mnt/data/projects/git/conversations/media/71af21d198ec7c37285644630c32d1a214e8abe5-F426D


[5/17/2022 11:40 PM] szybet
well function names


[5/17/2022 11:40 PM] szybet
those generated by qt creator - i would leave them as there are


[5/18/2022 11:04 AM] szybet
What is requesting dhcp in the emulator?


[5/18/2022 11:05 AM] szybet
:/


[5/18/2022 12:45 PM] tux_linux
What do you mean?


[5/18/2022 12:53 PM] szybet
what service


[5/18/2022 12:53 PM] szybet
and why the fu... is network inside qemu dying after some time


[5/18/2022 12:53 PM] szybet
it just dies


[5/18/2022 12:53 PM] szybet
i cant figure this out


[5/18/2022 12:54 PM] tux_linux
It dies on my laptop too
Kernel bug


[5/18/2022 12:54 PM] szybet
gwrmkojngv


[5/18/2022 12:55 PM] tux_linux
It does not die on my Debian vm


[5/18/2022 12:55 PM] tux_linux
I don't know why at all


[5/18/2022 12:55 PM] szybet
could you switch to LAN9118 ethernet in qemu, and not using user ( nic ) network?


[5/18/2022 12:56 PM] szybet
this could maybe work


[5/18/2022 12:56 PM] szybet
im done for now with qemu


[5/18/2022 12:56 PM] tux_linux
I'll see


[5/18/2022 12:58 PM] szybet
but they are in isa files


[5/18/2022 12:59 PM] szybet
they have limited space


[5/18/2022 12:59 PM] tux_linux
Yeah
Not the user data folders


[5/18/2022 12:59 PM] szybet
can't we just simply


[5/18/2022 12:59 PM] szybet
/kobo/mnt/onboard/onboard/.apps_storage/sanki?


[5/18/2022 12:59 PM] tux_linux
The app is mounted read-only but can write to its user data dir


[5/18/2022 12:59 PM] tux_linux
Maybe too


[5/18/2022 1:00 PM] szybet
yes i can agree with that


[5/18/2022 1:00 PM] szybet
how will you manage permissions?


[5/18/2022 1:00 PM] szybet
or is it too much


[5/18/2022 1:00 PM] tux_linux
We would need selinux


[5/18/2022 1:00 PM] szybet
no.


[5/18/2022 1:00 PM] tux_linux
It's complicated


[5/18/2022 1:01 PM] tux_linux
Otherwise there isn't any way


[5/18/2022 1:01 PM] tux_linux
AFAIK


[5/18/2022 1:01 PM] szybet
user apps are a security risk. end.


[5/18/2022 1:01 PM] szybet
we can use signed ones


[5/18/2022 1:01 PM] szybet
but thats all


[5/18/2022 1:01 PM] tux_linux
And selinux minimizes the risk


[5/18/2022 1:01 PM] szybet
you won't add selinux


[5/18/2022 1:01 PM] tux_linux
But that's probably going too far


[5/18/2022 1:01 PM] szybet
don't


[5/18/2022 1:02 PM] szybet
if you keep adding node / selinux / other things then inkbox will be slow soon


[5/18/2022 1:02 PM] tux_linux
Selinux is a cool thing


[5/18/2022 1:02 PM] szybet
already now people are complaining about boot time


[5/18/2022 1:02 PM] szybet
those are ereaders
they have one core in a low power arm cpu.


[5/18/2022 1:02 PM] tux_linux
It's implemented in kernel


[5/18/2022 1:03 PM] szybet
dont


[5/18/2022 1:03 PM] szybet
simply dont


[5/18/2022 1:03 PM] tux_linux
Fun fact: verifying an ISA package of <10M takes about one second on a Kobo


[5/18/2022 1:05 PM] tux_linux
Ok, but there will be no permission managing for user apps


[5/18/2022 1:05 PM] szybet
```
1. Put .isa app bundle in .apps
2. On next reboot a shell script detects if there are apps there. If yes it verifies the bundle and if successful creates a folder and mounts the app to it. If signature is invalid it might display an alert splash or a dialog (generalDialog) to tell the user.
It will need to be run each time inkbox_gui starts, and maybe it can be an ibxd FIFO function to allow live updating
```
you will do this, right?


[5/18/2022 1:05 PM] szybet
sound like openrc hell


[5/18/2022 1:05 PM] tux_linux
Why


[5/18/2022 1:05 PM] szybet
becouse it is


[5/18/2022 1:05 PM] tux_linux
Yes I can do it


[5/18/2022 1:05 PM] tux_linux
I don't feel it's a pain


[5/18/2022 1:06 PM] szybet
thanks


[5/18/2022 1:06 PM] szybet
can you write the code in that way that it would be easy to purge the verify process? for testing purpuses


[5/18/2022 1:06 PM] tux_linux
**that** was a pain https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/startx

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/startx
kernel/startx at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-8E545


[5/18/2022 1:06 PM] tux_linux
Yes, I will provide an option to disable it with developer mode


[5/18/2022 1:06 PM] szybet
its pain to look at


[5/18/2022 1:07 PM] tux_linux
BTW you don't have devmode set up right?


[5/18/2022 1:07 PM] szybet
no


[5/18/2022 1:07 PM] szybet
is there a thing like that?


[5/18/2022 1:07 PM] tux_linux
That will speed up your boot time
Maybe a bit less without x11, but still


[5/18/2022 1:07 PM] tux_linux
Yes


[5/18/2022 1:07 PM] szybet
what


[5/18/2022 1:07 PM] szybet
only boot time?


[5/18/2022 1:08 PM] tux_linux
Yeah


[5/18/2022 1:08 PM] szybet
not really benefiting to me


[5/18/2022 1:08 PM] tux_linux
There's the way to do it


[5/18/2022 1:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-54672.png


[5/18/2022 1:08 PM] szybet
btw^


[5/18/2022 1:08 PM] tux_linux
and how do you enable apps?


[5/18/2022 1:09 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5DA03.png


[5/18/2022 1:09 PM] tux_linux
good


[5/18/2022 1:09 PM] szybet
it only changes the bool in the json


[5/18/2022 1:10 PM] szybet
if i only had the emulator now, i could program inkbox in the shadows the entire day


[5/18/2022 1:10 PM] szybet
without it i need to quess if it works


[5/18/2022 1:13 PM] tux_linux
```
dd if=/dev/mmcblk0 bs=256 skip=2 count=1
# Copy-paste the string, no pipe, it seems to not like that for some reason
echo -n "uid-string" | openssl dgst -sha256 -sign private.pem -out key.dgst
echo 1 | dd of=/dev/mmcblk0 bs=256 seek=159746
echo -n "uid-string" | dd of=/dev/mmcblk0 bs=256 seek=159748
dd if=key.dgst of=/dev/mmcblk0 bs=256 seek=159750
sync
```


[5/18/2022 1:14 PM] tux_linux
See https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/developer-key for reference


[5/18/2022 1:14 PM] tux_linux
Sorry, not my fault, I don't like it either


[5/18/2022 1:15 PM] szybet
this could be cool if it was testing kernel things


[5/18/2022 1:15 PM] szybet
faster boot time


[5/18/2022 1:15 PM] szybet
maybe in the future


[5/18/2022 1:21 PM] tux_linux
?


[5/18/2022 1:22 PM] szybet
.


[5/18/2022 1:23 PM] tux_linux
If users see this, want to enable developer mode  and don't have the private key for their device, please email me or send me a DM so I can sign it for you


[5/18/2022 1:23 PM] tux_linux
How do you want to do that? It's already implemented for x11


[5/18/2022 1:24 PM] szybet
im talking about this


[5/18/2022 1:24 PM] szybet
can i use for this the nia key?


[5/18/2022 1:24 PM] tux_linux
Yes


[5/18/2022 1:24 PM] tux_linux
This what


[5/18/2022 1:25 PM] szybet
this


[5/18/2022 1:25 PM] szybet
kernel testing things


[5/18/2022 1:25 PM] szybet
yes?


[5/18/2022 1:28 PM] tux_linux
I really don't understand what you're asking


[5/18/2022 1:28 PM] szybet
nothing


[5/18/2022 1:28 PM] szybet
just saying


[5/18/2022 1:29 PM] tux_linux
Ok
startx script is already implementing it


[5/18/2022 1:33 PM] tux_linux
A solution for individual app storage would be chroot


[5/18/2022 1:34 PM] szybet
you overcomplicate it


[5/18/2022 1:34 PM] szybet
imagine a beggining qt developer coming from windows to explain that


[5/18/2022 1:35 PM] szybet
system users / permissions?


[5/18/2022 1:35 PM] szybet
but i dont want to do it, pain ;p


[5/18/2022 1:35 PM] tux_linux
It will be painless for the developer


[5/18/2022 1:36 PM] szybet
we should take care about or health too ;p


[5/18/2022 1:36 PM] szybet
for now we will do it without anything


[5/18/2022 1:36 PM] szybet
maybe in the future


[5/18/2022 1:36 PM] szybet
it isin't like there is malware for inkbox


[5/18/2022 1:37 PM] nonasuomy
yet


[5/18/2022 1:38 PM] szybet
there will be one for the sony


[5/18/2022 1:38 PM] szybet
im sure


[5/18/2022 1:38 PM] nonasuomy
Just wait for Sanki release it will track eveything you do.


[5/18/2022 1:38 PM] szybet
🥴


[5/18/2022 1:38 PM] szybet
its already released for testing


[5/18/2022 1:39 PM] szybet
its usable

{Reactions}
👍 

[5/18/2022 1:42 PM] tux_linux
it should not be much pain
design apps like that:
app bundle in .apps, storage dir in .apps/[app-root]/userdata


[5/18/2022 1:43 PM] tux_linux
shell scripts will magically do the chroot stuff for you


[5/18/2022 1:45 PM] szybet
hmm


[5/18/2022 1:45 PM] szybet
maybe


[5/18/2022 1:45 PM] szybet
this makes sense


[5/18/2022 1:51 PM] szybet
how do i show a big qdialog with part of the json in it?


[5/18/2022 1:54 PM] szybet
with an ok button


[5/18/2022 1:56 PM] tux_linux
Look into implementation of show system info in general dialog
It's a bit complicated


[5/18/2022 1:56 PM] szybet
too overcomplicated


[5/18/2022 1:56 PM] szybet
i did something similar in sanki and deleted it becouse it was not needed, looked bad in code and everything


[5/18/2022 1:56 PM] szybet
but fine


[5/18/2022 1:57 PM] tux_linux
Well, making a class for every dialog would have become a huge pain


[5/18/2022 1:57 PM] szybet
just one with some pages and slots


[5/18/2022 1:57 PM] szybet
;/


[5/18/2022 1:58 PM] tux_linux
If you want quick testing, tweak the get system info function or something in functions.h


[5/18/2022 1:58 PM] tux_linux
Don't put functions in header file, this is a bad practice


[5/18/2022 1:59 PM] tux_linux
At the time I didn't really know how not to


[5/18/2022 1:59 PM] szybet
why


[5/18/2022 2:00 PM] szybet
im doing it in sanki too ;/


[5/18/2022 2:11 PM] tux_linux
Ok, well, nobody will kill you


[5/18/2022 2:12 PM] szybet
i hope


[5/18/2022 2:12 PM] tux_linux
Among others, you can't access functions in the bottom of the file from a function at the top of it


[5/18/2022 2:13 PM] szybet
thats bad


[5/18/2022 2:13 PM] tux_linux
I survived


[5/18/2022 2:34 PM] szybet
https://github.com/Szybet/inkbox/commit/4c5e42822767325ba967dd4059936ad91e1be540

{Embed}
https://github.com/Szybet/inkbox/commit/4c5e42822767325ba967dd4059936ad91e1be540
disabling, enabling apps (WITHOUT checked look and style) + gitigno...
… file
/mnt/data/projects/git/conversations/media/4c5e42822767325ba967dd4059936ad91e1be540-00972


[5/18/2022 2:34 PM] szybet
its getting complicated


[5/18/2022 2:36 PM] tux_linux
Please use camelCase, not CamelCase
For remake apps, maybe just set the bool to true instead of calling a function that does that?


[5/18/2022 2:37 PM] szybet
I use it, i repair it it when see it and i sometimes forgot ;/

{Reactions}
👍 

[5/18/2022 2:37 PM] tux_linux
RemakeApps


[5/18/2022 2:38 PM] szybet
but for functions generated by qtcreator i won't touch them


[5/18/2022 2:38 PM] tux_linux
np


[5/18/2022 2:38 PM] szybet
> For remake apps, maybe just set the bool to true instead of calling a function that does that?
i gived a note that there is propably a better way to do that


[5/18/2022 2:38 PM] tux_linux
I don't either


[5/18/2022 2:39 PM] szybet
and for signals / slots i don't have for some reason qtcreator hints, so its hard to figure this out


[5/18/2022 2:39 PM] szybet
so what is the way


[5/18/2022 2:39 PM] tux_linux
In designer: You can right click button->go to slot->clicked


[5/18/2022 2:39 PM] szybet
i know


[5/18/2022 2:40 PM] szybet
wait i can there set the bool?


[5/18/2022 2:40 PM] tux_linux
remakeAppsBool = true


[5/18/2022 2:40 PM] szybet
in SLOT()?


[5/18/2022 2:40 PM] tux_linux
Why couldn't you


[5/18/2022 2:40 PM] tux_linux
Oooh


[5/18/2022 2:40 PM] szybet
its qt


[5/18/2022 2:41 PM] tux_linux
When will apps be "remake"?


[5/18/2022 2:41 PM] szybet
if the json changed


[5/18/2022 2:42 PM] tux_linux
Maybe it's better to name it "updateAppsListBool"


[5/18/2022 2:42 PM] szybet
longer but maybe


[5/18/2022 2:42 PM] szybet
its personal preference


[5/18/2022 2:42 PM] szybet
and i had always problems with naming functions and var


[5/18/2022 2:43 PM] tux_linux
In showToast, no need to say error, the failed message is already telling it


[5/18/2022 2:43 PM] tux_linux
Toasts should be as short as possible


[5/18/2022 2:43 PM] szybet
the toast isin't showing anyway


[5/18/2022 2:43 PM] szybet
and the log is propably saying more specific info


[5/18/2022 2:44 PM] tux_linux
I will try to see why it isn't showing


[5/18/2022 2:44 PM] tux_linux
Because the slot is connected in mainwindow


[5/18/2022 2:45 PM] tux_linux
At least you have log for now


[5/18/2022 2:47 PM] tux_linux
Why did you merge my repo two times? Curious


[5/18/2022 2:48 PM] szybet
what?


[5/18/2022 2:49 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220518-084903-8CDB9.png


[5/18/2022 2:53 PM] szybet
one merge


[5/18/2022 2:53 PM] szybet
but commits show in time order


[5/18/2022 2:55 PM] tux_linux
Oh


[5/18/2022 2:55 PM] tux_linux
You're right


[5/18/2022 3:12 PM] tux_linux
Do you test what you've written before committing it?


[5/18/2022 3:12 PM] tux_linux
Not saying that your code is bad, no, it's just that qt seems to create bugs itself when you don't systematically test everything you program (at least, that's my experience)


[5/18/2022 3:14 PM] szybet
i dont have an emulator and ereader with me, but i have my laptop and free time


[5/18/2022 3:14 PM] szybet
soo no, not tested


[5/18/2022 3:14 PM] szybet
i will test it later ( today, in 3 hours )


[5/18/2022 3:15 PM] szybet
my repo is for showing progress to you, and if my laptop was run over by a horse or smth i wouldn't need to write the code again


[5/18/2022 3:16 PM] szybet
in the commit is a info WITHOUT testing so what can i say


[5/18/2022 3:17 PM] szybet
maybe recompile inkbox to x86? the emulator would be fast


[5/18/2022 3:18 PM] szybet
some qt functions are simply broken, and testing is needed, i know


[5/18/2022 3:23 PM] szybet
for example for Scrollbararea a function called something like "set scrollbar"... wait i will find it:
SetHorizontalScrollBar deletes the scrollbar, does nothing. i needed to implement it from ground up in sanki
https://forum.qt.io/topic/45543/sethorizontalscrollbar-deletes-the-scrollbar-instead-of-the-former-scrollbar-and-has-no-effect-in-my-qgraphicsview

{Embed}
https://forum.qt.io/topic/45543/sethorizontalscrollbar-deletes-the-scrollbar-instead-of-the-former-scrollbar-and-has-no-effect-in-my-qgraphicsview
SetHorizontalScrollBar deletes the scrollbar instead of the former ...
I have added a new Qt Designer Form Class by Template QTabWidget and in the center of it I have placed a QGraphicsview to which I would like to replace the horizontal and vertical ScrollBars with other scrollbars in my layout. I have highlighted the QGrap...
/mnt/data/projects/git/conversations/media/36d92eeaa47c3d7c492763af6f9759d4-9364C


[5/18/2022 3:23 PM] szybet
https://github.com/Szybet/sanki/blob/master/card_view/deckplay.cpp

{Embed}
https://github.com/Szybet/sanki/blob/master/card_view/deckplay.cpp
sanki/deckplay.cpp at master · Szybet/sanki
small anki rewritten for e-readers, with focus on inkbox support - sanki/deckplay.cpp at master · Szybet/sanki
/mnt/data/projects/git/conversations/media/sanki-05BDB


[5/18/2022 3:23 PM] szybet
this was hell trying to get this working


[5/18/2022 3:26 PM] szybet
when will you write installing isa files for apps? becouse i need after that to write a function that adds all small json files together


[5/18/2022 3:26 PM] nonasuomy
How do you spell because in polish?


[5/18/2022 3:26 PM] szybet
ponieważ


[5/18/2022 3:26 PM] szybet
why are you asking


[5/18/2022 3:27 PM] nonasuomy
Was just wondering why you always put an o instead of an a


[5/18/2022 3:27 PM] szybet
oh you are right


[5/18/2022 3:27 PM] szybet
im writing it as i hear it


[5/18/2022 3:28 PM] nonasuomy
Fare enough thank you for the explanation.


[5/18/2022 3:30 PM] szybet
another example is `language' , its impossible for me to write it correctly when im typing fast


[5/18/2022 3:30 PM] nonasuomy
do you put languoge ?


[5/18/2022 3:31 PM] szybet
leangueage


[5/18/2022 3:31 PM] szybet
🥴 😂


[5/18/2022 3:31 PM] nonasuomy
wow


[5/18/2022 3:31 PM] nonasuomy
but I can see it


[5/18/2022 3:33 PM] nonasuomy
I used to know this polish girl that got named really strange for almost that specific reason. Her parents sounded out her name how they thought it was spelled in English. Trying to think what it was but can't remember now.


[5/18/2022 3:38 PM] szybet
Strange for you... Hmm róża?


[5/18/2022 3:38 PM] szybet
Dżesika


[5/18/2022 3:39 PM] szybet
Most girly polish names are simplex, ending with a


[5/18/2022 3:44 PM] nonasuomy
She told me it was because they sounded it out and didn't know how to spell it properly. Probably just fresh older immigrants.


[5/18/2022 6:59 PM] nonasuomy
https://pastebin.com/raw/wEFemdXx


[5/18/2022 7:03 PM] nonasuomy
Any idea how I run this?


[5/18/2022 7:03 PM] nonasuomy
/bin/sh: epd_fb_test: not found


[5/18/2022 7:41 PM] tux_linux
You're missing the libc


[5/18/2022 7:49 PM] nonasuomy
how would I go about getting that to function?


[5/18/2022 9:26 PM] nonasuomy
Any ideas  I mounted mmcblk0p2 which has this diag folder with this binary in it so I'm assuming directories down from that have the needed libraries to run it?


[5/18/2022 9:28 PM] nonasuomy


{Attachments}
/mnt/data/projects/git/conversations/media/message-479EE.txt


[5/18/2022 10:24 PM] szybet
`LD_LIBRARY_PATH=qt-linux-5.15.2-kobo/lib:$LD_LIBRARY_PATH` to add libraries to user apps


[5/18/2022 10:35 PM] szybet
18/05/2022 @ 22:35:06 | MainWindow: checkForUpdate: No update available.


[5/18/2022 10:35 PM] szybet
this even stops inkbox from showing up


[5/18/2022 10:35 PM] tux_linux
????????????????


[5/18/2022 10:35 PM] szybet
+ there is no way to disable this checking


[5/18/2022 10:35 PM] tux_linux
It happens everytime?


[5/18/2022 10:36 PM] szybet
its still checking on update on every boot


[5/18/2022 10:36 PM] tux_linux
That's what it should do


[5/18/2022 10:36 PM] szybet
yes, but its my issue with mu bundle, its not worth debugging


[5/18/2022 10:36 PM] szybet
windows vibes?


[5/18/2022 10:36 PM] tux_linux
Ok


[5/18/2022 10:36 PM] tux_linux
Still strange


[5/18/2022 10:36 PM] szybet
we need to add a button to disable this ;p


[5/18/2022 10:37 PM] tux_linux
As long as you do not put an update it won't do anything


[5/18/2022 10:37 PM] szybet
what


[5/18/2022 10:37 PM] tux_linux
Please try with release InkBox 1.9 bundle


[5/18/2022 10:37 PM] szybet
no, you said that i need to update it becouse old toolchain


[5/18/2022 10:38 PM] szybet
its... checking over wifi or the file system?


[5/18/2022 10:39 PM] tux_linux
The file system


[5/18/2022 10:39 PM] tux_linux
It's checking over Wi-Fi too


[5/18/2022 10:39 PM] tux_linux
But you can choose not to install it


[5/18/2022 10:40 PM] szybet
but it asks every time...


[5/18/2022 10:42 PM] tux_linux
Maybe I could add an option in the future


[5/18/2022 10:42 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/master/mainwindow.cpp#L1188

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/master/mainwindow.cpp
inkbox/mainwindow.cpp at master · Kobo-InkBox/inkbox
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-DDF35


[5/19/2022 12:15 AM] szybet
writing code without testing is -50% efficient


[5/19/2022 12:15 AM] szybet
https://github.com/Szybet/inkbox/commit/f564a0353bee81babe6c09d79910316a193091d2

{Embed}
https://github.com/Szybet/inkbox/commit/f564a0353bee81babe6c09d79910316a193091d2
fix logic of previous commit · Szybet/inkbox@f564a03
/mnt/data/projects/git/conversations/media/f564a0353bee81babe6c09d79910316a193091d2-6475A


[5/19/2022 12:15 AM] szybet
2 hours of writing


[5/19/2022 12:15 AM] szybet
2 hours of fixing


[5/19/2022 12:15 AM] szybet
i would do all of that properly in 2 h if i did this at the same time


[5/19/2022 12:16 AM] szybet
but most of the logic for user apps is done


[5/19/2022 12:17 AM] szybet
now only removing / showing info and thats all for the **gui**


[5/19/2022 12:17 AM] szybet
how will we manage removing isa files?


[5/19/2022 12:39 AM] szybet
There is also a script needed to write small json files together, and from the big one write every small to isa files


[5/19/2022 12:39 AM] szybet
I think we could Mount the rw but with 1Kb of more space


[5/19/2022 12:40 AM] szybet
For changing the json file


[5/19/2022 8:07 AM] szybet
well im waiting for an answer


[5/19/2022 12:50 PM] tux_linux
Never


[5/19/2022 12:50 PM] tux_linux
Throw your file in p4 instead


[5/19/2022 12:52 PM] tux_linux
As for removing them... Just set them to disabled on your JSON and they will be unmounted and deactivated at next reboot or usbms session end


[5/19/2022 12:53 PM] raycast_
Disable notifications please


[5/19/2022 12:53 PM] tux_linux
?


[5/19/2022 12:54 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220519-125337_Discord-Beta-B792C.png


[5/19/2022 12:54 PM] raycast_
Change server settings please


[5/19/2022 12:55 PM] tux_linux
It's up to you
Mute the server if you want


[5/19/2022 12:55 PM] tux_linux
Szybet probably doesn't have the same requirements as you about notifications in this channel


[5/19/2022 1:00 PM] szybet
its wasting space, removing means removing


[5/19/2022 1:00 PM] szybet
so you dont understand the problem


[5/19/2022 1:00 PM] szybet
in isa files are small json files


[5/19/2022 1:01 PM] szybet
at boot i combine them to one big


[5/19/2022 1:01 PM] szybet
then i edit the big one


[5/19/2022 1:01 PM] szybet
disable / enable


[5/19/2022 1:01 PM] szybet
and now before reboot / shutdown i want to write it to these smaller jsons, that they will be saved


[5/19/2022 1:02 PM] szybet
and the setting will be saved with them


[5/19/2022 1:02 PM] szybet
you can literally change it for your own person


[5/19/2022 1:02 PM] szybet
why server default


[5/19/2022 1:02 PM] szybet
🥴


[5/19/2022 1:11 PM] szybet
if we copy those files to somewhere else to edit them and use later, then changing the app version in the isa file will not work


[5/19/2022 1:11 PM] szybet
or maybe we check them both


[5/19/2022 1:11 PM] szybet
then its not efficient


[5/19/2022 1:11 PM] szybet
thats the only simple solution i can think of


[5/19/2022 1:13 PM] szybet
and why not?


[5/19/2022 1:16 PM] tux_linux
They will be removed next reboot or just usbms session end


[5/19/2022 1:16 PM] szybet
what?


[5/19/2022 1:16 PM] szybet
this is not what enabling / disabling them is meant for


[5/19/2022 1:17 PM] tux_linux
Oh ok not removing


[5/19/2022 1:17 PM] szybet
but i want a way to remove them too


[5/19/2022 1:17 PM] tux_linux
Well add a deleted status to the JSON


[5/19/2022 1:18 PM] tux_linux
I will do cleanup in the backend


[5/19/2022 1:18 PM] tux_linux
And just don't show it in your list


[5/19/2022 1:19 PM] szybet
Okay


[5/19/2022 1:20 PM] szybet
What about saving small jsons across boot?


[5/19/2022 1:20 PM] szybet
We can do a folder with a small JSON + an isa file


[5/19/2022 1:21 PM] tux_linux
They will be writeable
I will use bind mount


[5/19/2022 1:21 PM] szybet
Ok good


[5/19/2022 1:21 PM] szybet
If you describe the backend very precisely I can do this myself


[5/19/2022 1:21 PM] tux_linux
I will do it


[5/19/2022 1:21 PM] szybet
When?


[5/19/2022 1:21 PM] tux_linux
It's fine


[5/19/2022 1:22 PM] tux_linux
This weekend probably


[5/19/2022 1:22 PM] szybet
Okay good


[5/19/2022 1:22 PM] szybet
I will write 2 qt cli apps to save, create those jsons


[5/19/2022 1:23 PM] tux_linux
You can't put them in a function in InkBox?


[5/19/2022 1:23 PM] szybet
I can sure


[5/19/2022 1:23 PM] szybet
If you want this in ink ox okay


[5/19/2022 1:23 PM] szybet
I though it will be on a lover level


[5/19/2022 1:25 PM] tux_linux
InkBox already does low level things


[5/19/2022 1:25 PM] szybet
I know


[5/19/2022 1:25 PM] tux_linux
And it will only be used for InkBox gui


[5/19/2022 1:25 PM] tux_linux
So no issue in writing it there


[5/19/2022 1:25 PM] szybet
Where to write those functions?


[5/19/2022 1:26 PM] tux_linux
apps.cpp


[5/19/2022 1:26 PM] tux_linux
Unless you think about using them somewhere else


[5/19/2022 1:26 PM] szybet
If this mounts will take time


[5/19/2022 1:27 PM] szybet
Do it at boot


[5/19/2022 1:27 PM] szybet
At launch I mean


[5/19/2022 1:28 PM] tux_linux
Note: any app dir can contain a "app-lib"  dir that will contain the app libs
Then a second folder called "system-lib" that is always empty and to which will be bind mounted qt libraries


[5/19/2022 1:29 PM] szybet
but apps can use system libraries without this mount


[5/19/2022 1:29 PM] tux_linux
No
It will be in a chroot


[5/19/2022 1:29 PM] szybet
oh


[5/19/2022 1:30 PM] szybet
new chroot per app?


[5/19/2022 1:30 PM] tux_linux
Yes


[5/19/2022 1:30 PM] tux_linux
It doesn't take much space


[5/19/2022 1:30 PM] tux_linux
Bind mount is nothing


[5/19/2022 1:30 PM] szybet
can you add a bin folder with bash / fbink?


[5/19/2022 1:30 PM] szybet
and some other things


[5/19/2022 1:31 PM] tux_linux
Yes


[5/19/2022 1:31 PM] tux_linux
app-bin


[5/19/2022 1:31 PM] szybet
bind mount i hope?


[5/19/2022 1:31 PM] tux_linux
Oh


[5/19/2022 1:31 PM] tux_linux
If the app needs FBInk it will need to provide it


[5/19/2022 1:31 PM] szybet
why


[5/19/2022 1:31 PM] szybet
well okay but why


[5/19/2022 1:32 PM] tux_linux
First there is no readily available FBInk in GUI rootfs


[5/19/2022 1:32 PM] tux_linux
Second it's one more security risk


[5/19/2022 1:32 PM] szybet
i want a launcher app for anki, a splash screen at launch and exit. well then i will use qt for that


[5/19/2022 1:32 PM] szybet
fbink is a security risk?


[5/19/2022 1:33 PM] tux_linux
Well, usually not


[5/19/2022 1:33 PM] tux_linux
But FBInk can make my Glo HD epdc short circuit


[5/19/2022 1:34 PM] szybet
um this short circuit wasnt a short circuit right?


[5/19/2022 1:34 PM] szybet
i dont remember


[5/19/2022 1:34 PM] tux_linux
Qt is good
I use it on usbms splash


[5/19/2022 1:35 PM] tux_linux
It needed a device reboot for it to work again
It just shut down
Idk


[5/19/2022 1:35 PM] szybet
i think short circuit is when magic smoke escapes


[5/19/2022 1:36 PM] szybet
just an panic attack


[5/19/2022 1:38 PM] tux_linux
I don't know, it was reproducible


[5/19/2022 1:38 PM] tux_linux
Strangely it doesn't do it on the newly compiled platform plugin


[5/19/2022 1:42 PM] tux_linux
There will need to be dev sys proc too since it's a chroot
Not really clean
Any ideas?


[5/19/2022 1:44 PM] tux_linux
For now organize your extension like described before
Then send it to me after compressing it: `mksquashfs . extension.isa -b 1048576 -comp xz -X-dict-size 100% -always-use-fragments`


[5/19/2022 1:46 PM] szybet
why?


[5/19/2022 1:46 PM] szybet
`For now organize your extension like described before`
you mean... sanki?


[5/19/2022 1:52 PM] szybet
how will you manage launching the apps


[5/19/2022 1:52 PM] tux_linux
Yes


[5/19/2022 1:52 PM] szybet
`chroot -c`?


[5/19/2022 1:52 PM] szybet
okay i can pack sanki like that


[5/19/2022 1:52 PM] tux_linux
We need fb0


[5/19/2022 1:53 PM] szybet
bind mount?


[5/19/2022 1:53 PM] tux_linux
devtmpfs


[5/19/2022 1:53 PM] szybet
just bind only what neccesary


[5/19/2022 1:53 PM] tux_linux
Yeah, better


[5/19/2022 1:53 PM] tux_linux
It will just not be a very straightforward layout


[5/19/2022 1:54 PM] szybet
security needs it


[5/19/2022 1:54 PM] szybet
¯\_(ツ)_/¯


[5/19/2022 1:56 PM] tux_linux
👍


[5/19/2022 1:58 PM] tux_linux
You know what you can do about the emulator?
You can vnc to your nia


[5/19/2022 1:58 PM] tux_linux
Would that be better?


[5/19/2022 1:59 PM] szybet
this is not stupid
i would need to vpn to my home and the to the nia


[5/19/2022 1:59 PM] szybet
oh goodness😆


[5/19/2022 2:03 PM] tux_linux
No


[5/19/2022 2:03 PM] tux_linux
I mean locally


[5/19/2022 2:03 PM] tux_linux
Via usbnet


[5/19/2022 2:03 PM] tux_linux
You never touch the screen


[5/19/2022 2:03 PM] tux_linux
I think it would work


[5/19/2022 2:03 PM] tux_linux
Like the emu


[5/19/2022 2:04 PM] szybet
emu is useful when i dont have the nia with me


[5/19/2022 2:04 PM] szybet
so not really


[5/19/2022 2:05 PM] tux_linux
Hmm


[5/19/2022 8:28 PM] szybet
do you know that accessing one file from many widgets and modifying it is not a good idea?


[5/19/2022 8:28 PM] szybet
because i know now

{Reactions}
☑️ 

[5/19/2022 8:28 PM] szybet
but i fixed this:

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C3B41.png


[5/19/2022 8:28 PM] szybet
its still a bit of a design flaw


[5/19/2022 8:28 PM] szybet
but it works perfectly now so nevermind


[5/19/2022 8:28 PM] szybet
¯\_(ツ)_/¯


[5/19/2022 8:30 PM] nonasuomy
Every time I see the word because now I think becouse. You gave me a mind virus 😄


[5/19/2022 8:31 PM] nonasuomy
@tux-linux silly question in this version of busybox vi how do you show the cursor stats ctrl g doesn't seem to do anything?


[5/19/2022 8:33 PM] szybet
good, thanks for mentioning again


[5/19/2022 8:33 PM] szybet
native speakers should teach other


[5/19/2022 8:33 PM] szybet
IDK but in my opinion dont expect a cursor at all


[5/19/2022 8:34 PM] nonasuomy
I just want to show stats like where you are in the file


[5/19/2022 8:35 PM] nonasuomy
"<ctrl>g Display current line number and
file information"


[5/19/2022 8:36 PM] szybet
@tux-linux showToastNative doesn't work, but `emit showToast` works, idk

EDIT: and it doesn't work after showing the main widget. its maybe too fast


[5/19/2022 8:36 PM] nonasuomy
specifically which byte I'm at in the file


[5/19/2022 8:40 PM] szybet
do you got into busybox on the sony?


[5/19/2022 8:41 PM] nonasuomy
Yesum


[5/19/2022 8:41 PM] szybet
N i c e


[5/19/2022 8:41 PM] szybet
Its a pretty cheap and good device


[5/19/2022 8:41 PM] szybet
i will maybe get one


[5/19/2022 8:42 PM] nonasuomy
Hopefully we can get this few errors solved.


[5/19/2022 8:43 PM] szybet
you said that everything is solvable


[5/19/2022 8:44 PM] nonasuomy
It is with time!


[5/19/2022 8:45 PM] nonasuomy
I'm slowly pulling apart the kernel haphazardly.


[5/19/2022 8:45 PM] nonasuomy
so if you do :set all in vim it only shows noautoindent noflash ignorecase showmatch tabstop=8


[5/19/2022 8:45 PM] nonasuomy
so I guess it doesn't have set number


[5/19/2022 8:50 PM] nonasuomy
Seems like it's there but won't update
```
- Vcom_OLD.img 0/0 100%
```


[5/19/2022 8:55 PM] tux_linux
Because it's vi?


[5/19/2022 8:55 PM] tux_linux
Strange
Try single shot qtimer


[5/19/2022 8:56 PM] szybet
how? without creating a new slot


[5/19/2022 9:09 PM] szybet
oh god


[5/19/2022 9:10 PM] szybet
generaldialog is a clever complicated and weird mess


[5/19/2022 9:14 PM] tux_linux
I know
Sorry


[5/19/2022 9:15 PM] szybet
no need to be sorry


[5/19/2022 9:15 PM] szybet
the idea of this dialog is great

{Reactions}
👍 

[5/19/2022 9:26 PM] raycast_


{Attachments}
/mnt/data/projects/git/conversations/media/IMG-20220315-WA0001-17E17.jpg


[5/19/2022 9:37 PM] szybet
#off-topic


[5/19/2022 9:37 PM] szybet
or i will need to execute a child


[5/19/2022 9:40 PM] szybet
As for removing @tux-linux the user can remove the app by his own in usbms?


[5/19/2022 9:55 PM] szybet
```

env: can't execute '/mnt/onboard/onboard/.apps/sanki/sanki': Permission denied
kobo:/mnt/onboard/onboard/.apps/Sanki# ls
app-lib    sanki      sanki.png
kobo:/mnt/onboard/onboard/.apps/Sanki# ls sanki
sanki
kobo:/mnt/onboard/onboard/.apps/Sanki# ls -l
total 320
drwxr-xr-x    2 root     root          8192 May 19 21:49 app-lib
-rwxr-xr-x    1 root     root        306920 May 19 21:48 sanki
-rwxr-xr-x    1 root     root          2784 May  7 00:34 sanki.png
kobo:/mnt/onboard/onboard/.apps/Sanki# chmod +x sanki
kobo:/mnt/onboard/onboard/.apps/Sanki# ls sanki
sanki
kobo:/mnt/onboard/onboard/.apps/Sanki# ls -la
total 336
drwxr-xr-x    3 root     root          8192 May 19 21:49 .
drwxr-xr-x    4 root     root          8192 May 17 22:54 ..
drwxr-xr-x    2 root     root          8192 May 19 21:49 app-lib
-rwxr-xr-x    1 root     root        306920 May 19 21:48 sanki
-rwxr-xr-x    1 root     root          2784 May  7 00:34 sanki.png
kobo:/mnt/onboard/onboard/.apps/Sanki# chmod 777 sanki
kobo:/mnt/onboard/onboard/.apps/Sanki# ls -l
total 320
drwxr-xr-x    2 root     root          8192 May 19 21:49 app-lib
-rwxr-xr-x    1 root     root        306920 May 19 21:48 sanki
-rwxr-xr-x    1 root     root          2784 May  7 00:34 sanki.png
kobo:/mnt/onboard/onboard/.apps/Sanki# cp sanki /tmp
kobo:/mnt/onboard/onboard/.apps/Sanki# cd /tmp
kobo:/tmp# ./sanki 
./sanki: error while loading shared libraries: libzip.so: cannot open shared object file: No such file or directory
kobo:/tmp# 


```


[5/19/2022 9:55 PM] szybet
there is something wrong with /mnt/onboard/onboard/


[5/19/2022 9:55 PM] szybet
i cant launch anything from there


[5/19/2022 9:57 PM] szybet
its kinda broken


[5/19/2022 9:58 PM] szybet
i cant move files there too


[5/19/2022 10:07 PM] tux_linux
It's mounted as nosuid


[5/19/2022 10:07 PM] tux_linux
That's why


[5/19/2022 10:07 PM] tux_linux
I will disable it


[5/19/2022 10:08 PM] szybet
ok good


[5/19/2022 10:08 PM] tux_linux
`mount -o remount,suid /kobo/mnt/onboard/onboard`


[5/19/2022 10:08 PM] szybet
ok thanks!


[5/19/2022 10:08 PM] szybet
and this?


[5/19/2022 10:09 PM] szybet
becouse i dont have a place to add the remove button ;p


[5/19/2022 10:14 PM] tux_linux
Yes it will be possible


[5/19/2022 10:14 PM] tux_linux
Does suid mount work?


[5/19/2022 10:17 PM] szybet
I still cant change permissions to files


[5/19/2022 10:17 PM] szybet
so no


[5/19/2022 10:17 PM] szybet
not really


[5/19/2022 10:18 PM] tux_linux
Log?


[5/19/2022 10:18 PM] szybet
so it will be like that


[5/19/2022 10:18 PM] szybet
nothing changed


[5/19/2022 10:19 PM] szybet
```
kobo:/kobo/mnt/onboard/onboard# chmod +x sanki 
kobo:/kobo/mnt/onboard/onboard# ls -l
total 320
drwxr-xr-x    4 root     root          8192 Apr 30 21:34 Szkoła
drwxr-xr-x    6 root     root          8192 Apr 30 21:29 ebooki
-rwxr-xr-x    1 root     root        306920 May 19 22:06 sanki
kobo:/kobo/mnt/onboard/onboard# ./sanki 
-ash: ./sanki: Permission denied
kobo:/kobo/mnt/onboard/onboard# 
```


[5/19/2022 10:19 PM] tux_linux
`mount` output?


[5/19/2022 10:19 PM] tux_linux
Actually they will be mounted in squashfs with suid so it isn't a real issue (for later)


[5/19/2022 10:20 PM] szybet
⠀


[5/19/2022 10:20 PM] szybet
i know


[5/19/2022 10:20 PM] szybet
got it? nothing :D


[5/19/2022 10:21 PM] tux_linux
No way


[5/19/2022 10:21 PM] tux_linux
It can't be


[5/19/2022 10:21 PM] tux_linux
Are you in the chroot?


[5/19/2022 10:22 PM] tux_linux
It should output a list of mounted filesystems


[5/19/2022 10:23 PM] szybet
no, i tryied with and nothing


[5/19/2022 10:23 PM] szybet
what? df -ha?


[5/19/2022 10:23 PM] tux_linux
Yes ...
Strange


[5/19/2022 10:24 PM] tux_linux
The shell is still responding?


[5/19/2022 10:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-41862.txt


[5/19/2022 10:24 PM] szybet
um yes?


[5/19/2022 10:25 PM] szybet
oh look


[5/19/2022 10:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-0624C.txt


[5/19/2022 10:25 PM] szybet
`/dev/loop0 /mnt/onboard/onboard vfat rw,nodev,noexec,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0`


[5/19/2022 10:25 PM] szybet
noexec


[5/19/2022 10:25 PM] szybet
interesting right? 🥴 😄


[5/19/2022 10:26 PM] tux_linux
Oh
I mixed up suid and exec


[5/19/2022 10:26 PM] tux_linux
Remount it with exec then
Sorry


[5/19/2022 10:30 PM] szybet
`mv: cannot overwrite non-directory 'Sanki/sanki' with directory 'sanki/'` what is causing this?


[5/19/2022 10:31 PM] szybet
actually


[5/19/2022 10:31 PM] szybet
```kobo:/mnt/onboard/onboard/.apps# cd sanki/
kobo:/mnt/onboard/onboard/.apps/Sanki# ls```


[5/19/2022 10:31 PM] szybet
what


[5/19/2022 10:32 PM] tux_linux
IIRC fat32 is not case-sensitive?


[5/19/2022 10:33 PM] szybet
oh ok ._.


[5/19/2022 10:33 PM] szybet
```
kobo:/mnt/onboard/onboard/.apps/Sanki# ls
app-lib    sanki      sanki.bin  sanki.png
kobo:/mnt/onboard/onboard/.apps/Sanki# ./sanki
/bin/ash: ./sanki: not found
```


[5/19/2022 10:33 PM] szybet
sanki is a small bash script


[5/19/2022 10:33 PM] szybet
sanki.bin launches


[5/19/2022 10:34 PM] tux_linux
Contents?


[5/19/2022 10:35 PM] szybet
```
kobo:/mnt/onboard/onboard/.apps/Sanki# cat sanki
#!/bin/bash
QT_QPA_PLATFORM=kobo /mnt/onboard/onboard/.apps/sanki/sanki.bin
kobo:/mnt/onboard/onboard/.apps/Sanki# ./sanki
/bin/ash: ./sanki: not found
kobo:/mnt/onboard/onboard/.apps/Sanki# ./sanki.bin 
LOG: "Sanki started test 12" | file "main.cpp" In function: "main()"
qt.qpa.plugin: Could not find the Qt platform plugin "xcb" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
kobo:/mnt/onboard/onboard/.apps/Sanki# 

```


[5/19/2022 10:35 PM] szybet
thats all


[5/19/2022 10:35 PM] szybet
¯\_(ツ)_/¯


[5/19/2022 10:36 PM] tux_linux
I think there isn't bash in GUI rootfs


[5/19/2022 10:36 PM] tux_linux
Try bin sh


[5/19/2022 10:37 PM] szybet
yes..


[5/19/2022 10:37 PM] tux_linux
There is?


[5/19/2022 10:38 PM] szybet
yes it launches now


[5/19/2022 10:38 PM] szybet
how is inkbox returning after app exit? when other apps are launched?


[5/19/2022 10:38 PM] tux_linux
It starts a script with startDetached
Then quits


[5/19/2022 10:39 PM] szybet
if i kill inkbox_sh and all other scripts it will not launch itself back right?


[5/19/2022 10:39 PM] tux_linux
Unless you launch it back, no


[5/19/2022 10:40 PM] tux_linux
See content/inkbox/inkbox in GUI bundle repo


[5/19/2022 10:40 PM] szybet
we need to manage this, somehow


[5/19/2022 10:41 PM] szybet
also, you know user apps need access to /mnt/onboard/onboard?


[5/19/2022 10:41 PM] tux_linux
Yeah


[5/19/2022 10:41 PM] szybet
maybe only read only


[5/19/2022 10:41 PM] szybet
but still


[5/19/2022 10:41 PM] tux_linux
Maybe


[5/19/2022 10:41 PM] szybet
not maybe


[5/19/2022 10:41 PM] tux_linux
Read-only


[5/19/2022 10:41 PM] tux_linux
Bind mount


[5/19/2022 10:41 PM] szybet
i need a way to copy decks to sanki


[5/19/2022 10:42 PM] tux_linux
User just needs to put it in userdata app dir


[5/19/2022 10:42 PM] szybet
oh if thats the case, they can do this


[5/19/2022 10:42 PM] szybet
then sure


[5/19/2022 10:42 PM] tux_linux
It will be accessible at chroot path/app-data


[5/19/2022 10:42 PM] szybet
cool


[5/19/2022 10:43 PM] tux_linux
Changed it
Makes more sense


[5/19/2022 10:46 PM] szybet
https://streamable.com/7ok2wj

{Embed}
https://streamable.com/7ok2wj
VID_20220519_223935
/mnt/data/projects/git/conversations/media/7ok2wj-E2041.jpg


[5/19/2022 10:46 PM] szybet
so the frontend looks like that for now:


[5/19/2022 10:52 PM] szybet
here is everything

{Attachments}
/mnt/data/projects/git/conversations/media/userapps.tar-81148.xz


[5/19/2022 11:22 PM] tux_linux
Woooooo awesome
Good job


[5/19/2022 11:23 PM] szybet
thanks

{Reactions}
👍 

[5/20/2022 9:30 AM] szybet
where is the python program


[5/20/2022 9:30 AM] szybet
that is used in inkbox


[5/20/2022 1:02 PM] tux_linux
In the InkBox folder


[5/20/2022 1:03 PM] tux_linux
split.py
For text files


[5/20/2022 1:03 PM] szybet
which repo...


[5/20/2022 1:03 PM] tux_linux
Replace it with rust if you want
It is a complete failure


[5/20/2022 1:04 PM] tux_linux
GUI bundle


[5/20/2022 1:04 PM] szybet
i wannt


[5/20/2022 1:04 PM] szybet
i could do this in cpp, but i want rust for the jokes


[5/20/2022 1:04 PM] tux_linux
cpp is good too


[5/20/2022 1:07 PM] tux_linux
Ok, it has to be small


[5/20/2022 1:09 PM] szybet
for what do you use it for?


[5/20/2022 1:10 PM] szybet
```
    writecontent = writecontent.replace("\n\n\n\n\n\n\n\n", "\n")
    writecontent = writecontent.replace("\n\n\n\n\n\n\n", "\n")
    writecontent = writecontent.replace("\n\n\n\n\n\n", "\n")
    writecontent = writecontent.replace("\n\n\n\n\n", "\n")
    writecontent = writecontent.replace("\n\n\n\n", "\n")
    writecontent = writecontent.replace("\n\n\n", "\n")
```
I have *several* questions


[5/20/2022 1:12 PM] tux_linux
I know


[5/20/2022 1:12 PM] tux_linux
At the time I didn't know anything better


[5/20/2022 1:12 PM] szybet
everyone is learning


[5/20/2022 1:12 PM] tux_linux
Text file parsing
That's why it was neglected


[5/20/2022 1:13 PM] szybet
> Text file parsing
where


[5/20/2022 1:13 PM] szybet
which files


[5/20/2022 1:13 PM] tux_linux
A text file


[5/20/2022 1:13 PM] tux_linux
txt


[5/20/2022 1:13 PM] tux_linux
Try it


[5/20/2022 1:13 PM] szybet
you mean for reading txt files in inkbox?


[5/20/2022 1:14 PM] tux_linux
Yes


[5/20/2022 1:15 PM] szybet
oh okay


[5/20/2022 1:16 PM] szybet
if i replace it, will you purge python from existence in inkbox?


[5/20/2022 1:16 PM] tux_linux
Probably


[5/20/2022 1:18 PM] szybet
*Propably?*


[5/20/2022 1:25 PM] tux_linux
I don't know if I could need it for something else in the future


[5/20/2022 1:25 PM] szybet
then use node


[5/20/2022 1:25 PM] szybet
for that


[5/20/2022 1:26 PM] szybet
or threat me that you will use python then i will write it in rust


[5/20/2022 3:07 PM] szybet
https://github.com/Szybet/inkbox-split-rs

{Embed}
https://github.com/Szybet/inkbox-split-rs
GitHub - Szybet/inkbox-split-rs: rewriting split.py to rust becouse...
rewriting split.py to rust becouse its the right thing to do - GitHub - Szybet/inkbox-split-rs: rewriting split.py to rust becouse its the right thing to do
/mnt/data/projects/git/conversations/media/inkbox-split-rs-4992D

{Reactions}
👍 

[5/20/2022 3:07 PM] szybet
isin't tested / optimised for size


[5/20/2022 3:07 PM] szybet
but its done i think


[5/20/2022 3:08 PM] szybet
¯\_(ツ)_/¯


[5/20/2022 5:17 PM] tux_linux
Think


[5/20/2022 5:17 PM] tux_linux
Maybe while you're at it, if you have an idea how to improve it, I'm open to


[5/20/2022 6:48 PM] nonasuomy
http://essentialscrap.com/eink/waveforms.html

{Embed}
http://essentialscrap.com/eink/waveforms.html
Driving waveforms
/mnt/data/projects/git/conversations/media/waveform-thumb-ED4E4.png


[5/20/2022 6:49 PM] nonasuomy
This person built that Sony PRS-T1 SD image.


[5/20/2022 6:49 PM] szybet
wow...


[5/20/2022 6:50 PM] szybet
save everything he has done to web archive


[5/21/2022 12:47 AM] szybet
now i see


[5/21/2022 12:47 AM] szybet
https://github.com/marck0z/file_split

{Embed}
https://github.com/marck0z/file_split
GitHub - marck0z/file_split: Command line utility to split large te...
Command line utility to split large text files into multiple small files by number of words - GitHub - marck0z/file_split: Command line utility to split large text files into multiple small files b...
/mnt/data/projects/git/conversations/media/file_split-BCDBA


[5/21/2022 12:47 AM] szybet
for what will you use it for?


[5/21/2022 12:48 AM] szybet
https://github.com/Szybet/inkbox/commit/4e899d24dccb5b34830dd24f0944ad861cea5ae4

{Embed}
https://github.com/Szybet/inkbox/commit/4e899d24dccb5b34830dd24f0944ad861cea5ae4
function to load / save big json to small app jsons and reverse, hu...
… improvement on writing enable variable
/mnt/data/projects/git/conversations/media/4e899d24dccb5b34830dd24f0944ad861cea5ae4-F9909


[5/21/2022 12:48 AM] szybet
added those 2 functions to laod / save json files ( IDK where you want to manage this stuff, but it needs to be done early, feel free to move those functions to other files )


[5/21/2022 12:48 AM] szybet
everything is done in inkbox I think


[5/21/2022 12:49 AM] szybet
If you can't manage to do this in this weekend, just write instructions to me / in which file to do this and i can write this on my own


[5/21/2022 12:49 AM] szybet
I will finish that tommorow


[5/21/2022 3:23 AM] tux_linux
I just found it, it was a good project
It basically does the same thing that your program does
But it doesn't count newlines
So it is useless


[5/21/2022 2:46 PM] szybet
🥴?


[5/21/2022 2:47 PM] tux_linux
it's saturday


[5/21/2022 2:47 PM] tux_linux
calm down


[5/21/2022 2:47 PM] tux_linux
8:47 am


[5/21/2022 2:47 PM] szybet
Im only asking

{Reactions}
👍 

[5/21/2022 2:47 PM] szybet
nothing more


[5/21/2022 2:47 PM] tux_linux
yes, I will do it
I have andi1's kernel to test and after that I will try to do it


[5/21/2022 2:48 PM] szybet
14:47 pm (02:47 pm)


[5/21/2022 2:48 PM] tux_linux
I also have no school monday so I'll have time to complete that there too


[5/21/2022 2:48 PM] szybet
nice


[5/21/2022 3:09 PM] tux_linux
Look, my subway is using that font FWIW

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220521_001312981-35160.jpg


[5/21/2022 3:11 PM] szybet
You can say that this is this font?


[5/21/2022 3:11 PM] szybet
wow


[5/21/2022 3:13 PM] szybet
`mount -o remount,exec,rw /kobo/mnt/onboard/.adds/inkbox`


[5/21/2022 3:13 PM] szybet
it doesn't work, i want to replace split.py


[5/21/2022 3:16 PM] tux_linux
Univers/u001 yes


[5/21/2022 3:17 PM] tux_linux
what exactly doesn't work?


[5/21/2022 3:17 PM] tux_linux
oh


[5/21/2022 3:17 PM] tux_linux
you tried to mount a squashfs r/w


[5/21/2022 3:17 PM] tux_linux
squashfs are read-only unless they are combined with unionfs or overlayfs


[5/21/2022 3:17 PM] szybet
oh no


[5/21/2022 3:17 PM] tux_linux
which is not the case here


[5/21/2022 3:17 PM] tux_linux
bind-mount split.py maybe?


[5/21/2022 3:17 PM] szybet
so i need to create a gui bundle?


[5/21/2022 3:17 PM] tux_linux
yes


[5/21/2022 3:17 PM] szybet
how?


[5/21/2022 3:18 PM] szybet
oh no... how do you test / develop that?


[5/21/2022 3:18 PM] tux_linux
```
mount --bind /tmp/split-program /kobo/mnt/onboard/.adds/inkbox/split.py
```


[5/21/2022 3:18 PM] tux_linux
though maybe you will get problems with launching


[5/21/2022 3:19 PM] szybet
its only launching this script right?


[5/21/2022 3:19 PM] szybet
then it should work


[5/21/2022 3:20 PM] szybet
% du -h split
280K    split


[5/21/2022 3:20 PM] szybet
not bad


[5/21/2022 3:22 PM] tux_linux
nope

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D8FBF.png


[5/21/2022 3:22 PM] szybet
???


[5/21/2022 3:22 PM] tux_linux
oh no-


[5/21/2022 3:22 PM] tux_linux
i pointed you at the wrong python program


[5/21/2022 3:22 PM] szybet
it can be better, there is still something weird


[5/21/2022 3:22 PM] szybet
?


[5/21/2022 3:23 PM] tux_linux
this is split-txt.py

{Attachments}
/mnt/data/projects/git/conversations/media/message-8DEFD.txt


[5/21/2022 3:23 PM] tux_linux
without backticks


[5/21/2022 3:23 PM] tux_linux
i've written this so long ago I couldn't even remember which was the right one


[5/21/2022 3:23 PM] szybet
you dont use split.py at all?


[5/21/2022 3:23 PM] tux_linux
it is probably simpler to port in rust too


[5/21/2022 3:23 PM] tux_linux
i think not


[5/21/2022 3:24 PM] tux_linux
let me see


[5/21/2022 3:24 PM] tux_linux
...nope


[5/21/2022 3:24 PM] tux_linux
let me remove it


[5/21/2022 3:24 PM] szybet
😆


[5/21/2022 3:24 PM] szybet
its the same but the end is other


[5/21/2022 3:24 PM] szybet
give me some time


[5/21/2022 3:25 PM] szybet
what about those `\n\n\n\n\nn\n\`?


[5/21/2022 3:25 PM] tux_linux
i think they weren't necessary at the end


[5/21/2022 3:26 PM] szybet
couldnt this all be replaced with `replace("\n" " ")`


[5/21/2022 3:26 PM] szybet
?


[5/21/2022 3:26 PM] tux_linux
I think I tried it but something didn't work


[5/21/2022 3:26 PM] szybet
it should work in rust this way


[5/21/2022 3:28 PM] tux_linux
in any case, my logic is a failure in that subject


[5/21/2022 3:28 PM] tux_linux
there must be a better way to do this


[5/21/2022 3:28 PM] szybet
if it works and is faster with rust, then its fine


[5/21/2022 3:29 PM] tux_linux
I remember I tried QTextDocument in june 2021 but I had the worst nightmares with it


[5/21/2022 3:29 PM] szybet
QTextBrowser is cool


[5/21/2022 3:29 PM] szybet
works fine in sanki


[5/21/2022 3:29 PM] szybet
*for the most part*


[5/21/2022 3:30 PM] tux_linux
yeah, but it doesn't support pages


[5/21/2022 3:45 PM] szybet
where is it on the kobo putting those cutted off txt files


[5/21/2022 3:46 PM] szybet
`/inkbox/book/split`


[5/21/2022 3:46 PM] szybet
where


[5/21/2022 3:50 PM] tux_linux
In a tmpfs


[5/21/2022 3:50 PM] szybet
`./opt/gui_rootfs/write/inkbox/book/split` i got it


[5/21/2022 3:50 PM] tux_linux
Noo


[5/21/2022 3:50 PM] szybet
why


[5/21/2022 3:50 PM] tux_linux
In a tmpfs


[5/21/2022 3:50 PM] tux_linux
See split.sh in GUI bundle


[5/21/2022 3:52 PM] szybet
how do i get there... 
```
kobo:/kobo/mnt/onboard/.adds/inkbox# cat split.sh 
#!/bin/sh

MOUNT_RULE=`cat /inkbox/remount`

if [ "$MOUNT_RULE" != "false" ]; then
        umount -l -f /inkbox
        mount -t tmpfs tmpfs /inkbox
        mkdir -p /inkbox/book/split
        mkdir -p /inkbox/dictionary
else
        echo "split.sh: remount flag set to 'false', not remounting tmpfs..."
fi
kobo:/kobo/m
```


[5/21/2022 3:54 PM] tux_linux
Run InkBox and open a text file


[5/21/2022 3:55 PM] szybet
if split.txt fails then it will not create those directories?...


[5/21/2022 3:55 PM] szybet
nothing. maybe becouse of my script


[5/21/2022 3:57 PM] szybet
restarted inkbox


[5/21/2022 3:57 PM] szybet
still cant find this folder


[5/21/2022 3:57 PM] szybet
where is it...


[5/21/2022 3:57 PM] tux_linux
Probably
Unmount it
Or tweak the part in InkBox source code


[5/21/2022 3:57 PM] tux_linux
/kobo/inkbox?


[5/21/2022 3:58 PM] szybet
i opened a book with original python scripts


[5/21/2022 3:58 PM] szybet
there is text


[5/21/2022 3:58 PM] szybet
now where is it stored


[5/21/2022 4:06 PM] szybet
/kobo/inkbox/book/split/


[5/21/2022 4:06 PM] szybet
;_;


[5/21/2022 4:06 PM] szybet
im blind


[5/21/2022 4:32 PM] szybet
python original:
```
one of the first       private seminaries in town, had a fortune of twenty thousand       pounds, were in the habit of spending more than they ought, and       of associating with people of rank; and were therefore in every       respect entitled to think well of themselves, and meanly of       others. They were of a respectable family in the north of       England; a circumstance more deeply impressed on their memories       than that their brother’s fortune and their own had been acquired       by trade.

      Mr. Bingley inherited property to the amount of nearly a hundred       thousand pounds from his father, who had intended to purchase an       estate, but did not live to do it. Mr. Bingley intended it       likewise, and sometimes made choice of his county; but as he was       now provided with a good house and the liberty
```
rust mine:
```
one of the first
      private seminaries in town, had a fortune of twenty thousand
      pounds, were in the habit of spending more than they ought, and
      of associating with people of rank; and were therefore in every
      respect entitled to think well of themselves, and meanly of
      others. They were of a respectable family in the north of
      England; a circumstance more deeply impressed on their memories
      than that their brother’s fortune and their own had been acquired
      by trade.

      Mr. Bingley inherited property to the amount of nearly a hundred
      thousand pounds from his father, who had intended to purchase an
      estate, but did not live to do it. Mr. Bingley intended it
      likewise, and sometimes made choice of his county; but as he was
      now provided with a good house and the liberty 
```


[5/21/2022 4:33 PM] szybet
I cant get it to show in inkbox with mine script, mind mount doesnt work


[5/21/2022 4:33 PM] szybet
but if i launch it manually, it works


[5/21/2022 4:33 PM] szybet
so its propably fine


[5/21/2022 4:35 PM] szybet
i will make it identical to the python one


[5/21/2022 4:39 PM] tux_linux
the python one is not better


[5/21/2022 4:39 PM] tux_linux
but yours doesn't cut newlines


[5/21/2022 4:39 PM] szybet
mine will have problems


[5/21/2022 4:39 PM] tux_linux
try to do the python one but with only one space for a group of newlines, not more than one


[5/21/2022 4:40 PM] szybet
it will look like this: ( example lines )
```
Mr. Bingley inherited property to the amount o
Mr. Bingley
Mr. Bingley inherited property to the amount o
Mr. Bingley inhe
```
becouse there are newlines, and qt doesnt fit to the size of screen but to them


[5/21/2022 4:40 PM] szybet
i will


[5/21/2022 4:42 PM] tux_linux
ideally, it should look like this:
```
one of the first private seminaries in town, had a fortune of twenty thousand pounds, were in the habit of spending more than they ought, and of associating with people of rank; and were therefore in every respect entitled to think well of themselves, and meanly of others. They were of a respectable family in the north of England; a circumstance more deeply impressed on their memories than that their brother’s fortune and their own had been acquired by trade.

      Mr. Bingley inherited property to the amount of nearly a hundred thousand pounds from his father, who had intended to purchase an estate, but did not live to do it. Mr. Bingley intended it likewise, and sometimes made choice of his county; but as he was now provided with a good house and the liberty
```


[5/21/2022 4:43 PM] szybet
then it will


[5/21/2022 4:43 PM] tux_linux
thanks


[5/21/2022 5:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3108B.png


[5/21/2022 5:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9A93F.png


[5/21/2022 5:19 PM] szybet
ideal


[5/21/2022 5:19 PM] szybet
gutenberg really formats them weird


[5/21/2022 5:25 PM] szybet
It could be improved


[5/21/2022 5:25 PM] szybet
like an algorithm that cuts off text by those pauses


[5/21/2022 5:25 PM] szybet
but its not worth the effort


[5/21/2022 5:25 PM] szybet
i will push it to the repo


[5/21/2022 6:25 PM] tux_linux
I will write a wiki page about how it works so I don't get lost myself...


[5/21/2022 6:25 PM] szybet
then i can do the forntend


[5/21/2022 6:26 PM] szybet
especially the process of creating apps / how the json is parsed


[5/21/2022 6:26 PM] tux_linux
i prefer to do both


[5/21/2022 6:26 PM] szybet
well if you want


[5/21/2022 6:26 PM] szybet
i have written the code, so maybe it would be easier to me


[5/21/2022 6:26 PM] tux_linux
inkbox mount table is a complicated mess of nonsense sometimes


[5/21/2022 6:26 PM] szybet
*yes*


[5/21/2022 6:26 PM] tux_linux
sometimes I can understand it
because I've programmed it


[5/21/2022 6:27 PM] szybet
sometimes


[5/21/2022 6:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7C2B1.png


[5/21/2022 6:29 PM] szybet
a graph like that could be helpfull


[5/21/2022 6:29 PM] tux_linux
yeah


[5/21/2022 6:29 PM] szybet
complicated designs need simple explanations


[5/21/2022 6:31 PM] tux_linux
will user apps be only limited to qt apps?


[5/21/2022 6:32 PM] szybet
why are you asking?


[5/21/2022 6:32 PM] szybet
fbink - http - apps too


[5/21/2022 6:33 PM] tux_linux
ok


[5/21/2022 6:33 PM] tux_linux
I was writing the description for the wiki page


[5/21/2022 6:33 PM] szybet
for example an app writen using plato implemtation


[5/21/2022 6:33 PM] szybet
or syncthing, as a web server with some little qt app to launch it / show the ip


[5/21/2022 6:34 PM] szybet
there could be other GUI types too


[5/21/2022 6:34 PM] tux_linux
ok


[5/21/2022 6:34 PM] szybet
¯\_(ツ)_/¯


[5/21/2022 6:57 PM] tux_linux
started... a bit https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
Index.php


[5/21/2022 6:58 PM] szybet
looks good


[5/21/2022 6:58 PM] tux_linux
but I have also found a security flaw: since dev is mounted, we can access mmcblk0 at our will


[5/21/2022 6:58 PM] tux_linux
we would need an unpriviledged user


[5/21/2022 6:58 PM] szybet
you forgot app.json


[5/21/2022 6:58 PM] tux_linux
oh yes


[5/21/2022 6:58 PM] szybet
small json


[5/21/2022 6:58 PM] szybet
of course


[5/21/2022 6:58 PM] szybet
can you just dont mount it?


[5/21/2022 6:58 PM] tux_linux
but then we can't write to the fb since it requires root


[5/21/2022 6:59 PM] tux_linux
no, and apps could mount it anyway


[5/21/2022 6:59 PM] szybet
dont mind bind it to the chroot?


[5/21/2022 6:59 PM] szybet
can the fb0 file be chown by the chroot user?


[5/21/2022 7:01 PM] tux_linux
maybe


[5/21/2022 7:01 PM] tux_linux
try it?


[5/21/2022 7:01 PM] tux_linux
then apps can't access fb0, and can't print to the screen


[5/21/2022 7:01 PM] tux_linux
do you have a sample app.json?


[5/21/2022 7:04 PM] szybet
im saying about mmcblk


[5/21/2022 7:05 PM] tux_linux
apps can create it then


[5/21/2022 7:06 PM] tux_linux
btw there won't be a 'signed' property for the json


[5/21/2022 7:06 PM] szybet
you can generate it, its in the code, and here is one:
```json
{
  "app": {
    "Author": "Szybet",
    "Enabled": true,
    "ExecPath": "sanki",
    "IconPath": "sanki.png",
    "Name": "Sanki",
    "Signed": true,
    "SupportedDevices": "n306",
    "Version": "0.1 testing"
  }
}
```


[5/21/2022 7:07 PM] tux_linux
a dgst file will have to be there. if devmode is enabled and the dgst file is not valid, it will launch anyway


[5/21/2022 7:07 PM] szybet
would it be better that in devmode it would say which files are valid, and which not?


[5/21/2022 7:07 PM] tux_linux
then what is the point of devmode
boot time will be the same


[5/21/2022 7:08 PM] tux_linux
maybe it would be nice to add a "contact" entry in the json, with email adress


[5/21/2022 7:08 PM] szybet
it will mount all of them, but it will say which were signed correctly


[5/21/2022 7:08 PM] szybet
just an info


[5/21/2022 7:09 PM] tux_linux
but the boot time will be longer


[5/21/2022 7:10 PM] tux_linux
`SupportedDevices` will give us headaches in the future


[5/21/2022 7:10 PM] tux_linux
I think I will add `all` as a device too


[5/21/2022 7:11 PM] szybet
leave it as it is, in the future we will add a warning that this app is not supported, would you like to continue. thats all


[5/21/2022 7:11 PM] szybet
or a very long string


[5/21/2022 7:11 PM] tux_linux
hmm


[5/21/2022 7:12 PM] szybet
well okay, we can remove it


[5/21/2022 7:12 PM] tux_linux
good idea
i will leave 'all' there but if developer prefers to specify devices, he will be able to and we can show that warning


[5/21/2022 7:13 PM] szybet
only a warning


[5/21/2022 7:13 PM] szybet
if a user is really wants it we can't stop him ;p

{Reactions}
👍 

[5/21/2022 7:13 PM] tux_linux
updated wiki


[5/21/2022 7:14 PM] szybet
looks better

{Reactions}
👍 

[5/22/2022 3:35 PM] tux_linux
I'll try to continue the app framework today
First, finish wiki page


[5/22/2022 3:35 PM] szybet
feel free to ask if something confuses you

{Reactions}
👍 

[5/22/2022 8:30 PM] szybet
after i remove the signed property for json, can i make a pull request? i think everything is ready there


[5/22/2022 8:30 PM] tux_linux
yes, I will review the changes


[5/22/2022 8:30 PM] szybet
okay, i will make it today i think

{Reactions}
👍 

[5/22/2022 10:01 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/28


[5/22/2022 10:02 PM] szybet
there are propably some minor name style imperfections


[5/22/2022 10:03 PM] szybet
there are also some smaller pull requests from me in other repos:
https://github.com/Kobo-InkBox/emu/pull/4
https://github.com/Kobo-InkBox/gui-bundle/pull/1


[5/22/2022 10:03 PM] szybet
and this: 
https://github.com/Szybet/inkbox-split-rs


[5/22/2022 10:03 PM] szybet
collection of links


[5/22/2022 10:04 PM] tux_linux
ok thanks


[5/22/2022 10:04 PM] tux_linux
will try to review #28


[5/22/2022 10:05 PM] szybet
When user apps will be implemented, i would like to focus on other apps, like scribble, calculator etc. could you upload their source code? its missing for some of them


[5/22/2022 10:07 PM] tux_linux
hmm yeah


[5/22/2022 10:17 PM] tux_linux
I'll first finish up Qt porting of the Kindle Touch (some things are missing), then I'll look into the PR


[5/22/2022 10:17 PM] szybet
sure


[5/22/2022 10:18 PM] szybet
what about the audio jack of the KT? will you support it?


[5/22/2022 10:18 PM] tux_linux
not in the initial release


[5/22/2022 10:18 PM] tux_linux
but in the future, yes


[5/22/2022 10:18 PM] szybet
in the future i will add it for my project


[5/22/2022 10:18 PM] tux_linux
well, maybe we can use buck player


[5/22/2022 10:18 PM] szybet
so it depends who will be faster


[5/22/2022 10:19 PM] szybet
you mean?


[5/22/2022 10:19 PM] tux_linux
https://github.com/Bill13579/buck

{Embed}
https://github.com/Bill13579/buck
GitHub - Bill13579/buck: The definitive e-book reader music player ...
The definitive e-book reader music player (Kobo, Kindle) - GitHub - Bill13579/buck: The definitive e-book reader music player (Kobo, Kindle)
/mnt/data/projects/git/conversations/media/buck-B151F


[5/22/2022 10:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9EC85.png


[5/22/2022 10:19 PM] szybet
nice


[5/22/2022 10:19 PM] tux_linux
yes


[5/22/2022 10:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E362D.png


[5/22/2022 10:21 PM] szybet
he is using fbink


[5/22/2022 10:21 PM] szybet
we can add it as a user app


[5/22/2022 10:21 PM] szybet
but


[5/22/2022 10:21 PM] szybet
we should add to the book menu / main menu buttons too


[5/22/2022 10:21 PM] szybet
play, next, back


[5/22/2022 10:22 PM] tux_linux
yea


[5/22/2022 10:22 PM] szybet
then it will be a normal experience


[5/22/2022 10:22 PM] tux_linux
well, if we have aplay available or something, it is doable from scratch too


[5/22/2022 10:22 PM] tux_linux
directly in qt


[5/22/2022 10:23 PM] szybet
integrating our play buttons with his app will be pain


[5/22/2022 10:23 PM] szybet
i think it would be best if we created a qdialog and buttons in various places to activate it


[5/22/2022 10:23 PM] tux_linux
yes


[5/22/2022 10:28 PM] szybet
actually my plans are
1. make apps usable
2. rewrite splash screen / sleep manager
3. bug fixes / fix things that make me angry sometimes
4. develop sanki a bit
5. kobo nia audio

I dont know when you plan 2.0, but i think half of summer holidays will be good, and I should to this point do it


[5/22/2022 10:54 PM] tux_linux
1. rewrite splash screen/sleep manager
2. make apps usable
3-5 ok


[5/23/2022 12:27 AM] szybet
In the sleep manager there is a killall to send the app to sleep ( propably ) now with user apps, we will need to read the apps.json right ( but becouse Execpath could be a launcher  ? ). Its messy, couldn't it be done to killall this way all running processes ( with some exceptions )


[5/23/2022 12:28 AM] szybet
I dont really know it function and what it does so i cant find a proper solution


[5/23/2022 12:28 AM] tux_linux
you can forget killall, we need to reimplement lockscreen


[5/23/2022 12:28 AM] tux_linux
kill -STOP will need to be done


[5/23/2022 12:28 AM] szybet
Why


[5/23/2022 12:28 AM] tux_linux
it's crap


[5/23/2022 12:28 AM] szybet
I dont really understand


[5/23/2022 12:29 AM] tux_linux
https://github.com/Kobo-InkBox/lockscreen

{Embed}
https://github.com/Kobo-InkBox/lockscreen
GitHub - Kobo-InkBox/lockscreen: Lockscreen program for InkBox
Lockscreen program for InkBox. Contribute to Kobo-InkBox/lockscreen development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/lockscreen-38B36


[5/23/2022 12:29 AM] szybet
And?


[5/23/2022 12:29 AM] tux_linux
half-good, but the way it is launched is not ideal


[5/23/2022 12:30 AM] tux_linux
also, ideally we would need to find a way to encrypt the passcode


[5/23/2022 12:30 AM] raycast_
Just make it kill everything except bash and then run a program that will wait for the power button press


[5/23/2022 12:30 AM] tux_linux
and decrypt it


[5/23/2022 12:32 AM] raycast_
You can load stuff in the ram for faster resuming


[5/23/2022 12:32 AM] tux_linux
It's more complicated than that


[5/23/2022 12:32 AM] szybet
*why is inkbox launching so slow after sleep*


[5/23/2022 12:32 AM] tux_linux
?


[5/23/2022 12:32 AM] tux_linux
it's not


[5/23/2022 12:32 AM] szybet
Thats exactly what its doing


[5/23/2022 12:32 AM] raycast_
Oh


[5/23/2022 12:32 AM] szybet
With his solution it is

{Reactions}
👍 

[5/23/2022 12:32 AM] raycast_
Anyway, imma go sleep now


[5/23/2022 12:33 AM] raycast_
My throat hurts and breathing is a pain


[5/23/2022 12:33 AM] szybet
Compile a encrypting tool? But a fast one.


[5/23/2022 12:33 AM] tux_linux
encfs is good for books


[5/23/2022 12:34 AM] tux_linux
I would just like something like /etc/passwd in the kernel


[5/23/2022 12:34 AM] tux_linux
maybe actually use /etc/passswd


[5/23/2022 12:34 AM] tux_linux
this could work


[5/23/2022 12:34 AM] szybet
Its not stupid


[5/23/2022 12:34 AM] szybet
Create a user passcode


[5/23/2022 12:34 AM] raycast_
Why encryption tho?


[5/23/2022 12:34 AM] tux_linux
Because lockscreen?


[5/23/2022 12:34 AM] szybet
Its simple, weird but makes sense


[5/23/2022 12:35 AM] raycast_
Why encryption at all?


[5/23/2022 12:35 AM] tux_linux
You wouldn't want your passcode stored as plain text in the SD card, I guess?


[5/23/2022 12:35 AM] raycast_
Just hash it


[5/23/2022 12:35 AM] tux_linux
and?
users can de-hash it


[5/23/2022 12:35 AM] szybet
Its almost the same thing


[5/23/2022 12:36 AM] szybet
Stop arguing


[5/23/2022 12:36 AM] tux_linux
If you hash it, you must know a way to de-hash it, right?
how do you get to know that?


[5/23/2022 12:37 AM] raycast_
Custom algorithm


[5/23/2022 12:37 AM] szybet
Actually linux kernel is hashing passwords


[5/23/2022 12:37 AM] szybet
Thats the second worst idea i heard today


[5/23/2022 12:37 AM] raycast_
👍


[5/23/2022 12:37 AM] tux_linux
i never understood how it could hash one and then get back to hash it without us able to crack it (usually)


[5/23/2022 12:38 AM] szybet
Hashing is like enrypting, linux kernel is hashing passwords with a good algorithm, Windows is doing it too, but with md5😂


[5/23/2022 12:39 AM] raycast_
I'm busy watching people erp in my notification bar


[5/23/2022 12:39 AM] szybet
https://www.geeksforgeeks.org/difference-between-hashing-and-encryption/

{Embed}
https://www.geeksforgeeks.org/difference-between-hashing-and-encryption/
Difference between Hashing and Encryption - GeeksforGeeks
A Computer Science portal for geeks. It contains well written, well thought and well explained computer science and programming articles, quizzes and practice/competitive programming/company interview Questions.
/mnt/data/projects/git/conversations/media/EncryptionvsEncodingvsHashing1-660x280-D91F5.jpg


[5/23/2022 12:41 AM] szybet
But encrypting is better becouse its not easy to quess with what algorithm trying it to decrypt


[5/23/2022 12:41 AM] tux_linux
OOOH


[5/23/2022 12:41 AM] tux_linux
i understand now


[5/23/2022 12:41 AM] szybet
But it's open source... Linux and inkbox


[5/23/2022 12:41 AM] szybet
So hashing maybe then? It's faster


[5/23/2022 12:41 AM] tux_linux
yeah, for passcode it's ok


[5/23/2022 1:58 AM] nonasuomy
@Szybet you should inform them that your flash cards is better https://www.youtube.com/watch?v=xuj3TDxG0v4

{Embed}
Good e-Reader
https://www.youtube.com/watch?v=xuj3TDxG0v4
E INK Flash Cards Paperang E1 | Unboxing ePaper EP.2 (+Contest)
This is Unboxing Epaper; a New Series we are doing on the side in an attempt to bring you guys more interesting content and more FREE STUFF! 

That's right, each video is paired with a contest. We will GIVE AWAY this unit in each video for FREE to the first 20 COMMENTS. 

EP.2 Paperang EINK Flash Cards

Thank you for your support

You can your e...
/mnt/data/projects/git/conversations/media/maxresdefault-78EFF.jpg


[5/23/2022 7:54 AM] szybet
Sanki is not ready for reviews... But it's already better than this e-waste


[5/23/2022 8:23 AM] szybet
@tux-linux 
when do you plan to show the qdialog for supported devices. I could write this.


[5/23/2022 9:46 AM] szybet
https://streamable.com/wpv23r

{Embed}
https://streamable.com/wpv23r
Peek 2022-05-23 09-44
/mnt/data/projects/git/conversations/media/wpv23r-C5077.jpg


[5/23/2022 9:46 AM] szybet
is this how light maps always worked? if yes then i dont see a chance to improve them on the kobo


[5/23/2022 10:26 AM] szybet
as for callendar, i think about replacing it with this:
https://github.com/jubnzv/qtask

{Embed}
https://github.com/jubnzv/qtask
GitHub - jubnzv/qtask: GUI organizer based on Taskwarrior
GUI organizer based on Taskwarrior. Contribute to jubnzv/qtask development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qtask-BA223


[5/23/2022 10:49 AM] szybet
Started a thread.


[5/23/2022 10:54 AM] szybet
another distro that died
https://github.com/librereader


[5/23/2022 11:01 AM] szybet
https://github.com/ccoffing/OcherBook


[5/23/2022 11:01 AM] szybet
another one


[5/23/2022 11:01 AM] szybet
its a graveyard


[5/23/2022 10:21 PM] tux_linux
yeah


[5/23/2022 10:21 PM] tux_linux
sad


[5/23/2022 10:23 PM] tux_linux
there's also okreader
debian with koreader on top
seems stalled too https://github.com/lgeek/okreader

{Embed}
https://github.com/lgeek/okreader
GitHub - lgeek/okreader: Free/libre software for Kobo ebook readers
Free/libre software for Kobo ebook readers. Contribute to lgeek/okreader development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/okreader-E4CC6


[5/26/2022 7:48 PM] szybet
@tux-linux some questions
1. what is a valid bundle version?
2. if i set some global properties for generaldialog, do i need to unset them? ( i think not, but there is a bug somewhere propably )
3. how do i create a wiki article ( about implementation, functions of the new power deamon )


[5/26/2022 8:56 PM] tux_linux
1 "1.9"
2 yes
3 look up "mediawiki create page"


[5/26/2022 9:42 PM] szybet
okay, thanks


[5/26/2022 9:42 PM] szybet
where is the file that it mounts onboard onboard as noexec?


[5/26/2022 11:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-35F8E.png


[5/26/2022 11:27 PM] tux_linux
Yes the page number will affect something


[5/26/2022 11:27 PM] tux_linux
Please revert it back


[5/26/2022 11:28 PM] szybet
its bad if it will

{Reactions}
👍 

[5/26/2022 11:28 PM] szybet
¯\_(ツ)_/¯


[5/27/2022 12:01 AM] szybet
why sanki doesnt have access to the filesystem... i mean it doesnt see files


[5/27/2022 12:01 AM] szybet
time doesnt work too

oh it works its just 00:00 here


[5/27/2022 12:02 AM] tux_linux
what where when how


[5/27/2022 12:03 AM] tux_linux
hehe


[5/27/2022 12:06 AM] szybet
my fault... i needed to cd to sanki dir in launch script


[5/27/2022 12:06 AM] tux_linux
ok


[5/27/2022 12:07 AM] szybet
shouldnt inkbox restart when i exit sanki, and sanki was launched by inkbox?


[5/27/2022 12:13 AM] tux_linux
yes


[5/27/2022 12:13 AM] tux_linux
usually the apps do that themselves


[5/27/2022 12:14 AM] szybet
then why it doesnt do that


[5/27/2022 12:14 AM] tux_linux
check code in 2048 script, for example


[5/27/2022 12:14 AM] szybet
noooo


[5/27/2022 12:14 AM] szybet
well i could do that from sanki launch script


[5/27/2022 12:18 AM] szybet
`/bin/ash: service: not found`


[5/27/2022 12:18 AM] szybet
so how do i relaunch inkbox from chroot?


[5/27/2022 12:19 AM] tux_linux
.


[5/27/2022 12:19 AM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/2048

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/2048
gui-bundle/2048 at main · Kobo-InkBox/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0D0A1


[5/27/2022 12:20 AM] szybet
oh its a script


[5/27/2022 12:20 AM] szybet
not qt code


[5/27/2022 12:20 AM] szybet
okay


[5/27/2022 10:53 AM] szybet
how do i compile cpp for kobo?...


[5/27/2022 10:53 AM] szybet
bash: /sleep_manager.bin: No such file or directory


[5/27/2022 10:53 AM] szybet
this isint funny


[5/27/2022 10:53 AM] szybet
@tux-linux


[5/27/2022 11:03 AM] szybet
works fine in the chroot


[5/27/2022 11:03 AM] szybet
propably some musl *ff****


[5/27/2022 1:41 PM] szybet
```
[build] : && /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-g++ -g -rdynamic CMakeFiles/inkbox-power-deamon.dir/src/main.cpp.o -o inkbox-power-deamon   && :
[build] /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: CMakeFiles/inkbox-power-deamon.dir/src/main.cpp.o: in function `main':
[build] /mnt/HDD/Project/Public/inkbox-power-deamon/src/main.cpp:38: undefined reference to `start_monitoring_dev()
```
why... wtf


[5/27/2022 1:43 PM] szybet
https://github.com/Szybet/inkbox-power-deamon

{Embed}
https://github.com/Szybet/inkbox-power-deamon
GitHub - Szybet/inkbox-power-deamon
Contribute to Szybet/inkbox-power-deamon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-149D0


[5/27/2022 1:43 PM] szybet
here is the code


[5/27/2022 1:43 PM] szybet
and i have no idea what is going on


[5/27/2022 1:46 PM] tux_linux
In cpp use camel case pls


[5/27/2022 1:46 PM] tux_linux
Maybe you forgot to define it in the header?


[5/27/2022 1:53 PM] szybet
Well yes


[5/27/2022 1:53 PM] szybet
It is there


[5/27/2022 1:53 PM] szybet
So what is doing on


[5/27/2022 1:54 PM] szybet
Every error in cpp is forcing me to write this in rust


[5/27/2022 2:17 PM] tux_linux
I don't mind


[5/27/2022 2:18 PM] tux_linux
Until it's not an interpreted language


[5/27/2022 2:19 PM] szybet
You mean intepreted?


[5/27/2022 2:20 PM] tux_linux
yeah


[5/27/2022 2:20 PM] tux_linux
actually


[5/27/2022 2:20 PM] szybet
I mind. I want to learn cpp🥴


[5/27/2022 2:20 PM] tux_linux
ok
don't forget camelCase


[5/27/2022 2:20 PM] szybet
I want headerFileToWork


[5/27/2022 2:21 PM] tux_linux
Try writing it in C and then you will love C++


[5/27/2022 2:21 PM] szybet
I already have written in rust


[5/27/2022 2:21 PM] tux_linux
i know why


[5/27/2022 2:21 PM] szybet
So i hate everything else


[5/27/2022 2:22 PM] szybet
That was a mistake😆


[5/27/2022 2:22 PM] tux_linux
no nvm


[5/27/2022 2:23 PM] tux_linux
why are you including cstring


[5/27/2022 2:23 PM] tux_linux
just use `std::string`


[5/27/2022 2:28 PM] tux_linux
you aren't even building monitorEvents.cpp


[5/27/2022 2:32 PM] tux_linux
https://cliutils.gitlab.io/modern-cmake/chapters/basics.html

{Embed}
https://cliutils.gitlab.io/modern-cmake/chapters/basics.html
Introduction to the Basics · Modern CMake


[5/27/2022 2:33 PM] tux_linux
so the linker can never find a definition relating to start_monitoring_dev


[5/27/2022 2:36 PM] szybet
Propably a typo :p


[5/27/2022 2:37 PM] szybet
I tryied manually with g++ and it was the same...


[5/27/2022 2:38 PM] tux_linux
it would be a good start to include it in your CMakeLists


[5/27/2022 2:38 PM] szybet
😂


[5/27/2022 11:58 PM] szybet
And this?


[5/28/2022 12:04 AM] tux_linux
How/where are you building it?


[5/28/2022 12:16 AM] szybet
Umm there is a commented command with g++. I tryied with cmake too. Is there a magic argument for musl?

Where? Project directory


[5/28/2022 12:42 AM] tux_linux
What is the error?


[5/28/2022 5:55 AM] szybet
This


[5/28/2022 6:04 AM] tux_linux
you need to compile with a musl toolchain


[5/28/2022 6:04 AM] tux_linux
e.g., in kernel repo, use armv7l-linux-musleabihf


[5/28/2022 6:05 AM] tux_linux
```
pushd [kernel-repo]/toolchain/armv7l-linux-musleabihf-cross/bin && export PATH="${PATH}:${PWD}" && popd
```


[5/28/2022 6:06 AM] tux_linux
then you will have `armv7l-linux-musleabihf-g++` for example


[5/28/2022 7:31 AM] tux_linux
c'mon...

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-137FD.png


[5/28/2022 7:32 AM] tux_linux
It should be
```
ui->bodyLabel->setText("<font face='u001'>Your device is not compatible with this app, launch anyway</font><font face='Inter'>?</font>");
```


[5/28/2022 7:33 AM] szybet
What did i wrong


[5/28/2022 7:33 AM] szybet
Propably english?


[5/28/2022 7:33 AM] tux_linux
you put ? two times


[5/28/2022 7:34 AM] tux_linux
btw for newline cut you can just use qstring.trimmed()


[5/28/2022 7:34 AM] szybet
Typi or smth


[5/28/2022 7:34 AM] szybet
Where


[5/28/2022 7:34 AM] tux_linux
Maybe I should change it
But that's a lot of search-replace


[5/28/2022 7:34 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DE49E.png


[5/28/2022 7:35 AM] tux_linux
```
QString betterDeviceID = global::deviceID.trimmed();
```


[5/28/2022 7:35 AM] szybet
Leave it for now, we have better things to do than code buety

{Reactions}
👍 

[5/28/2022 7:37 AM] tux_linux
please revert generalDialog designer page number before we forget it... 😉


[5/28/2022 7:44 AM] tux_linux (pinned)
You can test different viewport sizes with emu. Quick tips:
- Emulate a Mini (N705)
```
echo 187 > /data/config/09-dpi/config
QT_QPA_PLATFORM=vnc:size=600x800
```
- Emulate a Kobo Touch (N905 B/C) or a Kindle Touch (KT)
```
echo 160 > /data/config/09-dpi/config
QT_QPA_PLATFORM=vnc:size=600x800
```
- Emulate a Glo/Aura SE/Nia (N613, N236, N306)
```
echo 195 > /data/config/09-dpi/config
QT_QPA_PLATFORM=vnc:size=758x1024
```
- Emulate a Glo HD (N437)
```
echo 275 > /data/config/09-dpi/config
QT_QPA_PLATFORM=vnc:size=1072x1448
```
- Emulate a Libra (N873)
```
echo 285 > /data/config/09-dpi/config
QT_QPA_PLATFORM=vnc:size=1264x1680
```

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AD699.png


[5/28/2022 7:44 AM] tux_linux
Pinned a message.


[5/28/2022 7:46 AM] szybet
It shouldnt matter. Every mode in general dialog shoukf set his own properties


[5/28/2022 7:48 AM] tux_linux
well sometimes they don't


[5/28/2022 7:52 AM] szybet
There will be bugs becouse of it


[5/28/2022 7:52 AM] tux_linux
yes, probably


[5/28/2022 7:52 AM] szybet
🥴


[5/28/2022 4:46 PM] szybet
musl.


[5/28/2022 4:46 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-EE9F9.png


[5/28/2022 4:46 PM] szybet
any magic link with a guide to counter that?


[5/28/2022 4:46 PM] tux_linux
no, musl isn't that finicky


[5/28/2022 4:47 PM] tux_linux
let me try to compile it


[5/28/2022 4:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-8A5C1.txt


[5/28/2022 4:49 PM] szybet
i pushed to the repo


[5/28/2022 4:49 PM] szybet
my hate for alpine is coming back


[5/28/2022 4:49 PM] tux_linux
ok, I have the error


[5/28/2022 4:49 PM] tux_linux
let's see


[5/28/2022 4:54 PM] tux_linux
good
```
nicolas@fedora ~/D/inkbox-power-deamon (main)> make
Consolidate compiler generated dependencies of target inkbox-power-deamon
[ 33%] Building CXX object CMakeFiles/inkbox-power-deamon.dir/src/main.cpp.o
[ 66%] Building CXX object CMakeFiles/inkbox-power-deamon.dir/src/monitorEvents.cpp.o
[100%] Linking CXX executable inkbox-power-deamon
[100%] Built target inkbox-power-deamon
nicolas@fedora ~/D/inkbox-power-deamon (main)>
```


[5/28/2022 4:54 PM] szybet
///////////////////////////////


[5/28/2022 4:54 PM] szybet
?


[5/28/2022 4:54 PM] szybet
(╯°□°）╯︵ ┻━┻


[5/28/2022 4:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/git-10400.patch


[5/28/2022 4:55 PM] szybet
W H Y


[5/28/2022 4:56 PM] tux_linux
If you don't want to write `std::someobject` every time, you can use `using namespace std`, but read this before, maybe it's actually better not to: https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice

{Embed}
https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice
Why is "using namespace std;" considered bad practice?
I've been told by others that writing using namespace std; in code is wrong, and that I should use std::cout and std::cin directly instead.

Why is using namespace std; considered a bad practice? I...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png

{Reactions}
👌 

[5/28/2022 4:56 PM] szybet
i have been using it


[5/28/2022 4:56 PM] szybet
and the errors ware there


[5/28/2022 4:58 PM] tux_linux
did you know that either `const char* tmp` or `const char *tmp` is valid?
when I learnt this I just switched to `const char * tmp` haha


[5/28/2022 4:58 PM] szybet
so vscode is lying to me


[5/28/2022 4:58 PM] szybet
i was confused for a hour becouse of it


[5/28/2022 6:14 PM] szybet
in every IDE i get errors like `main.cpp:1:10: fatal error: 'iostream' file not found`


[5/28/2022 6:14 PM] szybet
wtf


[5/28/2022 6:17 PM] szybet
Nothing really likes this compiler


[5/28/2022 6:17 PM] szybet
😞


[5/28/2022 6:19 PM] szybet
Why cant there be normal glibc in the kobo


[5/28/2022 6:19 PM] tux_linux
Because


[5/28/2022 6:19 PM] tux_linux
Kernel is too old


[5/28/2022 6:28 PM] szybet
Okay but ugh


[5/28/2022 6:28 PM] szybet
Autocompletion, IDE errors should be a tool for a programmer to help him


[5/28/2022 6:29 PM] szybet
Not to spend 3 hours getting them to work with c💩 💩


[5/28/2022 6:29 PM] tux_linux
Then don't use an IDE


[5/28/2022 6:29 PM] szybet
I want autocompletion and errors on the run


[5/28/2022 6:30 PM] szybet
Otherwise ot will take too much timr


[5/28/2022 6:32 PM] szybet
The only time i had issues similar to that with cpp now in rust were when i tryied to compile a 5 years old library for... musl


[5/28/2022 6:33 PM] szybet
I think i will write this in rust


[5/28/2022 6:33 PM] szybet
Cpp is just such a mess where nothing works


[5/28/2022 6:34 PM] tux_linux
how did you set up vscode?


[5/28/2022 6:36 PM] szybet
You mean?


[5/28/2022 6:36 PM] tux_linux
Well, maybe you're missing an include path somewhere


[5/28/2022 6:37 PM] tux_linux
`CPLUS_INCLUDE_PATH` in env could help


[5/28/2022 6:39 PM] tux_linux
```
CPLUS_INCLUDE_PATH=/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/armv7l-linux-musleabihf/include/c++/10.2.1
```


[5/29/2022 12:18 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C79AD.png


[5/29/2022 12:18 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-316BF.png


[5/29/2022 12:18 AM] szybet
i tryied qt creator too


[5/29/2022 12:18 AM] szybet
same problems ( maybe less of them )


[5/29/2022 12:18 AM] szybet
maybe the toolchain is... well broken


[5/29/2022 12:19 AM] szybet
https://musl.cc/#binaries

{Embed}
https://musl.cc/
musl libc toolchains | static cross/native toolchains
musl.cc provides static cross- and native- musl-based toolchains for Linux, Windows, and macOS, targeting architectures like ARM, MIPS, PowerPC, RISC-V, S/390, and more.


[5/29/2022 12:20 AM] szybet
```
armv7l-linux-musleabihf-cross.tgz                  23-Nov-2021 04:35           102402461
armv7l-linux-musleabihf-native.tgz                 23-Nov-2021 04:45            78569942
armv7m-linux-musleabi-cross.tgz                    23-Nov-2021 04:36           102619580
armv7m-linux-musleabi-native.tgz                   23-Nov-2021 04:45            78798631
armv7r-linux-musleabihf-cross.tgz                  23-Nov-2021 04:36           102412649
armv7r-linux-musleabihf-native.tgz  
```


[5/29/2022 12:20 AM] szybet
l - m - r whats the diffrenc


[5/29/2022 12:30 AM] szybet
the file is at `/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/armv7l-linux-musleabihf/include/c++/10.2.1/armv7l-linux-musleabihf/bits`


[5/29/2022 12:30 AM] szybet
but i cant really add him that it will be seen


[5/29/2022 3:06 AM] ninuje
You want the L


[5/29/2022 3:06 AM] ninuje
The other two are for other, tinier ARM CPUs


[5/29/2022 3:07 AM] ninuje
I've never told any IDE to poke at a custom cross TC


[5/29/2022 3:07 AM] ninuje
I just let it use my native headers


[5/29/2022 3:07 AM] ninuje
(which usually involves doing nothing, then again, Gentoo here)


[5/29/2022 5:10 AM] tux_linux
Yeah, usually using the native headers is fine, but if you get into arch-specific things it might get complicated


[5/29/2022 1:46 PM] szybet
in `/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/armv7l-linux-musleabihf/include/c++/10.2.1` `cp -r armv7l-linux-musleabihf/bits/* bits` to make clangd to work


[5/29/2022 1:52 PM] szybet
also: `CPLUS_INCLUDE_PATH=/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/armv7l-linux-musleabihf/include/c++/10.2.1 code`


[5/29/2022 1:53 PM] szybet
🥴 😠


[5/29/2022 2:07 PM] tux_linux
Ok good


[5/29/2022 2:07 PM] szybet
no.


[5/29/2022 2:07 PM] szybet
to much time spend on this


[5/29/2022 2:08 PM] tux_linux
Well now your development stack is working


[5/29/2022 2:39 PM] szybet
@tux-linux  what is writing to `/tmp/power`? should i read events it from /dev/ somewhere


[5/29/2022 2:49 PM] szybet
and `/tmp/touch_event`


[5/29/2022 6:03 PM] tux_linux
evtest


[5/29/2022 6:05 PM] szybet
so i should simply read from /tmp?


[5/29/2022 6:38 PM] tux_linux
noooo


[5/29/2022 6:39 PM] tux_linux
please use libevdev or something to read input events


[5/29/2022 6:39 PM] tux_linux
It has to be rewritten
Like, the way I implemented evtest... crap


[5/29/2022 6:42 PM] tux_linux
goal of this powerd is to launch as few new processes as possible (use built-in ways instead of doing something you would to in shell) and be lightweight


[6/3/2022 12:07 AM] tux_linux
@Szybet progress!

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A3261.png


[6/3/2022 6:34 AM] szybet
Yay

{Reactions}
👍 

[6/3/2022 2:55 PM] tux_linux
How does your implementation in Qt verify if apps are signed correctly and disables/enables them based on that info?


[6/3/2022 4:50 PM] szybet
You simply dont Mount them?


[6/3/2022 4:51 PM] szybet
Thats was the point


[6/3/2022 8:53 PM] tux_linux
Ok
Each app will have an ID
For example, my DemoApp will have ID 0. Sanki will have ID 1 and so on.
It has to be a JSON property
The service will tell the qt GUI which app IDs are valid or not and disable/enable them based on that fact


[6/3/2022 8:56 PM] tux_linux
How does your qt implementation create apps buttons?


[6/3/2022 10:30 PM] szybet
well, in what way? what do you want to know? its not a specific question


[6/3/2022 10:30 PM] szybet
how will it tell


[6/3/2022 10:31 PM] szybet
disable / enable pernamently? this has nothing to do with the json enable / disable?


[6/3/2022 10:35 PM] tux_linux
Disable the app if the signature is not valid
It will not even be mounted


[6/3/2022 10:36 PM] szybet
if it will not be mounted, then there will be no directory, so there isint a way to read the small json file, so it will be not added to the big one, so it will be not be shown at all


[6/3/2022 10:36 PM] tux_linux
Good


[6/3/2022 10:37 PM] szybet
simply dont mount it


[6/3/2022 10:37 PM] tux_linux
Then we have no problem
Apps are all enabled by default?


[6/3/2022 10:37 PM] szybet
yes, and?


[6/3/2022 10:37 PM] szybet
jsons are saved to the isa files


[6/3/2022 10:40 PM] tux_linux
How does it create them, in a for loop? Didn't see it in the pr


[6/3/2022 10:41 PM] szybet
yes


[6/3/2022 10:41 PM] szybet
https://github.com/Szybet/inkbox/blob/ed1b618e0218798eb48bb1659665a6bd54e3aec9/apps.cpp#L339

{Embed}
https://github.com/Szybet/inkbox/blob/ed1b618e0218798eb48bb1659665a6bd54e3aec9/apps.cpp
inkbox/apps.cpp at ed1b618e0218798eb48bb1659665a6bd54e3aec9 · Szybe...
An open-source, Qt-based eBook reader for Kobos. Contribute to Szybet/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-FE368

{Reactions}
👍 

[6/4/2022 8:08 PM] szybet
Will apps have access to setting up Wi-Fi connection?


[6/4/2022 8:08 PM] tux_linux
No


[6/4/2022 8:09 PM] szybet
Becouse?


[6/4/2022 8:09 PM] tux_linux
It involves loading a module


[6/4/2022 8:10 PM] tux_linux
Unless we put that in a FIFO
But I'm not sure I want that


[6/4/2022 8:11 PM] szybet
How about adding a json entry that will prevent the app from running when there is no internet connection?


[6/4/2022 8:11 PM] tux_linux
That is better


[6/4/2022 8:11 PM] szybet
Launching syncthing without internet would be stupid


[6/4/2022 8:12 PM] tux_linux
NeedsInternetConnection


[6/4/2022 8:13 PM] szybet
Maybe something like:
Needed

Becouse we can then eassly add more things, like if the device is rooted, or has a jack in it


[6/4/2022 8:14 PM] tux_linux
Can it contain multiple int values?


[6/4/2022 8:15 PM] szybet
There are arrays in json, so it could

Lets go just with string and then thin1,thing2. More human friendly and eassly to code and explain than some ID


[6/4/2022 8:15 PM] tux_linux
But harder to parse


[6/4/2022 8:15 PM] szybet
No?


[6/4/2022 8:15 PM] szybet
Literally .contains


[6/4/2022 8:16 PM] tux_linux
Hmmmmmmmmmm


[6/4/2022 8:16 PM] szybet
I do it with supported devices


[6/4/2022 8:17 PM] szybet
Adding arrays to small jsons will add so much code, its not Worth it. Iterating above those will be complicated too


[6/4/2022 8:17 PM] tux_linux
Let's say you have ReadingMode and TestReadingMode
How do you differentiate that?


[6/4/2022 8:18 PM] szybet
Thats the neat part, you dont do it in the first part


[6/4/2022 8:18 PM] szybet
:p


[6/4/2022 8:18 PM] tux_linux
?


[6/4/2022 8:18 PM] szybet
Just dont name it like that


[6/4/2022 8:18 PM] szybet
If you really want


[6/4/2022 8:19 PM] szybet
We can split the string by "," character


[6/4/2022 8:31 PM] tux_linux
I still think using ints is better


[6/4/2022 9:16 PM] szybet
you will use 2kb less of ram and space and will confuse every user and developer that will look into it

and the code will be horrible


[6/4/2022 9:16 PM] tux_linux
`#define`


[6/4/2022 9:18 PM] szybet
its not worth it


[6/5/2022 4:43 AM] tux_linux
```
// There is a better way. propably
            if(dir.path().split("/").last().contains(".") == false)
```
I hope


[6/5/2022 4:44 AM] tux_linux
You're basically checking if `dir.path()` is a file?


[6/5/2022 4:45 AM] tux_linux
https://stackoverflow.com/a/62457958

{Embed}
https://stackoverflow.com/a/62457958
How to identify whether an item is a file or a folder in QT
I wanted to specify from a path, whether the item is a file or a folder. How can I implement such function which takes a path (QString based input) and tells whether it is a file or folder?
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/5/2022 4:45 AM] tux_linux
at worst create QFile object from `dir.path()` variable


[6/5/2022 4:45 AM] tux_linux
I think it is


[6/5/2022 5:38 AM] tux_linux
I think I will implement Linux namespaces in user apps backend


[6/5/2022 5:51 AM] tux_linux
This is very interesting
https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces

{Embed}
https://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces
Separation Anxiety: A Tutorial for Isolating Your System with Linux...
Toptal engineer Mahmud Ridwan dives into the Linux kernel with this in-depth guide to Linux namespaces, and how you can use them to create robust isolated environments on your Linux machine.
/mnt/data/projects/git/conversations/media/default-social-1-8644cb76eb27911e855db3b3e-78D91.png


[6/5/2022 9:29 AM] szybet
Im filtering '.' and '..' out


[6/5/2022 11:37 AM] szybet
make it simple


[6/5/2022 1:37 PM] tux_linux
Ok, but there will also be .isa files in this folder
I guess it will work too?


[6/5/2022 1:55 PM] szybet
it checks if its a folder, so yes

{Reactions}
👍 

[6/7/2022 6:23 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/c38387372a2f59f7e51e9232da97e27254a54aa0
First steps

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/c38387372a2f59f7e51e9232da97e27254a54aa0
GUI user applications: first scripts · Kobo-InkBox/rootfs@c383873
/mnt/data/projects/git/conversations/media/c38387372a2f59f7e51e9232da97e27254a54aa0-800CE


[6/7/2022 6:42 PM] szybet
so you went for chroot?


[6/7/2022 7:38 PM] tux_linux
Yes
I also need to set up namespaces


[6/7/2022 7:38 PM] tux_linux
For process tree, etc


[6/11/2022 11:38 PM] tux_linux
What to do with `Enabled` property in `app.json` if it is read-only?


[6/11/2022 11:38 PM] raycast_
I'm thirsty


[6/11/2022 11:54 PM] szybet
it isin't?


[6/11/2022 11:54 PM] tux_linux
where is it then?


[6/11/2022 11:54 PM] tux_linux
not in the app.isa?


[6/11/2022 11:56 PM] szybet
yes


[6/11/2022 11:56 PM] szybet
you said it will be rw


[6/11/2022 11:56 PM] szybet
but only a bit


[6/11/2022 11:56 PM] tux_linux
so the user needs to copy app.isa, app.isa.dgst and app.json?


[6/11/2022 11:57 PM] szybet
it should be in the same squashfs file?


[6/11/2022 11:57 PM] tux_linux
ideally yes, but since there is the enabled property, difficult to do


[6/11/2022 11:57 PM] raycast_
Why are ya making stuff complicated?


[6/11/2022 11:57 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
continued that a bit

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
Index.php


[6/11/2022 11:57 PM] szybet
make it a bit rw?


[6/11/2022 11:58 PM] tux_linux
yes


[6/11/2022 11:59 PM] tux_linux
do we just put a file in app-data containing true/false if it's enabled?


[6/11/2022 11:59 PM] tux_linux
and the gui reads from it?


[6/11/2022 11:59 PM] szybet
why do you want to redesign it again?


[6/11/2022 11:59 PM] tux_linux
No, just that property


[6/12/2022 12:00 AM] tux_linux
otherwise the app.json would need to be copied initially in app-data to be rw
but that might cause other problems (ExecPath vulnerability maybe)


[6/12/2022 12:02 AM] szybet
looks good but `RequiredFeatures` are meant for features that need user interaction - like enabling wifi, or flashing a rooted kernel, not if wifi is there. DevicesSupported use that


[6/12/2022 12:02 AM] tux_linux
hmm yeah


[6/12/2022 12:03 AM] szybet
you can mount the sqashfs as rw only when you want to save those variables, so at reboot / poweroff


[6/12/2022 12:03 AM] tux_linux
```
Property containing an array of the application's required features. <i>Features</i> are functions of InkBox OS that are not always available based on user interaction (e.g. Wi-Fi connection). Below is a list of features that this property supports.
```


[6/12/2022 12:03 AM] tux_linux
you can't mount a squashfs rw


[6/12/2022 12:03 AM] tux_linux
unless you use overlayfs/unionfs, which is another complicated layer of mounts


[6/12/2022 12:04 AM] szybet
so how do you want to write to app.json


[6/12/2022 12:04 AM] szybet
you said you will do it


[6/12/2022 12:04 AM] tux_linux
we don't need to write to it except for enabled property right?


[6/12/2022 12:04 AM] tux_linux
really?


[6/12/2022 12:05 AM] szybet
good. write the list for now as needed wifi connection and needed rooted kernel, i will implement that

{Reactions}
👍 

[6/12/2022 12:05 AM] szybet
for now, yes


[6/12/2022 12:06 AM] tux_linux
i'm afraid of what could happen if the user was to change the execpath property without any signature verification on that file


[6/12/2022 12:06 AM] tux_linux
but if it's an unpriviledged user...


[6/12/2022 12:07 AM] szybet
execpath is an path in the folder already, and it cant contain dots so its impossible to point to bash or something


[6/12/2022 12:08 AM] szybet
if someone specifies /bin/bash then the executed binary will be /mount/onboard/onboard/.apps/sanki//bin/bash


[6/12/2022 12:08 AM] szybet
i think i implemented it that way


[6/12/2022 12:08 AM] szybet
if not i need to correct it


[6/12/2022 12:09 AM] tux_linux
now it's system-bin or app-bin, but yeah ok


[6/12/2022 12:09 AM] szybet
just an example


[6/12/2022 12:10 AM] szybet
making it rw can help us in the future


[6/12/2022 12:11 AM] tux_linux
so do we copy it in app-data when the app is installed or is it a separate file (e.g. `sanki.json` in `/data/onboard/.apps/sanki.json`)?


[6/12/2022 12:12 AM] szybet
implementing other things will be easier, like a fancy "UsegaTime" json string


[6/12/2022 12:12 AM] tux_linux
hmm yeah


[6/12/2022 12:12 AM] tux_linux
but it could as well be a stats.json file in app-data


[6/12/2022 12:13 AM] tux_linux
updated wiki page


[6/12/2022 12:14 AM] szybet
i dont understand the question, but for now its working that at boot its reading from all small jsons from apps folders and combining it to one bigger that inkbox reads it, and when its needed to reboot / shutdown it updates those files in app folders. those functions are already written in `main.cpp` by me


[6/12/2022 12:14 AM] tux_linux
Well, it can't be in the app folder directly


[6/12/2022 12:15 AM] szybet
and its going to be a mess
how do you clean apps that have been unninstalled?


[6/12/2022 12:15 AM] szybet
why...


[6/12/2022 12:17 AM] tux_linux
It will initially be in the app folder, but read-only. From there we have two options:
1. Copy it into app-data and write to it there (backend can do this). GUI will be able to access it at `[app-dir]/app-data/app.json`. Keep in mind that it might be harder to wipe the app's user data if we implement an option like this in the future if this option is taken. But it has its pros/cons
2. Just make the user install it in the same folder that isa packages are in. GUI will be able to access it at `/data/onboard/.apps/sanki.json`, in the same folder where `sanki.isa*` and other apps will be


[6/12/2022 12:19 AM] raycast_
Why don't ya make it merge the json files every boot?


[6/12/2022 12:19 AM] tux_linux
we already do that


[6/12/2022 12:20 AM] szybet
okay, a compromise will be when we will ship zip files with app.json, app.isa*,
its easy, not too much complicated

{Reactions}
👍 

[6/12/2022 12:20 AM] raycast_
Ya also can get pretty far by just using if statements in bash


[6/12/2022 12:20 AM] tux_linux
what are you talking about


[6/12/2022 12:20 AM] raycast_
Idk


[6/12/2022 12:20 AM] raycast_
I'm thirsty


[6/12/2022 12:20 AM] szybet
in that way not many things will need to be rewritten, and the rw problem is solved


[6/12/2022 12:20 AM] tux_linux
so option 2 chosen


[6/12/2022 12:21 AM] raycast_
Why are the app files separated anyway?


[6/12/2022 12:21 AM] szybet
with this


[6/12/2022 12:21 AM] tux_linux
yeah, in zip files


[6/12/2022 12:21 AM] raycast_
I'm sleepy


[6/12/2022 12:22 AM] szybet
go sleep


[6/12/2022 12:22 AM] szybet
and then think how every other os ships apps


[6/12/2022 12:22 AM] szybet
and why^


[6/12/2022 12:24 AM] raycast_
Using either encrypted installation files that have a certificate
A compressed file with the binaries in it
Or with a compressed file that contains all the info about the app, a list of dependencies and the app itself


[6/12/2022 12:25 AM] szybet
thats exactly what we do


[6/12/2022 12:25 AM] raycast_
Which


[6/12/2022 12:26 AM] tux_linux
oh shit we forgot deps


[6/12/2022 12:26 AM] raycast_
And why don't you run the apps native?
You currently are using a chroot right?


[6/12/2022 12:26 AM] tux_linux
Security vulnerability


[6/12/2022 12:26 AM] szybet
what deps


[6/12/2022 12:26 AM] tux_linux
like, if every app has to provide the same deps, they will be way to heavy for no reason


[6/12/2022 12:27 AM] raycast_
There are easy ways to make it safe while still making it run native


[6/12/2022 12:27 AM] tux_linux
at least qt is already out of the way, we can provide it


[6/12/2022 12:27 AM] szybet
we provide qt


[6/12/2022 12:27 AM] szybet
what do you want more?


[6/12/2022 12:27 AM] tux_linux
idk, rust? python? lua?


[6/12/2022 12:27 AM] tux_linux
well, ok, rust is fine


[6/12/2022 12:28 AM] szybet
you can simply in the future add them to the folder system-lib

{Reactions}
👍 

[6/12/2022 12:28 AM] raycast_
You just need to make a user for every application and only give it access to the required folders and files


[6/12/2022 12:28 AM] szybet
mount bind them


[6/12/2022 12:28 AM] szybet
no problem with that


[6/12/2022 12:28 AM] szybet
if someone really wanted them


[6/12/2022 12:28 AM] tux_linux
That is called selinux


[6/12/2022 12:28 AM] raycast_
The thingy that's broken on my phone?


[6/12/2022 12:28 AM] szybet
thats called user and groups


[6/12/2022 12:29 AM] raycast_
Chmod
Chown

Those thingies


[6/12/2022 12:29 AM] raycast_
Chroot is inefficient asf


[6/12/2022 12:29 AM] tux_linux
Also, editing passwd every time like that is not a good idea


[6/12/2022 12:29 AM] tux_linux
why?


[6/12/2022 12:30 AM] raycast_
Cuz ya are emulating another Linux os on slow hardware


[6/12/2022 12:30 AM] tux_linux
It's not emulating


[6/12/2022 12:30 AM] tux_linux
It's just changing root


[6/12/2022 12:30 AM] raycast_
It's running a lot of stuff twice


[6/12/2022 12:30 AM] szybet
its not emulating


[6/12/2022 12:31 AM] raycast_
It's less good performance


[6/12/2022 12:31 AM] szybet
no


[6/12/2022 12:31 AM] raycast_
It cant communicate with already running processes


[6/12/2022 12:31 AM] tux_linux
it can


[6/12/2022 12:31 AM] tux_linux
and that is not good


[6/12/2022 12:31 AM] tux_linux
it's why I want to use namespaces along chroot


[6/12/2022 12:31 AM] szybet
IDK about that, but is there a better way?


[6/12/2022 12:31 AM] raycast_
Yes


[6/12/2022 12:32 AM] tux_linux
https://unix.stackexchange.com/a/35552

{Embed}
https://unix.stackexchange.com/a/35552
Is there a drawback when using a chroot in high performance computing?
My (small) company uses an out-of-date linux (centos) software stack to run a proprietary software on a small cluster. Understandingly, IT is reluctant to upgrade since everything works now.

I'd l...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[6/12/2022 12:32 AM] szybet
qemu is emulating
virtualbox is

docker kinda isint
wine isint
chroot isint
firejail isint


[6/12/2022 12:33 AM] raycast_
It's still slower


[6/12/2022 12:33 AM] tux_linux
Docker is using a mix of chroot and namespaces


[6/12/2022 12:33 AM] tux_linux
please explain why


[6/12/2022 12:33 AM] raycast_
Just make user for custom user apps
And only give it access to required files


[6/12/2022 12:33 AM] szybet
complicated. but the kernel is the same, but its emulating other things sooo


[6/12/2022 12:34 AM] szybet
how do you delete user after deleting an app?


[6/12/2022 12:34 AM] tux_linux
userdel or smth


[6/12/2022 12:34 AM] szybet
0 facts are provided with this argument


[6/12/2022 12:34 AM] szybet
we dont want a for loop scanning for deleted apps. dont


[6/12/2022 12:34 AM] raycast_
By making uninstall script for every app which can be generated by using variables I guess


[6/12/2022 12:34 AM] tux_linux
i don't want that either


[6/12/2022 12:35 AM] szybet
lets trust every developer, nice


[6/12/2022 12:35 AM] raycast_
You can make it so that the uninstall data is included in the json file


[6/12/2022 12:35 AM] tux_linux
but then app.json is not signed
great


[6/12/2022 12:36 AM] raycast_
Or just use 1 user for all custom user apps


[6/12/2022 12:37 AM] tux_linux
aaaaaaaaaaa


[6/12/2022 12:37 AM] tux_linux
then an app will be able to delete any other app's user data


[6/12/2022 12:37 AM] raycast_
User launches app

Script mounts specific app data to path which the custom app user can access

On exit; unmount that path


[6/12/2022 12:38 AM] szybet
someone can replace everything in this json file and it will do nothing wrong, its bullet proof


[6/12/2022 12:39 AM] tux_linux
i was talking about that


[6/12/2022 12:39 AM] raycast_
This will prevent the uninstall thingy from uninstalling other apps cuz it can't access them


[6/12/2022 12:41 AM] raycast_
Or create a custom package manager


[6/12/2022 12:42 AM] raycast_
Or maybe just make a apt repository


[6/12/2022 12:42 AM] szybet
https://tenor.com/view/wtf-damn-holy-shit-woah-double-take-gif-14320488

{Embed}
https://tenor.com/view/wtf-damn-holy-shit-woah-double-take-gif-14320488
/mnt/data/projects/git/conversations/media/wtf-damn-9C227.png


[6/12/2022 12:42 AM] raycast_
It would make uninstalling safer at least


[6/12/2022 12:43 AM] szybet
you said chroot was not efficient ;p


[6/12/2022 12:43 AM] tux_linux
this will be 100x slower


[6/12/2022 12:43 AM] raycast_
Apt isn't a that stupid idea tho


[6/12/2022 12:43 AM] tux_linux
have you ever run apt on an embedded device like that?


[6/12/2022 12:43 AM] raycast_
Why? It's only for installing and uninstalling software


[6/12/2022 12:44 AM] raycast_
Won't be slower than playing red alert 2 on a windows 95 laptop


[6/12/2022 12:45 AM] tux_linux
It will take at least a minute just to read the database


[6/12/2022 12:45 AM] raycast_
Even if the database is very small?


[6/12/2022 12:46 AM] raycast_
Like if the databases only contains 30 things?


[6/12/2022 12:46 AM] tux_linux
I don't know


[6/12/2022 12:47 AM] raycast_
Can't you do a test or something?


[6/12/2022 12:48 AM] szybet
i just want to launch some apps made by me and some ported once

not to use a packages manager on a **e r e a d e r**🥴


[6/12/2022 12:48 AM] tux_linux
you would really want to rewrite this? https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/gui_apps

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/gui_apps
rootfs/gui_apps at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-0747E


[6/12/2022 12:48 AM] raycast_
Alphine Linux has a package manager build in


[6/12/2022 12:48 AM] szybet
have you ever use alpine?


[6/12/2022 12:49 AM] szybet
you havent


[6/12/2022 12:49 AM] raycast_
https://wiki.alpinelinux.org/wiki/Package_management

{Embed}
https://wiki.alpinelinux.org/wiki/Package_management
Package management


[6/12/2022 12:49 AM] tux_linux
the gui chroot is not on alpine


[6/12/2022 12:49 AM] tux_linux
it's on buildroot


[6/12/2022 12:49 AM] raycast_
What's the main os?


[6/12/2022 12:49 AM] szybet
alpine


[6/12/2022 12:49 AM] szybet
alpine is a chorrible linux distro


[6/12/2022 12:49 AM] szybet
the end


[6/12/2022 12:49 AM] tux_linux
Boot process is
initrd -> alpine -> gui chroot
basically


[6/12/2022 12:50 AM] tux_linux
but we don't have a choice


[6/12/2022 12:50 AM] szybet
i know


[6/12/2022 12:50 AM] tux_linux
also, it is lighter, so there is at least that


[6/12/2022 12:50 AM] szybet
thats why i like the chroot idea ;p

{Reactions}
👍 

[6/12/2022 12:51 AM] raycast_
I've only used Debian, Ubuntu, Gentoo and arch (although not very much)


[6/12/2022 12:53 AM] raycast_
Why is the GUI running in a chroot? And does that mean that the the GUI also is being shown in a vnc session like the build in webbrowser?


[6/12/2022 12:53 AM] tux_linux
??vnc


[6/12/2022 12:53 AM] tux_linux
because it requires glibc


[6/12/2022 12:54 AM] tux_linux
(qt)


[6/12/2022 12:55 AM] raycast_
I once accidentally crashed the webbrowser and it showed that the vnc session was closed


[6/12/2022 12:55 AM] tux_linux
that is x11
another chroot


[6/12/2022 12:55 AM] tux_linux
it's a weird gtk2 bug


[6/12/2022 12:56 AM] raycast_
What distro is the chroot running?


[6/12/2022 12:56 AM] tux_linux
alpine


[6/12/2022 12:57 AM] raycast_
Would this be faster than alphine?
https://arm.slitaz.org/


[6/12/2022 12:57 AM] tux_linux
i'm getting that error for some reason while trying to chroot as unpriviledged user (chroot as root works)
```
kobo:/# su user -s /app-temp/busybox
su: can't execute '/app-temp/busybox': Permission denied
kobo:/#
```


[6/12/2022 12:57 AM] tux_linux
it's a good distro, but it would not be faster


[6/12/2022 12:58 AM] raycast_
What about ram usage?


[6/12/2022 12:58 AM] tux_linux
alpine's good


[6/12/2022 12:59 AM] raycast_
What's the official Kobo os based on?


[6/12/2022 1:00 AM] tux_linux
buildroot and glibc


[6/12/2022 1:00 AM] tux_linux
atrociously old glibc (because atrociously old kernel)


[6/12/2022 1:00 AM] raycast_
Interesting information


[6/12/2022 1:04 AM] raycast_
Where did you get the kernel from?


[6/12/2022 1:05 AM] raycast_
I found newer kernel for the Kobo clara HD


[6/12/2022 1:06 AM] raycast_
I wonder if it also includes support for the other touch screens cuz that would mean it might be possible to create a newer kernel


[6/12/2022 1:09 AM] raycast_
https://github.com/akemnade/linux

{Embed}
https://github.com/akemnade/linux
GitHub - akemnade/linux: Linux kernel source tree
Linux kernel source tree. Contribute to akemnade/linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/linux-36D55


[6/12/2022 1:10 AM] raycast_
There are branches there for the Clara HD


[6/12/2022 1:10 AM] raycast_
And some other devices


[6/12/2022 1:14 AM] tux_linux
it's not only touch screens
there is ongoing experimental support for a mainline kernel for Aura SE by the same maintainer (andi1), I tested it, it works except for the eink screen


[6/12/2022 1:15 AM] tux_linux
andi1 has submitted it in the mailing list and they are almost ready to accept it, only style fixes are needed


[6/12/2022 1:15 AM] raycast_
Would be nice if it was possible to reverse engineer the eink driver/kernel module


[6/12/2022 1:16 AM] tux_linux
it is possible


[6/12/2022 1:16 AM] tux_linux
it's just hard


[6/12/2022 1:16 AM] tux_linux
the clara hd kernel has eink screen support


[6/12/2022 1:16 AM] raycast_
It's impossible for me


[6/12/2022 1:16 AM] tux_linux
for me too


[6/12/2022 1:16 AM] tux_linux
andi1 is the wizard


[6/12/2022 1:17 AM] raycast_
I don't even know c or c++


[6/12/2022 1:17 AM] tux_linux
(well, I understand some of it of course, but the really big work is only done by him)


[6/12/2022 1:17 AM] raycast_
I only can do a bit of python, batch and bash


[6/12/2022 1:17 AM] tux_linux
batch looks strange


[6/12/2022 1:17 AM] raycast_
Batch is fun


[6/12/2022 1:18 AM] raycast_
I can make people want to puke with my scripts


[6/12/2022 1:18 AM] tux_linux
welp
bash is fun too


[6/12/2022 1:19 AM] raycast_
I made script that requires around 33 arguments or something


[6/12/2022 1:19 AM] the.mightydill
i agree


[6/12/2022 1:19 AM] raycast_
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P/tree/main/SimpleAluTesting%2FV3

{Embed}
https://github.com/BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P/tree/main/SimpleAluTesting%2FV3
8bit-cpu-in-cmd-W.I.P/SimpleAluTesting/V3 at main · BlueMagicalWolf...
trying to recreate the cpu from http://simplecpudesign.com/simple_cpu_v1/index.html in the cmd - 8bit-cpu-in-cmd-W.I.P/SimpleAluTesting/V3 at main · BlueMagicalWolf/8bit-cpu-in-cmd-W.I.P
/mnt/data/projects/git/conversations/media/c15a6b47-2739-432c-9026-92570303c560-83638


[6/12/2022 1:19 AM] raycast_
I optimized stuff a little bit


[6/12/2022 1:20 AM] raycast_
It now uses functions instead of separate if statements


[6/12/2022 1:20 AM] raycast_
Meaning that it uses less variables


[6/12/2022 1:22 AM] raycast_
It's also faster now


[6/12/2022 1:22 AM] tux_linux
oh shit
i would have done that in C


[6/12/2022 1:22 AM] tux_linux
or assembly (suppose that I knew that)


[6/12/2022 1:22 AM] raycast_
Why?


[6/12/2022 1:23 AM] tux_linux
*that* is terribly inefficient


[6/12/2022 1:23 AM] tux_linux
(doing it in batch)


[6/12/2022 1:23 AM] tux_linux
but congrats


[6/12/2022 1:23 AM] raycast_
That's why it's fun


[6/12/2022 1:23 AM] raycast_
I'm not done yet tho


[6/12/2022 1:23 AM] raycast_
Only the ALU is completely done


[6/12/2022 1:24 AM] raycast_
Although I can make it a little bit faster if I clean the code a bit more

{Reactions}
👍 

[6/12/2022 7:42 PM] tux_linux
I was thinking about that this morning
Maybe we could implement an 'app store' for InkBox OS


[6/12/2022 7:43 PM] the.mightydill
yes!


[6/12/2022 7:43 PM] szybet
https://tenor.com/view/yes-yes-yes-gif-22948122

{Embed}
https://tenor.com/view/yes-yes-yes-gif-22948122
/mnt/data/projects/git/conversations/media/yes-yes-yes-CB1B8.png


[6/12/2022 7:43 PM] the.mightydill
more like "app library" or "get apps"


[6/12/2022 7:43 PM] the.mightydill
because they shouldn't cost money


[6/12/2022 7:43 PM] tux_linux
we could split the 'library' in half, a library for books and a library for apps


[6/12/2022 7:43 PM] the.mightydill
yeah


[6/12/2022 7:43 PM] tux_linux
it would have to be lightweight


[6/12/2022 7:43 PM] tux_linux
we will ban apps like that


[6/12/2022 7:44 PM] tux_linux
or any app that is not open-source


[6/12/2022 7:44 PM] tux_linux
prove me wrong


[6/12/2022 7:44 PM] the.mightydill
i won't


[6/12/2022 7:44 PM] the.mightydill
because you're right :p

{Reactions}
👍 

[6/12/2022 7:44 PM] szybet
yes


[6/12/2022 7:44 PM] szybet
i mean, for the library and official list

{Reactions}
👍 

[6/12/2022 7:44 PM] aryetis
That s extreme but hey it s your baby

{Reactions}
👍 

[6/12/2022 7:45 PM] the.mightydill
don't ban, just don't allow


[6/12/2022 7:45 PM] the.mightydill
or just don't implement a paying thing at all


[6/12/2022 7:45 PM] tux_linux
they will need to be signed, so people will need to enable developer mode to run them, since we won't sign them


[6/12/2022 7:45 PM] the.mightydill
yeah


[6/12/2022 7:46 PM] tux_linux
the standard way of getting apps via downloading bundles on a server would still be valid though


[6/12/2022 7:46 PM] tux_linux
this is starting to look like android
soon we will use the term 'sideloading' hehe

{Reactions}
😂 

[6/12/2022 7:46 PM] the.mightydill
or hey, you could do some weird shit with github repos and allow users to install apps from github


[6/12/2022 7:47 PM] tux_linux
if they are signed


[6/12/2022 7:47 PM] tux_linux
that's how Play store, App store work


[6/12/2022 7:47 PM] the.mightydill
yeah


[6/12/2022 8:07 PM] tux_linux
@Szybet you are checking the device model in `/opt/device`?
I think I will provide this to user apps via the `DEVICE` env var


[6/12/2022 8:08 PM] tux_linux
You can then get it with `std::getenv("DEVICE")` or something like that


[6/12/2022 8:08 PM] szybet
in sanki, yes

{Reactions}
👍 

[6/12/2022 8:08 PM] szybet
do as you like it, its only changing one line of code

{Reactions}
👍 

[6/12/2022 10:51 PM] szybet
in the recent changes, the only thing that i need to add / change is `RequiredFeatures` right?


[6/12/2022 10:51 PM] szybet
or something more


[6/12/2022 10:51 PM] szybet
i think i forgot about something


[6/12/2022 10:52 PM] tux_linux
yes
but you also need to tell it to search in the same directory of the .isa archive for the json


[6/12/2022 10:52 PM] tux_linux
and that json will be called <name of app>.json


[6/12/2022 10:52 PM] szybet
it searches through all directories in .apps folder so what is needed to change?


[6/12/2022 10:52 PM] szybet
does it really needs to be like that?


[6/12/2022 10:53 PM] tux_linux
yes


[6/12/2022 10:53 PM] tux_linux
we discussed it yesterday
you don't remember?


[6/12/2022 10:53 PM] tux_linux
Example directory structure:
```
/data/onboard/.apps:
Sanki.json
Sanki.isa
Sanki.isa.dgst
Sanki/ # Contains the mounted archive/chroot
```


[6/12/2022 10:53 PM] szybet
oh, i alse needed to check if execpath is safe


[6/12/2022 10:54 PM] szybet
oh... i thought it was meant that the zip file will contain a dir in it


[6/12/2022 10:54 PM] tux_linux
apps can be shipped in zip files/tar/etc.


[6/12/2022 10:54 PM] szybet
sooo we were talking about diffrent things


[6/12/2022 10:54 PM] tux_linux
but they will be extracted


[6/12/2022 10:56 PM] szybet
I wanted:
```
/data/onboard/.apps:
/Sanki/app.json
/Sanki/Sanki.isa
/Sanki/Sanki.isa.dgst
idk where you want to mount it
```
this has 3 adventages:
1. deleting app will be easy for the user, deleting one folder only
2. it will be a clean .apps folder
3. nothing in the current code will change


[6/12/2022 10:57 PM] tux_linux
I'll see if it's something easy to change in my code


[6/12/2022 10:57 PM] tux_linux
```
/data/onboard/.apps:
/Sanki/app.json
/Sanki/Sanki.isa
/Sanki/Sanki.isa.dgst
/Sanki/Sanki # Mount
```


[6/12/2022 10:57 PM] tux_linux
if not I'll tell you
let's see


[6/12/2022 10:58 PM] szybet
its possible in the mount? if yes it will be the best way to do this


[6/12/2022 10:58 PM] tux_linux
```
for f in /data/onboard/.apps/*.isa; do
```
to
```
for f in /data/onboard/.apps/*/*.isa; do
```
or maybe I am missing something


[6/12/2022 10:58 PM] tux_linux
will probably cause unwanted issues


[6/12/2022 10:59 PM] szybet
well your code is short, mine is like...  `+1,335 −294` i know there are ui files and comments but still


[6/12/2022 11:00 PM] szybet
i dont mind rewriting it, but i m afraid that i will introduce bugs


[6/12/2022 11:00 PM] szybet
i think its good


[6/12/2022 11:01 PM] tux_linux
I was reviewing the PR a few days ago, although it is good stuff there are a lot style/syntax things that need to be changed


[6/12/2022 11:02 PM] szybet
you could create a wiki page about code style and syntax

{Reactions}
👍 

[6/12/2022 11:02 PM] szybet
it would help


[6/12/2022 11:02 PM] tux_linux
So I think I will maybe take your code line-by-line and incorporate it in my tree gradually
It will also be a nice way to check for possible bugs and/or improvements
Like a second review


[6/12/2022 11:02 PM] szybet
as you want


[6/12/2022 11:03 PM] szybet
i only want them to be merged


[6/12/2022 11:03 PM] tux_linux
`Sanki/app.json` or `Sanki/Sanki.json`?


[6/12/2022 11:03 PM] tux_linux
it will, you can be sure of that
maybe not a direct merge, but all you wrote will be there in the same way or following the writing style


[6/12/2022 11:05 PM] szybet
1. you have already app name in the folder
2. its simler in my opinion
3. other package manager also do that that way
4. code will not be needed to change

so app.json


[6/12/2022 11:05 PM] tux_linux
yeah ok
i've got some problems already


[6/12/2022 11:05 PM] tux_linux
will see how easy it is to fix them


[6/12/2022 11:06 PM] szybet
sure, if you want i can correct them just point me to the lines of files

i will look now when adding RequiredFeatures at syntax etc

{Reactions}
👍 

[6/12/2022 11:06 PM] szybet
describe them


[6/12/2022 11:06 PM] szybet
maybe i could help


[6/12/2022 11:06 PM] tux_linux
i think i found the issue


[6/12/2022 11:06 PM] tux_linux
simple variable thing


[6/12/2022 11:08 PM] tux_linux (pinned)
basically, camelCase,
```
if(thing) {
  doThing();
}
else {
  doOtherThing();
}
```


[6/12/2022 11:10 PM] tux_linux
it works now


[6/12/2022 11:10 PM] tux_linux
monstrous mount table

{Attachments}
/mnt/data/projects/git/conversations/media/message-00870.txt


[6/12/2022 11:11 PM] szybet
yea, it will get longer with user apps

{Reactions}
👍 

[6/12/2022 11:12 PM] tux_linux
```
.
./Sanki.isa
./Sanki.isa.dgst
./app.json
./Sanki
./Sanki/app-bin
./Sanki/app-bin/sanki
./Sanki/app-bin/sanki.bin
./Sanki/app-data
./Sanki/app-lib
./Sanki/app-lib/libzip.so
./Sanki/app-temp
./Sanki/dev
./Sanki/dev/input
./Sanki/dev/input/event2
./Sanki/dev/input/event1
./Sanki/dev/input/event0
./Sanki/dev/fb0
./Sanki/etc
./Sanki/etc/group
./Sanki/etc/passwd
```


[6/12/2022 11:12 PM] szybet
mnt and system bin / lib?


[6/12/2022 11:13 PM] tux_linux
strange, I told it to exclude proc and sys
it ate system-lib and system-bin


[6/12/2022 11:13 PM] tux_linux
but they are there


[6/12/2022 11:13 PM] tux_linux
I didn't add mnt in the isa yet


[6/12/2022 11:13 PM] tux_linux
There you have a better idea
```
nicolas@gentoo-ryzen ~/D/i/u/Sanki> ls
app-bin/  app-data/  app.json  app-lib/  app-temp/  dev/  etc/  proc/  sanki.png*  sys/  system-bin/  system-lib/
nicolas@gentoo-ryzen ~/D/i/u/Sanki>
```


[6/12/2022 11:13 PM] tux_linux
sanki.png will be moved to `app-misc`


[6/12/2022 11:13 PM] szybet
you could actually include proc and sys


[6/12/2022 11:14 PM] szybet
as read only


[6/12/2022 11:14 PM] tux_linux
I meant, in `find` command to display tree


[6/12/2022 11:14 PM] tux_linux
they are in the wiki


[6/12/2022 11:14 PM] tux_linux
`find . | grep -v sys | grep -v proc`


[6/12/2022 11:15 PM] szybet
good

{Reactions}
👍 

[6/12/2022 11:15 PM] tux_linux
do you have a contact e-mail for `AuthorContact`?


[6/12/2022 11:16 PM] szybet
oh you added this entry


[6/12/2022 11:17 PM] szybet
i didn't saw that


[6/12/2022 11:17 PM] szybet
write Szybet on github


[6/12/2022 11:17 PM] szybet
¯\_(ツ)_/¯


[6/12/2022 11:17 PM] tux_linux
ok...


[6/12/2022 11:18 PM] szybet
or the link to sanki on github


[6/12/2022 11:18 PM] szybet
as you wnat

{Reactions}
👍 

[6/12/2022 11:18 PM] tux_linux
you could also eventually implement a parser in qt for the app info in generaldialog


[6/12/2022 11:19 PM] szybet
yes, there is a comment for it

{Reactions}
👍 

[6/12/2022 11:19 PM] szybet
that i will do it


[6/12/2022 11:19 PM] szybet
but no sense now


[6/12/2022 11:19 PM] tux_linux
sure


[6/12/2022 11:20 PM] tux_linux
does sanki need a wi-fi connection?


[6/12/2022 11:23 PM] szybet
no

{Reactions}
👍 

[6/12/2022 11:23 PM] tux_linux
maybe actually `RequiredFeatures: [ 0 ]` could mean no required features


[6/12/2022 11:23 PM] szybet
it might in the future for ankiweb, but its not needed for normal use

{Reactions}
👍 

[6/12/2022 11:24 PM] szybet
noooooooo its misleading becouse its and array of int's, and it will be weird for the code, just `[ ]`


[6/12/2022 11:24 PM] tux_linux
ok


[6/12/2022 11:27 PM] tux_linux
added it to the wiki


[6/12/2022 11:28 PM] tux_linux
```
{
  "app": {
    "Author": "Szybet",
    "AuthorContact": "https://github.com/Szybet/sanki/issues",
    "Enabled": true,
    "ExecPath": "/app-bin/Sanki.sh",
    "IconPath": "/app-misc/Sanki.png",
    "Name": "Sanki",
    "SupportedDevices": "all",
    "RequiredFeatures": [ ],
    "Version": "0.1-testing"
  }
}
```


[6/12/2022 11:28 PM] szybet
if its meant to be real for sanki it will be `"RequiredFeatures": ... ` oh you edited it good

{Reactions}
👍 

[6/12/2022 11:31 PM] tux_linux
```
kobo:/data/onboard/.apps/Sanki# time rc-service gui_apps restart
 * Setting up GUI user applications                                                                                                                                                                                                   [ ok ]
real    0m 2.29s
user    0m 0.01s
sys     0m 0.08s
kobo:/data/onboard/.apps/Sanki#
```
Not bad


[6/12/2022 11:33 PM] szybet
execpath is secure

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B7678.png
/mnt/data/projects/git/conversations/media/unknown-7E320.png


[6/12/2022 11:33 PM] tux_linux
You can technically escape chroot


[6/12/2022 11:33 PM] tux_linux
I tried it once and it worked


[6/12/2022 11:33 PM] tux_linux
Then I was scared haha


[6/12/2022 11:33 PM] szybet
ereaders are hardly ever rebooted / powered off in normal use so i dont care about that speed


[6/12/2022 11:34 PM] szybet
how?


[6/12/2022 11:34 PM] tux_linux
```
#include <sys/stat.h>
#include <stdlib.h>
#include <unistd.h>

int main(void)
{
  mkdir("chroot-dir", 0755);
  chroot("chroot-dir");
  for(int i = 0; i < 1000; i++) {
    chdir("..");
  }

  chroot(".");
  system("/bin/bash");
}
```


[6/12/2022 11:35 PM] tux_linux
https://blog.pentesteracademy.com/privilege-escalation-breaking-out-of-chroot-jail-927a08df5c28


[6/12/2022 11:35 PM] tux_linux
but you need to be root


[6/12/2022 11:35 PM] tux_linux
so that kinda cancels the exploit


[6/12/2022 11:35 PM] szybet
oh okay


[6/12/2022 11:35 PM] szybet
so thats why you dont wanted a root inside chroot


[6/12/2022 11:35 PM] tux_linux
among other reasons


[6/13/2022 1:22 AM] tux_linux
Got it running as an unprivileged user

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220612_232125591-6FB79.jpg


[6/13/2022 1:51 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/f4c2ae929740798fe62e76c55dbf85182cf6d189


[6/13/2022 1:54 AM] tux_linux
Now on to namespaces


[6/13/2022 5:15 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/28/commits/4d0f277a992bf077b07236af4c30f9eaaf61a252

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/28/commits/4d0f277a992bf077b07236af4c30f9eaaf61a252
User apps by Szybet · Pull Request #28 · Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/53944559-F1898

{Reactions}
🥳 

[6/13/2022 5:15 PM] szybet
everything done


[6/13/2022 5:15 PM] szybet
exept the json info showing


[6/13/2022 5:53 PM] szybet
also there is the one problem. the json enabled property is written when going back from editing mode. but what if someone changes the window? it is not saved, and i cant think about a solution that will write it but is implemented only in apps.cpp

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9A72D.png


[6/13/2022 5:53 PM] szybet
i dont want to interact in mainwindow.cpp becouse i can break things when merging


[6/13/2022 7:28 PM] szybet
getting general dialog to increase it size a bit is... pain


[6/13/2022 8:02 PM] tux_linux
Try the `setModal` property on the widget


[6/13/2022 8:03 PM] tux_linux
Maybe it can work


[6/13/2022 8:03 PM] tux_linux
Or maybe you can commit changes to json files only when you "officially" get back of editing mode
But maybe that's too much to rewrite


[6/13/2022 8:09 PM] szybet
Officialy? What?


[6/13/2022 8:10 PM] szybet
Do i go with that or try something else? Problems are gród layouts, they are hard to manage


[6/13/2022 8:11 PM] tux_linux
don't even try to do it
even myself didn't succeed
it's fine if it's small
it can be even smaller when you display json info in standard, formatted text way


[6/13/2022 8:11 PM] tux_linux
they also grow if the screen resolution is smaller
for some reason


[6/13/2022 8:11 PM] szybet
So smaller font?


[6/13/2022 8:12 PM] tux_linux
for now you can leave it as is
how does it look?


[6/13/2022 8:12 PM] szybet
Horrible


[6/13/2022 8:12 PM] szybet
I cant show it


[6/13/2022 8:12 PM] szybet
But its not good


[6/13/2022 8:13 PM] szybet
I would want to show it properly


[6/13/2022 8:13 PM] tux_linux
fbgrab?


[6/13/2022 8:13 PM] szybet
I dont have access now to PC so later


[6/13/2022 8:13 PM] tux_linux
hmm ok


[6/13/2022 8:14 PM] tux_linux
If you were to display json info in formatted text, would it be better?


[6/13/2022 8:14 PM] szybet
Formatted? You mean?


[6/13/2022 8:16 PM] tux_linux
Currently you just display the json raw in the dialog right?


[6/13/2022 8:19 PM] szybet
es


[6/13/2022 8:20 PM] szybet
i will format it a bit


[6/13/2022 8:20 PM] szybet
remove json things, add **this**, make it one line and slider if needed


[6/13/2022 8:20 PM] szybet
and convert the ID


[6/13/2022 8:20 PM] tux_linux
Then if you display
```
Name: Sanki
Contact: <contact>
etc...................
```
it shouldn't take too much space


[6/13/2022 8:26 PM] szybet
still looks awfull


[6/13/2022 8:27 PM] tux_linux
you can use qmessagebox in fullscreen
but that is ugly


[6/13/2022 8:28 PM] tux_linux
that's what i use to display the update changelog


[6/13/2022 8:28 PM] tux_linux
but I want to change it at some point
because it's ugly


[6/13/2022 8:28 PM] tux_linux
especially that "OK" button


[6/13/2022 8:30 PM] szybet
i only need


[6/13/2022 8:30 PM] szybet
a way


[6/13/2022 8:30 PM] szybet
to set the size policy / size / anything for grid layout


[6/13/2022 8:30 PM] szybet
or just remove it


[6/13/2022 8:31 PM] szybet
i dont understand why its there in the first place


[6/13/2022 8:31 PM] tux_linux
you can try removing it
if it doesn't explode, tell me about it


[6/13/2022 8:58 PM] szybet
i removed preffered from vertical policy in stacked widgets and it works


[6/13/2022 8:59 PM] tux_linux
what about system info


[6/13/2022 8:59 PM] tux_linux
hasn't broke?


[6/13/2022 8:59 PM] szybet
unrelated: there are bugs than im fixing for example keyboard and usbms are having OK buttons, no cancel and ok


[6/13/2022 9:00 PM] szybet
what?


[6/13/2022 9:00 PM] szybet
where is it


[6/13/2022 9:00 PM] tux_linux
Settings -> Show system info (second page)


[6/13/2022 9:03 PM] szybet
how its supposed to look?


[6/13/2022 9:04 PM] szybet
does it relaunch inkbox completly when i exit system info?


[6/13/2022 9:04 PM] tux_linux
when you exit settings, yes


[6/13/2022 9:05 PM] tux_linux
it's supposed to look bad like that

{Attachments}
/mnt/data/projects/git/conversations/media/sysinfo-94184.png


[6/13/2022 9:05 PM] szybet
it looks the same


[6/13/2022 9:05 PM] szybet
also... give me a sec i will improve it


[6/13/2022 9:05 PM] tux_linux
ok


[6/13/2022 9:08 PM] szybet
it uses textBrowserDialog right?


[6/13/2022 9:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220613_210746-ED18C.jpg


[6/13/2022 9:08 PM] szybet
i have written a function that does that


[6/13/2022 9:08 PM] szybet
we have the whole screen


[6/13/2022 9:08 PM] szybet
**we must use the whole screen**


[6/13/2022 9:11 PM] tux_linux
WOOOOOO


[6/13/2022 9:11 PM] szybet
yea


[6/13/2022 9:11 PM] szybet
now it looks usable


[6/13/2022 9:15 PM] szybet
It would be better if you used QTextBrowser instead of label


[6/13/2022 9:15 PM] szybet
but okay


[6/13/2022 9:15 PM] aryetis
Nice. Can I steal this :p ?


[6/13/2022 9:15 PM] tux_linux
i use it?


[6/13/2022 9:16 PM] szybet
Yes, of course
but in what way?


[6/13/2022 9:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9866A.png


[6/13/2022 9:16 PM] szybet
pretty much


[6/13/2022 9:17 PM] aryetis
How is the scaling / the way it automatically rescale its content to fit the screen done ?


[6/13/2022 9:17 PM] tux_linux
That's the dialog's title


[6/13/2022 9:18 PM] szybet
you mean that on the image?


[6/13/2022 9:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-68329.png


[6/13/2022 9:18 PM] szybet
nop


[6/13/2022 9:19 PM] aryetis
Oh I just noticed the scroll area scrollbar, so it's not resizing based upon the text it's displaying


[6/13/2022 9:19 PM] aryetis
😢


[6/13/2022 9:19 PM] tux_linux
look at the second stackedwidget page


[6/13/2022 9:19 PM] tux_linux
it should be empty


[6/13/2022 9:19 PM] tux_linux
there qtextbrowser is inserted


[6/13/2022 9:20 PM] szybet
it is? or i dont understand


[6/13/2022 9:20 PM] szybet
oh okay, i will use this page then


[6/13/2022 9:23 PM] aryetis
Not entirely it seems as the scrollarea is displaying its scrollbar. Meaning it couldn't fit everything in its allocated space. Even if it only missing a few pixels from what I can see. But hey don't mind me I was just excited because it's one of those qt things that looks like "meh it should be easy" and turn out to be hours of pain to implement for some reasons (at least for my qt noob self)


[6/13/2022 9:24 PM] szybet
i could do this in a for loop using a function that checks if scroll bar is needed


[6/13/2022 9:24 PM] szybet
but, why?


[6/13/2022 9:25 PM] szybet
it overenginerring a simple info dialog


[6/13/2022 9:25 PM] szybet
btw i will need to use that to make inkbox reader better without scrollbars


[6/13/2022 9:26 PM] aryetis
yeah totaly in your case it would be a waste of time. But not in mine. Don't worry, moving on !


[6/13/2022 9:29 PM] szybet
@tux-linux  i will just create a page with a qtextbrowser


[6/13/2022 9:30 PM] szybet
it will have other uses too


[6/13/2022 9:37 PM] szybet
wait, i already use textwidget


[6/13/2022 9:37 PM] szybet
what...............


[6/13/2022 11:15 PM] tux_linux
There is already a built-in function in the scroll bar for that


[6/13/2022 11:16 PM] szybet
which one


[6/13/2022 11:16 PM] tux_linux
QScrollBar::showAsNeeded or smth


[6/13/2022 11:16 PM] szybet
exactly


[6/13/2022 11:16 PM] tux_linux
It's not always accurate but it is most of the time


[6/13/2022 11:17 PM] szybet
and using this and a loop we can make a textbrowser with the exact text number


[6/13/2022 11:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220613_231735-F1D49.jpg


[6/13/2022 11:17 PM] szybet
also this


[6/13/2022 11:17 PM] szybet
it took me *to much time*


[6/13/2022 11:17 PM] tux_linux
Great


[6/13/2022 11:18 PM] tux_linux
I spent 30min recompiling a wifi module yesterday
it's normal...


[6/13/2022 11:29 PM] szybet
https://github.com/Szybet/inkbox/commit/351a903822c6906875f734db66dc47326ea2f1ee

{Embed}
https://github.com/Szybet/inkbox/commit/351a903822c6906875f734db66dc47326ea2f1ee
bugfixes in generaldialog, better system information, show json inf...
…mation, propably some other things too
/mnt/data/projects/git/conversations/media/351a903822c6906875f734db66dc47326ea2f1ee-F2FE3


[6/13/2022 11:29 PM] szybet
done


[6/13/2022 11:30 PM] szybet
the only thing about userapps that is missing is saving the jsonfile when going to another menu


[6/13/2022 11:30 PM] szybet
but idk how to do that proparly, the modal thing looked weird and complicated


[6/13/2022 11:35 PM] tux_linux
it's literally just `widget->setModal(true)`


[6/13/2022 11:35 PM] tux_linux
but i'm not sure it will work


[6/13/2022 11:35 PM] szybet
i dont think so


[6/14/2022 3:02 AM] tux_linux
it only does that for system info right?
because normal dialogs like usbms won't look great otherwise


[6/14/2022 6:29 AM] szybet
I made it non intrusive


[6/14/2022 6:30 AM] szybet
And implemented it for app info and system info


[6/14/2022 6:30 AM] szybet
It's literally only calling a function when creating generaldialog


[6/14/2022 6:31 AM] szybet
+ ui file isint changed by a single line


[6/14/2022 6:32 AM] szybet
It's perfekt


[6/14/2022 6:32 AM] szybet
😄


[6/14/2022 1:10 PM] tux_linux
Yay


[6/15/2022 1:17 AM] tux_linux
```
kindle:/# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
2: usb0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 96:c9:62:bf:a6:e9 brd ff:ff:ff:ff:ff:ff
    inet 192.168.3.2/24 brd 192.168.3.255 scope global usb0
kindle:/# $$
bash: 2667: command not found
kindle:/# /tmp/unshare -p -n /bin/bash
kindle:/# ip a
5: lo: <LOOPBACK> mtu 16436 qdisc noop state DOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
kindle:/# $$
bash: 1: command not found
kindle:/#
```
yay


[6/15/2022 1:20 AM] tux_linux
was always getting errors with the default unshare command, `Invalid argument` for whatever reason
so I rewrote it with the `clone()` system call instead of the `unshare()` one and it seems to work without issue, even on kernel 2.6.31
https://github.com/Kobo-InkBox/unshare-inkbox/blob/main/unshare.c

{Embed}
https://github.com/Kobo-InkBox/unshare-inkbox/blob/main/unshare.c
unshare-inkbox/unshare.c at main · Kobo-InkBox/unshare-inkbox
GNU 'unshare' implementation using clone() syscall instead of unshare() - unshare-inkbox/unshare.c at main · Kobo-InkBox/unshare-inkbox
/mnt/data/projects/git/conversations/media/unshare-inkbox-7842D


[6/15/2022 6:27 AM] szybet
Unshare without unshare is still unshare?


[6/15/2022 6:27 AM] szybet
Also, for what do you need it


[6/15/2022 12:43 PM] tux_linux
chroot


[6/15/2022 12:44 PM] tux_linux
I didn't know what to name it


[6/15/2022 3:33 PM] szybet
Are You compiling alpine \ everything else for this kindle?


[6/15/2022 8:12 PM] tux_linux
what do you mean?


[6/15/2022 8:12 PM] szybet
this


[6/15/2022 8:13 PM] tux_linux
the chroot is just busybox


[6/15/2022 8:13 PM] tux_linux
with system-libs and app libs + bin


[6/15/2022 8:15 PM] tux_linux
you will probably have to make your implementation launch a script that will launch the app


[6/15/2022 8:16 PM] tux_linux
or maybe launch the main command yourself
but I'm not sure
there's also an env to setup


[6/15/2022 8:41 PM] szybet
you are talking about user apps? sure no problem with that


[6/15/2022 8:42 PM] tux_linux
yes


[6/15/2022 8:42 PM] tux_linux
to launch unshare first that will then launch the chroot process containerized in namespaces


[6/15/2022 8:43 PM] szybet
i dont understand?


[6/15/2022 8:45 PM] tux_linux
The GUI will launch a script
the script will launch unshare like this:
```
env PATH="/system-bin:/app-bin" ./unshare -P /mnt/onboard/onboard/.apps/Sanki/Sanki/proc -p -n /bin/busybox chroot /mnt/onboard/onboard/.apps/Sanki/Sanki /app-bin/app.sh
```
then the app will launch


[6/15/2022 8:48 PM] szybet
how do you want to generate a script for every app when it is launched?


[6/15/2022 8:48 PM] tux_linux
you pass arguments to it


[6/15/2022 8:48 PM] szybet
the gui passes?


[6/15/2022 8:48 PM] tux_linux
or you launch the command yourself
i'm not sure


[6/15/2022 8:49 PM] szybet
well rethink that


[6/18/2022 2:47 AM] tux_linux
Backend done
https://github.com/Kobo-InkBox/gui-bundle/commit/00b415b10231d2db2cddd438124743f2631b9db2#diff-074188836c3e5db5adecb208e9aaf3bc91d30b284b913551b31f7b9bd9ba0c66
Some useless fixes to do but it works
I can't believe I spent two days and a half trying to compile coreutils chroot for the userspec option, nothing worked

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/commit/00b415b10231d2db2cddd438124743f2631b9db2
GUI user applications implementation · Kobo-InkBox/gui-bundle@00b415b
/mnt/data/projects/git/conversations/media/00b415b10231d2db2cddd438124743f2631b9db2-7CE04


[6/18/2022 2:48 AM] tux_linux
You will need to:
- Update the kernel (for namespaces support)
- Update the rootfs
- Update the gui bundle


[6/18/2022 2:49 AM] tux_linux
Put the following three files in `/data/onboard/.apps/Sanki`

{Attachments}
/mnt/data/projects/git/conversations/media/app-E31D7.json
/mnt/data/projects/git/conversations/media/Sanki.isa-45B42.dgst
/mnt/data/projects/git/conversations/media/Sanki-F905F.isa


[6/18/2022 2:58 AM] tux_linux
@Szybet you should now pass arguments to the `launch_user_application.sh` script
It also restarts the main GUI after the app has finished running


[6/18/2022 2:59 AM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/launch_user_application.sh


[6/18/2022 3:01 AM] tux_linux
I will now look into the GUI PR
and get back to you... in some time


[6/18/2022 3:49 AM] tux_linux
This is what happens when you change the generaldialog first page in the UI file

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4C351.png


[6/18/2022 4:39 AM] tux_linux
```
void createSmallJsonFiles()
```
Why this function if we already created them before in the app package?


[6/18/2022 4:40 AM] tux_linux
~~I'm done (thought it would take more time)~~
I'm not sure it will work, but it compiles fine
we will see
thanks for contributing

{Attachments}
/mnt/data/projects/git/conversations/media/git-76320.patch


[6/18/2022 4:51 AM] tux_linux
```
04/01/1970 @ 00:57:08 | apps: GUI user applications' main JSON file is missing, creating it
04/01/1970 @ 00:57:08 | apps: showUserApps: JSON is invalid
```
great


[6/18/2022 4:53 AM] tux_linux
This does nothing
It never creates any file anywhere

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AE17C.png


[6/18/2022 5:50 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220618_035008581-2E3AF.jpg


[6/18/2022 5:51 AM] tux_linux
Ok, got it working to some degree on Kindle with my backend


[6/18/2022 6:07 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/763279f1f14099034517b336e8d9dfee85a0f9ed
I have missed some code style fixes here and there; will correct them later
You can make PRs to this branch, but I'd prefer just `git diff HEAD > git.patch` to avoid issues with my mirrored setup at `inkbox.ddns.net/git`. I'll credit you in future commits, as I did in this one

Please
- Check your English to at least some degree (**compatibility**, not **compability**) 😉
- Test/review before committing/pushing/diffing/whatever
- Respect code style
very much appreciated

So basically
- Auto-create main JSON from small JSONs, also, adapt it if apps are completely uninstalled for example
- Explain me why `createSmallJsonFiles` exists
- Write comments about what the functions do like there https://github.com/Kobo-InkBox/inkbox/blob/userapps/apps.cpp#L179

and it will be awesome (it already is, but it will be better then)

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/763279f1f14099034517b336e8d9dfee85a0f9ed
Half-working setup · Kobo-InkBox/inkbox@763279f
Huge thanks to @Szybet for writing at least 95% of the code in this commit
/mnt/data/projects/git/conversations/media/763279f1f14099034517b336e8d9dfee85a0f9ed-6E819

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/userapps/apps.cpp
inkbox/apps.cpp at userapps · Kobo-InkBox/inkbox
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-0E5A8


[6/18/2022 6:08 AM] tux_linux
Update your setup for the backend too


[6/18/2022 7:17 AM] tux_linux
Done that in my commit


[6/18/2022 11:41 AM] szybet
finally yay


[6/18/2022 11:42 AM] szybet
and its stupid
a function can't expect that there will be something if it can itself be made

so in simpler words it would be better if ui settings were setted at start of the function, to avoid bugs and confusion


[6/18/2022 11:42 AM] szybet
it updates them?


[6/18/2022 11:43 AM] szybet
so you didn't changed that much code?


[6/18/2022 11:44 AM] szybet
you figured this out already? `JSON is invalid` indicates that the json syntax is broken and qt can't read it


[6/18/2022 11:44 AM] szybet
it avoids errors and crashes


[6/18/2022 11:45 AM] szybet
sanki needs some changes -> no theme file at first


[6/18/2022 11:50 AM] szybet
okay, i will follow these instructions, though the english one is hard ;p

>  Auto-create main JSON from small JSONs
there is a function for it in main, i writed it

> also, adapt it if apps are completely uninstalled for example
I dont understand this part

>  Explain me why createSmallJsonFiles exists
already said it: it updates them to save enabled variable across reboots

Okay sure more comments is better but for example `showUserApps` in my opinion doesn't need a comment, it shows user apps


[6/18/2022 11:53 AM] szybet
also instructions to get a app signed by you would be helpfull ( just the format / tree of the package to send you )


[6/18/2022 11:54 AM] szybet
i need to make that `RequriedFeatures` will activate only when needed. i hope there are bools for that


[6/18/2022 12:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E384E.png


[6/18/2022 12:12 PM] szybet
you could adjust it for other devices


[6/18/2022 12:16 PM] szybet
did you used somewhere `createMainJson()` and `createSmallJsonFiles`? ( i dont see it in the code) , i dont know where tu put them so its your decision


[6/18/2022 1:34 PM] tux_linux
That is easily fixable
We can bind mount the stylesheet


[6/18/2022 1:36 PM] tux_linux
Yes I did
Variable names, code style, etc.


[6/18/2022 1:38 PM] tux_linux
Yeah I know, it's just that nothing worked at all at first


[6/18/2022 1:41 PM] tux_linux
that's why I put an if condition


[6/18/2022 1:47 PM] szybet
no need for that, i will do it myself


[6/18/2022 1:47 PM] szybet
now it works?


[6/18/2022 1:48 PM] tux_linux
half works


[6/18/2022 1:48 PM] tux_linux
it needs to auto-create main json from small jsons


[6/18/2022 1:48 PM] tux_linux
I needed to do that manually


[6/18/2022 1:48 PM] szybet
createMainJson() does that?


[6/18/2022 1:49 PM] tux_linux
well, not any json file was created nor was valid after the first launch


[6/18/2022 1:49 PM] tux_linux
maybe because you did not change appPath to be .apps/app/app?


[6/18/2022 1:50 PM] szybet
this has nothing to do with json validation


[6/18/2022 1:50 PM] szybet
wait


[6/18/2022 1:50 PM] szybet
with creation, maybe


[6/18/2022 1:50 PM] szybet
it looks for folders in .apps and then in those folders for app.json


[6/18/2022 2:01 PM] tux_linux
so it should work


[6/18/2022 2:02 PM] tux_linux
what if the app is uninstalled?


[6/18/2022 2:02 PM] szybet
apps are unninstalled by deleting the folder in usbms


[6/18/2022 2:02 PM] tux_linux
ok


[6/18/2022 2:02 PM] szybet
so just rerun  createMainJson()


[6/18/2022 2:02 PM] szybet
after usbms


[6/18/2022 2:02 PM] tux_linux
ok


[6/18/2022 2:03 PM] tux_linux
then it should not be in main


[6/18/2022 2:03 PM] szybet
^


[6/18/2022 2:03 PM] tux_linux
did you use it?


[6/18/2022 2:03 PM] szybet
no, i only writed the functions


[6/18/2022 2:04 PM] tux_linux
do they work?


[6/18/2022 2:04 PM] szybet
they were working


[6/18/2022 2:04 PM] szybet
and the should now too


[6/18/2022 2:04 PM] tux_linux
putting that after usbms is good


[6/18/2022 2:10 PM] szybet
createMainJson() must be launched every time there is a small chance that anything changed in folders in .apps, and createSmallJsonFiles() when we want to save changes from main json to smaller ones


[6/18/2022 2:10 PM] szybet
at boot / reboot before reboot before and after usbms


[6/18/2022 2:10 PM] szybet
so yea


[6/18/2022 2:10 PM] tux_linux
we really need to do it on reboot?


[6/18/2022 2:11 PM] szybet
reboot maybe no, poweroff yes


[6/18/2022 2:21 PM] tux_linux
ok, it does work


[6/18/2022 2:22 PM] szybet
wow


[6/18/2022 3:28 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/0cf2bca0d334d723e37d01e202abff2d56f3fcf7

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/0cf2bca0d334d723e37d01e202abff2d56f3fcf7
GUI user applications: improvements · Kobo-InkBox/inkbox@0cf2bca
/mnt/data/projects/git/conversations/media/0cf2bca0d334d723e37d01e202abff2d56f3fcf7-600BF


[6/18/2022 3:29 PM] tux_linux
I think it fully works now?


[6/18/2022 3:34 PM] szybet
` emit showToast("ERROR: Failed to parse 'apps.json'");`
does this toast work? i had some problems


[6/18/2022 3:35 PM] szybet
`/tmp/rescan_userapps` from where do you create this


[6/18/2022 3:35 PM] szybet
¯\_(ツ)_/¯


[6/18/2022 3:36 PM] tux_linux
It does not
(probably needed a qtimer but didn't bother to test it)
But I removed it
Since it will delete userapps widget if it is not working


[6/18/2022 3:37 PM] szybet
oh


[6/18/2022 3:37 PM] szybet
thats um


[6/18/2022 3:37 PM] szybet
no...


[6/18/2022 3:37 PM] tux_linux
self-explanatory?


[6/18/2022 3:37 PM] tux_linux
You create it from ssh
If ever you update/install an userapp without usbms


[6/18/2022 3:37 PM] tux_linux
It is not intended for the end-user


[6/18/2022 3:37 PM] szybet
do you really want to answer users questions: *why are there no user apps on my device :(?*


[6/18/2022 3:37 PM] szybet
oh, nice


[6/18/2022 3:38 PM] tux_linux
Currently it is the only error
right?


[6/18/2022 3:38 PM] szybet
*currently*


[6/18/2022 3:38 PM] szybet
and its the most important one


[6/18/2022 3:38 PM] szybet
the user should know


[6/18/2022 3:43 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/fail-83CCF.png


[6/18/2022 3:44 PM] tux_linux
I think I will remove the "ERROR" part


[6/18/2022 3:44 PM] tux_linux
'Failed' implies an error


[6/18/2022 3:45 PM] tux_linux
Looks nice

{Attachments}
/mnt/data/projects/git/conversations/media/apps-B8097.png


[6/18/2022 3:46 PM] tux_linux
Maybe best to put app icon in a label


[6/18/2022 3:54 PM] szybet
if you can and want, sure


[6/18/2022 3:55 PM] szybet
it was hell for me to achieve that so i went with the button


[6/18/2022 3:58 PM] tux_linux
actually i kept the button


[6/18/2022 3:58 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/appinfo-9E817.png


[6/18/2022 3:59 PM] tux_linux
nice


[6/18/2022 3:59 PM] tux_linux
i know execpath doesn't make sense


[6/18/2022 3:59 PM] szybet
i wanted a horizontal scrollbar so author contact would be one line but i couldn't do it


[6/18/2022 4:00 PM] tux_linux
```
else if(global::text::textBrowserDialog == true) {
        textBrowserDialog = true;
        textwidgetWindow = new textwidget();
        ui->headerLabel->setText("Information");
        ui->stackedWidget->setCurrentIndex(1);
        ui->mainStackedWidget->insertWidget(1, textwidgetWindow);
        ui->mainStackedWidget->setCurrentIndex(1);
        QTimer::singleShot(50, this, SLOT(adjust_size()));
    }
```


[6/18/2022 4:00 PM] tux_linux
you need to use this


[6/18/2022 4:00 PM] tux_linux
I will try it


[6/18/2022 4:03 PM] tux_linux
actually you use it


[6/18/2022 4:03 PM] tux_linux
then idk


[6/18/2022 4:04 PM] szybet
yea


[6/18/2022 4:04 PM] szybet
qt


[6/18/2022 4:06 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/c5ec3f35605c33fdc6ccec7f5a4aaa632fff78ea

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/c5ec3f35605c33fdc6ccec7f5a4aaa632fff78ea
GUI user applications: small fixes · Kobo-InkBox/inkbox@c5ec3f3


[6/18/2022 4:07 PM] szybet
this makes no sense


[6/18/2022 4:07 PM] szybet
```
void apps::showFailedToParseMainUserAppsJsonFile() {
     emit showToast("Failed to parse 'apps.json'");
}
 
```


[6/18/2022 4:07 PM] szybet
does it work?


[6/18/2022 4:11 PM] tux_linux
no


[6/18/2022 4:11 PM] szybet
; _ ;


[6/18/2022 4:11 PM] tux_linux
yes it does actually


[6/18/2022 4:11 PM] tux_linux
it's a slot


[6/18/2022 4:11 PM] tux_linux
```
QTimer::singleShot(500, this, SLOT(showFailedToParseMainUserAppsJsonFile()));
```


[6/18/2022 4:12 PM] tux_linux
.


[6/18/2022 4:12 PM] szybet
well then good


[6/18/2022 4:12 PM] szybet
still weird


[6/18/2022 4:16 PM] tux_linux
what was your mainwindow thing about user apps edit?


[6/18/2022 4:24 PM] szybet
what?


[6/18/2022 4:27 PM] tux_linux
you needed to prevent userapps widget close for json files


[6/18/2022 4:27 PM] tux_linux
or smth


[6/18/2022 4:30 PM] szybet
oh


[6/18/2022 4:30 PM] szybet
when editing userapps, there is a possibility to change menu and then changes will not be saved


[6/18/2022 4:30 PM] szybet
so on userapps close changes should be saved to main json file


[6/18/2022 4:30 PM] szybet
as it is when changing mode back to normal from edit


[6/18/2022 4:31 PM] tux_linux
btw the qt stylesheet will be available at `/etc/eink.qss`
https://github.com/Kobo-InkBox/rootfs/commit/24bb47cc69d5da8e8f28b58a16de8067fda71530
it's better that way, you don't have to handle the scrollbar handle size mess

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/24bb47cc69d5da8e8f28b58a16de8067fda71530
GUI user applications: Main GUI integration · Kobo-InkBox/rootfs@24...


[6/18/2022 4:31 PM] szybet
okay


[6/18/2022 4:32 PM] tux_linux
you can try to implement that in mainwindow if you need to
then submit a patch


[6/18/2022 4:33 PM] tux_linux
You should develop Sanki with the new backend, some things are missing, e.g. it doesn't know what device it's running on (that will be available on the DEVICE env var), or it can't read battery or brightness level


[6/18/2022 4:33 PM] tux_linux
+ stylesheet of course


[6/18/2022 4:42 PM] szybet
okay, i will do this

{Reactions}
👍 

[6/18/2022 5:27 PM] tux_linux
I will try to create an inkvt user application bundle for demonstration


[6/18/2022 6:48 PM] szybet
to not waste time, @tux-linux could you help to choose libevdev version? i dont know specifically for all devices
well you used it in a cli tool so it should work but IDK

```
libevdev requires a 2.6.36 kernel as minimum. Specifically, it requires kernel-support for ABS_MT_SLOT.
```

https://www.freedesktop.org/software/libevdev/doc/1.11.0/backwardscompatibility.html


[6/18/2022 6:49 PM] tux_linux
we're on 2.6.35 on the old devices (well, 2.6.31 on the Kindle, but some things have been backported and it's faking a 2.6.35 version)


[6/18/2022 6:50 PM] tux_linux
isn't there already a libevdev in alpine rootfs?


[6/18/2022 6:50 PM] tux_linux
nope
great


[6/18/2022 6:51 PM] tux_linux
Why do you need libevdev?


[6/18/2022 6:51 PM] szybet
Soo 1.11.0 will be fine?


[6/18/2022 6:51 PM] szybet
Powerdemon... You said that i need to use it


[6/18/2022 6:52 PM] szybet
Look up the chat history


[6/18/2022 6:52 PM] szybet
Search libevdev


[6/18/2022 6:52 PM] tux_linux
hm ok
you can't use `linux/input.h`?
https://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c#L47

{Embed}
https://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c
evtest/evtest.c at b8343ec1124da18bdabcc04809a8731b9e39295d · freed...
evtest displays information on the input device specified on the command line, i... (mirror) - evtest/evtest.c at b8343ec1124da18bdabcc04809a8731b9e39295d · freedesktop-unofficial-mirror/evtest
/mnt/data/projects/git/conversations/media/evtest-77515


[6/18/2022 6:52 PM] szybet
Sure i could


[6/18/2022 6:52 PM] szybet
Your decision


[6/18/2022 6:52 PM] tux_linux
That's what evtest is using


[6/18/2022 6:53 PM] szybet
So i will use it too


[6/18/2022 6:53 PM] tux_linux
ok, well, something like evtest then


[6/18/2022 6:53 PM] tux_linux
no need to use libevdev AFAIK


[6/18/2022 6:53 PM] tux_linux
`linux/input.h` should do


[6/18/2022 6:53 PM] tux_linux
if not, tell me


[6/18/2022 6:54 PM] tux_linux
evtest is a great source of inspiration for this


[6/18/2022 6:55 PM] szybet
i will steal some code ;p


[6/18/2022 7:05 PM] tux_linux
be sure to understand what it does 🙂


[6/18/2022 7:06 PM] tux_linux
don't forget code style too


[6/18/2022 7:07 PM] tux_linux
same as for qt


[6/18/2022 7:07 PM] szybet
🙃


[6/18/2022 7:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7E810.png


[6/18/2022 7:07 PM] szybet
maybe it will do the job


[6/18/2022 7:08 PM] tux_linux
great


[6/18/2022 7:08 PM] tux_linux
try it


[6/18/2022 10:00 PM] szybet
is
```
/dev/input/event0:    gpio-keys
```
on every device?


[6/18/2022 10:15 PM] tux_linux
On every Kobo


[6/18/2022 10:15 PM] tux_linux
Not Kindle


[6/18/2022 10:16 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/51a4ccc9cda9d0137b148184e57123c9076408a0

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/51a4ccc9cda9d0137b148184e57123c9076408a0
Add kt_button_monitor · Kobo-InkBox/rootfs@51a4ccc
This watches the Kindle Touch&#39;s power button and terminates when it is pressed.
The code is partially copied from there: https://www.mobileread.com/forums/showpost.php?p=2685079&amp;pos...
/mnt/data/projects/git/conversations/media/51a4ccc9cda9d0137b148184e57123c9076408a0-43B71


[6/18/2022 10:17 PM] tux_linux
Please copy the code and not fork a new process


[6/18/2022 10:18 PM] szybet
what it does?...


[6/18/2022 10:19 PM] szybet
complicated


[6/18/2022 10:19 PM] tux_linux
It basically stops running when the power button is pressed


[6/18/2022 10:20 PM] tux_linux
I was planning to run a while loop, etc


[6/18/2022 10:24 PM] szybet
i dont understand a single line of code


[6/18/2022 10:24 PM] szybet
i will make the code modular


[6/18/2022 10:24 PM] szybet
so you can write your own watcher and send a request to sleep if needed


[6/18/2022 10:33 PM] tux_linux
Well ok you don't need to for that one
Just copy it


[6/18/2022 10:33 PM] tux_linux
In a while loop
C=C++


[6/18/2022 10:34 PM] tux_linux
kinda


[6/18/2022 10:34 PM] szybet
it won't be hard to do

{Reactions}
👍 

[6/18/2022 10:59 PM] ninuje
event0 being hardware keys doesn't hold on anything > Mk.7


[6/18/2022 11:36 PM] tux_linux
What do you mean?


[6/18/2022 11:37 PM] tux_linux
Oh ok so it won't work on the elipsa?


[6/18/2022 11:46 PM] szybet
So how to do this once and properly?


[6/18/2022 11:46 PM] tux_linux
you can't?


[6/18/2022 11:47 PM] tux_linux
if/elif/else


[6/18/2022 11:47 PM] tux_linux
Kobos cover >90% of our supported devices, it isn't that bad


[6/18/2022 11:48 PM] szybet
also i have this error when trying to import some code from evtest

{Attachments}
/mnt/data/projects/git/conversations/media/message-522AF.txt


[6/18/2022 11:48 PM] szybet
and i have no idea why


[6/18/2022 11:48 PM] tux_linux
did you
```
#define _GNU_SOURCE
```?


[6/18/2022 11:49 PM] szybet
here is the file im trying to, just a header file with needed definitions

{Attachments}
/mnt/data/projects/git/conversations/media/message-CC046.txt


[6/18/2022 11:49 PM] tux_linux
oh ok that's your code
right?


[6/18/2022 11:49 PM] szybet
yes?


[6/18/2022 11:50 PM] szybet
its just a warning


[6/18/2022 11:52 PM] tux_linux
Maybe then there are some things that need to be changed for C++
Maybe @NiLuJe has an idea
When I code in C, I tend to create new errors rather than solving them hehe


[6/18/2022 11:53 PM] szybet
propably some c / cpp diffrences that i dont know of


[6/18/2022 11:53 PM] tux_linux
Oh
try to add c++11 standard to your compiler options


[6/18/2022 11:54 PM] tux_linux
`-std=c++11`


[6/18/2022 11:54 PM] szybet
why 11?


[6/18/2022 11:54 PM] tux_linux
2011


[6/18/2022 11:54 PM] tux_linux
there has also been 2017 and 2020


[6/18/2022 11:54 PM] tux_linux
Well maybe you can use `-std=c++17` or even `-std=c++20` if the compiler supports it


[6/18/2022 11:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-6300B.png


[6/18/2022 11:55 PM] szybet
hmm


[6/18/2022 11:55 PM] tux_linux
oh


[6/18/2022 11:55 PM] tux_linux
then probably this


[6/18/2022 11:56 PM] tux_linux
https://stackoverflow.com/questions/32155750/c-says-expected-identifier-before-numeric-constant
Might help


[6/18/2022 11:56 PM] szybet
i dont use classess


[6/19/2022 12:04 AM] szybet
https://stackoverflow.com/questions/32155750/c-says-expected-identifier-before-numeric-constant

{Embed}
https://stackoverflow.com/questions/32155750/c-says-expected-identifier-before-numeric-constant
C++ says expected identifier before numeric constant
class data
{
private:
    int ID;
    string address,name;
public:
    data(int i,string a,string n):ID(i),address(a),name(n){}
    friend class SetData;
};
class SetData
{
private:
    data obj(43...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/19/2022 12:04 AM] szybet
propably this


[6/19/2022 12:04 AM] szybet
at C11 point


[6/19/2022 12:04 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C925E.png


[6/19/2022 12:04 AM] szybet
it has a fixed size


[6/19/2022 12:04 AM] szybet
but the size is a defined variable


[6/19/2022 12:06 AM] szybet
`    [0 ... SYN_MAX] = NULL,`
thats weird code too


[6/19/2022 12:29 AM] szybet
I think i will use libdevinput, its not Worth the time


[6/19/2022 12:30 AM] tux_linux
libevdev?


[6/19/2022 12:42 AM] szybet
Yes


[6/19/2022 12:43 AM] tux_linux
ok


[6/19/2022 12:43 AM] tux_linux
i hope it will work on older devices


[6/19/2022 6:21 AM] tux_linux
https://photos.app.goo.gl/4NBd79AaSn9nSPqH8

{Embed}
https://photos.app.goo.gl/4NBd79AaSn9nSPqH8
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/AWT3_J146FmABM-GuneEGPQxEXDtzXnYMMxo26aNt4-E1E8E


[6/19/2022 6:23 AM] tux_linux
Extract to `/data/onboard/.apps/InkVT`
Only for devmode currently, forgot to provide signature file (1:30am)

{Attachments}
/mnt/data/projects/git/conversations/media/InkVT.tar-7FA03.xz


[6/19/2022 6:30 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/99a145d5ee11d61c8579e91b7389506716bcff14
https://github.com/Kobo-InkBox/gui-bundle/commit/eb2caeb2236a1c936a734da8bc956cfe61c4efd0
https://github.com/Kobo-InkBox/rootfs/commit/685efd9adb4e153aa8ee2f0af4d938678db34a65


[6/19/2022 7:24 AM] tux_linux
RequiredFeatures doesn't seem to be working


[6/19/2022 9:50 AM] szybet
I know, i will do it

{Reactions}
👍 

[6/19/2022 6:08 PM] szybet
@tux-linux could you try it on other devices ( with the lowerst kernel versions )
i should output something like this:
```
Input device name: "gpio-keys"
Input device ID: bus 0x19 vendor 0x1 product 0x1
This device does not look like a mouse
```

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-75FFD
/mnt/data/projects/git/conversations/media/libevdev.so.2.3-AA5A1.0


[6/19/2022 6:43 PM] tux_linux
I will, thanks


[6/19/2022 7:13 PM] tux_linux
you know you can add libevdev as a submodule?


[6/19/2022 7:13 PM] szybet
you mean>


[6/19/2022 7:14 PM] tux_linux
git submodule


[6/19/2022 7:14 PM] szybet
i downloaded a tar


[6/19/2022 7:14 PM] tux_linux
https://github.com/freedesktop/libevdev

{Embed}
https://github.com/freedesktop/libevdev
GitHub - freedesktop/libevdev: Wrapper library for evdev devices
Wrapper library for evdev devices. Contribute to freedesktop/libevdev development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/libevdev-A80C8


[6/19/2022 7:14 PM] tux_linux
`git checkout libevdev-1.12.1`


[6/19/2022 7:14 PM] szybet
dev version


[6/19/2022 7:14 PM] szybet
ah


[6/19/2022 7:14 PM] tux_linux
.


[6/19/2022 7:15 PM] szybet
its too much steps anyway


[6/19/2022 7:15 PM] szybet
i compile mine repo


[6/19/2022 7:15 PM] szybet
and i have everything setted up


[6/19/2022 7:43 PM] szybet
is that for restricting dmesg?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AA442.png


[6/19/2022 7:44 PM] tux_linux
Yes


[6/19/2022 7:44 PM] szybet
well okay


[6/19/2022 7:44 PM] tux_linux
For unprivileged users


[6/19/2022 7:45 PM] szybet
can user apps for rooted devices `ssh root@127.0.0.1`?


[6/19/2022 7:45 PM] tux_linux
Yes


[6/19/2022 7:45 PM] szybet
cool


[6/19/2022 7:45 PM] tux_linux
I'm planning to put dropbear in inkvt user app


[6/19/2022 7:46 PM] szybet
you mean?


[6/19/2022 7:46 PM] szybet
to ssh to main rootfs?


[6/19/2022 7:46 PM] tux_linux
dropbear client


[6/19/2022 7:46 PM] tux_linux
Yes


[6/19/2022 7:46 PM] szybet
nice


[6/19/2022 7:46 PM] szybet
i wanted to do this anyway


[6/19/2022 7:46 PM] szybet
its a really cool terminal


[6/19/2022 7:47 PM] tux_linux
Yes


[6/19/2022 7:47 PM] szybet
can you create a repo for user apps list / download links?


[6/19/2022 7:47 PM] tux_linux
Seen my video?


[6/19/2022 7:47 PM] tux_linux
I will


[6/19/2022 7:47 PM] szybet
yes


[6/19/2022 7:47 PM] szybet
it works great

{Reactions}
👍 

[6/19/2022 7:47 PM] tux_linux
Probably will be used for app store


[6/19/2022 7:48 PM] szybet
and no user apps sign is cool too

{Reactions}
👍 

[6/19/2022 7:48 PM] tux_linux
????


[6/19/2022 7:48 PM] szybet
i will look through the code later

{Reactions}
👍 

[6/19/2022 7:48 PM] szybet
when you disable all of them


[6/19/2022 7:48 PM] tux_linux
We need to start thinking about API, etc


[6/19/2022 7:48 PM] tux_linux
Oooh ok


[6/19/2022 7:49 PM] szybet
download a json and then the files from folders from the repo?


[6/19/2022 7:49 PM] tux_linux
Probably


[6/19/2022 7:50 PM] tux_linux
But the user apps will not be in the repo


[6/19/2022 7:50 PM] tux_linux
They will be on a server


[6/19/2022 7:51 PM] szybet
lets build it arround a git server


[6/19/2022 7:51 PM] tux_linux
Wdym


[6/19/2022 7:51 PM] szybet
then choosing between github and server is easier


[6/19/2022 7:51 PM] szybet
github has better security


[6/19/2022 7:52 PM] szybet
but less privacy


[6/19/2022 7:52 PM] szybet
so let the user decide


[6/19/2022 7:52 PM] szybet
+ better speeds


[6/19/2022 7:53 PM] tux_linux
But we won't put app packages in git repo


[6/19/2022 7:53 PM] szybet
why


[6/19/2022 7:53 PM] tux_linux
It's not really efficient


[6/19/2022 7:53 PM] tux_linux
Plus GH won't let you upload files >80M


[6/19/2022 7:54 PM] szybet
even as releases?


[6/19/2022 7:55 PM] szybet
well okay, but i would still prefer that the repo has corporate level security


[6/19/2022 7:55 PM] szybet
¯\_(ツ)_/¯


[6/19/2022 7:55 PM] szybet
what did you do


[6/19/2022 7:55 PM] szybet
that the kernel


[6/19/2022 7:55 PM] szybet
is


[6/19/2022 7:55 PM] szybet
smaller


[6/19/2022 7:55 PM] szybet
10M    zImage-root


[6/19/2022 7:55 PM] szybet
0.o


[6/19/2022 7:56 PM] ninuje
Yeah, just use libevdev, don't reinvent the wheel.


[6/19/2022 7:56 PM] szybet
exactly.


[6/19/2022 7:56 PM] ninuje
It *might* be using C constructs that C++ doesn' tlike, no idea, I don't do C++. (And that was a terrible idea anyway)


[6/19/2022 7:57 PM] ninuje
You *might* be able to "guess" which input device does what by sniffing the various caps, but that's a lot of work instead of a dumb device if ladder


[6/19/2022 7:58 PM] szybet
maybe just look through names?


[6/19/2022 7:58 PM] szybet
`gpio-keys`?


[6/19/2022 7:58 PM] ninuje
Not used everywhere


[6/19/2022 7:58 PM] szybet
☹️


[6/19/2022 7:58 PM] ninuje
And the new Libra 2 hw rev complicates matters because it has a dedicated powerkey input device


[6/19/2022 7:59 PM] ninuje
The dumbest and easiest solution might just be to simply hook up to *every* input device


[6/19/2022 7:59 PM] ninuje
You might just want to backlist the gyro on devices with one, because it's *extremely* verbose


[6/19/2022 7:59 PM] tux_linux
We can put user apps links there


[6/19/2022 8:00 PM] ninuje
(and gyros are easy to sniff via caps, IIRC)


[6/19/2022 8:00 PM] szybet
or use a config file + add some additional watchers for weird devices?


[6/19/2022 8:00 PM] tux_linux
I don't think we will use gyros anytime soon fortunately


[6/19/2022 8:01 PM] szybet
adding them is not an issue


[6/19/2022 8:01 PM] szybet
but no one wants them, other priorities


[6/19/2022 8:27 PM] szybet
obviously writing the kernel bricked the device


[6/19/2022 8:27 PM] szybet
becouse why not


[6/19/2022 8:39 PM] tux_linux
Did you forget to make device nodes?


[6/19/2022 8:51 PM] szybet
fuck.


[6/19/2022 8:51 PM] szybet
i make a pull request that checks that before launching


[6/19/2022 8:51 PM] szybet
and you accept it


[6/19/2022 8:51 PM] szybet
its the 4 time i forgot it at least


[6/19/2022 8:57 PM] tux_linux
I can change it myself


[6/19/2022 8:57 PM] tux_linux
Will do it tonight


[6/19/2022 8:57 PM] szybet
for 100% percent?


[6/19/2022 8:57 PM] tux_linux
Unless sky falls on my head, yes


[6/19/2022 8:57 PM] szybet
t h a n k s


[6/19/2022 8:58 PM] szybet
i dont want to open the nia one more time ever

{Reactions}
👍 

[6/19/2022 8:58 PM] tux_linux
Also, got a monster of a science exam Tuesday
But it's fine


[6/19/2022 8:59 PM] szybet
the case plastic is damaged, battery connector and sd card slot isint that tight that it was


[6/19/2022 8:59 PM] tux_linux
Buy the tf card extender @NonaSuomy has


[6/19/2022 8:59 PM] szybet
well good luck
you can use **anki** for faster learning


[6/19/2022 8:59 PM] tux_linux
sanki


[6/19/2022 8:59 PM] tux_linux
Yea


[6/19/2022 8:59 PM] szybet
not sanki


[6/19/2022 9:00 PM] tux_linux
Secondary 4 enriched science
(Quebec)


[6/19/2022 9:00 PM] szybet
sanki doesnt have a spaced-repetition-algorithm yet


[6/19/2022 9:01 PM] szybet
it looks hard


[6/19/2022 9:02 PM] szybet
i will need to. also i will need to replace the case with a 3d printed one

{Reactions}
👍 

[6/19/2022 9:06 PM] szybet
makedevicenodes didn't changes anything


[6/19/2022 9:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-00469.txt


[6/19/2022 9:43 PM] szybet
well something is broken


[6/19/2022 9:50 PM] tux_linux
Nonsense


[6/19/2022 9:51 PM] tux_linux
Well does the rcs actually exist?


[6/19/2022 9:54 PM] szybet
rcs?


[6/19/2022 9:54 PM] szybet
oh


[6/19/2022 9:54 PM] szybet
```
% ls initrd/n306/etc/init.d 
developer-key  initrd-fifo  inkbox-splash  overlay-mount  rcS  startx
21:54 szybet@hyperbookszyb /mnt/HDD/Project/Public/kobo-nia-audio-new/inkbox/kernel
% 
```


[6/19/2022 9:54 PM] szybet
yes?


[6/19/2022 9:55 PM] szybet
i was suprised that the kernel is smaller...


[6/19/2022 9:57 PM] tux_linux
Try to reflash it
ums
Sync


[6/19/2022 9:57 PM] szybet
why ums?


[6/19/2022 9:57 PM] szybet
its still opened


[6/19/2022 9:58 PM] szybet
well propably broken sd card


[6/19/2022 9:58 PM] szybet
thats my quess


[6/19/2022 10:10 PM] szybet
the same


[6/19/2022 11:50 PM] szybet
`Bad Linux ARM zImage magic!`


[6/19/2022 11:50 PM] szybet
well


[6/19/2022 11:53 PM] tux_linux
Strange


[6/19/2022 11:53 PM] szybet
its from an old kernel


[6/19/2022 11:53 PM] szybet
that i markes


[6/19/2022 11:53 PM] szybet
as *working*


[6/19/2022 11:53 PM] tux_linux
Does it work now?


[6/19/2022 11:53 PM] szybet
nope


[6/19/2022 11:53 PM] szybet
i will compile a kernel in docker


[6/19/2022 11:53 PM] szybet
maybe this will help


[6/19/2022 11:53 PM] tux_linux
Ok


[6/19/2022 11:53 PM] szybet
but i dont think so


[6/19/2022 11:53 PM] tux_linux
It's a zimage right?


[6/19/2022 11:54 PM] szybet
yes
`Linux kernel ARM boot executable zImage (little-endian)`


[6/19/2022 11:55 PM] tux_linux
What's the compiler?


[6/19/2022 11:56 PM] szybet
env GITDIR="${PWD}" TOOLCHAINDIR="${PWD}/toolchain/arm-nickel-linux-gnueabihf/" THREADS=$(($(nproc)*2)) TARGET=arm-nickel-linux-gnueabihf scripts/build_kernel.sh n306 root


[6/19/2022 11:56 PM] tux_linux
Seems fine


[6/19/2022 11:57 PM] tux_linux
Maybe clone the repo again?


[6/19/2022 11:59 PM] szybet
this will do nothing


[6/19/2022 11:59 PM] szybet
but sure


[6/20/2022 12:00 AM] tux_linux
I know
But we can never be sure of anything


[6/20/2022 12:42 AM] szybet
```
% du -h zImage-root zImage-root 
11M    zImage-root
```


[6/20/2022 12:42 AM] szybet
looks promising


[6/20/2022 12:42 AM] szybet
11.5 is max right?


[6/20/2022 12:42 AM] szybet
not good


[6/20/2022 12:44 AM] tux_linux
It's over max


[6/20/2022 12:44 AM] tux_linux
What makes it so big


[6/20/2022 12:44 AM] szybet
crap


[6/20/2022 12:45 AM] szybet
you added namespaces


[6/20/2022 12:45 AM] tux_linux
Try it anyway


[6/20/2022 12:45 AM] szybet
kek


[6/20/2022 12:45 AM] tux_linux
It isn't supposed to be that bigger
Only a few K in my testing


[6/20/2022 12:46 AM] szybet
i want to add audio
djhardrich wants to add otg

we need to do something about this kernel size


[6/20/2022 12:47 AM] szybet
```
MMC read: dev # 0, block # 1024, count 1 ... 1 blocks read: OK

RC5T619_watchdog(1,32)

ntx_hw_late_init()

mmc read 0x8ffffc00 0x1 0x1


MMC read: dev # 0, block # 1, count 1 ... 1 blocks read: OK

NTXSN not avalible !

ntx_gpio_init():R [ERROR] GPIO group number error (0)!!

ntx_gpio_init():B [ERROR] GPIO group number error (0)!!

ntx_gpio_get_value(404) : error parameter ! null ptr !

ntx_config_fastboot_layout():10 binaries partition added

ntx_config_fastboot_layout():3 mbr partition added

fuse bank 0 offset 3 is 0x5C31008F

check_and_clean: reg 0, flag_set 0

Fastboot: Normal

Hit any key to stop autoboot:  1  0 

switch to partitions #0, OK

mmc0 is current device

mmc read 0x80800000 0x14000 0x5000


MMC read: dev # 0, block # 81920, count 20480 ... 20480 blocks read: OK

Booting from mmc ...

mmc read 0x83000000 0x505 0x1


MMC read: dev # 0, block # 1285, count 1 ... 1 blocks read: OK

dtb size = 41589@83000000

mmc read 0x83000000 0x506 0x57


MMC read: dev # 0, block # 1286, count 87 ... 87 blocks read: OK


 hwcfgp=8ffffe00,pcb=81,customer=9


ntx_gpio_get_value(404) : error parameter ! null ptr !

ESDin=0,UPGKey=-1,PWRKey=0,USBin=0x0,BootESD=0,MenuKey=0

mmc read 0x8ffffc00 0x37ff 0x1


MMC read: dev # 0, block # 14335, count 1 ... 1 blocks
```


[6/20/2022 12:48 AM] szybet
it has overwritten u-boot


[6/20/2022 12:50 AM] tux_linux
Modules


[6/20/2022 12:50 AM] tux_linux
Nice


[6/20/2022 12:51 AM] tux_linux
Reflash backup maybe?


[6/20/2022 12:51 AM] szybet
modules are still in the kernel?


[6/20/2022 12:51 AM] szybet
i mean


[6/20/2022 12:51 AM] szybet
in the busybox initrd


[6/20/2022 12:52 AM] szybet
no problem getting it back and running


[6/20/2022 12:52 AM] szybet
the problem is that i cant work on user apps


[6/20/2022 12:52 AM] tux_linux
Maybe those for audio or otg, less essential things can be in partition


[6/20/2022 12:52 AM] tux_linux
Emulator


[6/20/2022 12:52 AM] szybet
no.


[6/20/2022 12:52 AM] szybet
its horrible


[6/20/2022 12:53 AM] szybet
+ the problem is no user apps on the nia


[6/20/2022 12:53 AM] szybet
ironic


[6/20/2022 12:53 AM] szybet
so we need to find a way to make the kernel smaller


[6/20/2022 12:53 AM] tux_linux
I'll see what could be stripped from the Nia initrd
Because we have a problem


[6/20/2022 12:54 AM] tux_linux
c'mon, I wrote half of the backend on the emulator


[6/20/2022 12:54 AM] szybet
network is dying


[6/20/2022 12:55 AM] szybet
its not usable


[6/20/2022 12:56 AM] szybet
doing this that it will work on max size wont fix the problem


[6/20/2022 12:56 AM] szybet
just shift it in time


[6/20/2022 12:56 AM] szybet
what about moving all modules to p3?


[6/20/2022 12:58 AM] szybet
```
2.0M    ./opt/splash-rootfs.tar.xz
1.6M    ./usr/sbin/dhclient
1.5M    ./usr/lib/libcrypto.so.1.1
1.5M    ./bin/busybox
1.1M    ./sbin/wpa_supplicant
844K    ./usr/bin/fsck.ext4
692K    ./opt/modules.sqsh
460K    ./lib/ld-musl-armhf.so.1
432K    ./usr/bin/openssl
312K    ./usr/lib/libssl.so.1.1
248K    ./usr/bin/mksquashfs
204K    ./opt/bin/qr-to-png
184K    ./usr/bin/unsquashfs
180K    ./usr/lib/libdbus-1.so.3
140K    ./opt/firmware.sqsh
84K    ./usr/lib/libnl-3.so.200
76K    ./sbin/wpa_cli
60K    ./usr/bin/evtest
40K    ./usr/sbin/iwlist
36K    ./usr/sbin/iwconfig
36K    ./usr/sbin/ifrename
32K    ./sbin/wpa_passphrase
28K    ./usr/sbin/iwspy
28K    ./usr/sbin/iwpriv
28K    ./usr/sbin/iwgetid
28K    ./usr/sbin/iwevent
28K    ./usr/lib/libpcsclite.so.1
20K    ./sbin/dhclient-script
20K    ./etc/init.d/rcS
16K    ./usr/lib/libnl-genl-3.so.200
```


[6/20/2022 12:58 AM] szybet
what is splash rootfs?


[6/20/2022 1:02 AM] szybet
its an entire filesystem???


[6/20/2022 1:04 AM] szybet
```
1.2M    ./lib/libc-2.21.so
1.1M    ./opt/fbink/libfbink.so.1.0.0
704K    ./opt/fbink/inter-b.ttf
684K    ./opt/fbink/inter-m.ttf
560K    ./usr/bin/inkvt.armhf
428K    ./lib/libm.so.6
428K    ./lib/libm-2.21.so
132K    ./lib/ld-2.21.so
124K    ./lib/libpthread-2.21.so
112K    ./lib/libgcc_s.so.1
72K    ./opt/fbink/fraunces.ttf
72K    ./opt/fbink/fbink
32K    ./lib/libcrypt-2.21.so
12K    ./lib/libutil-2.21.so
12K    ./lib/libdl-2.21.so
12K    ./etc/services
4.0K    ./usr/share/udhcpc/default.script
4.0K    ./usr/bin/serial-debug
4.0K    ./tmp/ldconfig/aux-cache
4.0K    ./opt/bin/update-splash
4.0K    ./lib/libgcc_s.so
4.0K    ./etc/shadow
4.0K    ./etc/protocols
4.0K    ./etc/profile.d/umask
4.0K    ./etc/profile
4.0K    ./etc/passwd
4.0K    ./etc/os-release
4.0K    ./etc/nsswitch.conf
4.0K    ./etc/network/interfaces
4.0K    ./etc/network/if-pre-up.d/wait_ifac
```


[6/20/2022 1:05 AM] tux_linux
no


[6/20/2022 1:05 AM] szybet
ok, why


[6/20/2022 1:05 AM] tux_linux
It contains fbink
Which requires glibc


[6/20/2022 1:06 AM] szybet
2Mb? is it really worth it?


[6/20/2022 1:06 AM] tux_linux
There's no way to upgrade them in update.sh


[6/20/2022 1:06 AM] szybet
replace the files?


[6/20/2022 1:06 AM] tux_linux
Ok, then you don't have any boot splash and no progress bar


[6/20/2022 1:07 AM] szybet
okay, then not touching that


[6/20/2022 1:07 AM] tux_linux
Well, Wi-Fi stuff could be removed


[6/20/2022 1:07 AM] tux_linux
If we don't have anything else


[6/20/2022 1:07 AM] szybet
`/usr/sbin/dhclient`?


[6/20/2022 1:09 AM] szybet
```
248K    ./usr/bin/mksquashfs
184K    ./usr/bin/unsquashfs

60K    ./usr/bin/evtest
40K    ./usr/sbin/iwlist
36K    ./usr/sbin/iwconfig
36K    ./usr/sbin/ifrename
```?


[6/20/2022 1:09 AM] szybet
these maybe too?


[6/20/2022 1:12 AM] tux_linux
mksquashfs can be removed


[6/20/2022 1:12 AM] tux_linux
Try that


[6/20/2022 1:12 AM] szybet
what are you unsquashfs at boot?


[6/20/2022 1:12 AM] szybet
???


[6/20/2022 1:13 AM] tux_linux
Modules
Some loop0 issue so I don't want to mount them


[6/20/2022 1:13 AM] tux_linux
Ideally not
Try with mksquashfs first


[6/20/2022 1:13 AM] szybet
why not


[6/20/2022 1:56 AM] tux_linux
I'm stripping some config options
Will get back to you


[6/20/2022 2:05 AM] szybet
for what fo you need dhclient


[6/20/2022 2:16 AM] tux_linux
wi-fi connection at bootup
but it's not really used
anyways


[6/20/2022 2:17 AM] tux_linux
```
[nicolas@fedora linux-4.1.15-n306]$ ls -sh arch/arm/boot/zImage 
9.8M arch/arm/boot/zImage
[nicolas@fedora linux-4.1.15-n306]$
```


[6/20/2022 2:18 AM] tux_linux
(replace `kernel/config/config-n306` by this)

{Attachments}
/mnt/data/projects/git/conversations/media/config-8B33F


[6/20/2022 2:18 AM] tux_linux
and


[6/20/2022 2:19 AM] tux_linux
remove `/opt/firmware.sqsh` (not needed at all, got there by mistake)
remove `/opt/fbink/inter-m.ttf` in `splash-rootfs.tar.xz`
then tell me if it boots


[6/20/2022 2:20 AM] tux_linux
I disabled Bluetooth, no clue why it was enabled initially (not any Bluetooth adapter in there AFAIK)


[6/20/2022 2:29 AM] szybet
OH i wanted to say what i Discoverer today


[6/20/2022 2:29 AM] szybet
Nia has some solder joints for a additional chip


[6/20/2022 2:30 AM] szybet
I though it is for additional ram


[6/20/2022 2:30 AM] szybet
But today i looked closely and there is a small antena connector


[6/20/2022 2:30 AM] szybet
So dont be suprised for nia devices with bluetooth support in the future


[6/20/2022 2:31 AM] szybet
Looks to optimistic, will try that tommorow

{Reactions}
👍 

[6/20/2022 2:48 AM] tux_linux
no way


[6/20/2022 2:48 AM] tux_linux
oh ok


[6/20/2022 5:44 AM] tux_linux
```
kobo:/kobo/mnt/onboard/onboard/.apps/InkVT/InkVT$ ssh root@127.0.0.1
socket: Permission denied
ssh: connect to host 127.0.0.1 port 22: failure
kobo:/kobo/mnt/onboard/onboard/.apps/InkVT/InkVT$ telnet 127.0.0.1
telnet: socket: Permission denied
kobo:/kobo/mnt/onboard/onboard/.apps/InkVT/InkVT$
```
nice


[6/20/2022 6:04 AM] tux_linux
https://unix.stackexchange.com/questions/706791/ssh-or-telnet-as-an-unpriviledged-user-leads-to-socket-permission-denied-erro
why not ask

{Embed}
https://unix.stackexchange.com/questions/706791/ssh-or-telnet-as-an-unpriviledged-user-leads-to-socket-permission-denied-erro
SSH or telnet as an unpriviledged user leads to 'socket: Permission...
I'm running a strange 3.0.35 heavily patched kernel on an embedded device (Kobo eReader). Maybe it partly explains this issue.Basically:
kobo:/$ ssh root@127.0.0.1
socket: Permission denied
ssh: co...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[6/20/2022 12:03 PM] szybet
wtf


[6/20/2022 12:04 PM] szybet
is it a socket in the user app chroot?


[6/20/2022 12:18 PM] szybet
```
Linux inkbox 4.1.15 #1 SMP PREEMPT Fri Apr 1 19:30:10 CEST 2022 armv7l GNU/Linux
InkBox OS, kernel build Upk8smp6, commit 65f0406
Copyright (C) 2021-2022 Nicolas Mailloux <nicolecrivain@gmail.com>
```


[6/20/2022 12:18 PM] szybet
old kernel


[6/20/2022 12:18 PM] szybet
so the sd card is not dead


[6/20/2022 12:19 PM] szybet
```
cp Downloads/config /mnt/HDD/Project/Public/kobo-nia-audio-new/inkbox/kernel/kernel/config/config-n306

...

% du -h zImage-root 
11M    zImage-root
```


[6/20/2022 12:19 PM] szybet
um?


[6/20/2022 12:54 PM] tux_linux
?


[6/20/2022 12:54 PM] tux_linux
I'll send you mine otherwise


[6/20/2022 12:58 PM] szybet
OH i will do this too


[6/20/2022 12:58 PM] szybet
Later


[6/20/2022 12:58 PM] szybet
Currently no access to pc

{Reactions}
👍 

[6/20/2022 12:58 PM] tux_linux
I doubt it will reduce the size that much
It's strange


[6/20/2022 1:02 PM] tux_linux
Actually the comment was right
Wouldn't have thought this config option was in the kernel


[6/20/2022 1:02 PM] szybet
W t f


[6/20/2022 1:02 PM] szybet
🥴


[6/20/2022 1:02 PM] szybet
I still want to remove dhclient


[6/20/2022 1:03 PM] tux_linux
Yeah, some random dude enabled it for no reason


[6/20/2022 1:04 PM] tux_linux
I think udhcpc could be used, but if I put dhclient there in the first place there must have been a reason


[6/20/2022 1:05 PM] szybet
I hope not an important one


[6/20/2022 3:20 PM] tux_linux
me too


[6/20/2022 3:31 PM] ninuje
FBInk can be built against musl just fine


[6/20/2022 3:31 PM] tux_linux
... really ...?


[6/20/2022 3:32 PM] tux_linux
every time I tried to do it it failed because of a linker plugin error


[6/20/2022 3:32 PM] ninuje
Yup


[6/20/2022 3:33 PM] ninuje
Assuming you don't need all the bitmap fonts (or any of 'em), check the modular build options to shave some fat off the binary


[6/20/2022 3:33 PM] tux_linux
I kinda need them


[6/20/2022 3:33 PM] tux_linux
At least the IBM one


[6/20/2022 3:34 PM] ninuje
That's fine, you can drop all the others and just keep that one


[6/20/2022 3:34 PM] tux_linux
But why can't I include all of them? Not that I want  to do it, but still


[6/20/2022 3:34 PM] ninuje
c.f., **https://github.com/NiLuJe/FBInk#how-do-i-build-it**

{Embed}
https://github.com/NiLuJe/FBInk
GitHub - NiLuJe/FBInk: FrameBuffer eInker, a small tool & library t...
FrameBuffer eInker, a small tool &amp; library to print text &amp; images to an eInk Linux framebuffer - GitHub - NiLuJe/FBInk: FrameBuffer eInker, a small tool &amp; library to print t...
/mnt/data/projects/git/conversations/media/FBInk-893E8


[6/20/2022 3:34 PM] ninuje
`BITMAP=1` but `FONTS=0`


[6/20/2022 3:35 PM] ninuje
Because that's ~900KB of font data


[6/20/2022 3:35 PM] tux_linux
Oh
but I need fonts


[6/20/2022 3:35 PM] ninuje
the embedded bitmap ones?


[6/20/2022 3:35 PM] ninuje
Not talking about opentype (that's another build option, though)


[6/20/2022 3:35 PM] tux_linux
https://fonts.google.com/specimen/Fraunces?query=fraunces&preview.text=InkBox&preview.text_type=custom


[6/20/2022 3:35 PM] tux_linux
oh ok


[6/20/2022 3:35 PM] ninuje
Yeah, that's another thing entirely


[6/20/2022 3:36 PM] tux_linux
Well, yeah, I need those too


[6/20/2022 3:36 PM] ninuje
`OPENTYPE=1`


[6/20/2022 3:36 PM] tux_linux
Devmode splash

{Attachments}
/mnt/data/projects/git/conversations/media/dev-9823E.png


[6/20/2022 3:37 PM] tux_linux
I guess I can choose another opentype font
But that is probably going to take more space instead of stripping it off


[6/20/2022 3:37 PM] szybet
dhclient is used to recconect the wifi at boot right?


[6/20/2022 3:37 PM] tux_linux
yes


[6/20/2022 3:37 PM] ninuje
That's the base embedded IBM  bitmap one


[6/20/2022 3:38 PM] tux_linux
oh so it's available


[6/20/2022 3:38 PM] szybet
how many times did you used this feature


[6/20/2022 3:38 PM] szybet
becouse me 0


[6/20/2022 3:38 PM] tux_linux
on Touch B
yeah, it's kind of a complicated story


[6/20/2022 3:38 PM] szybet
d e l e t e i t 🥴


[6/20/2022 3:40 PM] tux_linux
I wanted to enable it for 1.9 but then I realized if I updated the kernel with the final recoveryfs checksum, which also contains a backup kernel, I would not be able to put the final kernel into the final recoveryfs, otherwise the checksum at run-time would not match
You can't solve this
So I wanted to enable it on v2.0


[6/20/2022 3:40 PM] szybet
enable what


[6/20/2022 3:40 PM] tux_linux
Wi-Fi connection at boot


[6/20/2022 3:40 PM] tux_linux
Faster boot time because it verifies against checksums instead of signatures


[6/20/2022 3:41 PM] szybet
is this feature worth 1.8 Mb in the busybox initrd?


[6/20/2022 3:41 PM] tux_linux
you decide 😉


[6/20/2022 3:41 PM] szybet
i say no


[6/20/2022 3:41 PM] tux_linux
dhclient would be the first thing to try to remove


[6/20/2022 3:42 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify
kernel/checksum-verify at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[6/20/2022 3:42 PM] tux_linux
http://166.62.241.240:500/keyserver/common/


[6/20/2022 3:44 PM] szybet
you want to verify checksums instead of signs?


[6/20/2022 3:44 PM] tux_linux
yeah, it's faster


[6/20/2022 3:44 PM] tux_linux
(slightly)


[6/20/2022 3:44 PM] tux_linux
but the problem is that user can edit checksums
and not signatures
that's why checksums are on a server read-only


[6/20/2022 3:45 PM] szybet
what?


[6/20/2022 3:46 PM] szybet
what do you want to do


[6/20/2022 3:46 PM] szybet
i want be able to use the ereader if i have no wifi connection?


[6/20/2022 3:46 PM] tux_linux
don't worry, if it can't find checksums it falls back to signatures


[6/20/2022 3:48 PM] szybet
this has no sense at all


[6/20/2022 3:49 PM] szybet
how do you want to say this


[6/20/2022 3:49 PM] szybet
"secure ereader distro that connects to a server at boot"


[6/20/2022 3:49 PM] tux_linux
that's what amazon, kobo, everyone does?


[6/20/2022 3:49 PM] tux_linux
it's not sending any info


[6/20/2022 3:49 PM] szybet
+ someone can replace the signs too, just as like the checksum?


[6/20/2022 3:49 PM] tux_linux
just fetching it


[6/20/2022 3:50 PM] szybet
we are not everyone


[6/20/2022 3:50 PM] tux_linux
have you tried this for real?


[6/20/2022 3:50 PM] tux_linux
you can't


[6/20/2022 3:50 PM] tux_linux
that's what signatures are meant for


[6/20/2022 3:50 PM] tux_linux
it will just not work


[6/20/2022 3:51 PM] szybet
whats preventing me from compiling inkbox with my own signatures?


[6/20/2022 3:51 PM] tux_linux
nothing


[6/20/2022 3:51 PM] tux_linux
I meant, in a normal kernel


[6/20/2022 3:51 PM] szybet
exactly


[6/20/2022 3:51 PM] tux_linux
Normally people don't want/don't know how to recompile a kernel


[6/20/2022 3:51 PM] szybet
exactly


[6/20/2022 3:52 PM] tux_linux
and?


[6/20/2022 3:52 PM] szybet
so we can use checksums if they are faster, without connecting to a server


[6/20/2022 3:52 PM] tux_linux
we can't use checksums


[6/20/2022 3:53 PM] szybet
why


[6/20/2022 3:53 PM] tux_linux
simple logic:
1. modify a file
2. calculate the checksum and throw it in file.cksum
3. done
simple logic for signatures:
1. modify a file
2. sign the file -- whoops, don't have any private key
3. recompile the kernel, sign all packages back
4. done
one more layer of security


[6/20/2022 3:54 PM] szybet
well okay, then stay with signs

{Reactions}
👍 

[6/20/2022 3:55 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220620_135450818-F31E4.jpg


[6/20/2022 3:55 PM] szybet
checksums only for developer / rooted and read them from a file


[6/20/2022 3:55 PM] szybet
telnet?


[6/20/2022 3:55 PM] szybet
no ssh


[6/20/2022 3:55 PM] tux_linux
at this point just use developer mode (no signatures needed)


[6/20/2022 3:55 PM] szybet
?


[6/20/2022 3:55 PM] tux_linux
yeah will add dropbear too


[6/20/2022 3:57 PM] szybet
also checksums on a server is a bad idea, servers can be hacked


[6/20/2022 3:57 PM] szybet
did i convince you to not do it?


[6/20/2022 3:58 PM] tux_linux
nobody's done that in 9 months of uptime


[6/20/2022 3:58 PM] szybet
for now


[6/20/2022 3:58 PM] szybet
just dont


[6/20/2022 3:59 PM] tux_linux
did you recompile the kernel with the changes I listed above?


[6/20/2022 3:59 PM] szybet
i will soon

{Reactions}
👍 

[6/20/2022 3:59 PM] szybet
did i convinced you?


[6/20/2022 3:59 PM] tux_linux
no ;p


[6/20/2022 4:00 PM] tux_linux
Did I **convince** you


[6/20/2022 4:00 PM] szybet
; _  ;


[6/20/2022 4:00 PM] szybet
no


[6/20/2022 4:00 PM] szybet
can you give the user decide?


[6/20/2022 4:00 PM] szybet
in the setup


[6/20/2022 4:00 PM] szybet
do you want to connect to a server to verify checksums, if yes there will be faster boot times


[6/20/2022 4:00 PM] tux_linux
i will think about it


[6/20/2022 4:01 PM] szybet
i didn't installed inkbox for that that my ereader will connect to a server


[6/20/2022 4:02 PM] tux_linux
Well, it does with Gutenberg


[6/20/2022 4:02 PM] tux_linux
So what do you want now


[6/20/2022 4:02 PM] szybet
not at boot^, for something that isint neccesery


[6/20/2022 4:03 PM] tux_linux
well, then don't complain about boot time no more


[6/20/2022 4:04 PM] szybet
i dont?


[6/20/2022 4:04 PM] tux_linux
you did


[6/20/2022 4:04 PM] szybet
i said i dont care becouse ereaders dont reboot that much


[6/20/2022 4:04 PM] tux_linux
hmm


[6/20/2022 4:04 PM] szybet
for developing yes, but i didn't know about developer mode


[6/20/2022 4:04 PM] tux_linux
did you set it up?


[6/20/2022 4:04 PM] szybet
no


[6/20/2022 4:04 PM] tux_linux
you should


[6/20/2022 4:04 PM] szybet
but i will when i will edit the kernel


[6/20/2022 4:04 PM] szybet
yea


[6/20/2022 4:05 PM] tux_linux
50% faster boot time at least


[6/20/2022 4:05 PM] tux_linux
fake openssl is literally just
```
#!/bin/sh

exit 0
```


[6/20/2022 4:05 PM] szybet
nice


[6/20/2022 4:06 PM] tux_linux
`cat x* > zImage`

{Attachments}
/mnt/data/projects/git/conversations/media/xaa-DA7B5
/mnt/data/projects/git/conversations/media/xab-A02F2


[6/20/2022 4:07 PM] szybet
?


[6/20/2022 4:07 PM] tux_linux
9.8M zImage


[6/20/2022 4:07 PM] tux_linux
because you haven't compiled it yet


[6/20/2022 4:08 PM] szybet
i do it right now

{Reactions}
👍 

[6/20/2022 4:16 PM] tux_linux
```
kobo:/data/onboard/.apps/InkVT/InkVT/dev# chroot /data/onboard/.apps/InkVT/InkVT /app-temp/dbclient root@127.0.0.1
/app-temp/dbclient: Warning: failed to identify current user. Trying anyway.
/app-temp/dbclient: Warning: failed creating /root/.ssh: No such file or directory

Host '127.0.0.1' is not in the trusted hosts file.
(ssh-ed25519 fingerprint SHA256:lU7osa3DIJydkeH6Dyno0yaTiOBeT+xti097opyXK4Q)
Do you want to continue connecting? (y/n) y
root@127.0.0.1's password: 
Welcome to InkBox OS!
* Warning *
Root filesystem is mounted read-only.
Invoke `ifsctl mnt rootfs rw' to make it read-write.
kobo:~# ls
kobo:~#
```
great


[6/20/2022 4:17 PM] szybet
nice


[6/20/2022 4:23 PM] szybet
`9.9M    zImage-root`


[6/20/2022 4:23 PM] szybet
will try it


[6/20/2022 4:24 PM] tux_linux
great


[6/20/2022 4:29 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/InkVT-A266F.isa


[6/20/2022 4:29 PM] tux_linux
done
i think


[6/20/2022 4:35 PM] szybet
```
mount: mounting devtmpfs on /splash/dev failed: No such file or directory
mount: mounting sysfs on /splash/sys failed: No such file or directory
mount: mounting proc on /splash/proc failed: No such file or directory
chroot: can't execute '/opt/fbink/fbink': No such file or directory
chroot: can't execute '/opt/fbink/fbink': No such file or directory
```


[6/20/2022 4:35 PM] szybet
what have i broken


[6/20/2022 4:36 PM] tux_linux
Does splash-rootfs txz exist?


[6/20/2022 4:36 PM] szybet
yes but


[6/20/2022 4:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-66059.png


[6/20/2022 4:36 PM] szybet
wtf


[6/20/2022 4:37 PM] tux_linux
What


[6/20/2022 4:37 PM] tux_linux
Try my kernel image then


[6/20/2022 4:37 PM] szybet
its not a fix if i cant create a tar xz archive😆


[6/20/2022 4:41 PM] szybet
ark cant compress an directory


[6/20/2022 4:41 PM] szybet
kde software.


[6/20/2022 4:52 PM] tux_linux
`tar cJvf dir ../a.txz`


[6/20/2022 5:06 PM] szybet
i figured it out


[6/20/2022 5:06 PM] szybet
it works


[6/20/2022 5:06 PM] szybet
now only the gui bundle


[6/20/2022 5:07 PM] szybet
you will do the commit or me?


[6/20/2022 5:07 PM] szybet
with the kernel


[6/20/2022 5:07 PM] tux_linux
oh that


[6/20/2022 5:07 PM] tux_linux
ok doing it now


[6/20/2022 5:08 PM] szybet
also the device nodes thing


[6/20/2022 5:08 PM] szybet
your decision, i can do that too


[6/20/2022 5:08 PM] tux_linux
it was not that?


[6/20/2022 5:08 PM] tux_linux
oh ok


[6/20/2022 5:08 PM] szybet
?


[6/20/2022 5:08 PM] tux_linux
well, screen splash works ok?


[6/20/2022 5:08 PM] szybet
yes, works


[6/20/2022 5:08 PM] tux_linux
good


[6/20/2022 5:08 PM] tux_linux
will do device nodes first


[6/20/2022 5:09 PM] szybet
you can add only a promt "did you do it"?


[6/20/2022 5:13 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle/pull/1/commits

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/pull/1/commits
fixes that worked for me, readme and a faster way to download neede...
…things


[6/20/2022 5:13 PM] tux_linux
done


[6/20/2022 5:13 PM] szybet
what about this one


[6/20/2022 5:13 PM] szybet
thanks

{Reactions}
👍 

[6/20/2022 5:18 PM] tux_linux
do I disable bluetooth in config?


[6/20/2022 5:19 PM] tux_linux
with it the kernel's size is 9.9M


[6/20/2022 5:19 PM] tux_linux
without I guess it's 9.8M


[6/20/2022 5:19 PM] szybet
disable it


[6/20/2022 5:19 PM] tux_linux
ok


[6/20/2022 5:19 PM] szybet
if there is a nia with it it will have another codename


[6/20/2022 5:19 PM] szybet
n306b or smth


[6/20/2022 5:20 PM] szybet
was in the config writted which chip is supported?


[6/20/2022 5:20 PM] tux_linux
wdym?


[6/20/2022 5:20 PM] szybet
?


[6/20/2022 5:20 PM] tux_linux
```
diff --git a/kernel/config/config-n306 b/kernel/config/config-n306
index 4086054bbe..2da6951cf4 100644
--- a/kernel/config/config-n306
+++ b/kernel/config/config-n306
@@ -718,36 +718,7 @@ CONFIG_NET_FLOW_LIMIT=y
 # CONFIG_HAMRADIO is not set
 # CONFIG_CAN is not set
 # CONFIG_IRDA is not set
-CONFIG_BT=y
-CONFIG_BT_BREDR=y
-CONFIG_BT_RFCOMM=y
-CONFIG_BT_RFCOMM_TTY=y
-CONFIG_BT_BNEP=y
-CONFIG_BT_BNEP_MC_FILTER=y
-CONFIG_BT_BNEP_PROTO_FILTER=y
-CONFIG_BT_HIDP=y
-CONFIG_BT_LE=y
-# CONFIG_BT_SELFTEST is not set
-CONFIG_BT_DEBUGFS=y
-
-#
-# Bluetooth device drivers
-#
-# CONFIG_BT_HCIBTUSB is not set
-# CONFIG_BT_HCIBTSDIO is not set
-CONFIG_BT_HCIUART=y
-CONFIG_BT_HCIUART_H4=y
-# CONFIG_BT_HCIUART_BCSP is not set
-# CONFIG_BT_HCIUART_ATH3K is not set
-# CONFIG_BT_HCIUART_LL is not set
-CONFIG_BT_HCIUART_3WIRE=y
-# CONFIG_BT_HCIUART_INTEL is not set
-# CONFIG_BT_HCIUART_BCM is not set
-# CONFIG_BT_HCIBCM203X is not set
-# CONFIG_BT_HCIBPA10X is not set
-# CONFIG_BT_HCIBFUSB is not set
-CONFIG_BT_HCIVHCI=y
-# CONFIG_BT_MRVL is not set
+# CONFIG_BT is not set
 # CONFIG_AF_RXRPC is not set
 CONFIG_WIRELESS=y
 CONFIG_WIRELESS_EXT=y
(1/1) Stage this hunk [y,n,q,a,d,e,?]?
```


[6/20/2022 5:21 PM] szybet
bluetooth over serial


[6/20/2022 5:21 PM] szybet
interesting


[6/20/2022 5:22 PM] tux_linux
that must be sloooooooow


[6/20/2022 5:22 PM] szybet
for music / keyboard?


[6/20/2022 5:22 PM] szybet
its fine


[6/20/2022 5:22 PM] szybet
bluetooth is slow anyway


[6/20/2022 5:22 PM] tux_linux
music??


[6/20/2022 5:22 PM] tux_linux
it takes at least 1m30s to transfer 1M of data over serial


[6/20/2022 5:23 PM] szybet
its HCI UART and 3 wire something


[6/20/2022 5:23 PM] szybet
so its propabyl faster


[6/20/2022 5:23 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/e306dd20f5eb7d2ad940f82049838927b94204d9

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/e306dd20f5eb7d2ad940f82049838927b94204d9
N306: Make kernel bootable again · Kobo-InkBox/kernel@e306dd2
/mnt/data/projects/git/conversations/media/e306dd20f5eb7d2ad940f82049838927b94204d9-69D8C


[6/20/2022 5:24 PM] szybet
looks good


[6/20/2022 5:25 PM] szybet
isint there on github a way to show "i have looked through the commit and its fine"?


[6/20/2022 5:25 PM] tux_linux
review a PR?


[6/20/2022 5:25 PM] szybet
commits


[6/20/2022 5:25 PM] tux_linux
i don't think so


[6/20/2022 5:33 PM] tux_linux
don't forget to switch to the `userapp` branch when you compile inkbox


[6/20/2022 5:34 PM] szybet
crap


[6/20/2022 5:35 PM] szybet
i can launch inkbox on the fly, no need for it to be in gui bundle


[6/20/2022 5:35 PM] szybet
so no problem with that


[6/20/2022 5:35 PM] szybet
propably


[6/20/2022 5:35 PM] tux_linux
no


[6/20/2022 5:35 PM] tux_linux
you are missing the `launch_user_application.sh` launch script


[6/20/2022 5:35 PM] szybet
i did update it


[6/20/2022 5:36 PM] tux_linux
then good


[6/20/2022 5:36 PM] szybet
butwithout changing inkbox branch


[6/20/2022 5:36 PM] szybet
so it should be fine


[6/20/2022 5:52 PM] tux_linux
does it work?


[6/20/2022 5:52 PM] tux_linux
nice if you could fix the RequiredFeatures thing


[6/20/2022 5:54 PM] szybet
yes


[6/20/2022 5:54 PM] szybet
yes


[6/20/2022 5:54 PM] tux_linux
great


[6/20/2022 5:54 PM] tux_linux
did you try inkvt?


[6/20/2022 5:56 PM] szybet
you only shared isa file


[6/20/2022 5:56 PM] szybet
and its not signed?


[6/20/2022 5:56 PM] szybet
i need to enable developer mode?


[6/20/2022 5:57 PM] szybet
okay, json is where?


[6/20/2022 5:57 PM] tux_linux
oh i forgot that


[6/20/2022 5:57 PM] tux_linux
hang on


[6/20/2022 5:58 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/app-4B9D1.json


[6/20/2022 5:58 PM] tux_linux
hmm you should update the rootfs


[6/20/2022 5:58 PM] tux_linux
unless you did it less than an hour ago


[6/20/2022 5:58 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B08D6.png


[6/20/2022 6:00 PM] szybet
i will edit this one line


[6/20/2022 6:00 PM] tux_linux
there is `jq` in your rootfs?


[6/20/2022 6:01 PM] szybet
yes


[6/20/2022 6:01 PM] tux_linux
Ok, you should be good


[6/20/2022 6:04 PM] szybet
what was the file to create to update when uploading via ssh?


[6/20/2022 6:04 PM] szybet
we should do a /guibin and there script with names that will do thing like that, its horrible to remember that


[6/20/2022 6:05 PM] szybet
/tmp/rescan_userapps


[6/20/2022 6:05 PM] szybet
got it


[6/20/2022 6:06 PM] szybet
it should mount it?


[6/20/2022 6:06 PM] tux_linux
yes?


[6/20/2022 6:06 PM] szybet
it didn't?


[6/20/2022 6:06 PM] szybet
```
kobo:/kobo/mnt/onboard/onboard/.apps# ls InkVT/
InkVT.isa       InkVT.isa.dgst  app.json
```


[6/20/2022 6:06 PM] tux_linux
`rc-service gui_apps restart`


[6/20/2022 6:07 PM] szybet
whats the point of recreating the main json if this is needed?


[6/20/2022 6:07 PM] tux_linux
The main JSON is for the GUI


[6/20/2022 6:07 PM] tux_linux
gui_apps is the backend


[6/20/2022 6:07 PM] szybet
gui should call the backend for update too


[6/20/2022 6:07 PM] tux_linux
it (almost) doesn't care about any json file


[6/20/2022 6:08 PM] tux_linux
say you want to update only the application's details
you don't need to remount it


[6/20/2022 6:09 PM] tux_linux
it restarts it if you add apps via usbms


[6/20/2022 6:09 PM] szybet
ok, good then


[6/20/2022 6:09 PM] szybet
well it could do this too when `/tmp/rescan_userapps`


[6/20/2022 6:09 PM] szybet
inkvt crashed?


[6/20/2022 6:10 PM] tux_linux
how


[6/20/2022 6:10 PM] szybet
when i clicked -> and tab in top


[6/20/2022 6:10 PM] tux_linux
i guess it does this sometimes


[6/20/2022 6:10 PM] tux_linux
it's not even beta software


[6/20/2022 6:10 PM] szybet
there is the process


[6/20/2022 6:10 PM] szybet
but itdoesnt do anything


[6/20/2022 6:10 PM] tux_linux
`kill -9 "$(pidof InkVT)"`


[6/20/2022 6:11 PM] szybet
i cant kill it


[6/20/2022 6:11 PM] szybet
in htop too


[6/20/2022 6:12 PM] tux_linux
zombie process nonsense


[6/20/2022 6:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-EE98E.png


[6/20/2022 6:12 PM] szybet
yes


[6/20/2022 6:13 PM] szybet
i cant do anything


[6/20/2022 6:13 PM] szybet
kek


[6/20/2022 6:14 PM] tux_linux
try to kill `launch_user_application.sh`


[6/20/2022 6:16 PM] szybet
nothing


[6/20/2022 6:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B1D0B.png


[6/20/2022 6:16 PM] tux_linux
reboot


[6/20/2022 6:16 PM] szybet
._ .


[6/20/2022 6:17 PM] tux_linux
it is very stable on the glo hd


[6/20/2022 6:17 PM] szybet
it is launched on the nia first time propably


[6/20/2022 6:17 PM] szybet
well a warning that this app is not stable is needed


[6/20/2022 6:17 PM] szybet
or compability without the nia


[6/20/2022 6:18 PM] tux_linux
compatibility is better


[6/20/2022 6:18 PM] tux_linux
would be nice to exclude models, not include all of them then remove one


[6/20/2022 6:18 PM] tux_linux
is it doable?


[6/20/2022 6:18 PM] szybet
its not worth our time


[6/20/2022 6:18 PM] tux_linux
then what do you do when we support another device, another device, another device?


[6/20/2022 6:19 PM] szybet
okay, its not worth our *current* time


[6/20/2022 6:19 PM] szybet
maybe in the future

{Reactions}
👍 

[6/20/2022 6:30 PM] szybet
inkvt works fine


[6/20/2022 6:30 PM] szybet
without top


[6/20/2022 6:33 PM] szybet
SupportedDevices will be an array or not?


[6/20/2022 6:33 PM] szybet
```
[ "n236", "n437", "n306" ]
```


[6/20/2022 6:33 PM] szybet
wiki says yes


[6/20/2022 6:34 PM] tux_linux
Is it?


[6/20/2022 6:34 PM] szybet
now its "n329,xxx,xxx,xxx"


[6/20/2022 6:34 PM] szybet
its a string


[6/20/2022 6:44 PM] szybet
so `Wi-Fi connection required` i can check with `network::isConnected`

`Rooted kernel required` i can check with... adding a new bool to `device` namespace and checking it from the sd card ( i dont remember how to do this ), and check this in main on boot?

and `Pseudoterminal support (/dev/ptmx, /dev/pts) required` with a bool that checks if there are those 2 devices, in main at boot and add a bool in functions too. how the user can enable these? for what are they needed?


[6/20/2022 6:47 PM] szybet
before i do it i ask


[6/20/2022 6:55 PM] tux_linux
1. `if(testPing(true) == 0 or global::deviceID == "emu\n")`
2. `/external_root/opt/root/rooted`
3. InkVT needs it; gui_apps service already manages this work


[6/20/2022 6:56 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/95860dd1515beb9a2963272276ade435f4610467/etc/init.d/gui_apps#L81-L83


[6/20/2022 6:57 PM] szybet
Okay, so what do i do with 3?


[6/20/2022 6:57 PM] tux_linux
nothing?


[6/20/2022 6:58 PM] szybet
An additional check maybe?


[6/20/2022 6:58 PM] szybet
Okay, i will implementacji that


[6/20/2022 6:58 PM] tux_linux
Why? You don't trust the service?


[6/20/2022 6:58 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/9e5ac2102cfc9954adf8d05f49ce9d628c98e2f6


[6/20/2022 6:59 PM] szybet
Also about removing user apps when the json is invalid, can i add a toast with the error? It was confusing even for me


[6/20/2022 7:00 PM] tux_linux
yes


[6/20/2022 7:00 PM] szybet
Well okay then


[6/20/2022 8:47 PM] szybet
```
// Tell the OS that we're not running anymore
            string_writeconfig("/tmp/inkbox_running", "false");
```
hm?


[6/20/2022 8:47 PM] szybet
oh, becouse it exits to a user app


[6/20/2022 8:47 PM] tux_linux
battery watchdog


[6/20/2022 8:47 PM] tux_linux
yes


[6/20/2022 8:47 PM] szybet
this could be done by checking if the process is running


[6/20/2022 8:48 PM] tux_linux
yea i guess


[6/20/2022 8:48 PM] tux_linux
but it works now


[6/20/2022 9:04 PM] szybet
actually the toast works


[6/20/2022 9:07 PM] szybet
you forgot to ad gui_apps at startup, propably


[6/20/2022 9:07 PM] tux_linux
??


[6/20/2022 9:07 PM] tux_linux
what


[6/20/2022 9:08 PM] szybet
```
kobo:~# rc-service gui_apps restart^C
kobo:~# service gui_apps status
 * status: stopped
kobo:~# service gui_apps restart
 * Setting up GUI user applications
Verified OK
 * Successfully set up application 'InkVT'                                                                                                                              [ ok ]
kobo:~# service gui_apps status
 * status: started
kobo:~# 

```


[6/20/2022 9:08 PM] szybet
at a fresh boot, i cant start any user app


[6/20/2022 9:08 PM] szybet
i need to restart the service


[6/20/2022 9:08 PM] tux_linux
Did you modify `inkbox_gui` manually?


[6/20/2022 9:08 PM] tux_linux
Then the rootfs overwrote that file with your version


[6/20/2022 9:09 PM] szybet
no


[6/20/2022 9:09 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/95860dd1515beb9a2963272276ade435f4610467/etc/init.d/inkbox_gui#L68


[6/20/2022 9:09 PM] tux_linux
are you sure


[6/20/2022 9:09 PM] tux_linux
even if you did that 3 months ago


[6/20/2022 9:10 PM] szybet
i would be suprised if there was something, after reflashing and updating the sd card so many times


[6/20/2022 9:10 PM] tux_linux
is that line in your inkbox_gui service file?


[6/20/2022 9:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-59603.png


[6/20/2022 9:11 PM] szybet
nope


[6/20/2022 9:11 PM] szybet
that explains many things


[6/20/2022 9:11 PM] tux_linux
well, you did modify it


[6/20/2022 9:11 PM] tux_linux
or you did not update the rootfs


[6/20/2022 9:11 PM] tux_linux
idk


[6/20/2022 9:11 PM] szybet
i updated


[6/20/2022 9:11 PM] tux_linux
```
mount /dev/mmcblk0p3 /mnt
find /mnt/rootfs/write
```


[6/20/2022 9:11 PM] szybet
i know i knwo


[6/20/2022 9:11 PM] szybet
i will flush it


[6/20/2022 9:12 PM] tux_linux
it might not work right away


[6/20/2022 9:12 PM] tux_linux
sometimes it needs a reboot if you flush everything


[6/20/2022 9:12 PM] szybet
i know

{Reactions}
👍 

[6/20/2022 9:12 PM] tux_linux
(for the files to get updated)


[6/20/2022 9:20 PM] szybet
what with this?


[6/20/2022 9:20 PM] szybet
you update the wiki or i change the code


[6/20/2022 9:20 PM] tux_linux
Ideally, I'd want an array, don't you think it would be better?


[6/20/2022 9:21 PM] szybet
we talked about this


[6/20/2022 9:22 PM] szybet
string:
simpler code
less errors with json things
more adjustable in the future


[6/20/2022 9:24 PM] szybet
can i change in compability warning dialog launch to continue? becouse there can be many dialogs


[6/20/2022 9:25 PM] tux_linux
Yeah? Wasn't it already like that?


[6/20/2022 9:26 PM] tux_linux
btw the rooted kernel dialog is missing the cancel button
for some reason


[6/20/2022 9:26 PM] tux_linux
but required features array works well


[6/20/2022 9:27 PM] szybet
nope, its launch


[6/20/2022 9:27 PM] tux_linux
but what do you want to change?


[6/20/2022 9:27 PM] szybet
no... its not for me but i will double check that


[6/20/2022 9:27 PM] szybet
`launch anyway` and `laucnh` button to `continue`


[6/20/2022 9:28 PM] tux_linux
i don't understand
```
App unsupported, blah blah blah

Cancel | Launch
```
this is how I see it


[6/20/2022 9:29 PM] szybet
`Cancel | Launch` to `Cancel | Continue`


[6/20/2022 9:30 PM] szybet
there could be many dialogs


[6/20/2022 9:30 PM] tux_linux
Oh ok


[6/20/2022 9:30 PM] szybet
and there could be 3 launches


[6/20/2022 9:30 PM] tux_linux
yeah you can


[6/20/2022 9:30 PM] szybet
3 continues are better


[6/20/2022 9:30 PM] tux_linux
can you test if rescan_app restarts the service now?


[6/20/2022 9:31 PM] szybet
decision?


[6/20/2022 9:31 PM] tux_linux
I say an array


[6/20/2022 9:33 PM] szybet
then its an array


[6/20/2022 9:36 PM] tux_linux
good


[6/20/2022 9:37 PM] szybet
what did you do before that?


[6/20/2022 9:37 PM] szybet
there is a bug


[6/20/2022 9:37 PM] tux_linux
nothing?


[6/20/2022 9:37 PM] tux_linux
it happened every time


[6/20/2022 9:37 PM] tux_linux
it's not a bit flip


[6/20/2022 9:41 PM] tux_linux
Maybe I fixed it without realizing


[6/20/2022 9:42 PM] szybet
my though was that you launched app info and the page was at 1 still


[6/20/2022 9:42 PM] szybet
i cant reproduce it


[6/20/2022 9:42 PM] szybet
idk


[6/20/2022 9:42 PM] tux_linux
can you check if rescan_userapps works and restarts the whole service?


[6/20/2022 9:45 PM] szybet
it doesnt work?


[6/20/2022 9:45 PM] szybet
where is the code of it


[6/20/2022 9:45 PM] szybet
main


[6/20/2022 9:45 PM] szybet
?


[6/20/2022 9:45 PM] tux_linux
yes


[6/20/2022 9:46 PM] tux_linux
did you update the whole gui bundle with userapps branch?


[6/20/2022 9:46 PM] szybet
no?


[6/20/2022 9:46 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/9e5ac2102cfc9954adf8d05f49ce9d628c98e2f6/main.cpp#L54-L75


[6/20/2022 9:46 PM] szybet
im launching inkbox from qtcreator


[6/20/2022 9:47 PM] szybet
with the newest version


[6/20/2022 9:47 PM] tux_linux
did you put rescan_userapps in `/kobo/tmp/rescan_userapps`?


[6/20/2022 9:50 PM] szybet
i though /tmp and /kobo/tmp is the same place


[6/20/2022 9:50 PM] szybet
yes it does work


[6/20/2022 9:51 PM] tux_linux
it is not


[6/20/2022 9:51 PM] tux_linux
great


[6/20/2022 10:22 PM] tux_linux
http://185.127.22.95:25560/apps/InkVT.zip


[6/20/2022 10:23 PM] szybet
nice


[6/20/2022 10:23 PM] szybet
i will make a sanki one soon


[6/20/2022 10:23 PM] tux_linux
you're right we would need to have some git version control for apps


[6/20/2022 10:59 PM] szybet
i still need to do pull requests?


[6/20/2022 10:59 PM] szybet
ugh


[6/20/2022 10:59 PM] tux_linux
Patch


[6/20/2022 10:59 PM] tux_linux
git diff


[6/20/2022 11:05 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-F0D7E.txt


[6/20/2022 11:05 PM] szybet
this?


[6/20/2022 11:06 PM] tux_linux
thanks will review that


[6/20/2022 11:06 PM] szybet
all tested


[6/20/2022 11:21 PM] tux_linux
Did you fix required features in app info?


[6/20/2022 11:22 PM] szybet
?


[6/20/2022 11:23 PM] tux_linux
If you click app info button, required features don't show


[6/20/2022 11:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220620_232519-5AEA7.jpg


[6/20/2022 11:26 PM] szybet
Give me a sec 😂


[6/20/2022 11:26 PM] tux_linux
yeah, that


[6/20/2022 11:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220620_233913-385C3.jpg


[6/20/2022 11:40 PM] tux_linux
Nice


[6/20/2022 11:40 PM] tux_linux
Complete patch?


[6/20/2022 11:42 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D8801.txt


[6/20/2022 11:42 PM] szybet
here it is


[6/20/2022 11:42 PM] szybet
the only thing now for userapps is saving when switching widgets


[6/20/2022 11:42 PM] szybet
coudln't we just swap the edit button with a save button when going back? its informative for the user


[6/20/2022 11:43 PM] szybet
and no changes to mainwindow ;p


[6/20/2022 11:43 PM] tux_linux
yes yes yes yes


[6/20/2022 11:44 PM] tux_linux
So that is everything?


[6/20/2022 11:44 PM] szybet
i will do it tommorow

{Reactions}
👍 

[6/20/2022 11:44 PM] szybet
propably?


[6/20/2022 11:44 PM] tux_linux
well, I can do it


[6/20/2022 11:44 PM] tux_linux
I mean, it includes the previous patch you sent?


[6/20/2022 11:44 PM] szybet
with this text patching i cant really provide the icon in a clean way


[6/20/2022 11:44 PM] szybet
in a git way^


[6/20/2022 11:44 PM] szybet
yes

{Reactions}
👍 

[6/20/2022 11:45 PM] tux_linux
it doesn't work


[6/20/2022 11:46 PM] tux_linux
https://devconnected.com/how-to-create-and-apply-git-patch-files/

{Embed}
schkn
https://devconnected.com/how-to-create-and-apply-git-patch-files/
How To Create and Apply Git Patch Files – devconnected
Learn how to create Git patch files using the git format-patch command and apply Git patch files to your branches in order to get changes.
/mnt/data/projects/git/conversations/media/COPIED1-85E59.png


[6/20/2022 11:46 PM] tux_linux
oh wait


[6/20/2022 11:47 PM] tux_linux
ok works now


[6/20/2022 11:47 PM] szybet
i used


[6/20/2022 11:47 PM] szybet
git diff 9e5ac2102cfc9954adf8d05f49ce9d628c98e2f6 c92a69907ccd15b00670957ec5ffceb61f7e32da > diff.git


[6/20/2022 11:48 PM] tux_linux
please no

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-92439.png


[6/20/2022 11:49 PM] szybet
a wiki with you code syntax would be **needed**


[6/20/2022 11:49 PM] tux_linux
ok


[6/20/2022 11:50 PM] szybet
i didn't knowed how to, my memory is broken


[6/20/2022 11:50 PM] szybet
¯\_(ツ)_/¯


[6/20/2022 11:50 PM] tux_linux
But you have this for now


[6/20/2022 11:50 PM] tux_linux
Pinned a message.


[6/20/2022 11:50 PM] szybet
also a wiki index of pages in it is needed too. i didn't knowed about the sony wiki, today i searched for how to root the device and couldn't find it


[6/20/2022 11:52 PM] tux_linux
Huh?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-19818.png


[6/20/2022 11:52 PM] tux_linux (pinned)
https://inkbox.ddns.net/wiki/index.php?title=Special:AllPages


[6/20/2022 11:53 PM] szybet
i had some bugs, appCOmpability Sets it to true when exiting, but it still was false somehow


[6/20/2022 11:54 PM] szybet
pin this link / save it on the wiki


[6/20/2022 11:54 PM] tux_linux
Pinned a message.


[6/20/2022 11:54 PM] tux_linux
But your comment doesn't make sense


[6/20/2022 11:58 PM] tux_linux
Shouldn't it be `global::userApps::appCompatibilityLastContinueStatus = false`?


[6/20/2022 11:58 PM] szybet
oh, set to true


[6/20/2022 11:58 PM] szybet
no, look at the code below


[6/20/2022 11:59 PM] tux_linux
ok


[6/21/2022 12:13 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/525cfac383fb1ebbfd31097743bcc6435355317d

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/525cfac383fb1ebbfd31097743bcc6435355317d
GUI user applications: `SupportedDevices` is now an array · Kobo-In...
Main credit to @Szybet for this commit.
/mnt/data/projects/git/conversations/media/525cfac383fb1ebbfd31097743bcc6435355317d-F320B


[6/21/2022 5:49 AM] tux_linux
Better font
Updated package on the server


[6/21/2022 5:49 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/inkvt-F95E2.png


[6/21/2022 5:50 AM] tux_linux
That keyboard is... something


[6/21/2022 6:03 AM] szybet
I dont like it


[6/21/2022 6:04 AM] tux_linux
Do you think I like it either?


[6/21/2022 6:04 AM] tux_linux
Gotta live with what we have


[6/21/2022 6:04 AM] szybet
On the nia its often outputting double characters


[6/21/2022 6:05 AM] szybet
Everything is fixable tho

{Reactions}
👍 

[6/22/2022 7:33 AM] tux_linux
Our best hope is this, it works quite well on desktop but I couldn't get it to compile for ARM, will try again tomorrow
https://github.com/jsbronder/sff

{Embed}
https://github.com/jsbronder/sff
GitHub - jsbronder/sff: A terminal, using libvterm and Qt
A terminal, using libvterm and Qt. Contribute to jsbronder/sff development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/sff-ED9AC


[6/22/2022 7:34 AM] tux_linux
I literally went through all GH results for `qt terminal` for more than an hour trying to find one that would work correctly and it's the only one I found to be remotely usable and compilable


[6/22/2022 11:04 AM] szybet
what errors did you get?


[6/22/2022 11:06 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1AA80.png


[6/22/2022 11:06 AM] szybet
busybox unzip is trash


[6/22/2022 11:06 AM] szybet
doesnt work


[6/22/2022 11:06 AM] szybet
thats becouse i needed to use a library for sanki


[6/22/2022 11:07 AM] szybet
https://github.com/jsbronder

{Embed}
https://github.com/jsbronder
jsbronder - Overview
jsbronder has 33 repositories available. Follow their code on GitHub.
/mnt/data/projects/git/conversations/media/65322-4C0BF


[6/22/2022 11:07 AM] szybet
he is really active


[6/22/2022 11:07 AM] szybet
you could ask him for help


[6/22/2022 11:07 AM] szybet
¯\_(ツ)_/¯


[6/22/2022 11:31 AM] tux_linux
I think he's got time to lose somewhere else ;)


[6/22/2022 12:25 PM] szybet
thats another wiev for that


[6/22/2022 12:25 PM] szybet
im trying to compile it myself


[6/22/2022 12:30 PM] szybet
im stuck at 
```
CHOST=arm \                                    
CC=arm-kobo-linux-gnueabihf-gcc \
AR=arm-kobo-linux-gnueabihf-ar \
RANLIB=arm-kobo-linux-gnueabihf-ranlib CXX=arm-kobo-linux-gnueabihf-g++ LINK=arm-kobo-linux-gnueabihf-g++ LD=arm-kobo-linux-gnueabihf-ld ARCH=arm CROSS_COMPILE=arm-kobo-linux-gnueabihf- install_override_mode=armelfb_linux_eab make
zsh: command not found:  
LINK libvterm.la
/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/ld.bfd: unrecognised emulation mode: elf_x86_64
Supported emulations: armelf_linux_eabi armelfb_linux_eabi
collect2: error: ld returned 1 exit status
make: *** [Makefile:56: libvterm.la] Error 1
```


[6/22/2022 12:30 PM] szybet
https://www.gnu.org/software/libtool/manual/html_node/Configuring.html

{Embed}
https://www.gnu.org/software/libtool/manual/html_node/Configuring.html
Configuring (Libtool)
Configuring (Libtool)


[6/22/2022 12:30 PM] szybet
this doesnt help


[6/22/2022 12:39 PM] szybet
also im waiting for you that to test libevdev on other device, that i can continue developing the power deamon
i know you have exams so no rush, just reminding you


[6/22/2022 1:24 PM] ninuje
rM uses fingerterm FWIW


[6/22/2022 3:41 PM] tux_linux
Oh true I had forgotten
My exams are finished too, no school anymore until September :))))


[6/22/2022 3:42 PM] szybet
how far did you got with this qt terminal? i managed to compile libvterm and now im trying qvterm


[6/22/2022 3:42 PM] szybet
nice


[6/22/2022 3:43 PM] tux_linux
The qt part can compile fine
Libvterm is the problem
Especially with makefile


[6/22/2022 3:44 PM] szybet
i managed to do it


[6/22/2022 3:44 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/compile-libvterm.md

{Embed}
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/compile-libvterm.md
kobo-nia-audio/compile-libvterm.md at main · Szybet/kobo-nia-audio
Kobo nia ereader with audio added. Contribute to Szybet/kobo-nia-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-nia-audio-9FB0F


[6/22/2022 3:44 PM] szybet
2.5h ;v


[6/22/2022 3:44 PM] szybet
well, how?
`/tmp/sff/qvterm/region.hpp:2:10: fatal error: QPoint: No such file or directory`


[6/22/2022 3:45 PM] szybet
im trying with something like INCLUDE_DIRECTORIES in cmake


[6/22/2022 3:45 PM] tux_linux
Missing Qt include path


[6/22/2022 3:45 PM] tux_linux
Look in qt-bin directory or something


[6/22/2022 3:45 PM] tux_linux
Great


[6/22/2022 3:45 PM] szybet
i know


[6/22/2022 3:45 PM] szybet
how to include it?


[6/22/2022 3:46 PM] tux_linux
CPLUS_INCLUDE_PATH ?


[6/22/2022 3:47 PM] szybet
doesnt work


[6/22/2022 3:52 PM] tux_linux
Not really surprising


[6/22/2022 3:52 PM] tux_linux
What path did you put?


[6/22/2022 3:53 PM] szybet
```
% echo $CPLUS_INCLUDE_PATH
/mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/
15:52 szybet@hyperbookszyb /tmp/sff/qvterm
% ls /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/
bin  doc  include  lib  mkspecs  plugins  qml
15:52 szybet@hyperbookszyb /tmp/sff/qvterm
%
```


[6/22/2022 3:53 PM] szybet
i also tryied /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/lib/


[6/22/2022 3:53 PM] szybet
still the same


[6/22/2022 3:53 PM] tux_linux
It won't work


[6/22/2022 3:53 PM] tux_linux
Is there an include dir somewhere in there?


[6/22/2022 3:53 PM] szybet
cmakelist?


[6/22/2022 3:53 PM] szybet
i tryied adding INCLUDE_DIRECTORIES("/mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/")


[6/22/2022 3:54 PM] szybet
thats the whole cmake
```cmake
add_library(qvterm SHARED
    highlight.cpp
    region.cpp
    scrollback.cpp
    qvterm.cpp)
target_link_libraries(qvterm libvterm::libvterm Qt5::Widgets util)
target_include_directories(qvterm PUBLIC
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>)
```


[6/22/2022 3:54 PM] tux_linux
/home/nicolas/qt-bin/qt-linux-5.15.2-kobo/include


[6/22/2022 3:56 PM] tux_linux
Try to include <QtCore/QPoint> if not found


[6/22/2022 3:56 PM] szybet
for CPLUS_INCLUDE_PATH doesnt work


[6/22/2022 3:57 PM] tux_linux
Put the env directly before the commands


[6/22/2022 3:57 PM] tux_linux
env CPLUS_INCLUDE_PATH=blahblah command


[6/22/2022 3:58 PM] tux_linux
So it can't ignore you


[6/22/2022 3:58 PM] tux_linux
(hopefully)


[6/22/2022 3:58 PM] szybet
this went through? i will change more


[6/22/2022 3:58 PM] tux_linux
Good


[6/22/2022 3:59 PM] szybet
`/tmp/sff/qvterm/region.hpp:12:10: fatal error: vterm.h: No such file or directory`


[6/22/2022 3:59 PM] szybet
what is this file


[6/22/2022 4:03 PM] szybet
`cp ../../libvterm/include/* .` for some reason


[6/22/2022 4:03 PM] szybet
QAbstractScrollArea is not in QtCore


[6/22/2022 4:03 PM] szybet
how do i find it


[6/22/2022 4:06 PM] tux_linux
`/home/nicolas/qt-bin/qt-linux-5.15.2-kobo/include/QtWidgets/QScrollArea`?


[6/22/2022 4:09 PM] tux_linux
This also compiles fine, and would be the best of the two since it's a widget and it would be easier to embed an on-screen keyboard, but I found no documentation at all, no examples, so I don't know how to use it https://github.com/jacob3141/qtterminalwidget

{Embed}
https://github.com/jacob3141/qtterminalwidget
GitHub - jacob3141/qtterminalwidget: A true terminal widget for Qt.
A true terminal widget for Qt. Contribute to jacob3141/qtterminalwidget development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qtterminalwidget-55B9C


[6/22/2022 4:10 PM] szybet
8 years old


[6/22/2022 4:10 PM] szybet
qt 4


[6/22/2022 4:10 PM] szybet
no...


[6/22/2022 4:10 PM] tux_linux
don't worry
it compiles fine


[6/22/2022 4:10 PM] tux_linux
with 97 warnings


[6/22/2022 4:10 PM] tux_linux
usually, warnings are not to worry about to obtain basic functionnality (at least in Qt)


[6/22/2022 4:11 PM] szybet
this one will compile too


[6/22/2022 4:11 PM] szybet
just wait


[6/22/2022 4:11 PM] szybet
i will figure this out


[6/22/2022 4:11 PM] tux_linux
thanks


[6/22/2022 4:12 PM] tux_linux
then we will have to add an embdedded keyboard to it


[6/22/2022 4:12 PM] szybet
look at it from the bright side


[6/22/2022 4:12 PM] szybet
it will propably work with a psychical keyboard oob


[6/22/2022 4:12 PM] tux_linux
maybe


[6/22/2022 4:13 PM] tux_linux
that is, if you have a physical keyboard plugged in


[6/22/2022 4:13 PM] tux_linux
which I don't 😉


[6/22/2022 4:13 PM] szybet
i plan to make one for the nia


[6/22/2022 4:13 PM] szybet
but i didn't found enough small key caps for it


[6/22/2022 4:21 PM] tux_linux
maybe that, as NiLuJe suggested https://github.com/dixonary/fingerterm-reMarkable.git

{Embed}
https://github.com/dixonary/fingerterm-reMarkable.git
GitHub - dixonary/fingerterm-reMarkable: A build of fingerterm, mod...
A build of fingerterm, modified to draw more nicely on the reMarkable ePaper device. - GitHub - dixonary/fingerterm-reMarkable: A build of fingerterm, modified to draw more nicely on the reMarkable...
/mnt/data/projects/git/conversations/media/fingerterm-reMarkable-6F331


[6/22/2022 4:23 PM] tux_linux
oh. of course
```
../fingerterm-reMarkable/textrender.cpp:21:10: fatal error: epframebuffer.h: No such file or directory
   21 | #include <epframebuffer.h>
      |          ^~~~~~~~~~~~~~~~~
compilation terminated.
make: *** [Makefile:522: textrender.o] Error 1
10:22:52: The process "/usr/bin/make" exited with code 2.
Error while building/deploying project fingerterm (kit: Desktop)
When executing step "Make"
10:22:52: Elapsed time: 00:10.
```


[6/22/2022 4:23 PM] szybet
```
[ 20%] Linking CXX shared library libqvterm.so
/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: cannot find -lvterm
/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: cannot find -lQt5Widgets
collect2: error: ld returned 1 exit status
make[2]: *** [CMakeFiles/qvterm.dir/build.make:145: libqvterm.so] Error 1
make[1]: *** [CMakeFiles/Makefile2:83: CMakeFiles/qvterm.dir/all] Error 2
make: *** [Makefile:91: all] Error 2
```


[6/22/2022 4:23 PM] tux_linux
aaah greaaaat


[6/22/2022 4:23 PM] szybet
i cant remember, how do i point where ld is watching for libraries?


[6/22/2022 4:24 PM] tux_linux
`LD_LIBRARY_PATH`? Not sure it will solve your problem though


[6/22/2022 4:31 PM] szybet
```
% make
[ 20%] Linking CXX shared library libqvterm.so
[100%] Built target qvterm
```
every day my hate to c goes higher


[6/22/2022 4:31 PM] tux_linux
no way


[6/22/2022 4:31 PM] tux_linux
does it... work?


[6/22/2022 4:35 PM] szybet
well libvterm and qvterm compiled


[6/22/2022 4:35 PM] szybet
sff has new problems now


[6/22/2022 4:35 PM] szybet
```
% cmake . -DCMAKE_TOOLCHAIN_FILE=kobo.cmake
CMake Error at /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Widgets/Qt5WidgetsConfig.cmake:14 (message):
  The imported target "Qt5::Widgets" references the file

     "/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/include/QtWidgets"

  but this file does not exist.  Possible reasons include:

  * The file was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and contained

     "/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Widgets/Qt5WidgetsConfig.cmake"

  but not all the files it references.

Call Stack (most recent call first):
  /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Widgets/Qt5WidgetsConfig.cmake:61 (_qt5_Widgets_check_file_exists)
  CMakeLists.txt:42 (find_package)


-- Configuring incomplete, errors occurred!
See also "/mnt/HDD/Project/compile/sff/CMakeFiles/CMakeOutput.log".
See also "/mnt/HDD/Project/compile/sff/CMakeFiles/CMakeError.log".
```


[6/22/2022 4:35 PM] szybet
this didn't showed previously


[6/22/2022 4:44 PM] tux_linux
no clue on that one


[6/22/2022 4:44 PM] szybet
i deleted the line


[6/22/2022 4:44 PM] szybet
and it will be fine


[6/22/2022 4:44 PM] szybet
😎


[6/22/2022 4:45 PM] tux_linux
i want to believe you


[6/22/2022 4:47 PM] tux_linux
Otherwise there is... that
But it is (and seems to be) a pain to compile
https://github.com/lxqt/qterminal


[6/22/2022 4:48 PM] tux_linux
The strange thing is that this compiled but at runtime was missing some QML library https://github.com/Swordfish90/cool-retro-term


[6/22/2022 4:49 PM] szybet
its too heavy


[6/22/2022 4:49 PM] szybet
its to to to heavy


[6/22/2022 4:49 PM] tux_linux
That one is promising https://github.com/Swordfish90/qmltermwidget
But we have to learn QML

{Embed}
https://github.com/Swordfish90/qmltermwidget
GitHub - Swordfish90/qmltermwidget: QML port of qtermwidget
QML port of qtermwidget. Contribute to Swordfish90/qmltermwidget development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qmltermwidget-64C3E


[6/22/2022 4:50 PM] szybet
i will not


[6/22/2022 4:52 PM] tux_linux
well, there is a test application
maybe we can work it out


[6/22/2022 4:52 PM] szybet
```
% make        
Consolidate compiler generated dependencies of target sff
[ 50%] Linking CXX executable ../bin/sff
/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: CMakeFiles/sff.dir/main.cpp.o: undefined reference to symbol '_ZN9QShortcutD1Ev@@Qt_5'
/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/../arm-kobo-linux-gnueabihf/sysroot/lib/libQt5Widgets.so.5: error adding symbols: DSO missing from command line
collect2: error: ld returned 1 exit status
make[2]: *** [app/CMakeFiles/sff.dir/build.make:97: bin/sff] Error 1
make[1]: *** [CMakeFiles/Makefile2:116: app/CMakeFiles/sff.dir/all] Error 2
make: *** [Makefile:91: all] Error 2

```


[6/22/2022 4:52 PM] szybet
what the fuck


[6/22/2022 4:53 PM] tux_linux
https://stackoverflow.com/a/19905704 ?

{Embed}
https://stackoverflow.com/a/19905704
libpthread.so.0: error adding symbols: DSO missing from command line
When I'm compiling openvswitch-1.5.0, I've encountered the following compile error:

 gcc -Wstrict-prototypes -Wall -Wno-sign-compare -Wpointer-arith
     -Wdeclaration-after-statement -Wformat-sec...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/22/2022 4:53 PM] tux_linux
Even more gcc nonsense


[6/22/2022 4:54 PM] szybet
hehe


[6/22/2022 4:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E240C.png


[6/22/2022 4:55 PM] szybet
hehe...


[6/22/2022 4:55 PM] tux_linux
but... is it going to compile at all?


[6/22/2022 4:55 PM] szybet
its linking


[6/22/2022 4:55 PM] szybet
thats the last step


[6/22/2022 4:55 PM] tux_linux
yeah, well, link


[6/22/2022 5:05 PM] tux_linux
does it work?


[6/22/2022 5:05 PM] szybet
i resolved this


[6/22/2022 5:05 PM] szybet
but still its here


[6/22/2022 5:05 PM] szybet
there are many solutions to this


[6/22/2022 5:05 PM] szybet
so im just trying

{Reactions}
👍 

[6/22/2022 5:06 PM] tux_linux
`make V=1` and maybe just edit the command yourself


[6/22/2022 5:06 PM] szybet
what?


[6/22/2022 5:06 PM] tux_linux
gives verbose output


[6/22/2022 5:07 PM] tux_linux
should also give you the exact command invoked to link the binary


[6/22/2022 5:11 PM] szybet
```
17:11 szybet@hyperbookszyb /mnt/HDD/Project/compile/sff
% make
[  9%] Automatic MOC for target qvterm
[  9%] Built target qvterm_autogen
[ 18%] Building CXX object qvterm/CMakeFiles/qvterm.dir/qvterm_autogen/mocs_compilation.cpp.o
[ 27%] Building CXX object qvterm/CMakeFiles/qvterm.dir/highlight.cpp.o
[ 36%] Building CXX object qvterm/CMakeFiles/qvterm.dir/region.cpp.o
[ 45%] Building CXX object qvterm/CMakeFiles/qvterm.dir/scrollback.cpp.o
[ 54%] Building CXX object qvterm/CMakeFiles/qvterm.dir/qvterm.cpp.o
[ 63%] Linking CXX shared library ../lib/libqvterm.so
[ 63%] Built target qvterm
[ 72%] Automatic MOC for target sff
[ 72%] Built target sff_autogen
[ 81%] Building CXX object app/CMakeFiles/sff.dir/sff_autogen/mocs_compilation.cpp.o
[ 90%] Building CXX object app/CMakeFiles/sff.dir/main.cpp.o
[100%] Linking CXX executable ../bin/sff
[100%] Built target sff
```


[6/22/2022 5:11 PM] szybet
dont ask me


[6/22/2022 5:12 PM] szybet
why it worked


[6/22/2022 5:12 PM] tux_linux
😳


[6/22/2022 5:12 PM] szybet
._.


[6/22/2022 5:12 PM] tux_linux
But the question now is
Does it work on Kobo


[6/22/2022 5:12 PM] tux_linux
Do you have a binary to share?


[6/22/2022 5:12 PM] tux_linux
Please tar cJvf your build dir now


[6/22/2022 5:14 PM] szybet
done


[6/22/2022 5:14 PM] tux_linux
and share it? + binary?


[6/22/2022 5:15 PM] szybet
working on it

{Reactions}
👍 

[6/22/2022 5:16 PM] szybet
https://github.com/Szybet/sff-crosscompilation-hell/raw/main/sff.tar


[6/22/2022 5:16 PM] szybet
i will make the repo in a proper way


[6/22/2022 5:16 PM] szybet
just wait


[6/22/2022 5:16 PM] szybet
for now there is the tar


[6/22/2022 5:18 PM] szybet
done


[6/22/2022 5:18 PM] szybet
i will test it on the kobo too


[6/22/2022 5:19 PM] tux_linux
great
```
kobo:/tmp# LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib:/tmp ./sff
./sff: symbol lookup error: /tmp/libqvterm.so: undefined symbol: _ZTV6QVTerm
kobo:/tmp#
```


[6/22/2022 5:21 PM] szybet
O.o


[6/22/2022 5:22 PM] szybet
libqvterm?


[6/22/2022 5:23 PM] szybet
it compiles fine


[6/22/2022 5:23 PM] tux_linux
who said it would run fine if it compiled fine?


[6/22/2022 5:25 PM] szybet
```
set(USE_SANITIZE NO CACHE BOOL "Enable address sanitization at a 2x performance cost")
if (USE_SANITIZE)
    add_compile_options("$<$<COMPILE_LANGUAGE:CXX>:-fsanitize=address>")
    link_libraries(-fsanitize=address)
endif()
``` this sounds as it could have caused problems


[6/22/2022 5:29 PM] szybet
i got the same


[6/22/2022 5:29 PM] szybet
thing


[6/22/2022 5:29 PM] szybet
hmm crap


[6/22/2022 5:30 PM] szybet
i used neovim version of libvterm


[6/22/2022 5:30 PM] szybet
but there is a never 2.0


[6/22/2022 5:32 PM] szybet
this 2.0 compiled without an issue...


[6/22/2022 5:32 PM] tux_linux
wdym?


[6/22/2022 5:33 PM] szybet
without modyfing makefile


[6/22/2022 5:34 PM] tux_linux
I cloned it on my laptop, no more crazy build errors but this one only:
```
11:32:59: Running steps for project sff...
11:32:59: Running CMake in preparation to build...
11:33:00: Starting: "/usr/bin/cmake" --build /home/nicolas/Development/build-sff-Kobo-Release --target all
[  5%] Creating directories for 'libvterm_vendored'
[ 10%] No download step for 'libvterm_vendored'
[ 15%] No update step for 'libvterm_vendored'
[ 21%] No patch step for 'libvterm_vendored'
[ 26%] No configure step for 'libvterm_vendored'
[ 31%] Performing build step for 'libvterm_vendored'
[ 36%] Performing install step for 'libvterm_vendored'
[ 42%] Completed 'libvterm_vendored'
[ 42%] Built target libvterm_vendored
[ 47%] Automatic MOC for target qvterm
[ 47%] Built target qvterm_autogen
[ 52%] Building CXX object qvterm/CMakeFiles/qvterm.dir/qvterm_autogen/mocs_compilation.cpp.o
[ 57%] Building CXX object qvterm/CMakeFiles/qvterm.dir/highlight.cpp.o
[ 63%] Building CXX object qvterm/CMakeFiles/qvterm.dir/region.cpp.o
[ 68%] Building CXX object qvterm/CMakeFiles/qvterm.dir/scrollback.cpp.o
[ 73%] Building CXX object qvterm/CMakeFiles/qvterm.dir/qvterm.cpp.o
[ 78%] Linking CXX shared library ../lib/libqvterm.so
../root/lib/libvterm.so: file not recognized: file format not recognized
collect2: error: ld returned 1 exit status
gmake[2]: *** [qvterm/CMakeFiles/qvterm.dir/build.make:165: lib/libqvterm.so] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:163: qvterm/CMakeFiles/qvterm.dir/all] Error 2
gmake: *** [Makefile:91: all] Error 2
11:33:08: The process "/usr/bin/cmake" exited with code 2.
Error while building/deploying project sff (kit: Kobo)
The kit Kobo has configuration issues which might be the root cause for this problem.
When executing step "Build"
11:33:08: Elapsed time: 00:09.
```


[6/22/2022 5:35 PM] szybet
build-sff-Kobo-Release?


[6/22/2022 5:35 PM] szybet
show it


[6/22/2022 5:37 PM] tux_linux
Whoops
It compiled libvterm for x86_64
```
Displaying notes found in: .note.gnu.property
  Owner                Data size     Description
  GNU                  0x00000020    NT_GNU_PROPERTY_TYPE_0
      Properties: x86 feature used: x86, XMM
    x86 ISA used: x86-64-baseline
```


[6/22/2022 5:37 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/kobo.cmake


[6/22/2022 5:37 PM] szybet
do it the proper way


[6/22/2022 5:43 PM] tux_linux
```
[nicolas@fedora libvterm]$ make
TBL src/encoding/DECdrawing.tbl
TBL src/encoding/uk.tbl
CC src/encoding.c
CC src/keyboard.c
CC src/mouse.c
CC src/parser.c
CC src/pen.c
CC src/screen.c
CC src/state.c
CC src/unicode.c
src/unicode.c:306:12: warning: 'mk_wcswidth_cjk' defined but not used [-Wunused-function]
 static int mk_wcswidth_cjk(const uint32_t *pwcs, size_t n)
            ^~~~~~~~~~~~~~~
src/unicode.c:215:12: warning: 'mk_wcswidth' defined but not used [-Wunused-function]
 static int mk_wcswidth(const uint32_t *pwcs, size_t n)
            ^~~~~~~~~~~
CC src/vterm.c
LINK libvterm.la
/usr/bin/ld: src/.libs/encoding.o: relocations in generic ELF (EM: 40)
/usr/bin/ld: src/.libs/encoding.o: relocations in generic ELF (EM: 40)
/usr/bin/ld: src/.libs/encoding.o: relocations in generic ELF (EM: 40)
/usr/bin/ld: src/.libs/encoding.o: error adding symbols: file in wrong format
collect2: error: ld returned 1 exit status
make: *** [Makefile:60: libvterm.la] Error 1
```


[6/22/2022 5:43 PM] tux_linux
Probably because the toolchain doesn't have tbl for arm


[6/22/2022 5:43 PM] szybet
libvterm? you need a proper libtool


[6/22/2022 5:43 PM] tux_linux
how?


[6/22/2022 5:45 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/compile-libvterm.md

{Embed}
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/compile-libvterm.md
kobo-nia-audio/compile-libvterm.md at main · Szybet/kobo-nia-audio
Kobo nia ereader with audio added. Contribute to Szybet/kobo-nia-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-nia-audio-9FB0F


[6/22/2022 5:48 PM] tux_linux
still the same problem

{Attachments}
/mnt/data/projects/git/conversations/media/message-54962.txt


[6/22/2022 5:48 PM] tux_linux
oh wait


[6/22/2022 5:48 PM] szybet
did you cleaned the files?


[6/22/2022 5:49 PM] szybet
you compiled for 86 and those files are still there


[6/22/2022 5:54 PM] szybet
```
kobo:/# LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib:$LD_LIBRARY_PATH ./sff
qt.qpa.plugin: Could not find the Qt platform plugin "xcb" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
kobo:/# 

```


[6/22/2022 5:54 PM] szybet
what the fuck


[6/22/2022 5:54 PM] szybet
seafdsfgvdrkjn


[6/22/2022 5:54 PM] szybet
i dont know what i changed that it works


[6/22/2022 5:54 PM] szybet
almost*


[6/22/2022 5:57 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220622_175703-B2E2E.jpg


[6/22/2022 5:57 PM] szybet
sff on the kobo


[6/22/2022 5:58 PM] tux_linux
WHAT


[6/22/2022 5:59 PM] szybet
EXACTLY


[6/22/2022 5:59 PM] tux_linux
Ok, we must find a way to reproducibly compile this


[6/22/2022 5:59 PM] tux_linux
Please share binary and libs so I can enjoy that myself


[6/22/2022 5:59 PM] szybet
😂


[6/22/2022 5:59 PM] szybet
in a minute or two


[6/22/2022 6:01 PM] szybet
pushed the commit


[6/22/2022 6:01 PM] tux_linux
ok


[6/22/2022 6:09 PM] tux_linux
yay
```
[100%] Linking CXX executable ../bin/sff
cd /home/nicolas/Development/sff/build/app && /usr/bin/cmake -E cmake_link_script CMakeFiles/sff.dir/link.txt --verbose=1
/home/nicolas/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-g++ -O2 -g -DNDEBUG CMakeFiles/sff.dir/sff_autogen/mocs_compilation.cpp.o CMakeFiles/sff.dir/main.cpp.o -o ../bin/sff  -Wl,-rpath,/home/nicolas/Development/sff/build/lib:/home/nicolas/Development/sff/build/root/lib:/home/nicolas/qt-bin/qt-linux-5.15.2-kobo/lib ../lib/libqvterm.so ../root/lib/libvterm.so /home/nicolas/qt-bin/qt-linux-5.15.2-kobo/lib/libQt5Widgets.so.5.15.2 /home/nicolas/qt-bin/qt-linux-5.15.2-kobo/lib/libQt5Gui.so.5.15.2 /home/nicolas/qt-bin/qt-linux-5.15.2-kobo/lib/libQt5Core.so.5.15.2 -lutil 
make[2]: Leaving directory '/home/nicolas/Development/sff/build'
[100%] Built target sff
make[1]: Leaving directory '/home/nicolas/Development/sff/build'
/usr/bin/cmake -E cmake_progress_start /home/nicolas/Development/sff/build/CMakeFiles 0
[nicolas@fedora build]$
```


[6/22/2022 6:09 PM] tux_linux
```
[nicolas@fedora build]$ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
  (commit or discard the untracked or modified content in submodules)
    modified:   ../CMakeLists.txt
    modified:   ../ext/libvterm (modified content, untracked content)
    modified:   ../qvterm/qvterm.hpp
    modified:   ../qvterm/region.hpp
    modified:   ../qvterm/scrollback.hpp

```


[6/22/2022 6:09 PM] szybet
im trying it with a psyhical keyboard


[6/22/2022 6:12 PM] tux_linux
yay?

{Attachments}
/mnt/data/projects/git/conversations/media/sff-6FCA8.png


[6/22/2022 6:12 PM] tux_linux
how do i input now


[6/22/2022 6:14 PM] szybet
doesnt work


[6/22/2022 6:15 PM] szybet
adding a cmd argument to execute a command wouldnt be hard


[6/22/2022 6:16 PM] szybet
well im tired now, i need to rest after so much brain damage and cross compiling

{Reactions}
👍 

[6/22/2022 6:17 PM] tux_linux
I will try to work on it


[6/22/2022 6:49 PM] tux_linux
Reproducible cross-compilation working https://github.com/Kobo-InkBox/sff

{Embed}
https://github.com/Kobo-InkBox/sff
GitHub - Kobo-InkBox/sff: A terminal, using libvterm and Qt, with c...
A terminal, using libvterm and Qt, with cross-compilation support for InkBox OS - GitHub - Kobo-InkBox/sff: A terminal, using libvterm and Qt, with cross-compilation support for InkBox OS
/mnt/data/projects/git/conversations/media/sff-06D07


[6/22/2022 6:56 PM] szybet
nice


[6/22/2022 6:56 PM] szybet
i want some credits


[6/22/2022 6:56 PM] tux_linux
sure will do


[6/22/2022 6:56 PM] szybet
in the future, yea


[6/22/2022 6:56 PM] tux_linux
what moron would put a shell binary in `/usr/bin/sh`
```
nicolas@gentoo-ryzen ~/Documents/inkbox-git/sff/ext/libvterm $ git add -p
diff --git a/ext/libvterm/libtool b/ext/libvterm/libtool
index 78807b0..4a33455 100755
--- a/ext/libvterm/libtool
+++ b/ext/libvterm/libtool
@@ -1,4 +1,4 @@
-#!/usr/bin/sh
+#!/bin/bash
 # Generated automatically by config.status (libtool) 2.4.6
 # Libtool was configured on host buildvm-x86-04.iad2.fedoraproject.org:
 # NOTE: Changes made to this file will be lost: look at ltmain.sh.
(1/1) Stage this hunk [y,n,q,a,d,e,?]? y

nicolas@gentoo-ryzen ~/Documents/inkbox-git/sff/ext/libvterm $
```


[6/22/2022 6:57 PM] szybet
😆


[6/22/2022 6:59 PM] tux_linux
Full build log that works now

{Attachments}
/mnt/data/projects/git/conversations/media/message-83C4C.txt


[6/22/2022 7:00 PM] szybet
what is this error


[6/22/2022 7:00 PM] szybet
why does it work after that


[6/22/2022 7:00 PM] tux_linux
Because the link step always used gcc and not `arm-kobo-linux-gnueabihf-gcc`


[6/22/2022 7:01 PM] tux_linux
So I did this
```
nicolas@gentoo-ryzen ~/Documents/inkbox-git/sff $ cat ext/libvterm/build.sh 
#!/bin/sh

if [ "${1}" != "install" ]; then
        make
        printf "==== NOTICE: You can safely ignore the above error, it will be fixed shortly ====\n"
        # You are not making my life easy, dear libtool...
        arm-kobo-linux-gnueabihf-gcc -shared  -fPIC -DPIC  src/.libs/encoding.o src/.libs/keyboard.o src/.libs/mouse.o src/.libs/parser.o src/.libs/pen.o src/.libs/screen.o src/.libs/state.o src/.libs/unicode.o src/.libs/vterm.o      -Wl,-soname -Wl,libvterm.so.0 -o .libs/libvterm.so.0.0.3
else
        pushd .libs/
        ln -sf libvterm.so.0.0.3 libvterm.so
        popd
        mkdir -p ../../build/root/lib
        cp .libs/* ../../build/root/lib
fi
```


[6/22/2022 7:01 PM] tux_linux
And changed `CMakeLists.txt`


[6/22/2022 7:07 PM] szybet
you didnt edited libtool properly


[6/22/2022 7:07 PM] szybet
;_ ;


[6/22/2022 7:12 PM] tux_linux
I did


[6/22/2022 7:12 PM] szybet
no


[6/22/2022 7:12 PM] tux_linux
But it just didn't want to


[6/22/2022 7:12 PM] szybet
`CC="gcc" to CC="arm-kobo-linux-gnueabihf-gcc"`


[6/22/2022 7:12 PM] szybet
hm?


[6/22/2022 7:12 PM] szybet
hmmm?


[6/22/2022 7:26 PM] tux_linux
yeah ok
https://github.com/Kobo-InkBox/sff/commit/90c2e85d9fb7c84b57aaef88341b9f2e36275b21


[6/22/2022 7:28 PM] szybet
looks good

{Reactions}
👍 

[6/22/2022 7:30 PM] tux_linux
Poor guy is going to look at this fork at some point in time and ask why on earth we chose his project and not another one


[6/22/2022 7:30 PM] szybet
idk if your libtool on gentoo will work with my arch michine for example


[6/22/2022 7:30 PM] szybet
i will test that soon


[6/22/2022 7:30 PM] szybet
exactly ;p


[6/22/2022 7:30 PM] tux_linux
it works on fedora + gentoo


[6/22/2022 7:58 PM] szybet
soo can you test libevdev?


[6/22/2022 8:06 PM] tux_linux
where is it again?


[6/22/2022 8:06 PM] szybet
here


[6/22/2022 8:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3D434.png


[6/22/2022 8:07 PM] szybet
discord has advanced and fast search options


[6/22/2022 8:08 PM] tux_linux
```
kobo:/tmp# LD_LIBRARY_PATH=/tmp ./inkbox-power-deamon 
Input device name: "gpio-keys"
Input device ID: bus 0x19 vendor 0x1 product 0x1
This device does not look like a mouse
kobo:/tmp# 
```


[6/22/2022 8:08 PM] tux_linux
Don't forget that on Kindle you have event2 as touch input device


[6/22/2022 8:09 PM] szybet
first i will make it working on kobo devices


[6/22/2022 8:09 PM] szybet
then some other ones


[6/22/2022 8:10 PM] szybet
ok thanks, i will continue developing it


[6/22/2022 8:10 PM] tux_linux
hm yeah mixed up button input and touch input


[6/22/2022 8:10 PM] szybet
only a test


[6/22/2022 8:10 PM] tux_linux
if you do idle_sleep, support the kindle
it's just a matter of changing event1 to event2 and the events should already match


[6/22/2022 8:11 PM] szybet
i know


[6/22/2022 8:11 PM] tux_linux
some older devices don't have multi-touch
so you only have `ABS_X` and `ABS_Y` instead of `ABS_MT_X` and `ABS_MT_Y` or something


[6/22/2022 8:11 PM] tux_linux
maybe you can get away with `BTN_TOUCH` on all devices


[6/22/2022 8:12 PM] szybet
i think i will just look for events from this device


[6/22/2022 8:13 PM] tux_linux
Yea, it should work too


[6/22/2022 8:33 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220622_183235433.MP-889FC.jpg


[6/22/2022 8:33 PM] tux_linux
```
SHELL=/tmp/script.sh QT_QPA_PLATFORM=kobo LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib:/tmp ./sff
```


[6/22/2022 8:33 PM] szybet
a video?


[6/22/2022 8:33 PM] tux_linux
it refreshes too much


[6/22/2022 8:33 PM] tux_linux
that is all you need to know


[6/22/2022 8:33 PM] szybet
crap


[6/22/2022 8:34 PM] szybet
what about normal usage?


[6/22/2022 8:34 PM] szybet
htop is htop


[6/22/2022 8:34 PM] tux_linux
at least it doesn't refresh for small writes to the screen


[6/22/2022 8:35 PM] szybet
well, video?


[6/22/2022 8:35 PM] szybet
i want to know how it is


[6/22/2022 8:37 PM] tux_linux
https://photos.app.goo.gl/i11s3oSoeykd1f4s5

{Embed}
https://photos.app.goo.gl/i11s3oSoeykd1f4s5
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/KK8RSWWpbeKCudUGKP6fhtKC5yARCF9c-6Ub6rghy1-17BE9


[6/22/2022 8:38 PM] tux_linux
when it reaches the bottom of the screen, it refreshes continuously


[6/22/2022 8:38 PM] tux_linux
(because everything is updated at once)


[6/22/2022 8:39 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220622_183857607-5694D.jpg


[6/22/2022 8:39 PM] tux_linux
vi seems to work


[6/22/2022 8:39 PM] tux_linux
Probably that changing the terminal to black on white would help


[6/22/2022 8:39 PM] szybet
its not bad


[6/22/2022 8:40 PM] szybet
thats normal. perfectly we would need a scroll bar and `clear` at the bottom


[6/22/2022 8:40 PM] szybet
yes


[6/22/2022 8:40 PM] tux_linux
i just need to find how


[6/22/2022 8:40 PM] tux_linux
hehe


[6/22/2022 8:41 PM] szybet
i would like to stick with it, other qt terminals wont be better anyway


[6/22/2022 8:41 PM] tux_linux
yeah it's definitely the best we can get


[6/22/2022 8:41 PM] tux_linux
Without losing any further our mental sanity

{Reactions}
🥴 

[6/22/2022 8:45 PM] szybet
about the keyboard: lets make it properly
only the keys that are needed, and a fn key to show the other keys ( just as it is in sanki )


[6/22/2022 8:45 PM] szybet
please?


[6/22/2022 8:46 PM] tux_linux
you can make it


[6/22/2022 8:46 PM] tux_linux
it's a pain to do


[6/22/2022 8:46 PM] tux_linux
so I delegate that to you with great pleasure


[6/22/2022 8:46 PM] szybet
litterally only changing button text and get the text when its pressed


[6/22/2022 8:46 PM] tux_linux
yeah, but it gets painful when you have 50+ other buttons to do


[6/22/2022 8:47 PM] szybet
sure, but i have other things to write, i hope this terminal doesnt have too much priority


[6/22/2022 8:47 PM] szybet
well


[6/22/2022 8:47 PM] szybet
¯\_(ツ)_/¯


[6/22/2022 8:47 PM] tux_linux
because, that. https://github.com/Kobo-InkBox/inkbox/blob/master/virtualkeyboard.cpp


[6/22/2022 8:47 PM] tux_linux
We can just copy it too


[6/22/2022 8:47 PM] tux_linux
it's not that bad


[6/22/2022 8:48 PM] tux_linux
and add ctrl functions


[6/22/2022 8:48 PM] tux_linux
it doesn't
but it is mighty cool to have a qt terminal
I'd never thought we'd find one


[6/22/2022 8:48 PM] szybet
we can copy this too:
https://github.com/Szybet/sanki/blob/master/components/keyboard.cpp


[6/22/2022 8:48 PM] tux_linux
how does it look?


[6/22/2022 8:48 PM] szybet
bad


[6/22/2022 8:49 PM] tux_linux
mine looks bad too?


[6/22/2022 8:49 PM] szybet
but it works, and is comfortable


[6/22/2022 8:49 PM] szybet
and its made from ground up for being half the screen


[6/22/2022 8:50 PM] tux_linux
well, I can make it too
It will be at the bottom of the screen and take maximum space available


[6/22/2022 9:10 PM] szybet
armv7l-linux-musleabihf-cross cpp is on version 10?


[6/22/2022 9:10 PM] szybet
or im reading something wrong


[6/22/2022 9:10 PM] tux_linux
Yeah?


[6/22/2022 9:10 PM] szybet
crap


[6/22/2022 9:10 PM] szybet
cant we get eassly something newer?


[6/22/2022 9:10 PM] szybet
https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf

{Embed}
https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf
std::string formatting like sprintf
I have to format std::string with sprintf and send it into file stream. How can I do this?
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/22/2022 9:10 PM] szybet
:(


[6/22/2022 9:10 PM] tux_linux
Why?


[6/22/2022 9:11 PM] tux_linux
https://musl.cc

{Embed}
https://musl.cc/
musl libc toolchains | static cross/native toolchains
musl.cc provides static cross- and native- musl-based toolchains for Linux, Windows, and macOS, targeting architectures like ARM, MIPS, PowerPC, RISC-V, S/390, and more.


[6/22/2022 9:11 PM] szybet
1 i would prefer to not learn old cpp
2 format yea


[6/22/2022 9:11 PM] tux_linux
You can't say that gcc10 is old


[6/22/2022 9:12 PM] szybet
there is 20 out there


[6/22/2022 9:12 PM] szybet
https://musl.cc/#binaries

{Embed}
https://musl.cc/
musl libc toolchains | static cross/native toolchains
musl.cc provides static cross- and native- musl-based toolchains for Linux, Windows, and macOS, targeting architectures like ARM, MIPS, PowerPC, RISC-V, S/390, and more.


[6/22/2022 9:12 PM] tux_linux
https://musl.cc/armv7l-linux-musleabihf-cross.tgz


[6/22/2022 9:12 PM] szybet
cool that the didnt writed the version


[6/22/2022 9:15 PM] szybet
its only 11?


[6/22/2022 9:15 PM] szybet
where is 20


[6/22/2022 9:15 PM] tux_linux
20 doesn't exist?


[6/22/2022 9:15 PM] tux_linux
Current GCC version is 11


[6/22/2022 9:16 PM] szybet
in other words


[6/22/2022 9:16 PM] szybet
does it support cpp 20 standard?


[6/22/2022 9:16 PM] tux_linux
Probably?


[6/22/2022 9:18 PM] szybet
this one is cpp14


[6/22/2022 9:18 PM] szybet
o will test the 11 one


[6/22/2022 9:20 PM] szybet
its cpp17


[6/22/2022 9:20 PM] szybet
crap


[6/22/2022 9:20 PM] szybet
¯\_(ツ)_/¯


[6/22/2022 10:26 PM] ninuje
https://gcc.gnu.org/projects/cxx-status.html#cxx20


[6/22/2022 10:26 PM] ninuje
default standard != supported standard


[6/22/2022 11:37 PM] szybet
becouse i want to do this properly i will ask


[6/22/2022 11:37 PM] szybet
how do i communicate between threads in cpp? i could do mutex variables in an array like sending messages becouse im familiar with them, i used them in rust


[6/22/2022 11:38 PM] szybet
but its a bit hacky and there is propably a better solution


[6/22/2022 11:39 PM] tux_linux
https://stackoverflow.com/a/20596471/14164574 ?

{Embed}
https://stackoverflow.com/a/20596471/14164574
C++ communication between threads
I have a couple classes that each open a different program in different threads and do/hold information about it using CreateProcess (if there's a more C++ oriented way to do this let me know-- I l...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/22/2022 11:40 PM] szybet
and this is propably a bad way to do this


[6/22/2022 11:40 PM] tux_linux
I'm not a cpp expert


[6/22/2022 11:40 PM] tux_linux
Qt is the best I can do...


[6/22/2022 11:40 PM] szybet
there are many ways to do this


[6/22/2022 11:40 PM] szybet
and i dont see a one proper way to


[6/22/2022 11:41 PM] szybet
qt is weird as for multi threading


[6/22/2022 11:41 PM] szybet
¯\_(ツ)_/¯


[6/22/2022 11:41 PM] tux_linux
qt is weird in too many ways


[6/22/2022 11:42 PM] tux_linux
Might be the strangest and most buggy GUI framework I've worked with yet (though the hardware isn't helping any here)
But it's also the best 😉


[6/22/2022 11:43 PM] szybet
its the most easiest and most customizable for sure


[6/23/2022 4:54 AM] tux_linux
Great

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220623_025340271-AB39E.jpg


[6/23/2022 6:00 AM] szybet
How hard was it?


[6/23/2022 6:00 AM] szybet
And is the flickering better?


[6/23/2022 6:01 AM] tux_linux
I did not make the keyboard yet


[6/23/2022 6:01 AM] tux_linux
No


[6/23/2022 6:01 AM] tux_linux
It's already looking it's gonna be a pain


[6/23/2022 6:01 AM] szybet
It Qt right?


[6/23/2022 6:01 AM] tux_linux
Weird Qt ™️


[6/23/2022 6:01 AM] tux_linux
https://github.com/Kobo-InkBox/sff/commit/8d169ff3662f20e60ebfb203e2693c73124de3f9

{Embed}
https://github.com/Kobo-InkBox/sff/commit/8d169ff3662f20e60ebfb203e2693c73124de3f9
QVTerm: Set eInk-friendly terminal colors · Kobo-InkBox/sff@8d169ff
/mnt/data/projects/git/conversations/media/8d169ff3662f20e60ebfb203e2693c73124de3f9-E84FB


[6/23/2022 6:02 AM] szybet
Cant you make it into ui files?


[6/23/2022 6:03 AM] szybet
Doesnt seem bad

{Reactions}
👍 

[6/23/2022 6:03 AM] tux_linux
All you've got to work with is that
https://github.com/Kobo-InkBox/sff/blob/master/app/main.cpp
I barely got it showing a button, but either it completely printed over the term widget or it was the term widget was over it in a tiny rectangle at the top left of the screen


[6/23/2022 6:04 AM] szybet
What is qvterm?


[6/23/2022 6:04 AM] szybet
Widget?


[6/23/2022 6:04 AM] szybet
Window?


[6/23/2022 6:05 AM] tux_linux
Some middleware between libvterm and Qt


[6/23/2022 6:05 AM] tux_linux
Seems to be a strange widget


[6/23/2022 6:05 AM] szybet
It needs a class i qt


[6/23/2022 6:05 AM] szybet
Then changing it resolutuon is... Pretty straight forward?


[6/23/2022 6:06 AM] tux_linux
?


[6/23/2022 6:06 AM] szybet
Widgets resolution


[6/23/2022 6:06 AM] tux_linux
Will it work for every device?


[6/23/2022 6:06 AM] tux_linux
It's not fixed size?


[6/23/2022 6:11 AM] tux_linux
I added you to the repo, you can push to it without creating a fork
Please test your code before committing


[6/23/2022 6:14 AM] szybet
We can calculate the size, just as for general dialog :p


[6/23/2022 6:14 AM] szybet
Its the easiest way to do this


[6/23/2022 6:14 AM] tux_linux
Prove your point


[6/23/2022 6:14 AM] szybet
Nice thanks

{Reactions}
👍 

[6/23/2022 6:15 AM] szybet
Well today, later

{Reactions}
👍 

[6/23/2022 6:15 AM] szybet
Did you looked in the code and know why psychical keyboard is not working?


[6/23/2022 6:15 AM] tux_linux
Physical keyboard works on desktop


[6/23/2022 6:15 AM] tux_linux
I don't care about physical keyboard on an ereader


[6/23/2022 6:16 AM] tux_linux
I care about a virtual keyboard


[6/23/2022 6:19 AM] tux_linux
I will try to work on home page with epubtool on my side


[6/23/2022 6:21 AM] szybet
I care, can many processes use libevdev for a single device?


[6/23/2022 6:21 AM] tux_linux
I think?


[6/23/2022 6:21 AM] szybet
Well good then


[6/23/2022 6:30 AM] tux_linux
will also find that save icon


[6/23/2022 6:39 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/2-A6F97.png
/mnt/data/projects/git/conversations/media/1-2DA4B.png


[6/23/2022 6:42 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/9e7edc8d53610e2e184a13b00f1fcbf7b21431bd

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/9e7edc8d53610e2e184a13b00f1fcbf7b21431bd
apps.cpp: Change editUserAppsBtn icon while in 'Edit' mode · Kobo-I...
/mnt/data/projects/git/conversations/media/9e7edc8d53610e2e184a13b00f1fcbf7b21431bd-95401


[6/23/2022 6:50 AM] szybet
I forgot about that


[6/23/2022 6:50 AM] szybet
Well, good

{Reactions}
👍 

[6/23/2022 6:50 AM] szybet
So i will use mutex enums and you want complain about it?


[6/23/2022 6:52 AM] tux_linux
Maybe there is a library that can leverage this work?


[6/23/2022 6:52 AM] tux_linux
(lightweight, I mean)


[6/23/2022 6:53 AM] szybet
I didn't found one


[6/23/2022 6:53 AM] szybet
Also, a **good** library


[6/23/2022 6:55 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/req-3DABE.png


[6/23/2022 6:56 AM] szybet
Not really needed


[6/23/2022 6:56 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/74f1d58f0ba1b69bbf057538cf2f88372659fc91

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/74f1d58f0ba1b69bbf057538cf2f88372659fc91
userapps.cpp: Write 'None' if no required feature found · Kobo-InkB...
/mnt/data/projects/git/conversations/media/74f1d58f0ba1b69bbf057538cf2f88372659fc91-348DA


[6/23/2022 6:56 AM] szybet
But why not


[6/23/2022 6:56 AM] tux_linux
If you think doing it your way is sane, I'm fine with it


[6/23/2022 6:57 AM] tux_linux
If not, find another way


[6/23/2022 6:57 AM] szybet
Ideally i would like pipelines or smth


[6/23/2022 6:57 AM] szybet
But its overkill


[6/23/2022 6:57 AM] szybet
So mutexes are fine


[6/23/2022 6:58 AM] szybet
Good, though making it with isEmpty would be simpler


[6/23/2022 6:58 AM] tux_linux
I'm not very JSON-minded
so yeah


[6/23/2022 6:59 AM] tux_linux
didn't think of it


[6/23/2022 6:59 AM] szybet
Its fine

{Reactions}
👍 

[6/23/2022 7:00 AM] tux_linux
I will now merge userapps into master


[6/23/2022 7:01 AM] szybet
Nice


[6/23/2022 4:30 PM] tux_linux
4 books is enough? (per page)

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AACEB.png


[6/23/2022 4:36 PM] szybet
Why not do this dynamically?


[6/23/2022 4:37 PM] szybet
The nia can have 6 but the mini can have 3


[6/23/2022 4:37 PM] tux_linux
Because it will always be 4 buttons?


[6/23/2022 4:37 PM] szybet
Also dont waste space


[6/23/2022 4:37 PM] tux_linux
And how do you handle the mess of changing pages with different number of books per page per device?


[6/23/2022 4:38 PM] tux_linux
It will be a matter of setText on them, but I don't see a mentally-sane way to do this


[6/23/2022 4:38 PM] szybet
What?


[6/23/2022 4:38 PM] tux_linux
Say the Nia has 6 books per page


[6/23/2022 4:38 PM] tux_linux
And the Mini 3


[6/23/2022 4:38 PM] szybet
With a next page button? I dont understand


[6/23/2022 4:39 PM] tux_linux
there's no way to embed that epubtool into qt to avoid forking a new process?


[6/23/2022 4:39 PM] szybet
Whats the problem?


[6/23/2022 4:39 PM] tux_linux
No


[6/23/2022 4:40 PM] tux_linux
But it's another problem


[6/23/2022 4:40 PM] szybet
Explain it properly


[6/23/2022 4:40 PM] szybet
And lets make it properly


[6/23/2022 4:40 PM] tux_linux
I think I will follow your suggestion on different number of books/page but if it's too hard, will stick to a fixed number


[6/23/2022 4:41 PM] szybet
Explain the problem


[6/23/2022 4:41 PM] tux_linux
The thing is that launching epubtool 4 or 6 times is not going to be performance-friendly


[6/23/2022 4:41 PM] szybet
Its obvious for me to make it dynamically that it looks good on every device


[6/23/2022 4:42 PM] tux_linux
You should see how slow shell scripts are executed on older devices
It's literally 4 commands/s and not more


[6/23/2022 4:43 PM] tux_linux
Maybe there's a way to pass a list of books to epubtool?


[6/23/2022 4:43 PM] tux_linux
but then I'll have problems with the icons
so ... nvm


[6/23/2022 4:48 PM] szybet
Its obvious for me to make it dynamically that it looks good on every device


[6/23/2022 4:48 PM] szybet
Epubtool that i have written? We can make it launch one time for every book


[6/23/2022 4:48 PM] szybet
Also you launch it once after you add a book, so whats the problem


[6/23/2022 4:48 PM] szybet
One time for all books*


[6/23/2022 4:49 PM] tux_linux
yeah but then you extract every icon to ram


[6/23/2022 4:49 PM] tux_linux
which is probably not good


[6/23/2022 4:49 PM] szybet
Why to RAM?


[6/23/2022 4:49 PM] szybet
No...


[6/23/2022 4:49 PM] szybet
Dont do that


[6/23/2022 4:49 PM] tux_linux
hmm


[6/23/2022 4:49 PM] szybet
I have 70+ books that i store on the nia


[6/23/2022 4:49 PM] tux_linux
`/data/onboard/.thumbnails`?


[6/23/2022 4:49 PM] szybet
How do you want to handle that


[6/23/2022 4:50 PM] szybet
Maybe? Yes? Its better


[6/23/2022 4:50 PM] tux_linux
I was planning to only get 4-6 icons at once


[6/23/2022 4:50 PM] tux_linux
but it will eat your storage space


[6/23/2022 4:50 PM] tux_linux
we should also `convert` them (with imagemagick), but that is not going to be great for performance


[6/23/2022 4:50 PM] szybet
I have 11GB of storage and 255 MB of ram


[6/23/2022 4:50 PM] tux_linux
though displaying every icon in full size then scaling it is not good either


[6/23/2022 4:51 PM] szybet
Whatever it will be faster


[6/23/2022 4:51 PM] szybet
scale images and then save them


[6/23/2022 4:51 PM] tux_linux
oh no


[6/23/2022 4:51 PM] tux_linux
oh i think you can provide one input to convert and it will output to the same file


[6/23/2022 4:52 PM] tux_linux
so that's ok


[6/23/2022 4:52 PM] szybet
It will kill the sd card if you will extract 6 icons every time i switch to main menu


[6/23/2022 4:52 PM] tux_linux
(I do it for Gutenberg sync)


[6/23/2022 4:52 PM] tux_linux
I meant extract 6 icons to RAM


[6/23/2022 4:52 PM] szybet
You are still reading from SD card


[6/23/2022 4:52 PM] tux_linux
yeah


[6/23/2022 4:52 PM] szybet
From big files


[6/23/2022 4:52 PM] tux_linux
but that's not killing it


[6/23/2022 4:52 PM] szybet
Its better to judt choose images


[6/23/2022 4:53 PM] szybet
It will


[6/23/2022 4:53 PM] tux_linux
you only wear flash cells when you rewrite them


[6/23/2022 4:53 PM] tux_linux
no problem for reading


[6/23/2022 4:53 PM] szybet
🥴


[6/23/2022 4:53 PM] szybet
Make it properly, so fast too


[6/23/2022 4:56 PM] tux_linux
Ok, ideally, epubtool would need to output json data in a big 'file' on stdout with Book1, Book2, Book3, etc. until it has finished
It would take input of files to parse with a list provided in the first argument - or - every argument after the first one is a book and it extracts thumbnails with the book's checksum
`epubtool extract book1.epub book2.epub book3.epub book4.epub`


[6/23/2022 4:57 PM] tux_linux
the thumbnail should have the book's sha256sum as filename
so that when new books are added we don't have to make icons all over again


[6/23/2022 5:46 PM] szybet
sure i can do this


[6/23/2022 5:46 PM] szybet
whats the priority for this?


[6/23/2022 5:46 PM] tux_linux
high?


[6/23/2022 5:46 PM] szybet
what data is in json?


[6/23/2022 5:46 PM] tux_linux
```
{
    "author": "Stephen King",
    "title": "11/22/63: A Novel",
    "date": "2011-11-08T00:00:00+00:00",
}

```


[6/23/2022 5:47 PM] tux_linux
I'm working on the Qt frontend right now
But no hurry if you can't do it today


[6/23/2022 5:48 PM] szybet
i would like to first finish in basic functionality the power deamon


[6/23/2022 5:48 PM] tux_linux
ok


[6/23/2022 5:48 PM] szybet
but if you really want to work on this now, i can do this today / tommorow / this weekend


[6/23/2022 5:49 PM] tux_linux
let's say it will be a bit difficult to work with the current version given the functionality needed


[6/23/2022 5:49 PM] tux_linux
if I knew Rust well I would have done it


[6/23/2022 5:50 PM] szybet
so actually
```json
[
{
    "author": "Stephen King",
    "title": "11/22/63: A Novel",
    "date": "2011-11-08T00:00:00+00:00",
}
{
    "author": "Stephen King",
    "title": "11/22/63: A Novel",
    "date": "2011-11-08T00:00:00+00:00",
}
{
    "author": "Stephen King",
    "title": "11/22/63: A Novel",
    "date": "2011-11-08T00:00:00+00:00",
}
]
```


[6/23/2022 5:50 PM] szybet
array^


[6/23/2022 5:50 PM] szybet
and where to output the cover?


[6/23/2022 5:50 PM] szybet
path?


[6/23/2022 5:50 PM] tux_linux
Well, with `book1`, `book2`, `book3` parents


[6/23/2022 5:50 PM] tux_linux
`/data/onboard/.thumbnails/book-sha256sum.iconformat`


[6/23/2022 5:50 PM] szybet
?


[6/23/2022 5:50 PM] szybet
okay


[6/23/2022 5:52 PM] tux_linux
```
[
    [ "book1"
        {
            "author": "Stephen King",
            "title": "11/22/63: A Novel",
            "date": "2011-11-08T00:00:00+00:00",
        }
    ]
    [ "book2"
        {
            "author": "Stephen King",
            "title": "11/22/63: A Novel",
            "date": "2011-11-08T00:00:00+00:00",
        }
    ]
    [ "book3"
        {
            "author": "Stephen King",
            "title": "11/22/63: A Novel",
            "date": "2011-11-08T00:00:00+00:00",
        }
    ]
]
```


[6/23/2022 5:52 PM] tux_linux
My json is probably completely wrong, but I think you get what I mean...?


[6/23/2022 5:54 PM] tux_linux
I also created a branch for this: https://github.com/Kobo-InkBox/inkbox/tree/localLibraryWidget


[6/23/2022 5:54 PM] szybet
it is, wait

{Reactions}
👍 

[6/23/2022 6:07 PM] szybet
```
{
"list":[
    "book1": {
        "author": "Stephen King",
        "title": "11/22/63: A Novel",
        "date": "2011-11-08T00:00:00+00:00"
    }
 
    "book1": {
        "author": "Stephen King",
        "title": "11/22/63: A Novel",
        "date": "2011-11-08T00:00:00+00:00"
    }
 
    "book1": {
        "author": "Stephen King",
        "title": "11/22/63: A Novel",
        "date": "2011-11-08T00:00:00+00:00"
    }

]
}
```


[6/23/2022 6:07 PM] szybet
idk why this doewsnt work


[6/23/2022 6:07 PM] szybet
i will look into it later


[6/23/2022 6:07 PM] tux_linux
it looks good


[6/23/2022 6:07 PM] szybet
isint valid


[6/23/2022 9:31 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/library-C7A37.png


[6/23/2022 9:32 PM] szybet
can you change pages?


[6/23/2022 9:32 PM] tux_linux
not yet
but easy to do


[6/23/2022 9:32 PM] szybet
what about folders?


[6/23/2022 9:32 PM] szybet
folders as categories*


[6/23/2022 9:33 PM] tux_linux
we need folders?


[6/23/2022 9:33 PM] szybet
you said there will be something like that


[6/23/2022 9:33 PM] tux_linux
well, difficult to do


[6/23/2022 9:33 PM] tux_linux
we can search books in folders and put them in the list


[6/23/2022 9:34 PM] szybet
just show as in image but only from a speciffied folder / show folders to choose to go there


[6/23/2022 9:34 PM] szybet
and a up button somewhere


[6/23/2022 9:34 PM] szybet
good luck if someone has a big library


[6/23/2022 9:34 PM] szybet
how was this book named... hmmm........


[6/23/2022 9:35 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/7c79bd48432071200727d9102faf37b40e56e667
Look and tell if you see an easy way to do it

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/7c79bd48432071200727d9102faf37b40e56e667
Local library: Basic list working · Kobo-InkBox/inkbox@7c79bd4
/mnt/data/projects/git/conversations/media/7c79bd48432071200727d9102faf37b40e56e667-E9F0F


[6/23/2022 9:36 PM] szybet
easy? not really, but not hard


[6/23/2022 9:36 PM] szybet
well if not i will write mine some day anyway


[6/23/2022 9:37 PM] tux_linux
i will think about it


[6/23/2022 10:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CAF0A.png


[6/23/2022 10:54 PM] szybet
is this fine?


[6/23/2022 10:54 PM] szybet
(names)


[6/23/2022 10:54 PM] szybet
watchdogStartJobMtx is worse looking in my ipinion


[6/24/2022 12:13 AM] tux_linux
...yeah


[6/24/2022 12:13 AM] tux_linux
Only exception


[6/24/2022 12:13 AM] szybet
Yes

{Reactions}
👍 

[6/24/2022 4:44 AM] tux_linux
QtFrotz works
will be a nice user app

{Attachments}
/mnt/data/projects/git/conversations/media/infocom-B0A7C.png


[6/24/2022 5:01 AM] tux_linux
https://github.com/Kobo-InkBox/QtFrotz


[6/24/2022 5:02 AM] tux_linux
(from https://www.mobileread.com/forums/showthread.php?p=2711142)

{Embed}
https://www.mobileread.com/forums/showthread.php?p=2711142)
QtFrotz - Frotz port to Kobo e-readers - MobileRead Forums
QtFrotz - Frotz port to Kobo e-readers Kobo Developer's Corner


[6/24/2022 5:13 AM] tux_linux
We will also make an user app for Obenkyobo @Aramir


[6/24/2022 5:18 AM] the.mightydill
How would this even work? (Sorry for just jumping into the chat with questions but I'm curious...)


[6/24/2022 5:22 AM] tux_linux
Magic?


[6/24/2022 5:23 AM] tux_linux
Real answer: USB OTG


[6/24/2022 5:26 AM] the.mightydill
ohhh okay

{Reactions}
👍 

[6/24/2022 6:32 AM] szybet
I dont understand what it is


[6/24/2022 6:33 AM] szybet
How do you handle it?


[6/24/2022 6:33 AM] tux_linux
I don't know


[6/24/2022 6:33 AM] tux_linux
look it up


[6/24/2022 6:33 AM] tux_linux
Infocom/Z-Machine game interpreter


[6/24/2022 6:39 AM] szybet
Handled by user app service, switching back is also important


[6/24/2022 6:39 AM] tux_linux
?


[6/24/2022 6:39 AM] szybet
And how do you check for a psychical keyboard


[6/24/2022 6:40 AM] szybet
USB otg


[6/24/2022 6:40 AM] tux_linux
why do we need to check


[6/24/2022 6:40 AM] tux_linux
why does this need to be officially supported


[6/24/2022 6:40 AM] tux_linux
if everyone is going to have to physically alter the device to make it work


[6/24/2022 6:41 AM] szybet
Weird thing


[6/24/2022 6:41 AM] tux_linux
it's cool


[6/24/2022 7:10 AM] szybet
Why?


[6/24/2022 7:11 AM] tux_linux
how do you add an otg keyboard


[6/24/2022 7:23 AM] szybet
Eassly?


[6/24/2022 7:23 AM] tux_linux
it doesn't need external power


[6/24/2022 7:23 AM] tux_linux
?


[6/24/2022 7:23 AM] tux_linux
well, ok


[6/24/2022 7:24 AM] szybet
It does


[6/24/2022 7:24 AM] szybet
And?


[6/24/2022 7:24 AM] tux_linux
nothing, I was confused


[6/24/2022 7:24 AM] szybet
Just switch to otg before launching the app


[6/24/2022 7:24 AM] szybet
And show a warning


[6/24/2022 7:25 AM] tux_linux
but it doesn't have high priority


[6/24/2022 7:25 AM] szybet
Thats it


[6/24/2022 7:25 AM] szybet
I kniw


[6/24/2022 7:25 AM] szybet
But still cool


[6/24/2022 7:25 AM] tux_linux
hmm yeah


[6/24/2022 8:12 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/infocom-295E9.png


[6/24/2022 8:23 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/infocom-7F76B.png


[6/24/2022 8:23 AM] tux_linux
It's really cool


[6/24/2022 8:34 AM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/apps/QtFrotz.zip


[6/24/2022 8:35 AM] tux_linux
I also included some games


[6/24/2022 9:51 AM] szybet
Text rpgs? Or what this is


[6/24/2022 9:53 AM] szybet
Well its a great example that ereaders can be used for many other cool things


[6/24/2022 10:46 AM] aryetis
Nice 👌 , let met know if I can help. I still have to switch my kobo glo to inkbox.

{Reactions}
👍 

[6/24/2022 10:47 AM] aryetis
bluetooth keyboard could also be used I guess but people would have to reenable it.


[6/24/2022 11:00 AM] aryetis
And yeah games on ereader can be done. I've been thinking about it for quite some time and I'll probably give it a shot at some point (in months/years and probably just a POC as I s*** at drawing). It has touchscreen, gyros (not a fan of it but it's here), the slow refresh/ghosting of the screen ca be used as a feature for narration (cf : world of horror's aesthetic) and even sound through bt for some models. it certainly has its pros and mostly cons but it's always fun to play around the constraints.

If people can play on a fridge then why not an ereader.


[6/24/2022 11:01 AM] aryetis
Any text/board/card game can be ported relatively easily.


[6/24/2022 11:50 AM] szybet
Exactly, ereaders can be used for other things, not only reading books


[6/24/2022 11:50 AM] szybet
I would want an old pokemon emulator, but its too much to want :(


[6/24/2022 12:01 PM] aryetis
gameboy emulation is probably possible, but it's gonna look like trash on lots of eink screens.


[6/24/2022 12:02 PM] aryetis
might get something playable on more recent devices according to what I'm seeing on youtube.


[6/24/2022 1:05 PM] tux_linux
@Szybet any progress on https://github.com/Szybet/epub-extract-inkbox ? not to put pressure on you on anything


[6/24/2022 1:11 PM] szybet
Yestarday i did a basic detection / signal sending of detecting the power button


[6/24/2022 1:11 PM] szybet
Today / tommorow will be done


[6/24/2022 1:11 PM] tux_linux
good


[6/24/2022 1:11 PM] tux_linux
np


[6/24/2022 1:12 PM] tux_linux
it's just that I'm going on a 5h long auto ride, so I would have had plenty of time to work on it
but I've got other things too
maybe NFS root filesystem


[6/24/2022 1:12 PM] szybet
When?


[6/24/2022 1:13 PM] tux_linux
45mins?


[6/24/2022 1:13 PM] tux_linux
i will have lte internet


[6/24/2022 1:13 PM] tux_linux
but no hurry


[6/24/2022 1:13 PM] szybet
Then no chance


[6/24/2022 1:14 PM] szybet
There are pull requests from me that are waiting


[6/24/2022 1:14 PM] tux_linux
Tell me when you're done, I can probably grab the repo


[6/24/2022 2:47 PM] szybet
are yhose paths?


[6/24/2022 5:41 PM] tux_linux
Yes


[6/24/2022 5:42 PM] tux_linux
But if it's easier it can also read from a list


[6/24/2022 5:58 PM] szybet
okay, sure


[6/24/2022 6:59 PM] tux_linux
Have tried to hack around more with sff but no dice
Still doesn't want to show button and qvterm widget both at once


[6/24/2022 7:39 PM] szybet
what button


[6/24/2022 7:39 PM] szybet
where?


[6/24/2022 8:28 PM] tux_linux
A button or a keyboard, ie another widget


[6/24/2022 8:34 PM] szybet
try with layouts?


[6/24/2022 8:44 PM] tux_linux
I did


[6/24/2022 8:44 PM] szybet
try on desktop maybe first?


[6/24/2022 8:52 PM] tux_linux
Already did, it creates a new window


[6/24/2022 8:52 PM] szybet
whhat....................


[6/24/2022 8:55 PM] tux_linux
I know


[6/24/2022 9:35 PM] szybet
look into qvterm code


[6/24/2022 9:35 PM] szybet
there is something messed up


[6/24/2022 9:37 PM] tux_linux
It's quite complicated


[6/24/2022 11:03 PM] szybet
lockscreen will be redesigned right?


[6/24/2022 11:03 PM] szybet
so i dont need to implement him into the pwoer demon, if it will be remade anyway


[6/24/2022 11:04 PM] szybet
also - wifi recconection


[6/24/2022 11:04 PM] szybet
i want to rewrite wifi, better gui, password saving


[6/24/2022 11:05 PM] szybet
so i dont do this too? its a weird feature anyway


[6/24/2022 11:10 PM] szybet
do i need to implement something like `/tmp/sleep_status`?


[6/24/2022 11:10 PM] szybet
can i use fbink binary or use a built in one?


[6/24/2022 11:12 PM] szybet
can i use ifconfig?


[6/24/2022 11:13 PM] szybet
what is `/kobo/inkbox/remount`


[6/24/2022 11:24 PM] the.mightydill
can it be 4 digits please


[6/24/2022 11:24 PM] szybet
it will be how much you want


[6/24/2022 11:25 PM] szybet
how much is it now?


[6/24/2022 11:32 PM] the.mightydill
8


[6/24/2022 11:32 PM] szybet
if you really wanted you could edit the code to make it 4


[6/24/2022 11:33 PM] szybet
and i will make sure for this


[6/24/2022 11:33 PM] the.mightydill
oh! ok thanks


[6/24/2022 11:33 PM] szybet
its open source?...


[6/24/2022 11:47 PM] szybet
also how do you want to handle freezeing user apps? i need a way to get current running app ID


[6/24/2022 11:51 PM] the.mightydill
yeah, im just stupid.


[6/24/2022 11:51 PM] szybet
change it. learn things.


[6/24/2022 11:51 PM] szybet
and test sanki finally


[6/25/2022 12:20 AM] tux_linux
You do it


[6/25/2022 12:21 AM] tux_linux
You can use the binary
But ideally directly calling fbink library would be better
See fbink.h in FBInk repo


[6/25/2022 12:22 AM] tux_linux
Absolutely


[6/25/2022 12:22 AM] szybet
okayyy it will be the dwefault but a config will disable it

{Reactions}
👍 

[6/25/2022 12:22 AM] tux_linux
Something that tells the GUI to remount /kobo/inkbox tmpfs


[6/25/2022 12:22 AM] szybet
we will se if it compiles for musl


[6/25/2022 12:22 AM] tux_linux
You wanted this feature to be implemented right?


[6/25/2022 12:23 AM] tux_linux
The basic version should


[6/25/2022 12:23 AM] szybet
so yes, great

{Reactions}
👍 

[6/25/2022 12:23 AM] tux_linux
With TrueType fonts


[6/25/2022 12:23 AM] szybet
i wanted password savings, this was a compromise


[6/25/2022 12:24 AM] tux_linux
We can do it too


[6/25/2022 12:26 AM] szybet
https://github.com/NiLuJe/FBInk ?


[6/25/2022 12:26 AM] tux_linux
Yes?


[6/25/2022 12:26 AM] szybet
only a makefile


[6/25/2022 12:26 AM] szybet
oh no


[6/25/2022 12:27 AM] tux_linux
Add it as a submodule


[6/25/2022 12:27 AM] tux_linux
Do it for libevdev too


[6/25/2022 12:28 AM] szybet
nope, i need it in src for clangd to work


[6/25/2022 12:28 AM] tux_linux
Wdym


[6/25/2022 12:28 AM] szybet
and its the tree structure that librvdev does


[6/25/2022 12:28 AM] ninuje
Err, your IDE sucks?


[6/25/2022 12:28 AM] ninuje
😄


[6/25/2022 12:28 AM] szybet
clangd?


[6/25/2022 12:28 AM] szybet
yes


[6/25/2022 12:28 AM] szybet
is there anything better?


[6/25/2022 12:28 AM] ninuje
I've got clangd working just fine with a submodule setup


[6/25/2022 12:29 AM] szybet
with libevdev?


[6/25/2022 12:29 AM] ninuje
With all the things


[6/25/2022 12:30 AM] szybet
libevdev searches for itself using `#include libevdev/libevdev.h` so it needs to be in src, also the repo tree is: `libevdev/libevdev/hereiscode.h`


[6/25/2022 12:30 AM] szybet
how do i add a submodule with this setup?


[6/25/2022 12:32 AM] ninuje
Oh, hai, an IDE that works.

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220625_003205-F4C47.png


[6/25/2022 12:32 AM] ninuje
(that's https://github.com/koreader/KoboUSBMS)


[6/25/2022 12:33 AM] szybet
kate is quite good, i know


[6/25/2022 12:33 AM] szybet
but there are things missing


[6/25/2022 12:34 AM] szybet
how do i open another window of it with the code in the same project?


[6/25/2022 12:35 AM] ninuje
:?


[6/25/2022 12:36 AM] szybet
multi monitor setup


[6/25/2022 12:36 AM] szybet
yea


[6/25/2022 12:37 AM] ninuje
:?


[6/25/2022 12:37 AM] szybet
code of the project in another window


[6/25/2022 12:38 AM] ninuje
I have no idea what you're talking about


[6/25/2022 12:38 AM] szybet
maybe i want to much


[6/25/2022 12:42 AM] tux_linux
I think I will try to learn rust tonight
Good luck with the power daemon


[6/25/2022 12:43 AM] szybet
if you want to do this only for the epoob one then dont


[6/25/2022 12:43 AM] szybet
i will do it


[6/25/2022 12:45 AM] szybet
learning rust takes time


[6/25/2022 1:03 AM] szybet
compiled without a problem, but i would mess things up, its complicated so i will use the binary for now


[6/25/2022 1:03 AM] tux_linux
It's not that complicated


[6/25/2022 1:04 AM] szybet
there are many places to mess things up


[6/25/2022 1:06 AM] tux_linux
```
// gcc utils/hello.c -I. -LRelease -o utils/hello -lfbink -lm

#include <stdio.h>
#include <stdlib.h>

#include <fbink.h>

int main(void) {
      printf("Loaded FBInk %s\n", fbink_version());

      FBInkConfig fbink_cfg = { 0 };
      fbink_cfg.is_centered = true;
      fbink_cfg.is_halfway = true;

      int fbfd = fbink_open();
      if (fbfd == -1) {
        printf("Failed to open the framebuffer, aborting . . .\n");
        return EXIT_FAILURE;
      }


      if (fbink_init(fbfd, &fbink_cfg) < 0) {
        printf("Failed to initialize FBInk, aborting . . .\n");
        return EXIT_FAILURE;
      }

      if (fbink_print(fbfd, "Hello World", &fbink_cfg) < 0) {
        printf("Failed to print that string!\n");
      }

      if (fbink_close(fbfd) < 0) {
        printf("Failed to close the framebuffer, aborting . . .\n");
        return EXIT_FAILURE;
      }

      return EXIT_SUCCESS;
}
```
Example code from an example @NiLuJe sent me a long, long while ago at MR


[6/25/2022 1:07 AM] szybet
okayyy with that i can do some


[6/25/2022 1:18 AM] szybet
```json
[
   {
      "1":"book1",
      "author":"Stephen King",
      "title":"11/22/63: A Novel",
      "date":"2011-11-08T00:00:00+00:00"
   },
   {
      "2":"book2",
      "author":"Stephen King",
      "title":"11/22/63: A Novel",
      "date":"2011-11-08T00:00:00+00:00"
   },
   {
      "3":"book3",
      "author":"Stephen King",
      "title":"11/22/63: A Novel",
      "date":"2011-11-08T00:00:00+00:00"
   }
]
```


[6/25/2022 1:18 AM] szybet
can this be?


[6/25/2022 1:18 AM] szybet
now its valid


[6/25/2022 1:18 AM] szybet
@tux-linux


[6/25/2022 1:19 AM] tux_linux
Hmm


[6/25/2022 1:20 AM] tux_linux
1:book1 is strange
Good otherwise
It can't just be book1 -> info ?


[6/25/2022 1:20 AM] szybet
book1 is path?


[6/25/2022 1:21 AM] tux_linux
Oh


[6/25/2022 1:21 AM] tux_linux
Perfect then


[6/25/2022 1:22 AM] szybet
maybe not ids but "path"?


[6/25/2022 1:22 AM] szybet
it will be easier for you to read it


[6/25/2022 1:22 AM] tux_linux
Whatever you think is better


[6/25/2022 1:22 AM] tux_linux
Please commit when you're done, I will be able to work with that at least if you plan to do the icon stuff later


[6/25/2022 1:23 AM] szybet
icons stuff? you mean extracting it to a folder?


[6/25/2022 1:23 AM] tux_linux
Yeah


[6/25/2022 1:23 AM] tux_linux
With sha256sum as path name


[6/25/2022 1:23 AM] tux_linux
(+extension)


[6/25/2022 1:41 AM] szybet
i wonder how do i determine what extension it is


[6/25/2022 1:41 AM] szybet
isint it always png?


[6/25/2022 1:42 AM] tux_linux
No


[6/25/2022 1:42 AM] tux_linux
You don't have to care about it


[6/25/2022 1:42 AM] tux_linux
Maybe just don't even put the extension
Only sha256


[6/25/2022 1:42 AM] tux_linux
convert will find the format itself


[6/25/2022 1:43 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/infocom-CCACE.png


[6/25/2022 1:43 AM] tux_linux
I think we can call that the final version


[6/25/2022 1:43 AM] tux_linux
Optimized design and everything


[6/25/2022 1:43 AM] tux_linux
Also, proper menu bar


[6/25/2022 2:32 AM] szybet
done 
https://github.com/Szybet/epub-extract-inkbox

{Attachments}
/mnt/data/projects/git/conversations/media/epubtool-79B5A

{Embed}
https://github.com/Szybet/epub-extract-inkbox
GitHub - Szybet/epub-extract-inkbox
Contribute to Szybet/epub-extract-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/epub-extract-inkbox-68151


[6/25/2022 2:32 AM] szybet
@tux-linux


[6/25/2022 2:32 AM] szybet
im going to sleep


[6/25/2022 2:32 AM] szybet
i havent tested it much, but seems to work


[6/25/2022 3:01 AM] tux_linux
Thanks a lot


[6/25/2022 3:01 AM] tux_linux
Will work on it later tonight and tomorrow + on the road Sunday


[6/25/2022 5:49 AM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/epubtool-20220624.tar.xz


[6/25/2022 12:27 PM] szybet
this commit is in the wrong place?


[6/25/2022 12:27 PM] szybet
branch


[6/25/2022 1:20 PM] szybet
https://github.com/Kobo-InkBox/inkbox/commit/8bfc529498ca913e651b27ddad7d1f791468307e

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/8bfc529498ca913e651b27ddad7d1f791468307e
GUI user applications: Design improvements · Kobo-InkBox/inkbox@8bf...
/mnt/data/projects/git/conversations/media/8bfc529498ca913e651b27ddad7d1f791468307e-BA490


[6/25/2022 1:28 PM] szybet
looks good


[6/25/2022 1:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-EDA07.png


[6/25/2022 1:29 PM] szybet
but here, if you dont want those variables _v and _e you should use \_ only


[6/25/2022 1:47 PM] szybet
i would like to have the history of the repo, even if its bulky ( especielly the debug part )


[6/25/2022 1:48 PM] szybet
so you can clone the repo more light weight with `git clone --depth=1 --branch=main git@github.com:Szybet/epub-extract-inkbox.git`


[6/25/2022 1:52 PM] szybet
i pushed your changes to the repo


[6/25/2022 2:24 PM] tux_linux
Yeah well it will be merged for sure so I didn't care that much


[6/25/2022 2:25 PM] tux_linux
Ok


[6/25/2022 2:25 PM] tux_linux
Thanks


[6/25/2022 2:45 PM] szybet
how do i remove / load modules?


[6/25/2022 2:45 PM] szybet
insmod / something else?


[6/25/2022 2:45 PM] szybet
there is propably a library for that


[6/25/2022 2:59 PM] tux_linux
modprobe/insmod


[6/25/2022 3:00 PM] tux_linux
But there's the insmod system call


[6/25/2022 3:00 PM] szybet
it is in inkbox?


[6/25/2022 3:00 PM] szybet
modprobe?


[6/25/2022 3:00 PM] tux_linux
.


[6/25/2022 3:00 PM] tux_linux
Do you know how to do the to-do in my commit?


[6/25/2022 3:00 PM] szybet
what? where


[6/25/2022 3:01 PM] szybet
i didnt see it


[6/25/2022 3:01 PM] tux_linux
https://github.com/Kobo-InkBox/epubtool/commit/7263db1ba2117e9e7c01470d57b0ac74ae6be0da

{Embed}
https://github.com/Kobo-InkBox/epubtool/commit/7263db1ba2117e9e7c01470d57b0ac74ae6be0da
Lots of improvements · Kobo-InkBox/epubtool@7263db1
Thanks @Szybet for the previous commits.

```
kobo:/tmp# EXTRACT_COVER=1 ./epubtool /data/onboard/pg43.epub | jq
[
  {
    &quot;BookID&quot;: &quot;1&quot;,
    &quot;BookPath&...
/mnt/data/projects/git/conversations/media/7263db1ba2117e9e7c01470d57b0ac74ae6be0da-C0570


[6/25/2022 3:01 PM] tux_linux
`TODO: Prevent panic if no cover is found.`


[6/25/2022 3:02 PM] szybet
sure


[6/25/2022 3:02 PM] tux_linux
Thanks


[6/25/2022 3:04 PM] szybet
https://github.com/Szybet/epub-extract-inkbox/commit/430ce6be9c9ae858f9d94e49d32b079b69474d45

{Embed}
https://github.com/Szybet/epub-extract-inkbox/commit/430ce6be9c9ae858f9d94e49d32b079b69474d45
done the todo one · Szybet/epub-extract-inkbox@430ce6b
/mnt/data/projects/git/conversations/media/430ce6be9c9ae858f9d94e49d32b079b69474d45-273D3


[6/25/2022 3:04 PM] szybet
done


[6/25/2022 3:15 PM] szybet
but it still gives a path to it,  but it doesnt exist


[6/25/2022 3:15 PM] szybet
what now?


[6/25/2022 3:15 PM] tux_linux
I'm fixing it


[6/25/2022 3:16 PM] szybet
if you want, sure


[6/25/2022 3:16 PM] szybet
its faster if i do it


[6/25/2022 3:17 PM] szybet
`fbink_open fbink_init`, i call it once or every write?


[6/25/2022 3:18 PM] tux_linux
https://github.com/Kobo-InkBox/epubtool/commit/2071093576322683a5c3b82477be659c653624f6

{Embed}
https://github.com/Kobo-InkBox/epubtool/commit/2071093576322683a5c3b82477be659c653624f6
If no cover found, empty path · Kobo-InkBox/epubtool@2071093
/mnt/data/projects/git/conversations/media/2071093576322683a5c3b82477be659c653624f6-0D6AC


[6/25/2022 3:18 PM] tux_linux
Yeah


[6/25/2022 3:18 PM] szybet
well sure


[6/25/2022 3:19 PM] szybet
soo... once?


[6/25/2022 3:19 PM] tux_linux
Yes


[6/25/2022 3:19 PM] tux_linux
It should work
Try it


[6/25/2022 3:23 PM] szybet
so it didnt compiled correctly for musl

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-742A0.png
/mnt/data/projects/git/conversations/media/unknown-74C80.png
/mnt/data/projects/git/conversations/media/unknown-A5365.png


[6/25/2022 3:24 PM] szybet
`Makefile:98: Detected a musl TC: it *may* be built without linker plugins support, which are a hard dependency of the utils target!`


[6/25/2022 3:25 PM] szybet
it may but actuall not really


[6/25/2022 3:27 PM] szybet
well i need help with this one


[6/25/2022 3:27 PM] szybet
if not, i will use fbink binary


[6/25/2022 3:35 PM] tux_linux
Look here Szybet


[6/25/2022 3:36 PM] szybet
w h e r e ?


[6/25/2022 3:36 PM] tux_linux
Env var on make command


[6/25/2022 3:36 PM] szybet
oh no...


[6/25/2022 3:37 PM] tux_linux
Why?


[6/25/2022 3:49 PM] szybet
that i dont see anything in this makefile


[6/25/2022 3:50 PM] szybet
if those are some weird flags, then no thanks


[6/25/2022 3:52 PM] szybet
test?


[6/25/2022 3:52 PM] szybet
discird has problems with sending text?


[6/25/2022 3:53 PM] szybet
yea, i cant send big code blocks


[6/25/2022 3:54 PM] szybet
anyway, i dont see anything and how to do it


[6/25/2022 3:54 PM] szybet
¯\_(ツ)_/¯


[6/25/2022 4:16 PM] tux_linux
What, where?


[6/25/2022 4:19 PM] tux_linux
Using the binary is very different compared to using the actual library


[6/25/2022 4:37 PM] szybet
in fbinks makefile


[6/25/2022 4:38 PM] szybet
its easier, i know


[6/25/2022 4:38 PM] tux_linux
Can't you pass env from cmake?


[6/25/2022 4:38 PM] szybet
i want to compile fbink first


[6/25/2022 4:38 PM] tux_linux
Ok


[6/25/2022 4:38 PM] tux_linux
What doesn't work?


[6/25/2022 4:39 PM] szybet
that i dont know what to do?


[6/25/2022 4:39 PM] szybet
`chroot /kobo /usr/bin/fbgrab "/external_root/tmp/dump.png"` also what is this


[6/25/2022 4:39 PM] tux_linux
ENVVAR=value make


[6/25/2022 4:39 PM] tux_linux
Take a screenshot and restore it upon wake-up


[6/25/2022 4:39 PM] szybet
which ENVVAR and which value ;p?


[6/25/2022 4:39 PM] tux_linux
You didn't read what NiLuJe said above


[6/25/2022 4:39 PM] szybet
oh okay


[6/25/2022 4:40 PM] tux_linux
Now fbgrab is in the main rootfs too
So no need to chroot
But ideally it should be in a library too


[6/25/2022 4:40 PM] szybet
/external_root? whot


[6/25/2022 4:41 PM] tux_linux
Save it under tmp


[6/25/2022 4:41 PM] szybet
BITMAP=1 FONTS=0 OPENTYPE=1 ?


[6/25/2022 4:42 PM] tux_linux
Yes probably


[6/25/2022 4:45 PM] szybet
```
% ls Release 
button_scan  button_scan_cmd.o  fbink  fbink_cmd.o  libfbink.a  shared  static
16:44 szybet@hyperbookszyb /mnt/HDD/Project/Public/inkbox-power-deamon/lib/FBInk
% ls Release/*/
Release/shared/:
cutef8  libunibreak  qimagescale

Release/static/:
cutef8  fbink.o  libunibreak  qimagescale
```


[6/25/2022 4:45 PM] szybet
the output is the same


[6/25/2022 4:45 PM] tux_linux
Yeah, looks good?


[6/25/2022 4:45 PM] szybet
and what do i use?


[6/25/2022 4:45 PM] tux_linux
What is in shared?


[6/25/2022 4:45 PM] szybet
cutef8  libunibreak  qimagescale


[6/25/2022 4:48 PM] tux_linux
SHARED=1 make kobo


[6/25/2022 4:48 PM] tux_linux
With all other env vars


[6/25/2022 4:49 PM] szybet
```
% ls Release/*/
Release/shared/:
cutef8  libunibreak  qimagescale

Release/static/:
cutef8  fbink.o  libunibreak  qimagescale
```


[6/25/2022 4:49 PM] szybet
its the same


[6/25/2022 4:49 PM] tux_linux
Did you make clean before?


[6/25/2022 4:49 PM] szybet
yes


[6/25/2022 4:51 PM] tux_linux
What is in the release folder only?


[6/25/2022 4:51 PM] szybet
```
% ls Release 
button_scan  button_scan_cmd.o  fbink  fbink_cmd.o  libfbink.a  shared  static

```


[6/25/2022 4:51 PM] tux_linux
I have `Release/libfbink.so`


[6/25/2022 4:52 PM] szybet
thats not funny


[6/25/2022 4:52 PM] szybet
```
CHOST=arm \   
CC=armv7l-linux-musleabihf-gcc \
AR=armv7l-linux-musleabihf-ar \
RANLIB=armv7l-linux-musleabihf-ranlib \
CXX=armv7l-linux-musleabihf-g++ BITMAP=1 FONTS=0 OPENTYPE=1 SHARED=1 make
```


[6/25/2022 4:52 PM] szybet
what im doing wrong


[6/25/2022 4:52 PM] tux_linux
I don't know
Nothing


[6/25/2022 4:52 PM] szybet
¯\_(ツ)_/¯


[6/25/2022 4:54 PM] tux_linux
@NiLuJe ?


[6/25/2022 5:12 PM] szybet
what about this?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B6344.png


[6/25/2022 5:13 PM] tux_linux
It's because the GUI doesn't know when it has to sleep
So I had to kill it to launch the lock screen on wake-up otherwise it would interfer with touch events on main GUI


[6/25/2022 5:13 PM] tux_linux
Kill stop is still valid
There is a system call for this


[6/25/2022 5:13 PM] szybet
killall -q puts it to sleep?


[6/25/2022 5:13 PM] tux_linux
No


[6/25/2022 5:14 PM] tux_linux
It kills it


[6/25/2022 5:14 PM] szybet
is there a way to freeze it>


[6/25/2022 5:14 PM] tux_linux
If I froze it with stop it would register touch events when it would be started again


[6/25/2022 5:14 PM] szybet
w h a t


[6/25/2022 5:16 PM] tux_linux
Kill stop
Touch screen (nothing happens)
Kill continue
What you clicked before is registered


[6/25/2022 5:19 PM] szybet
solutions:
1 platform plugin magic

2 simpler:  when a qdialog is shown, all other touch input below cant be clicked. so show an qdialog with something and then close it, and it will be shown if a file in /tmp with specified name will be created. this can be done for all qt apps, by just callung a singleshot for a function


[6/25/2022 5:20 PM] tux_linux
How does the GUI know when it has to show it


[6/25/2022 5:20 PM] szybet
`and it will be shown if a file in /tmp with specified name will be created`


[6/25/2022 5:20 PM] szybet
i could propably do a inotify watcher for this


[6/25/2022 5:20 PM] tux_linux
A better way to do that?


[6/25/2022 5:20 PM] szybet
dbus


[6/25/2022 5:20 PM] szybet
;p


[6/25/2022 5:20 PM] tux_linux
Yes
Maybe a fifo


[6/25/2022 5:20 PM] szybet
fifio?


[6/25/2022 5:21 PM] tux_linux
/etc/init.d/ibxd


[6/25/2022 5:21 PM] tux_linux
But in Qt


[6/25/2022 5:21 PM] szybet
what?


[6/25/2022 5:23 PM] szybet
where can i store config files for the new sleep demon?


[6/25/2022 5:23 PM] szybet
and how do i obtain current running user app name?


[6/25/2022 5:23 PM] tux_linux
/data/config/20-sleep_daemon


[6/25/2022 5:23 PM] szybet
its a directory?


[6/25/2022 5:24 PM] tux_linux
Yes
I will create it


[6/25/2022 5:24 PM] tux_linux
But you can work with that


[6/25/2022 5:24 PM] tux_linux
Look up what a named pipe is


[6/25/2022 5:25 PM] szybet
nono no no no no no


[6/25/2022 5:25 PM] szybet
:(


[6/25/2022 5:25 PM] tux_linux
ibxd works?


[6/25/2022 5:25 PM] szybet
?


[6/25/2022 5:26 PM] tux_linux
initrd-fifo works?


[6/25/2022 5:26 PM] szybet
it works? is it good? hm hm hm


[6/25/2022 5:26 PM] tux_linux
Did you read that file?


[6/25/2022 5:26 PM] tux_linux
Did you see how much times I call ibxd from the main GUI qt code?


[6/25/2022 5:26 PM] tux_linux
Half of the program wouldn't work without it


[6/25/2022 5:27 PM] szybet
`mkfifo /run/ibxd 2>/dev/null`


[6/25/2022 5:27 PM] szybet
can you share those pipes to user apps?


[6/25/2022 5:27 PM] tux_linux
Maybe in the future


[6/25/2022 5:27 PM] tux_linux
But it will not be the same named pipe


[6/25/2022 5:28 PM] szybet
okay i can go with that


[6/25/2022 5:28 PM] ninuje
You don't care about the `utils` target


[6/25/2022 5:29 PM] ninuje
So the musl warning is irrelevant (and you might actually have a sane TC w/  linker plugins nowadays anyway)


[6/25/2022 5:29 PM] ninuje
If you just need the shared lib


[6/25/2022 5:29 PM] ninuje
`make distclean && make -j8 shared MINIMAL=1 BITMAP=1 OPENTYPE=1`


[6/25/2022 5:29 PM] ninuje
Do *NOT* pass a VAR=0 flag for the build options


[6/25/2022 5:29 PM] ninuje
MINIMAL sets everything to 0, there's no actual value check, just a define check


[6/25/2022 5:30 PM] ninuje
(e.g., MINIMAL=foo BITMAP=bar OPENTYPE=baz would do the same thing)


[6/25/2022 5:30 PM] ninuje
as would MINIMAL=0 BITMAP=0 OPENTYPE=0 😉


[6/25/2022 5:31 PM] szybet
works


[6/25/2022 5:31 PM] szybet
thanks


[6/25/2022 5:35 PM] szybet
and this?


[6/25/2022 5:37 PM] szybet
i will implement `cinematic-brightness.sh` by myself


[6/25/2022 5:42 PM] tux_linux
`ps | grep "{launch_user_app}" | grep -v "grep | awk '{ print $7 }'`


[6/25/2022 5:43 PM] tux_linux
Look in main GUI
There is already a function for that if you want to copy it


[6/25/2022 5:43 PM] tux_linux
(`functions.h`)


[6/25/2022 5:44 PM] szybet
nah i will do it myself


[6/25/2022 5:45 PM] szybet
and use `/tmp/savedBrightness`


[6/25/2022 5:45 PM] tux_linux
You better be using ioctl on /dev/ntx_io


[6/25/2022 5:45 PM] tux_linux
It will work for all devices


[6/25/2022 5:45 PM] tux_linux
Some don't have a /sys brightness node


[6/25/2022 5:46 PM] szybet
what is 241?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D1DB0.png


[6/25/2022 5:46 PM] tux_linux
It's the device's function
You might find another number for turning off the led


[6/25/2022 5:47 PM] szybet
i dont want to


[6/25/2022 5:47 PM] szybet
i will simply set 0


[6/25/2022 5:47 PM] tux_linux
Why?


[6/25/2022 5:47 PM] szybet
its the same?


[6/25/2022 5:47 PM] tux_linux
It won't do anything


[6/25/2022 5:47 PM] szybet
set 0 light


[6/25/2022 5:47 PM] szybet
set value to 0


[6/25/2022 5:47 PM] szybet
;_ ;


[6/25/2022 5:47 PM] tux_linux
241 = tell the kernel to interact with screen brightness


[6/25/2022 5:48 PM] szybet
^


[6/25/2022 5:48 PM] tux_linux
value contains the brightness value


[6/25/2022 5:48 PM] tux_linux
Yeah


[6/25/2022 5:48 PM] ninuje
It's the ioctl cmd


[6/25/2022 5:48 PM] ninuje
https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.h#L174-L178

{Embed}
https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.h
KoboUSBMS/usbms.h at 0399a26936f0025f79127725232b88b702e2b97b · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[6/25/2022 5:49 PM] ninuje
sending a 0 arg to that cmd *is* how you turn the frontlight off


[6/25/2022 5:49 PM] szybet
is there a diffrence with setting brightness 0 to frontlight off?


[6/25/2022 5:50 PM] ninuje
None


[6/25/2022 5:50 PM] ninuje
And there isn't a dedicated command for on/off anyway


[6/25/2022 5:50 PM] szybet
bruh


[6/25/2022 5:50 PM] ninuje
c.f., https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.c#L452-L490

{Embed}
https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.c
KoboUSBMS/usbms.c at 0399a26936f0025f79127725232b88b702e2b97b · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[6/25/2022 6:51 PM] szybet
i will try it

*dont launch external processes huh?*


[6/25/2022 6:56 PM] tux_linux
That's how I would do it in shell


[6/25/2022 6:56 PM] tux_linux
But ideally if you find a way to do that regex in cpp


[6/25/2022 6:56 PM] tux_linux
It would be better


[6/25/2022 6:57 PM] szybet
regex how? a random name of a userapp?


[6/25/2022 6:57 PM] tux_linux
Do you know what regex are?


[6/25/2022 6:57 PM] szybet
yes i used them a lot


[6/25/2022 6:57 PM] szybet
and?


[6/25/2022 6:58 PM] tux_linux
Ok
Well find a way to do that in cpp
If possible


[6/25/2022 6:58 PM] szybet
there is no way to do this with **only** regex.


[6/25/2022 6:58 PM] szybet
get a ps output and here try to match a random userapp name


[6/25/2022 6:58 PM] szybet
https://regex101.com


[6/25/2022 6:58 PM] szybet
no.


[6/25/2022 6:59 PM] tux_linux
There is only a single app running at once


[6/25/2022 7:00 PM] tux_linux
Oh
Well
Just take that shell command then


[6/25/2022 7:00 PM] szybet
regex + names of folders in .apps


[6/25/2022 7:00 PM] tux_linux
Or maybe we can write the running app's name in some file


[6/25/2022 7:01 PM] szybet
i was waiting for you to say that


[6/25/2022 8:20 PM] tux_linux
But the issue is that the app name is not necessarily its process name


[6/25/2022 8:22 PM] tux_linux
`killall launch_user_application.sh`
Maybe that can work


[6/25/2022 8:22 PM] szybet
kill it and its childs?


[6/25/2022 8:25 PM] tux_linux
I think it can work but you might need to send SIGKILL


[6/25/2022 8:48 PM] szybet
SIGKILL? it kills? i want to freeze


[6/25/2022 8:48 PM] tux_linux
I meant, for the lockscreen


[6/25/2022 8:48 PM] tux_linux
But you could freeze it otherwise yeah


[6/25/2022 8:49 PM] szybet
why for the lock screen do we need to kill?


[6/25/2022 9:03 PM] tux_linux
I already explained this


[6/25/2022 9:03 PM] tux_linux
.


[6/25/2022 9:04 PM] tux_linux
Or we implement the fifo thing


[6/25/2022 9:04 PM] szybet
we already found a solution


[6/25/2022 9:04 PM] szybet
yes


[6/25/2022 9:04 PM] szybet
do it once and properly

{Reactions}
👍 

[6/25/2022 10:34 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220625_203405891-A3C8A.jpg


[6/25/2022 10:35 PM] weeda2192
That's looking good

{Reactions}
👍 

[6/25/2022 10:36 PM] weeda2192
Does the clock refresh every minute or just when you refreash the screen


[6/25/2022 10:37 PM] tux_linux
Every minute


[6/25/2022 10:37 PM] weeda2192
Would that slowly drain the battery?


[6/25/2022 10:37 PM] tux_linux
I doubt it?


[6/25/2022 10:54 PM] szybet
looks good


[6/25/2022 10:54 PM] szybet
what about the folders?, and dynamically creating the list?


[6/25/2022 10:55 PM] szybet
when using anything the clock isint show at default, also the device should go to sleep when noone is using it anyway

{Reactions}
👍 

[6/25/2022 11:09 PM] tux_linux
Not done yet


[6/25/2022 11:10 PM] szybet
only asking if you will do them


[6/26/2022 1:18 AM] szybet
so i implemented direct calls to the library to fbink ( pretty good written library as for c, chaotic good )


[6/26/2022 1:18 AM] szybet
one small problem


[6/26/2022 1:18 AM] szybet
`[FBInk] Image support is disabled in this FBInk build!`


[6/26/2022 1:18 AM] szybet
:(


[6/26/2022 1:43 AM] tux_linux
Try to build with `IMAGES=1` maybe?


[6/26/2022 1:44 AM] tux_linux
Good


[6/26/2022 1:45 AM] szybet
makefile doesnt say anything about this var


[6/26/2022 1:45 AM] tux_linux
Maybe it's something else? PIC ?


[6/26/2022 1:45 AM] tux_linux
PICTURE ?


[6/26/2022 1:48 AM] szybet
its bitmap


[6/26/2022 1:48 AM] szybet
but it was needed to be disabled


[6/26/2022 1:48 AM] tux_linux
Try with it
Who knows


[6/26/2022 2:12 AM] ninuje
https://github.com/NiLuJe/FBInk/#how-do-i-build-it

{Embed}
https://github.com/NiLuJe/FBInk/
GitHub - NiLuJe/FBInk: FrameBuffer eInker, a small tool & library t...
FrameBuffer eInker, a small tool &amp; library to print text &amp; images to an eInk Linux framebuffer - GitHub - NiLuJe/FBInk: FrameBuffer eInker, a small tool &amp; library to print t...
/mnt/data/projects/git/conversations/media/FBInk-893E8


[6/26/2022 2:13 AM] ninuje
`Pass IMAGE=1 to add image support. (Implies DRAW)`


[6/26/2022 2:13 AM] ninuje
The final boss is reading.


[6/26/2022 2:16 AM] szybet
the problem was MINIMAL=1


[6/26/2022 2:16 AM] szybet
and i though it was needed for musl


[6/26/2022 2:16 AM] szybet
¯\_(ツ)_/¯


[6/26/2022 2:18 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/4a104522f54f4a8ade41f64a16bb7a24cfe0f337

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/4a104522f54f4a8ade41f64a16bb7a24cfe0f337
Local library: Basic setup working · Kobo-InkBox/inkbox@4a10452
A local books database is maintained at `/data/onboard/.inkbox/LocalLibrary.db`. It contains compressed JSON read by the GUI.

URGENT TODO: Fix `*** Error in &#39;/mnt/onboard/.adds/inkbox/inkb...
/mnt/data/projects/git/conversations/media/4a104522f54f4a8ade41f64a16bb7a24cfe0f337-46B3E


[6/26/2022 2:18 AM] tux_linux
Yeah, got a stack error there
How nice
Don't know what's causing it really


[6/26/2022 2:22 AM] ninuje
The two are unrelated.


[6/26/2022 2:22 AM] tux_linux
I pushed everything to every repo (gui-bundle, rootfs, inkbox, epubtool)


[6/26/2022 2:22 AM] ninuje
The musl thing is for the `utils` make *target*


[6/26/2022 2:22 AM] ninuje
The build options are set via are make *variables*


[6/26/2022 2:23 AM] ninuje
MINIMAL disables *everything*


[6/26/2022 2:23 AM] szybet
i will look into it after finishing the demon

{Reactions}
👍 

[6/26/2022 2:23 AM] ninuje
Which means you *need* MINIMAL for modular builds


[6/26/2022 2:23 AM] ninuje
And you just add whatever you need to that


[6/26/2022 2:23 AM] szybet
well okay


[6/26/2022 2:24 AM] ninuje
so a bitmap + image build looks like MINIMAL=1 BITMAP=1 IMAGE=1


[6/26/2022 2:24 AM] ninuje
append OPENTYPE=1 if you need opetype


[6/26/2022 2:24 AM] ninuje
etc.


[6/26/2022 2:24 AM] ninuje
Again, read the fine manual.


[6/26/2022 2:25 AM] szybet
setting brightness through ntx from my code doesnt save it and i cant read it ( but it does work ), but i can read current brightness when gui changes the brightness. What is happening @tux-linux


[6/26/2022 2:26 AM] ninuje
The "read" brightness sysfs entry is a Mk.7+ feature


[6/26/2022 2:26 AM] tux_linux
You can't read the current brightness in general with that ntxio stuff
That's the downside


[6/26/2022 2:26 AM] ninuje
older kernels only had a write-only sysfs entry


[6/26/2022 2:26 AM] tux_linux
Not only?


[6/26/2022 2:26 AM] szybet
you are saying this now?...


[6/26/2022 2:26 AM] ninuje
You can't read the brightness *at all* on older devices


[6/26/2022 2:26 AM] tux_linux
I have fine access to a read write sysfs node in almost every device except the glo


[6/26/2022 2:26 AM] ninuje
The ioctl is always write-only


[6/26/2022 2:27 AM] tux_linux
Yeah, the ioctl is write only


[6/26/2022 2:27 AM] tux_linux
I think it's (sysfs) readable from Glo HD, aura 2 too


[6/26/2022 2:27 AM] ninuje
Can't speak for Mk. 6


[6/26/2022 2:27 AM] ninuje
But it's not there on Mk. 5


[6/26/2022 2:28 AM] ninuje
And it is on Mk. 7 😉

{Reactions}
👍 

[6/26/2022 2:28 AM] tux_linux
Yeah, not on mk4/5


[6/26/2022 2:28 AM] tux_linux
(well, no FL on mk4 but anyways)


[6/26/2022 2:29 AM] tux_linux
There is a config file for brightness @Szybet
Look in data config


[6/26/2022 2:29 AM] tux_linux
Ideally, read from the sysfs node
Otherwise use the config file


[6/26/2022 2:31 AM] szybet
so when use the node and when the config?


[6/26/2022 2:35 AM] tux_linux
If you are on n613 use config


[6/26/2022 2:35 AM] tux_linux
Otherwise use node


[6/26/2022 2:36 AM] tux_linux
But there are different nodes


[6/26/2022 2:36 AM] tux_linux
Look into the cinematic-brightness.sh script


[6/26/2022 2:36 AM] tux_linux
And don't delete that one, I use it on power off/reboot


[6/26/2022 2:42 AM] szybet
How do i set the brightness to nodes when im using ntx?


[6/26/2022 2:44 AM] szybet
Can you prepare to give me a way to read the current user app name?


[6/26/2022 2:44 AM] szybet
Im finishing the demon slowly


[6/26/2022 2:44 AM] tux_linux
wdym


[6/26/2022 2:45 AM] szybet
It isin't set in the node, so when i read t next it wont work correctly


[6/26/2022 2:45 AM] tux_linux
/kobo/tmp/currentlyRunningUserApplication


[6/26/2022 2:45 AM] tux_linux
No?


[6/26/2022 2:46 AM] tux_linux
sysfs nodes are *created* when you read them


[6/26/2022 2:50 AM] szybet
You said that yourself


[6/26/2022 2:50 AM] szybet
I set the beightness to 30, check the node and its still 100


[6/26/2022 2:50 AM] tux_linux
This is nonsense


[6/26/2022 2:51 AM] tux_linux
Kernel bug maybe?


[6/26/2022 2:51 AM] tux_linux
Is it normal @NiLuJe ?


[6/26/2022 2:52 AM] tux_linux
I meant, on devices without the sysfs node


[6/26/2022 2:54 AM] szybet
GUI works fine


[6/26/2022 2:55 AM] szybet
You can look at the code, i pushed it


[6/26/2022 3:23 AM] tux_linux
Ok good


[6/26/2022 3:32 AM] tux_linux
Very good code at first sight


[6/26/2022 4:48 AM] ninuje
Random 5AM thought: you may have created the read entry on a system where it isn't actually supported (i.e., it's a plain file with stale content, not the actual sysfs entry)


[6/26/2022 4:48 AM] ninuje
Otherwise, make sure you're reading the right sysfs entry


[6/26/2022 4:48 AM] ninuje
reading the write one yields undefined results (or... something).


[6/26/2022 4:49 AM] ninuje
https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.h#L131

{Embed}
https://github.com/koreader/KoboUSBMS/blob/0399a26936f0025f79127725232b88b702e2b97b/usbms.h
KoboUSBMS/usbms.h at 0399a26936f0025f79127725232b88b702e2b97b · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[6/26/2022 4:51 AM] ninuje
And, yes, you're not reading the right sysfs entry 😉


[6/26/2022 4:51 AM] ninuje
https://github.com/Szybet/inkbox-power-deamon/blob/382768953802a2a04f9d184f1198f4ffc8f56e47/src/cinematicBrightness.cpp#L40-L51

{Embed}
https://github.com/Szybet/inkbox-power-deamon/blob/382768953802a2a04f9d184f1198f4ffc8f56e47/src/cinematicBrightness.cpp
inkbox-power-deamon/cinematicBrightness.cpp at 382768953802a2a04f9d...
Contribute to Szybet/inkbox-power-deamon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-67261


[6/26/2022 4:51 AM] ninuje
One of these things is not like the other ;p


[6/26/2022 7:10 AM] tux_linux
We will have to use a fixed number of buttons for all devices
Because it's simply impossible to size widget arrays depending on deviceID
Currently it only works on touch and mini with 4 buttons
It will segfault on your Nia


[6/26/2022 7:12 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/2014500317265ce07b010ec22f1d536597a44f97

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/2014500317265ce07b010ec22f1d536597a44f97
Local library: Functional improvements · Kobo-InkBox/inkbox@2014500
/mnt/data/projects/git/conversations/media/2014500317265ce07b010ec22f1d536597a44f97-551A9


[6/26/2022 7:16 AM] tux_linux
I got there but I'm stuck at that part: https://github.com/Kobo-InkBox/inkbox/blob/localLibraryWidget/locallibrarywidget.h#L46-L49
How to make the arrays change based on the device model

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/localLibraryWidget/locallibrarywidget.h
inkbox/locallibrarywidget.h at localLibraryWidget · Kobo-InkBox/ink...
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-0E5A8


[6/26/2022 7:21 AM] tux_linux
There's also idList to fix


[6/26/2022 7:21 AM] tux_linux
So sad, I was thinking this would be a great part of InkBox but then we have those giant cpp walls


[6/26/2022 7:25 AM] tux_linux
Only other option I would know about would be to have device-dependent builds with defines to do that job


[6/26/2022 7:43 AM] tux_linux
@pgaskin or @sherm_p if you have some idea about any of this, you will be very welcome
(Well, Szybet too, but Rust seems to be more your primary language, so to speak ;)

Ideally I'd want to be able to replace the int in the declaration with an existing variable that would have gone through some if else conditions to determine its value


[6/26/2022 7:46 AM] tux_linux
Principal error:
`invalid reference to non-static data member`
I kind of get the point of why it throws that, it wouldn't be a problem if I only needed to access the arrays from main, but I also need them in the functions, so they have to be declared in the header somehow


[6/26/2022 7:52 AM] sherm_p
From the link you provided, I can't quite tell what you're trying to do and what the issue is


[6/26/2022 7:53 AM] tux_linux
I explained it at the end of this message (edit)


[6/26/2022 7:54 AM] sherm_p
Are you talking about the array length?


[6/26/2022 7:54 AM] tux_linux
Yes


[6/26/2022 7:54 AM] sherm_p
Why not use vectors?


[6/26/2022 7:55 AM] tux_linux
I don't know about them?
If it can work better then good


[6/26/2022 7:55 AM] sherm_p
https://doc.qt.io/qt-5/qvector.html


[6/26/2022 7:55 AM] sherm_p
C style arrays are rarely the answer in C++ these days

{Reactions}
👍 

[6/26/2022 7:57 AM] tux_linux
Thanks for the link, will look at that tomorrow morning (1:56am here)
Do you think it will require a lot of changes in the code or it will be a drop in replacement?


[6/26/2022 7:59 AM] sherm_p
Not sure. You can do index notation `[]` to access the arrays, although in some situations, the `.at()` method may be more suitable. That linked Qt page has more info.


[6/26/2022 7:59 AM] tux_linux
Ok, well, that's not too hard to replace
Thanks


[6/26/2022 8:00 AM] sherm_p
I would suggest researching (Qt) containers, modern programming languages have all sorts of nice-to-use data structures

{Reactions}
👍 

[6/26/2022 8:01 AM] sherm_p
Such as maps, vectors


[6/26/2022 8:01 AM] sherm_p
sets


[6/26/2022 8:02 AM] sherm_p
See here for what's available in Qt: https://doc.qt.io/qt-5/containers.html


[6/26/2022 12:06 PM] szybet
i coppied it from inkbox code... @tux-linux  :(?


[6/26/2022 12:07 PM] szybet
vectors are powerfull, arrays are problematic


[6/26/2022 12:08 PM] szybet
maps are complicated :(


[6/26/2022 1:22 PM] szybet
```
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat actual_brightness 
42
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat actual_brightness 
40
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat actual_brightness 
38
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat brightness 
79
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat brightness 
79
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# cat brightness 
79
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# 

```
there is a bug in inkbox or what?


[6/26/2022 2:50 PM] szybet
which version of fbgrab do i use?


[6/26/2022 2:50 PM] szybet
http://trac.ak-team.com/trac/browser/niluje/Configs/trunk/Kindle/Misc/FBGrab


[6/26/2022 2:50 PM] szybet
this link doesnt work


[6/26/2022 2:50 PM] szybet
its on fbink github


[6/26/2022 3:13 PM] szybet
well @tux-linux i will use the built in fbgrab binary fo those reasons
1 fbgrab from niluje cant be accesed
2 for normal fbgrab i need to compile libpng, and then zlib and i cant zlib to compile a shared library


[6/26/2022 3:13 PM] szybet
¯\_(ツ)_/¯


[6/26/2022 3:26 PM] ninuje
https://svn.ak-team.com/svn/Configs/trunk/Kindle/Misc/FBGrab/


[6/26/2022 3:26 PM] ninuje
I'll update the link, forgot about it ;)


[6/26/2022 3:26 PM] szybet
is it possible to compile under musl?


[6/26/2022 3:26 PM] szybet
it uses zlib and libpng too...


[6/26/2022 3:27 PM] ninuje
Depending on what exactly you need it for, you might be able to use fbink_dump & friends instead


[6/26/2022 3:28 PM] szybet
get a png screenshot of the screen


[6/26/2022 3:28 PM] ninuje
Well, yeah, its sole purpose is dumping a fb to a png, so you kinda need libpng ;).


[6/26/2022 3:28 PM] ninuje
spng or whatever the name is isn't mature enough to support all the things I need for that


[6/26/2022 3:28 PM] szybet
fbink_dump dumps it in pure bytes?


[6/26/2022 3:28 PM] ninuje
Yep


[6/26/2022 3:29 PM] szybet
i could restore the screen with pure bytes...


[6/26/2022 3:29 PM] szybet
i will try it


[6/26/2022 3:30 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/5ecd240af45edadc0efd3da1e995fc6241f8a568/fbink.h#L1088

{Embed}
https://github.com/NiLuJe/FBInk/blob/5ecd240af45edadc0efd3da1e995fc6241f8a568/fbink.h
FBInk/fbink.h at 5ecd240af45edadc0efd3da1e995fc6241f8a568 · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 5ecd240af45edadc0efd3da1e995fc6241f8a568 · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-F0F16


[6/26/2022 3:35 PM] tux_linux
cat brightness


[6/26/2022 3:35 PM] szybet
?


[6/26/2022 3:36 PM] tux_linux
It would be great if you made a GH repo with it or just put the link of the SVN one in FBInk's readme 🙂


[6/26/2022 3:36 PM] tux_linux
This is even better


[6/26/2022 3:36 PM] tux_linux
Is there a node called `brightness`?


[6/26/2022 3:37 PM] szybet
yes?


[6/26/2022 3:37 PM] tux_linux
Does it work?


[6/26/2022 3:37 PM] tux_linux
Can you read it?


[6/26/2022 3:37 PM] szybet
no yes


[6/26/2022 3:37 PM] tux_linux
Oh ok


[6/26/2022 3:37 PM] tux_linux
Didn't see it


[6/26/2022 3:38 PM] tux_linux
So the brightness one is working


[6/26/2022 3:38 PM] szybet
actual_brightness is working


[6/26/2022 3:38 PM] tux_linux
Strange


[6/26/2022 3:38 PM] tux_linux
How does it work with InkBox then


[6/26/2022 3:38 PM] szybet
yes


[6/26/2022 3:38 PM] szybet
and i dont know why


[6/26/2022 3:39 PM] tux_linux
Might be using a config file and we don't know it


[6/26/2022 3:39 PM] szybet
you should know ;p


[6/26/2022 3:40 PM] ninuje
brightness is the setter


[6/26/2022 3:40 PM] ninuje
actual_brightness is the getter


[6/26/2022 3:40 PM] szybet
;_ ; nice naming then


[6/26/2022 3:41 PM] tux_linux
Great
I don't understand how my program works


[6/26/2022 3:41 PM] ninuje
Since the getter is optional, you need to keep track of your own sets


[6/26/2022 3:42 PM] ninuje
So you essentially have a fake software getter that just returns the last value you set


[6/26/2022 3:42 PM] ninuje
(by have I mean your write one ;p)


[6/26/2022 3:43 PM] tux_linux
Yes I did
But it's supposed to act only for N613


[6/26/2022 3:43 PM] tux_linux
(Glo)


[6/26/2022 4:02 PM] ninuje
c.f., https://github.com/torvalds/linux/blob/0840a7914caa14315a3191178a9f72c742477860/Documentation/ABI/stable/sysfs-class-backlight#L12-L29

{Embed}
https://github.com/torvalds/linux/blob/0840a7914caa14315a3191178a9f72c742477860/Documentation/ABI/stable/sysfs-class-backlight
linux/sysfs-class-backlight at 0840a7914caa14315a3191178a9f72c74247...
Linux kernel source tree. Contribute to torvalds/linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/linux-42E24


[6/26/2022 4:03 PM] szybet
```
[FBInk] No dump data to restore!
```
```cpp
void screenshotFbink() {
  /*
  string mainString = "/usr/bin/chroot /kobo /usr/bin/fbgrab ";
  mainString = mainString + "\"" + path + "\"";
  system(mainString.c_str());
  */
  
  fbink_dump(fbfd, &dump);
}

void restoreFbink() {
  FBInkConfig fbink_cfg = {0};
  fbink_restore(fbfd, &fbink_cfg, &dump);
}
```


[6/26/2022 4:03 PM] szybet
i wonder why


[6/26/2022 4:03 PM] szybet
i wonder how


[6/26/2022 4:10 PM] szybet
https://github.com/NiLuJe/FBInk/blob/master/utils/dump.c its the same as in this example

{Embed}
https://github.com/NiLuJe/FBInk/blob/master/utils/dump.c
FBInk/dump.c at master · NiLuJe/FBInk
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/dump.c at master · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-F0F16


[6/26/2022 4:10 PM] ninuje
What's the `dump` object?


[6/26/2022 4:10 PM] szybet
a global variable


[6/26/2022 4:11 PM] szybet
FBInkDump dump;
dump = {0};


[6/26/2022 4:11 PM] ninuje
Check the return value of `fbink_dump`


[6/26/2022 4:11 PM] szybet
extern FBInkDump dump;


[6/26/2022 4:11 PM] szybet
you mean?...


[6/26/2022 4:12 PM] ninuje
Check its return value, it might just have been failing for some reason and you didn't notice because it's uncaught


[6/26/2022 4:12 PM] szybet
`[FBInk] [memmap_fb] mmap: Invalid argument!`


[6/26/2022 4:13 PM] szybet
now i found this


[6/26/2022 4:13 PM] ninuje
Has `fbink_init` been run?


[6/26/2022 4:13 PM] szybet
yes


[6/26/2022 4:13 PM] szybet
other fbink calls work


[6/26/2022 4:13 PM] ninuje
Has `fbink_open` been run?


[6/26/2022 4:14 PM] szybet
of course


[6/26/2022 4:15 PM] ninuje
strace


[6/26/2022 4:15 PM] ninuje
20$ on the fb fd being bogus ;p


[6/26/2022 4:15 PM] szybet
i will try something


[6/26/2022 4:18 PM] szybet
do i need to run fbink_init with every new "fbink_cfg"?


[6/26/2022 4:19 PM] szybet
becouse i init it now before every call and it works


[6/26/2022 4:19 PM] szybet
🥴


[6/26/2022 4:27 PM] szybet
@tux-linux how do i save the brightness that the gui knows it? when i set mine to 0, the gui still thinks its 80% for example


[6/26/2022 4:35 PM] szybet
and there is a mess in the wiki


[6/26/2022 4:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-2B704.png


[6/26/2022 4:39 PM] tux_linux
I renamed the page


[6/26/2022 4:39 PM] szybet
coppied it


[6/26/2022 4:39 PM] tux_linux
03-brightness
In data config


[6/26/2022 4:40 PM] tux_linux
It's a redirect


[6/26/2022 4:40 PM] tux_linux
That's why it's in italics


[6/26/2022 4:42 PM] szybet
no success with that

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BD430.png


[6/26/2022 4:43 PM] szybet
where to save the configs? i cant find the path that you send


[6/26/2022 4:43 PM] szybet
oh got it


[6/26/2022 4:46 PM] tux_linux
It's because your device isn't a glo


[6/26/2022 4:46 PM] tux_linux
Even more nonsense


[6/26/2022 4:46 PM] tux_linux
Your code is good


[6/26/2022 4:48 PM] tux_linux
I'm getting a bunch of `Invalid Zip archive` in epubtool with a lot of books


[6/26/2022 4:48 PM] szybet
is that a valid path?


[6/26/2022 4:48 PM] tux_linux
Yes


[6/26/2022 4:48 PM] szybet
you can send those books to me


[6/26/2022 4:48 PM] szybet
strange


[6/26/2022 4:48 PM] tux_linux
Yeah


[6/26/2022 4:54 PM] ninuje
It depends ;).


[6/26/2022 4:54 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/566826d9265acc2d583cedfd5142ed852d5e3e1f/fbink.h#L659-L661

{Embed}
https://github.com/NiLuJe/FBInk/blob/566826d9265acc2d583cedfd5142ed852d5e3e1f/fbink.h
FBInk/fbink.h at 566826d9265acc2d583cedfd5142ed852d5e3e1f · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 566826d9265acc2d583cedfd5142ed852d5e3e1f · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-F0F16


[6/26/2022 4:54 PM] ninuje
You don't necessarily need multiple FBInkConfig structs, either.


[6/26/2022 4:55 PM] ninuje
And if you actually do, you might be able to simply copy the original one post-fbink_init instead of starting from scratch for each


[6/26/2022 4:55 PM] szybet
well okay thanks


[6/26/2022 5:05 PM] szybet
can i get simple markdown editor?


[6/26/2022 5:05 PM] szybet
this is buggy, not working and bad


[6/26/2022 5:05 PM] szybet
and i cant send a screenshow of it, the wiki


[6/26/2022 5:55 PM] tux_linux
??


[6/26/2022 5:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-768D1.png


[6/26/2022 5:55 PM] szybet
the editor is broken


[6/26/2022 5:56 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/6192927b985a9e703e44d3b14b833b8e2a0668ff

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/6192927b985a9e703e44d3b14b833b8e2a0668ff
Local library: Switch to QVector for widget arrays; improvements · ...
Thanks to @shermp for the help provided on QVectors, which I now use here instead of C-style arrays which could only have a fixed size.
/mnt/data/projects/git/conversations/media/6192927b985a9e703e44d3b14b833b8e2a0668ff-08F4B


[6/26/2022 5:57 PM] tux_linux
Learn mediawiki syntax


[6/26/2022 5:57 PM] szybet
does it still error?


[6/26/2022 5:57 PM] tux_linux
I think it's trying to put html tags into <pre> text


[6/26/2022 5:57 PM] szybet
its broken


[6/26/2022 5:57 PM] tux_linux
Not mediawiki itself


[6/26/2022 5:58 PM] tux_linux
epubtool yes
The double free corruption thing has disappeared somehow


[6/26/2022 5:59 PM] szybet
editor yes


[6/26/2022 5:59 PM] szybet
you havent send the files yet


[6/26/2022 5:59 PM] tux_linux
Edit source


[6/26/2022 6:00 PM] tux_linux
The editor is not the official one
It didn't work so I installed a third party one
But edit source is still edit source


[6/26/2022 6:01 PM] szybet
is it markdown? i dont think so


[6/26/2022 6:01 PM] tux_linux
It is not


[6/26/2022 6:01 PM] tux_linux
Search mediawiki syntax on Google


[6/26/2022 6:01 PM] szybet
😒


[6/26/2022 6:02 PM] tux_linux
Do you think it's my fault if it doesn't work?


[6/26/2022 6:30 PM] szybet
i  didnt meaned that

{Reactions}
👍 

[6/26/2022 6:30 PM] szybet
i will write it in markdown and then send you the markdown + pdf of it for easier copy


[6/26/2022 7:38 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/2521834d0625b7ef7471f886c38dd4f95145668f

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/2521834d0625b7ef7471f886c38dd4f95145668f
Local library: Segfault bugfixes · Kobo-InkBox/inkbox@2521834
/mnt/data/projects/git/conversations/media/2521834d0625b7ef7471f886c38dd4f95145668f-A1FBF


[6/26/2022 7:38 PM] szybet
```
connect(localLibraryWidgetWindow, SIGNAL(openBookSignal(QString, bool)), SLOT(openBookFile(QString, bool)));
    connect(localLibraryWidgetWindow, SIGNAL(refreshScreen()), SLOT(refreshScreen()));
```


[6/26/2022 7:38 PM] szybet
oh this


[6/26/2022 7:39 PM] szybet
i have no idea, but this something causes seqfaults


[6/26/2022 7:39 PM] szybet
only sometimes, sometimes it does work


[6/26/2022 7:53 PM] tux_linux
Where?


[6/26/2022 7:53 PM] szybet
not this?


[6/26/2022 7:53 PM] szybet
did you fixed it?


[6/26/2022 7:54 PM] tux_linux
What problem?


[6/26/2022 7:54 PM] tux_linux
I did fix segfaults
a lot


[6/26/2022 7:55 PM] tux_linux
To regenerate database you need to remove /data/onboard/.inkbox/LocalLibrary.db


[6/26/2022 7:55 PM] tux_linux
btw


[6/26/2022 7:55 PM] szybet
segfaults


[6/26/2022 7:55 PM] tux_linux
Then here


[6/26/2022 7:56 PM] szybet
soo what was causing it?


[6/26/2022 7:56 PM] tux_linux
Not sure
Math magic


[6/26/2022 7:56 PM] szybet
👀


[6/26/2022 7:57 PM] tux_linux
The code is kind of hard to understand
Even for me


[6/26/2022 7:57 PM] tux_linux
Especially the for loops


[6/26/2022 7:57 PM] tux_linux
I only know what that do when I write them
After that I forget
Too complicated


[6/26/2022 7:58 PM] szybet
it is like that


[6/26/2022 7:58 PM] szybet
can i run a script with this?
```
if [ -d "/sys/class/net/${WIFI_DEV}" ]; then
    if [ "${DEVICE}" == "n873" ] || [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n306" ]; then
        WIFI_MODULE="/modules/wifi/8189fs.ko"
        SDIO_WIFI_PWR_MODULE="/modules/drivers/mmc/card/sdio_wifi_pwr.ko"
        WIFI_DEV="eth0"
    elif [ "${DEVICE}" == "n705" ] || [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n905c" ] || [ "${DEVICE}" == "n613" ]; then
        WIFI_MODULE="/modules/dhd.ko"
        SDIO_WIFI_PWR_MODULE="/modules/sdio_wifi_pwr.ko"
        WIFI_DEV="eth0"
    elif [ "${DEVICE}" == "n437" ]; then
        WIFI_MODULE="/modules/wifi/bcmdhd.ko"
        SDIO_WIFI_PWR_MODULE="/modules/drivers/mmc/card/sdio_wifi_pwr.ko"
        WIFI_DEV="wlan0"
    else
        WIFI_MODULE="/modules/dhd.ko"
        SDIO_WIFI_PWR_MODULE="/modules/sdio_wifi_pwr.ko"
        WIFI_DEV="eth0"
    fi

    # Checking if we have a fully configured Wi-Fi interface
    # same as for /tmp/savedBrightness, avoid confussion
    if [[ ! -f "/run/was_connected_to_wifi" ]]; then
        if grep -q "up" "/sys/class/net/${WIFI_DEV}/operstate"; then
            echo "true" > /run/was_connected_to_wifi
        fi
    fi
    
    killall -q dhcpcd wpa_supplicant
    # Uncomment this later
    ifconfig "${WIFI_DEV}" down 2>/dev/null
    if [ "${DEVICE}" == "n705" ] || [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n905c" ] || [ "${DEVICE}" == "n613" ] || [ "${DEVICE}" == "n437" ]; then
        wlarm_le down
    fi
    rmmod "${WIFI_MODULE}" 2> /dev/null
    rmmod "${SDIO_WIFI_PWR_MODULE}" 2> /dev/null
fi
```


[6/26/2022 7:58 PM] szybet
i dont see a sense rewriting it to cpp


[6/26/2022 7:58 PM] tux_linux
Well there are syscalls


[6/26/2022 7:59 PM] szybet
ugh...


[6/26/2022 7:59 PM] szybet
is there a syscall for rmmod?


[6/26/2022 7:59 PM] tux_linux
Yes?
Why would insmod exist otherwise


[6/26/2022 7:59 PM] szybet
can i freeze dhcpcd and wpa_sup?


[6/26/2022 7:59 PM] szybet
propably not


[6/26/2022 8:00 PM] tux_linux
Freeze how?


[6/26/2022 8:00 PM] szybet
just like the apps


[6/26/2022 8:00 PM] szybet
SIGSTOP


[6/26/2022 8:01 PM] tux_linux
Why would you want that?


[6/26/2022 8:01 PM] szybet
faster recconecting or something?


[6/26/2022 8:03 PM] tux_linux
It will not work
It doesn't suspend because it can't put the wifi card off


[6/26/2022 8:03 PM] tux_linux
Try it?


[6/26/2022 8:03 PM] szybet
well okay then not


[6/26/2022 8:06 PM] szybet
`if [ -d "/sys/class/net/${WIFI_DEV}" ]; then`
how? the variable isint created yet


[6/26/2022 8:18 PM] ninuje
`system`


[6/26/2022 8:18 PM] ninuje
Stupid shell logic like that is just fine as stupid shell logic


[6/26/2022 8:19 PM] szybet
🤨


[6/26/2022 8:20 PM] ninuje
i.e., keep the script, run it via `system`


[6/26/2022 8:20 PM] szybet
nah, i already started rewriting it


[6/26/2022 8:20 PM] ninuje
Good luck w/ procps.


[6/26/2022 9:08 PM] tux_linux
One thing: the local library only shows epubs currently


[6/26/2022 9:33 PM] szybet
so i need to do one for pdfs?


[6/26/2022 9:35 PM] tux_linux
I have an idea


[6/26/2022 9:35 PM] tux_linux
No need for that


[6/26/2022 9:35 PM] szybet
why?


[6/26/2022 9:35 PM] szybet
dont use python and node.


[6/26/2022 9:36 PM] tux_linux
No


[6/26/2022 9:36 PM] tux_linux
I was just thinking of sh
Or C


[6/26/2022 9:37 PM] szybet
how would you do that in sh?


[6/26/2022 9:37 PM] szybet
c sure


[6/26/2022 9:38 PM] szybet
if you want


[6/26/2022 9:44 PM] tux_linux
Just complete the JSON?


[6/26/2022 9:44 PM] tux_linux
With mutool + something else


[6/26/2022 9:45 PM] tux_linux
I'll see


[6/26/2022 9:56 PM] szybet
What? PDF? Sh?


[6/26/2022 10:02 PM] tux_linux
You will see


[6/26/2022 10:47 PM] szybet
```
POWER_BUTTON_WATCHDOG_PID=${!}
        disown # what is this
        /usr/local/bin/wifi/connect_to_network.sh "${ESSID}" "${PASSPHRASE}"
        if ! grep -q "true" /tmp/wake_watchdog_termination 2>/dev/null; then
            kill -9 ${POWER_BUTTON_WATCHDOG_PID}
        fi
        rm -f /tmp/wake_watchdog_termination
        rm -f /run/was_connected_to_wifi
```


[6/26/2022 10:48 PM] szybet
watchdog? what is this


[6/26/2022 10:48 PM] tux_linux
It's if you press the power button while wifi was reconnecting
It makes sense?


[6/26/2022 10:49 PM] szybet
it prevents it from going to sleep?


[6/26/2022 10:51 PM] tux_linux
Yeah precisely


[6/26/2022 10:51 PM] szybet
so it isint needed anymore


[6/26/2022 10:52 PM] tux_linux
Yeah?


[6/26/2022 10:52 PM] szybet
okay, thanks


[6/26/2022 10:52 PM] tux_linux
No, I mean the opposite


[6/26/2022 10:52 PM] tux_linux
You implement wifi reconnection right?


[6/26/2022 10:52 PM] szybet
yes?


[6/26/2022 10:53 PM] szybet
doing it right now


[6/26/2022 10:53 PM] tux_linux
But what will happen if the power button is pressed while wifi is reconnecting?


[6/26/2022 10:54 PM] szybet
now its designed that the new watcher will send a message and wait for afterthread to finish the current task, after its finished it checks for the message, if its there it will be killed

{Reactions}
👍 

[6/26/2022 10:54 PM] szybet
i will implement fork processes if some tasks take too long


[6/27/2022 12:58 AM] szybet
@tux-linux i tryied removing modules from plain cpp, but it doesnt work


[6/27/2022 12:58 AM] szybet
you can rewiev the code here:
https://github.com/Szybet/inkbox-power-deamon/blob/65903fd6a2d933091d8fb677c6b900aa4ab54bcf/src/Wifi.cpp#L15=


[6/27/2022 12:58 AM] tux_linux
What's the error?


[6/27/2022 12:58 AM] szybet
if you dont figure this out till tommorow, i will use rmmod


[6/27/2022 12:59 AM] szybet
it outputs != 0 that indicated that it didnt worked


[6/27/2022 12:59 AM] szybet
so something other than 0


[6/27/2022 3:52 AM] tux_linux
Is the module actually removed?


[6/27/2022 3:53 AM] tux_linux
`lsmod`


[6/27/2022 3:53 AM] tux_linux
Another possibility: you unloaded the module multiple times


[6/27/2022 4:47 AM] tux_linux
Ok, there:
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/explore_local_library.sh
You need to update rootfs, gui-bundle and inkbox for it to work
Now it will show epubs+pdfs+images


[6/27/2022 7:42 AM] szybet
No


[6/27/2022 8:04 AM] tux_linux
Did you try `perror`?


[6/27/2022 8:25 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/ll-F5B9F.png
/mnt/data/projects/git/conversations/media/ll1-1884E.png


[6/27/2022 8:56 AM] szybet
What


[6/27/2022 8:57 AM] szybet
Looks good... Now what about more than 4 books?

{Reactions}
👍 

[6/27/2022 8:58 AM] szybet
And what will the reader button now do?


[6/27/2022 9:02 AM] tux_linux
look it up


[6/27/2022 9:02 AM] tux_linux
it depends on the device


[6/27/2022 9:02 AM] tux_linux
Reader button will open this
I will design some home page with recent books + cover or smth


[6/27/2022 9:03 AM] szybet
So its possible?


[6/27/2022 9:03 AM] tux_linux
yes


[6/27/2022 9:04 AM] tux_linux
but the icon size might make the window clip out


[6/27/2022 9:05 AM] szybet
You mean?


[6/27/2022 9:06 AM] szybet
Will try it

{Reactions}
👍 

[6/27/2022 9:07 AM] tux_linux
The window might get too big for the screen
and you just won't see a part of it


[6/27/2022 9:08 AM] szybet
So less books then, we will se for each device

{Reactions}
👍 

[6/27/2022 9:08 AM] tux_linux
It would be nice to find a way to fix this alignment problem (text should start at the same column)

{Attachments}
/mnt/data/projects/git/conversations/media/align-B12DC.png


[6/27/2022 9:08 AM] tux_linux
Icons are supposed to be the same size, I even tried to remove `Qt::KeepAspectRatio` but it didn't make any difference


[6/27/2022 9:09 AM] szybet
I dont swe a problem


[6/27/2022 9:09 AM] szybet
Oh


[6/27/2022 9:09 AM] szybet
Yes we need to fix that


[6/27/2022 9:10 AM] tux_linux
It isn't *that* bad, but still


[6/27/2022 9:10 AM] szybet
Do the images have the same size? The same aspect ratio?


[6/27/2022 9:10 AM] tux_linux
I pushed everything to every repo (inkbox, gui-bundle)


[6/27/2022 9:10 AM] tux_linux
Yes
well they are supposed to have the same size


[6/27/2022 9:11 AM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/f01999cb0e048e5fa7d51056eae9cd8dadaba598/content/inkbox/explore_local_library.sh#L52
for example (`convert` command)


[6/27/2022 9:14 AM] szybet
The exact same size?


[6/27/2022 9:14 AM] szybet
Check this


[6/27/2022 9:50 AM] szybet
Maybe a big clock, and weather info?


[6/27/2022 9:50 AM] szybet
And you can choose between this


[6/27/2022 9:50 AM] szybet
I would like somethink like that


[6/27/2022 2:39 PM] szybet
```
ntpd: bad address '0.pool.ntp.org'
ntpd: bad address '1.pool.ntp.org'
ntpd: bad address '2.pool.ntp.org'
ntpd: bad address '3.pool.ntp.org'
ntpd: bad address '3.pool.ntp.org'
ntpd: bad address '2.pool.ntp.org'
ntpd: bad address '1.pool.ntp.org'
ntpd: bad address '0.pool.ntp.org'
```


[6/27/2022 2:39 PM] szybet
well


[6/27/2022 2:39 PM] szybet
we need other servers


[6/27/2022 2:40 PM] tux_linux
it's dead?


[6/27/2022 2:40 PM] szybet
yea


[6/27/2022 2:40 PM] tux_linux
great


[6/27/2022 2:41 PM] szybet
why does connecting to wifi from the gui take so much time? from cli its fast


[6/27/2022 2:41 PM] tux_linux
because it does failing ntp? 😉


[6/27/2022 2:41 PM] szybet
not for so long


[6/27/2022 2:41 PM] tux_linux
idk
i use both cli and gui and it's the same time


[6/27/2022 2:42 PM] szybet
maybe on the nia


[6/27/2022 2:42 PM] szybet
or maybe im impatient


[6/27/2022 2:42 PM] nonasuomy
Would love for the display to do this basically like an idle status screen with extra extensions for fun like a todo list that can wake up every few hours or or so


[6/27/2022 2:43 PM] szybet
impossible


[6/27/2022 2:43 PM] szybet
it cant wake up from itself


[6/27/2022 2:43 PM] tux_linux
great, another brain damage project

{Reactions}
😅 

[6/27/2022 2:43 PM] szybet
or the rtc clock can do it?


[6/27/2022 2:43 PM] tux_linux
`rtcwake`


[6/27/2022 2:43 PM] szybet
oh


[6/27/2022 2:43 PM] szybet
more like a user app


[6/27/2022 2:43 PM] tux_linux
But was InkBox designed for that? No


[6/27/2022 2:44 PM] tux_linux
Much more appropriate there


[6/27/2022 2:44 PM] szybet
can it be used for that? of course


[6/27/2022 2:44 PM] szybet
you can write it yourself you know ;p


[6/27/2022 2:45 PM] nonasuomy
I can’t even port a device let alone brogram one.


[6/27/2022 2:45 PM] tux_linux
If you had a proper Kobo the port would already be done

{Reactions}
😂 

[6/27/2022 2:45 PM] szybet
qt is easier than that


[6/27/2022 2:45 PM] tux_linux
Even myself can't do it


[6/27/2022 2:46 PM] tux_linux
yes, and you don't necessarily have to use Qt


[6/27/2022 2:46 PM] tux_linux
You can even develop a KoBox extension written in whatever language that will display fine via X11


[6/27/2022 2:48 PM] szybet
user apps can be used with xorg?


[6/27/2022 2:48 PM] szybet
```
Cant unload module
module eroror: : No such file or directory
Cant unload module
second module eorroro: No such file or directory
```


[6/27/2022 2:49 PM] szybet
w h a t


[6/27/2022 2:49 PM] tux_linux
No, it's separate things


[6/27/2022 2:50 PM] nonasuomy
Maybe just set the ground work for an idle screen


[6/27/2022 2:50 PM] nonasuomy
So by default books show then userland can modify that


[6/27/2022 2:50 PM] szybet
???


[6/27/2022 2:51 PM] tux_linux
https://github.com/brunolalb/yawk

{Embed}
https://github.com/brunolalb/yawk
GitHub - brunolalb/yawk: Yet Another Weather app for Kobo
Yet Another Weather app for Kobo. Contribute to brunolalb/yawk development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/yawk-119BD


[6/27/2022 2:51 PM] szybet
the problem is


[6/27/2022 2:51 PM] szybet
90% of those apps are in python for some reason


[6/27/2022 2:51 PM] tux_linux
But why would you want to waste so much space, the buttons, the labels and then in the tiny space left you have the idle display


[6/27/2022 2:51 PM] szybet
lets do it once and properly -_-


[6/27/2022 2:52 PM] tux_linux
I know, I used it on my Touch


[6/27/2022 2:52 PM] tux_linux
it isn't that slow


[6/27/2022 2:52 PM] tux_linux
but I still hate apps in Python


[6/27/2022 2:52 PM] szybet
its python


[6/27/2022 2:52 PM] szybet
no further discussion is needed

{Reactions}
😁 

[6/27/2022 2:55 PM] szybet
i cant relaunch wifi...


[6/27/2022 2:55 PM] szybet
`10: eth0: <NO-CARRIER,BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state DORMANT group default qlen 1000`


[6/27/2022 2:55 PM] szybet
state dormant?


[6/27/2022 2:55 PM] szybet
its in power saving mode?


[6/27/2022 2:55 PM] szybet
why, how?


[6/27/2022 2:56 PM] tux_linux
remove `sdio_wifi_pwr` maybe?


[6/27/2022 2:56 PM] szybet
why


[6/27/2022 2:56 PM] tux_linux
then load it back


[6/27/2022 2:56 PM] tux_linux
with 8189fs


[6/27/2022 2:57 PM] szybet
```
kobo:/# rmmod sdio_wifi_pwr
[ 1742.888545] mmc1: Timeout waiting for hardware interrupt.
[ 1752.908547] mmc1: Timeout waiting for hardware interrupt.
[ 1762.928610] mmc1: Timeout waiting for hardware interrupt.
```


[6/27/2022 2:57 PM] szybet
i cant


[6/27/2022 2:58 PM] szybet
oh shit

{Attachments}
/mnt/data/projects/git/conversations/media/message-7F1FF.txt


[6/27/2022 2:58 PM] tux_linux
reboot


[6/27/2022 2:59 PM] szybet
what happened?


[6/27/2022 2:59 PM] tux_linux
I don't know


[6/27/2022 2:59 PM] tux_linux
when things like that happen I just reboot


[6/27/2022 3:06 PM] szybet
i cant connect through cli


[6/27/2022 3:06 PM] szybet
still DORMANT


[6/27/2022 3:06 PM] szybet
but the gui does some back magic


[6/27/2022 3:06 PM] szybet
and it works


[6/27/2022 3:06 PM] tux_linux
so you broke your WiFi card?


[6/27/2022 3:06 PM] szybet
it does work


[6/27/2022 3:06 PM] szybet
only with


[6/27/2022 3:06 PM] szybet
the gui


[6/27/2022 3:06 PM] szybet
¯\_(ツ)_/¯


[6/27/2022 3:06 PM] tux_linux
`/usr/local/bin/wifi/connect_to_network.sh`
this is what the GUI uses


[6/27/2022 3:06 PM] szybet
me too


[6/27/2022 3:06 PM] tux_linux
then I don't know


[6/27/2022 3:08 PM] tux_linux
```
            elif [[ "$line" == "connect_to_wifi_network" ]]; then
                NET_ESSID=$(cat /kobo/run/wifi_network_essid)
                NET_PASSPHRASE=$(cat /kobo/run/wifi_network_passphrase)
                rm -f /kobo/run/wifi_network_essid
                rm -f /kobo/run/wifi_network_passphrase
                /usr/local/bin/wifi/connect_to_network.sh "${NET_ESSID}" "${NET_PASSPHRASE}"
                if [ ${?} != 0 ]; then
                    echo "false" > /kobo/run/wifi_connected_successfully
                else
                    echo "true" > /kobo/run/wifi_connected_successfully
                fi

```


[6/27/2022 3:09 PM] szybet
```
kobo:/usr/local/bin/wifi# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: usb0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether 9e:35:39:6d:43:c0 brd ff:ff:ff:ff:ff:ff
    inet 192.168.2.2/24 brd 192.168.2.255 scope global usb0
       valid_lft forever preferred_lft forever
10: eth0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN group default qlen 1000
    link/ether 58:b0:d4:9d:a6:8e brd ff:ff:ff:ff:ff:ff
kobo:/usr/local/bin/wifi# ./list_networks.sh 
kobo:/usr/local/bin/wifi# ifconfig eth0 up
kobo:/usr/local/bin/wifi# ifconfig eth0 up
kobo:/usr/local/bin/wifi# ifconfig eth0 up
kobo:/usr/local/bin/wifi# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: usb0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether 9e:35:39:6d:43:c0 brd ff:ff:ff:ff:ff:ff
    inet 192.168.2.2/24 brd 192.168.2.255 scope global usb0
       valid_lft forever preferred_lft forever
11: eth0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN group default qlen 1000
    link/ether 58:b0:d4:9d:a6:8e brd ff:ff:ff:ff:ff:ff
kobo:/usr/local/bin/wifi# 

``` nonsense


[6/27/2022 3:10 PM] szybet
but it lists it from the gui


[6/27/2022 3:10 PM] szybet
h o w


[6/27/2022 3:10 PM] tux_linux
`ls /kobo/run/`?


[6/27/2022 3:11 PM] szybet
```
kobo:/usr/local/bin/wifi# ls /kobo/run
brightness        test_ping_status  wifi_able
```


[6/27/2022 3:11 PM] tux_linux
Good


[6/27/2022 3:11 PM] szybet
no


[6/27/2022 3:11 PM] tux_linux
So before you could connect from CLI without problem?


[6/27/2022 3:11 PM] szybet
no


[6/27/2022 3:11 PM] szybet
i didnt tryied


[6/27/2022 3:12 PM] szybet
maybe once i connected succeslyfully


[6/27/2022 3:12 PM] tux_linux
ok


[6/27/2022 3:12 PM] szybet
how do i list the wifi networks?


[6/27/2022 3:12 PM] tux_linux
oh, `list_networks.sh` should output to a file


[6/27/2022 3:12 PM] tux_linux
`/run/wifi_networks_list`


[6/27/2022 3:15 PM] szybet
ok this works

{Reactions}
👍 

[6/27/2022 3:17 PM] szybet
okay it works now... it took 2 minutes?


[6/27/2022 3:17 PM] szybet
why


[6/27/2022 3:17 PM] tux_linux
hm sometimes it's really long


[6/27/2022 3:17 PM] tux_linux
worst record being ~6mins on Aura SE


[6/27/2022 3:17 PM] tux_linux
for some reason


[6/27/2022 3:18 PM] szybet
what is causing it?


[6/27/2022 3:18 PM] tux_linux
I don't know?


[6/27/2022 3:18 PM] tux_linux
I don't know how Kobo does it so much faster


[6/27/2022 3:19 PM] szybet
maybe wizards know that?


[6/27/2022 3:19 PM] szybet
pgaskin, niluje?


[6/27/2022 3:20 PM] tux_linux
maybe


[6/27/2022 3:20 PM] tux_linux
ask them


[6/27/2022 3:20 PM] szybet
no, you


[6/27/2022 3:22 PM] szybet
`No such file or directory` thats it


[6/27/2022 3:22 PM] szybet
sooo now what


[6/27/2022 3:22 PM] tux_linux
@NiLuJe , sorry for another ping, do you have an idea why Wi-Fi sometimes takes more than 5 minutes to connect while on Kobo it is done in seconds?
Record mentioned above: 7 minutes with the Aura SE. I use `udhcpc`, and `dhcpcd` on the Libra (it takes even more time) because some kernels don't have BPF support, thus, I can't run it.
Here is my script: https://github.com/Kobo-InkBox/rootfs/blob/master/usr/local/bin/wifi/connect_to_network.sh


[6/27/2022 3:23 PM] tux_linux
Did you look at this ? https://elixir.bootlin.com/busybox/1.35.0/source/modutils/insmod.c
BusyBox `insmod` source

{Embed}
https://elixir.bootlin.com/busybox/1.35.0/source/modutils/insmod.c
insmod.c - modutils/insmod.c - Busybox source code (1.35.0) - Bootlin
Elixir Cross Referencer - Explore source code in your browser - Particularly useful for the Linux kernel and other low-level projects in C/C++ (bootloaders, C libraries...)


[6/27/2022 3:24 PM] szybet
yes. i dont have those functions, libraries


[6/27/2022 3:25 PM] tux_linux
https://stackoverflow.com/a/12187362

{Embed}
https://stackoverflow.com/a/12187362
Is busybox available in shared library form?
Is busybox available in shared library form? I would like to use individual apps programmatically instead of using system(). I've heard about libbusybox and libbb but could not find any documentation.
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/27/2022 3:25 PM] tux_linux
It seems easier


[6/27/2022 3:25 PM] tux_linux
Plus you don't launch a new process


[6/27/2022 3:26 PM] szybet
well look


[6/27/2022 3:26 PM] szybet
im dumb


[6/27/2022 3:27 PM] szybet
mu function needs the module name, not the path


[6/27/2022 3:27 PM] szybet
and rmmod works with both for some reason


[6/27/2022 3:27 PM] tux_linux
but how do you specify a path?


[6/27/2022 3:28 PM] szybet
you used this: `WIFI_MODULE = "/modules/wifi/8189fs.ko";`


[6/27/2022 3:28 PM] tux_linux
```
rmmod /path/to/sdio_wifi_pwr.ko
rmmod sdio_wifi_pwr.ko
rmmod sdio_wifi_pwr
```
will work


[6/27/2022 3:28 PM] szybet
and i need only 8192fs


[6/27/2022 3:28 PM] tux_linux
8192fs?


[6/27/2022 3:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4AAEF.png


[6/27/2022 3:29 PM] szybet
the first one worked


[6/27/2022 3:29 PM] tux_linux
please fix your perror typos


[6/27/2022 3:29 PM] szybet
nah, just for fast testing


[6/27/2022 3:29 PM] tux_linux
after


[6/27/2022 3:29 PM] szybet
is the order important?


[6/27/2022 3:29 PM] tux_linux
yes, it's the right one


[6/27/2022 3:29 PM] szybet
of modules to remove


[6/27/2022 3:29 PM] szybet
okay


[6/27/2022 3:30 PM] tux_linux
well, maybe `O_NONBLOCK` is creating a race condition


[6/27/2022 3:30 PM] szybet
i dont know what is this


[6/27/2022 3:30 PM] szybet
an argument


[6/27/2022 3:30 PM] szybet
this propably means no arguments


[6/27/2022 3:32 PM] aryetis
it means it won't block and stop on the first error iirc


[6/27/2022 3:33 PM] tux_linux
So it's basically removing the two of them at once?


[6/27/2022 3:33 PM] szybet
n o t g o o d


[6/27/2022 3:34 PM] szybet
i will add a 200 ms delay


[6/27/2022 3:34 PM] tux_linux
Sometimes it's longer than that


[6/27/2022 3:35 PM] szybet
300


[6/27/2022 3:35 PM] tux_linux
How much time does it take on the Nia?


[6/27/2022 3:36 PM] szybet
what?


[6/27/2022 3:37 PM] tux_linux
to remove the module


[6/27/2022 3:37 PM] szybet
with what


[6/27/2022 3:37 PM] tux_linux
rmmod


[6/27/2022 3:38 PM] tux_linux
On the Glo HD it's 150ms
you should be good with 300 actually
But it depends on the Wi-Fi card used


[6/27/2022 3:39 PM] tux_linux
You can't just remove the `O_NONBLOCK` flag?


[6/27/2022 3:40 PM] szybet
```c
#define delete_module(name, flags) syscall(__NR_delete_module, name, flags)
#define init_module(module_image, len, param_values)                           \
  syscall(__NR_init_module, module_image, len, param_values)
```


[6/27/2022 3:40 PM] szybet
its a syscall


[6/27/2022 3:40 PM] szybet
i dont think so


[6/27/2022 3:43 PM] szybet
```
kobo:/# time bash -c "rmmod 8189fs; rmmod sdio_wifi_pwr"
real    0m 0.26s
user    0m 0.01s
sys     0m 0.02s
kobo:/# 
```


[6/27/2022 3:43 PM] tux_linux
260ms


[6/27/2022 3:43 PM] szybet
you can add more time for specific devices later if you want


[6/27/2022 3:43 PM] szybet
for now 300


[6/27/2022 3:43 PM] tux_linux
ok


[6/27/2022 3:44 PM] szybet
put the delay after removing both modules or between?


[6/27/2022 3:44 PM] tux_linux
between


[6/27/2022 3:48 PM] aryetis
I checked O_NONBLOCK means "stop on the first error <=> don't get blocked in a loop if you can't remove it"


[6/27/2022 3:49 PM] aryetis
so if the first one worked, delaying shouldn't have an impact


[6/27/2022 3:49 PM] tux_linux
thanks
but then what's the problem with the other one...


[6/27/2022 3:53 PM] aryetis
what does the second one return ?


[6/27/2022 3:54 PM] szybet
it works


[6/27/2022 3:54 PM] aryetis
XD


[6/27/2022 3:54 PM] aryetis
ok then


[6/27/2022 4:00 PM] ninuje
Check the syslogs, identify which step is stalling.


[6/27/2022 4:00 PM] ninuje
On mobile right now, but that final wpa call looks fishy


[6/27/2022 4:01 PM] tux_linux
```
Successfully initialized wpa_supplicant
rfkill: Cannot get wiphy information
udhcpc: started, v1.34.1
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc failed to get a DHCP lease
udhcpc: broadcasting discover
udhcpc: broadcasting select for 192.168.1.14, server 192.168.1.1
udhcpc: lease of 192.168.1.14 obtained from 192.168.1.1, lease time 7200
```
That's the Glo HD's udhcpc output
Will check syslog


[6/27/2022 4:02 PM] ninuje
With timestamps


[6/27/2022 4:03 PM] tux_linux
Well, it basically broadcasts a discover every 5s, then when it says failed it waits for 20s then starts again
So (4*5)+20 = 40s


[6/27/2022 4:03 PM] tux_linux
welp
```
kobo:/# cat /var/log/messages 
Jun 27 10:01:43 kobo syslog.info syslogd started: BusyBox v1.34.1
kobo:/#
```


[6/27/2022 4:10 PM] tux_linux
Any idea for a better "No books found" message?

{Attachments}
/mnt/data/projects/git/conversations/media/nobooks-D3E2F.png


[6/27/2022 4:50 PM] szybet
No books found.


[6/27/2022 4:51 PM] tux_linux
A bit brutal, don't you think?


[6/27/2022 5:01 PM] aryetis
"No books could be found in your library.\n Add some via USB or explore the Online Library"

{Reactions}
👍 

[6/27/2022 5:03 PM] szybet
nah


[6/27/2022 5:03 PM] szybet
maybe


[6/27/2022 5:03 PM] szybet
***where books***


[6/27/2022 5:29 PM] szybet
```
Going sleep now!
[ 7307.310450] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
[ 7307.316999] PM: Device 0-0015 failed to suspend: error 1
[ 7307.322415] PM: Some devices failed to suspend, or early wake event detected
[ 7307.355397] ==== calc_soc_by_voltageMethod E60U22 ====
perror error sleeping:   : No error information
```
```cpp
log("Going sleep now!");
  CEG();
  closeFbink();
  std::chrono::milliseconds timespan(3000);

  int fd = open("/sys/power/state-extended", O_RDWR);
  write(fd, "1", 1);

  close(fd);


  int fd2 = open("/sys/power/state", O_RDWR);
  if (write(fd2, "mem", 3) < 0);
  {
    perror("perror error sleeping:   ");
  }




  close(fd2);

  exit(0);
```
```cpp
void closeFbink()
{
  fbink_close(fbfd);
}
```

```
kobo:/sys/kernel/debug# cat suspend_stats
success: 0
fail: 9
failed_freeze: 0
failed_prepare: 0
failed_suspend: 9
failed_suspend_late: 0
failed_suspend_noirq: 0
failed_resume: 0
failed_resume_early: 0
failed_resume_noirq: 0
failures:
  last_failed_dev:      0-0015
                        228c000.epdc
  last_failed_errno:    1
                        -1
  last_failed_step:     suspend
                        suspend
kobo:/sys/kernel/debug#
```
@tux-linux i need help with this one


[6/27/2022 5:29 PM] szybet
i cant go to sleep


[6/27/2022 5:29 PM] szybet
i have problems with sleeping


[6/27/2022 5:29 PM] szybet
🥴


[6/27/2022 5:30 PM] tux_linux
Wait 15s instead of 3


[6/27/2022 5:30 PM] szybet
._ .


[6/27/2022 5:30 PM] tux_linux
There is a reason I put sleep 15 in my script


[6/27/2022 5:32 PM] szybet
now i see this... i dont wait there any time, i just create the variable


[6/27/2022 5:32 PM] szybet
duck programming is real


[6/27/2022 5:32 PM] szybet
👀


[6/27/2022 5:32 PM] tux_linux
?


[6/27/2022 5:33 PM] szybet
https://en.wikipedia.org/wiki/Rubber_duck_debugging

{Embed}
https://en.wikipedia.org/wiki/Rubber_duck_debugging
Rubber duck debugging
In software engineering, rubber duck debugging (or rubberducking) is a method of debugging code by articulating a problem in spoken or written natural language. The name is a reference to a story in the book The Pragmatic Programmer in which a programmer would carry around a rubber duck and debug their code by forcing themselves to explain it, l...
/mnt/data/projects/git/conversations/media/Rubber_duck_assisting_with_debugging-D64CB.jpg


[6/27/2022 5:33 PM] tux_linux
yeah, but what's this to do with wi-fi sleep?


[6/27/2022 5:34 PM] szybet
not wifi sleep, i want to suspend the device


[6/27/2022 5:34 PM] szybet
and the epdc is the problem


[6/27/2022 5:34 PM] tux_linux
yea


[6/27/2022 5:47 PM] szybet
why i needed to wait 20 s


[6/27/2022 5:47 PM] tux_linux
Well
it happens


[6/27/2022 5:47 PM] szybet
`[ 8360.214559] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1` also elan touch stops it


[6/27/2022 6:05 PM] ninuje
The elan driver sucks


[6/27/2022 6:06 PM] ninuje
Happens with autostandby on the Elipsa, FWIW


[6/27/2022 6:06 PM] ninuje
No issues on the Sage with a similar 5s timeout


[6/27/2022 6:06 PM] ninuje
(also the elan driver ;p)


[6/27/2022 6:07 PM] szybet
oh as you are here, is there any way to not wait 20s before suspending?


[6/27/2022 6:07 PM] ninuje
Possibly the pen handling being quirky...


[6/27/2022 6:07 PM] szybet
not good


[6/27/2022 7:09 PM] szybet
tux-linux, i know you want to write a openrc script for the new demon

last time i tryied for mine bash implementation it didnt ended well, especielly i cant figure out how to restart the binary when the service restarts itself


[6/27/2022 7:11 PM] tux_linux
ok
well I will try it first
learn how it works
then write the script


[6/27/2022 7:11 PM] szybet
almost ready ( for the functionality the old gived )


[6/27/2022 7:11 PM] tux_linux
no hurry


[6/27/2022 7:12 PM] szybet
i want to believe it will work on other devices


[6/27/2022 7:12 PM] tux_linux
probably


[6/27/2022 7:12 PM] szybet
also i figured out to decrease the delay to 8 s


[6/27/2022 7:12 PM] szybet
it works on the nia


[6/27/2022 7:12 PM] szybet
¯\_(ツ)_/¯


[6/27/2022 7:13 PM] tux_linux
how


[6/27/2022 7:13 PM] tux_linux
it won't work on other devices for sure


[6/27/2022 7:14 PM] szybet
```
to be able to go so fast in time without delays, before setting 1 to
state-extended, there needs to be a 0. In other words, if there is a 1 full time
it wont work. for the nia it works like that. adjust it for other devices if it
doesnt work
```
wait some here, some there and it works

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B90B8.png


[6/27/2022 7:17 PM] tux_linux
what's CEG?


[6/27/2022 7:17 PM] szybet
```
// Explanation why this code looks garbage
// threads in cpp cant be killed from outside, so its needed to check every step
// for a variable change. -Use another library! no. thats such a simple program
// that it doesnt need it + other libraries do the same, for example
// boost::thread does exactly what i have described above, just in the
// background ~Szybet
```


[6/27/2022 7:17 PM] tux_linux
Yeah I read that


[6/27/2022 7:17 PM] szybet
thats it


[6/27/2022 7:17 PM] tux_linux
but what does CEG mean


[6/27/2022 7:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-73D09.png


[6/27/2022 7:18 PM] szybet
check if the goingsleep threads needs to exit


[6/27/2022 7:18 PM] tux_linux
ok


[6/27/2022 8:02 PM] szybet
```
if [ "${DARK_MODE}" == "true" ]; then
    if [ "${LOCKSCREEN}" == "true" ]; then
        chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh lockscreen
    else
        /opt/bin/fbink/fbink -k -f -h
        /opt/bin/fbink/fbink -q -g file=/tmp/dump.png -h
        kill -CONT $(pidof inkbox-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof oobe-inkbox-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof calculator-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof scribble 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof lightmaps 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof qreversi-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof 2048-bin 2>/dev/null) 2>/dev/null
        cinematic_brightness
    fi
else
        if [ "${LOCKSCREEN}" == "true" ]; then
                chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh lockscreen
        else
        /opt/bin/fbink/fbink -k -f
        /opt/bin/fbink/fbink -q -g file=/tmp/dump.png
        kill -CONT $(pidof inkbox-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof oobe-inkbox-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof calculator-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof scribble 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof lightmaps 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof qreversi-bin 2>/dev/null) 2>/dev/null
        kill -CONT $(pidof 2048-bin 2>/dev/null) 2>/dev/null
        cinematic_brightness
    fi
fi
``` how do i manage the lockscreen? the apps are freezen now


[6/27/2022 8:03 PM] tux_linux
Don't


[6/27/2022 8:03 PM] tux_linux
we will find out later i guess


[6/27/2022 9:02 PM] szybet
so wifi is causing all these problems with sleeping? crap...


[6/27/2022 10:16 PM] szybet
https://github.com/Szybet/inkbox-power-deamon/commit/b41f8c6e8ea995ebdbd373e39019b161a2410ba0
 i cant achieve going to suspend all the time, once it works once not

{Embed}
https://github.com/Szybet/inkbox-power-deamon/commit/b41f8c6e8ea995ebdbd373e39019b161a2410ba0
segmant faults after trying second sleep, and it doesnt go to sleep...
…ery often
/mnt/data/projects/git/conversations/media/b41f8c6e8ea995ebdbd373e39019b161a2410ba0-44F31


[6/27/2022 10:16 PM] szybet
it works more often if wifi is turned off already, and it didnt needed to shut it off


[6/27/2022 10:17 PM] szybet
```
[22089.542049] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
[22089.548692] PM: Device 0-0015 failed to suspend: error 1
[22089.554014] PM: Some devices failed to suspend, or early wake event detected
[22089.587672] ==== calc_soc_by_voltageMethod E60U22 ====

```
idk...


[6/27/2022 10:22 PM] tux_linux
then extend the wait time


[6/27/2022 10:22 PM] szybet
tryied


[6/27/2022 10:23 PM] szybet
and i dont want to


[6/27/2022 10:23 PM] szybet
with mine rewrite in bash i could achieve 10s max


[6/27/2022 10:24 PM] szybet
im sick of elan


[6/27/2022 10:24 PM] szybet
kernel compiled it as a module


[6/27/2022 10:24 PM] szybet
will try tommorow

{Reactions}
👍 

[6/27/2022 10:46 PM] szybet
how do i add modules to inkbox?

{Attachments}
/mnt/data/projects/git/conversations/media/message-A3E33.txt


[6/27/2022 10:47 PM] szybet
```
.
./drivers
./drivers/mmc
./drivers/mmc/card
./drivers/mmc/card/sdio_wifi_pwr.ko
./drivers/usb
./drivers/usb/gadget
./drivers/usb/gadget/function
./drivers/usb/gadget/function/u_ether.ko
./drivers/usb/gadget/function/usb_f_acm.ko
./drivers/usb/gadget/function/usb_f_ecm.ko
./drivers/usb/gadget/function/usb_f_ecm_subset.ko
./drivers/usb/gadget/function/usb_f_eem.ko
./drivers/usb/gadget/function/usb_f_fs.ko
./drivers/usb/gadget/function/usb_f_mass_storage.ko
./drivers/usb/gadget/function/usb_f_obex.ko
./drivers/usb/gadget/function/usb_f_rndis.ko
./drivers/usb/gadget/legacy
./drivers/usb/gadget/legacy/g_ether.ko
./drivers/usb/gadget/legacy/g_mass_storage.ko
./drivers/usb/gadget/libcomposite.ko
./fs
./fs/configfs
./fs/configfs/configfs.ko
./g_mass_storage.ko
./wifi
./wifi/8189fs.ko
```


[6/27/2022 10:47 PM] szybet
@tux-linux


[6/27/2022 10:51 PM] tux_linux
w h a t  h a p p e n e d


[6/27/2022 10:51 PM] szybet
I


[6/27/2022 10:51 PM] szybet
did


[6/27/2022 10:51 PM] szybet
this


[6/27/2022 10:51 PM] tux_linux
and you modified the kernel config


[6/27/2022 10:51 PM] szybet
yes


[6/27/2022 10:51 PM] tux_linux
then you need to recompile all the modules


[6/27/2022 10:51 PM] szybet
how


[6/27/2022 10:52 PM] szybet
im asking


[6/27/2022 10:52 PM] tux_linux
`make modules`


[6/27/2022 10:52 PM] tux_linux
is it really necessary? elan can't be put into a module?


[6/27/2022 10:52 PM] szybet
i hate this touchscreen


[6/27/2022 10:52 PM] tux_linux
i hate kobo hardware


[6/27/2022 10:52 PM] tux_linux
but i live with it


[6/27/2022 10:53 PM] szybet
i dont live with it


[6/27/2022 10:53 PM] szybet
and?


[6/27/2022 10:54 PM] tux_linux
can the kobo go to sleep with touchscreen support in-kernel?


[6/27/2022 10:54 PM] szybet
i said above


[6/27/2022 10:54 PM] szybet
i cant do it reliably


[6/27/2022 10:54 PM] tux_linux
well, now can it go to sleep at least once or does it fail


[6/27/2022 10:54 PM] szybet
putting it as a module would propably fix thsi


[6/27/2022 10:55 PM] szybet
when wifi is already turned off, yes


[6/27/2022 10:55 PM] tux_linux
it will probably just refuse to unload it because 'resource busy' nonsense


[6/27/2022 10:56 PM] szybet
i want to try it


[6/27/2022 10:56 PM] tux_linux
```
cd initrd/n306/opt
unsquashfs -d modules modules.sqsh
cd modules
<replace modules + compile wifi module out-of-tree>
rm ../modules.sqsh
mksquashfs . ../modules.sqsh -b 1048576 -comp gzip -always-use-fragments
```


[6/27/2022 10:57 PM] tux_linux
don't forget to add `CROSS_COMPILE` and `ARCH` variables to your make command
`make ARCH=arm CROSS_COMPILE=arm-nickel-linux-gnueabihf- modules -j8`


[6/27/2022 11:01 PM] szybet
```
  LD [M]  drivers/usb/gadget/function/usb_f_rndis.o
  LD [M]  drivers/usb/gadget/function/usb_f_fs.o
  LD [M]  drivers/usb/gadget/function/usb_f_mass_storage.o
  Building modules, stage 2.
  MODPOST 28 modules
ERROR: "gSleep_Mode_Suspend" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!
ERROR: "gIsCustomerUi" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!
ERROR: "gptHWCFG" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!

```


[6/27/2022 11:01 PM] szybet
nevermind


[6/27/2022 11:01 PM] tux_linux
might need to use `extern` keyword


[6/27/2022 11:01 PM] szybet
as easy as that?


[6/27/2022 11:02 PM] tux_linux
I said: **might**


[6/27/2022 11:03 PM] szybet
its already extern


[6/27/2022 11:04 PM] szybet
soo any other ideas?


[6/27/2022 11:04 PM] tux_linux
no?


[6/27/2022 11:04 PM] tux_linux
google?


[6/27/2022 11:27 PM] ninuje
You *absolutely* need to kill wifi before entering *any* PM state


[6/27/2022 11:27 PM] ninuje
At best it'll break wifi on resume, at semi-best it won't PM, at worst it'll horribly crash the kernel


[6/27/2022 11:28 PM] ninuje
(And, yeah, reset the state sysfs nodes on resume)


[6/27/2022 11:28 PM] szybet
how much kill it?


[6/27/2022 11:29 PM] szybet
unload modules too?


[6/27/2022 11:29 PM] ninuje
completely, no power


[6/27/2022 11:29 PM] szybet
how?


[6/27/2022 11:29 PM] ninuje
teardown network, unload module, kill power (unload module or ioctl for devices without the module)


[6/27/2022 11:29 PM] ninuje
the whole nine yards


[6/27/2022 11:30 PM] szybet
the problem is:
1. unload wifi modules
2. try go to sleep
3. weird elan touch problems, it doesnt go to sleep
4. try one more time, this time it doesnt touch the wifi modules becouse they are unloaded
5 it works


[6/27/2022 11:30 PM] ninuje
That's just fine?


[6/27/2022 11:30 PM] szybet
???


[6/27/2022 11:30 PM] ninuje
EBUSY means what it says on the tin: try again later


[6/27/2022 11:30 PM] ninuje
so, do try again later 😉


[6/27/2022 11:31 PM] ninuje
The default standby is at 4s of idle in KOReader, and 5s in Nickel, and it works (when it doesn't hit an EBUSY)


[6/27/2022 11:32 PM] ninuje
You absolutely need to handle EBUSY and unexpected wakeups in a power daemon anyway


[6/27/2022 11:32 PM] szybet
EBUSY? what?


[6/27/2022 11:32 PM] ninuje
Comes with the territory


[6/27/2022 11:32 PM] szybet
what is ebusy


[6/27/2022 11:32 PM] szybet
i know


[6/27/2022 11:33 PM] ninuje
The `errno` returned by the failed write to the `state` sysfs node that tells you the kernel said "nope, can't PM now"


[6/27/2022 11:33 PM] szybet
i know, so when i try many times it will work, someday?


[6/27/2022 11:34 PM] ninuje
Just retry in a fixed delay, or for a while in a loop, or something


[6/27/2022 11:34 PM] ninuje
It's entirely normal and expected to be met with that from time to time


[6/27/2022 11:35 PM] ninuje
On kobo, most common drivers telling you to fuck off are going to be the touch panel and the epdc


[6/27/2022 11:35 PM] ninuje
So, yeah, need to handle that sanely.


[6/27/2022 11:35 PM] szybet
a bit sad


[6/27/2022 11:35 PM] ninuje
Can't PM while stuff happens, it's perfectly normal


[6/28/2022 1:04 AM] szybet
```
Going to sleep now!
[ 2593.061030] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
[ 2593.067578] PM: Device 0-0015 failed to suspend: error 1
[ 2593.072994] PM: Some devices failed to suspend, or early wake event detected
[ 2593.107845] ==== calc_soc_by_voltageMethod E60U22 ====
Sleep finished, Exiting going to slee
```
```cpp
int fd2 = open("/sys/power/state", O_RDWR);
  int sleepStatus = -1;
  while (sleepStatus < 0) {
    CEG();
    std::this_thread::sleep_for(std::chrono::milliseconds(4000));
    sleepStatus = write(fd2, "mem", 3);
    if (sleepStatus < 0) {
      log("Failed to go to sleep");
    }
  }
  close(fd2);
```


[6/28/2022 1:04 AM] szybet
how do i get this stderr?...


[6/28/2022 1:08 AM] tux_linux
`fprintf`


[6/28/2022 1:08 AM] tux_linux
oh, I'm not sure for cpp


[6/28/2022 1:08 AM] tux_linux
`std::cerr`


[6/28/2022 1:09 AM] szybet
```
    echo "mem" > /sys/power/state 2>/tmp/sleep_error 
```
this worked


[6/28/2022 1:09 AM] szybet
for the shell


[6/28/2022 1:09 AM] tux_linux
what shell?


[6/28/2022 1:09 AM] szybet
bash? for the shell power demon


[6/28/2022 1:09 AM] tux_linux
you can just log `perror`?


[6/28/2022 1:11 AM] szybet
doesnt work


[6/28/2022 1:11 AM] szybet
now i need to find a way to capture it


[6/28/2022 1:11 AM] tux_linux
in what way?


[6/28/2022 1:14 AM] szybet
to know if the error accured

{Reactions}
👍 

[6/28/2022 12:13 PM] sherm_p
@tux-linux can I drop another Qt hint? Prefer the "new style" signals and slots where you possibly can. Avoid the old `SIGNAL()`/`SLOT()` macro's unless you absolutely must. It will probably make your life a lot easier, as the new style connect method is checked at compile time instead of run time.

{Reactions}
👌 👍 

[6/28/2022 12:20 PM] sherm_p
And, don't look at NickelDBus for inspiration... that's one of the "where I must" situations, where I have no compile time access to nickel signals.


[6/28/2022 1:10 PM] szybet
you mean this? https://wiki.qt.io/New_Signal_Slot_Syntax

{Embed}
https://wiki.qt.io/New_Signal_Slot_Syntax
New Signal Slot Syntax


[6/28/2022 1:49 PM] szybet
`Error relocating /inkbox-power-deamon: _ZNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEC1Ev: symbol not found`
i added one single line... `stringstream buffer;` which is really needed to capture cerr


[6/28/2022 1:49 PM] szybet
god i hate musl


[6/28/2022 2:35 PM] tux_linux
Always found that method unnecessarily complicated, that's my honest truth ;)
I'll try to do it like that from now on


[6/28/2022 2:38 PM] tux_linux
At this point you can static compile it with glibc if you want
Use arm-kobo-linux-gnueabihf
But that's a last resort, try to fix it first


[6/28/2022 2:51 PM] szybet
no


[6/28/2022 2:51 PM] szybet
if the worst happens i will use echo


[6/28/2022 2:54 PM] szybet
i cant capture the output of /sys/power/state


[6/28/2022 2:54 PM] szybet
i captured cerr


[6/28/2022 2:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-544F1.png


[6/28/2022 2:54 PM] szybet
and Writing to cerr went to this file


[6/28/2022 2:54 PM] szybet
but the error about elan dont


[6/28/2022 2:55 PM] szybet
i dont know now, waiting for suggestions


[6/28/2022 4:47 PM] szybet
when i `echo "mem" /sys/power/state` from another terminal ssh session, and i read `cat /dev/stderr` i get the error from the first terminal on the second one. but i cant get in cpp
```cpp
char byte[1000];
  int stderrdevice = open("/dev/stderr", O_RDONLY | O_NOCTTY);

  int fd2 = open("/sys/power/state", O_RDWR);
  write(fd2, "mem", 3);

  close(fd2);

  ssize_t size = read(stderrdevice, &byte, 1000);

  printf("Read byte %s\n", byte);
```
byte outputs nothing


[6/28/2022 4:47 PM] szybet
reading using fstream from /dev/stderr also does nothing


[6/28/2022 4:47 PM] szybet
im leaving it, not trying more, i cant find a solution. there is no documentation for it.


[6/28/2022 4:48 PM] szybet
the code is there on the repo


[6/28/2022 5:03 PM] szybet
https://stackoverflow.com/questions/72788881/reading-stderr-from-a-linux-device-after-writing-to-it-from-c


[6/28/2022 5:20 PM] tux_linux
https://stackoverflow.com/questions/44023742/redirect-stdout-stderr-using-dup2-then-resinstate-later
Question that a comment in your question pointed to

{Embed}
https://stackoverflow.com/questions/44023742/redirect-stdout-stderr-using-dup2-then-resinstate-later
Redirect stdout/stderr using dup2, then resinstate later
Background: We have an embedded linux system running Busybox (limited resources), we have a process running which normally spits out lots of info on the console (via stdout / stderr) but we'd like to
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/28/2022 8:12 PM] ninuje
Err, I have a single question: why?!


[6/28/2022 8:13 PM] ninuje
stderr is not a thing, it just happens to be what we ended up calling the default second output stream of a unix process


[6/28/2022 8:13 PM] ninuje
(i.e.., fd 2)


[6/28/2022 8:13 PM] ninuje
it's very very tied to a process


[6/28/2022 8:14 PM] ninuje
So, a better question is: what the hell are you trying to do


[6/28/2022 8:14 PM] ninuje
And the answers appears to be: logging.


[6/28/2022 8:14 PM] ninuje
So, either use a proper logging class that will log to a file


[6/28/2022 8:14 PM] ninuje
Or log to the syslog


[6/28/2022 8:14 PM] ninuje
Forget stderr, you're not a shell


[6/28/2022 8:15 PM] ninuje
And this won't even run *in* a shell otuside of debugging


[6/28/2022 8:15 PM] ninuje
(meaning you could *close* fd 0 to 2 on startup)


[6/28/2022 8:40 PM] szybet
i want to get errors from /sys/power/state


[6/28/2022 8:40 PM] tux_linux
In theory it's printing to the kernel's ring buffer


[6/28/2022 8:40 PM] szybet
and yes, im not on that level to even know what i want to do, and even name it


[6/28/2022 8:40 PM] tux_linux
So you can grab dmesg output or some klogd thing


[6/28/2022 8:41 PM] szybet
its not in dmesg


[6/28/2022 8:41 PM] szybet
and if it is, there is too much other crap


[6/28/2022 8:41 PM] tux_linux
```
[ 2593.061030] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
[ 2593.067578] PM: Device 0-0015 failed to suspend: error 1
[ 2593.072994] PM: Some devices failed to suspend, or early wake event detected
[ 2593.107845] ==== calc_soc_by_voltageMethod E60U22 ====
```
what is that?


[6/28/2022 8:41 PM] szybet
error


[6/28/2022 8:41 PM] szybet
outputed to the serial console


[6/28/2022 8:41 PM] tux_linux
it's clearly in the ring buffer


[6/28/2022 8:41 PM] tux_linux
the serial console prints the ring buffer


[6/28/2022 8:42 PM] tux_linux
ssh doesn't


[6/28/2022 8:42 PM] szybet
reading it from dmesg wont be efficient


[6/28/2022 8:42 PM] tux_linux
`klogd`


[6/28/2022 8:42 PM] tux_linux
I can make it start on-boot


[6/28/2022 8:42 PM] tux_linux
try it:
```
syslogd
klogd
cat /var/log/messages
```
the real implementation would probably be more like
```
syslogd -C8192
klogd
logread
```
But I don't know if it's easy to read the log like `logread` does in C++


[6/28/2022 8:51 PM] ninuje
You're confusing multiple different things together.


[6/28/2022 8:51 PM] ninuje
You're asking the kernel to go into suspend with that `write` call.


[6/28/2022 8:51 PM] ninuje
So it tries to.


[6/28/2022 8:51 PM] szybet
exactly


[6/28/2022 8:52 PM] szybet
not efficient


[6/28/2022 8:52 PM] ninuje
In the process, it logs stuff. That's logged to the kernel ringbuffer, which you usually read in a shell via dmesg (and is accessible in /proc/kmsg). FORGET ABOUT THAT.


[6/28/2022 8:52 PM] ninuje
You care about the kernel *failing* to suspend


[6/28/2022 8:52 PM] ninuje
Luckily, when it does that, your `write` call will *also* fail


[6/28/2022 8:53 PM] szybet
no, not always


[6/28/2022 8:53 PM] szybet
knowing what happened can be usefull too


[6/28/2022 8:53 PM] ninuje
So, check *that*, and interpret the exact reason why via `errno` (man `write` for the various reasons, most of the time, that'll be `EBUSY`).


[6/28/2022 8:54 PM] ninuje
e.g., https://github.com/koreader/koreader/blob/3a4af5e35e5c6fe19d88b42ea78d587dc06482ce/frontend/device/kobo/device.lua#L46-L63

{Embed}
https://github.com/koreader/koreader/blob/3a4af5e35e5c6fe19d88b42ea78d587dc06482ce/frontend/device/kobo/device.lua
koreader/device.lua at 3a4af5e35e5c6fe19d88b42ea78d587dc06482ce · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at 3a4af5e35e5c6fe19d88b4...
/mnt/data/projects/git/conversations/media/koreader-F8BAD


[6/28/2022 8:54 PM] ninuje
Okay, it's Lua, but that snippet happens to be C/FFI, so it's basically C ;p


[6/28/2022 8:54 PM] ninuje
And, magic, we end up logging stuff like


[6/28/2022 8:54 PM] ninuje
`06/28/22-02:25:09 ERROR Cannot write `mem` to file `/sys/power/state`: Device or resource busy`


[6/28/2022 8:55 PM] ninuje
Which is what we care about.


[6/28/2022 8:55 PM] ninuje
(the write failing, to handle it, and the exact error why, to log it)


[6/28/2022 8:57 PM] szybet
```cpp
  int status = write(fd2, "mem", 3);

  std::this_thread::sleep_for(std::chrono::milliseconds(500));

  if(status < 0)
  {
    log("Sleep failed:  " + (string)std::strerror(errno));
  }
```


[6/28/2022 8:57 PM] szybet
i dont think this will work, i had some problems when it failed but it no log


[6/28/2022 8:59 PM] ninuje
Unlikely.


[6/28/2022 9:00 PM] ninuje
Your sleep may be eating errno, though, but that's unrelated


[6/28/2022 9:01 PM] szybet
@tux-linux i have some concerns about `connect_to_network.sh`


[6/28/2022 9:01 PM] szybet
why are you after every try killing everything?


[6/28/2022 9:01 PM] szybet
and unloading the wifi module...


[6/28/2022 9:02 PM] ninuje
This is /sys/power/state: https://github.com/torvalds/linux/blob/941e3e7912696b9fbe3586083a7c2e102cee7a87/kernel/power/main.c#L615-L647

{Embed}
https://github.com/torvalds/linux/blob/941e3e7912696b9fbe3586083a7c2e102cee7a87/kernel/power/main.c
linux/main.c at 941e3e7912696b9fbe3586083a7c2e102cee7a87 · torvalds...
Linux kernel source tree. Contribute to torvalds/linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/linux-76083


[6/28/2022 9:02 PM] ninuje
It *will* report errors


[6/28/2022 9:03 PM] ninuje
All hell would have broken loose long ago if it didn't


[6/28/2022 9:03 PM] tux_linux
If an user reconnects to a Wi-Fi network, relaunching wpa_supplicant won't be good


[6/28/2022 9:03 PM] szybet
you are killing it


[6/28/2022 9:04 PM] szybet
every time the network dies


[6/28/2022 9:04 PM] tux_linux
Yeah? So you can connect to a new one?


[6/28/2022 9:07 PM] szybet
i will try it

also some questions
will fbink dump have some problems after going to sleep, then returning? i mean the data

do i need to close fbink before trying to suspend?


[6/28/2022 9:07 PM] szybet
its not good if you are trying to connect to one


[6/28/2022 9:07 PM] tux_linux
I would not think so
Suspend is just freezing all existing processes and the data in RAM is kept in RAM


[6/28/2022 9:09 PM] szybet
okay, but if the dhcp fails one time there is no need to kill everything everywher

suspend is another thing


[6/28/2022 9:10 PM] tux_linux
well, it needs to at least be killed before suspend or it will not be able to find the interface afterwards as Wi-Fi modules will be removed


[6/28/2022 9:10 PM] szybet
im doing this already


[6/28/2022 9:11 PM] szybet
no need after that doing this 3 times


[6/28/2022 9:11 PM] szybet
thats why it takes so long


[6/28/2022 9:12 PM] tux_linux
No, the problem is obtaining a dhcp lease
the two are not related


[6/28/2022 9:13 PM] szybet
for the nia its failing 3 times, okay, but no need to kill it every time


[6/28/2022 9:13 PM] tux_linux
I don't kill it if it fails


[6/28/2022 9:13 PM] tux_linux
where do you see it dying?


[6/28/2022 9:16 PM] szybet
`cleanup`


[6/28/2022 9:17 PM] tux_linux
```
if [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n437" ] || [ "${DEVICE}" == "n306" ] || [ "${DEVICE}" == "kt" ]; then
    udhcpc -i "${WIFI_DEV}"
else
    dhcpcd "${WIFI_DEV}"
fi


if [ ${?} != 0 ]; then
    echo "DHCP request failed."
    cleanup
    quit 1
fi
```


[6/28/2022 9:18 PM] tux_linux
It only does that if `udhcpc` fails


[6/28/2022 9:18 PM] tux_linux
`udhcpc` exits only when it's done connecting
(yeah, I should fix that, people who input wrong passwords can hang the device)


[6/28/2022 9:19 PM] szybet
udhcppc fails for me very often


[6/28/2022 9:19 PM] szybet
the password is good


[6/28/2022 9:19 PM] szybet
3 times^


[6/28/2022 9:19 PM] tux_linux
Yeah, it fails 3 times but without terminating itself until it succeeds


[6/28/2022 9:19 PM] szybet
hm hm hm


[6/28/2022 9:20 PM] tux_linux
run with `bash -x` if you don't believe me


[6/28/2022 9:23 PM] szybet
okay to the suspend

error that i was getting is happening only sometimes puts the device back from sleep, thats why i was so confused with everything. also:

```cpp
std::this_thread::sleep_for(std::chrono::milliseconds(4000));

  int fd2 = open("/sys/power/state", O_RDWR);
  int status = write(fd2, "mem", 3);
  close(fd2);

  std::this_thread::sleep_for(std::chrono::milliseconds(500));

  if (status < 0) {
    log("Sleep failed:  " + (string)std::strerror(errno));
  }
log("Sleep finished, Exiting going to sleep");
```

```
Going to sleep now!
[ 1555.171028] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
[ 1555.177576] PM: Device 0-0015 failed to suspend: error 1
[ 1555.183005] PM: Some devices failed to suspend, or early wake event detected
[ 1555.216798] ==== calc_soc_by_voltageMethod E60U22 ====
Sleep finished, Exiting going to sleep
```
i didnt clicked any button


[6/28/2022 9:23 PM] szybet
@NiLuJe  as i was saying...


[6/28/2022 11:31 PM] szybet
@tux-linux  will you mind if i clear dmesg before going suspend?


[6/28/2022 11:31 PM] szybet
i mean - normal user never sees that, only we do


[6/28/2022 11:31 PM] szybet
and if we will remember that this is clearing it, there is no problem with it


[6/28/2022 11:37 PM] szybet
👀 looks badly

{Attachments}
/mnt/data/projects/git/conversations/media/message-8CC3D.txt


[6/29/2022 12:40 AM] szybet
it works
https://github.com/Szybet/inkbox-power-deamon/commit/e53573b1b85f513cd4525273d6726d85a45266d5
such a horrible mess

it has all the basic functionality, but needs some improvments. i will get back to it soon and finish it. Now it would be cool to test this on other devices, if it works there on a basic level too. I attach the files becouse building it requires downloading a 120 Mb boost library

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-E3A43
/mnt/data/projects/git/conversations/media/libevdev.so.2.3-9B7F9.0
/mnt/data/projects/git/conversations/media/libfbink.so.1.0-6663E.0


[6/29/2022 1:56 AM] tux_linux
Good
Why did you not use boost function for CEG is you have boost then?


[6/29/2022 2:11 AM] ninuje
Nope, it's an array of bytes copied to a malloc'ed block of memory; the only thing that could affect it are some fb state changes (rota, bpp), and restore will warn about those.


[6/29/2022 2:13 AM] szybet
Hmm okay


[6/29/2022 2:13 AM] szybet
I had some problemy with restoring after closing


[6/29/2022 2:14 AM] szybet
But i didn't need to close anyway


[6/29/2022 2:14 AM] ninuje
Define "problems"


[6/29/2022 2:14 AM] ninuje
Also, define "closing"


[6/29/2022 2:15 AM] ninuje
I demand a strace. The likelihood of you encountering a libc/kernel issues are much lower than the likelihood of you screwing up somewhere 😉


[6/29/2022 2:15 AM] ninuje
That, or musl does wonky shit with `write` error handling


[6/29/2022 2:15 AM] ninuje
(it shouldn't, though)


[6/29/2022 2:15 AM] szybet
I use boost for split function, and some other things that the musl one is missing

I will also propably use boosts threads for some things propably


[6/29/2022 2:17 AM] szybet
Yes its my fault propably

It works so i dont care really, we will se after further testing


[6/29/2022 2:17 AM] szybet
Dodnt worked :p


[6/29/2022 2:17 AM] szybet
Fbink_close before suspending


[6/29/2022 2:18 AM] ninuje
Don't do that.


[6/29/2022 2:18 AM] ninuje
Either open/close at meaningful points of time, or don't open/close *at all* and let fbink open on demand (don't do that either, unless you really really need to keep the fd table empty)


[6/29/2022 2:19 AM] szybet
Okay, thanks


[6/29/2022 2:45 AM] tux_linux
I do care


[6/29/2022 6:56 AM] tux_linux
What to put in the bottom portion of the screen (home page)? I don't want this to be only recent books

{Attachments}
/mnt/data/projects/git/conversations/media/home-82552.png


[6/29/2022 8:21 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/7822f65e02ad273adf141590745701bdfe722f7b

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/7822f65e02ad273adf141590745701bdfe722f7b
Basic home screen + other improvements · Kobo-InkBox/inkbox@7822f65
/mnt/data/projects/git/conversations/media/7822f65e02ad273adf141590745701bdfe722f7b-FA256


[6/29/2022 8:43 AM] aryetis
- recently launched applications
- recently added books

{Reactions}
👍 

[6/29/2022 10:27 AM] szybet
More recent books?


[6/29/2022 10:27 AM] szybet
Maybe up to 8 recent books and that what aramir said


[6/29/2022 10:32 AM] szybet
Did you fixed the problem with epubtool wrongn ZIP archive?


[6/29/2022 10:37 AM] szybet
And when will you test the power demon


[6/29/2022 1:39 PM] tux_linux
No
And you did not add error-checking for books that don't have the required fields (`PublicationDate` for example), so it panics there because it doesn't know what to do when it isn't found


[6/29/2022 1:40 PM] tux_linux
When I'm done with this mess, the previous commit with the home screen took me a day to implement, dealing with `QVector<QJsonObject*>` is broken all the way, so I ended up putting the JSON info directly into the button's `objectName`


[6/29/2022 1:44 PM] szybet
send the books, i will do it


[6/29/2022 1:45 PM] tux_linux
ok, please take my fork


[6/29/2022 1:45 PM] szybet
why dont you use json array


[6/29/2022 1:45 PM] szybet
can you make a pull request?


[6/29/2022 1:51 PM] tux_linux
No matter what one, my initial goal was to create a QJsonObject or QJsonArray for each recent book and access it with an iterator number (e.g. `bookInfoArray[i]`). I went on creating objects, first in the header, like this `QVector<QJsonObject*> jsonObject;`, then I tried to assign the JSON object from the main database to the recent book's button when a `BookPath` match was made (thus `bookInfoArray[2]` would have meant info for the second recent book button).
Then I got a whole truckload of segmentation faults, I literally saw absolutely impossible things happen:
```
int i = 2
qDebug() << bookInfoArray[i]; // works
qDebug() << bookInfoArray[2]; // segfaults
// And yes, it was in the same scope
```
So I decided to give up on that way to preserve my mental sanity


[6/29/2022 1:52 PM] szybet
what the fu


[6/29/2022 1:52 PM] szybet
._ .


[6/29/2022 1:54 PM] tux_linux
This book gives the unwrap error about metadata

{Attachments}
/mnt/data/projects/git/conversations/media/Argonaut_stories.68408-365E2.epub


[6/29/2022 1:54 PM] tux_linux
(Project Gutenberg one)


[6/29/2022 1:54 PM] tux_linux
Not all of them have this problem


[6/29/2022 1:55 PM] szybet
and a book with zip problems?


[6/29/2022 1:56 PM] tux_linux
Will try to find one again


[6/29/2022 2:44 PM] tux_linux
what in the world are you doing qt

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220629_124344349-A0480.jpg


[6/29/2022 3:09 PM] szybet
https://tenor.com/view/parkour-theoffice-freerunning-gif-5128248

{Embed}
https://tenor.com/view/parkour-theoffice-freerunning-gif-5128248
/mnt/data/projects/git/conversations/media/parkour-theoffice-7CC8B.png


[6/29/2022 5:40 PM] tux_linux
AT LAST

{Attachments}
/mnt/data/projects/git/conversations/media/home-A17A1.png

{Reactions}
🥳 

[6/29/2022 5:40 PM] tux_linux
Wow this was complicated


[6/29/2022 5:41 PM] szybet
why it was complicated?


[6/29/2022 5:41 PM] tux_linux
lemme show you the commit


[6/29/2022 5:41 PM] szybet
yea show it


[6/29/2022 5:41 PM] szybet
also the image size


[6/29/2022 5:41 PM] szybet
did you checked they are the same size?


[6/29/2022 5:42 PM] szybet
ummm... what happends if a cover is not available?


[6/29/2022 5:42 PM] szybet
how di know what book this is


[6/29/2022 5:42 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/ebcfd349f287d40cd2a2fc4db44d02ed23cd55d1

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/ebcfd349f287d40cd2a2fc4db44d02ed23cd55d1
Home screen: Implement two-row recent books · Kobo-InkBox/inkbox@eb...
/mnt/data/projects/git/conversations/media/ebcfd349f287d40cd2a2fc4db44d02ed23cd55d1-89D05


[6/29/2022 5:42 PM] tux_linux
"No cover available" is displayed then


[6/29/2022 5:43 PM] nonasuomy
Generate a cover with just words on it.


[6/29/2022 5:44 PM] tux_linux
And you think that is easy?
How would you do it?


[6/29/2022 5:44 PM] nonasuomy
Instead of No cover available => book title.


[6/29/2022 5:44 PM] szybet
iretating seems complicated, the rest is ok


[6/29/2022 5:44 PM] szybet
i have a better idea


[6/29/2022 5:44 PM] tux_linux
That part was the worst to figure out

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-8225A.png


[6/29/2022 5:46 PM] tux_linux
which is?


[6/29/2022 5:46 PM] nonasuomy
https://legacy.imagemagick.org/Usage/text/


[6/29/2022 5:46 PM] szybet
im looking for it


[6/29/2022 5:46 PM] tux_linux
Ok, well, we do have imagemagick

{Reactions}
🤩 

[6/29/2022 5:47 PM] szybet
foind it: `QToolTip`


[6/29/2022 5:47 PM] szybet
maybe there is a way to detect long presses


[6/29/2022 5:47 PM] szybet
to show the full name


[6/29/2022 5:47 PM] szybet
i use it in sanki, works good


[6/29/2022 5:47 PM] szybet
any text on such a small image will look horrible


[6/29/2022 5:48 PM] tux_linux
Any text at that size will look horrible, no matter if it's a font or not


[6/29/2022 5:48 PM] nonasuomy
Most people will want a quick scan grab it shouldn't look horrible people will get the point what book it is.


[6/29/2022 5:48 PM] szybet
***what is this book? quess it***


[6/29/2022 5:48 PM] szybet
no...


[6/29/2022 5:48 PM] szybet
QToolTip


[6/29/2022 5:48 PM] szybet
is the answer


[6/29/2022 5:49 PM] tux_linux
I'm not confident about long presses at all


[6/29/2022 5:49 PM] nonasuomy
I don't like that


[6/29/2022 5:49 PM] szybet
then you can add a small button somewhere


[6/29/2022 5:49 PM] szybet
that will switch that instead of opening the book a qtooltip will be showed up


[6/29/2022 5:49 PM] nonasuomy
doesn't offer the ability to quickly understand what you are seeing.


[6/29/2022 5:49 PM] tux_linux
yay, more layout nightmares


[6/29/2022 5:49 PM] szybet
no, wait


[6/29/2022 5:50 PM] szybet
this menu will be opened by home button right?


[6/29/2022 5:50 PM] nonasuomy
Or you could just do it like KODI and just have like an bookname.png that you can manually add if you care.


[6/29/2022 5:50 PM] tux_linux
what menu?


[6/29/2022 5:50 PM] szybet
recen books menu


[6/29/2022 5:50 PM] tux_linux
yes, it's the home screen


[6/29/2022 5:50 PM] tux_linux
Local library is the reader button


[6/29/2022 5:52 PM] szybet
if you switch to the home screen, replace the home button with a logo of the item i dont know in english, thats is attached as a image and then if clicked show qtooltips

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-79EFD.png


[6/29/2022 5:52 PM] szybet
its a perfect solution


[6/29/2022 5:52 PM] tux_linux
magnifying glass


[6/29/2022 5:53 PM] szybet
what a name... i will stick with *lupa* in polish


[6/29/2022 5:53 PM] tux_linux
Loupe in french


[6/29/2022 5:53 PM] szybet
thats better


[6/29/2022 5:53 PM] tux_linux
but this is not going to be intuitive

{Reactions}
✅ 

[6/29/2022 5:53 PM] szybet
this or quessing what name is this book


[6/29/2022 5:54 PM] nonasuomy
quessing?


[6/29/2022 5:54 PM] szybet
you can also make a small qdialog to show the image, tittle and open button


[6/29/2022 5:54 PM] tux_linux
Yes, I was thinking to do like in Nickel


[6/29/2022 5:54 PM] tux_linux
But I wonder how you show a mini menu right next to the book where you can select further options


[6/29/2022 5:55 PM] nonasuomy
3 dots


[6/29/2022 5:55 PM] szybet
impossible, no


[6/29/2022 5:55 PM] szybet
wait


[6/29/2022 5:55 PM] szybet
qtooltip is exactly that


[6/29/2022 5:55 PM] szybet
it shows next to the widget


[6/29/2022 5:55 PM] tux_linux
can it show a menu?


[6/29/2022 5:55 PM] tux_linux
or just info


[6/29/2022 5:56 PM] tux_linux
another option: I just create a QLabel under every book and put the book title on it (in small font)


[6/29/2022 5:56 PM] szybet
idk, google says no


[6/29/2022 5:56 PM] szybet
takes too much space


[6/29/2022 5:56 PM] szybet
you can propably get the location of qtooltip and show a qdialog on its place


[6/29/2022 5:57 PM] szybet
but thats hacky


[6/29/2022 5:59 PM] nonasuomy
Add an option for imagemagick covers


[6/29/2022 5:59 PM] szybet
maybe you do it?


[6/29/2022 5:59 PM] szybet
quite easy


[6/29/2022 6:08 PM] tux_linux
Not so bad

{Attachments}
/mnt/data/projects/git/conversations/media/home-C947C.png

{Reactions}
👌 

[6/29/2022 6:08 PM] szybet
okay, now show a qtooltip when clicked on the text with the full name


[6/29/2022 6:13 PM] szybet
also what is the state of żźąśńó letters?


[6/29/2022 6:13 PM] tux_linux
don't have any idea


[6/29/2022 6:13 PM] szybet
once you said that it works


[6/29/2022 6:14 PM] tux_linux
I rebooted my Glo HD yesterday, didn't launch InkBox from shell at first, and they displayed correctly


[6/29/2022 6:14 PM] szybet
sooo it works in normal conditions?


[6/29/2022 6:14 PM] tux_linux
I can't vouch on that to be a guarantee though


[6/29/2022 6:14 PM] tux_linux
It's random?


[6/29/2022 6:14 PM] szybet
impossible


[6/29/2022 6:15 PM] szybet
nothing is random


[6/29/2022 6:15 PM] szybet
in computers


[6/29/2022 6:15 PM] tux_linux
then explain me why it does that


[6/29/2022 6:15 PM] szybet
i will need to debug that finally


[6/29/2022 6:17 PM] tux_linux
you should update everything, it started working only yesterday


[6/29/2022 6:17 PM] szybet
what changed?


[6/29/2022 6:18 PM] tux_linux
i don't know precisely?


[6/29/2022 6:56 PM] tux_linux
ok, you win

{Attachments}
/mnt/data/projects/git/conversations/media/qtooltip-BD1C0.png


[6/29/2022 7:11 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/5c50911642f5c71eae4f498777a92d90fa979412

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/5c50911642f5c71eae4f498777a92d90fa979412
Home page: Implement QToolTipLabel and book titles · Kobo-InkBox/in...
/mnt/data/projects/git/conversations/media/5c50911642f5c71eae4f498777a92d90fa979412-584F1


[6/29/2022 7:11 PM] szybet
yay


[6/30/2022 9:32 AM] aryetis
If you're still looking for what for idea of what to put on the remaining lines. I'm adding : pinned app / books to the list. Could be useful to have quick access to some manual / tool app you're not always using but don't want to scroll for when you're looking for them.


[6/30/2022 3:54 PM] tux_linux
Thanks, it's a good idea
but you implement it; dealing with Qt layouts from code has caused me enough brain damage


[6/30/2022 3:59 PM] tux_linux
(c.f. https://github.com/Kobo-InkBox/inkbox/blob/localLibraryWidget/homepagewidget.cpp)


[6/30/2022 3:59 PM] szybet
why from code?


[6/30/2022 3:59 PM] szybet
i mean, adding to them is okay


[6/30/2022 4:00 PM] tux_linux
You can't create button arrays from Qt designer


[6/30/2022 4:00 PM] szybet
but you added the layouts in ui file?


[6/30/2022 4:00 PM] tux_linux
Only a base vertical layout


[6/30/2022 4:01 PM] tux_linux
also, it's way easier to just increment/decrement the books number if needed (in `localLibraryWidget`), you just have to change `buttonsNumber`


[6/30/2022 4:02 PM] szybet
okay then as you wanty


[6/30/2022 4:02 PM] szybet
i would add all layouts in ui


[6/30/2022 4:02 PM] tux_linux
I did that for libraryWidget (gutenberg), it ended up being a nightmare


[6/30/2022 4:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FCE44.png


[6/30/2022 4:03 PM] szybet
and thats why uou create smaller widget as i did in userapp.cpp


[6/30/2022 4:03 PM] tux_linux
Much easier to do that in a for loop with a QVector array of pushbuttons/clickable labels


[6/30/2022 4:03 PM] tux_linux
Yeah, I mean, it's an option


[6/30/2022 4:03 PM] tux_linux
But I would probably end up with the same problems after


[6/30/2022 4:04 PM] szybet
not that much


[7/1/2022 1:49 AM] szybet
Still waiting


[7/1/2022 1:58 AM] tux_linux
sorry, I don't remember which one was causing this, when I stumble upon one I'll let you know


[7/1/2022 1:58 AM] tux_linux
I will also test your power daemon soon


[7/1/2022 11:53 AM] szybet
test only the basic functionality, dont try clicking when its doing something

{Reactions}
👍 

[7/2/2022 1:03 AM] tux_linux
2nd working example of special characters

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220701_230303016-BCA76.jpg


[7/2/2022 6:46 AM] tux_linux
Implementing 'Recently launched apps' would be a huge pain
I think it's better to go with the 'Pinned books' thing


[7/2/2022 6:57 PM] tux_linux
New userapp
https://github.com/Kobo-InkBox/conway

{Attachments}
/mnt/data/projects/git/conversations/media/conway-8D3FF.png


[7/2/2022 7:21 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/apps/Conway.zip


[7/2/2022 7:26 PM] szybet
how do you place pixels?


[7/2/2022 7:32 PM] tux_linux
Look in the code
I only forked it


[7/5/2022 7:33 PM] szybet
@tux-linux  any update on checking the power manager? or the broken epub?


[7/6/2022 7:28 PM] tux_linux
not good

{Attachments}
/mnt/data/projects/git/conversations/media/char-CE28D.png


[7/6/2022 7:28 PM] szybet
oh, this


[7/6/2022 7:28 PM] szybet
i forgot to debug it


[7/6/2022 7:29 PM] tux_linux
it happens now when I launch it from ssh


[7/6/2022 7:34 PM] tux_linux
same thing now but the `setupDisplay` function has been called twice

{Attachments}
/mnt/data/projects/git/conversations/media/char-0DE50.png


[7/6/2022 7:34 PM] szybet
does it work always?


[7/6/2022 7:35 PM] tux_linux
currently testing


[7/6/2022 7:35 PM] tux_linux
hmm, now new build and it works alright without calling the function twice


[7/6/2022 7:36 PM] tux_linux
(I'm implementing this on long-presses)

{Attachments}
/mnt/data/projects/git/conversations/media/char-895C6.png


[7/6/2022 7:37 PM] szybet
very strange


[7/6/2022 8:30 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/80bdeb32edde7add833db5e6536c4c2eb414749e

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/80bdeb32edde7add833db5e6536c4c2eb414749e
localLibraryWidget: Implement book options dialog (WIP) · Kobo-InkB...
This dialog will open if user keeps touch input active on a button from `bookBtnArray` for >= 500 ms.
'Pin' and 'More info' operations are currently not implemented.
/mnt/data/projects/git/conversations/media/80bdeb32edde7add833db5e6536c4c2eb414749e-E2531


[7/6/2022 8:31 PM] szybet
thats a lot of code


[7/6/2022 8:31 PM] szybet
good that long presses work on the kobo

{Reactions}
👍 

[7/6/2022 8:32 PM] tux_linux
It was easier to implement than it seems


[7/8/2022 1:40 AM] szybet
```
kobo:/data/onboard/.apps/sanki/sanki# ls
app-bin       app-lib_3     dev           mnt_3         system-bin
app-bin_1     app-lib_4     dev_1         mnt_4         system-bin_1
app-bin_2     app-lib_5     dev_2         mnt_5         system-bin_2
app-bin_3     app-misc      dev_3         proc          system-bin_3
app-bin_4     app-misc_1    dev_4         proc_1        system-bin_4
app-bin_5     app-misc_2    dev_5         proc_2        system-bin_5
app-data      app-misc_3    etc           proc_3        system-lib
app-data_1    app-misc_4    etc_1         proc_4        system-lib_1
app-data_2    app-misc_5    etc_2         proc_5        system-lib_2
app-data_3    app-temp      etc_3         sys           system-lib_3
app-data_4    app-temp_1    etc_4         sys_1         system-lib_4
app-data_5    app-temp_2    etc_5         sys_2         system-lib_5
app-lib       app-temp_3    mnt           sys_3
app-lib_1     app-temp_4    mnt_1         sys_4
app-lib_2     app-temp_5    mnt_2         sys_5

```


[7/8/2022 1:40 AM] szybet
yea


[7/8/2022 1:42 AM] szybet
restarting gui_apps does not restart this process:
```
squashfuse -o allow_other,nosuid /data/onboard/.apps/sanki
```
and it causes confusion.


[7/8/2022 1:46 AM] szybet
even if i kill the process it still creates so many files


[7/8/2022 1:46 AM] szybet
idk


[7/8/2022 1:51 AM] szybet
ok, im dumb
`mksquashfs inkbox_userapp/sanki/* inkbox_userapp/sanki.isa`
instead of 
`mksquashfs inkbox_userapp/sanki/ inkbox_userapp/sanki.isa` still weird


[7/8/2022 6:40 PM] szybet
i dont know what is this function


[7/8/2022 6:40 PM] szybet
but i fixed it my way


[7/8/2022 6:40 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/fix-special-characters-qt.md


[7/8/2022 6:40 PM] szybet
5 hours of tinkering


[7/8/2022 6:45 PM] szybet
works in sanki, though


[7/8/2022 6:46 PM] tux_linux
?!


[7/8/2022 6:46 PM] szybet
nevermind, squashfs is weird


[7/8/2022 6:46 PM] tux_linux
oh ok


[7/8/2022 6:46 PM] szybet
it doesnt owerwrite a isa file, i updates it with _x


[7/8/2022 6:47 PM] tux_linux
The current inkbox tree should work with special characters, I'll implement your fix if it reappears


[7/8/2022 6:47 PM] tux_linux
good fix


[7/8/2022 6:48 PM] szybet
found on a forum from 2012 that linked a wiki from nokia that i needed to watch on waybackmachine


[7/8/2022 6:49 PM] tux_linux
great


[7/8/2022 6:55 PM] szybet
also, why do i need to killall inkbox-bin to trigger rescanning user apps (/tmp/rescan_userapps) and service inkbox_gui restart doesnt trigger it?


[7/8/2022 6:56 PM] szybet
i looked into the code, its weird


[7/8/2022 7:19 PM] szybet
+ any way to set brightness from a user app? you blocked everything


[7/8/2022 7:19 PM] szybet
it will be hard to do for all devices


[7/8/2022 7:25 PM] szybet
i can do this myself with a pr for the nia, its propably just changing permissions for a device in sys or ntx in dev


[7/8/2022 8:22 PM] tux_linux
Because restarting the service also remounts /kobo


[7/8/2022 8:23 PM] tux_linux
Implementing a named pipe is probably the best idea


[7/8/2022 8:24 PM] szybet
those pipes again...


[7/8/2022 8:24 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220708_182443469-1A332.jpg


[7/8/2022 8:25 PM] tux_linux
I play the organ too hehe


[7/8/2022 8:28 PM] szybet
oh 😆


[7/8/2022 8:28 PM] szybet
those are big organs


[7/8/2022 8:29 PM] szybet
https://github.com/Szybet/sanki/releases/tag/testing-0.2
sanki as a user app is ready

{Embed}
https://github.com/Szybet/sanki/releases/tag/testing-0.2
Release 0.2 · Szybet/sanki
images, formatting in cards is working perfectly
inkbox user app support
special characters fix
a new card mode
many other fixes
/mnt/data/projects/git/conversations/media/testing-0-77F16.2


[7/8/2022 11:51 PM] tux_linux
In case you'd want to hear me
https://youtu.be/eNav-2yuJW4


[7/8/2022 11:52 PM] tux_linux
great


[7/8/2022 11:52 PM] the.mightydill
remember when i called it a piano


[7/8/2022 11:52 PM] tux_linux
heresy


[7/8/2022 11:52 PM] tux_linux
\;)


[7/8/2022 11:53 PM] szybet
sounds great, you have talent for this

{Reactions}
👍 

[7/8/2022 11:53 PM] the.mightydill
i agree


[7/8/2022 11:53 PM] the.mightydill
*we need to hear your voice*


[7/8/2022 11:54 PM] the.mightydill
we've only heard it in the morse code one


[7/8/2022 11:54 PM] tux_linux
...you don't?


[7/8/2022 11:54 PM] the.mightydill
i think


[7/8/2022 11:54 PM] tux_linux
I suggest you listen to the end


[7/8/2022 11:54 PM] the.mightydill
i think it was just the "browse the internet over morse code" one


[7/8/2022 11:54 PM] tux_linux
yes


[7/8/2022 11:54 PM] tux_linux
probably


[7/8/2022 11:54 PM] the.mightydill
you said you had an accent but... you don't


[7/8/2022 11:55 PM] szybet
i listen, thats the best part

{Reactions}
😄 

[7/8/2022 11:56 PM] tux_linux
Did you fix the stylesheet path to `/etc/eink.qss`?


[7/8/2022 11:56 PM] szybet
yes


[7/8/2022 11:57 PM] szybet
and path things


[7/8/2022 11:57 PM] szybet
only brightness doesnt work


[7/8/2022 11:57 PM] szybet
¯\_(ツ)_/¯


[7/8/2022 11:57 PM] tux_linux
ok


[7/8/2022 11:57 PM] tux_linux
we need something to read + write brightness


[7/8/2022 11:57 PM] szybet
@dill when will you test sanki


[7/8/2022 11:58 PM] szybet
;p


[7/8/2022 11:58 PM] tux_linux
When 2.0 is released


[7/8/2022 11:59 PM] szybet (pinned)
i would suggest giving permission to some sys devices


[7/8/2022 11:59 PM] szybet
easiest, fastest solution


[7/8/2022 11:59 PM] tux_linux
can you really do that?


[7/8/2022 11:59 PM] szybet
chmod?


[7/8/2022 11:59 PM] szybet
or bind mounting it as rw, only the needed part?


[7/9/2022 12:00 AM] tux_linux
I don't think it works the same way as in devtmpfs


[7/9/2022 12:00 AM] tux_linux
sysfs nodes doesn't exist until you invoke them


[7/9/2022 12:01 AM] szybet
how do i get a shell into a user app namespace?


[7/9/2022 12:02 AM] szybet
you propably have a command for that already


[7/9/2022 12:02 AM] tux_linux
`/system-bin/sh`


[7/9/2022 12:02 AM] szybet
i mean, chroot into it?


[7/9/2022 12:02 AM] tux_linux
wdym exactly?


[7/9/2022 12:02 AM] tux_linux
You can't really chroot into an user app namespace that easily


[7/9/2022 12:03 AM] tux_linux
you need to attach to an existing one, which my `unshare` tool currently doesn't support


[7/9/2022 12:03 AM] tux_linux
quick fix: launch inkvt and access it via http


[7/9/2022 12:03 AM] szybet
into this isolated env, "chroot" into it


[7/9/2022 12:03 AM] tux_linux
you can send keystrokes via a web browser
much faster


[7/9/2022 12:03 AM] szybet
oh okay


[7/9/2022 12:04 AM] tux_linux
The namespace's goal is to isolate itself from other processes and I think it is destroyed when the program exits


[7/9/2022 12:04 AM] tux_linux
so that's a good solution, and you get output on the kobo's display


[7/9/2022 12:10 AM] szybet
chmod works


[7/9/2022 12:10 AM] szybet
;p


[7/9/2022 12:10 AM] tux_linux
hm ok


[7/9/2022 12:10 AM] tux_linux
how can it


[7/9/2022 12:10 AM] szybet
from the alpine root


[7/9/2022 12:11 AM] szybet
777


[7/9/2022 12:11 AM] szybet
`chmod 777 sanki/sanki/sys/class/backlight/mxc_msp430.0
/brightness`


[7/9/2022 12:11 AM] szybet
and then sanki works


[7/9/2022 12:11 AM] tux_linux
yeah but did you try it


[7/9/2022 12:11 AM] tux_linux
hm ok


[7/9/2022 12:11 AM] tux_linux
really strange


[7/9/2022 12:11 AM] szybet
yes, just right now


[7/9/2022 12:11 AM] szybet
why?


[7/9/2022 12:11 AM] tux_linux
and not safe


[7/9/2022 12:11 AM] tux_linux
.


[7/9/2022 12:11 AM] szybet
well now it exists


[7/9/2022 12:11 AM] tux_linux
and they are (probably?) destroyed after they are invoked


[7/9/2022 12:12 AM] tux_linux
idk


[7/9/2022 12:12 AM] szybet
propably not


[7/9/2022 12:12 AM] szybet
why?


[7/9/2022 12:12 AM] tux_linux
then how does inotify not work with sysfs nodes


[7/9/2022 12:12 AM] szybet
em no permissions?


[7/9/2022 12:13 AM] tux_linux
well, it's safe, but... namespaces should have their own sysfs containerized IMO


[7/9/2022 12:13 AM] szybet
¯\_(ツ)_/¯


[7/9/2022 12:13 AM] tux_linux
ok so you assure me it works


[7/9/2022 12:13 AM] szybet
i dont see such a need


[7/9/2022 12:14 AM] szybet
it worked 3 minutes ago, yes


[7/9/2022 12:14 AM] szybet
chmod 777 from main alpine root to the sys located in sanki and then it works


[7/9/2022 12:14 AM] tux_linux
oh ok, what it you chmod 777 in `/sys` instead?


[7/9/2022 12:15 AM] tux_linux
restart sanki of course, gui apps service so you don't have any false positives


[7/9/2022 12:15 AM] szybet
in the main sys?


[7/9/2022 12:15 AM] tux_linux
yes


[7/9/2022 12:18 AM] szybet
```
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# ls -l
total 0
-r--r--r--    1 root     root          4096 Jan  2 00:19 actual_brightness
-rw-r--r--    1 root     root          4096 Jan  2 00:19 bl_power
-rwxrwxrwx    1 root     root          4096 Jan  2 00:12 brightness

```


[7/9/2022 12:18 AM] szybet
i didnt writed chmod


[7/9/2022 12:18 AM] szybet
and i restarted gui_apps


[7/9/2022 12:18 AM] szybet
so it works just as a symlink, from the main alpine root perspective


[7/9/2022 12:20 AM] szybet
```
kobo:/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0# ls -l /data/onboard/.a
pps/sanki/sanki/sys/devices/platform/ntx_bl/backlight/mxc_msp430.0
total 0
-r--r--r--    1 root     root          4096 Jan  2 00:19 actual_brightness
-rw-r--r--    1 root     root          4096 Jan  2 00:19 bl_power
-rwxrwxrwx    1 root     root          4096 Jan  2 00:20 brightness

```
its there also 777


[7/9/2022 5:45 PM] the.mightydill
is it on the mini yet


[7/9/2022 7:09 PM] the.mightydill
(i MIGHT get a Nia)


[7/9/2022 8:14 PM] szybet
if you help me to port it, yes


[7/9/2022 8:15 PM] szybet
but it should be usable anyway


[7/9/2022 8:15 PM] szybet
nia is great


[7/12/2022 6:35 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/03c2732aff2bb9c626e3511b7395580b2b13a82d

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/03c2732aff2bb9c626e3511b7395580b2b13a82d
Implement local book info dialog · Kobo-InkBox/inkbox@03c2732
/mnt/data/projects/git/conversations/media/03c2732aff2bb9c626e3511b7395580b2b13a82d-BAE80


[7/12/2022 8:12 PM] szybet
when you will be ready, i can test the library


[7/12/2022 8:13 PM] szybet
also, only a reminder to test the power daemon

{Reactions}
👍 

[7/12/2022 8:13 PM] tux_linux
The main functionality is already here
Only the pin books part is missing


[7/12/2022 8:14 PM] szybet
what about folders?


[7/12/2022 8:16 PM] tux_linux
I don't have enough mental energy to do that


[7/12/2022 8:16 PM] szybet
well okay


[7/12/2022 8:16 PM] szybet
then i will


[7/12/2022 8:16 PM] tux_linux
sure


[7/15/2022 12:11 AM] tux_linux
1. You are not turning down brightness before going to sleep, or you don't support the Glo HD if you do
2. Glo HD does not go to sleep after power button has been pressed but "Sleeping" screen shows. Wi-Fi is turned on and connected, and nothing on dmesg at all
No Wi-Fi modules are removed
Does the same thing without Wi-Fi modules loaded
3. Please `fbink -k -f` (its equivalent in C) before you print `Sleeping` on the screen


[7/15/2022 12:12 AM] szybet
so not really many things work


[7/15/2022 12:12 AM] szybet
logs?


[7/15/2022 12:12 AM] tux_linux
only fbink stuff


[7/15/2022 12:12 AM] szybet
launch it with DEBUG=true


[7/15/2022 12:13 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-F3125.txt


[7/15/2022 12:13 AM] szybet
`Could not open file` it exits on opening a file


[7/15/2022 12:13 AM] szybet
becouse it doesnt exist


[7/15/2022 12:14 AM] szybet
will you have time to test it many times in the future ( next days )?


[7/15/2022 12:14 AM] tux_linux
it would be useful to know which file it tried to open


[7/15/2022 12:14 AM] tux_linux
maybe


[7/15/2022 12:14 AM] szybet
yes, i will add it

{Reactions}
👍 

[7/15/2022 12:15 AM] tux_linux
i will check strace


[7/15/2022 12:16 AM] szybet
when will you return to working on inkbox?


[7/15/2022 12:16 AM] tux_linux
well, since you are seemingly creating a new thread, I can't see what it tries to open with strace


[7/15/2022 12:16 AM] szybet
yea, i will add the better logs soon

{Reactions}
👍 

[7/15/2022 1:17 PM] ninuje
Strace -fittvY should follow threads and decode fds


[7/15/2022 5:17 PM] tux_linux
Ok thanks


[7/16/2022 4:42 AM] tux_linux
code-server is nice

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-54E07.png


[7/16/2022 6:04 AM] tux_linux
Pinned a message.


[7/16/2022 10:40 AM] szybet
Developing Qt in code?


[7/16/2022 10:40 AM] szybet
Does it have sense?


[7/16/2022 3:46 PM] tux_linux
It works


[7/16/2022 3:46 PM] tux_linux
Only designer does not


[7/16/2022 8:49 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/5a38ecdab3b4a198ec3cb709437ac03767f92f01
yay

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/5a38ecdab3b4a198ec3cb709437ac03767f92f01
reader: Fix PDF segmentation fault bug on page turn · Kobo-InkBox/i...
This bug happened sometimes when the user would go to a specific page in the document or tried to continue reading a PDF from a certain page other than the first one. This commit fixes this that.
/mnt/data/projects/git/conversations/media/5a38ecdab3b4a198ec3cb709437ac03767f92f01-9C262


[7/16/2022 8:50 PM] szybet
well, cool


[7/16/2022 8:50 PM] szybet
i dont readed the code for the reader so i dont understand the fix


[7/16/2022 8:50 PM] tux_linux
it was doing something it's normally doing only for text files


[7/16/2022 8:51 PM] tux_linux
but it did that when it displayed a PDF


[7/16/2022 8:51 PM] tux_linux
so it segfaulted


[7/16/2022 8:51 PM] tux_linux
I don't know why it didn't segfault all the time
But it doesn't matter anymore I guess


[7/16/2022 9:05 PM] tux_linux
how many pinned books?


[7/16/2022 9:08 PM] tux_linux
actually I will put 4
otherwise the 8 recent books might get the display to clip out


[7/16/2022 9:40 PM] szybet
4 are good

{Reactions}
👍 

[7/17/2022 12:34 AM] szybet
updated logging

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-0584C

{Reactions}
👍 

[7/17/2022 12:34 AM] szybet
i really wonder what file is missing


[7/17/2022 12:35 AM] szybet
also, can you check if in your dmesg you get `card claims to support voltages below defined range`


[7/17/2022 12:35 AM] tux_linux
I didn't


[7/17/2022 12:37 AM] szybet
well, the sd card expander is causing some problems


[7/17/2022 12:37 AM] szybet
dont test the binary, i propably found the problem


[7/17/2022 12:39 AM] szybet
it should work now


[7/17/2022 12:50 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-F8D43

{Reactions}
👍 

[7/17/2022 11:34 PM] szybet
@tux-linux in inkbox, can i create a folder and files associated with the power daemon there? ( sleeping dialog and watcher for the pipe,  also a new settings widget? )


[7/17/2022 11:35 PM] szybet
i dont want to do more mess that there is


[7/17/2022 11:35 PM] szybet
also, where do i launch a new thread for the pipe watcher?


[7/18/2022 1:27 AM] tux_linux
in qt you mean?


[7/18/2022 1:27 AM] tux_linux
wdym


[7/18/2022 1:28 AM] szybet
in inkbox repo


[7/18/2022 1:28 AM] szybet
we discussed that, to detect suspend call


[7/18/2022 1:28 AM] szybet
in qt apps


[7/18/2022 1:28 AM] tux_linux
from a named pipe?
try to do it, never found a working way myself


[7/18/2022 1:29 AM] szybet
what didn't worked exactly?


[7/18/2022 1:29 AM] tux_linux
it was just an overall mess?


[7/18/2022 1:29 AM] tux_linux
also I was doing it in C
it might ease your pain to write it in cpp


[7/18/2022 1:30 AM] szybet
you mean making a pipe or what?


[7/18/2022 1:30 AM] tux_linux
listening on a pipe


[7/18/2022 1:30 AM] tux_linux
I tired to listen on a named pipe and execute a function once the 'command' was sent to it


[7/18/2022 1:30 AM] szybet
i will try


[7/18/2022 1:30 AM] tux_linux
maybe you can check kobo nightmode for inspiration


[7/18/2022 1:30 AM] tux_linux
it's using a fifo


[7/18/2022 1:30 AM] szybet
if not i will use inotify and a file


[7/18/2022 1:31 AM] szybet
so yes?


[7/18/2022 1:32 AM] tux_linux
I'd prefer if it was in the same folder


[7/18/2022 1:32 AM] tux_linux
We can sort everything out later


[7/18/2022 1:32 AM] szybet
its a mess already


[7/18/2022 1:32 AM] tux_linux
And create a filesystem structure that makes sense


[7/18/2022 1:32 AM] szybet
lets start sorting it?


[7/18/2022 1:32 AM] tux_linux
hm


[7/18/2022 1:32 AM] szybet
https://github.com/Szybet/sanki

{Embed}
https://github.com/Szybet/sanki
GitHub - Szybet/sanki: small anki rewritten for e-readers, with foc...
small anki rewritten for e-readers, with focus on inkbox support - GitHub - Szybet/sanki: small anki rewritten for e-readers, with focus on inkbox support
/mnt/data/projects/git/conversations/media/sanki-9B9EF


[7/18/2022 1:32 AM] szybet
like this?


[7/18/2022 1:33 AM] tux_linux
yeah but with camelCase


[7/18/2022 1:33 AM] tux_linux
ok I will do it
hang on


[7/18/2022 1:33 AM] szybet
so a folder powerDaemon will be fine?


[7/18/2022 1:33 AM] szybet
thats a bit long process

{Reactions}
👍 

[7/18/2022 1:34 AM] tux_linux
nvm, I want to finish working on pinning books before
I have plenty of staged files waiting
it will be a mess if I change the structure now


[7/18/2022 1:34 AM] tux_linux
yes


[7/18/2022 1:34 AM] tux_linux
`src/powerDaemon`


[7/18/2022 1:35 AM] tux_linux
https://github.com/gtalusan/kobo-nightmode/blob/bfe0e81422b2c2902a6a22b95a7ed1ee3fc1e91b/src/screenInv.c#L281-L335
Warning: it's C
Use it for inspiration, but please find a CPP way if possible


[7/18/2022 1:36 AM] szybet
ok good

{Reactions}
👍 

[7/18/2022 1:36 AM] szybet
ok thanks

{Reactions}
👍 

[7/18/2022 2:59 AM] ninuje
*whispers* DBus *whispers*


[7/18/2022 3:01 AM] ninuje
Pipes are... finicky (c.f., https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink_cmd.c#L2225-L2229)

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink_cmd.c
FBInk/fbink_cmd.c at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiL...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink_cmd.c at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-EC5E3


[7/18/2022 3:01 AM] ninuje
And a unix socket might be a tad overkill (and it'll be *a lot* of tricky low-level boilerplate code)


[7/18/2022 3:02 AM] ninuje
c.f., https://github.com/NiLuJe/kfmon/blob/master/utils/kfmon-ipc.c & the matching server bits in KFMon

{Embed}
https://github.com/NiLuJe/kfmon/blob/master/utils/kfmon-ipc.c
kfmon/kfmon-ipc.c at master · NiLuJe/kfmon
Kute File Monitor, an inotify-based Launcher for Kobo devices - kfmon/kfmon-ipc.c at master · NiLuJe/kfmon
/mnt/data/projects/git/conversations/media/kfmon-FA9B8


[7/18/2022 3:02 AM] ninuje
TL;DR: You're using Qt, DBUs will be way less painless in your case, because QDbus


[7/18/2022 3:03 AM] ninuje
And it's exactly what it was made for.


[7/18/2022 4:04 AM] tux_linux
Yeah, maybe
But it would also be dbus across chroots, and dbus is not set up at all currently in my rootfs


[7/18/2022 4:04 AM] tux_linux
They work *very* well in shell though
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/ibxd


[7/18/2022 5:37 AM] tux_linux
Slowly progressing

{Attachments}
/mnt/data/projects/git/conversations/media/pin1-D484F.png
/mnt/data/projects/git/conversations/media/pin2-AEBE2.png


[7/18/2022 8:41 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/13b3bda21508a6b7e9fdda660acb8fc829cf113a

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/13b3bda21508a6b7e9fdda660acb8fc829cf113a
Implement 'Pin books' function · Kobo-InkBox/inkbox@13b3bda
/mnt/data/projects/git/conversations/media/13b3bda21508a6b7e9fdda660acb8fc829cf113a-A244C


[7/18/2022 8:42 AM] tux_linux
I think I can merge `localLibraryWidget` in master now
Let me know if there are things I forgot
You can test it now, it's pretty much ready


[7/18/2022 11:58 AM] szybet
I will test it today

{Reactions}
👍 

[7/18/2022 12:01 PM] szybet
Book cover sizes?


[7/18/2022 12:07 PM] szybet
Maybe custom cover sizes for every device to avoid the scrollbar?


[7/18/2022 12:40 PM] tux_linux
no rush
Maybe
Though devices like Kindles do use scrollbars


[7/18/2022 12:41 PM] tux_linux
Might be a bit too big/too small on the Nia, needs adjusting probably


[7/18/2022 12:50 PM] szybet
its ok if the scroll bar is used more than scrolling becouse half a book is not seen properly


[7/18/2022 12:50 PM] szybet
i mean, the ratio of them is wrong


[7/18/2022 3:50 PM] tux_linux
Picture ?


[7/18/2022 3:54 PM] szybet
?


[7/18/2022 3:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AF285.png


[7/18/2022 3:54 PM] tux_linux
Note that the PDF issue is still there in the local library branch, it will be fixed when I merge it in master


[7/18/2022 3:55 PM] szybet
okay


[7/18/2022 3:55 PM] tux_linux
Oh yeah
Well, it's supposed to scale them
Even when I remove keep aspect ratio, it's worse


[7/18/2022 3:55 PM] szybet
how


[7/18/2022 3:56 PM] tux_linux
Well, the images sizes vary even more


[7/18/2022 3:57 PM] szybet
what if the image is resized as the file, to a specific pixel height / weight


[7/18/2022 3:57 PM] tux_linux
It has already been resized to that size


[7/18/2022 3:57 PM] tux_linux
Plus, Qt scales it


[7/18/2022 3:57 PM] tux_linux
In some places it needs to be smaller (local library widget), so it is scaled a bit smaller


[7/18/2022 3:58 PM] szybet
well idk, i will try to do this


[7/18/2022 4:10 PM] tux_linux
but honestly, it doesn't look *that* bad


[7/18/2022 4:36 PM] tux_linux
Good or bad?

{Attachments}
/mnt/data/projects/git/conversations/media/icon-7104F.png


[7/18/2022 4:36 PM] szybet
what is good or bad? you mean formating?


[7/18/2022 4:37 PM] tux_linux
icons


[7/18/2022 4:37 PM] szybet
maybe bigger arrows


[7/18/2022 4:37 PM] tux_linux
look at the bottom


[7/18/2022 4:37 PM] tux_linux
so bigger buttons


[7/18/2022 4:37 PM] tux_linux
Glo HD could use bigger buttons
It will look better in 768x1024 models


[7/18/2022 4:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/icon-5A362.png


[7/18/2022 4:46 PM] szybet
are you redesigning the reader?


[7/18/2022 4:46 PM] tux_linux
no


[7/18/2022 4:46 PM] tux_linux
only that


[7/18/2022 4:46 PM] tux_linux
maybe the brightness thing too


[7/18/2022 4:49 PM] szybet
just put a slider there


[7/18/2022 4:49 PM] szybet
¯\_(ツ)_/¯


[7/18/2022 4:49 PM] tux_linux
i should rewrite half of it but it works so it's not really necessary


[7/18/2022 4:49 PM] tux_linux
yes


[7/18/2022 4:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-BB2EB


[7/18/2022 4:50 PM] szybet
the newest version, test it when you want


[7/18/2022 4:50 PM] szybet
i added one function and the size increased to 2.5 🥴


[7/18/2022 4:50 PM] tux_linux
did you forget to strip it?


[7/18/2022 4:51 PM] szybet
i didnt do that at all


[7/18/2022 4:51 PM] szybet
but


[7/18/2022 4:51 PM] szybet
i added stdc++fs to target_link_libraries to get a create directory function


[7/18/2022 4:51 PM] szybet
idk


[7/18/2022 4:51 PM] szybet
¯\_(ツ)_/¯


[7/18/2022 4:52 PM] tux_linux
you should


[7/18/2022 4:52 PM] tux_linux
for release builds


[7/18/2022 4:52 PM] tux_linux
sometimes a binary can weigh 200M non-stripped and 50M stripped


[7/18/2022 4:52 PM] szybet
i will then

{Reactions}
👍 

[7/18/2022 4:54 PM] tux_linux
How to `ui->editUserAppsBtn->setEnabled(false)` only when there isn't any application available and they are not hidden like if they would when they are disabled?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-26FD5.png


[7/18/2022 4:55 PM] tux_linux
Because it works but when I disable an user app and it's the only one, then I try to enable it back the edit button is disabled


[7/18/2022 5:00 PM] szybet
i dont understand the problem


[7/18/2022 5:01 PM] szybet
further explanation?...


[7/18/2022 5:01 PM] tux_linux
when there are no user apps available
the edit button is not grayed out


[7/18/2022 5:01 PM] tux_linux
but this is a bug


[7/18/2022 5:01 PM] tux_linux
it needs to be grayed out


[7/18/2022 5:02 PM] tux_linux
but it only needs to be grayed out when there are no disabled userapps
i.e. no userapps are there at all
it needs to be available when the user disabled every user app but they are still there


[7/18/2022 5:02 PM] szybet
check if the array when creating user apps is empty, if yes create a global bool and with it grey out the button when needed

{Reactions}
👍 

[7/18/2022 11:33 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E4BE2.png


[7/18/2022 11:33 PM] szybet
is this a good practice?


[7/18/2022 11:48 PM] tux_linux
why would it not be?


[7/18/2022 11:49 PM] szybet
isint it creating those widgets in the background?


[7/18/2022 11:49 PM] tux_linux
no


[7/18/2022 11:49 PM] szybet
i think yes


[7/18/2022 11:49 PM] tux_linux
they are created with `new`


[7/18/2022 11:49 PM] tux_linux
anyways it doesn't work otherwise


[7/18/2022 11:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-08716.png


[7/18/2022 11:50 PM] szybet
¯\_(ツ)_/¯


[7/18/2022 11:50 PM] tux_linux
hm ok


[7/19/2022 1:38 AM] szybet
do i need to update the rootfs as well?


[7/19/2022 1:38 AM] szybet
to get a working inkbox with the new local library branch?


[7/19/2022 1:39 AM] tux_linux
what's your current rootfs commit?


[7/19/2022 1:39 AM] tux_linux
`cat /.commit`


[7/19/2022 1:40 AM] szybet
685efd9adb4e153aa8ee2f0af4d938678db34a65


[7/19/2022 1:40 AM] szybet
please say that i need to update the rootfs to get something working


[7/19/2022 1:40 AM] tux_linux
you should maybe


[7/19/2022 1:40 AM] tux_linux
it doesn't work?


[7/19/2022 1:41 AM] szybet
```
07/01/2012 @ 11:47:49 | main: Running on device n306
07/01/2012 @ 11:47:49 | main: Device has Wi-Fi capabilities
07/01/2012 @ 11:47:49 | toast: Displaying message 'Generating database'
07/01/2012 @ 11:47:49 | MainWindow: Checking for available updates
07/01/2012 @ 11:47:49 | MainWindow: checkForUpdate: No update available.
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
ASSERT failure in QVector<T>::operator[]: "index out of range", file /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/include/QtCore/qvector.h, line 462
Aborted

```


[7/19/2022 1:41 AM] szybet
👀


[7/19/2022 1:41 AM] tux_linux
aaaaaaaaaa


[7/19/2022 1:41 AM] szybet
exactly


[7/19/2022 1:41 AM] tux_linux
`ls -shal /data/onboard/.database`


[7/19/2022 1:42 AM] szybet
nothing there


[7/19/2022 1:42 AM] tux_linux
does `/data/onboard/.database` exist at all?


[7/19/2022 1:42 AM] szybet
yes


[7/19/2022 1:42 AM] tux_linux
you updated the gui bundle entirely?


[7/19/2022 1:43 AM] szybet
yes


[7/19/2022 1:44 AM] tux_linux
does it hang when you are in the home screen?


[7/19/2022 1:44 AM] tux_linux (pinned)
do you have any books at all in your device?


[7/19/2022 1:44 AM] tux_linux
Pinned a message.


[7/19/2022 1:44 AM] szybet
it launches, shows the home screen and then crashes


[7/19/2022 1:45 AM] szybet
book.txt, and some in folders


[7/19/2022 1:45 AM] tux_linux
have you tried a clean build?


[7/19/2022 1:45 AM] szybet
you mean?


[7/19/2022 1:45 AM] tux_linux
did you clean all build output before switching branch


[7/19/2022 1:46 AM] szybet
clean clone and then git switch


[7/19/2022 1:46 AM] tux_linux
you don't have `build-inkbox-kobo*`-like folders right?


[7/19/2022 1:46 AM] szybet
no, i switched off shadow builds


[7/19/2022 1:46 AM] tux_linux
ok


[7/19/2022 1:46 AM] tux_linux
I don't see why it wouldn't work


[7/19/2022 1:47 AM] tux_linux
I tested it on the Aura which has the same screen resolution


[7/19/2022 1:47 AM] tux_linux
maybe it would complain now


[7/19/2022 1:47 AM] szybet
the home screen when it launches doesnt show any books


[7/19/2022 1:47 AM] szybet
and then it crashes


[7/19/2022 1:47 AM] tux_linux
`find /kobo/mnt/onboard/.adds/inkbox`


[7/19/2022 1:50 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-8DA4B.txt


[7/19/2022 1:51 AM] tux_linux
everything is there


[7/19/2022 1:51 AM] tux_linux
absolutely nothing in `/data/onboard/.database`?
and `ls -shal /data/onboard/.inkbox`?


[7/19/2022 1:51 AM] szybet
```
kobo:~# ls -shal /data/onboard/.inkbox
total 40K    
     8 drwxr-xr-x    3 user     user        8.0K May 19  2022 .
     8 drwxr-xr-x    9 user     user        8.0K Jan  7 11:44 ..
     8 -rwxr-xr-x    1 user     user           6 Jan  7 11:43 can_really_update
     8 -rwxr-xr-x    1 user     user           6 Jan  7 11:43 can_update
     8 drwxr-xr-x    3 user     user        8.0K May 29  2022 gutenberg-data
kobo:~# 
```


[7/19/2022 1:52 AM] szybet
```
kobo:~# ls -a /data/onboard/.database
.   ..
```


[7/19/2022 1:53 AM] tux_linux
```
chroot /kobo /bin/sh -x /mnt/onboard/.adds/inkbox/explore_local_library.sh /mnt/onboard/onboard/<some epub book, doesn't matter which>
```


[7/19/2022 1:55 AM] szybet
also p4, but i doubt its it

{Attachments}
/mnt/data/projects/git/conversations/media/message-90CA4.txt


[7/19/2022 1:55 AM] tux_linux
`QtProject.conf.LOPKDw`
not related to the problem, but where is this coming from?


[7/19/2022 1:55 AM] szybet
¯\_(ツ)_/¯


[7/19/2022 1:55 AM] szybet
no idea


[7/19/2022 1:56 AM] tux_linux
at least I don't have them


[7/19/2022 1:57 AM] szybet
```
kobo:~# chroot /kobo /bin/sh -x /mnt/onboard/.adds/inkbox/explore_local_library.
sh /mnt/onboard/onboard/ebooki/fun-fun/Wiedzmin/Wiedzmin\ Krew\ elfow.epub
+ cat /opt/inkbox_device
+ DEVICE=n306
+ dirname /mnt/onboard/.adds/inkbox/explore_local_library.sh
+ cd /mnt/onboard/.adds/inkbox
+ EXTRACT_COVER=1 LD_LIBRARY_PATH=/lib:system/lib system/bin/epubtool /mnt/onboard/onboard/ebooki/fun-fun/Wiedzmin/Wiedzmin Krew elfow.epub
+ json={
            "database":[
            {
            "BookID": "1",
            "BookPath": "/mnt/onboard/onboard/ebooki/fun-fun/Wiedzmin/Wiedzmin Krew elfow.epub",
            "CoverPath": "/mnt/onboard/onboard/.thumbnails/c462d0d4b343131684fb0f716b7e8b83fa926d8276d117db1232bede944e4ece",
            "Author": "Andrzej Sapkowski",
            "Title": "Krew Elfów",
            "PublicationDate": "2014-11-24"
        }
+ [ n306 == kt ]
+ system/lib/ld-musl-armhf.so.1 /external_root/opt/bin/fbink/fbink -e
system/lib/ld-musl-armhf.so.1: /external_root/opt/bin/fbink/fbink: Not a valid dynamic program
+ eval
+ calculate /
+ awk BEGIN { print / }
awk: cmd. line:1: Unexpected end of string
+ result=
+ printf %.0f\n
+ calculate /
+ awk BEGIN { print / }
awk: cmd. line:1: Unexpected end of string
+ result=
+ printf %.0f\n
+ coverSize=0x0
+ cd /mnt/onboard/onboard/.thumbnails
+ [ 64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2 != * ]
+ tail -c 3
+ grep -q .t
+ echo /mnt/onboard/onboard/.thumbnails/64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2
+ [ c462d0d4b343131684fb0f716b7e8b83fa926d8276d117db1232bede944e4ece.t != * ]
+ tail -c 3
+ grep -q .t
+ echo /mnt/onboard/onboard/.thumbnails/c462d0d4b343131684fb0f716b7e8b83fa926d8276d117db1232bede944e4ece.t
/mnt/onboard/.adds/inkbox/explore_local_library.sh: line 1: Illegal number: -2
kobo:~# 
```


[7/19/2022 1:58 AM] tux_linux
```
system/lib/ld-musl-armhf.so.1: /external_root/opt/bin/fbink/fbink: Not a valid dynamic program
```
you need to update your kernel


[7/19/2022 1:58 AM] tux_linux
probably


[7/19/2022 1:58 AM] szybet
why


[7/19/2022 1:58 AM] szybet
you are working on a library


[7/19/2022 1:58 AM] tux_linux
it binds-mount fbink depending on if the device is a kindle or kobo


[7/19/2022 1:58 AM] tux_linux
fbink is for evaluating the screen size to know how to scale images


[7/19/2022 1:59 AM] szybet
okay...


[7/19/2022 1:59 AM] szybet
well tommorow then


[7/19/2022 1:59 AM] tux_linux
what's your kernel commit?


[7/19/2022 1:59 AM] szybet
```
commit e306dd20f5eb7d2ad940f82049838927b94204d9 (HEAD -> master, origin/master, origin/HEAD)
Author: Nicolas Mailloux <nicolecrivain@gmail.com>
Date:   Mon Jun 20 11:23:27 2022 -0400

    N306: Make kernel bootable again

```


[7/19/2022 2:00 AM] tux_linux
this is worrying


[7/19/2022 2:00 AM] szybet
so no need to update the kernel


[7/19/2022 2:01 AM] tux_linux
generate system report
and see if it's really the same commit


[7/19/2022 2:01 AM] szybet
for the kernel?


[7/19/2022 2:02 AM] tux_linux
yes


[7/19/2022 2:02 AM] szybet
it is it, im sure


[7/19/2022 2:02 AM] szybet
before this commit i couldn't use user apps


[7/19/2022 2:03 AM] tux_linux
then run `fbink --help` and post the first text line


[7/19/2022 2:03 AM] tux_linux
for me it shows this
`FBInk v1.23.1-34-g3577ce7 for Kobo`


[7/19/2022 2:06 AM] szybet
```
kobo:~# 
kobo:~# fbink --help

FBInk v1.23.1-34-g3577ce7 for Kobo

Usage: fbink [OPTIONS] [STRING]

Print STRING on your device's screen.

```


[7/19/2022 2:06 AM] tux_linux
ooh


[7/19/2022 2:06 AM] tux_linux
wait


[7/19/2022 2:06 AM] szybet
???...


[7/19/2022 2:07 AM] tux_linux
`mount /dev/mmcblk0p3 /mnt`
`find /mnt/rootfs/write`


[7/19/2022 2:07 AM] szybet
i dont think thats it


[7/19/2022 2:08 AM] szybet
```
kobo:~# find /mnt/rootfs/write
/mnt/rootfs/write
/mnt/rootfs/write/inkbox-power-deamon
/mnt/rootfs/write/musikwallpaper.jpg
/mnt/rootfs/write/.goutputstream-AR8KO1
/mnt/rootfs/write/extract_ebub_inkbox
/mnt/rootfs/write/split
/mnt/rootfs/write/Conway
/mnt/rootfs/write/epubtool
/mnt/rootfs/write/.goutputstream-CAIDO1
/mnt/rootfs/write/Conway.zip
/mnt/rootfs/write/test.epub
/mnt/rootfs/write/image.jpg
/mnt/rootfs/write/etc
/mnt/rootfs/write/etc/nsswitch.conf
/mnt/rootfs/write/etc/init.d
/mnt/rootfs/write/etc/init.d/powerDaemon
/mnt/rootfs/write/a.out
/mnt/rootfs/write/lib
/mnt/rootfs/write/lib/.goutputstream-02OAO1
/mnt/rootfs/write/lib/libevdev.so.2
/mnt/rootfs/write/lib/libfbink.so.1
/mnt/rootfs/write/lib/libfbink.so
/mnt/rootfs/write/lib/libfbink.so.1.0.0
/mnt/rootfs/write/usr
/mnt/rootfs/write/usr/local
/mnt/rootfs/write/usr/local/bin
/mnt/rootfs/write/usr/local/bin/powerDaemon
/mnt/rootfs/write/libevdev.so.2.3.0
/mnt/rootfs/write/lib-test
/mnt/rootfs/write/snake
/mnt/rootfs/write/zImage-root
/mnt/rootfs/write/plato-0.9.27

```


[7/19/2022 2:08 AM] tux_linux
nope


[7/19/2022 2:08 AM] tux_linux
then try to `chroot /kobo /external_root/opt/bin/fbink/fbink`


[7/19/2022 2:09 AM] szybet
```
kobo:~# chroot /kobo /mnt/onboard/^Cdds/inkbox/system/bin/fbink
kobo:~# ls /kobo/mnt/onboard/
.adds/    .kobo/    onboard/
kobo:~# ls /kobo/mnt/onboard/.adds/
Python-3.9.2/          inkbox/                qt-linux-5.15.2-kobo/
kobo:~# ls /kobo/mnt/onboard/.adds/inkbox/
.config/                       lightmaps
2048                           lockscreen
2048-bin                       lockscreen-bin
AUTHORS                        oobe-inkbox
LICENSE                        oobe-inkbox-bin
calculator                     pdf_get_total_pages_number.sh
calculator-bin                 qreversi
dictionary/                    qreversi-bin
eink.qss                       remount_tmpfs_launch.sh
epub.sh                        reset-config.sh
explore_local_library.sh       scribble
find_epub_metadata.sh          splash.sh
inkbox                         split-txt.py
inkbox-bin                     split.sh
inkbox.sh                      system/
install_developer-key.sh       test_ping.sh
launch_user_application.sh     wake.sh
kobo:~# ls /kobo/mnt/onboard/.adds/inkbox/system/
bin/  lib/
kobo:~# ls /kobo/mnt/onboard/.adds/inkbox/system/bin/
chroot    epubtool  grep      unshare
kobo:~# ls /kobo/mnt/onboard/.adds/inkbox/system/bin/
chroot    epubtool  grep      unshare
kobo:~# 
```


[7/19/2022 2:09 AM] szybet
thats interesting


[7/19/2022 2:09 AM] tux_linux
actually this sorry


[7/19/2022 2:10 AM] szybet
```
chroot: failed to run command ‘/external_root/opt/bin/fbink/fbink’: Exec format error
kobo:~# cd /kobo/external_root/opt/bin/fbink/
kobo:/kobo/external_root/opt/bin/fbink# ls
button_scan     fbdepth-kindle  fbink           fbink-kobo
fbdepth         fbdepth-kobo    fbink-kindle
kobo:/kobo/external_root/opt/bin/fbink# file fbink
-ash: file: not found
kobo:/kobo/external_root/opt/bin/fbink# 
```


[7/19/2022 2:10 AM] tux_linux
actually yes you absolutely need to update the rootfs
because of this
https://github.com/Kobo-InkBox/rootfs/commit/fde8a6afa01856d9459c2a4e33d3872fab744857
trying to execute fbink currently won't work because it is a blank file

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/fde8a6afa01856d9459c2a4e33d3872fab744857
inkbox_gui: Bind-mount FBInk binary in `external_root` · Kobo-InkBo...
/mnt/data/projects/git/conversations/media/fde8a6afa01856d9459c2a4e33d3872fab744857-F9FBF


[7/19/2022 2:11 AM] szybet
yea


[7/19/2022 2:11 AM] szybet
i see that


[7/19/2022 2:11 AM] szybet
so this, and everything will work?


[7/19/2022 2:11 AM] tux_linux
normally yes


[7/19/2022 2:11 AM] szybet
okay, will try tommorow


[7/19/2022 2:11 AM] tux_linux
as a quick fix you can just bind-mount it yourself now


[7/19/2022 2:11 AM] tux_linux
`mount --bind /opt/bin/fbink/fbink /kobo/external_root/opt/bin/fbink/fbink`


[7/19/2022 2:12 AM] tux_linux
and then restart only inkbox binary


[7/19/2022 2:12 AM] tux_linux
`chroot /kobo /mnt/onboard/.adds/inkbox.sh`


[7/19/2022 2:15 AM] szybet
```
obo:~# chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh
iniparser: cannot open /mnt/onboard/.kobo/nightmode.ini
cat: can't open '/mnt/onboard/.kobo/Kobo/Kobo eReader.conf': No such file or directory
07/01/2012 @ 12:17:48 | main: Running on device n306
07/01/2012 @ 12:17:48 | main: Device has Wi-Fi capabilities
qt.qpa.plugin: Could not find the Qt platform plugin "xcb" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
```


[7/19/2022 2:15 AM] tux_linux
well, ok


[7/19/2022 2:15 AM] tux_linux
`env QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox.sh`


[7/19/2022 2:16 AM] szybet
```
kobo:~# env QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.s
h
iniparser: cannot open /mnt/onboard/.kobo/nightmode.ini
cat: can't open '/mnt/onboard/.kobo/Kobo/Kobo eReader.conf': No such file or directory
07/01/2012 @ 12:18:26 | main: Running on device n306
07/01/2012 @ 12:18:26 | main: Device has Wi-Fi capabilities
07/01/2012 @ 12:18:29 | toast: Displaying message 'Generating database'
07/01/2012 @ 12:18:29 | MainWindow: Checking for available updates
07/01/2012 @ 12:18:29 | MainWindow: checkForUpdate: No update available.
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
ASSERT failure in QVector<T>::operator[]: "index out of range", file /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/include/QtCore/qvector.h, line 462
Aborted

```


[7/19/2022 2:16 AM] tux_linux
ok
now run the same `explore_local_library.sh` command above


[7/19/2022 2:16 AM] tux_linux
.


[7/19/2022 2:19 AM] szybet
```
+ cat /opt/inkbox_device
+ DEVICE=n306
+ dirname /mnt/onboard/.adds/inkbox/explore_local_library.sh
+ cd /mnt/onboard/.adds/inkbox
+ EXTRACT_COVER=1 LD_LIBRARY_PATH=/lib:system/lib system/bin/epubtool /mnt/onboard/onboard/ebooki/fun-fun/Wiedzmin/Wiedzmin Krew elfow.ep
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: No such file or directory (os error 2)', src/main.rs:33:48
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
Aborted
+ json=
+ [ n306 == kt ]
+ system/lib/ld-musl-armhf.so.1 /external_root/opt/bin/fbink/fbink -e
system/lib/ld-musl-armhf.so.1: /external_root/opt/bin/fbink/fbink: Not a valid dynamic program
+ eval
+ calculate /
+ awk BEGIN { print / }
awk: cmd. line:1: Unexpected end of string
+ result=
+ printf %.0f\n
+ calculate /
+ awk BEGIN { print / }
awk: cmd. line:1: Unexpected end of string
+ result=
+ printf %.0f\n
+ coverSize=0x0
+ cd /mnt/onboard/onboard/.thumbnails
+ [ 64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2 != * ]
+ echo /mnt/onboard/onboard/.thumbnails/64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2
+ grep -q .t
+ tail -c 3
+ [ c462d0d4b343131684fb0f716b7e8b83fa926d8276d117db1232bede944e4ece.t != * ]
+ tail -c 3
+ grep -q .t
+ echo /mnt/onboard/onboard/.thumbnails/c462d0d4b343131684fb0f716b7e8b83fa926d8276d117db1232bede944e4ece.t
/mnt/onboard/.adds/inkbox/explore_local_library.sh: line 1: Illegal number: -2
```


[7/19/2022 2:20 AM] tux_linux
ok, now
`chroot /kobo /external_root/opt/bin/fbink/fbink`


[7/19/2022 2:22 AM] szybet
```
kobo:~# chroot /kobo /external_root/opt/bin/fbink/fbink
chroot: failed to run command ‘/external_root/opt/bin/fbink/fbink’: No such file or directory
kobo:~# ls /kobo/external_root/opt/bin/
cinematic-brightness.sh  frontlight               shutdown_led
coreutils/               kt_button_monitor        update-splash
e2fsprogs/               poweroff                 wall
fbink/                   reboot
kobo:~# ls /kobo/external_root/opt/bin/fbink/
button_scan     fbdepth-kindle  fbink           fbink-kobo
fbdepth         fbdepth-kobo    fbink-kindle
kobo:~# ls /kobo/external_root/opt/bin/fbink/fbink
fbink         fbink-kindle  fbink-kobo
kobo:~# ls /kobo/external_root/opt/bin/fbink/fbink
/kobo/external_root/opt/bin/fbink/fbink
kobo:~# chroot /kobo /external_root/opt/bin/fbink/fbink
chroot: failed to run command ‘/external_root/opt/bin/fbink/fbink’: No such file or directory
kobo:~# chroot /kobo external_root/opt/bin/fbink/fbink
chroot: failed to run command ‘external_root/opt/bin/fbink/fbink’: No such file or directory
kobo:~# chroot /kobo external_root/opt/bin/fbink/fbink
chroot: failed to run command ‘external_root/opt/bin/fbink/fbink’: No such file or directory
kobo:~# 

```


[7/19/2022 2:22 AM] szybet
bind mount didn't worked?


[7/19/2022 2:22 AM] tux_linux
it seems


[7/19/2022 2:22 AM] tux_linux
`mount | tail`


[7/19/2022 2:23 AM] szybet
```
kobo:~# mount | tail
fuse-overlayfs on /kobo/external_root/opt/X11/extensions_folders_list type fuse.fuse-overlayfs (ro,nodev,noatime,user_id=0,group_id=0,default_permissions,allow_other)
fuse-overlayfs on /kobo/external_root/opt/X11/extensions_list type fuse.fuse-overlayfs (ro,nodev,noatime,user_id=0,group_id=0,default_permissions,allow_other)
fuse-overlayfs on /kobo/external_root/opt/X11/nographic_extensions_folders_list type fuse.fuse-overlayfs (ro,nodev,noatime,user_id=0,group_id=0,default_permissions,allow_othe
r)
fuse-overlayfs on /kobo/external_root/opt/X11/nographic_extensions_list type fuse.fuse-overlayfs (ro,nodev,noatime,user_id=0,group_id=0,default_permissions,allow_other)
/dev/mmcblk0p1 on /kobo/external_root/boot type ext4 (rw,relatime,data=ordered)
/dev/loop5 on /kobo/external_root/lib/modules type squashfs (ro,nosuid,nodev,noexec,relatime)
tmpfs on /kobo/tmp/resolv.conf type tmpfs (rw,relatime,size=16384k)
tmpfs on /kobo/inkbox type tmpfs (rw,relatime)
tmpfs on /kobo/run type tmpfs (rw,relatime,size=131072k)
fuse-overlayfs on /kobo/external_root/opt/bin/fbink/fbink type fuse.fuse-overlayfs (ro,nodev,noatime,user_id=0,group_id=0,default_permissions,allow_other)
```


[7/19/2022 2:23 AM] tux_linux
`/kobo/external_root/opt/bin/fbink/fbink`


[7/19/2022 2:23 AM] tux_linux
(run it)


[7/19/2022 2:23 AM] szybet
```
kobo:~# /kobo/external_root/opt/bin/fbink
-ash: /kobo/external_root/opt/bin/fbink: Permission denied
kobo:~# chmod +x /kobo/external_root/opt/bin/fbink
chmod: changing permissions of '/kobo/external_root/opt/bin/fbink': Read-only file system
kobo:~# 

```


[7/19/2022 2:24 AM] tux_linux
you forgot the second fbink


[7/19/2022 2:24 AM] tux_linux
you're trying to execute a folder currently


[7/19/2022 2:24 AM] tux_linux
.


[7/19/2022 2:24 AM] szybet
oh


[7/19/2022 2:24 AM] szybet
```
kobo:~# /kobo/external_root/opt/bin/fbink/fbink

FBInk v1.23.1-34-g3577ce7 for Kobo

Usage: fbink [OPTIONS] [STRING]

Print STRING on your device's screen.

```


[7/19/2022 2:24 AM] tux_linux
hm ok


[7/19/2022 2:25 AM] tux_linux
`chroot /kobo /mnt/onboard/.adds/inkbox/system/lib/ld-musl-armhf.so.1 /external_root/opt/bin/fbink/fbink`


[7/19/2022 2:25 AM] szybet
works


[7/19/2022 2:25 AM] tux_linux
no way


[7/19/2022 2:26 AM] szybet
i dont know what is happening anyway


[7/19/2022 2:26 AM] tux_linux
there it does the same thing and it doesn't work


[7/19/2022 2:26 AM] tux_linux
try that again, by any chance


[7/19/2022 2:27 AM] tux_linux
otherwise, tomorrow, update rootfs + kernel and clear your rootfs cache


[7/19/2022 2:27 AM] szybet
nothing


[7/19/2022 2:27 AM] szybet
seems like the only solution


[7/19/2022 2:27 AM] tux_linux
yeah, it's messed up


[7/19/2022 2:28 AM] tux_linux
and if you try running that again?


[7/19/2022 2:29 AM] szybet
already shutted down the kobo


[7/19/2022 2:29 AM] tux_linux
ok


[7/19/2022 2:29 AM] szybet
tommorow with a clean build

{Reactions}
👍 👋 

[7/19/2022 6:18 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/7cf0f926986e9ac592880bda231c2217903da866
It's working now for the most part, except that ...bizarre bug you had
anyways, I can fix that in the main tree if ever it's related to the GUI and not the rootfs itself
Things left to do: determine scaling factors for every device/screen resolution correctly
implement folders if needed but you do it
fix special chars (it reappeared again)
and other things I could have maybe forgot

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/7cf0f926986e9ac592880bda231c2217903da866
Merge branch 'localLibraryWidget' into 'master' · Kobo-InkBox/inkbo...
/mnt/data/projects/git/conversations/media/7cf0f926986e9ac592880bda231c2217903da866-F25DA


[7/19/2022 9:54 AM] szybet
Did you tryied my fix for special characters?


[7/19/2022 2:47 PM] tux_linux
That's what I will do


[7/19/2022 4:30 PM] tux_linux
maybe using ntpdate to sync the system clock is better


[7/19/2022 4:35 PM] tux_linux
https://unix.stackexchange.com/a/206374
great

{Embed}
https://unix.stackexchange.com/a/206374
Busybox ping IP works, but hostname nslookup fails with "bad address"
I am compiling my own 3.14 kernel.  I fear I may have left out some important networking feature to get DNS working.

I can't resolve domain names. I can ping my DNS server. 
I can resolve using th...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[7/19/2022 4:49 PM] tux_linux
```
QString specialCharFix(QString string) {
        QTextCodec * codec = QTextCodec::codecForName("ISO 8859-1");
        QString repair = codec->fromUnicode(string.toStdU16String());
        return repair;
}
```
this works
now on to how to apply it everywhere


[7/19/2022 5:24 PM] szybet
our issue is... the opposite


[7/19/2022 5:24 PM] tux_linux
```
kobo:/tmp# ./ntpdate time.apple.com
19 Jul 11:23:32 ntpdate[7503]: step time server 17.253.20.125 offset +7.871078 sec
kobo:/tmp# ./ntpdate 0.ntp.pool.org
19 Jul 11:23:52 ntpdate[7512]: no server suitable for synchronization found
```
weird


[7/19/2022 5:24 PM] szybet
wha...


[7/19/2022 5:25 PM] szybet
mine doesn't worked?


[7/19/2022 5:25 PM] szybet
this is problematic


[7/19/2022 5:25 PM] tux_linux
```
kobo:/tmp# ntpd -n -q
ntpd: bad address 'time.apple.com'
ntpd: bad address '1.pool.ntp.org'
ntpd: bad address '2.pool.ntp.org'
ntpd: bad address '3.pool.ntp.org'
ntpd: bad address '3.pool.ntp.org'
ntpd: bad address '2.pool.ntp.org'
ntpd: bad address '1.pool.ntp.org'
ntpd: bad address 'time.apple.com'
```


[7/19/2022 5:25 PM] szybet
also use it in a function if really needed


[7/19/2022 5:25 PM] tux_linux
I need to apply that transform to every qstring in the program


[7/19/2022 5:26 PM] szybet
?


[7/19/2022 5:26 PM] tux_linux
Everything you put in your notes didn't work except that


[7/19/2022 5:26 PM] szybet
this solution isint perfect


[7/19/2022 5:27 PM] szybet
there will be mess if a function communicates with other witg a string that contains special characters


[7/19/2022 5:27 PM] tux_linux
then what to do


[7/19/2022 5:27 PM] szybet
oh... try also 
```
CODECFORTR = UTF-8
CODECFORSRC = UTF-8
```


[7/19/2022 5:27 PM] szybet
in pro file


[7/19/2022 5:27 PM] tux_linux
you can test with the current commit in master, the bug should be there


[7/19/2022 5:28 PM] szybet
did you put ```
QTextCodec::setCodecForLocale(QTextCodec::codecForName("utf8"));```
after creating qapplication


[7/19/2022 5:28 PM] tux_linux
yes


[7/19/2022 5:28 PM] szybet
well, try this?


[7/19/2022 5:29 PM] szybet
with everything else


[7/19/2022 5:29 PM] szybet
and LC_ALL=en_US when launching? this is most important


[7/19/2022 5:29 PM] tux_linux
yes, everything you wrote


[7/19/2022 5:29 PM] szybet
Weird


[7/19/2022 5:29 PM] tux_linux
i'm trying the codecfortr thing


[7/19/2022 5:30 PM] szybet
this really should work


[7/19/2022 5:30 PM] tux_linux
i want to believe you


[7/19/2022 5:30 PM] tux_linux
but i can't


[7/19/2022 5:30 PM] szybet
doing this with the function isin't a good solution, i would like to avoid that


[7/19/2022 5:31 PM] tux_linux
me too


[7/19/2022 5:33 PM] tux_linux
it doesn't


[7/19/2022 5:38 PM] tux_linux
look, it does not work even in logging output
```
19/07/2022 @ 11:37:14 | localLibraryWidget: Reading database
19/07/2022 @ 11:37:15 | localLibraryWidget: Opening book with ID 4, path '/mnt/onboard/onboard/La biche Ã©crasÃ©e.68086.epub'
```


[7/19/2022 5:38 PM] szybet
meh... can you do some other things today, not implementing the function everywhere? i want to have a look for it on my own

{Reactions}
👍 

[7/19/2022 5:40 PM] tux_linux
🤣 it works in local storage search

{Attachments}
/mnt/data/projects/git/conversations/media/search-F9A2D.png


[7/19/2022 5:40 PM] tux_linux
but not in home screen

{Attachments}
/mnt/data/projects/git/conversations/media/home-A27F0.png


[7/19/2022 5:41 PM] szybet
maybe this isin't passed between widgets always?


[7/19/2022 5:41 PM] tux_linux
the issue might actually be the handling of the encoding when reading the databases


[7/19/2022 5:41 PM] tux_linux
since local storage search doesn't rely on any database


[7/19/2022 5:41 PM] szybet
do you create another qapplications?


[7/19/2022 5:42 PM] tux_linux
yes


[7/19/2022 5:42 PM] szybet
i mean... they are still reading bytes


[7/19/2022 5:42 PM] tux_linux
yes, and the question now is why did it work before and not now


[7/19/2022 5:42 PM] szybet
and then they are converted


[7/19/2022 5:42 PM] tux_linux
json->qcompress->base64->qstring


[7/19/2022 5:42 PM] szybet
um... why and apply it to other qapplications as well


[7/19/2022 5:42 PM] tux_linux
to launch different widgets (e.g. encryptionManager)


[7/19/2022 5:43 PM] tux_linux
I put the qtextcodec call where mainwindow is launched


[7/19/2022 5:43 PM] szybet
another qapplication for another qwidgets?


[7/19/2022 5:43 PM] tux_linux
yea?


[7/19/2022 5:43 PM] szybet
try it


[7/19/2022 5:43 PM] tux_linux
i did that too


[7/19/2022 5:43 PM] szybet
can you send a code with creating those widgets?


[7/19/2022 5:44 PM] tux_linux
it doesn't matter, the code for them is not executed


[7/19/2022 5:44 PM] tux_linux
only mainwindow is


[7/19/2022 5:44 PM] szybet
apply it after creating the qapplication, and in the new qwidget code itself


[7/19/2022 5:44 PM] tux_linux
i even put a log call right after textcodec to ensure it was setting it


[7/19/2022 5:44 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/7cf0f926986e9ac592880bda231c2217903da866/main.cpp#L176


[7/19/2022 5:45 PM] szybet
and after it do the codec


[7/19/2022 5:45 PM] tux_linux
after QApplication... ?


[7/19/2022 5:46 PM] szybet
yes


[7/19/2022 5:46 PM] szybet
also maybe under mainwindow


[7/19/2022 5:46 PM] tux_linux
that is what I did


[7/19/2022 5:47 PM] szybet
in widgets where it isin't showing right, also apply the codec


[7/19/2022 6:04 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/fa20895ad83c3224ecfecf773ecd3d4713eb626f

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/fa20895ad83c3224ecfecf773ecd3d4713eb626f
Local library: Fix special characters issue · Kobo-InkBox/inkbox@fa...
/mnt/data/projects/git/conversations/media/fa20895ad83c3224ecfecf773ecd3d4713eb626f-00375


[7/19/2022 6:04 PM] tux_linux
The issue was that the database I had had been generated with a previous version that didn't have the qtextcodec thing


[7/19/2022 6:04 PM] szybet
i t w o r k s ?


[7/19/2022 6:05 PM] szybet
oh... add a comment in the code


[7/19/2022 6:05 PM] tux_linux
So I removed the database, it generated it again and it works now


[7/19/2022 6:05 PM] tux_linux
why?


[7/19/2022 6:05 PM] szybet
to avoid confusion in the future


[7/19/2022 6:05 PM] tux_linux
it is not supposed to happen in the future


[7/19/2022 6:06 PM] szybet
🥴


[7/19/2022 6:07 PM] tux_linux
nobody has that on their devices now


[7/19/2022 6:07 PM] tux_linux
when it will be released it will work


[7/19/2022 6:07 PM] tux_linux
i hope


[7/19/2022 6:17 PM] ninuje
What's the system locale, and are they actually generated properly?


[7/19/2022 6:18 PM] ninuje
(sidebar : I have no idea how this works with musl, that's usually handled by glibc support scripts).


[7/19/2022 6:18 PM] ninuje
Specifically, utf-8 locales


[7/19/2022 6:19 PM] ninuje
(they're not there in stock Kobo FW)


[7/19/2022 6:22 PM] tux_linux
There... isn't ? 🥴


[7/19/2022 6:23 PM] szybet
yea, thats how i figured this out ;p


[7/19/2022 6:23 PM] tux_linux
"C"


[7/19/2022 7:12 PM] ninuje
That's probably not helping? :D


[7/19/2022 10:35 PM] szybet
doesnt work with updated rootfs


[7/19/2022 10:35 PM] szybet
@tux-linux


[7/19/2022 10:41 PM] szybet
interesting

{Attachments}
/mnt/data/projects/git/conversations/media/message-71F3F.txt


[7/19/2022 10:42 PM] szybet
idk


[7/19/2022 10:42 PM] szybet
¯\_(ツ)_/¯


[7/19/2022 10:42 PM] szybet
maybe gui bundle made by me is broken


[7/19/2022 10:45 PM] szybet
still awk is broken


[7/19/2022 11:53 PM] ninuje
Re: encoding. Also, remember that Qt5 is like Python 3, it's UTF-16 native

{Reactions}
👍 

[7/19/2022 11:53 PM] ninuje
c.f., https://doc.qt.io/qt-5/qstring.html#details

{Reactions}
👍 

[7/19/2022 11:53 PM] ninuje
There may be trickery needed, especially if you're using the NO_CAST macros


[7/19/2022 11:53 PM] ninuje
(which is recommended and/or might be the default in Qt5)


[7/20/2022 1:17 AM] szybet
```
../inkbox-pd/src/powerDaemon/sleepdialog.cpp: In member function 'void sleepdialog::launchSleepPipeWatchdog()':
../inkbox-pd/src/powerDaemon/sleepdialog.cpp:43:20: error: no matching function for call to 'sleepdialog::open(char*&, int)'
   43 |         fdin = open(fifosin, O_RDONLY);
```
how do i get the native low level open()... i included all files...


[7/20/2022 1:22 AM] szybet
https://blog.fearcat.in/a?ID=00550-d92fb16e-df49-49b7-8754-f1cdd78acd0f


[7/20/2022 1:22 AM] szybet
oh my god


[7/20/2022 3:14 AM] tux_linux
well, there is progress


[7/20/2022 3:16 AM] tux_linux
hmm yeah `icon_width_divider` is provided by Qt
you tried it from Qt too?


[7/20/2022 3:27 AM] tux_linux
it should work


[7/20/2022 11:57 AM] szybet
you mean?


[7/20/2022 11:57 AM] szybet
it doesnt work, same error in qt


[7/20/2022 1:57 PM] tux_linux
crap


[7/20/2022 1:58 PM] tux_linux
I would've told you to gdb but gdb doesn't work with InkBox 👍


[7/20/2022 1:58 PM] szybet
why


[7/20/2022 1:58 PM] tux_linux
Well, to see what causes it to hang


[7/20/2022 1:58 PM] szybet
maybe the qt bundle i created is horribly broken, can you send yours?


[7/20/2022 1:58 PM] tux_linux
\/crash


[7/20/2022 1:58 PM] szybet
crap


[7/20/2022 1:59 PM] tux_linux
Why would it be


[7/20/2022 1:59 PM] szybet
becouse yes


[7/20/2022 1:59 PM] tux_linux
You used release.sh?


[7/20/2022 1:59 PM] szybet
yes


[7/20/2022 2:00 PM] tux_linux
Can you change /kobo/opt/inkbox_device to n437 ?


[7/20/2022 2:00 PM] szybet
😆  ok why


[7/20/2022 2:00 PM] tux_linux
Just bind mount a file from tmp


[7/20/2022 2:00 PM] tux_linux
And relaunch the binary


[7/20/2022 2:01 PM] tux_linux
Because it works on my device


[7/20/2022 2:03 PM] szybet
```
09/01/2012 @ 00:07:04 | main: Running on device n437
09/01/2012 @ 00:07:04 | main: Device has Wi-Fi capabilities
09/01/2012 @ 00:07:09 | toast: Displaying message 'Generating database'
09/01/2012 @ 00:07:09 | MainWindow: Checking for available updates
09/01/2012 @ 00:07:09 | MainWindow: checkForUpdate: No update available.
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
ASSERT failure in QVector<T>::operator[]: "index out of range", file /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/include/QtCore/qvector.h, line 462
Aborted
```


[7/20/2022 2:03 PM] tux_linux
Ok crap


[7/20/2022 2:03 PM] tux_linux
cat /kobo/opt/inkbox_device


[7/20/2022 2:04 PM] tux_linux
Oh nvm


[7/20/2022 2:04 PM] szybet
i simply nano it


[7/20/2022 2:04 PM] szybet
¯\_(ツ)_/¯


[7/20/2022 2:04 PM] tux_linux
Bad


[7/20/2022 2:04 PM] tux_linux
But ok


[7/20/2022 2:04 PM] tux_linux
You will need to erase the GUI rootfs cache


[7/20/2022 2:04 PM] tux_linux
Later


[7/20/2022 2:05 PM] szybet
well i can do this now


[7/20/2022 2:05 PM] tux_linux
So there isn't anything in .database


[7/20/2022 2:05 PM] szybet
where is it once more?


[7/20/2022 2:06 PM] tux_linux
/data/onboard/.database


[7/20/2022 2:06 PM] szybet
empty


[7/20/2022 2:06 PM] tux_linux
How many books in your onboard storage


[7/20/2022 2:07 PM] szybet
many


[7/20/2022 2:07 PM] szybet
100+?


[7/20/2022 2:07 PM] tux_linux
Also, `mount | grep onboard`


[7/20/2022 2:07 PM] tux_linux
Keep only one or two epubs and remove everything else


[7/20/2022 2:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-EB0D0.txt


[7/20/2022 2:09 PM] tux_linux
Looks good


[7/20/2022 2:10 PM] tux_linux
Maybe it's panicking because there are too much books for some reason
The max I tried here was ~25
Good to know


[7/20/2022 2:10 PM] szybet
there are only 6 now in onboard


[7/20/2022 2:11 PM] szybet
without folders


[7/20/2022 2:11 PM] szybet
inkbox is launching longer but still crashes


[7/20/2022 2:11 PM] szybet
and database is empty anyway


[7/20/2022 2:12 PM] tux_linux
Run explore_local...
Add `icon_width_divider=2`


[7/20/2022 2:12 PM] tux_linux
Might not be the correct value but doesn't matter


[7/20/2022 2:13 PM] szybet
on which epub?


[7/20/2022 2:13 PM] tux_linux
All


[7/20/2022 2:13 PM] tux_linux
Don't use wildcard


[7/20/2022 2:13 PM] szybet
?


[7/20/2022 2:13 PM] tux_linux
It will not work


[7/20/2022 2:13 PM] tux_linux
*


[7/20/2022 2:13 PM] szybet
whats a wildcard


[7/20/2022 2:13 PM] tux_linux
Declare them one by one


[7/20/2022 2:13 PM] tux_linux
*


[7/20/2022 2:14 PM] szybet
?


[7/20/2022 2:14 PM] tux_linux
ls *


[7/20/2022 2:14 PM] szybet
oh okay


[7/20/2022 2:14 PM] tux_linux
But don't use it


[7/20/2022 2:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D5641.txt


[7/20/2022 2:18 PM] tux_linux
`chroot /kobo env icon_height_divider=2 icon_width_divider=2 /bin/sh -x /mnt/onboard/.adds/inkbox/explore_local_library.sh`


[7/20/2022 2:18 PM] tux_linux
But hang on


[7/20/2022 2:19 PM] tux_linux
Ok now run the command above


[7/20/2022 2:20 PM] szybet
without the epub?


[7/20/2022 2:20 PM] tux_linux
With your epubs


[7/20/2022 2:20 PM] szybet
only one


[7/20/2022 2:20 PM] szybet
deleted the rest


[7/20/2022 2:20 PM] szybet
its fgaster


[7/20/2022 2:20 PM] tux_linux
Ok


[7/20/2022 2:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-5E531.txt


[7/20/2022 2:21 PM] szybet
the same?


[7/20/2022 2:21 PM] szybet
what problem are you trying to solve?


[7/20/2022 2:22 PM] tux_linux
Try to run inkbox binary now


[7/20/2022 2:24 PM] szybet
the same


[7/20/2022 2:24 PM] szybet
?


[7/20/2022 2:25 PM] tux_linux
I don't know anymore


[7/20/2022 2:25 PM] szybet
1. give me built by you a gui bundle


[7/20/2022 2:25 PM] szybet
2. more logging


[7/20/2022 2:34 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/update-n306.isa


[7/20/2022 2:34 PM] tux_linux
if this doesn't work then nothing will i guess


[7/20/2022 2:35 PM] tux_linux
don't forget to change `/kobo/opt/inkbox_device` to its original value


[7/20/2022 2:35 PM] tux_linux
i.e. clear gui_rootfs cache


[7/20/2022 2:36 PM] szybet
i will clear all cache

{Reactions}
👍 

[7/20/2022 3:52 PM] tux_linux
Does it work ?


[7/20/2022 3:53 PM] szybet
i tested it now


[7/20/2022 3:53 PM] szybet
yes


[7/20/2022 3:53 PM] szybet
now what is wrong with mine gui bundle creation thing


[7/20/2022 3:53 PM] szybet
i also cleared cache


[7/20/2022 3:54 PM] szybet
i already have 2 pinned the same book


[7/20/2022 3:54 PM] szybet
some bugfixes are needed


[7/20/2022 3:54 PM] szybet
🥴


[7/20/2022 3:54 PM] szybet
but otherwise its great


[7/20/2022 3:57 PM] tux_linux
It should be handled


[7/20/2022 3:57 PM] szybet
yea it showed the toast


[7/20/2022 3:57 PM] szybet
but still


[7/20/2022 3:57 PM] tux_linux
Ah


[7/20/2022 3:57 PM] tux_linux
Strange


[7/20/2022 3:57 PM] tux_linux
Look in pinBook function of bookOptionsDialog


[7/20/2022 3:57 PM] szybet
have you any exprerience with qthread?


[7/20/2022 3:58 PM] szybet
will it work with inkbox?


[7/20/2022 3:58 PM] tux_linux
Almost none


[7/20/2022 3:58 PM] szybet
okay


[7/20/2022 3:58 PM] tux_linux
What do you want to achieve ?


[7/20/2022 3:58 PM] szybet
i need it for sleep dialog


[7/20/2022 3:58 PM] tux_linux
Use qtimer if you don't want to hang the ui


[7/20/2022 3:58 PM] szybet
becouse open() the fifo pipe freezes the whole process


[7/20/2022 3:58 PM] szybet
qtimer::singleshot, thats what i used


[7/20/2022 3:58 PM] tux_linux
Great


[7/20/2022 3:59 PM] tux_linux
Well try qthread of you want


[7/20/2022 3:59 PM] szybet
if i manage to do this


[7/20/2022 3:59 PM] szybet
its complicated


[7/20/2022 4:00 PM] tux_linux
Otherwise we could use dbus but
1. It's across chroots
2. It's not set up anywhere currently
So it might actually be more complicated


[7/20/2022 4:00 PM] szybet
dbus is such a broken thing


[7/20/2022 4:00 PM] szybet
no i dont want to


[7/20/2022 4:04 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/fa20895ad83c3224ecfecf773ecd3d4713eb626f/bookoptionsdialog.cpp#L87-L113
It should work


[7/20/2022 4:06 PM] szybet
i will debug the library after i finish the daemon

{Reactions}
👍 

[7/20/2022 4:06 PM] szybet
did you tested it already?


[7/20/2022 4:06 PM] tux_linux
yes, and it did work as far as I recall


[7/20/2022 4:07 PM] szybet
/tmp/powerDaemonlog.txt?


[7/20/2022 4:07 PM] szybet
everything worked?


[7/20/2022 4:07 PM] tux_linux
oh that


[7/20/2022 4:08 PM] tux_linux
this?


[7/20/2022 4:08 PM] szybet
yes


[7/20/2022 4:10 PM] tux_linux
it seems to work now
```
Debug mode is activated
Saving logs to /tmp/PowerDaemonLogs.txt
Reading variables
Running on: n437
couldn't read config file: /opt/config/12-lockscreen/config
lockscreen is: none
Loaded FBInk version: v1.24.0-176-g5ecd240 for Kobo
Starting monitoring events
Input device name: gpio-keys
Input device bus 25 vendor: 1 product: 1
```


[7/20/2022 4:11 PM] szybet
```
couldn't read config file: /opt/config/12-lockscreen/config
lockscreen is: none
```
why?


[7/20/2022 4:11 PM] tux_linux
And yes it did

{Attachments}
/mnt/data/projects/git/conversations/media/message-79CAA.txt


[7/20/2022 4:11 PM] tux_linux
`some devices failed to suspend` is because I had USB plugged in


[7/20/2022 4:11 PM] szybet
it should try to suspend anyway


[7/20/2022 4:11 PM] tux_linux
it tried to


[7/20/2022 4:11 PM] szybet
and failed?


[7/20/2022 4:12 PM] szybet
maybe the full log?


[7/20/2022 4:12 PM] tux_linux
this is the full log


[7/20/2022 4:12 PM] szybet
this?


[7/20/2022 4:12 PM] tux_linux
yes, I sent you the contents of `/tmp/PowerDaemonLogs.txt` and stdout looked the same


[7/20/2022 4:13 PM] tux_linux
oh nvm


[7/20/2022 4:13 PM] szybet
where are the other logs?...


[7/20/2022 4:13 PM] tux_linux
i forgot to stop the normal sleep system


[7/20/2022 4:14 PM] szybet
it didn't worked


[7/20/2022 4:14 PM] tux_linux
they don't exist


[7/20/2022 4:14 PM] szybet
becouse if evtest occupies a device then libevdev cant detect anything


[7/20/2022 4:14 PM] szybet
killall -9 sleep_standby.sh


[7/20/2022 4:15 PM] szybet
killall -9 evtest


[7/20/2022 4:15 PM] szybet
execute it like 5 times


[7/20/2022 4:15 PM] tux_linux
i know


[7/20/2022 4:15 PM] szybet
this is needed even if you stopped the service


[7/20/2022 4:16 PM] tux_linux
it works now

{Attachments}
/mnt/data/projects/git/conversations/media/message-4926E.txt


[7/20/2022 4:16 PM] tux_linux
the errors happen until I unplug USB
you should add something to handle that to prevent a sleep loop


[7/20/2022 4:17 PM] tux_linux
it also fails to restore the fb dump because the glo hd's bpp changes after waking up


[7/20/2022 4:17 PM] szybet
yea this... i font know how to implement this


[7/20/2022 4:17 PM] szybet
i will remove usb net modules before sleep


[7/20/2022 4:18 PM] tux_linux
I don't think it's the issue


[7/20/2022 4:18 PM] tux_linux
it's just the fact that USB is plugged in


[7/20/2022 4:18 PM] tux_linux
It happens in devices from 2011 to ~2017


[7/20/2022 4:18 PM] tux_linux
mark 7 doesn't have this problem iirc


[7/20/2022 4:19 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/16e9d03a7d872cee8fadb5dabf3c96100b009349/etc/init.d/wake_standby.sh#L19-L31


[7/20/2022 4:19 PM] szybet
okay, i will add it anyway. a checkbutton in gui

{Reactions}
👍 

[7/20/2022 4:19 PM] tux_linux
btw it's `/bin/wlarm_le`


[7/20/2022 4:20 PM] szybet
oh, okay


[7/20/2022 4:20 PM] tux_linux
it's good work


[7/20/2022 4:25 PM] tux_linux
did you handle when user clicks the power button while wi-fi is reconnecting?


[7/20/2022 4:25 PM] szybet
still not


[7/20/2022 4:25 PM] szybet
but i will add it

{Reactions}
👍 

[7/20/2022 4:31 PM] tux_linux
does it work with my gui bundle but with your binary?


[7/20/2022 4:32 PM] tux_linux
it should present you the `Unpin` option


[7/20/2022 4:32 PM] szybet
will try soon


[7/20/2022 4:33 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unpin-2ADDD.png


[7/20/2022 4:33 PM] szybet
also i dont see any cover in pinned books


[7/20/2022 4:33 PM] szybet
but in library there is one


[7/20/2022 4:34 PM] tux_linux
??


[7/20/2022 4:34 PM] szybet
just textr


[7/20/2022 4:34 PM] tux_linux
can you put more books (~10) and `rm /data/onboard/.database/*`, then relaunch the gui?


[7/20/2022 4:35 PM] szybet
sure


[7/20/2022 5:34 PM] tux_linux
Icons look good?

{Attachments}
/mnt/data/projects/git/conversations/media/icon-8C348.png


[7/20/2022 5:35 PM] szybet
yes, really good

{Reactions}
👍 

[7/20/2022 5:35 PM] szybet
where do i put the pipe in user app filesystem?


[7/20/2022 5:35 PM] szybet
it is created dynamically at every boot


[7/20/2022 5:35 PM] tux_linux
But you need to create it for every user app


[7/20/2022 5:35 PM] szybet
mount --bind


[7/20/2022 5:35 PM] tux_linux
yeah you could probably do that


[7/20/2022 5:36 PM] szybet
im


[7/20/2022 5:36 PM] tux_linux
I use it for `/kobo/opt/ibxd`


[7/20/2022 5:36 PM] szybet
but where to put it


[7/20/2022 5:36 PM] tux_linux
(which is `/run/ibxd`)


[7/20/2022 5:36 PM] tux_linux
hmm


[7/20/2022 5:36 PM] tux_linux
you can throw it in `/dev`


[7/20/2022 5:37 PM] tux_linux
well, maybe `/app-temp`, but you are at risk of getting overwritten/deleted by something else


[7/20/2022 5:37 PM] tux_linux
user apps can't write to `/dev`


[7/20/2022 5:37 PM] szybet
a directory with a pipe


[7/20/2022 5:37 PM] szybet
powerDaemonPipe


[7/20/2022 5:37 PM] tux_linux
why do you need a directory?


[7/20/2022 5:38 PM] szybet
easier to handle


[7/20/2022 5:38 PM] tux_linux
harder to make


[7/20/2022 5:38 PM] szybet
+ maybe more pipes for diffrent purpuses


[7/20/2022 5:38 PM] szybet
but maybe in the future


[7/20/2022 5:38 PM] tux_linux
more pipes can go in dev


[7/20/2022 5:38 PM] szybet
no


[7/20/2022 5:38 PM] tux_linux
it's not really fhs-compliant


[7/20/2022 5:38 PM] tux_linux
but anyway


[7/20/2022 5:38 PM] szybet
so /dev


[7/20/2022 5:38 PM] szybet
okay then


[7/20/2022 5:38 PM] tux_linux
yet another directory to create for app developers


[7/20/2022 5:38 PM] szybet
no


[7/20/2022 5:38 PM] szybet
its created by inkbox


[7/20/2022 5:38 PM] tux_linux
inkbox can't create it


[7/20/2022 5:38 PM] szybet
becouse?


[7/20/2022 5:38 PM] tux_linux
the app squashfs is read-only


[7/20/2022 5:39 PM] tux_linux
`/dev/ipd`


[7/20/2022 5:39 PM] szybet
oh, okay


[7/20/2022 5:39 PM] tux_linux
if you want I can add a mkfifo call in `gui_apps` service that does it


[7/20/2022 5:40 PM] szybet
i will do this in inkbox


[7/20/2022 5:40 PM] tux_linux
well, I mkfifo it in gui_apps and you open/write/everything else in inkbox


[7/20/2022 5:41 PM] szybet
its easier to me to handle it in inkbox


[7/20/2022 5:41 PM] tux_linux
maybe, but I like everything to be centralized at one place


[7/20/2022 5:41 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-2BA7F.png


[7/20/2022 5:42 PM] szybet
inkbox already launches a new thread becouse of it, so everything will be there


[7/20/2022 5:42 PM] tux_linux
because of what?


[7/20/2022 5:42 PM] szybet
the pipe


[7/20/2022 5:42 PM] szybet
to listen to it


[7/20/2022 5:42 PM] tux_linux
yeah, it can listen to an already-existing one?


[7/20/2022 5:43 PM] tux_linux
otherwise if you really want to create it there you need to handle permissions


[7/20/2022 5:43 PM] szybet
i only bind mount it in inkbox to user apps


[7/20/2022 5:43 PM] tux_linux
ok, you will need to `chown user:user` your pipe initially


[7/20/2022 5:44 PM] tux_linux
where will it be located?


[7/20/2022 5:44 PM] tux_linux
`/run/ipd`?


[7/20/2022 5:44 PM] szybet
why it needs this?


[7/20/2022 5:44 PM] tux_linux
or maybe `/dev/ipd` for consistency


[7/20/2022 5:44 PM] tux_linux
because the user application won't be able to write to it otherwise


[7/20/2022 5:44 PM] szybet
doesnt need to


[7/20/2022 5:45 PM] szybet
inkbox also doesnt write to it


[7/20/2022 5:45 PM] szybet
only listens


[7/20/2022 5:45 PM] tux_linux
oh ok


[7/20/2022 5:45 PM] tux_linux
it will never do that?


[7/20/2022 5:45 PM] szybet
i can chmod 777 if i its really needed


[7/20/2022 5:45 PM] tux_linux
i see some interesting functions you could add


[7/20/2022 5:45 PM] tux_linux
`echo sleep > /dev/ipd`


[7/20/2022 5:45 PM] szybet
for now, no


[7/20/2022 5:46 PM] szybet
well, maybe in the future

{Reactions}
👍 

[7/20/2022 5:48 PM] tux_linux
you sure you don't want that?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A2F8E.png


[7/20/2022 5:48 PM] szybet
its only one line?


[7/20/2022 5:49 PM] tux_linux
yes


[7/20/2022 5:49 PM] tux_linux
assuming you chown it at its creation yourself


[7/20/2022 5:49 PM] szybet
okay, then yes its simpler
the pipe is located in /tmp/powerDaemonPipe/fifo


[7/20/2022 5:50 PM] tux_linux
you don't want to put it in `/dev/ipd`?


[7/20/2022 5:50 PM] szybet
you can in the user app


[7/20/2022 5:50 PM] szybet
but in the filesystem its there


[7/20/2022 5:50 PM] szybet
also you need to launch the gui user app service after the sleep daemon

{Reactions}
👍 

[7/20/2022 5:51 PM] tux_linux
I use `/run` for pipes normally


[7/20/2022 5:51 PM] tux_linux
(`/run/initrd-fifo`, `/run/ibxd`)


[7/20/2022 5:51 PM] szybet
okay, so /run/powerDaemonPipe/fifo

{Reactions}
👍 

[7/20/2022 5:51 PM] tux_linux
what's the name of the service?


[7/20/2022 5:51 PM] tux_linux
`ipd`?


[7/20/2022 5:53 PM] tux_linux
I suggest `/run/ipd/fifo`
So that later you can put other related files there (e.g. log, crash report, etc.)


[7/20/2022 5:53 PM] tux_linux
what do you think


[7/20/2022 5:55 PM] szybet
logs crash reports are going to /tmp

{Reactions}
👍 

[7/20/2022 5:55 PM] szybet
okay

{Reactions}
👍 

[7/20/2022 5:56 PM] tux_linux
`ipd` is ok?


[7/20/2022 5:56 PM] szybet
sure


[7/20/2022 5:59 PM] tux_linux
I couldn't test it, but it should work
https://github.com/Kobo-InkBox/rootfs/commit/88eaf997854bda26b907680c1abff445f7c5d2b8

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/88eaf997854bda26b907680c1abff445f7c5d2b8
gui_apps: Bind-mount power daemon named pipe · Kobo-InkBox/rootfs@8...
/mnt/data/projects/git/conversations/media/88eaf997854bda26b907680c1abff445f7c5d2b8-EAFCF


[7/20/2022 5:59 PM] szybet
okay htanks

{Reactions}
👍 

[7/20/2022 6:00 PM] szybet
is mainwindow always active?


[7/20/2022 6:00 PM] szybet
so if i call a slot of it, will it always be there?


[7/20/2022 6:10 PM] tux_linux
most of the time, yes
but it's inactive when
1. alert splash
2. encryption manager
3. reader is opened without mainwindow (happens with lockscreen, needs to change in the future)


[7/20/2022 6:11 PM] szybet
so if i create a slot in mainwindow to launch the dialog i will be fine?


[7/20/2022 6:11 PM] szybet
or something similar^


[7/20/2022 6:12 PM] tux_linux
what dialog exactly?


[7/20/2022 6:12 PM] szybet
sleep dialog


[7/20/2022 6:12 PM] tux_linux
yes, unless one of the conditions above is there


[7/20/2022 6:12 PM] tux_linux
to prevent touch input?


[7/20/2022 6:12 PM] szybet
yes


[7/20/2022 6:12 PM] tux_linux
ok


[7/20/2022 10:42 PM] tux_linux
and?


[7/20/2022 11:00 PM] szybet
how do i update the database - books are not showing up


[7/20/2022 11:00 PM] szybet
i send them over scp


[7/20/2022 11:01 PM] szybet
reboot - service restart, nothing worked


[7/20/2022 11:01 PM] tux_linux
You need to delete locallibrary.db
Usbms does that on exiting


[7/20/2022 11:04 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220720_230349-39FC6.jpg
/mnt/data/projects/git/conversations/media/IMG_20220720_230344-6EAA9.jpg


[7/20/2022 11:04 PM] szybet
well well well


[7/20/2022 11:10 PM] tux_linux
It's supposed to display no cover available


[7/20/2022 11:11 PM] szybet
its your gui bundle that you send me


[7/20/2022 11:11 PM] tux_linux
Ok, that is one thing I thought would happen
We need to change the icon sizes a bit


[7/20/2022 11:11 PM] szybet
a bit yes


[7/20/2022 11:12 PM] tux_linux
Does your binary work with my bundle ?


[7/20/2022 11:14 PM] szybet
I will try to create a bundle one more time


[7/20/2022 11:14 PM] szybet
https://github.com/Szybet/gui-bundle im using this


[7/20/2022 11:15 PM] szybet
i dont think there is anything to break the bundle


[7/20/2022 11:28 PM] tux_linux
Try my repo


[7/20/2022 11:28 PM] tux_linux
It should not be different


[7/20/2022 11:28 PM] tux_linux
But you can try


[7/20/2022 11:34 PM] szybet
it does work


[7/20/2022 11:34 PM] szybet
so the problem was gui write cache


[7/20/2022 11:35 PM] tux_linux
Great


[7/20/2022 11:35 PM] szybet
what there was causing the problem?


[7/20/2022 11:35 PM] szybet
you checked it


[7/20/2022 11:44 PM] tux_linux
Idk


[7/21/2022 4:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-09496

{Reactions}
👍 

[7/21/2022 4:43 PM] szybet
can you @tux-linux test it and try to break it? look for any crash, buffer overflow, ram refill, no responses, anything.
the only thing that can happen:
1. Fbink will be on sleep screen when actually inkbox is running below it and the whole screen needs to refresh ( can happen rarely, i can do nothing about it )
2. a no response when changing brightness. i will fix it


[7/21/2022 4:45 PM] szybet
i did like 4 rewrites of the watchdog and threading system, to find an ideal one. i regret that i didnt used a more powerfull one than std::thread but... i have control over everything


[7/21/2022 4:45 PM] szybet
https://github.com/Szybet/inkbox-power-deamon/commit/6d9ac42ddef00b9ac15ddce34813f59985477cf9


[7/21/2022 4:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E64B6.png


[7/21/2022 4:45 PM] szybet
🥴


[7/22/2022 2:21 AM] szybet
im finishing it completly, some questions:
- which devices at default to avoid going to sleep when charging ( model numbers )
- does kt have the same messages in battery status than other devices?


[7/22/2022 6:57 AM] tux_linux
n905c n905b n705 n613 n236 n437 kt

No

{Reactions}
👍 

[7/22/2022 11:24 AM] aryetis
what's that about the sleep and charging ?
Is charging preventing some device to go to sleep ? Can some devices not charge when sleeping ?


[7/22/2022 11:24 AM] szybet
look here


[7/22/2022 11:25 AM] szybet
Idk, i will implement this function anyway


[7/22/2022 11:25 AM] szybet
also disconnecting charger / connecting also desuspends the device, which i will prevent ( as an optional feature )


[7/22/2022 11:27 AM] szybet
also i dont know if you know, but the user app "ecosystem" is ready


[7/22/2022 11:30 AM] aryetis
I noticed, I'm lurking around not saying much 😉


[7/22/2022 11:33 AM] szybet
soo what are those messages?


[7/22/2022 11:34 AM] szybet
for kt, in `/sys/devices/system/yoshi_battery/yoshi_battery0/battery_status`


[7/22/2022 11:41 AM] ninuje
Anything below mk6 will not suspend while plugged in, yeah ;)


[7/22/2022 11:56 AM] aryetis
what does mk5, mk6, mk7 refers to btw?


[7/22/2022 11:56 AM] szybet
BMW cars


[7/22/2022 11:56 AM] szybet
google said it


[7/22/2022 11:56 AM] szybet
trust me


[7/22/2022 11:57 AM] aryetis
yeah I tried that, google failed me too


[7/22/2022 11:59 AM] aryetis
<https://pgaskin.net/KoboStuff/kobofirmware.html> gonna say that's what it's refering to koboX <=> mkX


[7/22/2022 12:42 PM] ninuje
Roughly device generations


[7/22/2022 12:43 PM] szybet
what are possible wake up sources? power button, hal sensor, charger


[7/22/2022 12:44 PM] szybet
rtc clock for now no


[7/22/2022 12:44 PM] ninuje
Check the device tree blob


[7/22/2022 12:45 PM] szybet
what are possible ***actually used in normal usage*** wake up sources?


[7/22/2022 12:45 PM] ninuje
Buttons, screen, hall, gyro, rtc


[7/22/2022 12:46 PM] szybet
i dont have gyros to test


[7/22/2022 12:46 PM] szybet
when screen would wake up the device?


[7/22/2022 12:59 PM] ninuje
Touch panel


[7/22/2022 12:59 PM] ninuje
The EPDC is, too, technically


[7/22/2022 12:59 PM] ninuje
IIRC


[7/22/2022 1:00 PM] szybet
how, when?


[7/22/2022 1:00 PM] ninuje
Keep in mind I'm only talking about standby


[7/22/2022 1:00 PM] ninuje
In suspend it's just going to be rtc and power button


[7/22/2022 1:00 PM] szybet
echo standby > /sys/power/state ?


[7/22/2022 1:01 PM] ninuje
Assuming state-extended is set properly


[7/22/2022 1:01 PM] szybet
and hall


[7/22/2022 1:01 PM] ninuje
But do expect and handle random ass wakeup ;p


[7/22/2022 1:02 PM] ninuje
Yeah, hall too


[7/22/2022 1:02 PM] szybet
i will need to :/


[7/22/2022 1:06 PM] aryetis
I'm not sure about gyro waking up the device... At least not on mine but I can test it tonight. It might depends on the mk too.


[7/22/2022 1:45 PM] ninuje
From standby, yeah. Not suspend.


[7/22/2022 2:52 PM] aryetis
On that topic I remember my device refusing to go in suspend mode because I had a clock updating every second. And even when it wasn't printing new stuff on screen (cause no minute passed) it was still preventing blocking the suspend. That was pretty stupid of me.


[7/22/2022 8:33 PM] szybet
```
kobo:/sys/devices/platform/leds/leds/GLED# cat max_brightness 
255
kobo:/sys/devices/platform/leds/leds/GLED# cat brightness 
0
kobo:/sys/devices/platform/leds/leds/GLED# 

```
i wonder what will happen if i set it to 255


[7/22/2022 8:34 PM] szybet
becouse setting it to 1 makes the brightness of the led at max


[7/22/2022 8:34 PM] szybet
🥴


[7/24/2022 4:10 PM] szybet
@NiLuJe i have a question. What can be done to extremely increase the battery life when the device is suspended? I already checked, `powersave` cpu governor does some job ( on the nia ). Any other ideas?


[7/24/2022 4:11 PM] ninuje
Nothing, it's asleep.


[7/24/2022 4:11 PM] ninuje
It's already the lowest possible sleep state


[7/24/2022 4:11 PM] ninuje
Unless you want to delve into suspend to disk


[7/24/2022 4:11 PM] ninuje
Which might or might not be supported anyway


[7/24/2022 4:12 PM] ninuje
The only actionable stuff is when the device is *in use* with aggressive standby after inactivity like what Nickel does


[7/24/2022 4:12 PM] szybet
isin't propably possible, and tux-linux would kill me if i wanted a swap partition, becouse i doubt a swap file will work for this ;p


[7/24/2022 4:13 PM] szybet
with the current published kernel for the nia its impossible, the touch screen is buggy for waking up the device


[7/24/2022 4:13 PM] ninuje
(cpu governor shouldn't have any impact for suspend, as the CPU is put in a lower sleep state)


[7/24/2022 4:13 PM] ninuje
if it does, it probably means you have spurious wakeups


[7/24/2022 4:14 PM] szybet
well, im handling that


[7/24/2022 4:14 PM] szybet
the nia often ( not always ) drops its battery to 60% when in sleep, and nothing more


[7/24/2022 4:15 PM] szybet
so there is something messed up. maybe a diode stops working when the device voltage drops to this rate


[7/24/2022 4:15 PM] ninuje
Get a cheap USB meter


[7/24/2022 4:15 PM] ninuje
It made random guesses about power draws and sleep states actually irrelevant


[7/24/2022 4:15 PM] ninuje
which was a god send when working on that stuff


[7/24/2022 4:16 PM] ninuje
since you get a real fairly accurate account of how much the device is actually pulling


[7/24/2022 4:16 PM] szybet
you mean, a charger that indicates how much power is drawn in mA?


[7/24/2022 4:17 PM] ninuje
If you have the board naked I guess a real mutlimeter *somewhere* might work in a similar way


[7/24/2022 4:17 PM] ninuje
Not a hw kinda guy ;p


[7/24/2022 4:17 PM] szybet
i dont want to kill this device


[7/24/2022 4:17 PM] szybet
¯\_(ツ)_/¯


[7/24/2022 4:18 PM] ninuje
e.g., I've got this one: https://www.amazon.fr/gp/product/B07THZFDGH/

{Embed}
https://www.amazon.fr/gp/product/B07THZFDGH/
Multimètre de testeur USB 3.0 3.7-30V 0-4A Testeur de courant et de...
Multimètre de testeur USB 3.0 3.7-30V 0-4A Testeur de courant et de tension numérique USB Compteur Voltmètre Ampèremètre Capacité Alimentation Chargeur Détecteur Version améliorée AT35 : Amazon.fr: Bricolage
/mnt/data/projects/git/conversations/media/51MHK3F%252BqSL._SR600%252c315_PIWhiteStri-E4885.jpg


[7/24/2022 4:18 PM] szybet
i have built myself a custom one, works fine


[7/24/2022 4:18 PM] szybet
but i dont see how this could help


[7/24/2022 4:18 PM] ninuje
You get an accurate live account of how much the device draws


[7/24/2022 4:19 PM] ninuje
which means you can *see* when the device enters standby/suspend


[7/24/2022 4:19 PM] ninuje
and how much it still draws in this state


[7/24/2022 4:19 PM] ninuje
Which is how I can tell you that a Kindle PW5 while awake and idle draws *less* power than a Sage in suspend...

{Reactions}
😆 

[7/24/2022 4:20 PM] szybet
when usb is connected, and the battery is 100%, the power is drawn fully from the charger, the battery is idle?


[7/24/2022 4:20 PM] ninuje
And only slightly more than a Forma in suspend


[7/24/2022 4:20 PM] ninuje
Yep, needs to be fully charged


[7/24/2022 4:21 PM] szybet
thats cool. Is this a feature in an IC inside the device or an side efect?


[7/24/2022 4:21 PM] ninuje
I couldn't tell you (again: not a hw kinda guy), but it works ;p


[7/24/2022 4:22 PM] szybet
okay, weird becouse it would need a power switcher or smth


[7/24/2022 4:22 PM] ninuje
(e.g., is the battery *actually* bypassed, or is it just a side-effect of it matching how much the trickle charge draws to compensate: no clue)


[7/24/2022 4:22 PM] szybet
okay, thanks


[7/24/2022 4:22 PM] ninuje
But it works fine enough for what we need it to when working on sleep states ;p


[7/24/2022 6:04 PM] szybet
done.
I implemented every function, even the stupidiest one i imagined
https://github.com/Szybet/inkbox/tree/master
https://github.com/Szybet/inkbox-power-deamon

works really good on the nia, i dont know about other devices. The code is a bit chaotic, in some places functions should be used, and camelCase is sometimes CamelCase

Im waiting for you to test it on other devices to apply fixes. I dont know about the code, but i dont think you have the time to understand around ~2500 lines of code, so just test it. Also here is the documentation, i have it in markdown and exported to pdf

i will use this power manager for myself and test it in the long run

~~and the repo needs a bit of cleaning, but that for later~~

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-A15BF
/mnt/data/projects/git/conversations/media/power_demon-C05A2.pdf

{Reactions}
👍 

[7/24/2022 6:05 PM] szybet
@tux-linux


[7/24/2022 7:10 PM] tux_linux
absolutely


[7/24/2022 7:11 PM] tux_linux
I will review your code


[7/24/2022 7:12 PM] tux_linux
Can you put docs in the wiki?


[7/24/2022 7:23 PM] tux_linux
You can't like ... think before commiting ? 😉

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B21DA.png


[7/24/2022 7:59 PM] szybet
It was 3am :(

{Reactions}
👍 

[7/24/2022 8:04 PM] szybet
Good luck🥴


[7/24/2022 8:07 PM] tux_linux
did you implement wifi reconnection on wake up?


[7/24/2022 8:16 PM] tux_linux
https://stackoverflow.com/a/44704969/14164574

{Embed}
https://stackoverflow.com/a/44704969/14164574
Visual Studio Code — Insert Newline at the End of Files
When saving a file using Visual Studio Code, a newline is not automatically added to the end of the file, causing all sorts of potential issues.
How does one append a newline automatically in Visual
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[7/24/2022 8:23 PM] szybet
Of course, even an option to disable it :p

{Reactions}
👍 

[7/24/2022 8:54 PM] tux_linux
```
./configure: line 12487: syntax error near unexpected token `PKG_CHECK_MODULES'
./configure: line 12487: `PKG_CHECK_MODULES(CHECK, check >= 0.9.9, HAVE_CHECK="yes", HAVE_CHECK="no")'
make: *** [Makefile:421: config.status] Error 2
nicolas@debian-code:~/Documents/inkbox-git/inkbox-power-daemon/lib/libevdev$
```
Did you encounter this error?


[7/24/2022 8:57 PM] szybet
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/libevdev-musl.md

{Embed}
https://github.com/Szybet/kobo-nia-audio/blob/main/apps-on-kobo/libevdev-musl.md
kobo-nia-audio/libevdev-musl.md at main · Szybet/kobo-nia-audio
Kobo nia ereader with audio added. Contribute to Szybet/kobo-nia-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-nia-audio-9FB0F


[7/24/2022 8:57 PM] szybet
no


[7/24/2022 8:57 PM] tux_linux
I know, there isn't any note about this, that's why I ask


[7/24/2022 8:59 PM] tux_linux
Ok, I just commented the line and it didn't complain


[7/24/2022 8:59 PM] szybet
🥴


[7/24/2022 9:00 PM] tux_linux
do you have docs for compiling fbink?


[7/24/2022 9:00 PM] szybet
here is some inspiration, i dont remember the solution

{Attachments}
/mnt/data/projects/git/conversations/media/message-47971.txt


[7/24/2022 9:01 PM] szybet
crap, i dont remember


[7/24/2022 9:01 PM] szybet
it was easy, you only need to change one thing in make arguments


[7/24/2022 9:01 PM] szybet
and its here somewhere in this chat from nijule

{Reactions}
👍 

[7/25/2022 1:04 AM] tux_linux
writing to disk to trigger sleep is bad

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-97E21.png


[7/25/2022 1:04 AM] tux_linux
`updateConfig` is ok but `sleepCall` needs to be abolished


[7/25/2022 4:17 AM] tux_linux
...why
```
rmmod /modules/g_ether.ko || true # idk but add it ~Szybet
```


[7/25/2022 5:07 AM] tux_linux
I should not have
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/450ab92bd58fcc1e69045530d9e88ffac333ac6e

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/450ab92bd58fcc1e69045530d9e88ffac333ac6e
Cleanup · Kobo-InkBox/inkbox-power-daemon@450ab92
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
/mnt/data/projects/git/conversations/media/450ab92bd58fcc1e69045530d9e88ffac333ac6e-A3C22


[7/25/2022 10:36 AM] szybet
```
  } else if (model == "n705" or model == "n905b" or model == "n905c" or
             model == "n613") {
  } else if (model == "n705" or model == "n905b" or model == "n905c" or model == "n613") {
```
clang-format does this
and it actually should be like this
```
void setBrightnessCin(int levelToSet, int currentLevel);

void saveBrightness(int level);

int restoreBrightness();

void setBrightness(int device, int level);

int getBrightness();

#endif 
#endif
``` 
its more readable in my opinion but ok


[7/25/2022 10:37 AM] szybet
you are really in conflict with clangd-format


[7/25/2022 10:38 AM] szybet
without this the service usbnet restart doesnt restart itself becosue this command fails ( the service is started but usbnet modules are unloaded )


[7/25/2022 10:40 AM] szybet
the daemon already eats 2% of the cpu at idle, i dont want to add another thread, also it could mess up with the pipe: https://stackoverflow.com/questions/24099693/c-linux-named-pipe-hanging-on-open-with-o-wronly


[7/25/2022 10:40 AM] szybet
please no


[7/25/2022 10:41 AM] szybet
mostly camel case, english and clangd-format war. i could do this myslef but sure, thanks


[7/25/2022 10:41 AM] szybet
now take a break ;p and then test it on other devices

{Reactions}
👍 

[7/25/2022 12:35 PM] tux_linux
Check the spelling of "reconnect" before committing ...


[7/25/2022 12:36 PM] tux_linux
Then you can disable clangd-format


[7/25/2022 12:37 PM] tux_linux
That's too much
I kept newlines at some places where they were really improving readability but otherwise I just find them unnecessary


[7/25/2022 12:40 PM] tux_linux
It writes to a file every time it needs to go to sleep?
At least put it in a tmpfs


[7/25/2022 12:41 PM] tux_linux
That's terribly dangerous
What's dmesg errors?


[7/25/2022 12:52 PM] tux_linux
Also you should replace system() by execve/execl/etc. where possible


[7/25/2022 12:53 PM] ninuje
`posix_spawn` will be less of a hassle

{Reactions}
👍 

[7/25/2022 12:54 PM] ninuje
(assuming the musl imp holds water)


[7/25/2022 12:54 PM] tux_linux
Yes it seems to have it


[7/25/2022 12:54 PM] ninuje
"have" it != "holds water"


[7/25/2022 12:55 PM] ninuje
It sucked donkey balls until a very recent glibc, for exemple


[7/25/2022 12:55 PM] tux_linux
Yeah well I guess we will find out


[7/25/2022 1:06 PM] tux_linux
@Szybet to check if an openrc service is running, just check if the symlink exists in /run/openrc/started


[7/25/2022 1:32 PM] szybet
nooooooooo, only when in the gui "Suspend" button is clicked


[7/25/2022 1:33 PM] szybet
why? nothing in dmesg...


[7/25/2022 1:33 PM] szybet
oh ok, i didn't knowed that


[7/25/2022 1:35 PM] szybet
oh, also some things i didn't knew:
- does usbnet.cpp remove all modules of usbnet even on other devices?
- do all devices wake up becouse of a charger connect / disconnect / full battery?
- what with `/kobo/tmp/currentlyRunningUserApplication` this isin't implemented


[7/25/2022 1:39 PM] szybet
idk, i want that the program doesnt wait for the system command, so i put & there, i dont know if its possible


[7/25/2022 1:40 PM] szybet
its rare, so leave it please


[7/25/2022 2:04 PM] tux_linux
1 i think it does
2 yes, on connect, for others it depends
3 it will be


[7/25/2022 2:05 PM] tux_linux
inotify is ok, but you should prioritize RAM wherever possible


[7/25/2022 2:05 PM] tux_linux
So `/run/ipd/sleepCall`


[7/25/2022 2:09 PM] tux_linux
Then what's the error


[7/25/2022 2:10 PM] szybet
Failed to remove module


[7/25/2022 2:10 PM] szybet
And then it doesnt restarf becouse of it


[7/25/2022 2:11 PM] tux_linux
Resource busy?


[7/25/2022 2:11 PM] szybet
So if you want RAM then creating another thread is also your interest to not do this


[7/25/2022 2:11 PM] tux_linux
.


[7/25/2022 2:11 PM] szybet
Then i need to create another thread with inotify


[7/25/2022 2:11 PM] szybet
And its the same problem


[7/25/2022 2:12 PM] tux_linux
What are we talking about


[7/25/2022 2:12 PM] szybet
Sleepcall


[7/25/2022 2:13 PM] tux_linux
Yeah, why the file can't be created in a tmpfs instead of flash storage?


[7/25/2022 2:14 PM] szybet
I dont want to create more processess, becouse of CPU and RAM usage

I need a way that the GUI can talk to the power daemon

I already have inotify setted up for config changes

So i use that


[7/25/2022 2:15 PM] szybet
You could propably create a tmpfs in the config directory?


[7/25/2022 2:15 PM] tux_linux
So create /data/config/20.../ipd and bind-mount /run/ipd to it


[7/25/2022 2:16 PM] szybet
What is ipd exactly?


[7/25/2022 2:16 PM] tux_linux
A directory


[7/25/2022 2:16 PM] szybet
Isin't it used already for the pipe?


[7/25/2022 2:16 PM] tux_linux
Containing `fifo` and that would contain `sleepCall`


[7/25/2022 2:17 PM] szybet
So fifo would be next to sleepCall?


[7/25/2022 2:17 PM] tux_linux
Yeah?
ipd = inkbox power daemon


[7/25/2022 2:18 PM] szybet
Well sure


[7/25/2022 2:18 PM] szybet
I can do this


[7/25/2022 2:18 PM] szybet
Do the test and i will do everything in one evening


[7/25/2022 2:19 PM] szybet
Also look into Qt part of it


[7/25/2022 2:19 PM] tux_linux
Yes I know


[7/25/2022 2:19 PM] szybet
There for camelCase and other, i can repair that


[7/25/2022 2:19 PM] tux_linux
But what is the purpose of the fifo again


[7/25/2022 2:20 PM] szybet
To say the GUI and user apps to go to sleep, show a qdialog


[7/25/2022 2:20 PM] tux_linux
It can't be used to trigger sleep too?


[7/25/2022 2:20 PM] szybet
Then i need to create another thread


[7/25/2022 2:21 PM] szybet
A thread that will be used rarely and eat resources always


[7/25/2022 2:21 PM] tux_linux
Maybe you can just emulate a power button event


[7/25/2022 2:21 PM] szybet
Nope, tryied that


[7/25/2022 2:21 PM] tux_linux
Really?


[7/25/2022 2:21 PM] szybet
+ it would be messy


[7/25/2022 2:21 PM] szybet
Echo to the input device


[7/25/2022 2:21 PM] tux_linux
Not that much, you just write KEY_POWER to event0


[7/25/2022 2:21 PM] szybet
Doesnt workef


[7/25/2022 2:22 PM] tux_linux
Use input codes


[7/25/2022 2:22 PM] tux_linux
They exist


[7/25/2022 2:22 PM] szybet
Its more complicated that that


[7/25/2022 2:22 PM] tux_linux
I will try


[7/25/2022 2:23 PM] szybet
You need a value, and something more to trigger it


[7/25/2022 2:23 PM] tux_linux
Value is 1


[7/25/2022 2:23 PM] szybet
Becouse clicking the button triggers 3 events


[7/25/2022 2:23 PM] szybet
I filter to only one


[7/25/2022 2:26 PM] tux_linux
A new thread would call what class?


[7/25/2022 2:43 PM] szybet
you mean?


[7/25/2022 5:34 PM] tux_linux
If you created a new thread from the fifo for sleep


[7/25/2022 6:05 PM] ninuje
You're probably doing something wrong if you need a thread just to watch a fd.


[7/25/2022 6:06 PM] ninuje
That's what the poll family is for.


[7/25/2022 6:07 PM] ninuje
(I can't quite fathom what actually would need threading in something like a power daemon, design wise, BTW).


[7/25/2022 6:12 PM] tux_linux
Probably (partly) to handle Wi-Fi reconnection mess upon wake-up


[7/25/2022 6:19 PM] szybet
how do you do this otherwise without blocking anything else


[7/25/2022 6:19 PM] szybet
I already posted this


[7/25/2022 6:19 PM] szybet
https://stackoverflow.com/questions/24099693/c-linux-named-pipe-hanging-on-open-with-o-wronly

{Embed}
https://stackoverflow.com/questions/24099693/c-linux-named-pipe-hanging-on-open-with-o-wronly
C++ Linux named pipe hanging on open() with O_WRONLY
This is my simple code that opens a named pipe, writes a string to it, and then closes the pipe. The pipe is created in a another function, as mentioned below. 

char * ipcnm = "./jobqueue";

std::...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[7/25/2022 6:19 PM] szybet
its blocking


[7/25/2022 6:20 PM] szybet
the code would be garbage if it was one threaded and still had the same functionality ( prepare anything for sleep, in the same time check for any input events, handle inotify etc ), [and it would be slower if the user double clicked the power button, to cancel everything, thats the main reason i cared to rewrite it]


[7/25/2022 6:21 PM] szybet
idk about classes, i dont use them? there would be a read function and a loop, and a call if needed


[7/25/2022 6:22 PM] tux_linux
i.e. what file


[7/25/2022 6:23 PM] szybet
you mean?...


[7/25/2022 6:25 PM] tux_linux
what thread would be executed if you were to implement a 'sleep' function in the fifo


[7/25/2022 6:25 PM] szybet
a new one? i still dont understand


[7/25/2022 6:26 PM] tux_linux
@NiLuJe is it safe to use a development commit of FBInk?
because the last release dates back to almost a year


[7/25/2022 6:26 PM] tux_linux
`goingSleep`?


[7/25/2022 6:27 PM] szybet
noooooooooooooo, a completly new written one, like you have these, there would be a 5 one

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-987FF.png


[7/25/2022 6:27 PM] szybet
goingSleep, afterSleep and prepareSleep are threads only becouse what i said before: [and it would be slower if the user double clicked the power button, to cancel everything, thats the main reason i cared to rewrite it]


[7/25/2022 6:28 PM] szybet
and they aren't executed at the same time


[7/25/2022 6:28 PM] tux_linux
ok, but ultimately, could you describe what would happen if you implemented a `sleep` function in the fifo?
i know a new thread would be created but I want to have an idea


[7/25/2022 6:30 PM] szybet
you mean the problematic side that im afraid of or just the main functionality?


[7/25/2022 6:30 PM] tux_linux
main functionality


[7/25/2022 6:31 PM] szybet
open pipe, it will block until something is readed, if something is writed it will unblock, check string if they match, and then go to sleep by changing some variables with mutexes with them


[7/25/2022 6:32 PM] tux_linux
ok


[7/25/2022 6:32 PM] szybet
and if you dont want the gui to freeze until the message is readed you would need to make a new QThread


[7/25/2022 6:32 PM] tux_linux
what delay until the message is read?


[7/25/2022 6:34 PM] szybet
i will copy this here
```
You cannot write to a pipe, then close it, and then have the reader come along later. Such storage semantics is accomplished by using a regular file.

Pipes are an inter-process communication mechanism; a pipe created by opening a FIFO is similar to the object returned by the pipe POSIX C library function, except that pipe returns an object which is already prepared for I/O, since there are two descriptors: opposite ends open for opposite directions of I/O. Whereas a FIFO's endpoints are separately opened one at a time.

```
if i read() the pipe it will freeze until someone writed, and if I write() to the pipe it will freeze until some readed. the second comment about O_RDWR makes sense, im using it now in the program but only for testing, we will see


[7/25/2022 6:34 PM] ninuje
I answered the pipe issue back when I mentioned that pipes were tricky ;0


[7/25/2022 6:35 PM] szybet
yes, now i see that they are tricky


[7/25/2022 6:35 PM] ninuje
And yeah, do use a commit, I'll hopefully have time to tag a release soonish, but master is always safe

{Reactions}
👍 

[7/25/2022 6:35 PM] tux_linux
sh handles them pretty well tho


[7/25/2022 6:36 PM] ninuje
A shell is a wild and complex beast ;).


[7/25/2022 6:36 PM] tux_linux
then how much time is spent from the moment somebody writes to a named pipe and when it is actually read?


[7/25/2022 6:37 PM] szybet
very little, but its still seen in the gui


[7/25/2022 6:37 PM] tux_linux
very little meaning?


[7/25/2022 6:38 PM] szybet
if everything goes right then only the button animation will have a lag, if more the user will think the program freezed


[7/25/2022 6:38 PM] tux_linux
for how much time


[7/25/2022 6:38 PM] ninuje
The button issue is easy: delay the actual action, so you can spend the time keeping draining the input queue


[7/25/2022 6:39 PM] szybet
the power daemon reacts to inputs very quicly, so it won't be noticable? ( on the nia tho )


[7/25/2022 6:40 PM] szybet
less that half a second? a little more than a second? depends


[7/25/2022 6:40 PM] szybet
still a qthread should be used, there is no issue in that


[7/25/2022 6:40 PM] tux_linux
generating a system report freezes the gui for 7 seconds


[7/25/2022 6:40 PM] szybet
`delay` and here is why i rewritten it to cpp


[7/25/2022 6:41 PM] tux_linux
ok, well, I'll try to emulate a power button event for sleepCall


[7/25/2022 6:41 PM] szybet
the issue is a new thread / more ram and cpu usage with using the pipe ( on idle )


[7/25/2022 6:41 PM] tux_linux
so that we don't need it


[7/25/2022 6:43 PM] szybet
i hope other input codes can be used becouse:
- deep sleep feature
- i want that the watchdog knows what triggered it. for now its used for nothing, but maybe in the future


[7/25/2022 6:43 PM] tux_linux
why would it be any different?


[7/25/2022 6:44 PM] szybet
i said why i want it to be diffrent


[7/25/2022 6:45 PM] tux_linux
does your changes in inkbox repo only apply to `src/powerDaemon`?


[7/25/2022 6:46 PM] szybet
no, a bit in mainwindow and a bit in quit


[7/25/2022 6:46 PM] szybet
and a bit in settings


[7/25/2022 6:46 PM] tux_linux
what in mainwindow


[7/25/2022 6:46 PM] szybet
launches the qthread


[7/25/2022 6:46 PM] tux_linux
you couldn't put it in main?


[7/25/2022 6:47 PM] tux_linux
because mainwindow isn't started every time


[7/25/2022 6:47 PM] tux_linux
i told you


[7/25/2022 6:47 PM] szybet
actuallyi could propably


[7/25/2022 6:47 PM] szybet
these times are edge cases but you are right


[7/25/2022 6:49 PM] tux_linux
try to do it


[7/25/2022 6:49 PM] szybet
ok, later today


[7/25/2022 7:36 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/bc518450850056aee0dac2892da57d3012a33d04

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/bc518450850056aee0dac2892da57d3012a33d04
Add submodules · Kobo-InkBox/inkbox-power-daemon@bc51845
/mnt/data/projects/git/conversations/media/bc518450850056aee0dac2892da57d3012a33d04-2D13B


[7/25/2022 7:37 PM] szybet
i could do this myself...


[7/25/2022 7:38 PM] tux_linux
you didn't want to


[7/25/2022 7:38 PM] tux_linux
it was polluting my `git add -p` way too much, so sorry


[7/25/2022 7:38 PM] szybet
i wanted when the project was finished


[7/25/2022 7:39 PM] tux_linux
i had to hit `n` 50 times before actually reaching the changes I made in `src` because the `configure` file in `libevdev` was different than yours, plus a bunch of other files because of a different machine configuration


[7/25/2022 7:40 PM] tux_linux
and adding the `lib` folder to `.gitignore` wasn't working because the files were already in the git index


[7/25/2022 7:43 PM] szybet
makes sense


[7/25/2022 7:47 PM] tux_linux
the first commit for ipd in the gui is this right?
```
commit 38a0d4864c1699fcce63d29878f3cbab3804e720
Author: Szybet <53944559+Szybet@users.noreply.github.com>
Date:   Tue Jul 19 01:19:42 2022 +0200

    power daemon settings init
```


[7/25/2022 7:47 PM] szybet
propably


[7/25/2022 7:48 PM] szybet
wait i finished the migration from mainwindow to main


[7/25/2022 7:48 PM] tux_linux
ok


[7/25/2022 7:48 PM] tux_linux
you can push it


[7/25/2022 7:48 PM] tux_linux
it works?


[7/25/2022 7:48 PM] szybet
yes


[7/25/2022 7:48 PM] szybet
why not


[7/25/2022 7:48 PM] tux_linux
ok good


[7/25/2022 7:49 PM] szybet
https://github.com/Szybet/inkbox/commit/03ed8a9503a64535e0a1f13bcfdef9b954533733


[7/25/2022 7:51 PM] tux_linux
`//connect( thread, &QThread::finished, thread, &QThread::deleteLater);`
why is this commented?


[7/25/2022 7:51 PM] szybet
becouse it never ends


[7/25/2022 7:51 PM] tux_linux
ok


[7/25/2022 8:47 PM] ninuje
Re: pipes


[7/25/2022 8:47 PM] ninuje
c.f., https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink_cmd.c#L2225-L2230 & https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink_cmd.c#L2349-L2354

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink_cmd.c
FBInk/fbink_cmd.c at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiL...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink_cmd.c at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/25/2022 8:47 PM] ninuje
And https://stackoverflow.com/a/17384067 for context

{Embed}
https://stackoverflow.com/a/17384067
O_RDWR on named pipes with poll()
I have gone through a variaty of different linux named pipe client/server implementations but most of them use the blocking defaults on reads/writes.

As I am already using poll() to check other fl...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[7/25/2022 8:47 PM] ninuje
That works perfectly fine for the "one reader [daemon] vs. many writers [clients]" setup


[7/25/2022 8:48 PM] ninuje
And re: delay; you don't need to delay *everything*; just start your normal sleep setup on press (spin that up in a *new* thread if you want), and then cancel/continue on the next (or lack thereof) press


[7/25/2022 8:49 PM] ninuje
You don't need permanent threads for any of this


[7/25/2022 8:49 PM] ninuje
You can stuff everything in a single main (poll) loop, that'll wait on everything (evdev, inotify, timerfd, whatever)


[7/25/2022 8:49 PM] ninuje
And if you really want to bee cheeky, you can nerf the stack size of your threads


[7/25/2022 9:01 PM] ninuje
c.f., https://github.com/NiLuJe/kfmon/blob/82bdb1ef050e68365f172aab7384e67d19a9727d/kfmon.c#L1819-L1828

{Embed}
https://github.com/NiLuJe/kfmon/blob/82bdb1ef050e68365f172aab7384e67d19a9727d/kfmon.c
kfmon/kfmon.c at 82bdb1ef050e68365f172aab7384e67d19a9727d · NiLuJe/...
Kute File Monitor, an inotify-based Launcher for Kobo devices - kfmon/kfmon.c at 82bdb1ef050e68365f172aab7384e67d19a9727d · NiLuJe/kfmon
/mnt/data/projects/git/conversations/media/kfmon-32980


[7/25/2022 9:09 PM] szybet
`wait on everything`
no.


[7/25/2022 9:09 PM] szybet
i dont think its at default that big that a change is needed


[7/25/2022 9:10 PM] szybet
well propably yes


[7/25/2022 9:10 PM] szybet
¯\_(ツ)_/¯


[7/25/2022 10:45 PM] tux_linux
First step done
https://github.com/Kobo-InkBox/inkbox/commit/bf5f7325bd5aa71c656f714191536ea4304dc626

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/bf5f7325bd5aa71c656f714191536ea4304dc626
Organize source code filesystem structure · Kobo-InkBox/inkbox@bf5f...
/mnt/data/projects/git/conversations/media/bf5f7325bd5aa71c656f714191536ea4304dc626-50E63


[7/25/2022 10:47 PM] szybet
nice, now the github page doesnt force me to scroll for 10 seconds


[7/25/2022 10:52 PM] tux_linux
why is this needed?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FFDCA.png


[7/25/2022 10:56 PM] szybet
deep sleep mode


[7/25/2022 10:56 PM] szybet
read the docs


[7/25/2022 10:56 PM] tux_linux
yeah i know


[7/25/2022 10:56 PM] tux_linux
but can't it just be 'suspend'?


[7/25/2022 10:56 PM] tux_linux
if user has enabled deep sleep, it will go into deep sleep


[7/25/2022 10:56 PM] szybet
no, becouse now its deep sleep


[7/25/2022 10:56 PM] tux_linux
which is a form of suspend?


[7/25/2022 10:56 PM] szybet
more "informative"?


[7/25/2022 10:57 PM] tux_linux
yeah but idk


[7/25/2022 10:57 PM] szybet
leave it


[7/25/2022 10:57 PM] szybet
its 2 lines of code


[7/25/2022 10:57 PM] tux_linux
btw you can use `checkconfig` function for checking for true/false in files


[7/25/2022 10:57 PM] tux_linux
and `writeFile` to write to files


[7/25/2022 10:59 PM] tux_linux
if you press the power button and deep sleep is enabled, will it go into deep sleep?


[7/25/2022 11:06 PM] szybet
no


[7/25/2022 11:06 PM] tux_linux
hm ok


[7/25/2022 11:07 PM] szybet
thats how i wanted this option to work, if someone will want it as default then first i will argue with him and second implement it as he wants too


[7/25/2022 11:07 PM] szybet
¯\_(ツ)_/¯


[7/25/2022 11:07 PM] szybet
the code would look very similar, but ok


[7/25/2022 11:07 PM] tux_linux
i will correct it


[7/25/2022 11:11 PM] szybet
as you want


[7/25/2022 11:20 PM] tux_linux
```
QByteArray powerButtonEventSequence = "UQUAAN33AwABAHQAAQAAAFEFAADj9wMAAAAAAAAAAABRBQAAJCwHAAEAdAAAAAAAUQUAACgsBwAAAAAAAAAAAA==";
```
```
void quit::emulatePowerButtonEvent() {
    QFile file("/dev/input/event0");
    if(file.open(QIODevice::WriteOnly)) {
        file.write(QByteArray::fromBase64(powerButtonEventSequence));
        file.close();
    }
    else {
        QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
    }
}
```


[7/25/2022 11:20 PM] szybet
this works?


[7/25/2022 11:20 PM] szybet
shouldn't


[7/25/2022 11:20 PM] tux_linux
yes


[7/25/2022 11:20 PM] tux_linux
why


[7/25/2022 11:20 PM] szybet
why echo didn't worked


[7/25/2022 11:21 PM] tux_linux
you need to cat


[7/25/2022 11:21 PM] szybet
?...


[7/25/2022 11:21 PM] tux_linux
`cat /dev/input/event0 > file`
(click power button)
`cat file > /dev/input/event0`


[7/25/2022 11:21 PM] szybet
bruh okay


[7/25/2022 11:21 PM] tux_linux
it isn't the cleanest way to do it


[7/25/2022 11:22 PM] tux_linux
I will add a todo to do it with event codes when I have time for it


[7/25/2022 11:22 PM] ninuje
My eyes, they burn.


[7/25/2022 11:22 PM] ninuje
Just `write` a `struct input_event`


[7/25/2022 11:22 PM] tux_linux
yes, I tried that


[7/25/2022 11:22 PM] tux_linux
no success


[7/25/2022 11:22 PM] ninuje
https://github.com/koreader/koreader-base/blob/master/input/input-kobo.h

{Embed}
https://github.com/koreader/koreader-base/blob/master/input/input-kobo.h
koreader-base/input-kobo.h at master · koreader/koreader-base
Base framework offering a Lua scriptable environment for creating document readers - koreader-base/input-kobo.h at master · koreader/koreader-base
/mnt/data/projects/git/conversations/media/koreader-base-40907


[7/25/2022 11:23 PM] szybet
won't libevdev freak out?


[7/25/2022 11:23 PM] tux_linux
evtest output
```
kobo:~# evtest /dev/input/event0
Input driver version is 1.0.1
Input device ID: bus 0x19 vendor 0x1 product 0x1 version 0x100
Input device name: "gpio-keys"
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 35 (KEY_H)
    Event code 59 (KEY_F1)
    Event code 116 (KEY_POWER)
  Event type 5 (EV_SW)
    Event code 0 (SW_LID) state 0
Properties:
Testing ... (interrupt to exit)
Event: time 1878.425527, type 1 (EV_KEY), code 116 (KEY_POWER), value 1
Event: time 1878.425573, -------------- SYN_REPORT ------------
Event: time 1878.426101, type 1 (EV_KEY), code 116 (KEY_POWER), value 0
```


[7/25/2022 11:24 PM] szybet
? there isin;t anything


[7/25/2022 11:24 PM] tux_linux
wdym


[7/25/2022 11:24 PM] szybet
`Event: time 1878.426101, type 1 (EV_KEY), code 116 (KEY_POWER), value 0` thats the event you triggered?


[7/25/2022 11:30 PM] tux_linux
yes


[7/25/2022 11:33 PM] szybet
shouldnt it be UQUAAN33AwABAHQAAQAAAFEFAADj9wMAAAAAAAAAAABRBQAAJCwHAAEAdAAAAAAAUQUAACgsBwAAAAAAAAAAAA==


[7/25/2022 11:34 PM] tux_linux
no, that's base64 data containing recorded input event


[7/25/2022 11:35 PM] szybet
available events are: 
```
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 35 (KEY_H)
    Event code 59 (KEY_F1)
    Event code 116 (KEY_POWER)
  Event type 5 (EV_SW)
    Event code 0 (SW_LID) state 0
``` only right?


[7/25/2022 11:35 PM] tux_linux
yes


[7/25/2022 11:36 PM] tux_linux
the base64 sequence contains binary data of KEY_POWER press and release


[7/25/2022 11:36 PM] tux_linux
@NiLuJe 
Why doesn't this work?
```
log("Emulating power button event", className);
// Press event
struct input_event inputEventPress = { 0 };
inputEventPress.type = KEY_POWER;
inputEventPress.value = 1;
// Release event
struct input_event inputEventRelease = { 0 };
inputEventRelease.type = KEY_POWER;
inputEventRelease.value = 0;

if(int fd = open("/dev/input/event0", O_WRONLY < 0)) {
    write(fd, &inputEventPress, sizeof(&inputEventPress));
    QThread::msleep(100);
    write(fd, &inputEventRelease, sizeof(&inputEventRelease));
    ::close(fd);
}
else {
    QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
}
```


[7/25/2022 11:38 PM] tux_linux
It also throws me those warnings at compile-time
```
src/quit/quit.cpp: In member function 'void quit::emulatePowerButtonEvent()':
src/quit/quit.cpp:102:46: warning: missing initializer for member 'timeval::tv_usec' [-Wmissing-field-initializers]
  102 |     struct input_event inputEventPress = { 0 };
      |                                              ^
src/quit/quit.cpp:102:46: warning: missing initializer for member 'input_event::type' [-Wmissing-field-initializers]
src/quit/quit.cpp:102:46: warning: missing initializer for member 'input_event::code' [-Wmissing-field-initializers]
src/quit/quit.cpp:102:46: warning: missing initializer for member 'input_event::value' [-Wmissing-field-initializers]
src/quit/quit.cpp:106:48: warning: missing initializer for member 'timeval::tv_usec' [-Wmissing-field-initializers]
  106 |     struct input_event inputEventRelease = { 0 };
      |                                                ^
src/quit/quit.cpp:106:48: warning: missing initializer for member 'input_event::type' [-Wmissing-field-initializers]
src/quit/quit.cpp:106:48: warning: missing initializer for member 'input_event::code' [-Wmissing-field-initializers]
src/quit/quit.cpp:106:48: warning: missing initializer for member 'input_event::value' [-Wmissing-field-initializers]
```


[7/25/2022 11:40 PM] szybet
structs need to be defined before creating?


[7/25/2022 11:40 PM] tux_linux
`#include <linux/input.h>`, yes


[7/25/2022 11:40 PM] szybet
oh


[7/25/2022 11:41 PM] szybet
then how do you talk to the gui that the next sleep event needs to be deep sleep?


[7/25/2022 11:41 PM] tux_linux
i left it like it is for now


[7/25/2022 11:42 PM] szybet
so for normal suspend this will be called, and for deep sleep this file will be created?


[7/25/2022 11:43 PM] tux_linux
it will be created in tmpfs


[7/25/2022 11:43 PM] szybet
o k


[7/25/2022 11:44 PM] ninuje
Because `sizeof(&inputEventPress)` is the size of a *pointer* (addressof/reference operator `&`)


[7/25/2022 11:45 PM] ninuje
So you're writing a short event


[7/25/2022 11:45 PM] ninuje
i.e., garbage


[7/25/2022 11:45 PM] tux_linux
i also tried without `&`


[7/25/2022 11:45 PM] tux_linux
i'm now trying with `struct input_event`


[7/25/2022 11:46 PM] ninuje
Also, possibly related: Check your syscalls. Alwyas and forever.


[7/25/2022 11:46 PM] tux_linux
```
void quit::emulatePowerButtonEvent() {
    log("Emulating power button event", className);
    // Press event
    struct input_event inputEventPress = { 0 };
    inputEventPress.type = KEY_POWER;
    inputEventPress.value = 1;
    // Release event
    struct input_event inputEventRelease = { 0 };
    inputEventRelease.type = KEY_POWER;
    inputEventRelease.value = 0;

    if(int fd = open("/dev/input/event0", O_WRONLY < 0)) {
        write(fd, &inputEventPress, sizeof(struct input_event));
        QThread::msleep(100);
        write(fd, &inputEventRelease, sizeof(struct input_event));
        ::close(fd);
    }
    else {
        QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
    }
}
```
If I try to write `inputEventPress` instead of `&inputEventPress` it throws an error


[7/25/2022 11:46 PM] ninuje
You should be getting warnings about that in write because of FORTIFY btw


[7/25/2022 11:46 PM] tux_linux
```
src/quit/quit.cpp:111:19: error: cannot convert 'input_event' to 'const void*'
  111 |         write(fd, inputEventPress, sizeof(struct input_event));
      |                   ^~~~~~~~~~~~~~~
      |                   |
      |                   input_event
In file included from src/functions.h:27,
                 from src/quit/quit.cpp:3:
/home/nicolas/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/usr/include/unistd.h:367:47: note:   initializing argument 2 of 'ssize_t write(int, const void*, size_t)'
  367 | extern ssize_t write (int __fd, __const void *__buf, size_t __n) __wur;
      |                                 ~~~~~~~~~~~~~~^~~~~
src/quit/quit.cpp:113:19: error: cannot convert 'input_event' to 'const void*'
  113 |         write(fd, inputEventRelease, sizeof(struct input_event));
      |                   ^~~~~~~~~~~~~~~~~
      |                   |
      |                   input_event
In file included from src/functions.h:27,
                 from src/quit/quit.cpp:3:
/home/nicolas/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/usr/include/unistd.h:367:47: note:   initializing argument 2 of 'ssize_t write(int, const void*, size_t)'
  367 | extern ssize_t write (int __fd, __const void *__buf, size_t __n) __wur;
      |                                 ~~~~~~~~~~~~~~^~~~~
make: *** [Makefile:9159: quit.o] Error 1
```


[7/25/2022 11:47 PM] tux_linux
I don't seem to


[7/25/2022 11:48 PM] ninuje
C++ has weird syntax rules about list initializers


[7/25/2022 11:48 PM] ninuje
IIRC, `var = { }` appeases the compiler and does the same


[7/25/2022 11:48 PM] ninuje
You need a cast


[7/25/2022 11:49 PM] tux_linux
well, `struct input_event inputEventPress = { };` doesn't give any error but the others remain


[7/25/2022 11:49 PM] ninuje
Oh, err, no, you don't need a cast,  my bad, misread the last quote


[7/25/2022 11:50 PM] ninuje
you need a pointer


[7/25/2022 11:50 PM] tux_linux
... but it didn't work


[7/25/2022 11:50 PM] ninuje
gdi windows and its lack of middle mouse paste


[7/25/2022 11:50 PM] tux_linux
`write(fd, &inputEventPress, sizeof(struct input_event))` compiles but doesn't do anything


[7/25/2022 11:50 PM] ninuje
`write(fd, &inputEventPress, sizeof(inputEventPress));`


[7/25/2022 11:50 PM] tux_linux
Yeah, doesn't work


[7/25/2022 11:50 PM] ninuje
which ought to be the same ;p


[7/25/2022 11:51 PM] ninuje
Check the write's return


[7/25/2022 11:51 PM] ninuje
(or strace it)


[7/25/2022 11:51 PM] ninuje
but check it. really.


[7/25/2022 11:52 PM] ninuje
(You might actually need a strong cast because C++, though)


[7/25/2022 11:53 PM] tux_linux
`-1`


[7/25/2022 11:53 PM] ninuje
There you have it ;p


[7/25/2022 11:53 PM] ninuje
Check it and check errno


[7/25/2022 11:54 PM] tux_linux
errno is 9


[7/25/2022 11:54 PM] ninuje
EBADF


[7/25/2022 11:54 PM] tux_linux
yeah


[7/25/2022 11:54 PM] ninuje
Check your scope


[7/25/2022 11:54 PM] tux_linux
if(int fd... ?


[7/25/2022 11:55 PM] tux_linux
why does this work in C


[7/25/2022 11:55 PM] ninuje
and make sure you'r enot shadowing another fd var that points wherever


[7/25/2022 11:55 PM] ninuje
Oh, wait


[7/25/2022 11:55 PM] ninuje
Check you parens first


[7/25/2022 11:55 PM] ninuje
The chekc is *isnide* the open call


[7/25/2022 11:56 PM] ninuje
Inlining a return value test is always error-prone


[7/25/2022 11:57 PM] ninuje
Oh, you also can't *declare* the value at the same time, either


[7/25/2022 11:57 PM] ninuje
```
int fd = -1;
    if ((fd = open("/dev/null", O_RDWR)) != -1) {
```


[7/25/2022 11:58 PM] ninuje
is the "proper" syntax for this crap syntax (still eror-prone as fuck)


[7/25/2022 11:58 PM] ninuje
```
int fd = open("/dev/null", O_RDWR);
if (fd != -1) {
```


[7/25/2022 11:58 PM] ninuje
w<ill save everyone a headache


[7/25/2022 11:58 PM] ninuje
and prevent ssdtypid typos


[7/25/2022 11:59 PM] tux_linux
now it returns errno 2


[7/25/2022 11:59 PM] tux_linux
yay


[7/26/2022 12:00 AM] tux_linux
it doesn't exist


[7/26/2022 12:00 AM] tux_linux
apparently


[7/26/2022 12:00 AM] ninuje
open should have failed, too ^^


[7/26/2022 12:00 AM] tux_linux
```
void quit::emulatePowerButtonEvent() {
    log("Emulating power button event", className);
    // Press event
    struct input_event inputEventPress = { };
    inputEventPress.type = KEY_POWER;
    inputEventPress.value = 1;
    // Release event
    struct input_event inputEventRelease = { };
    inputEventRelease.type = KEY_POWER;
    inputEventRelease.value = 0;

    int fd = open("/dev/input/event0", O_WRONLY);
    if(fd != -1) {
        write(fd, &inputEventPress, sizeof(inputEventPress));
        qDebug() << errno;
        QThread::msleep(100);
        write(fd, &inputEventRelease, sizeof(inputEventPress));
        ::close(fd);
    }
    else {
        QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
    }
}
```


[7/26/2022 12:00 AM] tux_linux
it seems not


[7/26/2022 12:01 AM] ninuje
what does `strace -fittvY` says?


[7/26/2022 12:01 AM] tux_linux
fd returns value `15`


[7/26/2022 12:01 AM] ninuje
I want the strace output (Y decodes fd))


[7/26/2022 12:02 AM] ninuje
That should tell us what's actually happening regardless of what you ùthink* is happening ;p


[7/26/2022 12:02 AM] tux_linux
ok, running


[7/26/2022 12:02 AM] tux_linux
`strace: unrecognized option: Y`


[7/26/2022 12:02 AM] ninuje
Oops


[7/26/2022 12:02 AM] ninuje
not on a nix box, gimme a sec


[7/26/2022 12:03 AM] ninuje
might be lowercase y


[7/26/2022 12:03 AM] tux_linux
I think it's `-y`


[7/26/2022 12:03 AM] tux_linux
yeah


[7/26/2022 12:04 AM] tux_linux
```
[pid  6611] 18:03:51.474891 [2bdfdb34] write(2</dev/pts/1>, "25/07/2022 @ 18:03:51 | quit: Em"..., 5925/07/2022 @ 18:03:51 | quit: Emulating power button event
) = 59
[pid  6611] 18:03:51.476027 [2bb551f4] open("/dev/input/event0", O_WRONLY) = 15</kobo/dev/input/event0>
[pid  6611] 18:03:51.476948 [2bdfdb34] write(2</dev/pts/1>, "15\n", 315
) = 3
[pid  6611] 18:03:51.477535 [2bb54614] write(15</kobo/dev/input/event0>, "\0\0\0\0\0\0\0\0t\0\0\0\1\0\0\0", 16) = 16
[pid  6611] 18:03:51.478193 [2bdfdb34] write(2</dev/pts/1>, "2\n", 22
) = 2
[pid  6611] 18:03:51.478827 [2bb55144] nanosleep({tv_sec=0, tv_nsec=100000000}, 0x7e9c9f88) = 0
[pid  6611] 18:03:51.580190 [2bb54614] write(15</kobo/dev/input/event0>, "\0\0\0\0\0\0\0\0t\0\0\0\0\0\0\0", 16) = 16
[pid  6611] 18:03:51.582742 [2bb54774] close(15</kobo/dev/input/event0>) = 0
```


[7/26/2022 12:04 AM] ninuje
Yeah (also, I might have meant `-fiTtvy` which probably explains the case snafu ;p


[7/26/2022 12:05 AM] ninuje
Right, everything works


[7/26/2022 12:05 AM] ninuje
you're just printing a stale errno ;p


[7/26/2022 12:05 AM] ninuje
which makes sense, it's not behind an error branch ^^


[7/26/2022 12:05 AM] tux_linux
but how come I don't see anything in evtest?


[7/26/2022 12:06 AM] tux_linux
nor does `xxd`


[7/26/2022 12:06 AM] ninuje
You might be missing a timestamp or something, because that byte string looks fairly bare


[7/26/2022 12:06 AM] tux_linux
but is that normal?


[7/26/2022 12:07 AM] ninuje
the kernel might be dropping input events with a 0 timestamp for all I know ;p


[7/26/2022 12:07 AM] ninuje
Oh, wait


[7/26/2022 12:07 AM] ninuje
type should be EV_KEY


[7/26/2022 12:08 AM] ninuje
code KEY_POWER


[7/26/2022 12:08 AM] ninuje
and value 1


[7/26/2022 12:08 AM] tux_linux
oh


[7/26/2022 12:09 AM] ninuje
(You can re-use the same struct for the press/release switch, just update value between the calls)

{Reactions}
👍 

[7/26/2022 12:09 AM] tux_linux
still nothing


[7/26/2022 12:09 AM] szybet
aren't needed


[7/26/2022 12:10 AM] ninuje
Also prevents typos re: forgetting to send the adress of the right struct ;p


[7/26/2022 12:11 AM] ninuje
I'd drop a sane-ish timeval in the time field just to be sure


[7/26/2022 12:11 AM] tux_linux
`gettimeofday`?


[7/26/2022 12:11 AM] ninuje
(although here be dragons if the kernel is time64 aware, I can't recall the compat layout)


[7/26/2022 12:12 AM] ninuje
(i'm assuming it's still a shit kernel, so a timeval ought to do)


[7/26/2022 12:12 AM] tux_linux
yes, 3.0.35


[7/26/2022 12:13 AM] ninuje
Yup


[7/26/2022 12:13 AM] ninuje
Oh, hi, you forgot the SYN_REPORT, too


[7/26/2022 12:14 AM] tux_linux
I guess, but I don't think it's very reassuring if I don't see anything with `xxd`


[7/26/2022 12:14 AM] ninuje
I would imagine *both* REPORTS, actually


[7/26/2022 12:14 AM] tux_linux
only `code` changes?


[7/26/2022 12:14 AM] ninuje
type is EV_SYN IIRC


[7/26/2022 12:14 AM] ninuje
and value always 0 IIRC


[7/26/2022 12:15 AM] ninuje
(which might actually be 0, 0, 0, can't recall :D)


[7/26/2022 12:15 AM] ninuje
Yup, all three constants map to 0 😉


[7/26/2022 12:16 AM] tux_linux
you were right, it was in a queue waiting for a syn report


[7/26/2022 12:17 AM] tux_linux
I pressed the power button and
```
Testing ... (interrupt to exit)
Event: time 4988.118007, type 1 (EV_KEY), code 116 (KEY_POWER), value 1
Event: time 4988.218153, type 1 (EV_KEY), code 116 (KEY_POWER), value 0
Event: time 4988.969687, type 1 (EV_KEY), code 116 (KEY_POWER), value 1
Event: time 4989.069815, type 1 (EV_KEY), code 116 (KEY_POWER), value 0
Event: time 5288.140070, type 1 (EV_KEY), code 116 (KEY_POWER), value 1
Event: time 5288.140076, -------------- SYN_REPORT ------------
Event: time 5289.530065, type 1 (EV_KEY), code 116 (KEY_POWER), value 0
Event: time 5289.530070, -------------- SYN_REPORT ------------
Event: time 5290.170079, type 1 (EV_KEY), code 116 (KEY_POWER), value 1
Event: time 5290.170086, -------------- SYN_REPORT ------------
Event: time 5290.610066, type 1 (EV_KEY), code 116 (KEY_POWER), value 0
```


[7/26/2022 12:17 AM] ninuje
Yeah, REPORTS are the input frame delimiters


[7/26/2022 12:20 AM] tux_linux
ok thanks it works now
```
void quit::emulatePowerButtonEvent() {
    log("Emulating power button event", className);
    // Input event
    struct input_event inputEvent = { };
    inputEvent.type = EV_KEY;
    inputEvent.code = KEY_POWER;
    struct input_event synReportEvent = { };
    synReportEvent.type = EV_SYN;
    synReportEvent.code = SYN_REPORT;
    synReportEvent.value = 0;

    int fd = open("/dev/input/event0", O_WRONLY);
    if(fd != -1) {
        // Press event
        inputEvent.value = 1;
        ::write(fd, &inputEvent, sizeof(inputEvent));

        // SYN report
        ::write(fd, &synReportEvent, sizeof(synReportEvent));

        // Some sleep
        QThread::msleep(50);

        // Release event
        inputEvent.value = 0;
        ::write(fd, &inputEvent, sizeof(inputEvent));
        ::write(fd, &synReportEvent, sizeof(synReportEvent));

        ::close(fd);
    }
    else {
        QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
    }
}
```

{Reactions}
👍 

[7/26/2022 12:22 AM] tux_linux
@Szybet can't the power daemon go into deep sleep if the option is enabled when the power button is pressed?


[7/26/2022 12:22 AM] tux_linux
and go into regular sleep if it is not


[7/26/2022 12:22 AM] ninuje
I gotta ask.... WHat's this "deep sleep" nonsense?


[7/26/2022 12:23 AM] tux_linux
I think he wants to do something with CPU governor


[7/26/2022 12:23 AM] ninuje
Won't change a thing


[7/26/2022 12:23 AM] tux_linux
And maybe hibernation
But I'm not sure I want that


[7/26/2022 12:23 AM] ninuje
S* sleep states > cpu governeor


[7/26/2022 12:23 AM] tux_linux
Tell him ;p


[7/26/2022 12:23 AM] ninuje
Hibernation, okay, that would do something more


[7/26/2022 12:23 AM] ninuje
I... did ;p


[7/26/2022 12:24 AM] ninuje
lab126 has some custom trickery on recent Kindles where they dump to a custom storage solution


[7/26/2022 12:24 AM] szybet
for now only


[7/26/2022 12:24 AM] ninuje
Never looked into it, but it seems cool, and It Works (TM)

{Reactions}
👍 

[7/26/2022 12:24 AM] tux_linux
.


[7/26/2022 12:25 AM] ninuje
(gross oversimplification, because S sleep states are an ACPI thing, and we're on arm, but the principle holds ;p)


[7/26/2022 12:26 AM] ninuje
Your CPU doesn't give a damn about which governor the kernel requests, because the kernel is no longer open for business 😉


[7/26/2022 12:26 AM] szybet
when i set powersave the nia has a dmesg error failed freezing task or smth like that, its diffrent. also i will measure the diffrence soon, becouse at first look it makes diffrence


[7/26/2022 12:26 AM] ninuje
Those are.. three different, potentially highly unrelated things?


[7/26/2022 12:26 AM] szybet
thats not how this function is intended to work


[7/26/2022 12:27 AM] szybet
they only happen together


[7/26/2022 12:27 AM] ninuje
powersave will *definitely* make a difference *at runtime*


[7/26/2022 12:28 AM] ninuje
But it won't do a thing once suspended


[7/26/2022 12:29 AM] szybet
i dont know, i will measure it soon


[7/26/2022 12:30 AM] ninuje
Switching to powersave during the pre-suspend phase isn't technically a bad idea, per-se, but that is such a small amount of time in the grand scheme of things that it feels like free overcomplexification 😉


[7/26/2022 12:30 AM] ninuje
(by which I mean: the small amount of time between "user pressed power button -> we show sleepy time stuff", and actually entering suspend)


[7/26/2022 12:31 AM] ninuje
Also, free potential for random new bugs, because I'm pretty sure nobody at kobo ever QA'd that governor ;p


[7/26/2022 12:31 AM] ninuje
And NTX boards are full of weird little timing quirks, which this risks affecting


[7/26/2022 12:31 AM] szybet
*technically*

***technically*** kobo company is forced to share their linux kernel sources and update them so we dont need to do things that doesnt make sense but make a diffrence sometimes


[7/26/2022 12:33 AM] szybet
@tux-linux github detects if the repo contains code or crap like emu image and slows down the download to 80Kib max 🥴


[7/26/2022 12:47 AM] tux_linux
what does `CBS` mean (`powerDaemonSettings`)?


[7/26/2022 1:02 AM] szybet
? Where


[7/26/2022 1:03 AM] tux_linux
`CBSplus`...


[7/26/2022 1:05 AM] szybet
o.O
There is no way to search through code on github mobile app


[7/26/2022 1:06 AM] szybet
A SS of the code you mean?


[7/26/2022 1:07 AM] tux_linux
https://github.com/Szybet/inkbox/blob/03ed8a9503a64535e0a1f13bcfdef9b954533733/src/powerDaemon/powerdaemonsettings.cpp#L43-L44


[7/26/2022 1:10 AM] szybet
CinematicBrightnessSpeed


[7/26/2022 1:11 AM] szybet
So it would be CinematicBrightnessSpeedPlusBtn. A long name, right?


[7/26/2022 1:11 AM] tux_linux
ok thanks


[7/26/2022 1:20 AM] tux_linux
here is your solution
```
// 5 - wifiReconnect
// now i see that a function would be needed for those bools... but it would like the same
writeFile("/mnt/onboard/.adds/inkbox/.config/20-sleep_daemon/5-wifiReconnect", QVariant(wifiReconnectBool).toString());
```


[7/26/2022 5:06 AM] tux_linux
ipd works when suspending the first time, then it does not do anything and does this
```
MonitorEvents: Received power button trigger, attempting device suspend
Watchdog event received
Input event received, type: EV_SYN codename: SYN_REPORT value: 0
Input event received, type: EV_KEY codename: KEY_POWER value: 0
Input event received, type: EV_SYN codename: SYN_REPORT value: 0
```


[7/26/2022 5:39 AM] tux_linux
```
/sys/class/backlight/mxc_msp430_fl.0/brightness is: 15
Writed: "15" to: /tmp/savedBrightness
/sys/class/backlight/mxc_msp430_fl.0/brightness is: 15
```
why 2 times?


[7/26/2022 5:55 AM] tux_linux
also, did you implement the case when an user tries to suspend the device while wi-fi is reconnecting?


[7/26/2022 6:08 AM] szybet
Yes


[7/26/2022 6:08 AM] tux_linux
ok


[7/26/2022 6:14 AM] tux_linux
Can I move `/tmp/PowerDaemonLogs.txt` to `/var/log/ipd.log`?


[7/26/2022 6:14 AM] szybet
Post the full log, my quess is you broke something while fixing things


[7/26/2022 6:14 AM] szybet
Sure


[7/26/2022 6:15 AM] tux_linux
the weird thing is that it works now


[7/26/2022 6:15 AM] tux_linux
and why this


[7/26/2022 6:15 AM] szybet
What


[7/26/2022 6:16 AM] tux_linux
also, wifi reconnection is partly implemented, because the gui doesn't know you are reconnecting


[7/26/2022 6:17 AM] szybet
Good question, post the full log


[7/26/2022 6:17 AM] szybet
Did i forgot about /tmp/was connected to Wi-Fi or smth?


[7/26/2022 6:18 AM] tux_linux
some inkbox log is mixed up but there you go

{Attachments}
/mnt/data/projects/git/conversations/media/message-0455E.txt


[7/26/2022 6:18 AM] tux_linux
probably


[7/26/2022 6:19 AM] tux_linux
the issue with usbnet service is because you were stopping it but you already had removed `g_ether` module


[7/26/2022 6:20 AM] tux_linux
solution: use `service usbnet start` instead of `restart` and `remove("/run/openrc/started/usbnet")` before


[7/26/2022 6:21 AM] szybet
Yeaaa ok thats hacky


[7/26/2022 6:21 AM] szybet
The full log. From the file


[7/26/2022 6:22 AM] tux_linux
yes, that was the file


[7/26/2022 6:22 AM] szybet
No


[7/26/2022 6:22 AM] tux_linux
the rest is not there because it seemingly hung the kernel when clicking on the wifi icon in the gui because it didn't know it was reconnecting


[7/26/2022 6:22 AM] szybet
🥴


[7/26/2022 6:23 AM] szybet
Does it work?


[7/26/2022 6:23 AM] tux_linux
yes, but not reconnection


[7/26/2022 6:24 AM] szybet
Okay, i will fix that


[7/26/2022 6:24 AM] szybet
Try some more, try to crash it, spam the power button


[7/26/2022 6:26 AM] szybet
Also try the options in the gui


[7/26/2022 6:26 AM] tux_linux
done


[7/26/2022 6:26 AM] szybet
Charger things, LED


[7/26/2022 6:26 AM] szybet
Is the led path for all devices the same?


[7/26/2022 6:26 AM] szybet
Does fbdeptj work?


[7/26/2022 6:27 AM] tux_linux
no


[7/26/2022 6:27 AM] tux_linux
didn't test with x11


[7/26/2022 6:27 AM] tux_linux
did you test ipd with x11?


[7/26/2022 6:28 AM] szybet
Then provide the paths for other devices


[7/26/2022 6:28 AM] szybet
No


[7/26/2022 6:28 AM] szybet
But why shoulnt it work


[7/26/2022 6:28 AM] tux_linux
because


[7/26/2022 6:28 AM] tux_linux
it's bound to fail


[7/26/2022 6:28 AM] tux_linux
everything we write is bound to fail


[7/26/2022 6:28 AM] szybet
Nah


[7/26/2022 6:29 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/3262c7945fa8343d619d18dac9ac92e755401adf

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/3262c7945fa8343d619d18dac9ac92e755401adf
Initial power daemon integration (credit: @Szybet) · Kobo-InkBox/in...
/mnt/data/projects/git/conversations/media/3262c7945fa8343d619d18dac9ac92e755401adf-D2B79


[7/26/2022 6:30 AM] tux_linux
and https://github.com/Kobo-InkBox/inkbox-power-daemon/commits/main


[7/26/2022 6:32 AM] tux_linux
another todo: don't forget to `SleepCall` -> `sleepCall`


[7/26/2022 6:34 AM] szybet
If thats everything you will change then make a pull request


[7/26/2022 6:34 AM] szybet
You mean filename?


[7/26/2022 6:37 AM] tux_linux
?


[7/26/2022 6:37 AM] tux_linux
yes


[7/26/2022 6:37 AM] tux_linux
but I thought of something: we can use `SW_LID` for deep sleep


[7/26/2022 6:38 AM] tux_linux
or we can literally add an input event in the kernel


[7/26/2022 6:38 AM] tux_linux
but it must be worth it


[7/26/2022 6:39 AM] tux_linux
because we have ~10 kernels to change


[7/26/2022 6:39 AM] szybet
Its not


[7/26/2022 6:39 AM] tux_linux
ok, then SW_LID maybe


[7/26/2022 6:39 AM] szybet
Is it available for all devices, not used by anything?


[7/26/2022 6:40 AM] szybet
Isin't it the hal sensor?


[7/26/2022 6:40 AM] tux_linux
you can skim through kernel sources


[7/26/2022 6:40 AM] tux_linux
2.6.31, 2.6.35.3, 3.0.35, 4.1.15 and 5.16 are the main versions


[7/26/2022 6:40 AM] szybet
I cant now really


[7/26/2022 6:40 AM] tux_linux
hall sensor is `KEY_F1`


[7/26/2022 6:40 AM] szybet
So it isin't used for anything?


[7/26/2022 6:41 AM] tux_linux
it doesn't seem to be
@NiLuJe ?


[7/26/2022 6:41 AM] szybet
Try rtc wakeup?


[7/26/2022 6:45 AM] tux_linux
It's not everything but you can merge it in your repo


[7/26/2022 6:45 AM] tux_linux
For clean logging, it would also be useful to know which thread is sending the message


[7/26/2022 5:17 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-4FFDD.txt


[7/26/2022 5:18 PM] szybet
and?


[7/26/2022 5:18 PM] szybet
OH you did the loging


[7/26/2022 5:18 PM] tux_linux
nothing, I added date and function


[7/26/2022 5:18 PM] szybet
okay, i could do that


[7/26/2022 5:19 PM] szybet
im waiting for all instructions for what to change


[7/26/2022 5:19 PM] tux_linux
you get it for free


[7/26/2022 5:19 PM] szybet
led paths + what with SleepCall


[7/26/2022 5:19 PM] tux_linux
- decide what you do with sleepCall / deep sleep


[7/26/2022 5:19 PM] tux_linux
1. is it something useful
2. use SW_LID or not


[7/26/2022 5:20 PM] tux_linux
i will review led paths


[7/26/2022 5:20 PM] szybet
2. is it available for all devices? isint it used by anything?


[7/26/2022 5:20 PM] szybet
1. no, but its cool


[7/26/2022 5:20 PM] szybet
just as on kindles


[7/26/2022 5:29 PM] tux_linux
you wanted ipd to be started before inkbox_gui, right?


[7/26/2022 5:29 PM] szybet
and before gui_apps


[7/26/2022 5:29 PM] tux_linux
then you can't bind-mount the fifo


[7/26/2022 5:29 PM] tux_linux
because `/kobo` is remounted by `inkbox_gui`


[7/26/2022 5:29 PM] tux_linux
I can bind-mount it in inkbox_gui


[7/26/2022 5:29 PM] szybet
ipd
inkbox gui
gui apps


[7/26/2022 5:30 PM] szybet
what is the problem


[7/26/2022 5:30 PM] tux_linux
.


[7/26/2022 5:30 PM] tux_linux
`inkbox_gui` will do it


[7/26/2022 5:31 PM] szybet
oh


[7/26/2022 5:31 PM] szybet
okay well then


[7/26/2022 5:36 PM] tux_linux
it definitely doesn't want to suspend while charging


[7/26/2022 5:36 PM] tux_linux
I get the same error as yesterday


[7/26/2022 5:36 PM] tux_linux
```
Tue Jul 26 11:35:38 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 1
Tue Jul 26 11:35:38 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Tue Jul 26 11:35:38 2022 | watchdog: Watchdog event received
Tue Jul 26 11:35:39 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
Tue Jul 26 11:35:40 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
Tue Jul 26 11:35:40 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
```


[7/26/2022 5:36 PM] szybet
full log


[7/26/2022 5:37 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-DAE64.txt


[7/26/2022 5:37 PM] tux_linux
it's not complete complete but it's enough


[7/26/2022 5:51 PM] szybet
one possibility that i found is that currentActiveThread isin;t set at start to `Nothing`


[7/26/2022 5:52 PM] szybet
can you use this binary and try replicate the problem?

{Reactions}
👍 

[7/26/2022 5:52 PM] szybet
`extern` doesnt check if this variable exists in another files, so if it dooesnt it will freak out, and you changed many names


[7/26/2022 5:52 PM] szybet
i dont have time now, will try later

{Reactions}
👍 

[7/26/2022 5:52 PM] tux_linux
I changed extern variable names too


[7/26/2022 5:53 PM] szybet
thats what im talking about


[7/26/2022 6:44 PM] szybet
im waiting


[7/26/2022 10:24 PM] tux_linux
reconnection works with that binary


[7/26/2022 10:25 PM] tux_linux
actually no


[7/26/2022 10:25 PM] szybet
? i have nothing changed


[7/26/2022 10:25 PM] tux_linux
it tells the gui that it's reconnecting but fails to reconnect


[7/26/2022 10:26 PM] tux_linux
plus, it can't enable usbnet back, so I can't debug


[7/26/2022 10:26 PM] szybet
serial?


[7/26/2022 10:26 PM] tux_linux
sleeping the second time works
but I see the sleep dialog


[7/26/2022 10:27 PM] szybet
you see for a second or for forever


[7/26/2022 10:27 PM] tux_linux
for a second


[7/26/2022 10:27 PM] szybet
so you dont see it


[7/26/2022 10:27 PM] szybet
its just your imagination


[7/26/2022 10:27 PM] tux_linux
yes


[7/26/2022 10:27 PM] szybet
okay?


[7/26/2022 10:27 PM] tux_linux
and it's ugly


[7/26/2022 10:28 PM] szybet
imagine you dont see it


[7/26/2022 10:28 PM] tux_linux
it's ok but I will remove the newline


[7/26/2022 10:28 PM] szybet
sure


[7/26/2022 10:28 PM] szybet
you can remove all text


[7/26/2022 10:28 PM] tux_linux
it would be uglier


[7/26/2022 10:28 PM] szybet
but if something goes wrong the user will think what happened


[7/26/2022 10:30 PM] szybet
becouse you didnt apply the true fix to it, it wont recconect


[7/26/2022 10:30 PM] tux_linux
what's the most likely extern variable to be the cause of the problems I encountered with my version?


[7/26/2022 10:30 PM] tux_linux
yes, i know


[7/26/2022 10:30 PM] szybet
is that my false?


[7/26/2022 10:31 PM] szybet
so it doesnt happen with this binary?


[7/26/2022 10:31 PM] tux_linux
it doesn't reconnect
in my version it reconnects but fails to tell the gui that it does so


[7/26/2022 10:31 PM] tux_linux
no


[7/26/2022 10:31 PM] szybet
and thats why you first test, and then clean 😄


[7/26/2022 10:32 PM] tux_linux
.


[7/26/2022 10:36 PM] szybet
i was looking for them

based on the logs you provided, `currentActiveThread` + `currentActiveThread_mtx` and `sleepJob`... wait what did happen here, the mutex is for it `sleep_mtx`, such an ugly name


[7/26/2022 10:36 PM] tux_linux
i did rename every currentActiveThread out there


[7/26/2022 10:37 PM] tux_linux
```
nicolas@debian-code ~/D/i/i/src (main)> rg Cur
nicolas@debian-code ~/D/i/i/src (main) [1]> 
```


[7/26/2022 10:37 PM] szybet
can you test more?


[7/26/2022 10:37 PM] szybet
click the button more times


[7/26/2022 10:37 PM] tux_linux
with my binary


[7/26/2022 10:37 PM] szybet
and send the ***full*** logs


[7/26/2022 10:37 PM] szybet
yes


[7/26/2022 10:41 PM] tux_linux
also your binary sleeps in idle when it shouldn't


[7/26/2022 10:41 PM] tux_linux
but anyway


[7/26/2022 10:41 PM] tux_linux
and why did you put 15 seconds as the first choice


[7/26/2022 10:41 PM] szybet
becouse?


[7/26/2022 10:41 PM] tux_linux
that's way too short IMO


[7/26/2022 10:41 PM] szybet
i put 60...


[7/26/2022 10:42 PM] szybet
`cat /data/config/20-sleep_daemon/7-IdleSleep` please


[7/26/2022 10:42 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220726_204233921-F0FED.jpg


[7/26/2022 10:44 PM] szybet
```
  // 7-IdleSleep
  string idleSleepTimePath = "/data/config/20-sleep_daemon/7-IdleSleep";
  if (fileExists(idleSleepTimePath) == true) {
    string intToConvert = readConfigString(idleSleepTimePath);
    intToConvert = normalReplace(intToConvert, "\n", ""); // i like to be sure about some things.
    idleSleepTime = stoi(intToConvert);
  } else {
    writeFileString(idleSleepTimePath, "60");
    idleSleepTime = 60;
  }
```
at default i put 60 in there


[7/26/2022 10:44 PM] szybet
why is the button / text mirrored horizontally?


[7/26/2022 10:44 PM] tux_linux
because I changed it


[7/26/2022 10:45 PM] szybet
it looks horrible


[7/26/2022 10:45 PM] tux_linux
what do you suggest


[7/26/2022 10:45 PM] tux_linux
variable-sized buttons at random places were worse


[7/26/2022 10:45 PM] szybet
just make them fixed size


[7/26/2022 10:45 PM] szybet
not rotate everything


[7/26/2022 10:46 PM] tux_linux
i put everything at left because checkboxes are at left


[7/26/2022 10:46 PM] tux_linux
so if you want to change a setting, you normally go to the left
that is the case in almost every inkbox setting out there (actually not, buttons don't respect this, but anyway, it's less confusing for the user


[7/26/2022 10:46 PM] szybet
yea, you also changed that


[7/26/2022 10:47 PM] szybet
okay, makes sense


[7/26/2022 10:47 PM] szybet
but the text doesnt need to be on the right side of the screen


[7/26/2022 10:47 PM] szybet
its not an parkour


[7/26/2022 10:48 PM] tux_linux
hm ok


[7/26/2022 10:49 PM] szybet
is this still an issue?


[7/26/2022 10:49 PM] tux_linux
yes


[7/26/2022 10:49 PM] szybet
god


[7/26/2022 10:49 PM] szybet
impossible


[7/26/2022 10:49 PM] tux_linux
i didn't touch this part very much iirc


[7/26/2022 10:49 PM] tux_linux
but you can check


[7/26/2022 10:50 PM] szybet
```
rm -rf /data/config/20-sleep_daemon/
```
and relaunch the daemon, and show me the logs


[7/26/2022 10:51 PM] tux_linux
when clicking power button two times in less than a second:
```
Tue Jul 26 16:50:20 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:20 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:21 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:21 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:22 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:22 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:23 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:23 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:24 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:24 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:25 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:25 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:26 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:26 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:27 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:27 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:28 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:28 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
Tue Jul 26 16:50:29 2022 | idleSleep: Going to sleep because of idle time
Tue Jul 26 16:50:29 2022 | idleSleep: idleSleep: Not going to sleep because of sleepJob
```


[7/26/2022 10:51 PM] tux_linux
spamming stops when I touch the screen


[7/26/2022 10:52 PM] tux_linux
after that I can't suspend, same error as before with watchdog


[7/26/2022 10:53 PM] szybet
full log?...


[7/26/2022 10:53 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-A1B98.txt


[7/26/2022 10:54 PM] szybet
okay, i need to add countIdle = 0 there


[7/26/2022 10:54 PM] tux_linux
where


[7/26/2022 10:54 PM] szybet
i will add it


[7/26/2022 10:55 PM] tux_linux
in my version please


[7/26/2022 10:55 PM] tux_linux
I can give you access rights


[7/26/2022 10:55 PM] tux_linux
but please


[7/26/2022 10:55 PM] tux_linux
please


[7/26/2022 10:55 PM] tux_linux
review your code before committing


[7/26/2022 10:56 PM] szybet
sure


[7/26/2022 10:57 PM] tux_linux
oh, and let me write a wiki page about code standards


[7/26/2022 10:58 PM] szybet
you know why it doesnt go to sleep?
```
Skipping watchdog event because of option '3 - whenChargerSleep'

```


[7/26/2022 10:59 PM] szybet
¯\_(ツ)_/¯


[7/26/2022 10:59 PM] tux_linux
yes, after that I disabled it


[7/26/2022 10:59 PM] tux_linux
and it still doesn't go to sleep


[7/26/2022 11:00 PM] szybet
clean the log that i can read something from it, dont change the configuration, but before disable idleSleep


[7/26/2022 11:01 PM] szybet
and try again


[7/26/2022 11:01 PM] szybet
and show me the log


[7/26/2022 11:04 PM] szybet
im suprised that `iwlist eth0 scan` works well


[7/26/2022 11:04 PM] tux_linux
i'm on glo hd so it's using wlarm_le for that


[7/26/2022 11:04 PM] tux_linux
so maybe it doesn't work


[7/26/2022 11:04 PM] tux_linux
idk


[7/26/2022 11:05 PM] szybet
and?


[7/26/2022 11:05 PM] tux_linux
```
// Functions
void log(string toLog, string emitter) {
  if (logEnabled == true) {
    std::chrono::time_point<std::chrono::system_clock> end = std::chrono::system_clock::now();
    std::time_t endTime = std::chrono::system_clock::to_time_t(end);
    std::string message = normalReplace(std::ctime(&endTime), "\n", "\0") + " | " + emitter + ": " + toLog;
    std::cout << message << std::endl;

    // TODO: Improve efficiency (don't close it every time)
    ofstream logFile("/var/log/ipd.log", ios::app);
    logFile << message << std::endl;
    logFile.close();
  }
}
```


[7/26/2022 11:06 PM] tux_linux
this writes
```
Tue Jul 26 17:03:27 2022 | monitorEvents: Input device bus: 25 vendor: 1 product: 1
```
to stdout
but writes
```
Input device bus: 25 vendor: 1 product: 1
```
to `/var/log/ipd.log`
I can't explain it


[7/26/2022 11:07 PM] tux_linux
mount bind issue


[7/26/2022 11:07 PM] szybet
wtf


[7/26/2022 11:07 PM] szybet
you mean?


[7/26/2022 11:07 PM] tux_linux
try again what


[7/26/2022 11:07 PM] tux_linux
some weird nonsense in the kernel


[7/26/2022 11:07 PM] tux_linux
fixed


[7/26/2022 11:08 PM] szybet
pressing the power button some times


[7/26/2022 11:08 PM] tux_linux
i bind-mounted `/tmp/ipd` to `/sbin/ipd` for testing

{Reactions}
👍 

[7/26/2022 11:08 PM] tux_linux
ok


[7/26/2022 11:08 PM] tux_linux
well now it says skipping watchdog event


[7/26/2022 11:08 PM] tux_linux
because you told me to reset the config


[7/26/2022 11:09 PM] szybet
oh, set that too


[7/26/2022 11:09 PM] szybet
reset the daemon


[7/26/2022 11:09 PM] szybet
dont trigger inotify


[7/26/2022 11:09 PM] tux_linux
pressing power button 2 times in less than a second

{Attachments}
/mnt/data/projects/git/conversations/media/message-70DBB.txt


[7/26/2022 11:10 PM] tux_linux
it works (why) but I think my `fbinkRefreshScreen()` function is too early/too late


[7/26/2022 11:11 PM] szybet
what? then is it too early or too late


[7/26/2022 11:11 PM] szybet
try 10 times more without idle sleep and inotify


[7/26/2022 11:11 PM] tux_linux
suspending after that works
same screen refresh issue but unrelated


[7/26/2022 11:12 PM] szybet
okay? so i dont need to care?


[7/26/2022 11:12 PM] tux_linux
passes the test


[7/26/2022 11:12 PM] tux_linux
yes and no


[7/26/2022 11:12 PM] tux_linux
it's my fault but maybe it would help if you could debug it


[7/26/2022 11:12 PM] szybet
first i would need to understand the issue


[7/26/2022 11:12 PM] tux_linux
because I'm not able to see 'sleeping' screen or screen dump


[7/26/2022 11:12 PM] tux_linux
i only see a blank screen


[7/26/2022 11:13 PM] tux_linux
so the function works but it's probably too late


[7/26/2022 11:13 PM] szybet
its only white?


[7/26/2022 11:13 PM] tux_linux
yes


[7/26/2022 11:13 PM] szybet
well, then the problem is inotify or idle sleep


[7/26/2022 11:14 PM] szybet
try with one of them enabled


[7/26/2022 11:14 PM] szybet
i will look into the code of them


[7/26/2022 11:14 PM] tux_linux
what option exactly


[7/26/2022 11:15 PM] szybet
enable idle sleep for example


[7/26/2022 11:15 PM] szybet
restart the daemon


[7/26/2022 11:15 PM] szybet
click the screen


[7/26/2022 11:15 PM] szybet
and the click the power button


[7/26/2022 11:15 PM] szybet
and look if it goes to sleep


[7/26/2022 11:15 PM] szybet
```
  CEP();
  if (diePrepare == false) {
    clearScreen(darkMode);
    sleepScreen();
  }
```


[7/26/2022 11:15 PM] szybet
its maybe too fast


[7/26/2022 11:16 PM] szybet
fbink doesnt wait for the instructions to apply...?


[7/26/2022 11:16 PM] tux_linux
also it's auto-resetting whenChargerSleep to false


[7/26/2022 11:17 PM] szybet
what?


[7/26/2022 11:17 PM] szybet
whaaat


[7/26/2022 11:17 PM] tux_linux
it's the gui's fault


[7/26/2022 11:17 PM] tux_linux
will look into it


[7/26/2022 11:17 PM] szybet
i dont understand?


[7/26/2022 11:18 PM] tux_linux
when 3-whenChargerSleep is set in the gui, it writes true, if settings is opened a second time and no action is done on it it writes false


[7/26/2022 11:19 PM] tux_linux
```
Tue Jul 26 17:18:22 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Tue Jul 26 17:18:22 2022 | watchdog: Watchdog event received
Tue Jul 26 17:18:23 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
Tue Jul 26 17:18:23 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
Tue Jul 26 17:18:23 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
```
I get the same error
You don't need the full log


[7/26/2022 11:19 PM] tux_linux
it does the same thing afterwards


[7/26/2022 11:19 PM] tux_linux
even if i touch the screen


[7/26/2022 11:21 PM] szybet
sooo idle Sleep is the problem?


[7/26/2022 11:21 PM] tux_linux
normal working sleep log

{Attachments}
/mnt/data/projects/git/conversations/media/message-442D5.txt


[7/26/2022 11:21 PM] szybet
weird. a bug in Exit button click


[7/26/2022 11:22 PM] tux_linux
it seems like it


[7/26/2022 11:22 PM] tux_linux
I can suspend two times if I don't touch the screen too much


[7/26/2022 11:25 PM] szybet
i see some problems there


[7/26/2022 11:25 PM] tux_linux
you already have access to the repo actually


[7/26/2022 11:25 PM] szybet
idk why they didn't accoured when i was testing


[7/26/2022 11:25 PM] szybet
give me a second


[7/26/2022 11:33 PM] tux_linux
pull the repo, i pushed a new commit (not much)


[7/26/2022 11:39 PM] szybet
i added some fixes, will try them when boost finally downloads


[7/26/2022 11:40 PM] szybet
but im still not sure


[7/26/2022 11:42 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
read that while it downloads

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[7/26/2022 11:43 PM] szybet
`Do NOT use clang-format.` 😄

{Reactions}
👍 

[7/26/2022 11:45 PM] tux_linux
one thing: you should not set idle sleep timeouts that are less than the time the device needs to have the gui ready


[7/26/2022 11:45 PM] tux_linux
- or implement a fifo function that makes the gui tell idle sleep it can start counting


[7/26/2022 11:45 PM] szybet
i will just add a delay before the idle starts


[7/26/2022 11:46 PM] tux_linux
but this delay can change


[7/26/2022 11:46 PM] tux_linux
based on the number of user apps one user has installed


[7/26/2022 11:46 PM] tux_linux
since openssl will make boot slightly longer


[7/26/2022 11:47 PM] szybet
`/mnt/HDD/Project/Public/inkbox-power-daemon/src/idleSleep.cpp:20:10: fatal error: config.h: No such file or directory`


[7/26/2022 11:47 PM] szybet
i dont remember


[7/26/2022 11:47 PM] tux_linux
you need to compile libevdev + install boost + compile fbink


[7/26/2022 11:47 PM] szybet
:(


[7/26/2022 11:47 PM] tux_linux
```
make distclean && make SHARED=1 BITMAP=1 OPENTYPE=1 CROSS_COMPILE=armv7l-linux-musleabihf- -j8 shared
```
compile command for fbink


[7/26/2022 11:48 PM] tux_linux
don't forget to `git submodule init && git submodule update` in inkbox-power-daemon folder + FBInk folder


[7/26/2022 11:48 PM] szybet
you libevdev has an autogen instead of configure...


[7/26/2022 11:49 PM] szybet
i will add it to github

{Reactions}
👍 

[7/26/2022 11:49 PM] tux_linux
`./autogen.sh` and you will get `configure`


[7/26/2022 11:49 PM] szybet
😆


[7/26/2022 11:49 PM] tux_linux
caution, it launches configure automatically without --host option, stop it once it reaches that step


[7/26/2022 11:49 PM] tux_linux
and run configure yourself


[7/26/2022 11:56 PM] szybet
"confussion"

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E3DD7.png


[7/26/2022 11:56 PM] tux_linux
you even spelled it wrong


[7/26/2022 11:56 PM] tux_linux
`confusion`


[7/26/2022 11:57 PM] szybet
oh god


[7/27/2022 12:01 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/27ec8ae80046960ceedd440056ea12c0c475c36f#diff-3531d0ee62ecf3efe6f3970738669cbd82155763b266afa084fa6a4d6827922b

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/27ec8ae80046960ceedd440056ea12c0c475c36f
InkBox Power Daemon (ipd) support · Kobo-InkBox/rootfs@27ec8ae
/mnt/data/projects/git/conversations/media/27ec8ae80046960ceedd440056ea12c0c475c36f-F2CC4


[7/27/2022 12:01 AM] tux_linux
now you can clear your cache


[7/27/2022 12:01 AM] tux_linux
the included binary is my latest build, you can bind-mount yours to `/sbin/ipd` for testing


[7/27/2022 12:07 AM] szybet
```
0:05 szybet@hyperbookszyb /mnt/HDD/Project/Public/inkbox-power-daemon
% git remote set-url origin git@github.com:Kobo-InkBox/inkbox-power-daemon.git
0:07 szybet@hyperbookszyb /mnt/HDD/Project/Public/inkbox-power-daemon
% git push                                                                    
ERROR: Permission to Kobo-InkBox/inkbox-power-daemon.git denied to Szybet.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
```


[7/27/2022 12:07 AM] tux_linux
strange


[7/27/2022 12:07 AM] tux_linux
why can i push to your forks


[7/27/2022 12:08 AM] szybet
thats funny


[7/27/2022 12:08 AM] tux_linux
sent invite


[7/27/2022 12:09 AM] szybet
ok, i pushed "some" fixes

{Reactions}
👍 

[7/27/2022 12:09 AM] szybet
if those doesnt worked, we need logging logging and once more logging to debug this

{Reactions}
👍 

[7/27/2022 12:12 AM] tux_linux
https://photos.app.goo.gl/geapNZ9RZ791R9zC9
Look at pinned books icon
Nonsense

{Embed}
https://photos.app.goo.gl/geapNZ9RZ791R9zC9
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/Oa7JvZQRJYeHgN_8ea7Me27Y6VIoq-7Nx1d2dJI1Fh-EEEAE


[7/27/2022 12:12 AM] szybet
whats the problem?


[7/27/2022 12:13 AM] tux_linux
the icon is not there


[7/27/2022 12:13 AM] tux_linux
the second time


[7/27/2022 12:13 AM] tux_linux
I will put ipd `fifo` in `/kobo/dev/ipd/fifo` because otherwise we will have bind-mount problems


[7/27/2022 12:13 AM] tux_linux
`/kobo/run` is remounted by the GUI at each launch


[7/27/2022 12:14 AM] szybet
ok, but doccument the changes in the docs


[7/27/2022 12:14 AM] tux_linux
can you put those in the wiki?


[7/27/2022 12:15 AM] szybet
i can update it in my notes


[7/27/2022 12:15 AM] tux_linux
it would really be useful in the wiki


[7/27/2022 12:16 AM] szybet
well, later you can add it there


[7/27/2022 12:16 AM] szybet
i hate the wiki editing tool


[7/27/2022 12:16 AM] tux_linux
use wikicode


[7/27/2022 12:16 AM] tux_linux
i never use gui editing


[7/27/2022 12:23 AM] szybet
did you tested them?


[7/27/2022 12:23 AM] tux_linux
i was in the fifo mess


[7/27/2022 12:25 AM] tux_linux
ok what to try exactly


[7/27/2022 12:26 AM] szybet
clean the log that i can read something from it, dont change the configuration, make sure idle sleep is enabled and spam the power button


[7/27/2022 12:26 AM] szybet
and post the *****f u l l***** log


[7/27/2022 12:26 AM] tux_linux
how many times


[7/27/2022 12:27 AM] szybet
as you want


[7/27/2022 12:31 AM] tux_linux
everything works

{Attachments}
/mnt/data/projects/git/conversations/media/ipd-E5190.log


[7/27/2022 12:32 AM] szybet
a variable was created but undeclared


[7/27/2022 12:32 AM] szybet
and becouse of cpp and diffrent cpu you get an error and i dont


[7/27/2022 12:32 AM] szybet
still my fault🥴


[7/27/2022 12:32 AM] tux_linux
good that it works


[7/27/2022 12:33 AM] szybet
rust compiler would scream at me to fix this or die


[7/27/2022 12:33 AM] ninuje
#compilerwarningssavepeople


[7/27/2022 12:33 AM] tux_linux
`-Werror`


[7/27/2022 12:33 AM] szybet
😄


[7/27/2022 12:34 AM] szybet
it isint available for nia


[7/27/2022 12:34 AM] szybet
```
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 59 (KEY_F1)
    Event code 116 (KEY_POWER)
  Event type 4 (EV_MSC)
    Event code 3 (MSC_RAW)
Properties:
```


[7/27/2022 12:35 AM] tux_linux
ok, use sleepCall


[7/27/2022 12:35 AM] tux_linux
in tmpfs


[7/27/2022 12:35 AM] szybet
so tmpfs for deepsleep


[7/27/2022 12:35 AM] tux_linux
yes


[7/27/2022 12:36 AM] szybet
well, now led paths


[7/27/2022 12:36 AM] szybet
and thats propably all i need to know


[7/27/2022 12:37 AM] tux_linux
look in `/usr/bin/inkbox.sh`


[7/27/2022 12:38 AM] tux_linux
it will probably break in all sorts of not-so-fun ways on other devices though


[7/27/2022 12:38 AM] szybet
how i didn't found it? i runned many greps...


[7/27/2022 12:38 AM] tux_linux
```
if [ "${DEVICE}" == "n705" ] || [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n905c" ] || [ "${DEVICE}" == "n613" ]; then
        FB_UR=3
        echo 0 > "/sys/class/leds/pmic_ledsb/brightness"
elif [ "${DEVICE}" == "n306" ]; then
        FB_UR=3
        echo 1 > "/sys/devices/platform/leds/leds/GLED/brightness" ; echo 0 > "/sys/devices/platform/leds/leds/GLED/brightness"
elif [ "${DEVICE}" == "n873" ]; then
        FB_UR=0
        echo 1 > "/sys/class/leds/GLED/brightness" ; echo 0 > "/sys/class/leds/GLED/brightness"
elif [ "${DEVICE}" == "emu" ]; then
        FB_UR=0
        ifconfig eth0 up
        udhcpc -i eth0
elif [ "${DEVICE}" == "bpi" ]; then
        FB_UR=0
        echo 0 > "/sys/devices/platform/leds/leds/bpi:red:pwr/brightness"
elif [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n437" ]; then
        FB_UR=3
        /opt/bin/shutdown_led
elif [ "${DEVICE}" == "kt" ]; then
        FB_UR=1
else
        FB_UR=0
        echo 0 > /sys/class/leds/pmic_ledsb/brightness
fi
```


[7/27/2022 12:38 AM] szybet
so test it now


[7/27/2022 12:39 AM] tux_linux
no, currently fixing the gui + I don't have a lot of microSD cards


[7/27/2022 12:39 AM] tux_linux
```
int main() {
        int light;
        if((light = open("/dev/ntx_io", O_RDWR)) == -1) {
                fprintf(stderr, "Error opening ntx_io device\n");
        }
        ioctl(light, 127, 0);
}
```
`/opt/bin/shutdown_led` source code


[7/27/2022 12:40 AM] szybet
okay


[7/27/2022 12:40 AM] szybet
for what do you need sd cards?


[7/27/2022 12:40 AM] tux_linux
testing inkbox on 7+ devices?


[7/27/2022 12:41 AM] tux_linux
without writing to an existing one the image everytime


[7/27/2022 12:41 AM] tux_linux
i think i have 3 or 4 currently


[7/27/2022 12:41 AM] szybet
oh... crap


[7/27/2022 12:42 AM] tux_linux
I will eventually test it


[7/27/2022 12:42 AM] szybet
i would like to finish it finally


[7/27/2022 12:42 AM] szybet
i spend too much time on this anyway


[7/27/2022 12:43 AM] tux_linux
it needs very heavy testing


[7/27/2022 12:46 AM] tux_linux
actually i didn't test wifi reconnection


[7/27/2022 12:49 AM] szybet
also we forgot about `/kobo/tmp/currentlyRunningUserApplication`


[7/27/2022 12:50 AM] tux_linux
we are not done with crappy bug
```
**Tue Jul 26 18:49:32 2022 | watchdog: Watchdog event received
Tue Jul 26 18:49:32 2022 | watchdog: sleepJob is something else
Tue Jul 26 18:49:33 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
Tue Jul 26 18:49:33 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
Tue Jul 26 18:49:34 2022 | monitorEvents: Input event received, type: EV_SYN codename: SYN_REPORT value: 0
```


[7/27/2022 12:51 AM] szybet
nice, thats my log i put in there


[7/27/2022 12:52 AM] tux_linux
step to reproduce:
- disable sleep with charger, then enable
- sleep


[7/27/2022 12:52 AM] tux_linux
oh now it says it's reconnecting


[7/27/2022 12:53 AM] tux_linux
but it says so even if you have option 5 disabled


[7/27/2022 12:53 AM] szybet
```
"Skipping watchdog event because of option '3 - whenChargerSleep'
```
where is this log


[7/27/2022 12:53 AM] tux_linux
it is not


[7/27/2022 12:53 AM] tux_linux
it's the same bug I had before


[7/27/2022 12:53 AM] szybet
oh god


[7/27/2022 12:54 AM] szybet
this program is too fast


[7/27/2022 12:54 AM] tux_linux
enter wonderful world of race conditions


[7/27/2022 12:54 AM] szybet
log...................................?


[7/27/2022 12:54 AM] tux_linux
it just says it won't reconnect to wifi because option 5 is disabled


[7/27/2022 12:54 AM] tux_linux
nothing else relevant


[7/27/2022 12:55 AM] tux_linux
you probably just forgot not to create the was_connected_to_wifi file if that option was enabled


[7/27/2022 12:55 AM] szybet
no


[7/27/2022 12:56 AM] szybet
it will always say that, even if wifi was off


[7/27/2022 12:56 AM] tux_linux
ok and


[7/27/2022 12:56 AM] szybet
it doesnt look for was_connected_to_wifi if this is disabled


[7/27/2022 12:57 AM] tux_linux
but how does it create it then


[7/27/2022 12:58 AM] tux_linux
```
Tue Jul 26 18:57:21 2022 | functions: Wrote: "true" to: /run/was_connected_to_wifi
```
it does that


[7/27/2022 12:59 AM] tux_linux
you probably call `turnOffWifi()` which writes it


[7/27/2022 1:00 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DC301.png


[7/27/2022 1:00 AM] szybet
i dont see a problem here


[7/27/2022 1:01 AM] tux_linux
```
diff --git a/lib/libevdev b/lib/libevdev
--- a/lib/libevdev
+++ b/lib/libevdev
@@ -1 +1 @@
-Subproject commit 8ced382eb800ce01da1d6a9b9da2f1159f9042e0
+Subproject commit 8ced382eb800ce01da1d6a9b9da2f1159f9042e0-dirty
diff --git a/src/wifi.cpp b/src/wifi.cpp
index 8a5044f..b632f24 100644
--- a/src/wifi.cpp
+++ b/src/wifi.cpp
@@ -48,7 +48,9 @@ void turnOffWifi() {
   string wifiDevPath = "/sys/class/net/" + WIFI_DEV + "/operstate";
   if (fileExists(wifiDevPath) == true) {
     if (readConfigString("/sys/class/net/" + WIFI_DEV + "/operstate") == "up") {
-      writeFileString("/run/was_connected_to_wifi", "true");
+      if(readConfigString("/data/config/20-sleep_daemon/5-wifiReconnect") == "true") {
+        writeFileString("/run/was_connected_to_wifi", "true");
+      }
 
       system("killall -9 connect_to_network.sh");
       killProcess("connect_to_network.sh");
```


[7/27/2022 1:01 AM] tux_linux
you are turning wifi off but you don't care about option 5


[7/27/2022 1:01 AM] tux_linux
this should work


[7/27/2022 1:01 AM] tux_linux
i'm testing it


[7/27/2022 1:01 AM] szybet
option 5 is only about recconecting


[7/27/2022 1:01 AM] szybet
wifi needs to be shutted off before sleep


[7/27/2022 1:02 AM] tux_linux
the power daemon does not attempt to reconnect, but the gui thinks it is doing that because of `was_connected_to_wifi`


[7/27/2022 1:02 AM] szybet
yea i see


[7/27/2022 1:02 AM] szybet
makes sense

{Reactions}
👍 

[7/27/2022 1:02 AM] szybet
i will push the fix to the repo now


[7/27/2022 1:02 AM] tux_linux
ok


[7/27/2022 1:04 AM] szybet
went


[7/27/2022 1:05 AM] tux_linux
you aren't forgetting that there are devices that do not currently support wi-fi right?


[7/27/2022 1:06 AM] tux_linux
n705, n905c, n613, kt


[7/27/2022 1:06 AM] szybet
`if (fileExists(wifiDevPath) == true) { `😇


[7/27/2022 1:06 AM] tux_linux
ok good


[7/27/2022 1:06 AM] tux_linux
didn't see it


[7/27/2022 1:16 AM] tux_linux
ok it works


[7/27/2022 1:18 AM] szybet
yay


[7/27/2022 1:18 AM] tux_linux
now, fbinkRefreshScreen issue


[7/27/2022 1:18 AM] szybet
i fixed it?


[7/27/2022 1:18 AM] tux_linux
no


[7/27/2022 1:18 AM] szybet
test it


[7/27/2022 1:22 AM] szybet
list of all things i need to check / do

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BBE83.png


[7/27/2022 1:22 AM] szybet
i hope i didnt shipped anything


[7/27/2022 1:23 AM] tux_linux
i already fixed some things


[7/27/2022 1:23 AM] szybet
i know, i need to check them for the nia


[7/27/2022 1:25 AM] tux_linux
you aren't using `fbink_wait_for_complete` anywhere


[7/27/2022 1:27 AM] szybet
the documentation didn't mentioned that


[7/27/2022 1:27 AM] szybet
quess why? 🥴


[7/27/2022 1:30 AM] tux_linux
works


[7/27/2022 1:30 AM] szybet
well okay then...


[7/27/2022 1:31 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/3ffdd74e45b24d99c4bcc5c180918ef39e3d28cb
it did not behave like that yesterday


[7/27/2022 1:34 AM] szybet
`log("Custom screensaver not found, displaying normal message", emitter);` a log with similar content is showed in aftersleep already


[7/27/2022 1:34 AM] tux_linux
where?


[7/27/2022 1:41 AM] szybet
In the function of savescreen


[7/27/2022 1:46 AM] tux_linux
I'm not sure I follow you


[7/27/2022 4:06 AM] tux_linux
add to your todo list: remove unnecessary includes from ipd


[7/27/2022 5:03 AM] tux_linux
remarks for ipd:
- doesn't work when user app is running, stops working, logs nothing
- works again when app is quit
- works with built-in app
- does not work correctly in x11 (slower, test it)
+ this https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/5a967bd36e20ff99e4c55b5712b267f854c40451

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/5a967bd36e20ff99e4c55b5712b267f854c40451
Move 'appList.txt' to 'appsList' · Kobo-InkBox/inkbox-power-daemon@...
Prevent local library from indexing 'appList.txt' (local reading settings).
/mnt/data/projects/git/conversations/media/5a967bd36e20ff99e4c55b5712b267f854c40451-6BCC0


[7/27/2022 5:09 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/4463ced4c7e55fce89bf4a924c19fd915f56f569

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/4463ced4c7e55fce89bf4a924c19fd915f56f569
Fixes in homePageWidget; implement 'currentlyRunningUserApplication...
/mnt/data/projects/git/conversations/media/4463ced4c7e55fce89bf4a924c19fd915f56f569-394F4


[7/27/2022 5:09 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9B6F9.png


[7/27/2022 9:53 AM] szybet
> - doesn't work when user app is running, stops working, logs nothing
wtf😂 

> - does not work correctly in x11 (slower, test it)
cpu is 100% and everything is slow... what can i do about it


[7/27/2022 10:28 AM] szybet
i tested it with user app - I dont know why, it stops receiving events from /dev devices when a user app is running. thats all


[7/27/2022 10:30 AM] szybet
also you have completly broken restoring fbink, i will fix it


[7/27/2022 10:43 AM] szybet
for xorg its the same,  idle sleep works fine... until this file wants to be created:
```
functions: File could not be created at path: /kobo/inkbox/remount
```


[7/27/2022 10:43 AM] szybet
this is fixable, but i have no idea why no nothing is received from libevdev


[7/27/2022 12:07 PM] tux_linux
In what way


[7/27/2022 12:07 PM] tux_linux
It works here


[7/27/2022 12:08 PM] tux_linux
I want my full screen refresh


[7/27/2022 12:09 PM] tux_linux
Yes, /kobo isn't available when in x11


[7/27/2022 12:10 PM] tux_linux
I know
Qt grabs the input
Check platform plugin code


[7/27/2022 12:10 PM] tux_linux
Try with inkvt to see if this theory is true


[7/27/2022 12:28 PM] szybet
inkbox also works with platform plugin


[7/27/2022 12:28 PM] szybet
and doesnt do that


[7/27/2022 12:28 PM] szybet
you mean?


[7/27/2022 12:28 PM] szybet
its just broken after sleep


[7/27/2022 1:20 PM] tux_linux
Try it still


[7/27/2022 1:20 PM] tux_linux
You know what a full screen refresh is


[7/27/2022 1:20 PM] tux_linux
?


[7/27/2022 1:26 PM] szybet
i know


[7/27/2022 1:26 PM] szybet
the nia doesnt need them


[7/27/2022 1:26 PM] szybet
but sure


[7/27/2022 1:26 PM] szybet
https://doc.qt.io/qt-6/inputs-linux-device.html


[7/27/2022 2:03 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/c39fd8f92f1b0da7b366794f2ada46acbbdab584
you forgot to pull?

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/c39fd8f92f1b0da7b366794f2ada46acbbdab584
Merge branch 'main' of github.com:Kobo-InkBox/inkbox-power-daemon ·...
/mnt/data/projects/git/conversations/media/c39fd8f92f1b0da7b366794f2ada46acbbdab584-99E85


[7/27/2022 2:05 PM] tux_linux
On my Glo HD the screen refresh is like that
https://photos.app.goo.gl/ixtowiuCwDtiqxv56

{Embed}
https://photos.app.goo.gl/ixtowiuCwDtiqxv56
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/DPeGEMPE6hkApXXthy-m6uUrXq-gpB_8WiC4ul3eV0-B95D5


[7/27/2022 2:07 PM] szybet
yes


[7/27/2022 2:40 PM] szybet
touch is registerred when a user app is launched


[7/27/2022 2:40 PM] szybet
then what the heck is going with event0


[7/27/2022 2:43 PM] szybet
event0 doesnt outputs anything when a user app is launched, I even cant read crap with `cat`


[7/27/2022 3:08 PM] ninuje
FBIOCGRAB


[7/27/2022 3:08 PM] ninuje
Evemu should tell you


[7/27/2022 3:09 PM] szybet
Kernel input device emulation...


[7/27/2022 3:09 PM] szybet
duck doesnt know what this is

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FD94F.png


[7/27/2022 3:10 PM] ninuje
Not that you can do much about it besides patching whatever grabs the input device


[7/27/2022 3:10 PM] ninuje
On mobile, it's an ioctl cmd, might have gotten the exact name wrong ;p


[7/27/2022 3:10 PM] ninuje
libevdev has a wrapper for it


[7/27/2022 3:10 PM] szybet
what does it? thats the question


[7/27/2022 3:11 PM] ninuje
https://www.freedesktop.org/software/libevdev/doc/latest/group__init.html#ga5d434af74fee20f273db568e2cbbd13f


[7/27/2022 3:11 PM] ninuje
Think of it as locking exclusive access to the device by a process


[7/27/2022 3:12 PM] szybet
i know


[7/27/2022 3:12 PM] ninuje
Only the "grabber" can ungrab it


[7/27/2022 3:12 PM] ninuje
You probably don't want anything to ever grab anything in your workflows


[7/27/2022 3:12 PM] ninuje
If it's X, that might be a setting


[7/27/2022 3:13 PM] ninuje
Qt has a setting for it also


[7/27/2022 3:13 PM] szybet
yes, something is doing it to event0 for some reason, and only when an user app is launched


[7/27/2022 3:13 PM] szybet
ld-musl-armhf.so.1?


[7/27/2022 3:14 PM] szybet
is write permission needed for a input device? i dont think so


[7/27/2022 3:14 PM] szybet
```
kobo:~# ls -l /kobo/mnt/onboard/onboard/.apps/Conway/Conway/dev/input/
total 0
crw-r--r--    1 user     user       13,  64 Jan 15 23:32 event0
crw-r--r--    1 user     user       13,  65 Jan 15 23:32 event1
crw-r--r--    1 user     user       13,  66 Jan 15 23:32 event2
```


[7/27/2022 3:15 PM] ninuje
Unless you need to inject events, no ;)


[7/27/2022 3:15 PM] szybet
so if I prevent those permission, it will not grab it


[7/27/2022 3:16 PM] szybet
i dont even want to know what is going on that something grabs event0


[7/27/2022 3:39 PM] szybet
xorg apps also grab event0


[7/27/2022 3:40 PM] szybet
leave my input alone >:(


[7/27/2022 4:10 PM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/ec30f5ff38f4e0e67190b8bcb82bc4d38e66de60

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/ec30f5ff38f4e0e67190b8bcb82bc4d38e66de60
better config management, fixes in logging, fixes for user apps and...
…org ( grab the device )
/mnt/data/projects/git/conversations/media/ec30f5ff38f4e0e67190b8bcb82bc4d38e66de60-6AAEC


[7/27/2022 4:23 PM] ninuje
I don't actually know if missing write permissions would prevent a grab


[7/27/2022 4:24 PM] ninuje
I wouldn't necessarily count on it


[7/27/2022 4:28 PM] ninuje
Note that grabbing it yourself essentially prevents user apps from reading it, which might be a problem ;).


[7/27/2022 4:49 PM] szybet
its logical


[7/27/2022 4:50 PM] szybet
no, ***leave my input alone >:(***


[7/27/2022 4:50 PM] szybet
everything works with it


[7/27/2022 5:05 PM] ninuje
Physical buttons go to event0 (-ish)


[7/27/2022 5:14 PM] szybet
and there is no reason for other apps to use them


[7/27/2022 5:52 PM] szybet
```
 replace system() by execve/execl/etc. where possible
```
what? i readed through the docs of those command and i dont want to replace the current program


[7/27/2022 5:59 PM] ninuje
Needs a fork


[7/27/2022 5:59 PM] ninuje
Try posix_spawn instead, it handles all the gory details better


[7/27/2022 6:00 PM] szybet
is it non blocking? becouse it propably isint


[7/27/2022 6:03 PM] ninuje
system blocks


[7/27/2022 6:03 PM] szybet
if I add & it doesnt


[7/27/2022 6:03 PM] szybet
shell


[7/27/2022 6:03 PM] szybet
¯\_(ツ)_/¯


[7/27/2022 6:04 PM] ninuje
A fork is a new process, so you can do whatever


[7/27/2022 6:05 PM] ninuje
Child can block while parent doesn't


[7/27/2022 6:05 PM] szybet
cool, can i kill the child when i want?


[7/27/2022 6:05 PM] ninuje
Or parent can wait until child dies with the wait family of functions


[7/27/2022 6:05 PM] szybet
this sounds bad


[7/27/2022 6:05 PM] ninuje
It has a pid, you can kill it or let it die


[7/27/2022 6:06 PM] ninuje
You do need to collect it via wait one way or another


[7/27/2022 6:06 PM] ninuje
Otherwise you have a zombie process in the system's process table


[7/27/2022 6:06 PM] szybet
kill -9 will prevent this?


[7/27/2022 6:06 PM] ninuje
No


[7/27/2022 6:07 PM] szybet
kill and wait? thats a bit problematic


[7/27/2022 6:07 PM] szybet
one detached thread calls it, and other kills it


[7/27/2022 6:07 PM] ninuje
Read the posix_spawn manpage


[7/27/2022 6:07 PM] szybet
im reading


[7/27/2022 6:07 PM] ninuje
It handles forking for you, and has slightly different semantics re: collecting dead children


[7/27/2022 6:08 PM] ninuje
And with a properly set up daemon process you have ways to let init collect dead children for you


[7/27/2022 6:09 PM] ninuje
I may have some notes about that in kfmon (although I don't use posix_spawn spawn because old glibc is bad)


[7/27/2022 6:10 PM] szybet
why not use `system`? this complicates things slightly


[7/27/2022 6:10 PM] ninuje
System blocks and calls a shell


[7/27/2022 6:11 PM] ninuje
Which may or may not be necessary


[7/27/2022 6:11 PM] szybet
i use **`&`**


[7/27/2022 6:11 PM] szybet
and then killall


[7/27/2022 6:11 PM] ninuje
That's... Not elegant, especially if you don't actually require shell semantics


[7/27/2022 6:12 PM] ninuje
But it works, and is far easier than getting fork & exec right, because there's a lot of tricky stuff to account for...


[7/27/2022 6:55 PM] tux_linux
It is not in our case


[7/27/2022 6:56 PM] tux_linux
system is superfluous


[7/27/2022 6:56 PM] szybet
im doing this anyway


[7/27/2022 6:56 PM] szybet
*That's... Not elegant*


[7/27/2022 6:56 PM] szybet
and i agree


[7/27/2022 10:06 PM] szybet
why is `udhcpc` or `wpa_supplicant` grabbing event0


[7/27/2022 10:07 PM] szybet
i needed to kill them to get input


[7/27/2022 10:56 PM] szybet
and how to turn the led on?


[7/27/2022 10:56 PM] szybet
propably `ioctl(light, 127, 1);`?


[7/28/2022 12:00 AM] tux_linux
probably


[7/28/2022 12:00 AM] szybet
🥴


[7/28/2022 12:00 AM] szybet
test it before i implement it


[7/28/2022 12:00 AM] tux_linux
did you try it?


[7/28/2022 12:00 AM] tux_linux
it should work for all devices


[7/28/2022 12:00 AM] szybet
no i dont have a device that needs it


[7/28/2022 12:00 AM] szybet
oh


[7/28/2022 12:00 AM] tux_linux
ntx_io


[7/28/2022 12:01 AM] szybet
can you check it on your cheapest device?


[7/28/2022 12:01 AM] szybet
im a bit concerned


[7/28/2022 12:01 AM] tux_linux
i would need to reflash a microsd


[7/28/2022 12:01 AM] tux_linux
but i will do it soon


[7/28/2022 12:01 AM] szybet
we have time


[7/28/2022 12:26 AM] ninuje
Which LED are we talking about?N


[7/28/2022 12:26 AM] ninuje
Power?


[7/28/2022 12:26 AM] szybet
yes


[7/28/2022 12:26 AM] ninuje
It's... tricky.


[7/28/2022 12:26 AM] ninuje
Some kernels appear to be buggy as all hell, and touching the led breaks all kinds of random stuff in fun and interesting ways.


[7/28/2022 12:27 AM] szybet
we will see


[7/28/2022 12:27 AM] ninuje
https://github.com/koreader/koreader/blob/460d42293a4b001102f69185ff835a5ee7aa66c6/frontend/device/kobo/device.lua#L1113-L1177

{Embed}
https://github.com/koreader/koreader/blob/460d42293a4b001102f69185ff835a5ee7aa66c6/frontend/device/kobo/device.lua
koreader/device.lua at 460d42293a4b001102f69185ff835a5ee7aa66c6 · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at 460d42293a4b001102f691...
/mnt/data/projects/git/conversations/media/koreader-12CE5


[7/28/2022 12:27 AM] ninuje
I can't recall why I did not use the ioctl (if there's one), besides "because nickel doesn't" 😉


[7/28/2022 12:28 AM] szybet
i only want the led to behave like on kindles, im not asking for too much :(


[7/28/2022 12:30 AM] ninuje
A poweroff does something similar to what sending `0` to *both* the  `CM_nLED` (101) and `CM_LED_BLINK` (127) ntx ioctl commands does


[7/28/2022 12:30 AM] ninuje
emphasis on *seems*


[7/28/2022 12:31 AM] ninuje
IIRC, there are weird corners cases and/or the ioctl is plain wrong/broken on some devices, which is why nobody uses it and we use the sysfs entries instead


[7/28/2022 12:33 AM] tux_linux
as always


[7/28/2022 1:18 AM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/dfff3a9dc6efcf74fd212182426d0e70312f7d6f

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/dfff3a9dc6efcf74fd212182426d0e70312f7d6f
many things. Leds, spawn_posix, fixes, fixes · Kobo-InkBox/inkbox-p...
/mnt/data/projects/git/conversations/media/dfff3a9dc6efcf74fd212182426d0e70312f7d6f-8489D


[7/28/2022 1:18 AM] szybet
everything works perfectly now


[7/28/2022 1:19 AM] szybet
i even implemented things i didn't wanted and now I regret


[7/28/2022 1:19 AM] tux_linux
👀


[7/28/2022 1:19 AM] szybet
but yea😅


[7/28/2022 1:19 AM] tux_linux
great


[7/28/2022 1:19 AM] tux_linux
will test it


[7/28/2022 1:19 AM] szybet
on the nia after your changes*


[7/28/2022 1:19 AM] szybet
like, you didnt touched anything but rand stopped working anyway


[7/28/2022 1:20 AM] szybet
i didn't touched the GUI at all so idk what is going on there


[7/28/2022 1:20 AM] tux_linux
```
  if(pid != -1)
  {
    kill(pid, 9);
  }
```


[7/28/2022 1:20 AM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[7/28/2022 1:20 AM] szybet
i really did this


[7/28/2022 1:20 AM] szybet
crap


[7/28/2022 1:20 AM] szybet
but look, in many places i have repaired `else`


[7/28/2022 1:20 AM] tux_linux
yes


[7/28/2022 1:20 AM] tux_linux
**consistency**


[7/28/2022 1:20 AM] tux_linux
it's ok, I will correct them


[7/28/2022 1:20 AM] tux_linux
good work


[7/28/2022 1:21 AM] szybet
you could propably write a config for clang format / use another customisable formatter to do this


[7/28/2022 1:22 AM] tux_linux
why?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-00299.png


[7/28/2022 1:22 AM] tux_linux
don't you think it's more pretty when it's equally separated? 😉


[7/28/2022 1:22 AM] tux_linux
anyway


[7/28/2022 1:22 AM] tux_linux
doesn't matter


[7/28/2022 1:23 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4E51B.png


[7/28/2022 1:23 AM] tux_linux
.


[7/28/2022 1:24 AM] szybet
no...
1. its different than in other languages, rust vibes
2. its a pointer to a variable char for example, so closer to char makes sense. and not on the middle like a star

{Reactions}
👍 

[7/28/2022 1:25 AM] szybet
ugh, done

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DB45F.png


[7/28/2022 1:26 AM] tux_linux
good


[7/28/2022 1:27 AM] tux_linux
I added it https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines#Newline_at_end_of_file

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[7/28/2022 4:02 AM] tux_linux
```
src/fbinkFunctions.cpp
127:  // TODO: Use execve() family instead of system()
130:      system("/opt/bin/fbink/fbdepth -d 8");
134:        system("/opt/bin/fbink/fbdepth -d 32");
136:        system("/opt/bin/fbink/fbdepth -d 16");

src/wifi.cpp
77:        system("/bin/wlarm_le down");
81:        system(turnOffInterface.c_str());
130:      system(wifiInterfaceUp.c_str());
133:        system("/bin/wlarm_le up");
```
I think you forgot these


[7/28/2022 4:28 AM] tux_linux
```
log("Received touch input, resetting timer", emitter);
```
Should not be there, it is useful for debugging but heavily pollutes logging since the user will touch the screen often.
What do you think?


[7/28/2022 4:29 AM] tux_linux
I pushed some new commits
https://github.com/Kobo-InkBox/inkbox-power-daemon/commits/main


[7/28/2022 8:06 AM] szybet
Yes, you can comment it. I was testing some things with it

{Reactions}
👍 

[7/28/2022 9:53 AM] ninuje
You don't need to call fbdepth if you're already using fbink, there's an api call that does the same thing (fbibk_set_fb_info or some such).


[7/28/2022 10:32 AM] szybet
Really? I looked into fbdepth to look for something but it was too complicated


[7/28/2022 10:37 AM] ninuje
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h#L1287

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h
FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/28/2022 5:21 PM] tux_linux
ipd seems to work ok, though when killed/restarted it will fail to work because you didn't ungrab the device before it was killed


[7/28/2022 5:21 PM] tux_linux
a trap method should be implemented somehow to do that


[7/28/2022 5:25 PM] szybet
wpa_supplicant / udcpc grabs the device


[7/28/2022 5:25 PM] szybet
becouse its a fork propably


[7/28/2022 5:26 PM] szybet
i will add a prevention that it will kill those processes when needed


[7/28/2022 5:26 PM] szybet
this ipd is designed to not restart at all, so its only a problem when developing it


[7/28/2022 5:26 PM] tux_linux
hm ok


[7/28/2022 5:27 PM] tux_linux
and this?


[7/28/2022 5:29 PM] szybet
I will add them, i forgot


[7/28/2022 5:30 PM] szybet
i also forgot the xorg thing


[7/28/2022 5:30 PM] tux_linux
good


[7/28/2022 5:30 PM] szybet
i will add them today / today at night

{Reactions}
👍 

[7/28/2022 5:30 PM] tux_linux
what's left to implement for 2.0?


[7/28/2022 5:30 PM] tux_linux
apart from ipd


[7/28/2022 5:32 PM] ninuje
CLOEXEC fds


[7/28/2022 5:33 PM] tux_linux
for event0? Well, would be useful but it's not our fault, it's wpa_supplicant + udhcpc that grab it too


[7/28/2022 5:33 PM] ninuje
They don't


[7/28/2022 5:33 PM] tux_linux
then, how do you explain that it didn't work before killing them and it worked after that?


[7/28/2022 5:34 PM] ninuje
They're spawned by something that does which fails to use CLOEXEC for its open calls


[7/28/2022 5:35 PM] tux_linux
so like that?
```
int fd = open("/dev/input/event0", O_RDONLY | O_NONBLOCK | O_CLOEXEC);
```


[7/28/2022 5:35 PM] ninuje
Yup


[7/28/2022 5:36 PM] ninuje
It's supported by every Kobo kernel, you just need to be careful if you plan to support Kindle < 4


[7/28/2022 5:36 PM] tux_linux
KT is fine?


[7/28/2022 5:38 PM] szybet
what? i dont understand anythuing


[7/28/2022 5:38 PM] ninuje
Yup, KT it s fine

{Reactions}
👍 

[7/28/2022 5:38 PM] ninuje
man fork will explain ;)


[7/28/2022 5:41 PM] tux_linux
well... it works


[7/28/2022 5:42 PM] szybet
fix xorg freezes
wifi gui ( i want this, I will do this )
you wanted to implement a thing to increase p3 size, i dont remember
and the reader. Implement a way to show enough text that the scroll bar isin't needed, and save entire sentences instead of words


[7/28/2022 5:42 PM] szybet
also reader implement images for epub


[7/28/2022 5:42 PM] tux_linux
1. ok
2. wdym exactly
3. no
4. ok, you do it


[7/28/2022 5:43 PM] tux_linux
this will not be easy


[7/28/2022 5:44 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/7ab116d1895f14b7b2d35c47edf397115bf85855


[7/28/2022 5:44 PM] szybet
2 save passwords encrypted with a master password, and show informations from `iwlist eth0 scan`, also deep scan and other things


[7/28/2022 5:45 PM] tux_linux
iwlist eth0 scan doesn't work on the glo hd, fwiw


[7/28/2022 5:45 PM] szybet
as you will test ipd on other devices, can you test if `iwlist eth0 scan` works on other devices?


[7/28/2022 5:45 PM] szybet
do you have an alternative?


[7/28/2022 5:45 PM] tux_linux
it works on every other device supported by wi-fi


[7/28/2022 5:45 PM] tux_linux
`wlarm_le escanresults | grep -w "SSID:" | cut -d '"' -f2`


[7/28/2022 5:46 PM] tux_linux
I use `scanning` for iwlist btw
`iwlist "${WIFI_DEV}" scanning | grep -o '".*"' | sed 's/"//g' | sed '/^[[:space:]]*$/d'`


[7/28/2022 5:46 PM] szybet
does this work on all devices, does this show mac addresses, signal strenght of wifi's?


[7/28/2022 5:46 PM] tux_linux
cf. `/usr/local/bin/wifi/list_networks.sh`


[7/28/2022 5:46 PM] tux_linux
maybe, but it only works with CyberTAN chip


[7/28/2022 5:46 PM] szybet
i only lists out ssid's


[7/28/2022 5:46 PM] tux_linux
i.e. not the Nia


[7/28/2022 5:47 PM] tux_linux
it cuts a lot of info


[7/28/2022 5:47 PM] szybet
can i edit it in a way to get macs and signal strenght on all devices?


[7/28/2022 5:47 PM] tux_linux
example for wlarm_le

{Attachments}
/mnt/data/projects/git/conversations/media/message-D5482.txt


[7/28/2022 5:49 PM] szybet
i will use `iwlist eth0 scanning` for advanced features, and if you want you can implement the second thing wlarm_le for other devices


[7/28/2022 5:50 PM] tux_linux
You do it, fine
I would just want one thing to stay on your mind: https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[7/28/2022 5:50 PM] szybet
don't touch my code until i say "it looking good now" 😄


[7/28/2022 5:51 PM] tux_linux
There was so much inconsistency in ipd or in the Qt part of ipd I was wondering how it was not easier to just have the same guidelines everywhere instead of randomly switching of case at random places


[7/28/2022 5:52 PM] szybet
clang-format / qt creator


[7/28/2022 5:52 PM] szybet
¯\_(ツ)_/¯


[7/28/2022 5:52 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FE389.png


[7/28/2022 5:52 PM] szybet
you use MuPDF for pdfs and epubs right?


[7/28/2022 5:52 PM] tux_linux
yes


[7/28/2022 5:52 PM] szybet
now we know it


[7/28/2022 5:52 PM] szybet
how bad is it


[7/28/2022 5:52 PM] tux_linux
it is good


[7/28/2022 5:53 PM] tux_linux
would help if it was not a script and I could just access the library directly


[7/28/2022 5:53 PM] tux_linux
but it's acceptable


[7/28/2022 5:53 PM] szybet
why then


[7/28/2022 5:53 PM] szybet
what


[7/28/2022 5:53 PM] tux_linux
because mupdf strips out images in the first place iirc


[7/28/2022 5:53 PM] tux_linux
i think


[7/28/2022 5:53 PM] szybet
why


[7/28/2022 5:53 PM] tux_linux
or something else


[7/28/2022 5:53 PM] szybet
this looks to me as pain to use


[7/28/2022 5:53 PM] szybet
why not pure library?


[7/28/2022 5:53 PM] tux_linux
I launch external processes, would like to change that


[7/28/2022 5:54 PM] tux_linux
It's difficult to compile


[7/28/2022 5:54 PM] szybet
plato has a script for that


[7/28/2022 5:54 PM] tux_linux
I compiled it in June 2021, couldn't even compile the whole program, parts of it weren't willing to


[7/28/2022 5:54 PM] szybet
~~steal it~~


[7/28/2022 5:54 PM] tux_linux
At least I got `mutool convert` which is the most important part


[7/28/2022 5:55 PM] tux_linux
what script are you talking about?


[7/28/2022 5:55 PM] tux_linux
oh, one other thing, mutool is buried in the gui rootfs which isn't updatable unless you reflash a system image


[7/28/2022 5:55 PM] tux_linux
i should probably add that in the update script


[7/28/2022 5:55 PM] tux_linux
but the damage is already done


[7/28/2022 5:56 PM] szybet
put mutool in gui bundle, and dont add it in rootfs in never images


[7/28/2022 5:57 PM] szybet
some space is wasted, but its repaired


[7/28/2022 5:58 PM] szybet
is there a way to write one implementation for all txt, pdf and epub?


[7/28/2022 5:59 PM] tux_linux
mutool only supports pdf + epub
so you aren't starting out well


[7/28/2022 5:59 PM] tux_linux
but yes, a good part of the reader framework would need to be completely rewritten


[7/28/2022 5:59 PM] szybet
i will start from scratch propably


[7/28/2022 5:59 PM] tux_linux
no


[7/28/2022 5:59 PM] tux_linux
the UI is good


[7/28/2022 5:59 PM] tux_linux
some of the backend is not good


[7/28/2022 6:00 PM] tux_linux
but still


[7/28/2022 6:00 PM] szybet
ui will be the same


[7/28/2022 6:00 PM] szybet
only the text


[7/28/2022 6:00 PM] tux_linux
`setup_book`?


[7/28/2022 6:00 PM] tux_linux
that's the main function related to parsing


[7/28/2022 6:00 PM] szybet
idk, haven't looked into it


[7/28/2022 6:01 PM] szybet
the .ui file will be the same for sure ;p

{Reactions}
👍 

[7/28/2022 6:20 PM] tux_linux
we forgot that some devices don't have a frontlight (I'm implementing a fix)


[7/28/2022 6:20 PM] tux_linux
```
Thu Jul 28 12:19:39 2022 | functions: Couldn't read config file: /sys/class/backlight/mxc_msp430.0/actual_brightness
terminate called after throwing an instance of 'std::invalid_argument'
  what():  stoi
```


[7/28/2022 6:20 PM] tux_linux
on Touch B


[7/28/2022 6:21 PM] tux_linux
also, maybe show a toast if user tries to suspend but charger is plugged in to inform that suspend is not possible?


[7/28/2022 8:38 PM] szybet
sure, I will add it

{Reactions}
👍 

[7/28/2022 8:38 PM] szybet
i dont have those devices


[7/28/2022 11:48 PM] szybet
@tux-linux i implemented this, but its not tested and i dont think i understanded everythinghttps://github.com/Kobo-InkBox/inkbox-power-daemon/commit/82e441b5b10c477ed3f40a12adda0e3d138e029a

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/82e441b5b10c477ed3f40a12adda0e3d138e029a
fbdepth replaced with fbink_set_fb_info · Kobo-InkBox/inkbox-power-...
/mnt/data/projects/git/conversations/media/82e441b5b10c477ed3f40a12adda0e3d138e029a-8C2D6


[7/28/2022 11:50 PM] tux_linux
It seems fine
What do you think @NiLuJe ?


[7/28/2022 11:50 PM] szybet
no, it doesn't seem fine


[7/28/2022 11:51 PM] szybet
i dont think bothering niluje with it is worth it, its just my lack of cpp knowledge


[7/28/2022 11:51 PM] tux_linux
well, ok, answer when you have time NiLuJe


[7/28/2022 11:52 PM] ninuje
Third arg should be `0` for 16 & 32bpp


[7/28/2022 11:53 PM] tux_linux
And 8bpp?


[7/28/2022 11:53 PM] ninuje
Depends on how you handle nightmode


[7/28/2022 11:53 PM] szybet
w h a t


[7/28/2022 11:53 PM] ninuje
fourth


[7/28/2022 11:53 PM] ninuje
my bad ;p


[7/28/2022 11:53 PM] tux_linux
with LD_PRELOAD trick


[7/28/2022 11:54 PM] ninuje
(i.e., `grayscale`)


[7/28/2022 11:54 PM] ninuje
Oh god no.


[7/28/2022 11:54 PM] ninuje
Just do it right


[7/28/2022 11:54 PM] szybet
there is a better way?


[7/28/2022 11:54 PM] tux_linux
Isn't nightmode only for 8 bpp?


[7/28/2022 11:54 PM] tux_linux
we could but not all devices are on that spec


[7/28/2022 11:54 PM] szybet
on which


[7/28/2022 11:54 PM] ninuje
Well, if you set gryascale to 2 @ 8bpp, you get nightmode for free, yeah


[7/28/2022 11:54 PM] ninuje
otherwise, you just need to pass the right flag to your refreshes


[7/28/2022 11:55 PM] tux_linux
But I also get wake-up issues on the Glo HD which duplicate the screen viewport


[7/28/2022 11:56 PM] tux_linux
It initially has to be set to 8 bpp, then 16 on X11 second start, then 8 or something, it's really strange


[7/28/2022 11:56 PM] ninuje
That's a depth issue, you've got something switching depth behind your back


[7/28/2022 11:57 PM] ninuje
speaking of: check the return value of set_fb_info (compiler will shout at you if you don't anyway)


[7/28/2022 11:57 PM] szybet
xorg.


[7/28/2022 11:58 PM] szybet
i know. for now its for testing


[7/28/2022 11:58 PM] szybet
@tux-linux you compiled xorg for inkbox, right?


[7/28/2022 11:58 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/2db8044cd8c50b0476b0d9b489f57959967fd792/etc/init.d/xorg.sh#L88-L98

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/2db8044cd8c50b0476b0d9b489f57959967fd792/etc/init.d/xorg.sh
rootfs/xorg.sh at 2db8044cd8c50b0476b0d9b489f57959967fd792 · Kobo-I...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-FC9AB


[7/28/2022 11:58 PM] tux_linux
it came from Alpine pkgs


[7/28/2022 11:58 PM] szybet
what about compiling it yourself


[7/28/2022 11:58 PM] szybet
and looking for those weird ioctls that are causing issues?


[7/28/2022 11:59 PM] tux_linux
x11 root is not updgradable


[7/28/2022 11:59 PM] szybet
new image?


[7/28/2022 11:59 PM] tux_linux
maybe


[7/28/2022 11:59 PM] ninuje
nitpick: you're the only one using the weird-ass model numbers, it makes it extremely confusing to grok the device checks, because nobody besides ebay knows those ;p


[7/28/2022 11:59 PM] tux_linux
n437 is Glo HD


[7/29/2022 12:00 AM] tux_linux
and kt is obviously Kindle Touch


[7/29/2022 12:00 AM] szybet
for now there are not many inkbox users, lets fix xorg once and good


[7/29/2022 12:00 AM] tux_linux
mind also compiling a whole musl root from scratch with recent libs?


[7/29/2022 12:01 AM] szybet
no? n306 is on the kobo nia front writed where usb and power button is
like explain why fbink uses for the nia 38* something


[7/29/2022 12:01 AM] szybet
why would this be needed


[7/29/2022 12:01 AM] tux_linux
well, recent packages are better


[7/29/2022 12:01 AM] szybet
well, xorg isint updated anyway


[7/29/2022 12:01 AM] tux_linux
because of 2.6.35.3 kernels, InkBox main root and Xorg root is stuck at 2019


[7/29/2022 12:01 AM] ninuje
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h#L209-L236

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h
FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/29/2022 12:02 AM] tux_linux
then what did you mean before


[7/29/2022 12:02 AM] ninuje
So nobody has to handle the pain of figuring this shit out ;p


[7/29/2022 12:02 AM] szybet
editing / recompiling xorg?


[7/29/2022 12:02 AM] szybet
why nia is 382U


[7/29/2022 12:02 AM] szybet
explain


[7/29/2022 12:02 AM] tux_linux
yes but for that we need to upgrade the xorg root


[7/29/2022 12:02 AM] szybet
new image


[7/29/2022 12:02 AM] tux_linux
so while we are at it...


[7/29/2022 12:03 AM] ninuje
Because that's what Kobo uses to programmatically identify devices


[7/29/2022 12:04 AM] ninuje
Based on the NTX PCB id


[7/29/2022 12:04 AM] szybet
dont you think using what is writed on the case is better :D?


[7/29/2022 12:04 AM] ninuje
Not that we should care about the internal implementation


[7/29/2022 12:05 AM] ninuje
What matters is you get that value in FBInkState's device_id field, and you have named constants with sane names to match it


[7/29/2022 12:06 AM] ninuje
You're essentially reinventing the wheel in a way that makes stuff harder to read


[7/29/2022 12:07 AM] ninuje
You basically have two choices: either go with the internal device codes like I mentioned


[7/29/2022 12:07 AM] ninuje
Or what /bin/kobo_id.sh spits out


[7/29/2022 12:07 AM] ninuje
Everything else is madness


[7/29/2022 12:07 AM] tux_linux
I have been using that since march 2021


[7/29/2022 12:07 AM] tux_linux
And nobody complained


[7/29/2022 12:07 AM] tux_linux
until today


[7/29/2022 12:07 AM] ninuje
I know, it's been driving me mad ever since 😄

{Reactions}
😆 👍 

[7/29/2022 12:07 AM] tux_linux
`/bin/kobo_config.sh`


[7/29/2022 12:07 AM] ninuje
Yeah, that ;p


[7/29/2022 12:08 AM] tux_linux
honestly, I just find it's even more confusing


[7/29/2022 12:08 AM] ninuje
It's the codenames, IIRC?


[7/29/2022 12:08 AM] tux_linux
plus, `trilogy` is three (different) devices


[7/29/2022 12:08 AM] ninuje
Which, yeah, aren't great


[7/29/2022 12:08 AM] szybet
i wouldn't care if there was defines KOBO_NIA n306


[7/29/2022 12:08 AM] szybet
¯\_(ツ)_/¯


[7/29/2022 12:08 AM] ninuje
Hence internal device codes


[7/29/2022 12:08 AM] szybet
both is good


[7/29/2022 12:08 AM] ninuje
Yeah, I mean, that works, too, I'm not advocating for the internal imp, I just want the code to read sane


[7/29/2022 12:09 AM] ninuje
Because nobody fucking knows what those point to 😉


[7/29/2022 12:09 AM] tux_linux
What does Plato use to identify the device?


[7/29/2022 12:09 AM] tux_linux
or KOReader


[7/29/2022 12:09 AM] ninuje
That ;p


[7/29/2022 12:09 AM] szybet
plato uses n306 and others


[7/29/2022 12:09 AM] tux_linux
well, ok, I guess it's a bit more high-level than InkBox is


[7/29/2022 12:09 AM] szybet
i remember that, propably?


[7/29/2022 12:09 AM] tux_linux
Don't need to worry about hardware quirks that much


[7/29/2022 12:10 AM] ninuje
https://github.com/koreader/koreader/blob/ed34a3078ee208795a5b7f7579a8b29b2d4505f7/frontend/device/kobo/device.lua#L807-L817

{Embed}
https://github.com/koreader/koreader/blob/ed34a3078ee208795a5b7f7579a8b29b2d4505f7/frontend/device/kobo/device.lua
koreader/device.lua at ed34a3078ee208795a5b7f7579a8b29b2d4505f7 · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at ed34a3078ee208795a5b7f...
/mnt/data/projects/git/conversations/media/koreader-44742


[7/29/2022 12:10 AM] tux_linux
you never had a time when using only the device codename was insufficient?


[7/29/2022 12:11 AM] ninuje
Trilogy needs finer-grained id's, but that's it


[7/29/2022 12:11 AM] ninuje
And nobody gives a fuck about trilogy in 2022 ;o)


[7/29/2022 12:11 AM] tux_linux
Except us


[7/29/2022 12:11 AM] tux_linux
- yay -


[7/29/2022 12:11 AM] szybet
what is trilogy?


[7/29/2022 12:12 AM] tux_linux
touch a, b, c


[7/29/2022 12:12 AM] ninuje
I do discriminate the three in FBink, FWIW

{Reactions}
👍 

[7/29/2022 12:12 AM] szybet
o


[7/29/2022 12:12 AM] szybet
k


[7/29/2022 12:12 AM] ninuje
Well, A/B and C


[7/29/2022 12:12 AM] ninuje
Which is mostly what matters for touchscreen shenanigans


[7/29/2022 12:13 AM] tux_linux
Even more important here: if we upgrade U-Boot or the kernel, knowing the exact device ID is crucial


[7/29/2022 12:13 AM] ninuje
(What's interesting in that approach on stock is that `PRODUCT` is exported by rcS, but that's less relevant in your case)


[7/29/2022 12:13 AM] tux_linux
yeah


[7/29/2022 12:14 AM] tux_linux
you really do that?
https://github.com/koreader/koreader/blob/ed34a3078ee208795a5b7f7579a8b29b2d4505f7/frontend/device/kobo/device.lua#L1097-L1098

{Embed}
https://github.com/koreader/koreader/blob/ed34a3078ee208795a5b7f7579a8b29b2d4505f7/frontend/device/kobo/device.lua
koreader/device.lua at ed34a3078ee208795a5b7f7579a8b29b2d4505f7 · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at ed34a3078ee208795a5b7f...
/mnt/data/projects/git/conversations/media/koreader-44742


[7/29/2022 12:14 AM] tux_linux
`poweroff -f` is a bit... brutal


[7/29/2022 12:14 AM] szybet
dont upgrade uboot when not needed pls


[7/29/2022 12:14 AM] ninuje
s'what nickel does

{Reactions}
😮 

[7/29/2022 12:15 AM] ninuje
And there's very few differences with the sane approach on stock, because there's no sysv scripts to speak of


[7/29/2022 12:15 AM] tux_linux
We do a ... lot before shutting down here
https://github.com/Kobo-InkBox/rootfs/blob/master/sbin/prepare_shutdown


[7/29/2022 12:15 AM] ninuje
so init doesn't have anything to kill anyway


[7/29/2022 12:15 AM] tux_linux
not even an `rcK`?


[7/29/2022 12:15 AM] ninuje
That's sent after a config flush in KOReader, which is all that matters

{Reactions}
👍 

[7/29/2022 12:16 AM] ninuje
I don't recall one, so if there's one it's pretty boring ;p

{Reactions}
👍 

[7/29/2022 12:16 AM] ninuje
But yeah, definitely don't do that on a more complex init system 😉

{Reactions}
👍 

[7/29/2022 12:17 AM] tux_linux
Actually we use busybox as the init system but we run OpenRC inside a chroot


[7/29/2022 12:17 AM] tux_linux
So we stop services manually


[7/29/2022 12:17 AM] tux_linux
... yeah


[7/29/2022 12:17 AM] ninuje
I would check that there aren't any weird-ass issues with devices not actually going to shutdown, but I suspect that if anytyhing had issues like that, those would date to the original Kobo Wifi


[7/29/2022 12:17 AM] tux_linux
It happens


[7/29/2022 12:17 AM] tux_linux
There, `poweroff -f` is the best friend


[7/29/2022 12:18 AM] tux_linux
Usually due to a Wi-Fi module quirk, or QEMU things in the emulator


[7/29/2022 12:19 AM] ninuje
Re: device codes, Plato, too: https://github.com/baskerville/plato/blob/12f17aedfbcb803263d6d948b325c27ecc4739ae/src/device.rs#L84-L196

{Embed}
https://github.com/baskerville/plato/blob/12f17aedfbcb803263d6d948b325c27ecc4739ae/src/device.rs
plato/device.rs at 12f17aedfbcb803263d6d948b325c27ecc4739ae · baske...
Document reader. Contribute to baskerville/plato development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/plato-FB863


[7/29/2022 12:19 AM] szybet
my memory is... bad


[7/29/2022 12:19 AM] tux_linux
ok, interesting
but I still find using `n*` codes is better 😉


[7/29/2022 12:20 AM] ninuje
codename + id discrimination where needed


[7/29/2022 12:20 AM] ninuje
And, no, I don't necessarily remember which codename is which device either ;p


[7/29/2022 12:20 AM] ninuje
WHile I somehow can for Kindles, but, admittedly, they have much better codenames


[7/29/2022 12:20 AM] ninuje
;p


[7/29/2022 12:21 AM] tux_linux
I only recall `wario` and `yoshi`


[7/29/2022 12:21 AM] ninuje
https://github.com/NiLuJe/KindleTool/blob/ad7300390b0e641d2d6c158f1bd7109bedb14425/KindleTool/kindle_tool.h#L330-L402

{Embed}
https://github.com/NiLuJe/KindleTool/blob/ad7300390b0e641d2d6c158f1bd7109bedb14425/KindleTool/kindle_tool.h
KindleTool/kindle_tool.h at ad7300390b0e641d2d6c158f1bd7109bedb1442...
A tool for creating & extracting Kindle updates and more - KindleTool/kindle_tool.h at ad7300390b0e641d2d6c158f1bd7109bedb14425 · NiLuJe/KindleTool
/mnt/data/projects/git/conversations/media/KindleTool-9ABAC

{Reactions}
👍 

[7/29/2022 12:22 AM] szybet
@tux-linux as i remember for now, can you update the user apps documentation that the main binary should be named just as the app name? that the power daemon can put it to sleep


[7/29/2022 12:22 AM] ninuje
You can fake the name if necessary


[7/29/2022 12:22 AM] tux_linux
yes


[7/29/2022 12:22 AM] tux_linux
can you correct the fbdepth thing too?


[7/29/2022 12:22 AM] ninuje
c.f., https://github.com/NiLuJe/kfmon/blob/82bdb1ef050e68365f172aab7384e67d19a9727d/utils/shim.c#L51-L61

{Embed}
https://github.com/NiLuJe/kfmon/blob/82bdb1ef050e68365f172aab7384e67d19a9727d/utils/shim.c
kfmon/shim.c at 82bdb1ef050e68365f172aab7384e67d19a9727d · NiLuJe/k...
Kute File Monitor, an inotify-based Launcher for Kobo devices - kfmon/shim.c at 82bdb1ef050e68365f172aab7384e67d19a9727d · NiLuJe/kfmon
/mnt/data/projects/git/conversations/media/kfmon-32980


[7/29/2022 12:23 AM] szybet
well... its only one argument, change it and then test it, if everything works i can implement error logging

{Reactions}
👍 

[7/29/2022 12:25 AM] tux_linux
will freezing a script that launched a binary freeze the binary itself?


[7/29/2022 12:25 AM] ninuje
What do you mean by freeze?


[7/29/2022 12:25 AM] tux_linux
`kill -STOP`


[7/29/2022 12:25 AM] ninuje
Nope

{Reactions}
👍 

[7/29/2022 12:25 AM] ninuje
Unless you send that to the process group


[7/29/2022 12:26 AM] szybet
or search for childs


[7/29/2022 12:26 AM] ninuje
It's a fun way to create zombies if the child dies and you forget to CONTINUE the parent, though


[7/29/2022 12:26 AM] ninuje
;o)


[7/29/2022 12:26 AM] szybet
no more zombies.

{Reactions}
😆 

[7/29/2022 12:29 AM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps#app-bin
done

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
Index.php


[7/29/2022 12:37 AM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/75dbf8e774b2cfc482916fc5451917a998a4f645

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/75dbf8e774b2cfc482916fc5451917a998a4f645
fix xorg, avoid unneceserry exits, replace all system() · Kobo-InkB...
/mnt/data/projects/git/conversations/media/75dbf8e774b2cfc482916fc5451917a998a4f645-7E7FF


[7/29/2022 12:37 AM] szybet
god what is formatting my code


[7/29/2022 12:37 AM] szybet
i disabled everything


[7/29/2022 12:39 AM] tux_linux
i said no clang-format


[7/29/2022 12:39 AM] tux_linux
wasn't that clear enough


[7/29/2022 12:40 AM] tux_linux
oh


[7/29/2022 12:40 AM] tux_linux
well check again?


[7/29/2022 12:40 AM] szybet
and only half of the file was formatted


[7/29/2022 12:40 AM] szybet
;_ ;


[7/29/2022 12:40 AM] tux_linux
why did you comment EXIT_FAILURE?


[7/29/2022 12:42 AM] szybet
unnecessary

{Reactions}
👍 

[7/29/2022 12:44 AM] tux_linux
did you add it?


[7/29/2022 12:44 AM] szybet
there aren't many of them, really

{Reactions}
👀 

[7/29/2022 12:45 AM] szybet
i was adding includes with my head? english bad


[7/29/2022 12:45 AM] szybet
i dont think touching includes now is a good idea


[7/29/2022 12:45 AM] szybet
for example, in prepareSleep if ctime isint included rand doesn't work sometimes, but ctime isin't used


[7/29/2022 12:46 AM] szybet
if you really want it, leave it for now, if everything is finished and works then we can try to clean it


[7/29/2022 12:47 AM] tux_linux
yes it is


[7/29/2022 12:47 AM] szybet
not now


[7/29/2022 12:47 AM] tux_linux
doesn't that add fat to the binary?


[7/29/2022 12:47 AM] szybet
i dont think so


[7/29/2022 12:47 AM] ninuje
Not with any compiler worth its salt

{Reactions}
👍 

[7/29/2022 12:47 AM] ninuje
Only affects compile time


[7/29/2022 12:48 AM] ninuje
Barring broken includes or broken include combinations


[7/29/2022 12:48 AM] szybet
90% of them are duplicates from other files so it doesnt effect binary size


[7/29/2022 12:48 AM] ninuje
And assuming said includes are actually headers, and not header-only libraries 😉

{Reactions}
👍 

[7/29/2022 12:49 AM] ninuje
Or plain code, because chaining compile units via includes is a cheap-ass way of faking LTO (c.f., SQLite's amalgam build)


[7/29/2022 12:51 AM] tux_linux
because... you are never using this, prove me wrong
```
src/goingSleep.cpp
9:#include <mtd/mtd-user.h>

src/afterSleep.cpp
15:#include <mtd/mtd-user.h>
```


[7/29/2022 12:52 AM] szybet
maybe, most propably


[7/29/2022 12:52 AM] szybet
but i wont develop ipd if you remove them now


[7/29/2022 12:52 AM] szybet
i won't think if thats becouse of me, becouse of bad code or becouse of magic headers


[7/29/2022 12:52 AM] szybet
donttttttttt


[7/29/2022 12:53 AM] tux_linux
ok, but you have to promise me one thing


[7/29/2022 12:53 AM] tux_linux
how to spell because: bec**a**use


[7/29/2022 12:54 AM] tux_linux
😉


[7/29/2022 12:54 AM] szybet
😂


[7/29/2022 12:54 AM] szybet
i was close

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-20631.png


[7/29/2022 12:55 AM] tux_linux
yeah but
I mean
you have been working with me in InkBox for 6 months
I have probably written 'because' a hundred times


[7/29/2022 12:56 AM] szybet
i have problems with words that sound diffrent, are writed diffrent and are hard to pronounce correct


[7/29/2022 12:56 AM] szybet
leanguage


[7/29/2022 12:56 AM] szybet
for example


[7/29/2022 12:56 AM] tux_linux
hm hm


[7/29/2022 12:57 AM] tux_linux
well, ok
but because is the worst


[7/29/2022 12:57 AM] szybet
correct me till i will remember it correctly

{Reactions}
👍 

[7/29/2022 12:57 AM] szybet
¯\_(ツ)_/¯


[7/29/2022 1:05 AM] szybet
how do i create tmpfs from ipd?
```
system("mkdir /mnt/ram");
system("mount -t ramfs -o size=20m ramfs /mnt/ram");
```
first 3 results on google are doing this


[7/29/2022 1:05 AM] tux_linux
nonsense


[7/29/2022 1:05 AM] tux_linux
`mount()` syscall


[7/29/2022 1:06 AM] szybet
https://gist.github.com/gcmurphy/c4c5222075d8e501d7d1

{Embed}
https://gist.github.com/gcmurphy/c4c5222075d8e501d7d1
Create tmpfs mountpoint in c.
Create tmpfs mountpoint in c. . GitHub Gist: instantly share code, notes, and snippets.
/mnt/data/projects/git/conversations/media/gist-og-image-17482.png


[7/29/2022 1:06 AM] szybet
ok, there is something


[7/29/2022 1:06 AM] tux_linux
https://man7.org/linux/man-pages/man2/mount.2.html


[7/29/2022 1:06 AM] tux_linux
use `mkdir()` first


[7/29/2022 1:07 AM] tux_linux
or whatever that creates a dir in c++


[7/29/2022 1:07 AM] szybet
experimental::filesystem::create_directory


[7/29/2022 1:07 AM] tux_linux
why do you want to do that?


[7/29/2022 1:07 AM] szybet
🥴


[7/29/2022 1:07 AM] tux_linux
mount() is easy


[7/29/2022 1:07 AM] szybet
fifo? sleep call file?


[7/29/2022 1:07 AM] tux_linux
oh ok


[7/29/2022 1:07 AM] szybet
so /run/ipd/


[7/29/2022 1:08 AM] tux_linux
https://github.com/Kobo-InkBox/unshare-inkbox/blob/045d8e0fceb788e425000b0e6eca66e940a3bd6b/unshare.c#L52
to mount proc, easy


[7/29/2022 1:08 AM] szybet
do i need to care about /kobo?


[7/29/2022 1:08 AM] tux_linux
do not


[7/29/2022 1:08 AM] tux_linux
never do


[7/29/2022 1:08 AM] szybet
yay


[7/29/2022 1:08 AM] tux_linux
fifo is already bind-mounted


[7/29/2022 1:08 AM] tux_linux
check `inkbox_gui` or `/kobo/dev/ipd/fifo`


[7/29/2022 1:09 AM] szybet
its bind mounted in inkbox_gui?


[7/29/2022 1:09 AM] tux_linux
yes


[7/29/2022 1:09 AM] szybet
add things like that to docs when you do it


[7/29/2022 1:09 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/2db8044cd8c50b0476b0d9b489f57959967fd792/etc/init.d/inkbox_gui#L75


[7/29/2022 1:10 AM] szybet
bec**au**se then i can't find where leds are managed for example

{Reactions}
👍 

[7/29/2022 1:10 AM] szybet
also i will add the doc to the repo as .md


[7/29/2022 1:10 AM] tux_linux
learn wikicode


[7/29/2022 1:10 AM] szybet
never


[7/29/2022 1:10 AM] tux_linux
or use https://pandoc.org/


[7/29/2022 1:11 AM] szybet
sure


[7/29/2022 1:27 AM] tux_linux
i pushed that, so don't forget to pull to avoid a merge: https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/64edafe0049c035bf05844eb5f5c55d15ea13d42


[7/29/2022 3:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220729_151957-D739B.jpg


[7/29/2022 3:20 PM] szybet
I buyed the whole screen


[7/29/2022 3:20 PM] szybet
I **will** use the whole screen


[7/29/2022 4:45 PM] tux_linux
You aren't consistent with the rest of the settings


[7/29/2022 4:46 PM] szybet
no, the rest of the settings aren't consistent to my settings
in other words, in my opinion other settings are too small


[7/29/2022 4:47 PM] szybet
those small checkboxes are for real or you didn't checked them? they have 5x5 pixels on the nia, i can barely see them


[7/29/2022 4:47 PM] tux_linux
They might be, but this will be a disaster on 600x800 devices


[7/29/2022 4:47 PM] szybet
thats why i added a isN306


[7/29/2022 4:48 PM] szybet
check there, you need to adjust that


[7/29/2022 4:48 PM] szybet
main settings also need a redesign, but that for very later


[7/29/2022 4:48 PM] tux_linux
Use deviceID
Those variables are not reliable


[7/29/2022 4:48 PM] szybet
then delete them...


[7/29/2022 4:49 PM] tux_linux
why do you think every recent commit of inkbox use deviceID


[7/29/2022 4:50 PM] szybet
i have no idea, those bools were cool ;/


[7/29/2022 4:50 PM] tux_linux
How did you scale the checkboxes


[7/29/2022 4:50 PM] szybet
`ui->wifiReconnectBtn->setStyleSheet("QCheckBox::indicator { width:50px; height: 50px; }")`


[7/29/2022 4:51 PM] szybet
i will push the commit when i finish everything


[7/29/2022 4:51 PM] tux_linux
Ok
Put everything in a qscrollarea


[7/29/2022 4:51 PM] szybet
? it is already


[7/29/2022 4:51 PM] tux_linux
No?


[7/29/2022 4:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A3EEA.png


[7/29/2022 4:52 PM] szybet
Yes?.


[7/29/2022 4:52 PM] tux_linux
Oh ok


[7/29/2022 4:52 PM] szybet
I though about it from the beggining


[7/29/2022 4:52 PM] tux_linux
Then delete everything related to cuscus checkboxes stylesheets in your code


[7/29/2022 4:53 PM] tux_linux
These things will go in the rootfs


[7/29/2022 4:53 PM] szybet
i dont understand?


[7/29/2022 4:53 PM] tux_linux
`/usr/local/share/inkbox/stylesheets`


[7/29/2022 4:53 PM] tux_linux
Look by yourself


[7/29/2022 4:53 PM] szybet
this makes sense


[7/29/2022 4:54 PM] szybet
i will comment it then, you can make it later


[7/29/2022 4:55 PM] tux_linux
Check qcheckbox things in eink-768x1024.qss and send a patch
git diff HEAD


[7/29/2022 4:55 PM] szybet
can't i just make a symbolic link from `/run/ipd` to /data/config/20-powerDaemmon/communication?


[7/29/2022 4:56 PM] tux_linux
Daemon


[7/29/2022 4:56 PM] szybet
i know


[7/29/2022 4:56 PM] tux_linux
You will get problems with bind mounts


[7/29/2022 4:56 PM] tux_linux
So no


[7/29/2022 4:56 PM] szybet
`symbolic link`?


[7/29/2022 4:57 PM] tux_linux
Yes, your symlink will point to something that doesn't exist in the chroot


[7/29/2022 4:57 PM] szybet
nothing in the chroot should care about it


[7/29/2022 4:57 PM] szybet
i only want inotify to catch things from the tmpfs


[7/29/2022 4:58 PM] tux_linux
Use a bind mount


[7/29/2022 4:58 PM] tux_linux
I'm not sure inotify will like named pipes


[7/29/2022 4:58 PM] tux_linux
Maybe it will read them before you can


[7/29/2022 4:58 PM] tux_linux
idk


[7/29/2022 4:59 PM] szybet
its not about named pipes


[7/29/2022 4:59 PM] szybet
its about deepSleep


[7/29/2022 4:59 PM] tux_linux
Yes but it will care about communication anyway


[7/29/2022 4:59 PM] szybet
inotify doesnt work that way, i will just ignore it


[7/29/2022 4:59 PM] szybet
in inotify i get calls of what happened to a file


[7/29/2022 4:59 PM] szybet
and i filter it


[7/29/2022 5:00 PM] tux_linux
Yeah I guess


[7/29/2022 5:00 PM] szybet
i should also bind mount it from the ipd binary?


[7/29/2022 5:00 PM] tux_linux
But first try to determine if deep sleep is of any usefulness or if we are doing this for nothing


[7/29/2022 5:01 PM] tux_linux
No
Tell me where and from where


[7/29/2022 5:01 PM] tux_linux
And when


[7/29/2022 5:02 PM] tux_linux
Have you changed anything else?


[7/29/2022 5:04 PM] szybet
I already said it does do a diffrence for the nia

I want this feature anyway, in the feature we can try sleeping to disk for example, disable the led usage completly,


[7/29/2022 5:05 PM] tux_linux
Ok
And this


[7/29/2022 5:06 PM] szybet
yes, + - button sizes, cinematic brightness redesign with .ms and limits

{Reactions}
👍 

[7/29/2022 5:06 PM] tux_linux
Do not change the font size
Ever

You should add an idle sleep checkbox


[7/29/2022 5:07 PM] tux_linux
It's a pain to disable


[7/29/2022 5:08 PM] szybet
i dont

i will do that - and + after some seconds will decrease 3 instead of 1


[7/29/2022 5:08 PM] tux_linux
Hmm ok


[7/29/2022 5:16 PM] tux_linux
.


[7/29/2022 5:17 PM] szybet
and i have done it?


[7/29/2022 5:17 PM] tux_linux
Do you remove every newline


[7/29/2022 5:17 PM] tux_linux
Except for paragraph breaks


[7/29/2022 5:18 PM] szybet
propably? i dont remeber


[7/29/2022 5:18 PM] szybet
my memory says that everything works


[7/29/2022 5:19 PM] tux_linux
It isn't right


[7/29/2022 5:20 PM] szybet
i repaired it


[7/29/2022 5:20 PM] szybet
i will check it in the next days


[7/29/2022 5:20 PM] szybet
just weird


[7/29/2022 5:21 PM] szybet
if i worked on something in rust and it doesnt worked than i simply forgot about it


[7/29/2022 6:06 PM] szybet (pinned)
```
void quit::emulatePowerButtonInputEvent() {
    log("Emulating power button input event", className);
    // Input event
    struct input_event inputEvent = {};
    inputEvent.type = EV_KEY;
    inputEvent.code = KEY_POWER;
    // SYN report event
    struct input_event synReportEvent = {};
    synReportEvent.type = EV_SYN;
    synReportEvent.code = SYN_REPORT;
    synReportEvent.value = 0;

    int fd = open("/dev/input/event0", O_WRONLY);
    if(fd != -1) {
        // Send press event
        inputEvent.value = 1;
        ::write(fd, &inputEvent, sizeof(inputEvent));

        // Send SYN report event
        ::write(fd, &synReportEvent, sizeof(synReportEvent));

        // Some sleep
        QThread::msleep(50);

        // Send release event
        inputEvent.value = 0;
        ::write(fd, &inputEvent, sizeof(inputEvent));
        ::write(fd, &synReportEvent, sizeof(synReportEvent));

        ::close(fd);
    }
    else {
        QString function = __func__; log(function + ": Failed to open input device node at '/dev/input/event0'", className);
    }
}
```
complicated.
and i have a bad informations for you


[7/29/2022 6:06 PM] szybet
the device is grabbed


[7/29/2022 6:06 PM] tux_linux
oh crap


[7/29/2022 6:07 PM] szybet
can i use sleepCall?


[7/29/2022 6:07 PM] szybet
for this


[7/29/2022 6:07 PM] tux_linux
yes in tmpfs


[7/29/2022 6:07 PM] szybet
i create a 7K tmpfs


[7/29/2022 6:07 PM] tux_linux
Pinned a message.


[7/29/2022 6:07 PM] tux_linux
good


[7/29/2022 6:07 PM] szybet
and attach another inotify to it


[7/29/2022 6:07 PM] tux_linux
but only one file will fit


[7/29/2022 6:07 PM] tux_linux
you should do 8k


[7/29/2022 6:07 PM] szybet
no


[7/29/2022 6:07 PM] tux_linux
one file is 4k


[7/29/2022 6:07 PM] tux_linux
even if it's empty


[7/29/2022 6:07 PM] szybet
its 1K


[7/29/2022 6:07 PM] tux_linux
because... reasons


[7/29/2022 6:08 PM] tux_linux
i pinned the power button code, we might need it in the future


[7/29/2022 6:08 PM] szybet
```
kobo:/# echo randomfilestringthisisyea > randomfilewithonelongstring
kobo:/# du -h randomfilewithonelongstring
1.0K    randomfilewithonelongstring
kobo:/# 

```


[7/29/2022 6:08 PM] tux_linux
oh, maybe I'm mixing that up with dirs


[7/29/2022 6:08 PM] szybet
yes, for a fbink based mouse


[7/29/2022 6:08 PM] tux_linux
they have a 4k size


[7/29/2022 6:09 PM] tux_linux
emu?


[7/29/2022 6:09 PM] szybet
```
kobo:/# mkdir randomdiritis
kobo:/# du -h random
du: cannot access 'random': No such file or directory
kobo:/# du -h randomdiritis/
1.0K    randomdiritis/
kobo:/# 

```


[7/29/2022 6:09 PM] szybet
no, mouse


[7/29/2022 6:09 PM] szybet
;p


[7/29/2022 6:09 PM] tux_linux
```
4.0K drwxr-xr-x 2 nicolas nicolas 4.0K Jul 29 11:32 src/
```


[7/29/2022 6:09 PM] szybet
im checking it on the ereader


[7/29/2022 6:09 PM] tux_linux
do `ls -shal` on it


[7/29/2022 6:10 PM] szybet
```
     1 drwxr-xr-x    2 root     root        1.0K Jan 18 02:52 randomdiritis
     1 -rw-r--r--    1 root     root          26 Jan 18 02:52 randomfilewithonelongstring
```


[7/29/2022 6:10 PM] szybet
```
kobo:/# ls -shal randomdiritis/
total 2K     
     1 drwxr-xr-x    2 root     root        1.0K Jan 18 02:52 .
     1 drwxr-xr-x   27 root     root        1.0K Jan 18 02:52 ..

```


[7/29/2022 6:10 PM] tux_linux
strange


[7/29/2022 6:11 PM] tux_linux
i always got 4k on mine


[7/29/2022 6:11 PM] szybet
What went wrong


[7/29/2022 6:11 PM] tux_linux
idk


[7/29/2022 6:11 PM] tux_linux
are you in a tmpfs?


[7/29/2022 6:11 PM] tux_linux
i was in one


[7/29/2022 6:11 PM] tux_linux
maybe it's the difference


[7/29/2022 6:13 PM] szybet
```
kobo:/# cd /tmp
kobo:/tmp# mkdir randomdirintmpfs
kobo:/tmp# echo dmsajdmsakjdmsak > ranfomfile
kobo:/tmp# ls -shal
total 629K   
     0 drwxrwxrwt    3 root     root         160 Jan 18 02:56 .
     1 drwxr-xr-x   27 root     root        1.0K Jan 18 02:52 ..
     4 -rw-r--r--    1 root     root        1.4K Jan 17 21:18 PowerDaemonLogs.txt
     4 -rw-r--r--    1 root     root           6 Jan 17 21:17 boot
     4 -rw-r--r--    1 root     root         343 Jan 17 21:17 power
     0 drwxr-xr-x    2 root     root          40 Jan 18 02:56 randomdirintmpfs
     4 -rw-r--r--    1 root     root          17 Jan 18 02:56 ranfomfile
   612 -rw-r--r--    1 root     root      610.4K Jan 18 00:03 touch_event
kobo:/tmp# ls -shal ran
randomdirintmpfs/  ranfomfile
kobo:/tmp# ls -shal randomdirintmpfs/
total 0      
     0 drwxr-xr-x    2 root     root          40 Jan 18 02:56 .
     0 drwxrwxrwt    3 root     root         160 Jan 18 02:56 ..
kobo:/tmp# 

```


[7/29/2022 6:13 PM] tux_linux
you did not update your rootfs


[7/29/2022 6:13 PM] tux_linux
`touch_event`


[7/29/2022 6:13 PM] szybet
no, i didn't


[7/29/2022 6:13 PM] szybet
¯\_(ツ)_/¯


[7/29/2022 6:14 PM] tux_linux
hmm, strange


[7/29/2022 6:14 PM] szybet
i will today


[7/29/2022 6:14 PM] tux_linux
i would do an 8k tmpfs


[7/29/2022 6:14 PM] tux_linux
it's just better
multiple of 2


[7/29/2022 6:14 PM] szybet
i will test the ipd in real usage tommorow


[7/29/2022 6:14 PM] szybet
computer specialist mind


[7/29/2022 6:14 PM] szybet
i just wanted to save 1K ;p


[7/29/2022 6:14 PM] szybet
but sure

{Reactions}
👍 

[7/29/2022 7:05 PM] szybet
it isin't         ```
        mkdir -p /kobo/dev/ipd && touch /kobo/dev/ipd/fifo && mount --bind /run/ipd/fifo /kobo/dev/ipd/fifo

```


[7/29/2022 7:06 PM] szybet
https://github.com/Kobo-InkBox/rootfs/commit/b1c876365417739f2eac0186a36afe47f5686402

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/b1c876365417739f2eac0186a36afe47f5686402
inkbox_gui: Fix for ipd named pipe · Kobo-InkBox/rootfs@b1c8763
/mnt/data/projects/git/conversations/media/b1c876365417739f2eac0186a36afe47f5686402-FA973


[7/29/2022 7:06 PM] szybet
where do i create sleepcall? the directory needs to be bind mounted


[7/29/2022 7:07 PM] tux_linux
Yes?


[7/29/2022 7:07 PM] szybet
only the fifo is mounted


[7/29/2022 7:07 PM] tux_linux
Well, it's the only file


[7/29/2022 7:08 PM] szybet
slepcall will be created and removed when the user clicks


[7/29/2022 7:08 PM] tux_linux
But yeah I could bind mount the folder


[7/29/2022 7:08 PM] szybet
can you do it now? this and everything will be ready


[7/29/2022 7:08 PM] szybet
well, stylesheets are needed tho


[7/29/2022 7:08 PM] tux_linux
So we don't need the config part anymore?


[7/29/2022 7:09 PM] szybet
you mean?


[7/29/2022 7:09 PM] tux_linux
`/data/config/20-sleep_daemon/ipd` or whatever


[7/29/2022 7:10 PM] szybet
no, i will create sleepcall where the fifo is


[7/29/2022 7:11 PM] tux_linux
would this work? `mkdir -p /kobo/dev/ipd && mount --bind /run/ipd /kobo/dev/ipd`


[7/29/2022 7:11 PM] tux_linux
can you try if it bind-mounts the fifo too for sure?


[7/29/2022 7:11 PM] szybet
```
kobo:/# mkdir -p /kobo/dev/ipd && mount --bind /run/ipd /kobo/dev/ipd
kobo:/# ls /kobo/dev/ipd
fifo       sleepCall
kobo:/# 

```


[7/29/2022 7:11 PM] szybet
works


[7/29/2022 7:12 PM] tux_linux
`ls -l`


[7/29/2022 7:12 PM] szybet
where


[7/29/2022 7:12 PM] tux_linux
`/kobo/dev/ipd`


[7/29/2022 7:13 PM] szybet
```
kobo:/# ls -l /kobo/dev/ipd
total 0
prw-r--r--    1 root     root             0 Jul 29 18:53 fifo

```


[7/29/2022 7:13 PM] tux_linux
good


[7/29/2022 7:13 PM] szybet
i removed sleepcall to test


[7/29/2022 7:13 PM] tux_linux
`prw-r--r--` means named pipe


[7/29/2022 7:13 PM] szybet
i know


[7/29/2022 7:14 PM] tux_linux
done
https://github.com/Kobo-InkBox/rootfs/commit/717ce1d23ce18c9bff5646cd0f5bb3f91ca70514

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/717ce1d23ce18c9bff5646cd0f5bb3f91ca70514
Small fix in IPD tmpfs bind-mount · Kobo-InkBox/rootfs@717ce1d


[7/29/2022 7:15 PM] szybet
thanks

{Reactions}
👍 

[7/29/2022 7:51 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/31
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/2ee80bce027525863b1de573ebca49b095029be9

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/31
pipe repair, minor improvments and fixes by Szybet · Pull Request #...
/mnt/data/projects/git/conversations/media/31-A0451

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/2ee80bce027525863b1de573ebca49b095029be9
wait for inkbox-bin, tmpfs, pipe fix · Kobo-InkBox/inkbox-power-dae...
/mnt/data/projects/git/conversations/media/2ee80bce027525863b1de573ebca49b095029be9-5D50D


[7/29/2022 7:51 PM] szybet
everything done


[7/29/2022 7:52 PM] szybet
now you need to update the stylesheets


[7/29/2022 7:52 PM] szybet
also a note: if restarting ipd, inkbox_gui needs to be restarted too


[7/29/2022 7:53 PM] szybet
also in the docs add places where you did things related to ipd, like bind mounting


[7/29/2022 8:15 PM] tux_linux
fixedwidth will probably cause problems


[7/29/2022 8:16 PM] szybet
you need it to leave it for the nia


[7/29/2022 8:16 PM] szybet
those button were too small to click them


[7/29/2022 8:16 PM] szybet
i know they were big, but this was needed


[7/29/2022 8:16 PM] tux_linux
why

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D9EDD.png


[7/29/2022 8:17 PM] szybet
3m45s


[7/29/2022 8:17 PM] szybet
vs


[7/29/2022 8:17 PM] szybet
3m 45s


[7/29/2022 8:17 PM] tux_linux
and if you only have 3m


[7/29/2022 8:17 PM] szybet
then `3m ` will be showed


[7/29/2022 8:18 PM] tux_linux
not good


[7/29/2022 8:18 PM] szybet
invisible space


[7/29/2022 8:18 PM] szybet
why?


[7/29/2022 8:18 PM] szybet
no one will see it


[7/29/2022 8:18 PM] szybet
even you


[7/29/2022 8:18 PM] tux_linux
it's a fixed-width font


[7/29/2022 8:18 PM] tux_linux
we will see it


[7/29/2022 8:18 PM] szybet
what?


[7/29/2022 8:18 PM] tux_linux
monospace


[7/29/2022 8:18 PM] tux_linux
you did not update your gui bundle, probably


[7/29/2022 8:19 PM] szybet
i still dont undestand the problem


[7/29/2022 8:22 PM] tux_linux
```
    if(cinematicBrightnessInt < 500)
    {
```


[7/29/2022 8:23 PM] szybet
limiter


[7/29/2022 8:24 PM] szybet
if someone sets above it he is dumb


[7/29/2022 8:24 PM] tux_linux
```
    {
```


[7/29/2022 8:24 PM] szybet
D:


[7/29/2022 8:24 PM] tux_linux
i corrected it


[7/29/2022 8:24 PM] szybet
oh i forgot the + - 3 things


[7/29/2022 8:24 PM] szybet
~~i will~~ oh you are faster


[7/29/2022 8:26 PM] tux_linux
hmm?


[7/29/2022 8:26 PM] szybet
to faster disable idle sleep

{Reactions}
👍 

[7/29/2022 8:26 PM] szybet
i will add it today


[7/29/2022 8:27 PM] szybet
https://clang.llvm.org/docs/ClangFormatStyleOptions.html
https://www.formatcode.com/code-formatter-cpp.htm
https://zamhuang.medium.com/vscode-how-to-customize-c-s-coding-style-in-vscode-ad16d87e93bf

{Embed}
https://www.formatcode.com/code-formatter-cpp.htm
c++ formatter, code formatter, c++, c, formatter, code, source
FormatCode C++ Code Formatter is professional source code formatter and source code beautifier for ANSI C and C++ programming language, it can rapidly format, beautify and standardize source code style for all C/C++ source code of your development team.

{Embed}
https://zamhuang.medium.com/vscode-how-to-customize-c-s-coding-style-in-vscode-ad16d87e93bf
【VSCode】How to customize C++’s coding style in VSCode
Really easy to make your own style in few minutes
/mnt/data/projects/git/conversations/media/0%2A0EurBlWUU9-L7d3b-939A3.png


[7/29/2022 8:28 PM] szybet
***inkbox-formatter***


[7/29/2022 8:28 PM] tux_linux
i guess
but i don't really want to bother with that


[7/29/2022 8:28 PM] tux_linux
if it can be helpful, then ok


[7/29/2022 8:28 PM] szybet
I will propably at some point


[7/29/2022 8:32 PM] tux_linux
@Aramir you win a prize for this quote

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3718F.png


[7/29/2022 8:32 PM] tux_linux
it is literally the story of our lives


[7/29/2022 8:33 PM] szybet
and the cow with the dolphin


[7/29/2022 8:33 PM] szybet
thats deep


[7/29/2022 11:41 PM] aryetis
Thanks ^^


[7/30/2022 12:12 AM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/31/commits/18e135ba3b506b3b69eb1f9037d53799c7ea67bf

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/31/commits/18e135ba3b506b3b69eb1f9037d53799c7ea67bf
pipe repair, minor improvments and fixes by Szybet · Pull Request #...
/mnt/data/projects/git/conversations/media/53944559-F1898


[7/30/2022 12:13 AM] szybet
i was really thinking how to do this properly, the most elegant solution i was thinking about was an qtimer launched after some time, checking enum via connect, increasing the value if needed. complicated and heavy as hell. Just this, this is fine. if someone isin't a `perfectionist` its good


[7/30/2022 1:33 AM] szybet
ipd stops at
```
Sat Jul 30 01:29:16 2022 | prepareSleep: Displaying image with FBInk: /data/onboard/.screensaver/winsucks.png
```
and everything dies


[7/30/2022 1:33 AM] szybet
you compiled fbink without image support


[7/30/2022 1:34 AM] szybet
you need to compile it with this


[7/30/2022 1:36 AM] szybet
actually this too

{Reactions}
👍 

[7/30/2022 4:43 AM] tux_linux
thanks for docs, but...
why

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BD9CD.png


[7/30/2022 5:46 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/47bff6047554f5b3308988cc757d1c187eb16b93

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/47bff6047554f5b3308988cc757d1c187eb16b93
`docs.md`: Improvements · Kobo-InkBox/inkbox-power-daemon@47bff60
/mnt/data/projects/git/conversations/media/47bff6047554f5b3308988cc757d1c187eb16b93-20E6F


[7/30/2022 7:01 AM] szybet
Thats a message


[7/30/2022 8:06 AM] szybet
If something is intended to work across program i like to make it as simple as possiblr


[7/30/2022 8:06 AM] szybet
So lower case everywhere


[7/30/2022 8:07 AM] szybet
If you really want camel case, i will use s as sleep and ds as deepsleep :p


[7/30/2022 11:45 AM] tux_linux
I use snake_case in ibxd because it's based on bash/ash
So it should be camelCase here because it's based on C++


[7/30/2022 3:50 PM] szybet
This can be used across many different programs and programming languages


[7/30/2022 4:01 PM] tux_linux
Then everything is contradictory, your file name should be `sleepcall`
Which I do not approve


[7/30/2022 4:48 PM] szybet
Ugh


[7/30/2022 4:48 PM] szybet
I will correct it


[7/30/2022 4:48 PM] szybet
Maybe


[7/30/2022 4:48 PM] szybet
Most propably


[7/30/2022 4:48 PM] tux_linux
I can


[7/30/2022 4:49 PM] szybet
You need to check configUpdate, afterSleep and quit.CPP

And the docs


[7/30/2022 4:50 PM] szybet
Also please correct the fbink library in rootfs


[7/30/2022 4:50 PM] szybet
And accept my pull requests


[7/30/2022 4:51 PM] tux_linux
?


[7/30/2022 4:51 PM] tux_linux
docs are done?


[7/30/2022 4:51 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/main/other/docs.md


[7/30/2022 4:51 PM] szybet
In those files are sleepCall related things, and change it to docs too


[7/30/2022 4:51 PM] tux_linux
I changed it yesterday while reviewing it, I thought you made a typo or whatever


[7/30/2022 4:51 PM] szybet
Oh OK then


[7/30/2022 4:52 PM] tux_linux
I'm not sure for the rest


[7/30/2022 4:52 PM] tux_linux
I did not touch the GUI code yet


[7/30/2022 4:52 PM] tux_linux
Only changed it in the docs


[7/30/2022 4:52 PM] szybet
Okay


[7/30/2022 4:53 PM] szybet
Did you noticed what I said that if restarting ipd, after it inkbox GUI needs to be restarted too?


[7/30/2022 4:53 PM] szybet
Opened can handle that propably


[7/30/2022 4:53 PM] tux_linux
if InkBox GUI is restarted


[7/30/2022 4:53 PM] tux_linux
does ipd needs to be restarted


[7/30/2022 4:53 PM] szybet
No


[7/30/2022 4:53 PM] tux_linux
that's what happens with x11


[7/30/2022 4:53 PM] tux_linux
ok


[7/30/2022 4:53 PM] szybet
In reverse, yes


[7/30/2022 4:54 PM] szybet
Overwriting the tmpfs breaks the moutt bind thing in inkbox gui


[7/30/2022 4:54 PM] szybet
Ipd should not be restarted ever so


[7/30/2022 4:54 PM] tux_linux
I'm not sure if this is doable in OpenRC


[7/30/2022 4:55 PM] tux_linux
but it will probably never happen


[7/30/2022 4:55 PM] tux_linux
ipd should also be stopped in `prepare_shutdown`


[7/30/2022 4:55 PM] tux_linux
one strange thing I noticed is at you can't restart ipd with `rc-service ipd restart`


[7/30/2022 4:58 PM] tux_linux
maybe because you `killall -9 ipd` and incidentally the service's process name is also `ipd`


[7/30/2022 5:01 PM] szybet
Change that


[7/30/2022 5:01 PM] szybet
I had a similar bug yeasterday


[7/30/2022 5:01 PM] szybet
Ipd-service


[7/30/2022 5:05 PM] tux_linux
yeah ok


[7/30/2022 5:05 PM] tux_linux
might as well just name it `inkbox-power-daemon`


[7/30/2022 5:09 PM] tux_linux
I will add `ntpdate` in the rootfs too


[7/30/2022 5:36 PM] szybet
Apple time at the last option


[7/30/2022 9:06 PM] tux_linux
It should now be `[/kobo]/dev/ipd/sleepCall`


[7/30/2022 10:05 PM] szybet
It is already?


[7/30/2022 10:05 PM] szybet
Whats the problem


[7/30/2022 10:14 PM] tux_linux
I misread the git commit


[7/30/2022 10:14 PM] tux_linux
none


[7/30/2022 10:17 PM] tux_linux
https://github.com/Kobo-InkBox/touch_emulate

{Embed}
https://github.com/Kobo-InkBox/touch_emulate
GitHub - Kobo-InkBox/touch_emulate: Send input events to your eRead...
Send input events to your eReader when you're lazy - GitHub - Kobo-InkBox/touch_emulate: Send input events to your eReader when you're lazy
/mnt/data/projects/git/conversations/media/touch_emulate-0898A


[7/30/2022 10:24 PM] tux_linux
ok, ipd on the Touch:
it doesn't work at all unless
1. usbnet is down
2. wi-fi is down


[7/30/2022 10:25 PM] tux_linux
it puts it to sleep but can never wake-up


[7/30/2022 10:25 PM] tux_linux
so I can never debug


[7/30/2022 10:25 PM] tux_linux
yay


[7/30/2022 10:28 PM] tux_linux
and even when waking up when the conditions are met, it wakes up then immediately goes to sleep again
```
Sat Jul 30 16:23:37 2022 | appsFreeze: Found PID of inkbox-bin: 2713
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of oobe-inkbox-bin
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of lockscreen-bin
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of calculator-bin
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of qreversi-bin
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of 2048-bin
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of scribble
Sat Jul 30 16:23:37 2022 | appsFreeze: Couldn't find PID of lightmaps
[FBInk] Variable fb info: 600x800, 16bpp @ rotation: 3 (Counter Clockwise, 270Â°)
[FBInk] Fixed fb info: ID is "mxc_epdc_fb", length of fb mem: 2179072 bytes & line length: 1216 bytes
[FBInk] Canonical rotation: 0 (Upright, 0Â°)
[FBInk] Fontsize set to 16x16 (IBM base glyph size: 8x8)
[FBInk] Line length: 37 cols, Page size: 50 rows
[FBInk] Pen colors set to #000000 for the foreground and #FFFFFF for the background

# This is where it would go to sleep, then the following text is when it wakes up

Sat Jul 30 16:24:26 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 1
Sat Jul 30 16:24:26 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Sat Jul 30 16:24:26 2022 | watchdog: Watchdog event received
Sat Jul 30 16:24:26 2022 | watchdog: Launching 'after' thread because of prepareSleep job
Sat Jul 30 16:24:27 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
Sat Jul 30 16:27:04 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 1
Sat Jul 30 16:27:04 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Sat Jul 30 16:27:05 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
```


[7/30/2022 10:51 PM] szybet
Full log...


[7/30/2022 10:51 PM] szybet
And your config dir


[7/30/2022 10:52 PM] szybet
It should turn usbnet and Wi-Fi down right?


[7/30/2022 10:52 PM] szybet
It doesnt work?


[7/30/2022 10:52 PM] tux_linux
it seemingly doesn't


[7/30/2022 10:53 PM] szybet
Maybe serial connection? Without it i wouldnt be able to debug and write the daemon


[7/30/2022 10:53 PM] tux_linux
i am on serial (because everything else failed)


[7/30/2022 10:53 PM] tux_linux
actually it doesn't even put it to sleep


[7/30/2022 10:53 PM] tux_linux
but it locks the serial console


[7/30/2022 10:53 PM] tux_linux
so I can't do anything


[7/30/2022 10:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-62809.txt


[7/30/2022 10:54 PM] szybet
Event0 works in a diffrent way there?


[7/30/2022 10:54 PM] szybet
What? Nonsense


[7/30/2022 10:54 PM] tux_linux
it's true


[7/30/2022 10:54 PM] tux_linux
it locks it but it can still print to it, as the device is not suspended


[7/30/2022 10:55 PM] szybet
First we need serial get to work


[7/30/2022 10:56 PM] tux_linux
this happens when I slide the power button after it's supposedly been put to sleep, everytime
```
Sat Jul 30 16:55:53 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 1
Sat Jul 30 16:55:53 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Sat Jul 30 16:55:54 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
```


[7/30/2022 10:57 PM] tux_linux
before pushing unnecessary commits, can you just do a git diff of the changes you want me to apply?


[7/30/2022 10:57 PM] szybet
A branch for mini, thats it


[7/30/2022 10:58 PM] tux_linux
i'm on the touch


[7/30/2022 10:58 PM] tux_linux
not really good


[7/30/2022 10:58 PM] tux_linux
if we merge it we will have a lot of meaningless commits


[7/30/2022 10:58 PM] szybet
Its weird


[7/30/2022 10:58 PM] szybet
Thats what git is for?


[7/30/2022 10:58 PM] szybet
To work together


[7/30/2022 10:59 PM] tux_linux
yeah, but like, adding debug logs in commits, putting comments, removing functions, not the best


[7/30/2022 10:59 PM] szybet
Have you clicked the power button only one time?


[7/30/2022 10:59 PM] tux_linux
at least 20


[7/30/2022 10:59 PM] szybet
Ugh


[7/30/2022 10:59 PM] szybet
Make a clean run


[7/30/2022 10:59 PM] szybet
And click it once


[7/30/2022 10:59 PM] tux_linux
?


[7/30/2022 10:59 PM] tux_linux
oh, initially I did click it once


[7/30/2022 10:59 PM] tux_linux
then I clicked it 20 times


[7/30/2022 11:00 PM] tux_linux
and this happened


[7/30/2022 11:00 PM] tux_linux
each press


[7/30/2022 11:00 PM] szybet
Oh


[7/30/2022 11:00 PM] szybet
It hangs on something in prepare sleep


[7/30/2022 11:00 PM] tux_linux
why does it lock the serial console


[7/30/2022 11:01 PM] szybet
I have no idea


[7/30/2022 11:01 PM] szybet
On the nia serial works always


[7/30/2022 11:01 PM] szybet
Always.


[7/30/2022 11:01 PM] tux_linux
maybe I should add klogd on stdout


[7/30/2022 11:01 PM] tux_linux
hang on


[7/30/2022 11:02 PM] tux_linux
oh, nvm, kernel messages are already printed to stdout


[7/30/2022 11:03 PM] tux_linux
I will try it on the Aura SE meanwhile
if it ain't broke, let me break it


[7/30/2022 11:03 PM] tux_linux
i hate problems like this


[7/30/2022 11:04 PM] tux_linux
Q: why don't you debug the program
A: I can't


[7/30/2022 11:04 PM] szybet
Can you send a clean log, with only one press, and can you wait a bit more before it hangs?


[7/30/2022 11:04 PM] szybet
A full full everything log from the file


[7/30/2022 11:04 PM] szybet
Klogd is on stdout on the nia


[7/30/2022 11:04 PM] szybet
I see dmesg messages


[7/30/2022 11:04 PM] szybet
After it hangs*


[7/30/2022 11:04 PM] tux_linux
it's that log


[7/30/2022 11:04 PM] szybet
Does it clear the screen or something?


[7/30/2022 11:05 PM] tux_linux
I already did wait until idleSleep would start, same behavior


[7/30/2022 11:05 PM] szybet
Do you have the latest version of ipd? I applied some bugfixes


[7/30/2022 11:05 PM] szybet
Does fbink do something?


[7/30/2022 11:06 PM] tux_linux
yes


[7/30/2022 11:06 PM] tux_linux
not at all, apart from screengrabbing the screen I guess


[7/30/2022 11:07 PM] tux_linux
nope


[7/30/2022 11:07 PM] tux_linux
nothing


[7/30/2022 11:07 PM] szybet
The log says that prepare sleep hanged on fbink clearing the screen


[7/30/2022 11:07 PM] tux_linux
well, it probably did


[7/30/2022 11:17 PM] szybet
What library do you have


[7/30/2022 11:17 PM] szybet
Fbink


[7/30/2022 11:17 PM] szybet
The one builded by you is cursed


[7/30/2022 11:17 PM] szybet
No image support, it hanged yestatday my nia completely every time


[7/30/2022 11:17 PM] szybet
Please compile it using my instructions that I updated in kobo nia repo


[7/30/2022 11:17 PM] szybet
Kobo nia audio


[7/30/2022 11:18 PM] tux_linux
because you had a custom screensaver? 😉


[7/30/2022 11:18 PM] ninuje
You're doing something seriously wrong if a missing build option is causing a *hang*


[7/30/2022 11:19 PM] ninuje
Stuff returns `-(ENOSYS)` immediately if unsupported


[7/30/2022 11:19 PM] szybet
i know


[7/30/2022 11:19 PM] ninuje
I could imagine a stupid oversight causing a *crash*, but a hang is exceedingly unlikely


[7/30/2022 11:19 PM] szybet
just do it


[7/30/2022 11:20 PM] szybet
i was doing many other things too, but one of the many problems was fbink library


[7/30/2022 11:21 PM] szybet
your log is really weird, can i get another one?


[7/30/2022 11:21 PM] szybet
does it get hang every time on the same time


[7/30/2022 11:21 PM] tux_linux
yes


[7/30/2022 11:21 PM] szybet
dont spam power button, first the basic functions let get them work


[7/30/2022 11:22 PM] szybet
there is something messed up with fbink, if the log is true


[7/30/2022 11:23 PM] ninuje
Enable verbose fbink logging (it's *extremely* chatty) and *check your gd return values*


[7/30/2022 11:24 PM] szybet
also note about ipd: if something hangs in a thread (prepareSleep, goingSleep, afterSleep) spamming power button will do nothing


[7/30/2022 11:24 PM] szybet
if something starts, then it needs to finish


[7/30/2022 11:24 PM] ninuje
Yet another strike against random threading ;p


[7/30/2022 11:25 PM] szybet
if wifiOff() starts and was stop in the middle, it would cause a even a kernel panick, so it needs to finish


[7/30/2022 11:26 PM] szybet
its save threading, its easier that way


[7/30/2022 11:26 PM] tux_linux
i assure you, I even waited 5 minutes after the power button was pressed one time
and the console was still hung


[7/30/2022 11:26 PM] szybet
for me at least to write it


[7/30/2022 11:26 PM] szybet
maybe try usbnet?


[7/30/2022 11:26 PM] szybet
it gets shutted off at the last step


[7/30/2022 11:26 PM] tux_linux
it hangs everything too


[7/30/2022 11:26 PM] szybet
wtf


[7/30/2022 11:26 PM] tux_linux
plus, it isn't enabled back


[7/30/2022 11:26 PM] ninuje
USBNet will make suspend fail on a Touch


[7/30/2022 11:26 PM] tux_linux
because afterSleep never launches it


[7/30/2022 11:26 PM] ninuje
(EBUSY)


[7/30/2022 11:26 PM] tux_linux
as will Wi-Fi


[7/30/2022 11:27 PM] ninuje
Yep


[7/30/2022 11:27 PM] szybet
yea i know


[7/30/2022 11:27 PM] szybet
what would cause a serial lock?


[7/30/2022 11:27 PM] ninuje
WiFi might actually murder your kernel


[7/30/2022 11:27 PM] szybet
i know... i know...


[7/30/2022 11:27 PM] tux_linux
and if somehow you succeed in putting it to sleep mode, it won't want to wake up at all


[7/30/2022 11:28 PM] szybet
if it succeed, ***then show me the logs of it***


[7/30/2022 11:28 PM] ninuje
That was a theoretical


[7/30/2022 11:28 PM] tux_linux
i was talking about my implementation


[7/30/2022 11:28 PM] szybet
oh ok


[7/30/2022 11:28 PM] tux_linux
initially i didn't turn the wi-fi off, then it went to sleep and never woke up


[7/30/2022 11:28 PM] tux_linux
until a reset


[7/30/2022 11:29 PM] szybet
as for fbink: in main.cpp before launching prepareVariables etc put the fbink function and exit after it


[7/30/2022 11:29 PM] szybet
faster for debbuging


[7/30/2022 11:30 PM] szybet
Hey, it works on the glo fine or not?


[7/30/2022 11:30 PM] tux_linux
glo what


[7/30/2022 11:30 PM] tux_linux
glo, as in n613?


[7/30/2022 11:32 PM] szybet
your main device


[7/30/2022 11:32 PM] tux_linux
glo hd


[7/30/2022 11:32 PM] tux_linux
yes


[7/30/2022 11:32 PM] szybet
yay, at least this


[7/30/2022 11:36 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-2EFB4.txt


[7/30/2022 11:36 PM] tux_linux
same thing, this time the charger was plugged in


[7/30/2022 11:36 PM] tux_linux
no difference afaict


[7/30/2022 11:36 PM] tux_linux
serial console hung


[7/30/2022 11:36 PM] tux_linux
as usual


[7/30/2022 11:37 PM] szybet
do this


[7/30/2022 11:37 PM] szybet
lets locate the problem


[7/30/2022 11:37 PM] szybet
fbink init before it


[7/30/2022 11:38 PM] tux_linux
```
FBInk was initialized successfully in screenshotFbink
```


[7/30/2022 11:38 PM] szybet
and?


[7/30/2022 11:38 PM] tux_linux
well, it's not the problem


[7/30/2022 11:38 PM] tux_linux
```
fbinkFunctions: Screen dump done
```


[7/30/2022 11:38 PM] tux_linux
assuming you actually check the return code


[7/30/2022 11:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-71008.png


[7/30/2022 11:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7B54D.png


[7/30/2022 11:41 PM] szybet
🥴 🧐


[7/30/2022 11:41 PM] tux_linux
so you don't


[7/30/2022 11:41 PM] tux_linux
great


[7/30/2022 11:41 PM] szybet
you mean what?


[7/30/2022 11:41 PM] tux_linux
`fbink_cls`


[7/30/2022 11:41 PM] szybet
its hanging on this step


[7/30/2022 11:42 PM] szybet
checking errors will not fix the issue


[7/30/2022 11:42 PM] szybet
we should check them, but now its not needed


[7/30/2022 11:42 PM] tux_linux
the aura se can't wake up either


[7/30/2022 11:42 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h#L521 kthxplz

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h
FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/30/2022 11:43 PM] szybet
the same logs / problem?


[7/30/2022 11:43 PM] szybet
@tux-linux  do this


[7/30/2022 11:43 PM] tux_linux
well, no, idleSleep triggered before I could do anything


[7/30/2022 11:43 PM] tux_linux
where


[7/30/2022 11:43 PM] ninuje
Before fbink_init for every FBInkConfig object


[7/30/2022 11:44 PM] szybet
exactly


[7/30/2022 11:44 PM] szybet
i dont care about the trigger, i care about what happened in prepareSleep


[7/30/2022 11:46 PM] ninuje
Keep in mind: https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h#L653-L654

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h
FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/30/2022 11:46 PM] ninuje
On the upside, you most probably don't need a new FBInkConfig object


[7/30/2022 11:47 PM] szybet
for some things sometimes, yes. propably


[7/30/2022 11:47 PM] szybet
oh.... i mean... it works on other devices without a problem?


[7/30/2022 11:47 PM] ninuje
What you might need is to handle fb state changes via fbink_reinit, though


[7/30/2022 11:48 PM] ninuje
Threading Bullshit Go(TM)


[7/30/2022 11:48 PM] szybet
also i dont call fbink 2 times in the same time


[7/30/2022 11:49 PM] szybet
i dont understand, i dont think i want to. It works on other devices, its not time to roast threads


[7/30/2022 11:49 PM] ninuje
That was unrelated


[7/30/2022 11:49 PM] tux_linux
50% working, 50% not
not great


[7/30/2022 11:50 PM] ninuje
(Although I suspect that it *would* take care of what you thought you needed to init fbink in threads for)


[7/30/2022 11:50 PM] szybet
oh you are so pessimistic


[7/30/2022 11:50 PM] tux_linux
i'm anticipating a disaster on other devices too


[7/30/2022 11:50 PM] tux_linux
sorry


[7/30/2022 11:51 PM] szybet
not my fault really, works perfectly on the nia


[7/30/2022 11:51 PM] ninuje
I'm not dissing threads per-se, I'm just pointing out the obvious fact that doing threading right is *hard*, so the best solution is simply not to jump to threading as a quick "hey, it might work that way" approach 😉


[7/30/2022 11:51 PM] tux_linux
i never said that


[7/30/2022 11:52 PM] ninuje
And random dead/softlocks are *usually* a fairly good indicator of shit going wrong because of threading-related issues


[7/30/2022 11:52 PM] szybet
i know, i have spend some times to get the threading right.


[7/30/2022 11:52 PM] szybet
sounds bad


[7/30/2022 11:54 PM] szybet
but, ***but*** i still hold my point, it works fine on other devices


[7/30/2022 11:55 PM] tux_linux
not this nonsense again, now it refreshes the screen with `is_verbose` set to `true`

{Attachments}
/mnt/data/projects/git/conversations/media/message-7AC37.txt


[7/30/2022 11:55 PM] tux_linux
NiLuJe, it isn't supposed to spit out more info than that?


[7/30/2022 11:56 PM] szybet
but it doesnt go further, right?


[7/30/2022 11:56 PM] szybet
thats the full log?


[7/30/2022 11:56 PM] tux_linux
yes


[7/30/2022 11:56 PM] tux_linux
```
Sat Jul 30 17:56:34 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 1
Sat Jul 30 17:56:34 2022 | monitorEvents: monitorEvents: Received power button trigger, attempting device suspend
Sat Jul 30 17:56:34 2022 | watchdog: Watchdog event received
Sat Jul 30 17:56:34 2022 | watchdog: Launching 'after' thread because of prepareSleep job
Sat Jul 30 17:56:35 2022 | monitorEvents: Input event received, type: EV_KEY codename: KEY_POWER value: 0
```
does that when I press the power button


[7/30/2022 11:56 PM] szybet
it still hangs on it


[7/30/2022 11:57 PM] tux_linux
it also only refreshes it, it doesn't print anything


[7/30/2022 11:57 PM] szybet
let my copy this:
```
also note about ipd: if something hangs in a thread (prepareSleep, goingSleep, afterSleep) spamming power button will do nothing
if something starts, then it needs to finish
```


[7/30/2022 11:57 PM] ninuje
That last entry is from `fbink_add_ot_font`, FWIW


[7/30/2022 11:58 PM] ninuje
Not `fbink_cls`


[7/30/2022 11:58 PM] szybet
```
int fbinkWriteCenter(string stringToWrite, bool darkMode) {

  FBInkConfig fbink_cfg = {0};
  fbink_cfg.is_centered = true;
  fbink_cfg.is_halfway = true;
  if (darkMode == true) {
    fbink_cfg.is_inverted = true;
  }

  if (fbink_init(fbfd, &fbink_cfg) < 0) {
    log("Failed to initialize FBInk, aborting", emitter);
    return EXIT_FAILURE;
  }

  fbink_add_ot_font("/etc/init.d/splash.d/fonts/resources/inter-b.ttf", FNT_REGULAR);

  FBInkOTConfig fbinkOT_cfg = {0};
  fbinkOT_cfg.is_centered = true;
  fbinkOT_cfg.is_formatted = true;
  fbinkOT_cfg.size_pt = 20;

  FBInkOTFit ot_fit = {0};

  if (fbink_print_ot(fbfd, stringToWrite.c_str(), &fbinkOT_cfg, &fbink_cfg, &ot_fit) < 0) {
    log("FBInk: Failed to print string", emitter);
  }
  fbink_wait_for_complete(fbfd, LAST_MARKER);
  
  return EXIT_SUCCESS;
}
```


[7/30/2022 11:59 PM] tux_linux
I slid the power button **one** time


[7/30/2022 11:59 PM] ninuje
`fbink_print_ot` is *extremely* verbose, so it doesn't look like it went through


[7/30/2022 11:59 PM] szybet
only saying


[7/30/2022 11:59 PM] ninuje
Unless you're not showing stderr


[7/31/2022 12:00 AM] ninuje
Because I send a bunch of stuff over stderr


[7/31/2022 12:00 AM] tux_linux
maybe it's openrc


[7/31/2022 12:00 AM] szybet
launch it directly from the shell


[7/31/2022 12:00 AM] tux_linux
did you change something?


[7/31/2022 12:01 AM] szybet
no, only showing niluje


[7/31/2022 12:01 AM] ninuje
Better solution: https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h#L545

{Embed}
https://github.com/NiLuJe/FBInk/blob/9c1be635137ee5d8db9f8d5516aad1c818abc31d/fbink.h
FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 9c1be635137ee5d8db9f8d5516aad1c818abc31d · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-FA032


[7/31/2022 12:01 AM] ninuje
All hail `syslog()` ;p

{Reactions}
😄 

[7/31/2022 12:02 AM] ninuje
(Not necessarily "better" as an absolute, but it does make some use-cases noticeably less clunky, re: logging)


[7/31/2022 12:02 AM] tux_linux
we usually log to files in `/var/log`


[7/31/2022 12:06 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-D53ED.txt


[7/31/2022 12:06 AM] tux_linux
It logs even less things and the screen doesn't refresh


[7/31/2022 12:08 AM] tux_linux
and now the serial console isn't hung anymore, but I can't ctrl+c the program or input anything


[7/31/2022 12:08 AM] ninuje
Well, yeah, because it's sent to the syslog ;p


[7/31/2022 12:08 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B71CE.png


[7/31/2022 12:08 AM] tux_linux
it's still on `is_verbose`
how do you explain that


[7/31/2022 12:08 AM] szybet
EXACTLY the same for me when fbink fails with the image


[7/31/2022 12:09 AM] ninuje
Run klogd once to send the kernel logs to the syslog


[7/31/2022 12:09 AM] ninuje
then show us the actual syslog?


[7/31/2022 12:10 AM] tux_linux
i did not change any code


[7/31/2022 12:10 AM] tux_linux
i just ran it from shell rather than by launching the openrc service


[7/31/2022 12:11 AM] tux_linux
I updated the library


[7/31/2022 12:11 AM] szybet
okay


[7/31/2022 12:16 AM] szybet
if you dont trust your library build, use this

{Attachments}
/mnt/data/projects/git/conversations/media/libfbink.so.1.0-C6C7E.0


[7/31/2022 12:16 AM] tux_linux
i trust it


[7/31/2022 12:17 AM] tux_linux
and it's not trying to print an image


[7/31/2022 12:17 AM] tux_linux
just text


[7/31/2022 12:24 AM] szybet
try this

{Attachments}
/mnt/data/projects/git/conversations/media/ipd-A753A


[7/31/2022 12:28 AM] szybet
i have problems too


[7/31/2022 12:28 AM] szybet
there is something messed up


[7/31/2022 12:49 AM] szybet
after i updated the rootfs it stopped working


[7/31/2022 12:50 AM] szybet
for me it stops at 
```
Sun Jul 31 00:47:55 2022 | functions: /sys/class/net/eth0/operstate is: up
```


[7/31/2022 12:50 AM] szybet
which is a non blocking wifi function


[7/31/2022 12:50 AM] szybet
and nothing more is done


[7/31/2022 12:50 AM] szybet
and serial is killed after it


[7/31/2022 12:50 AM] szybet
completly


[7/31/2022 12:55 AM] tux_linux
Did you disable custom screensavers


[7/31/2022 12:56 AM] szybet
no, they are working fine


[7/31/2022 12:56 AM] tux_linux
Do you have something unwanted in the rootfs cache


[7/31/2022 12:56 AM] szybet
no, i cleared it yesterday


[7/31/2022 12:57 AM] tux_linux
Then your screensavers are not working


[7/31/2022 12:57 AM] tux_linux
Because you're not using your library


[7/31/2022 12:57 AM] tux_linux
I did not push the updated one yet


[7/31/2022 12:58 AM] szybet
i updated it myself 20 minutes ago


[7/31/2022 12:58 AM] tux_linux
ok


[7/31/2022 1:09 AM] tux_linux
I try it even if it doesn't work?


[7/31/2022 1:10 AM] szybet
if you want, you can try it


[7/31/2022 1:14 AM] szybet
also this, i stripped it off wifi and fbink

{Attachments}
/mnt/data/projects/git/conversations/media/ipd-54260


[7/31/2022 1:14 AM] szybet
i got it to sleeping


[7/31/2022 1:15 AM] szybet
but still serial is behaving strange, not as it was


[7/31/2022 1:16 AM] szybet
another thing i can think of is that you compiled a messed up version of libevdev


[7/31/2022 1:17 AM] tux_linux
no, receiving input events is not a problem


[7/31/2022 1:17 AM] szybet
serial is


[7/31/2022 1:17 AM] szybet
idk what libevdev is doing under there


[7/31/2022 1:17 AM] tux_linux
well try with your libevdev then


[7/31/2022 1:18 AM] szybet
i will debug it tommorow


[7/31/2022 1:18 AM] szybet
really strange...


[7/31/2022 1:23 AM] szybet
I would suggest

Launch the glo, test the newest version of ipd, don't change the libs, if it works, update the rootfs and check that then


[7/31/2022 1:46 AM] tux_linux
good news on the Touch

{Attachments}
/mnt/data/projects/git/conversations/media/message-27808.txt


[7/31/2022 1:46 AM] tux_linux
but nothing on the screen


[7/31/2022 1:50 AM] tux_linux
on wake-up

{Attachments}
/mnt/data/projects/git/conversations/media/message-68A18.txt


[7/31/2022 1:50 AM] tux_linux
inkbox-bin is still frozen
can't do anything on the screen


[7/31/2022 1:52 AM] tux_linux
serial console is frozen too


[7/31/2022 12:56 PM] szybet
we need to fix the serial thing


[7/31/2022 12:56 PM] szybet
i will roll back version by version to look what breaked it


[7/31/2022 12:57 PM] szybet
thats weird - it worked fine... yesterday yesterday


[7/31/2022 2:24 PM] szybet
what happens... if a tmpfs is bind mounted to another directory?


[7/31/2022 2:24 PM] szybet
does this woks as a... link? or is there something messed up


[7/31/2022 2:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E1B4A.png


[7/31/2022 2:25 PM] szybet
the bug appears after the second commit, but the first commit isin't usable at all


[7/31/2022 2:25 PM] szybet
and this commit + with the new rootfs causes a serial crash


[7/31/2022 2:25 PM] szybet
because i was testing that, maybe i was missing a mount --bind somewhere


[7/31/2022 3:31 PM] szybet
```
      log("FATAL error: stopping suspend attempts after " + to_string(count) + " failed attempts", emitter);

```
its not, it happens every time.


[7/31/2022 3:32 PM] tux_linux
It's hilarious how a serial console hang was caused by a missed bind mount


[7/31/2022 3:32 PM] tux_linux
It should not


[7/31/2022 3:32 PM] tux_linux
because


[7/31/2022 3:32 PM] szybet
i already found some issues, im fixing them

{Reactions}
👍 

[7/31/2022 3:33 PM] szybet
r e a l l y strange


[7/31/2022 3:33 PM] szybet
just wait


[7/31/2022 3:33 PM] szybet
but idk about the fbink tho


[7/31/2022 3:33 PM] szybet
ugh 🥴


[7/31/2022 3:33 PM] tux_linux
Actually it might be because it wants to read a non existing named pipe


[7/31/2022 3:33 PM] szybet
nope


[7/31/2022 3:34 PM] szybet
for now what i have seen to be a problem: hwclock and tmpfs


[7/31/2022 3:34 PM] szybet
why this wasing happening with the old rootfs?


[7/31/2022 3:34 PM] szybet
https://tenor.com/view/good-question-meme-shrek-gif-16886109

{Embed}
https://tenor.com/view/good-question-meme-shrek-gif-16886109
/mnt/data/projects/git/conversations/media/good-question-meme-D9E0A.png


[7/31/2022 3:35 PM] tux_linux
Because I bind mounted only the fifo and not the folder itself?


[7/31/2022 3:35 PM] tux_linux
I can only see that


[7/31/2022 3:35 PM] tux_linux
And it should not have been a problem


[7/31/2022 3:35 PM] szybet
i have these problems, your fbink one is diffrent


[7/31/2022 3:35 PM] szybet
no, the size propably


[7/31/2022 3:35 PM] tux_linux
Let's fix other ones before FBInk


[7/31/2022 3:36 PM] tux_linux
2 files in dir?


[7/31/2022 3:36 PM] tux_linux
Well try increasing it to 32K, should be more than enough


[7/31/2022 3:36 PM] szybet
i still dont know, im debbuging right now


[7/31/2022 3:37 PM] szybet
is the tmpfs size static, or its a limit for it?


[7/31/2022 3:37 PM] tux_linux
It's a limit


[7/31/2022 3:37 PM] szybet
if i create tmpfs of size 2M, does it take 2M of ram or is it the max


[7/31/2022 3:37 PM] szybet
okay


[7/31/2022 3:37 PM] szybet
good then


[7/31/2022 3:37 PM] tux_linux
No, it's the max


[7/31/2022 3:37 PM] tux_linux
I think


[7/31/2022 3:37 PM] tux_linux
Would make no sense otherwise


[7/31/2022 3:37 PM] tux_linux
/kobo/run/ is 128M


[7/31/2022 3:38 PM] tux_linux
So, only dynamically allocated


[7/31/2022 3:38 PM] szybet
also there is an evtest in the new rootfs that touches event0


[7/31/2022 3:38 PM] tux_linux
??


[7/31/2022 3:38 PM] tux_linux
Where how when


[7/31/2022 3:39 PM] szybet
idk


[7/31/2022 3:39 PM] szybet
it is


[7/31/2022 3:39 PM] szybet
i see it in htop


[7/31/2022 3:39 PM] tux_linux
I thought I removed everything


[7/31/2022 3:39 PM] tux_linux
`rg evtest .`


[7/31/2022 3:40 PM] tux_linux
From git repo


[7/31/2022 3:42 PM] szybet
maybe write cache...


[7/31/2022 3:42 PM] szybet
idk


[7/31/2022 3:42 PM] szybet
try on your device


[7/31/2022 3:42 PM] tux_linux
2M is ok, but decrease progressively if it works


[7/31/2022 3:43 PM] szybet
i know


[7/31/2022 3:43 PM] szybet
thats confirmed: calling hwclock when state_extended is 1 or was changed less than 500ms before causes serial to hand


[7/31/2022 3:43 PM] szybet
and WHY, WHY this wasnt an issue before updating the rootfs


[7/31/2022 3:44 PM] tux_linux
Cache


[7/31/2022 3:44 PM] tux_linux
Nothing with rg


[7/31/2022 3:46 PM] tux_linux
Ridiculous


[7/31/2022 3:46 PM] tux_linux
What's this nonsense


[7/31/2022 3:47 PM] szybet
i hope i never met a kobo developer responsible for the kernel


[7/31/2022 3:47 PM] szybet
for his own good


[7/31/2022 3:47 PM] szybet
😄


[7/31/2022 3:48 PM] tux_linux
it's strange that it happens with other devices too though


[7/31/2022 3:48 PM] tux_linux
but yeah


[7/31/2022 3:48 PM] tux_linux
blame netronix


[7/31/2022 3:48 PM] tux_linux
```
kobo:~# ps | grep evtest
  665 root      0:00 evtest /dev/input/event0
 2938 root      0:00 grep evtest
kobo:~# 
```
crap


[7/31/2022 3:48 PM] tux_linux
with old rootfs


[7/31/2022 3:49 PM] tux_linux
like, the one from 2 days ago


[7/31/2022 3:49 PM] tux_linux
it's not `--grab` so should not be a problem


[7/31/2022 3:49 PM] tux_linux
ooooooooooooh


[7/31/2022 3:49 PM] tux_linux
initrd's fault


[7/31/2022 3:49 PM] szybet
~~***should***~~


[7/31/2022 3:50 PM] szybet
update the rootfs with this


[7/31/2022 3:50 PM] tux_linux
it works after you kill it?


[7/31/2022 3:50 PM] szybet
and the fbink library


[7/31/2022 3:50 PM] tux_linux
doesn't have anything to do with rootfs


[7/31/2022 3:50 PM] tux_linux
```
build@inkbox ~/i/k/i/common (master)> rg evtest
rcS-std
154:            evtest /dev/input/event0 > /tmp/input-log &

rcS-root
144:DFL_KEY_RAW=`timeout 3s evtest /dev/input/event0` 2>/dev/null
252:            evtest /dev/input/event0 > /tmp/input-log &

```


[7/31/2022 3:50 PM] szybet
it works even when i dind't kill it. just can cause problems


[7/31/2022 3:50 PM] szybet
i will add a evtest killer to the monitorEvents :)


[7/31/2022 3:51 PM] tux_linux
no, i will add a killall in the initrd


[7/31/2022 3:51 PM] szybet
i will add too


[7/31/2022 3:52 PM] tux_linux
no


[7/31/2022 3:52 PM] szybet
yes


[7/31/2022 3:52 PM] szybet
launched only once


[7/31/2022 3:53 PM] tux_linux
I totally refuse


[7/31/2022 3:53 PM] tux_linux
i'm testing the fix right now and it should be pushed in less than 5 mins


[7/31/2022 3:53 PM] szybet
i totally refuse to update the kernel once more :P


[7/31/2022 3:53 PM] tux_linux
`dd if=zImage-root of=/dev/mmcblk0 bs=512 seek=81920`


[7/31/2022 3:53 PM] szybet
i know


[7/31/2022 3:53 PM] szybet
i just dont like to do this


[7/31/2022 3:53 PM] szybet
the sd card will die one day becouse of it


[7/31/2022 3:54 PM] tux_linux
it will die more bec**a**use of updates to the rootfs than this


[7/31/2022 3:54 PM] szybet
nah no


[7/31/2022 3:54 PM] tux_linux
why


[7/31/2022 3:54 PM] szybet
this writes to invidual bytes to the sd card, rootfs has a file system that writes randomly in many places


[7/31/2022 3:54 PM] tux_linux
what's the difference


[7/31/2022 3:54 PM] tux_linux
it wears flash cells anyway


[7/31/2022 3:58 PM] szybet
but not the ones only often and often


[7/31/2022 3:58 PM] szybet
but many and randomly


[7/31/2022 3:59 PM] szybet
update the fbink library👀


[7/31/2022 3:59 PM] tux_linux
I must have updated the kernel 200 times on my devices and not any sdcard died


[7/31/2022 3:59 PM] tux_linux
does it cause problems when it's stripped?


[7/31/2022 4:00 PM] szybet
it cause problems where there is no image support


[7/31/2022 4:00 PM] tux_linux
ok, that was not my question


[7/31/2022 4:03 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/dee1ed075162194f1d514d51e5e29a8b33a8e715

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/dee1ed075162194f1d514d51e5e29a8b33a8e715
Update `libfbink.so` · Kobo-InkBox/rootfs@dee1ed0
/mnt/data/projects/git/conversations/media/dee1ed075162194f1d514d51e5e29a8b33a8e715-08848


[7/31/2022 4:04 PM] szybet
did you strip it?


[7/31/2022 4:05 PM] tux_linux
yes


[7/31/2022 4:05 PM] tux_linux
rootfs is heavily space-constrained


[7/31/2022 4:05 PM] szybet
i know


[7/31/2022 4:05 PM] tux_linux
on older devices it can cause OOM if its size is more than ~75M


[7/31/2022 4:05 PM] szybet
why...


[7/31/2022 4:06 PM] tux_linux
256m ram


[7/31/2022 4:07 PM] tux_linux
actually it will cause an oom on the nia too


[7/31/2022 4:07 PM] szybet
and?


[7/31/2022 4:07 PM] tux_linux
study the rootfs upgrade process


[7/31/2022 4:10 PM] szybet
replacing rootfs.squash?


[7/31/2022 4:10 PM] tux_linux
no, not while it's mounted


[7/31/2022 4:10 PM] tux_linux
so...


[7/31/2022 4:10 PM] szybet
oh no...


[7/31/2022 4:10 PM] tux_linux
I copy it to a tmpfs


[7/31/2022 4:10 PM] tux_linux
we don't have a choice


[7/31/2022 4:10 PM] tux_linux
elsewise we wear the mmc twice


[7/31/2022 4:10 PM] szybet (pinned)
cant you use the recovery partition to replace the rootfs?


[7/31/2022 4:11 PM] tux_linux
i could


[7/31/2022 4:11 PM] tux_linux
didn't think of that


[7/31/2022 4:11 PM] tux_linux
maybe


[7/31/2022 4:11 PM] szybet
then we need to do this


[7/31/2022 4:11 PM] szybet
one day


[7/31/2022 4:11 PM] tux_linux
Pinned a message.


[7/31/2022 4:11 PM] szybet
maybe


[7/31/2022 4:13 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/ca9c15becaec9a45cf1d345537ba845ee7368012
I found why it didn't work to kill it in the kernel but it's complicated to solve

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/ca9c15becaec9a45cf1d345537ba845ee7368012
ipd: Kill evtest · Kobo-InkBox/rootfs@ca9c15b
/mnt/data/projects/git/conversations/media/ca9c15becaec9a45cf1d345537ba845ee7368012-B44E1


[7/31/2022 4:14 PM] tux_linux
so just update the rootfs


[7/31/2022 4:14 PM] szybet
i could do this in the ipd in a cooler way...


[7/31/2022 4:19 PM] tux_linux
No


[7/31/2022 4:19 PM] tux_linux
You said it: it's only launched once


[7/31/2022 4:20 PM] szybet
only launch it once in monitorEvents


[7/31/2022 4:20 PM] szybet
and kill every evtest


[7/31/2022 5:03 PM] szybet
how can it freeze at a simple if statement


[7/31/2022 5:03 PM] szybet
```
if (wifiState == "up" or wifiState == "dormant") {
```


[7/31/2022 5:03 PM] szybet
wtf


[7/31/2022 6:12 PM] tux_linux
That's exactly what I'm doing there


[7/31/2022 6:12 PM] szybet
i completly dont know what is going on...


[7/31/2022 6:13 PM] szybet
im trying this for 6 hours and it works only without touching wifi


[7/31/2022 6:14 PM] szybet
it simply stops working at a certain point


[7/31/2022 6:37 PM] tux_linux
Do you have an else condition ?


[7/31/2022 6:37 PM] szybet
nevermind


[7/31/2022 6:37 PM] szybet
i remove this if, it stops on another step


[7/31/2022 6:37 PM] szybet
a recent commit works fine


[7/31/2022 6:37 PM] tux_linux
Nice


[7/31/2022 6:37 PM] szybet
i have no idea, im looking through code


[7/31/2022 6:37 PM] tux_linux
What's the other step


[7/31/2022 6:38 PM] szybet
ifconfig posix spawn


[7/31/2022 6:38 PM] tux_linux
If you replace with system


[7/31/2022 6:38 PM] szybet
it stops at specific functions, like posix spawn, ifstream open


[7/31/2022 6:38 PM] tux_linux
Does it hang too


[7/31/2022 6:38 PM] tux_linux
Maybe add a timeout to posix spawn


[7/31/2022 6:39 PM] szybet
i remember yes, i will try it with this too ( i used this for hwclock and the result was the same )


[7/31/2022 9:55 PM] szybet
it doesnt happen in this commit:
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/64edafe0049c035bf05844eb5f5c55d15ea13d42

bu happens in this:
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/f9f31a9db2197b5c19b753cb17e04d7a18c48cb4 ( 2ee80bce027525863b1de573ebca49b095029be9 is the main code change )

if I comment everything that i changed in the second commit while being on the first commit, the issue is still there
im losing my mind


[7/31/2022 10:25 PM] tux_linux
Hmm hmm


[7/31/2022 10:26 PM] tux_linux
I will too, probably


[7/31/2022 10:26 PM] szybet
now im trying the last time, i have commented everything from the second commit while being in the first


[7/31/2022 10:26 PM] tux_linux
If you do a git checkout of that commit, it works, but if you comment everything you changed after it doesn't work?


[7/31/2022 10:27 PM] tux_linux
Did you make clean ?


[7/31/2022 10:27 PM] szybet
im removing build dir every time


[7/31/2022 10:27 PM] tux_linux
Good


[7/31/2022 10:27 PM] tux_linux
Not good


[7/31/2022 10:27 PM] szybet
now is the last try

{Reactions}
👍 

[7/31/2022 10:27 PM] tux_linux
At the same time


[7/31/2022 10:28 PM] tux_linux
Try to change the compiler after that


[7/31/2022 10:28 PM] szybet
?????????????????????????????????//


[7/31/2022 10:28 PM] szybet
im using the same for both builds


[7/31/2022 10:28 PM] tux_linux
Try a new toolchain from musl.cc


[7/31/2022 10:28 PM] szybet
one works one no


[7/31/2022 10:29 PM] tux_linux
Yes, try it with the latest commit


[7/31/2022 10:29 PM] tux_linux
Maybe it's a gcc bug


[7/31/2022 10:29 PM] tux_linux
Even if it's commented


[7/31/2022 10:29 PM] tux_linux
Idk


[7/31/2022 10:29 PM] szybet
nah


[7/31/2022 10:29 PM] tux_linux
You never know


[7/31/2022 10:29 PM] szybet
okay, this works


[7/31/2022 10:30 PM] szybet
what the fuck is the issue then


[7/31/2022 10:30 PM] tux_linux
Hm


[7/31/2022 10:30 PM] tux_linux
Try uncommenting tiny parts


[7/31/2022 10:30 PM] tux_linux
Until you find the issue


[7/31/2022 10:30 PM] szybet
and the fun begins again


[7/31/2022 10:30 PM] tux_linux
Yay


[7/31/2022 10:31 PM] tux_linux
:/


[7/31/2022 10:31 PM] tux_linux
tar your repo


[7/31/2022 10:31 PM] tux_linux
So you can have a working backup


[7/31/2022 10:32 PM] szybet
its very climatic to debug those issues with this music:
https://youtu.be/SN3xDNjuVDQ?t=23780

{Embed}
10HoursMovies
https://www.youtube.com/watch?v=SN3xDNjuVDQ&start=23780
Titan Staring With Silent Hill Music 10 Hours
Titan looks sad while he's staring at your soul.

10HoursMovies centers upon quality edited contents. We take into consideration the footages used, the relevance they have to match the songs and the whole pacing of the story for each videos, creating original entertainments for the best fans!

Join us on facebook: https://www.facebook.com/10Hour...
/mnt/data/projects/git/conversations/media/maxresdefault-21ADE.jpg


[7/31/2022 10:32 PM] tux_linux
Try e.t. soundtrack


[7/31/2022 10:34 PM] szybet
not so dramatic


[7/31/2022 10:34 PM] szybet
but cool music too

{Reactions}
👍 

[7/31/2022 10:34 PM] tux_linux
Depends what piece


[7/31/2022 10:44 PM] szybet
how is the init process of inkbox named?


[7/31/2022 10:44 PM] szybet
pid 1?


[7/31/2022 10:45 PM] szybet
init


[7/31/2022 10:45 PM] szybet
okay


[7/31/2022 10:45 PM] szybet
okay...


[7/31/2022 10:46 PM] tux_linux
?


[7/31/2022 10:47 PM] tux_linux
why do you even need to fiddle with that?


[7/31/2022 10:51 PM] szybet
because im sitting on this for 10h and im going insane

maybe i dont understand something, but EXIT_FAILURE is 1, i thought its -1, so i was maybe killing the init


[7/31/2022 10:51 PM] tux_linux
it's just an exit code


[7/31/2022 10:51 PM] tux_linux
the kernel would have panicked otherwise


[7/31/2022 10:51 PM] tux_linux
and would have told you you attempted to kill init


[7/31/2022 10:51 PM] szybet
cool


[7/31/2022 10:51 PM] szybet
what if i killed -1?


[7/31/2022 10:52 PM] tux_linux
where do you kill -1


[7/31/2022 10:52 PM] szybet
nowhere


[7/31/2022 10:52 PM] szybet
im asking only


[7/31/2022 10:52 PM] tux_linux
if you do `exit(EXIT_FAILURE)` it's like `exit with return code 1`


[7/31/2022 10:52 PM] tux_linux
then your shell will output `1` when you do `echo ${?}`


[7/31/2022 10:53 PM] tux_linux
exit codes range from 0 to 255


[7/31/2022 10:53 PM] tux_linux
```
# false
# echo ${?}
1
#
```


[7/31/2022 11:17 PM] szybet (pinned)
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/a27f93b5af015e78837aa5b1a86548062b3d6921

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/a27f93b5af015e78837aa5b1a86548062b3d6921
Here a scientific evidences for 2 things. First, computers are work...
…g randomly, the sentence that there are only 0 and 1 is false. With the first implementation, of what i understand i was killing the init system, then after &quot;stupid bug&quot; commit i...
/mnt/data/projects/git/conversations/media/a27f93b5af015e78837aa5b1a86548062b3d6921-E2EA4


[7/31/2022 11:17 PM] szybet
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA


[7/31/2022 11:18 PM] szybet
I realy hope this will fix your issues with the mini


[7/31/2022 11:18 PM] szybet
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA


[7/31/2022 11:26 PM] tux_linux
*Touch


[7/31/2022 11:26 PM] szybet
nothing makes sense anymore


[7/31/2022 11:26 PM] tux_linux
Yeah


[7/31/2022 11:27 PM] tux_linux
So what was the main problem?


[7/31/2022 11:28 PM] tux_linux
Pinned a message.


[7/31/2022 11:30 PM] szybet
before this commit, it was kill -9 1 ( init ) every time
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/f9f31a9db2197b5c19b753cb17e04d7a18c48cb4

this commit fixed this? so it was killing 0 propably, i dont know. 
still it was working, i tested that

after i changed the rootfs it killed everything somehow, and things like hwclock and tmpfs size had an impact on that, that sometimes it doesnt happen


[7/31/2022 11:30 PM] tux_linux
Why would it want to kill init


[7/31/2022 11:32 PM] szybet
becouse if app name as pid wasn't found, it was returning EXIT_FAILURE as an int which is 1


[7/31/2022 11:32 PM] szybet
but it didn't do anything


[7/31/2022 11:32 PM] szybet
IDK


[7/31/2022 11:32 PM] szybet
why did you pinned this commit?


[7/31/2022 11:32 PM] tux_linux
Oooh


[7/31/2022 11:32 PM] tux_linux
Because it's history


[7/31/2022 11:32 PM] szybet
😆


[7/31/2022 11:33 PM] szybet
i cant explain why the problem didn't appeared, but i see the problem in code that it was doing that


[7/31/2022 11:33 PM] tux_linux
Ok


[7/31/2022 11:33 PM] tux_linux
We will see what Touch says


[7/31/2022 11:33 PM] tux_linux
Once Gentoo has finished updating


[7/31/2022 11:34 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220731_213400577-FDA25.jpg


[7/31/2022 11:35 PM] szybet
thats why i dont use gentoo


[7/31/2022 11:35 PM] tux_linux
It's fine as long as you update it less than once a day


[7/31/2022 11:36 PM] szybet
also before every update python would commit suicide, but propably i could figure this out


[7/31/2022 11:36 PM] tux_linux
It did not yet on my box


[7/31/2022 11:36 PM] tux_linux
Had Gentoo on it since 10 months


[7/31/2022 11:37 PM] tux_linux
And now it triple boots Gentoo + macOS + Windows


[7/31/2022 11:37 PM] szybet
mac os on bare metal?


[7/31/2022 11:37 PM] tux_linux
Yes


[7/31/2022 11:37 PM] tux_linux
Hackintosh


[7/31/2022 11:37 PM] szybet
its an hackintosh build?


[7/31/2022 11:38 PM] szybet
oh, cool


[7/31/2022 11:38 PM] tux_linux
OpenCore


[7/31/2022 11:38 PM] tux_linux
It was fairly easy but very long


[7/31/2022 11:38 PM] szybet
why do you need apple?


[7/31/2022 11:38 PM] tux_linux
Because you set up everything yourself


[7/31/2022 11:38 PM] tux_linux
I like the ui


[7/31/2022 11:38 PM] szybet
but kde? :(...


[7/31/2022 11:39 PM] tux_linux
KDE is very good
But macOS's UI wins a design prize


[7/31/2022 11:39 PM] tux_linux
I have KDE on my Gentoo install


[7/31/2022 11:40 PM] szybet
ok but... an entire os / hardware setup for the ui of an os?


[7/31/2022 11:40 PM] tux_linux
Yes because in a VM it's crap


[7/31/2022 11:40 PM] tux_linux
No graphics acceleration


[7/31/2022 11:40 PM] szybet
i know, but still


[7/31/2022 11:40 PM] szybet
only for the ui?


[7/31/2022 11:41 PM] tux_linux
Yeah, and some other things


[7/31/2022 11:41 PM] tux_linux
But mainly the UI


[7/31/2022 11:41 PM] tux_linux
+ some apps for music editing


[7/31/2022 11:41 PM] szybet
okay, i can understand that

{Reactions}
👍 

[8/1/2022 12:46 AM] szybet
it works on the nia with clear rootfs and the lates build


[8/1/2022 12:46 AM] szybet
finally


[8/1/2022 12:46 AM] tux_linux
Doesn't on the Touch


[8/1/2022 12:47 AM] szybet
whats the problem


[8/1/2022 12:47 AM] tux_linux
Will attach serial soon


[8/1/2022 12:47 AM] szybet
logs


[8/1/2022 12:47 AM] szybet
okay


[8/1/2022 4:56 AM] tux_linux
ok, better now


[8/1/2022 4:56 AM] tux_linux
I had forgotten to clear the cache


[8/1/2022 5:04 AM] tux_linux
It Works™️


[8/1/2022 5:05 AM] tux_linux
Even Wi-Fi


[8/1/2022 5:05 AM] tux_linux
good job


[8/1/2022 5:05 AM] tux_linux
FBInk works too


[8/1/2022 5:05 AM] tux_linux
now we need to support the Kindle


[8/1/2022 5:05 AM] tux_linux
and I'll test with the Aura


[8/1/2022 5:13 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commits/main


[8/1/2022 5:13 AM] tux_linux
Tiny commits, I unload the `arcotg_udc` module on older devices


[8/1/2022 5:15 AM] tux_linux
and we need to fix this
```
g: ignoring return value of ‘int fbink_set_fb_info(int, uint32_t, uint8_t, uint8_t, const FBInkConfig*)’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
  133 |       fbink_set_fb_info(fbfd, KEEP_CURRENT_ROTATE, 8, 1, &fbink_cfg);
      |       ~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/nicolas/Documents/inkbox-git/inkbox-power-daemon/src/fbinkFunctions.cpp:138:26: warning: ignoring return value of ‘int fbink_set_fb_info(int, uint32_t, uint8_t, uint8_t, const FBInkConfig*)’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
  138 |         fbink_set_fb_info(fbfd, KEEP_CURRENT_ROTATE, 32, 1, &fbink_cfg);
      |         ~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/nicolas/Documents/inkbox-git/inkbox-power-daemon/src/fbinkFunctions.cpp:141:26: warning: ignoring return value of ‘int fbink_set_fb_info(int, uint32_t, uint8_t, uint8_t, const FBInkConfig*)’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
  141 |         fbink_set_fb_info(fbfd, KEEP_CURRENT_ROTATE, 16, 1, &fbink_cfg);
```


[8/1/2022 6:16 AM] tux_linux
sleepCall doesn't work in `/kobo`


[8/1/2022 6:16 AM] tux_linux
probably an inotify problem


[8/1/2022 6:16 AM] tux_linux
```
kobo:~# echo sleep > /kobo/dev/ipd/sleepCall
kobo:~# echo sleep > /run/ipd/sleepCall
Mon Aug  1 00:16:17 2022 | configUpdate: inotify read up
kobo:~# Mon Aug  1 00:16:17 2022 | configUpdate: inotify loop executed
Mon Aug  1 00:16:17 2022 | configUpdate: inotify: Detected a create event of name: sleepCall
Mon Aug  1 00:16:17 2022 | configUpdate: sleepInotifyCall called, going to sleep (probably)
Mon Aug  1 00:16:17 2022 | functions: /run/ipd/sleepCall is: sleep
Mon Aug  1 00:16:17 2022 | configUpdate: Going to sleep, trigger: inotify call
Mon Aug  1 00:16:17 2022 | configUpdate: inotify loop executed
Mon Aug  1 00:16:17 2022 | configUpdate: inotify: Detected a modification event of name: sleepCall
Mon Aug  1 00:16:17 2022 | configUpdate: sleepInotifyCall called, going to sleep (probably)
Mon Aug  1 00:16:17 2022 | configUpdate: All events read
Mon Aug  1 00:16:17 2022 | watchdog: Watchdog event received
Mon Aug  1 00:16:17 2022 | watchdog: Skipping watchdog event because of option '3 - whenChargerSleep'
Mon Aug  1 00:16:17 2022 | watchdog: sleepJob is something else (propably 'Skip'). Changing it to 'Nothing'
```


[8/1/2022 6:16 AM] tux_linux
the first two lines are relevant


[8/1/2022 6:16 AM] tux_linux
it only sleeps after the second command


[8/1/2022 6:19 AM] tux_linux
sleepCall doesn't work completely, and not at all from the GUI
only the power button does, or my `touch_emulate` program
is there something I'm missing?


[8/1/2022 6:19 AM] tux_linux
here

{Attachments}
/mnt/data/projects/git/conversations/media/message-F9F5D.txt


[8/1/2022 6:20 AM] tux_linux
wi-fi reconnection needs more fixing


[8/1/2022 6:20 AM] tux_linux
doesn't work on aura se


[8/1/2022 6:21 AM] tux_linux
will provide you logs soon
but now it's charging
with half-broken usb port
so it can't move


[8/1/2022 6:25 AM] tux_linux
complete sleep-wake log on the Aura SE

{Attachments}
/mnt/data/projects/git/conversations/media/message-A3A91.txt


[8/1/2022 6:25 AM] tux_linux
the charger error is normal


[8/1/2022 6:26 AM] tux_linux
fbink works ok


[8/1/2022 6:27 AM] tux_linux
dirty log, and I restarted ipd once (I think)

{Attachments}
/mnt/data/projects/git/conversations/media/ipd-C3A9E.log


[8/1/2022 6:30 AM] tux_linux
+ not any led worked on any of my devices with the use led option on them


[8/1/2022 6:30 AM] tux_linux
```
undefined: Got back from suspend
```
small log to fix
edit: done


[8/1/2022 9:58 AM] szybet
1 you can't restart the ipd if you want slepcall to work
2 latest version of IPd and GUI are needed


[8/1/2022 9:59 AM] szybet
Um... Give me those devices model numbers


[8/1/2022 10:08 AM] szybet
Weird


[8/1/2022 10:10 AM] szybet
Not even 1% drop of battery with the nia when deep sleeping for 8 hours


[8/1/2022 10:10 AM] szybet
Looks good for the first try


[8/1/2022 11:07 AM] tux_linux
And with sleep only?


[8/1/2022 11:07 AM] tux_linux
Every of them except Nia


[8/1/2022 11:45 AM] szybet
Weird weird weird


[8/1/2022 11:45 AM] szybet
I will look later into it


[8/1/2022 11:45 AM] szybet
Measurements take time


[8/1/2022 1:59 PM] szybet
```
      // i.MX 507/508 : Arc USBOTG Device Controller Driver
      if(deleteModule(string("arcotg_udc").c_str(), O_NONBLOCK) != 0) {
        log("Can't unload module: arcotg_udc", emitter);
      }
```
put it in an if with the devices that need this


[8/1/2022 2:01 PM] szybet
as i said
```
1 you can't restart the ipd if you want slepcall to work
2 latest version of IPd and GUI are needed

```


[8/1/2022 2:02 PM] szybet
i dont see any errors in the logs


[8/1/2022 2:03 PM] szybet
```
void getLedPath()
{
  if(model == "n705" or model == "n905b" or model == "n905c" or model == "n613") {
    ledPath =  "/sys/class/leds/pmic_ledsb/brightness";
  }
  else if(model == "n306") {
    ledPath = "/sys/class/leds/GLED/brightness";
  }
  else if(model == "bpi") {
    ledPath = "/sys/devices/platform/leds/leds/bpi:red:pwr/brightness";
  }
  else if(model == "kt") {
    ledPath = "/sys/class/leds/pmic_ledsb/brightness";
  }
  else if(model == "n236" or model == "n437") {
    /*
    // Netronix things
    int light;
        if((light = open("/dev/ntx_io", O_RDWR)) == -1) {
          fprintf(stderr, "Error opening ntx_io device\n");
        }
        ioctl(light, 127, 0);
    }
    */
    ledPath = "ntx";
  } 
  else {
    ledPath = "/sys/class/leds/pmic_ledsb/brightness";
  }
}
```


[8/1/2022 2:04 PM] szybet
here its simply choosing the path to it, an then its writing 1 and 0 to it


[8/1/2022 2:04 PM] szybet
for model == "n236" or model == "n437" you need to test ioctl writings, if 0 and 1 work as expected


[8/1/2022 3:03 PM] tux_linux
You didn't do that... anywhere


[8/1/2022 3:03 PM] tux_linux
And not every device even has the module u_ether for example


[8/1/2022 3:05 PM] tux_linux
Why can't it work if it is restarted?


[8/1/2022 3:55 PM] tux_linux
ok, there's actually worse than spelling `reconnect` wrong

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A57B8.png


[8/1/2022 3:55 PM] tux_linux
`conitnuous`


[8/1/2022 4:05 PM] szybet
well okay then


[8/1/2022 4:06 PM] tux_linux
the aura seems to only have a `ntx_io` control for blinking the led


[8/1/2022 4:06 PM] tux_linux
not lighting it still


[8/1/2022 4:06 PM] szybet
is that my code?


[8/1/2022 4:06 PM] tux_linux
no


[8/1/2022 4:06 PM] tux_linux
kobo kernel code


[8/1/2022 4:06 PM] szybet
good


[8/1/2022 4:06 PM] szybet
wtf😂


[8/1/2022 4:06 PM] tux_linux
so much inconsistency


[8/1/2022 4:07 PM] tux_linux
what did you expect
kobo kernel code


[8/1/2022 4:07 PM] tux_linux
it's like that everywhere ntx has written something, so I've not bothered to fix it, it'd be too long


[8/1/2022 4:07 PM] szybet
the tmpfs is mounted, but it already exist so nothing happens but the mind bind breaks


[8/1/2022 4:07 PM] szybet
¯\_(ツ)_/¯


[8/1/2022 4:21 PM] tux_linux
how to know previous led status if we can't read it?


[8/1/2022 4:21 PM] szybet
why we cant read it


[8/1/2022 4:22 PM] tux_linux
aura se only has ntx_io


[8/1/2022 4:22 PM] szybet
i will do this - just give me a way to set 1 and 0


[8/1/2022 4:22 PM] tux_linux
no sysfs at all


[8/1/2022 4:22 PM] tux_linux
why is there changeLedState and setLedState?


[8/1/2022 4:23 PM] szybet
you havent seen yet - while going to sleep the led changes its state based on what it has done ( wifi turned off, change led state etc )

and when setting state_extended, its blinks fast

and when finally going to sleep it blinks not too fast

so its just a function to do this automatically


[8/1/2022 4:24 PM] tux_linux
do we absolutely need it


[8/1/2022 4:24 PM] szybet
yes


[8/1/2022 4:24 PM] szybet
i love it


[8/1/2022 4:24 PM] tux_linux
because aura se could live fine without it


[8/1/2022 4:25 PM] tux_linux
only `setLedState()`


[8/1/2022 4:25 PM] szybet
+ its an option
+ its just like on kindles, maybe even better


[8/1/2022 4:25 PM] szybet
its your decission


[8/1/2022 4:25 PM] tux_linux
which is executed first


[8/1/2022 4:25 PM] tux_linux
change or set


[8/1/2022 4:26 PM] szybet
i dont remember

can you give me those functions? i will do this, its my code i know it the best


[8/1/2022 4:26 PM] tux_linux
i've already started working on them


[8/1/2022 4:27 PM] szybet
in prepare variables there is something that sets the led state

and it saves the state to not need to read it

and ledManager works with this state


[8/1/2022 4:27 PM] szybet
something like that


[8/1/2022 4:28 PM] tux_linux
I could just use `ledState`, yes


[8/1/2022 4:28 PM] szybet
dont break the code for other devices


[8/1/2022 4:28 PM] szybet
you only need to edit devices.cpp where led related stuff is going on


[8/1/2022 4:28 PM] szybet
add it a way to set the led, and to turn it off


[8/1/2022 4:28 PM] szybet
there are fnctions for this


[8/1/2022 4:36 PM] tux_linux
does wifi reconnection work on the nia?
does the gui says it's reconnecting?


[8/1/2022 4:37 PM] szybet
let me try


[8/1/2022 4:37 PM] szybet
still 98%, just like 6h ago :D


[8/1/2022 4:37 PM] tux_linux
hmm


[8/1/2022 4:40 PM] tux_linux
can only `getAccurateChargerStatus` be used or we also need `getChargerStatus`?


[8/1/2022 4:40 PM] szybet
there is a cool comment explaining this


[8/1/2022 4:41 PM] tux_linux
i know


[8/1/2022 4:41 PM] tux_linux
but is it necessary


[8/1/2022 4:41 PM] tux_linux
because I want to change this to CM_USB_Plug_IN with ntx_io
it's far more reliable


[8/1/2022 4:41 PM] tux_linux
the GUI uses it


[8/1/2022 4:41 PM] szybet
what is this


[8/1/2022 4:42 PM] tux_linux
```
int ntxfd;
if((ntxfd = open("/dev/ntx_io", O_RDWR)) == -1) {
  fprintf(stderr, "Error opening ntx_io device\n");
}
unsigned long ptr = 0U;
ioctl(ntxfd, CM_USB_Plug_IN, &ptr);
close(ntxfd);
return !!ptr;
```


[8/1/2022 4:42 PM] szybet
what does it do


[8/1/2022 4:42 PM] tux_linux
check if USB is plugged in


[8/1/2022 4:42 PM] tux_linux
returns true or false


[8/1/2022 4:43 PM] tux_linux
should work in every kobo


[8/1/2022 4:43 PM] szybet
i want to know if its plugged, and if its charging


[8/1/2022 4:43 PM] szybet
there are 3 states


[8/1/2022 4:43 PM] tux_linux
ok so you want the led to turn off when it's full?


[8/1/2022 4:43 PM] szybet
exactly


[8/1/2022 4:44 PM] tux_linux
ok, I will put it in `getChargerStatus` then


[8/1/2022 4:44 PM] szybet
exactly


[8/1/2022 4:50 PM] tux_linux
?


[8/1/2022 4:51 PM] szybet
um no


[8/1/2022 4:51 PM] szybet
no "recconection label"


[8/1/2022 4:52 PM] tux_linux
tmpfs remount issue?


[8/1/2022 4:52 PM] tux_linux
we're not supposed to touch /run


[8/1/2022 4:52 PM] szybet
hm? what?


[8/1/2022 4:53 PM] tux_linux
it might be related to this
```
nicolas@debian-code ~/D/i/i/src (main)> rg mount
pipeHandler.cpp
10:#include <sys/mount.h>
29:  // Note: Creating this tmpfs will kill the bind mount to /kobo/dev/ipd. The bind mount needs to be done after it
31:  rc = mount("tmpfs", pipeDirectoryPath.c_str(), "tmpfs", 0, options.c_str());

prepareSleep.cpp
104:    writeFileString("/kobo/inkbox/remount", "false");
nicolas@debian-code ~/D/i/i/src (main)> rg pipeDirectory
pipeHandler.cpp
14:string pipeDirectoryPath = "/run/ipd/";
15:string pipePath = pipeDirectoryPath + "fifo";
21:    experimental::filesystem::create_directory(pipeDirectoryPath);
31:  rc = mount("tmpfs", pipeDirectoryPath.c_str(), "tmpfs", 0, options.c_str());
nicolas@debian-code ~/D/i/i/src (main)>
```
Even if it should not cause problems


[8/1/2022 4:53 PM] szybet
i dont understand?


[8/1/2022 4:54 PM] tux_linux
also, if the device is powered on and is charging, the led doesn't light up until I unplug + replug the charger again


[8/1/2022 4:54 PM] tux_linux
`/run/was_connected_to_wifi` is the file that tells the GUI to display 'Reconnecting'


[8/1/2022 4:55 PM] szybet
on what devices?


[8/1/2022 4:55 PM] szybet
it does work on the nia


[8/1/2022 4:55 PM] tux_linux
aura se


[8/1/2022 4:55 PM] szybet
i connect the charger


[8/1/2022 4:55 PM] szybet
and the led lights up


[8/1/2022 4:55 PM] tux_linux
yes, that works


[8/1/2022 4:55 PM] tux_linux
I'm telling that if the device is already charging when ipd launches, the LED doesn't light up


[8/1/2022 4:56 PM] szybet
such a rare bug that ugh


[8/1/2022 4:56 PM] tux_linux
rare?


[8/1/2022 4:56 PM] szybet
`when ipd launches` 
it launches once


[8/1/2022 4:56 PM] szybet
i will fix it


[8/1/2022 4:56 PM] tux_linux
i.e. when the device is powered on


[8/1/2022 4:56 PM] szybet
adding it to the todo list


[8/1/2022 4:56 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/9090758f6b37e39361817e588c87013fb9c39401

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/9090758f6b37e39361817e588c87013fb9c39401
ntx_io things · Kobo-InkBox/inkbox-power-daemon@9090758
/mnt/data/projects/git/conversations/media/9090758f6b37e39361817e588c87013fb9c39401-7A5FE


[8/1/2022 4:59 PM] szybet
looks good

{Reactions}
👍 

[8/1/2022 5:00 PM] tux_linux
I also pushed a small commit to support the Libra's LED (n873)


[8/1/2022 5:01 PM] szybet
i see


[8/1/2022 5:02 PM] tux_linux
do you have docs for led blink speed and what it means?


[8/1/2022 5:02 PM] szybet
i think not


[8/1/2022 5:02 PM] tux_linux
you should


[8/1/2022 5:02 PM] szybet
the typical user wont care about it


[8/1/2022 5:49 PM] tux_linux
ensure to handle idle sleep if user wants to suspend but a charger is plugged in and you want to show a toast
prevent idle sleep from showing the toast


[8/1/2022 5:49 PM] tux_linux
also, if you can, try to fix the reconnection thing


[8/1/2022 5:50 PM] tux_linux
i'm testing ipd on kindle currently


[8/1/2022 5:50 PM] szybet
okay


[8/1/2022 5:50 PM] szybet
how do i show a toast if sleep thread is launched from main?


[8/1/2022 5:51 PM] tux_linux
oh


[8/1/2022 5:51 PM] szybet
yea


[8/1/2022 5:53 PM] tux_linux
we can fake it with fbink


[8/1/2022 5:53 PM] tux_linux
and users will get notified even when running an user app or in X11


[8/1/2022 5:54 PM] tux_linux
Ok, I think I have an idea


[8/1/2022 5:55 PM] tux_linux
```
Tue Feb 17 14:03:31 1970 | configUpdate: inotify: Detected a create event of name: sleepCall
Tue Feb 17 14:03:31 1970 | configUpdate: sleepInotifyCall called, going to sleep (probably)
Tue Feb 17 14:03:31 1970 | functions: /run/ipd/sleepCall is: true
Tue Feb 17 14:03:31 1970 | configUpdate: inotify loop executed
Tue Feb 17 14:03:31 1970 | configUpdate: inotify: Detected a modification event of name: sleepCall
Tue Feb 17 14:03:31 1970 | configUpdate: sleepInotifyCall called, going to sleep (probably)
Tue Feb 17 14:03:31 1970 | functions: /run/ipd/sleepCall is: true
Tue Feb 17 14:03:31 1970 | configUpdate: All events read
```
same bug here with sleepCall


[8/1/2022 5:56 PM] szybet
it can be buggy


[8/1/2022 5:56 PM] tux_linux
yes but it's better than nothing


[8/1/2022 5:56 PM] tux_linux
I have an idea, I said


[8/1/2022 5:56 PM] szybet
```
Tue Feb 17 14:03:31 1970 | functions: /run/ipd/sleepCall is: true
```
wtf?


[8/1/2022 5:56 PM] szybet
`sleep` or `deepSleep`


[8/1/2022 5:57 PM] tux_linux
oh


[8/1/2022 5:57 PM] tux_linux
nvm


[8/1/2022 5:57 PM] tux_linux
but wait


[8/1/2022 5:57 PM] tux_linux
i'm not sure it will work either


[8/1/2022 5:57 PM] tux_linux
ok it does


[8/1/2022 5:57 PM] tux_linux
but no fbink
because it needs the kindle library


[8/1/2022 5:59 PM] tux_linux
sleep/wake log on Kindle

{Attachments}
/mnt/data/projects/git/conversations/media/message-E0C33.txt


[8/1/2022 5:59 PM] tux_linux
we need to implement this
```
    #include <sys/socket.h>
    #include <linux/netlink.h>
    #include <stdbool.h>
    #include <stdlib.h>
    
    #define MAX_PAYLOAD 1024  /* maximum payload size*/
    
    struct sockaddr_nl src_addr, dest_addr;
    struct nlmsghdr *nlh = NULL;
    struct msghdr msg;
    struct iovec iov;
    int sock_fd;
    
    int main()
    {
            /* Changed LJ article example to use NETLINK_KOBJECT_UEVENT */
            sock_fd=socket(PF_NETLINK, SOCK_RAW, NETLINK_KOBJECT_UEVENT);
            memset(&src_addr, 0, sizeof(src_addr));
            src_addr.nl_family = AF_NETLINK;
            src_addr.nl_pid = getpid(); // self pid
            src_addr.nl_groups = 1;     // interested in group 1<<0
            bind(sock_fd, (struct sockaddr*)&src_addr, sizeof(src_addr));
            memset(&dest_addr, 0, sizeof(dest_addr));
            nlh = (struct nlmsghdr *)malloc(NLMSG_SPACE(MAX_PAYLOAD));
            memset(nlh, 0, NLMSG_SPACE(MAX_PAYLOAD));
            iov.iov_base = (void *)nlh;
            iov.iov_len = NLMSG_SPACE(MAX_PAYLOAD);
            msg.msg_name = (void *)&dest_addr;
            msg.msg_namelen = sizeof(dest_addr);
            msg.msg_iov = &iov;
            msg.msg_iovlen = 1;
    
            while(true) {
                    /* Read message from kernel */
                    recvmsg(sock_fd, &msg, 0);
    
                    if(strcmp(NLMSG_DATA(nlh), "virtual/misc/yoshibutton") == 0) {
                            break;
                    }
            }
            close(sock_fd);
            return 0;
    }
```


[8/1/2022 6:00 PM] tux_linux
to detect power button events


[8/1/2022 6:00 PM] szybet
w h a t


[8/1/2022 6:01 PM] tux_linux
i did not write this


[8/1/2022 6:01 PM] tux_linux
well, only a small part of it


[8/1/2022 6:01 PM] szybet
maybe... create a file monitorEventsKindle


[8/1/2022 6:01 PM] tux_linux
the program terminates when the power button is pressed


[8/1/2022 6:01 PM] szybet
and do this there


[8/1/2022 6:01 PM] szybet
and choose to what to launch in main


[8/1/2022 6:01 PM] tux_linux
on `break`


[8/1/2022 6:01 PM] tux_linux
another file for only this?


[8/1/2022 6:02 PM] szybet
yes


[8/1/2022 6:02 PM] szybet
we dont need libevdev running when this is needd


[8/1/2022 6:02 PM] szybet
doing this in a huge if will look awfull


[8/1/2022 6:02 PM] tux_linux
it already looks kinda awful with do { } while


[8/1/2022 6:03 PM] szybet
then it will look awfull in a file i will not look in


[8/1/2022 6:03 PM] tux_linux
?


[8/1/2022 6:03 PM] szybet
it will be cleaner this way


[8/1/2022 6:04 PM] tux_linux
I will make another function in `monitorEvents`


[8/1/2022 6:05 PM] tux_linux
but really, it would be better with an if condition


[8/1/2022 6:05 PM] tux_linux
and I have next to none experience with threads


[8/1/2022 6:05 PM] szybet
no


[8/1/2022 6:05 PM] tux_linux
well, then this?


[8/1/2022 6:06 PM] szybet
an if condition in main.cpp, yes


[8/1/2022 6:06 PM] szybet
otherwise no


[8/1/2022 6:06 PM] szybet
if you will write code like that soon you will need to scroll horizonally becouse of so many ifs in one place


[8/1/2022 6:07 PM] tux_linux
it's literally just `if(model != "kt") { } else { }` with 2-space tab


[8/1/2022 6:07 PM] szybet
exactly this code could be used in main.cpp and with this approuch monitorEvents will be cleaner


[8/1/2022 6:08 PM] tux_linux
and kt is the only exception I know about
AFAIR, recent Kindles have an input device node for the power button


[8/1/2022 6:08 PM] szybet
so use a separate file for it, if its used only by him?


[8/1/2022 6:08 PM] tux_linux
well, no
the file name will be misleading


[8/1/2022 6:08 PM] szybet
monitorEventsKindleTouch


[8/1/2022 6:08 PM] tux_linux
if we support other kindles that have an event device


[8/1/2022 6:08 PM] szybet
,_  ,


[8/1/2022 6:09 PM] tux_linux
monitorEventsKT


[8/1/2022 6:09 PM] szybet
if the setup is similar to kobos, we can maybe change only a bit the code in monitorEvents


[8/1/2022 6:09 PM] szybet
not a whole if that isin;t used


[8/1/2022 6:28 PM] tux_linux
why


[8/1/2022 6:28 PM] szybet
i still want an diffrent file


[8/1/2022 6:29 PM] tux_linux
then we could just switch
```
if(model != "kt") {
  thread monitorDev(startMonitoringDev);
}
else {
  thread monitorDev(startMonitoringDevKT);
}
```


[8/1/2022 6:29 PM] tux_linux
now the compiler errors because `startMonitoringDev` is defined twice


[8/1/2022 6:29 PM] szybet
exactly i want this


[8/1/2022 6:29 PM] szybet
just name it in another way


[8/1/2022 6:29 PM] tux_linux
yes, so why not just put `startMonitoringDevKT` in `monitorEvents.cpp`


[8/1/2022 6:30 PM] szybet
fine


[8/1/2022 6:30 PM] szybet
fine


[8/1/2022 6:30 PM] tux_linux
ok


[8/1/2022 6:30 PM] tux_linux
thanks


[8/1/2022 6:50 PM] tux_linux
how do you declare this?
```
thread monitorDev;
  if(model != "kt") {
    thread monitorDev(startMonitoringDev);
  }
  else {
    thread monitorDev(startMonitoringDevKT);
  }
```
If I don't put `thread monitorDev;` at the top the compiler errors out at
```
/home/nicolas/Documents/inkbox-git/inkbox-power-daemon/src/main.cpp: In function ‘int main()’:
/home/nicolas/Documents/inkbox-git/inkbox-power-daemon/src/main.cpp:56:3: error: ‘monitorDev’ was not declared in this scope
   56 |   monitorDev.join();
```


[8/1/2022 6:50 PM] tux_linux
but then like it's redefined or whatever, so idk what to do


[8/1/2022 7:01 PM] tux_linux
ok, found the way


[8/1/2022 7:02 PM] szybet
look at watchdog.cpp


[8/1/2022 7:02 PM] szybet
you need to put it on the top ;p


[8/1/2022 7:03 PM] tux_linux
I did it like that
```
  thread monitorDev;
  if(model != "kt") {
    monitorDev = thread(startMonitoringDev);
  }
  else {
    monitorDev = thread(startMonitoringDevKT);
  }
  thread watchdogThread(startWatchdog);
  thread watchConfig(startMonitoringConfig);
  thread idleSleep(startIdleSleep);
```


[8/1/2022 7:03 PM] szybet
exactly


[8/1/2022 7:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220801_192608-6F539.jpg


[8/1/2022 7:27 PM] szybet
Music playing from kobo nia

{Reactions}
😮 

[8/1/2022 7:27 PM] tux_linux
great, how


[8/1/2022 7:27 PM] szybet
Custom kernel, custom cable, alpine packages


[8/1/2022 7:28 PM] tux_linux
what's the custom cable


[8/1/2022 7:28 PM] tux_linux
custom kernel is inkbox one?


[8/1/2022 7:28 PM] szybet
Yes, and surprisingly small one, 9.9mb


[8/1/2022 7:28 PM] tux_linux
you changed the config or it's the one in the repo?


[8/1/2022 7:28 PM] szybet
External power delivery

{Reactions}
👍 

[8/1/2022 7:28 PM] szybet
I changed it a bit


[8/1/2022 7:29 PM] tux_linux
ok


[8/1/2022 7:29 PM] szybet
You want the config in your repo?


[8/1/2022 7:29 PM] tux_linux
why not


[8/1/2022 7:29 PM] tux_linux
how much does it increase the kernel size


[8/1/2022 7:30 PM] tux_linux
you can just send `git diff HEAD` if you don't want to do a PR


[8/1/2022 7:30 PM] szybet
0.1 Mb? maybe ~0.2
audio is already enabled in the default ;p is just added midi things


[8/1/2022 7:31 PM] szybet
i dont think there is a way too choose a custom config for a build in the kernel currently


[8/1/2022 7:31 PM] tux_linux
it's usb audio?


[8/1/2022 7:31 PM] szybet
yes


[8/1/2022 7:31 PM] szybet
PCM2704 usb sound card

{Reactions}
👍 

[8/1/2022 7:31 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/c7b14908ce7a8eae958f5ab0482ba8e4245fb02a


[8/1/2022 7:32 PM] szybet
looks good

{Reactions}
👍 

[8/1/2022 7:33 PM] tux_linux
maybe test it on the nia to ensure nothing catched on fire


[8/1/2022 7:33 PM] szybet
i will today

{Reactions}
👍 

[8/1/2022 7:33 PM] tux_linux
and look if you see what's causing the reconnection issue in the gui


[8/1/2022 7:33 PM] szybet
do you know any other usb sound card, that works under linux, is small and widely produced? you are a music guy a bit


[8/1/2022 7:34 PM] szybet
i will, its weird tho


[8/1/2022 7:34 PM] tux_linux
i'm a music guy but not much an usb audio guy


[8/1/2022 7:34 PM] szybet
usb audio guy 😆


[8/1/2022 7:34 PM] tux_linux
i use 3.5mm audio ports


[8/1/2022 7:35 PM] szybet
i mean - usb to jack sound cards


[8/1/2022 7:35 PM] szybet
DAC


[8/1/2022 7:36 PM] tux_linux
https://www.adafruit.com/product/1475 ?

{Embed}
https://www.adafruit.com/product/1475
USB Audio Adapter - Works with Raspberry Pi
The Raspberry Pi has an on-board audio jack, which is super handy for all kinds of sound effects and speech, just plug and go! However, for when you want better audio for music playback, a  ...
/mnt/data/projects/git/conversations/media/1475-03-C52A2.jpg


[8/1/2022 7:37 PM] szybet
hmmm


[8/1/2022 7:37 PM] szybet
thats something


[8/1/2022 7:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/config-n306-AC0B9


[8/1/2022 7:49 PM] szybet
here, if you want


[8/1/2022 7:50 PM] tux_linux
ok thanks


[8/1/2022 7:58 PM] szybet
are you using udev for something?


[8/1/2022 7:58 PM] tux_linux
not really


[8/1/2022 7:58 PM] tux_linux
why


[8/1/2022 7:59 PM] tux_linux
well, for populating `/dev`


[8/1/2022 7:59 PM] tux_linux
i think


[8/1/2022 7:59 PM] szybet
its eating 0.3% of ram all the time


[8/1/2022 8:00 PM] tux_linux
0.1M


[8/1/2022 8:01 PM] tux_linux
it is reasonable


[8/1/2022 8:01 PM] szybet
you have more ram ;p


[8/1/2022 8:01 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A5AB5.png


[8/1/2022 8:01 PM] tux_linux
no, I calculated with 256M


[8/1/2022 8:01 PM] szybet
im not calculating this


[8/1/2022 8:02 PM] tux_linux
wdym


[8/1/2022 8:02 PM] szybet
its writed here


[8/1/2022 8:02 PM] tux_linux
yes, 0.3% of 256M of RAM is 0.1M


[8/1/2022 8:03 PM] szybet
oh, you are talking with M


[8/1/2022 8:03 PM] tux_linux
yes?


[8/1/2022 8:03 PM] szybet
well, if it isint needed for anything then dont use it


[8/1/2022 10:04 PM] szybet
https://github.com/Kobo-InkBox/rootfs/commit/aca0ceb989e0c10b4c29d3dee368d690db6a6788

how do you manage what library is used?


[8/1/2022 10:06 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/8ecb50456f077813402c124ba81b8f57362f0a36


[8/1/2022 10:07 PM] szybet
oh here


[8/1/2022 10:07 PM] szybet
cool

{Reactions}
👍 

[8/1/2022 10:37 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/notify-7E457.png


[8/1/2022 10:37 PM] tux_linux
imagemagick + fbink


[8/1/2022 10:38 PM] szybet
i really hope this will work good

{Reactions}
👍 

[8/1/2022 11:01 PM] szybet
the ipd is too fast


[8/1/2022 11:01 PM] szybet
its removing was_connected_to_wifi too fast


[8/1/2022 11:01 PM] szybet
can connect_to_network.sh remove this file if it exists?


[8/1/2022 11:02 PM] szybet
yes it must


[8/1/2022 11:07 PM] szybet
it works on the nia:
1. connect charger, led is off
2. launch ipd, led turns on on itself

idk the issue, look up ledManager, which is executed in watchdog


[8/1/2022 11:08 PM] szybet
i dont have access to rootfs repo, so you do it or i will make a pull request tommorow


[8/1/2022 11:13 PM] tux_linux
if you connect charger and the device powers on, does the led light up?


[8/1/2022 11:13 PM] tux_linux
how too fast


[8/1/2022 11:13 PM] szybet
it doesnt wait for connect_to_network to finish


[8/1/2022 11:13 PM] tux_linux
inkbox gui usually removes was_connected_to_wifi
ipd isn't supposed to remove it


[8/1/2022 11:13 PM] szybet
oh, let me try it


[8/1/2022 11:13 PM] szybet
really?


[8/1/2022 11:14 PM] szybet
the old manager was removing it


[8/1/2022 11:14 PM] tux_linux
hm no actually


[8/1/2022 11:14 PM] tux_linux
yea, connect_to_network can remove it


[8/1/2022 11:14 PM] szybet
idk


[8/1/2022 11:17 PM] ninuje
Spoiler alert: it isn't always. (c.f., https://github.com/koreader/KoboUSBMS/blob/f4adbbb2909c96b9af4a3223ffa1501e8224498d/usbms.c#L837-L838)

{Embed}
https://github.com/koreader/KoboUSBMS/blob/f4adbbb2909c96b9af4a3223ffa1501e8224498d/usbms.c
KoboUSBMS/usbms.c at f4adbbb2909c96b9af4a3223ffa1501e8224498d · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[8/1/2022 11:17 PM] tux_linux
oh, that's true


[8/1/2022 11:21 PM] ninuje
Oh, hai: https://github.com/koreader/KoboUSBMS/blob/master/libue/libue.h

{Embed}
https://github.com/koreader/KoboUSBMS/blob/master/libue/libue.h
KoboUSBMS/libue.h at master · koreader/KoboUSBMS
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[8/1/2022 11:22 PM] tux_linux
but why are you doing it

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-2C40D.png


[8/1/2022 11:23 PM] szybet
no, not this place


[8/1/2022 11:23 PM] szybet
its removing than creating


[8/1/2022 11:23 PM] szybet
to be sure nothing is messed up inside the file


[8/1/2022 11:23 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A6F41.png


[8/1/2022 11:23 PM] szybet
yes, this, i forgot to comment it, wait i will commit soon


[8/1/2022 11:24 PM] tux_linux
It's already implemented anyways
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/c7b14908ce7a8eae958f5ab0482ba8e4245fb02a/src/monitorEvents.cpp#L139-L189
But what would it have done exactly?


[8/1/2022 11:24 PM] tux_linux
remove it


[8/1/2022 11:24 PM] tux_linux
don't comment it


[8/1/2022 11:24 PM] tux_linux
remove it


[8/1/2022 11:24 PM] szybet
okay

{Reactions}
👍 

[8/1/2022 11:25 PM] ninuje
It's a sane implementation made for poll & nonblocking IO instead of a busy loop relying on blocking semantics


[8/1/2022 11:26 PM] tux_linux
oh


[8/1/2022 11:26 PM] tux_linux
we're already threaded, so...


[8/1/2022 11:26 PM] ninuje
Yet another useless thread, yay.


[8/1/2022 11:26 PM] tux_linux
i guess it doesn't matter too much here


[8/1/2022 11:26 PM] tux_linux
it's not yet another, it's the same thing as the other function above but for Kindle


[8/1/2022 11:27 PM] ninuje
(I will die on that hill: splitting each poll loop into its own thread is *awful*)


[8/1/2022 11:27 PM] tux_linux
do you have a suggestion for a fix if it isn't to rewrite the whole thing?


[8/1/2022 11:28 PM] ninuje
A single main (polling) loop based on a pollfd table (i.e., an array)

{Reactions}
👍 

[8/1/2022 11:30 PM] ninuje
And another array to map fds to what they actually point to so you know what to do ;p


[8/1/2022 11:47 PM] szybet
done.


[8/1/2022 11:47 PM] szybet
commited

{Reactions}
👍 

[8/1/2022 11:47 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/notify-D7F29.png


[8/1/2022 11:48 PM] szybet
will it work on all devices? will fragments on it be still there because qt eink didn't refreshed the screen fully?


[8/1/2022 11:48 PM] tux_linux
well, yeah, but what do you expect
we can't lock a fb region (afaik)
plus, it works in userapps, bare fb or x11


[8/1/2022 11:49 PM] szybet
:(


[8/1/2022 11:49 PM] tux_linux
because


[8/1/2022 11:49 PM] tux_linux
yes, it will work on all devices


[8/1/2022 11:49 PM] szybet
ugh


[8/1/2022 11:49 PM] szybet
maybe put it on the center? higher chance it will be fully refreshedd


[8/1/2022 11:50 PM] tux_linux
oh, it is fully refreshed


[8/1/2022 11:50 PM] tux_linux
after qt might print to some of it


[8/1/2022 11:50 PM] tux_linux
or might not


[8/1/2022 11:52 PM] szybet
?


[8/1/2022 11:52 PM] tux_linux
.


[8/1/2022 11:52 PM] szybet
Also make it modular - this could be helpfull in the future


[8/1/2022 11:53 PM] tux_linux
it is already modular


[8/1/2022 11:53 PM] szybet
Will it on all devices?


[8/1/2022 11:53 PM] tux_linux
```
#!/bin/sh

calculate() {
    result=$(awk "BEGIN { print "$*" }")
    printf "%.0f\n" ${result}
}

[ -z "${1}" ] && printf "Please provide the 'message' argument.\n" && exit 1
message="${1}"
DEVICE="$(cat /opt/inkbox_device)"

eval $(fbink -e)

if [ "${DEVICE}" == "n705" ] || [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n905c" ] || [ "${DEVICE}" == "kt" ]; then
    info_yf=33.5
    info_xf=26
    info_wf=14
    info_hf=19
    text_tf=30.5
    text_lf=8.2
    notification_canvas_file="/etc/images/notification_canvas-600x800.png"
elif [ "${DEVICE}" == "n613" ] || [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n306" ]; then
    info_yf=34.5
    info_xf=26
    info_wf=14
    info_hf=19
    text_tf=29.5
    text_lf=8.5
    notification_canvas_file="/etc/images/notification_canvas-768x1024.png"
elif [ "${DEVICE}" == "n437" ]; then
    info_yf=37
    info_xf=26
    info_wf=14
    info_hf=19
    text_tf=29.5
    text_lf=8.5
    notification_canvas_file="/etc/images/notification_canvas-1072x1448.png"
else
    info_yf=37
    info_xf=26
    info_wf=14
    info_hf=19
    text_tf=29.5
    text_lf=8.5
    notification_canvas_file="/etc/images/notification_canvas-1264x1680.png"
fi

# Canvas
fbink -q -w -g file="${notification_canvas_file}"
# Info icon
fbink -q -w -g file="/etc/images/info.png",x=$(calculate ${viewWidth}/${info_xf}),y=$(calculate ${viewHeight}/${info_yf}),w=$(calculate ${viewWidth}/${info_wf}),h=$(calculate ${viewHeight}/${info_hf})
# Message
fbink -q -w -t regular=/usr/share/fonts/u001-reg.ttf,size=15,top=$(calculate ${viewHeight}/${text_tf}),left=$(calculate ${viewWidth}/${text_lf}) "${message}"

# Simple example to create a canvas
# convert -size ${viewWidth}x$(calculate ${viewHeight}/9) xc:white -fill transparent -stroke black -strokewidth 5 -draw "roundrectangle 10,10 $(calculate ${viewWidth}-10),$(calculate ${viewHeight}/10) 10,10" out.png
```


[8/1/2022 11:53 PM] szybet
Good


[8/1/2022 11:53 PM] tux_linux
`/usr/local/bin/notify-send`


[8/1/2022 11:53 PM] tux_linux
I want to rewrite it in C but for now it's fine and is pretty fast


[8/2/2022 12:13 AM] tux_linux
```
diff --git a/usr/local/bin/wifi/connect_to_network.sh b/usr/local/bin/wifi/connect_to_network.sh
index 215e91d..bb7af8a 100755
--- a/usr/local/bin/wifi/connect_to_network.sh
+++ b/usr/local/bin/wifi/connect_to_network.sh
@@ -6,6 +6,7 @@ echo ${$} > "/run/connect_to_network.sh.pid"
 
 quit() {
        rm -f "/run/connect_to_network.sh.pid"
+       rm -f "/run/was_connected_to_wifi"
        exit ${1}
 }
```


[8/2/2022 12:13 AM] tux_linux
like that?


[8/2/2022 6:11 AM] tux_linux
actually, it still works even if it's grabbed


[8/2/2022 6:11 AM] tux_linux
but `sleepCall` is fine too I guess


[8/2/2022 6:13 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/ee053ebb7b3450f6fec489394e18413a635f3419

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/ee053ebb7b3450f6fec489394e18413a635f3419
Implement `notify-send` support · Kobo-InkBox/inkbox-power-daemon@e...
/mnt/data/projects/git/conversations/media/ee053ebb7b3450f6fec489394e18413a635f3419-B6FEB


[8/2/2022 6:15 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/master/usr/local/bin/notify-send


[8/2/2022 9:56 AM] szybet
Soooo everything works?


[8/2/2022 11:14 AM] tux_linux
No


[8/2/2022 11:14 AM] tux_linux
Check Glo HD LED


[8/2/2022 11:14 AM] tux_linux
Porting thread


[8/2/2022 11:20 AM] szybet
That's beyond my capabilities


[8/2/2022 11:33 AM] szybet
You should wait for the process, because you will create zombies


[8/2/2022 3:39 PM] tux_linux
Really? How


[8/2/2022 3:51 PM] tux_linux
What's your to-do list?


[8/2/2022 4:07 PM] tux_linux
https://www.reddit.com/r/linuxmemes/comments/we5z50/be_kind_dont_use_sigkill
😂

{Embed}
https://www.reddit.com/r/linuxmemes/comments/we5z50/be_kind_dont_use_sigkill
r/linuxmemes - Be kind, Don't use SIGKILL
775 votes and 41 comments so far on Reddit
/mnt/data/projects/git/conversations/media/hpug2e39e9f91-CB4F9.jpg

{Reactions}
😆 

[8/2/2022 4:35 PM] szybet
the third argument in posix spawn wrapper as true


[8/2/2022 4:36 PM] szybet
this above and add an status message related to custom case option


[8/2/2022 4:36 PM] szybet
and thats it, everything else works


[8/2/2022 4:37 PM] szybet
and i dont remember that you requested something


[8/2/2022 4:39 PM] tux_linux
yeah, i know, but how would it create a zombie


[8/2/2022 4:40 PM] szybet
niluje explained it


[8/2/2022 4:40 PM] szybet
its also on posix spawn man page


[8/2/2022 4:41 PM] tux_linux
then why is there a wait option in the function's args if you don't want it to be used


[8/2/2022 4:43 PM] szybet
sometimes you dont


[8/2/2022 4:43 PM] szybet
sometimes yes


[8/2/2022 4:43 PM] szybet
it waits for the process to finish and then collects it


[8/2/2022 4:43 PM] szybet
if it doesnt collect it, there will be a zombie


[8/2/2022 4:45 PM] tux_linux
ok done


[8/2/2022 8:22 PM] ninuje
Also, yeah, don't use SIGKILL 😉


[8/2/2022 8:22 PM] ninuje
It's a last resort for hung processes


[8/2/2022 8:23 PM] szybet
i use it always for kate and wine applications
and for any other application that closes for more than 2 seconds and doesnt have anything important to save
SIGKILL is the power of linux


[8/2/2022 8:35 PM] tux_linux
what led color do we use for the touch


[8/2/2022 9:08 PM] szybet
its your decission


[8/2/2022 9:08 PM] szybet
i would make it rgb all the time


[8/2/2022 9:08 PM] szybet
"look, i have an rgb ereader"


[8/2/2022 9:08 PM] szybet
😄


[8/2/2022 9:08 PM] tux_linux
also we need to write 100 to it to light it up


[8/2/2022 9:09 PM] tux_linux
let's go with blue


[8/2/2022 9:09 PM] tux_linux
or white


[8/2/2022 9:09 PM] tux_linux
combine all 3


[8/2/2022 9:09 PM] tux_linux
but maybe a bit too much


[8/2/2022 9:39 PM] szybet
if you want to go really fancy, for you and maybe one other person that uses inkbox on the touch, you can allign diffrent colors to diffrent steps in going to sleep


[8/2/2022 9:39 PM] tux_linux
later


[8/2/2022 9:40 PM] szybet
wifi - blue
killing apps - red
you get the point


[8/2/2022 9:40 PM] tux_linux
hm


[8/2/2022 9:41 PM] szybet
but the code will be mess


[8/2/2022 9:41 PM] szybet
¯\_(ツ)_/¯


[8/2/2022 9:41 PM] tux_linux
yea


[8/2/2022 10:22 PM] tux_linux
I think I will go with green-blue

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220802_202219707.MP-61BA6.jpg


[8/2/2022 10:23 PM] szybet
looks good

{Reactions}
👍 

[8/2/2022 10:24 PM] tux_linux
actually how to fit that in the code


[8/2/2022 10:24 PM] tux_linux
i'm not sure


[8/2/2022 10:24 PM] szybet
in the function


[8/2/2022 10:24 PM] tux_linux
yeah but it will not look good at all


[8/2/2022 10:24 PM] szybet
separete function


[8/2/2022 10:24 PM] tux_linux
no


[8/2/2022 10:24 PM] tux_linux
i can just go with green


[8/2/2022 10:25 PM] tux_linux
will leave other leds for other things later on


[8/7/2022 5:10 AM] tux_linux
You need to change the idle sleep selector IMO
How is the user going to set 15 mins
It takes way too much time


[8/7/2022 10:06 AM] szybet
Okay, I will add a selector too


[8/7/2022 5:57 PM] szybet
are charging paths correct?


[8/7/2022 5:57 PM] tux_linux
Yes


[8/7/2022 5:57 PM] tux_linux
It actually even worked once


[8/7/2022 5:58 PM] szybet
becouse you waited more than 30s?


[8/7/2022 5:59 PM] tux_linux
au


[8/7/2022 5:59 PM] tux_linux
Maybe
I restarted it three times at least


[8/7/2022 5:59 PM] tux_linux
And I waited before


[8/7/2022 6:09 PM] szybet
some logging then it touches the led for the first time is needed


[8/7/2022 6:09 PM] szybet
in 2h~ i will have time to do this


[8/7/2022 6:10 PM] szybet
to this i want you to say exactly whats the problem and whats the solution i need to implement


[8/7/2022 6:10 PM] szybet
bec**au**se I got lost in what i need to do


[8/7/2022 6:11 PM] tux_linux
Write the 5 lines of code you were talking about


[8/7/2022 6:11 PM] tux_linux
That's all


[8/7/2022 6:20 PM] szybet
No


[8/7/2022 6:20 PM] szybet
What about the charger


[8/7/2022 6:20 PM] szybet
And led


[8/7/2022 6:35 PM] tux_linux
Yes, I said I thought it might actually be related


[8/7/2022 6:35 PM] tux_linux
Because it's been working randomly


[8/7/2022 6:59 PM] tux_linux
What's turning on the led when the charger is plugged in usually?


[8/7/2022 7:17 PM] szybet
LedManager

{Reactions}
👍 

[8/7/2022 7:17 PM] szybet
Executed in watchdog


[8/7/2022 9:34 PM] szybet
you still didn't updated stylesheet files?...


[8/7/2022 9:57 PM] tux_linux
I will


[8/7/2022 10:04 PM] szybet
okay, i will now add all things


[8/7/2022 10:05 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/highlight-05F3C.png


[8/7/2022 10:05 PM] szybet
looks really good

{Reactions}
👍 

[8/7/2022 10:05 PM] szybet
but


[8/7/2022 10:05 PM] szybet
but.


[8/7/2022 10:07 PM] szybet
the process of matching words needs to be as good as in... the one that niluje is working on. The most important thing is a button with an arrow that selects additionall words at the end / beginning of the selection


[8/7/2022 10:07 PM] szybet
in other words, the selection needs to be precise


[8/7/2022 10:08 PM] szybet
if you want do this in such a way that i wont touch it, do it that way


[8/7/2022 10:08 PM] tux_linux
You can just drag your finger across words to select them


[8/7/2022 10:08 PM] tux_linux
If you forgot one, then just do it again


[8/7/2022 10:09 PM] szybet
i would propably do this based on qTextEdit text cursor and do the selection manually


[8/7/2022 10:09 PM] szybet
what if there is a small word that i want to select? the touch isin't that accurate


[8/7/2022 10:09 PM] szybet
well, maybe it is


[8/7/2022 10:09 PM] tux_linux
Double click


[8/7/2022 10:10 PM] tux_linux
And you can't highlight words


[8/7/2022 10:10 PM] tux_linux
You can save words


[8/7/2022 10:10 PM] szybet
oh, its highlitning only?


[8/7/2022 10:10 PM] tux_linux
When there is two words or more you can highlight


[8/7/2022 10:10 PM] tux_linux
Otherwise it shows the dictionary widget


[8/7/2022 10:10 PM] szybet
i want to save entire phrases?...


[8/7/2022 10:11 PM] tux_linux
No


[8/7/2022 10:11 PM] tux_linux
Then highlight


[8/7/2022 10:11 PM] szybet
yes D:


[8/7/2022 10:11 PM] szybet
can't you export higlights?


[8/7/2022 10:11 PM] tux_linux
Yes you will be able to probably


[8/7/2022 10:12 PM] szybet
what i want is precisely save entire phrases, and export them


[8/7/2022 10:12 PM] szybet
thats the whole point


[8/7/2022 10:12 PM] tux_linux
Then highlight entire phrases and on top of that you also get the book where you found them


[8/7/2022 10:12 PM] szybet
koreader is great at it


[8/7/2022 10:12 PM] szybet
hm?


[8/7/2022 10:12 PM] tux_linux
What's wrong with highlighting


[8/7/2022 10:13 PM] szybet
1. i dont know if they will be precise
2. i want to export them


[8/7/2022 10:13 PM] tux_linux
1 yes
2 yes


[8/7/2022 10:13 PM] szybet
good good


[8/7/2022 10:13 PM] szybet
then the scroll bar thing


[8/7/2022 10:13 PM] szybet
hmm


[8/7/2022 10:14 PM] szybet
how do you calculate how many pages are in a book?


[8/7/2022 10:15 PM] tux_linux
mutool


[8/7/2022 10:15 PM] tux_linux
and sed


[8/7/2022 10:15 PM] tux_linux
But don't work on that now
There will be merge conflicts probably


[8/7/2022 10:16 PM] szybet
i will in 2 weeks propably

{Reactions}
👍 

[8/7/2022 10:16 PM] szybet
first wifi


[8/7/2022 10:16 PM] szybet
only asking


[8/7/2022 10:16 PM] szybet
based on how much text?


[8/7/2022 10:16 PM] tux_linux
Check epub.sh in GUI bundle


[8/7/2022 10:16 PM] tux_linux
Entire book html


[8/7/2022 10:16 PM] szybet
okay, i will look at it

{Reactions}
👍 

[8/7/2022 10:25 PM] szybet
```
kobo:/# DEBUG=true ./ipd
Error loading shared library libfbink.so.1: Exec format error (needed by ./ipd)
Error relocating ./ipd: fbink_wait_for_complete: symbol not found
Error relocating ./ipd: fbink_open: symbol not found
Error relocating ./ipd: fbink_version: symbol not found
Error relocating ./ipd: fbink_cls: symbol not found
Error relocating ./ipd: fbink_init: symbol not found
Error relocating ./ipd: fbink_print_image: symbol not found
Error relocating ./ipd: fbink_print_ot: symbol not found
Error relocating ./ipd: fbink_dump: symbol not found
Error relocating ./ipd: fbink_restore: symbol not found
Error relocating ./ipd: fbink_set_fb_info: symbol not found
Error relocating ./ipd: fbink_add_ot_font: symbol not found
Error relocating ./ipd: fbink_close: symbol not found
kobo:/# 

``` i need to update the kernel too?


[8/7/2022 10:28 PM] tux_linux
Yes


[8/7/2022 10:28 PM] szybet
:/


[8/7/2022 10:59 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220807_225835-836A5.jpg


[8/7/2022 10:59 PM] szybet
at the center please...


[8/7/2022 10:59 PM] szybet
the top is the only place when things are changing without user input


[8/7/2022 11:56 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220807_235609-FF195.jpg


[8/7/2022 11:56 PM] szybet
i moved the changing value to the right to avoid that the text moves at all


[8/7/2022 11:56 PM] szybet
so please leave it...


[8/8/2022 12:26 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220808_002539-ECCDF.jpg


[8/8/2022 12:29 AM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/32

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/32
better idle time choosing by Szybet · Pull Request #32 · Kobo-InkBo...
/mnt/data/projects/git/conversations/media/32-9039E


[8/8/2022 12:34 AM] tux_linux
Good
Will look into it


[8/8/2022 12:35 AM] szybet
i also did the ipd changes


[8/8/2022 12:35 AM] szybet
what i knew to do


[8/8/2022 12:36 AM] tux_linux
Ok thanks
Will test that


[8/8/2022 12:36 AM] tux_linux
Btw I'm getting the assert failure segfault in the GUI with a debug build only


[8/8/2022 12:36 AM] tux_linux
So maybe that's your issue


[8/8/2022 12:36 AM] tux_linux
As of why it happens... No idea


[8/8/2022 12:37 AM] szybet
about which issue are you talking about


[8/8/2022 12:38 AM] tux_linux
`ASSERT failure in QVector<T>::operator` etc.


[8/8/2022 12:39 AM] szybet
it was maybe an issue... but i always build with release build


[8/8/2022 12:40 AM] tux_linux
Then I don't know


[8/8/2022 12:40 AM] szybet
i dont encounter it anymore, soo


[8/8/2022 12:40 AM] szybet
¯\_(ツ)_/¯

{Reactions}
👍 

[8/8/2022 3:48 PM] ninuje
assert's are optimized out in release builds

{Reactions}
👍 

[8/8/2022 3:48 PM] ninuje
which is why you only ever hit 'em in debug builds


[8/8/2022 4:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/highlight_1-A378B.png


[8/8/2022 4:54 PM] szybet
and now export it


[8/8/2022 4:54 PM] szybet
and it will be perfect


[8/8/2022 4:54 PM] szybet
maybe

{Reactions}
👍 

[8/8/2022 6:18 PM] szybet
you can propably update the ipd wiki with the docs


[8/8/2022 7:15 PM] tux_linux
pandoc


[8/8/2022 7:15 PM] szybet
sureee so which format do you want


[8/8/2022 7:15 PM] szybet
MediaWiki markup?


[8/8/2022 8:52 PM] tux_linux
Wikicode


[8/9/2022 2:02 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/a7d1969fb582f556c1def1f740f4aa3337d57b23
What works:
highlighting non-formatted text
What doesn't work and I haven't found a way to make it work:
highlighting text with bold or italic attributes mixed with non-formatted text
Reason:
QTextCursor selectedText() method only gives plain text and not the HTML QTextEdit was given.

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/a7d1969fb582f556c1def1f740f4aa3337d57b23
Basic highlighting support · Kobo-InkBox/inkbox@a7d1969
/mnt/data/projects/git/conversations/media/a7d1969fb582f556c1def1f740f4aa3337d57b23-C58A1


[8/9/2022 3:55 AM] tux_linux
ipd fix for n705 works


[8/9/2022 4:56 AM] tux_linux
try to sync online library from your nia
wait
does it finish to sync at some point or does it just hang until you restart the binary manually?


[8/9/2022 5:01 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/f05f174f44b4e623c4a9d8bb7374c11769ba9469


[8/9/2022 6:05 PM] tux_linux
https://regexr.com/
useful

{Embed}
https://regexr.com/
RegExr: Learn, Build, & Test RegEx
RegExr is an online tool to learn, build, & test Regular Expressions (RegEx / RegExp).
/mnt/data/projects/git/conversations/media/card-66F88.png


[8/9/2022 9:27 PM] szybet
which fix


[8/9/2022 9:28 PM] tux_linux
mutex


[8/9/2022 9:28 PM] szybet
how do i force a sync?


[8/9/2022 9:28 PM] szybet
really strange


[8/9/2022 9:28 PM] tux_linux
`rm /data/storage/gutenberg/last_sync`


[8/9/2022 9:28 PM] tux_linux
then click on the 'Library' button in the home screen


[8/9/2022 9:28 PM] tux_linux
you can do `ps` to check what it's doing


[8/9/2022 9:29 PM] tux_linux
it should take ~2m max


[8/9/2022 9:29 PM] szybet
and? whats the problem with that?


[8/9/2022 9:29 PM] tux_linux
well, let's say you want to highlight text that has some passage in italics, it won't work


[8/9/2022 9:29 PM] tux_linux
it will save it but it will not be able to display it


[8/9/2022 9:30 PM] szybet
where display it?


[8/9/2022 9:30 PM] tux_linux
highlight it in the viewport


[8/9/2022 9:30 PM] szybet
you mean?


[8/9/2022 9:30 PM] tux_linux
in the text
it will save it in the database but it will not be able to highlight it when you read the book


[8/9/2022 9:31 PM] tux_linux
because the text saved in the database will not contain the `<i>` tag


[8/9/2022 9:31 PM] szybet
but it is already higlighted?


[8/9/2022 9:31 PM] tux_linux
?


[8/9/2022 9:31 PM] szybet
i dont understand - steps to reproduce this problem?


[8/9/2022 9:32 PM] szybet
inkbox error code 255 with gutenberg sync for me


[8/9/2022 9:32 PM] tux_linux
highlight text
```
hi, this is some text <i>italics are here</i> and now it's regular again
```


[8/9/2022 9:32 PM] tux_linux
end of log?


[8/9/2022 9:32 PM] szybet
yes, i understand this


[8/9/2022 9:32 PM] szybet
how do i get it?


[8/9/2022 9:32 PM] tux_linux
`restart inkbox_gui`
repeat steps above and copy stdout


[8/9/2022 9:32 PM] szybet
sure


[8/9/2022 9:32 PM] tux_linux
you could use `/var/log/inkbox-gui.log` but I want full output, not just logging from the program itself


[8/9/2022 9:33 PM] szybet
it is saved to the database, but you cant view it again?


[8/9/2022 9:34 PM] tux_linux
you can view it when exporting or viewing the currents highlights for a book


[8/9/2022 9:36 PM] tux_linux
the issue is:
qtextedit contains html text
selection is not saved as html, and even if it was (with `selection()` method from QTextCursor), the html is not even the same
when selection was saved over regular, non-formatted text, reader highlights it back fine after reading the database
when selection was saved over italic or bold text, reader can't highlight it because the `replace()` method won't find the exact text from the database in the QTextEdit's content (it's not smart enough to ignore tags)


[8/9/2022 9:37 PM] szybet
well, did you tryied to google it?


[8/9/2022 9:37 PM] tux_linux
google what


[8/9/2022 9:37 PM] szybet
the bug


[8/9/2022 9:37 PM] tux_linux
it's not a bug


[8/9/2022 9:37 PM] tux_linux
it's just like that


[8/9/2022 9:37 PM] szybet
well


[8/9/2022 9:37 PM] szybet
the problem


[8/9/2022 9:37 PM] tux_linux
no, i don't know what to search


[8/9/2022 9:37 PM] szybet
>  the html is not even the same
explain


[8/9/2022 9:38 PM] tux_linux
it's a QTextDocumentFragment


[8/9/2022 9:38 PM] tux_linux
so first it prints <head><body>, etc., then in <span> for italics or bold, it also writes the font's name, which is subject to change at any time, plus the font's name isn't even there in the QTextEdit's content


[8/9/2022 9:39 PM] tux_linux
I tried to do some regex on it but it sucked


[8/9/2022 9:39 PM] tux_linux
```
        QTextDocumentFragment fragment(cursor.selection());
        QString selection = fragment.toHtml();
        selection.remove("p, li { white-space: pre-wrap; }\n");
        selection.remove(QRegExp("(<html|<\/html|<head|<\/head|<meta|<body|<\/body|<p|<\/p>|<!|<style|<\/style)[^>]*>"));

        // selection.replace(QRegExp("(?=.*<span)(?=.*italic)[^>]*>"), "TEST");
        QRegExp rx("(?=.*<span)(?=.*italic)[^>]*>");
        rx.indexIn(selection);
        qDebug() << rx.capturedTexts();
        log(selection, className);
```


[8/9/2022 9:39 PM] szybet
can you show me exact examples what you expect and whats the output?


[8/9/2022 9:39 PM] szybet
html text^


[8/9/2022 9:40 PM] tux_linux
it would be better if you tried it yourself


[8/9/2022 9:40 PM] tux_linux
then add log calls wherever you want


[8/9/2022 9:41 PM] szybet
hmm couldn't this be done with some .replace?


[8/9/2022 9:42 PM] tux_linux
it's not like I did not try


[8/9/2022 9:42 PM] szybet
```
02/01/2012 @ 03:21:53 | libraryWidget: Gutenberg sync in progress
02/01/2012 @ 03:21:53 | toast: Displaying message 'Sync in progress'
This plugin does not support setParent!
--2012-01-02 03:21:54--  http://www.gutenberg.org/cache/epub/feeds/pg_catalog.csv
Resolving www.gutenberg.org... 152.19.134.47, 2610:28:3090:3000:0:bad:cafe:47
Connecting to www.gutenberg.org|152.19.134.47|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://www.gutenberg.org/cache/epub/feeds/pg_catalog.csv [following]
--2012-01-02 03:21:55--  https://www.gutenberg.org/cache/epub/feeds/pg_catalog.csv
Connecting to www.gutenberg.org|152.19.134.47|:443... connected.
ERROR: cannot verify www.gutenberg.org's certificate, issued by 'CN=Network Solutions OV Server CA 2,O=Network Solutions L.L.C.,L=Herndon,ST=VA,C=US':
  Issued certificate not yet valid.
To connect to www.gutenberg.org insecurely, use `--no-check-certificate'.
02/01/2012 @ 03:24:00 | toast: Displaying message 'Error'
```


[8/9/2022 9:42 PM] szybet
and what was the issue


[8/9/2022 9:42 PM] szybet
certificates... ugh


[8/9/2022 9:43 PM] tux_linux
oh


[8/9/2022 9:43 PM] tux_linux
yeah


[8/9/2022 9:43 PM] tux_linux
i fixed the timesync script


[8/9/2022 9:43 PM] tux_linux
yesterday


[8/9/2022 9:43 PM] szybet
i saw


[8/9/2022 9:43 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commits/master
pull for latest commits


[8/9/2022 9:44 PM] szybet
i dont need the latest gui bundle?


[8/9/2022 9:44 PM] tux_linux
only latest binary I think?


[8/9/2022 9:44 PM] szybet
good then


[8/9/2022 9:44 PM] szybet
i will test it... today


[8/9/2022 9:44 PM] tux_linux
yes


[8/10/2022 12:13 AM] szybet
this is weird... how do i figure out what wifi protection is used?

{Attachments}
/mnt/data/projects/git/conversations/media/message-5D1E3.txt


[8/10/2022 12:13 AM] szybet
there are 3 options sometimes


[8/10/2022 12:14 AM] tux_linux
Authentication Suites?


[8/10/2022 12:14 AM] szybet
it always says PSK


[8/10/2022 12:14 AM] szybet
i want to know if its wpa 1 or 2


[8/10/2022 12:14 AM] tux_linux
Maybe it's always PSK


[8/10/2022 12:15 AM] tux_linux
https://unix.stackexchange.com/questions/80186/how-to-confirm-verify-wifi-is-wpa2

{Embed}
https://unix.stackexchange.com/questions/80186/how-to-confirm-verify-wifi-is-wpa2
How to confirm/verify WiFi is WPA2?
How do I, from the command line, confirm on the host that the wireless network connection uses WPA2?

The wireless router is set to use WPA2 Personal (WPA2 with a pre-shared key) and AES on the net...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[8/10/2022 12:15 AM] tux_linux
try `scanning`, maybe you will get something


[8/10/2022 12:16 AM] szybet
this is scanning


[8/10/2022 12:17 AM] tux_linux
this is `scan`


[8/10/2022 12:17 AM] tux_linux
unless you launched it


[8/10/2022 12:17 AM] tux_linux
then I don't know


[8/10/2022 12:17 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-99716.png


[8/10/2022 12:18 AM] tux_linux
why rust


[8/10/2022 12:18 AM] szybet
i dont want to spend months on this


[8/10/2022 12:18 AM] tux_linux
GUI code is Qt


[8/10/2022 12:18 AM] tux_linux
C++


[8/10/2022 12:18 AM] szybet
and its refreshing to actually program things and not debug problems


[8/10/2022 12:19 AM] szybet
well, i didnt explained


[8/10/2022 12:19 AM] tux_linux
keep on doing that and you will find that programming is boring

{Reactions}
😆 

[8/10/2022 12:20 AM] szybet
i had a long day trying to get into windows CE on a old gps device, enough brain damage for today


[8/10/2022 12:21 AM] tux_linux
well, start tomorrow then


[8/10/2022 12:21 AM] tux_linux
you should have tried to compile Linux for it
maybe


[8/10/2022 12:22 AM] tux_linux
And Qt is less painful than plain C++


[8/10/2022 12:23 AM] szybet
and explaining: because for some devices iwlist can not work, i propose a scheme for searching for wifi networks:
```
mac
essid
a bool if a password is needed. none is also handled
security
wifi strength ( RSSID )
    empty line that indicates next wifi
```
this rust binary will provide one with iwlist, and if something other is needed, another binary will be launched that will provide the same info in the same order but using another tool


[8/10/2022 12:23 AM] szybet
no no, rust is good


[8/10/2022 12:23 AM] szybet
its too much closed platform
and im too lazy for this


[8/10/2022 12:24 AM] tux_linux
I said
GUI code is Qt/C++


[8/10/2022 12:24 AM] szybet
i know, this is separate


[8/10/2022 12:25 AM] tux_linux
have you looked it up?
there might have been some attempts


[8/10/2022 12:25 AM] tux_linux
rootfs CLI program?


[8/10/2022 12:26 AM] szybet
an old chinese gps that no one sels, its to niche product


[8/10/2022 12:26 AM] szybet
yes, just as it is now


[8/10/2022 12:26 AM] szybet
well not CLI, but rust in this example


[8/10/2022 12:26 AM] tux_linux
will it replace `/usr/local/bin/wifi/*`?


[8/10/2022 12:27 AM] szybet
not all, but the simple scan network, yes


[8/10/2022 12:27 AM] tux_linux
ok


[8/10/2022 12:27 AM] szybet
for diffrent devices the gui will choose diffrent binaries


[8/10/2022 12:28 AM] szybet
but the output file will be the same


[8/10/2022 12:28 AM] tux_linux
??


[8/10/2022 12:28 AM] tux_linux
why can't you just `if` that


[8/10/2022 12:28 AM] szybet
the gui will do that


[8/10/2022 12:28 AM] tux_linux
why


[8/10/2022 12:28 AM] szybet
if there is a device that iwlist doesnt work, then it propably wont work on the nia, so i cant write the rust code in the same binary for it


[8/10/2022 12:29 AM] szybet
if you want everything in one binary, you need to learn rust a bit


[8/10/2022 12:29 AM] tux_linux
i didn't follow you


[8/10/2022 12:30 AM] szybet
if a device doesnt support iwlist, then another wrapper is needed right?


[8/10/2022 12:30 AM] tux_linux
`wlarm_le`


[8/10/2022 12:30 AM] tux_linux
```
if device is nia or aura se or whatever else that supports it
  do iwlist thing
else if device is glo hd
  do wlarm_le thing
else
  do iwlist thing
```


[8/10/2022 12:31 AM] tux_linux
I already sent a sample `wlarm_le` output


[8/10/2022 12:31 AM] tux_linux
.


[8/10/2022 12:31 AM] szybet
so you want the wrapper for wlarm_le also in the same file?


[8/10/2022 12:31 AM] tux_linux
yes, why not


[8/10/2022 12:32 AM] szybet
okay sure


[8/10/2022 12:32 AM] tux_linux
The GUI doesn't care about any of this


[8/10/2022 12:32 AM] szybet
how do i scan with wlarm_le? it maybe works on the nia


[8/10/2022 12:32 AM] tux_linux
`wlarm_le scan`


[8/10/2022 12:32 AM] tux_linux
no


[8/10/2022 12:32 AM] tux_linux
it's not the same chip


[8/10/2022 12:32 AM] szybet
:< 
`wlarm_le: wl driver adapter not found`


[8/10/2022 12:32 AM] szybet
well okay, i will write for both


[8/10/2022 12:33 AM] tux_linux
actually


[8/10/2022 12:33 AM] tux_linux
`wlarm_le escanresults`


[8/10/2022 12:33 AM] szybet
well the same


[8/10/2022 12:33 AM] szybet
but i can figure out with the output propably


[8/10/2022 12:33 AM] tux_linux
another example
```
kobo:~# wlarm_le escanresults
SSID: "BELL884 2,4 Gigahertz"
Mode: Managed    RSSI: -73 dBm    SNR: 0 dB    noise: -92 dBm    Channel: 6u
BSSID: 40:65:A3:AE:C7:A6    Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
RSN:
    multicast cipher: AES-CCMP
    unicast ciphers(1): AES-CCMP 
    AKM Suites(1): WPA-PSK 
    Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
    Chanspec: 2.4GHz channel 4 40MHz (0x2e04)
    Control channel: 6
    802.11N Capabilities: 40Mhz SGI20 SGI40 
    Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 96 ]

kobo:~#
```


[8/10/2022 12:34 AM] tux_linux
no, `wlarm_le scan` doesn't print any output


[8/10/2022 12:34 AM] szybet
the same result, it doesnt work


[8/10/2022 12:35 AM] tux_linux
oh ok for you


[8/10/2022 12:35 AM] tux_linux
normal


[8/10/2022 12:35 AM] tux_linux
you're using a RealTek chip IIRC


[8/10/2022 12:35 AM] szybet
`KM Suites(1): WPA-PSK ` this one says what it is


[8/10/2022 12:36 AM] tux_linux
another option: buy a Mini, Touch, Glo or Glo HD


[8/10/2022 12:36 AM] tux_linux
plus you will have another older device to test your things on


[8/10/2022 12:36 AM] szybet
`SSID: ""` what is that, in your example output...


[8/10/2022 12:36 AM] szybet
well actually no... are all your wifis wpa1?


[8/10/2022 12:37 AM] tux_linux
Probably a hidden one


[8/10/2022 12:37 AM] tux_linux
i don't know
i'm not at home


[8/10/2022 12:37 AM] tux_linux
but `WPA2-PSK` exists


[8/10/2022 12:38 AM] szybet
do you know how expensive are chips, ic, transistors these days? im have barely money for the niAudio project :/


[8/10/2022 12:38 AM] szybet
where?


[8/10/2022 12:38 AM] tux_linux
i'm not a rich person at all


[8/10/2022 12:38 AM] tux_linux
but sometimes you find good deals


[8/10/2022 12:39 AM] szybet
rarely, really rarely


[8/10/2022 12:39 AM] tux_linux
i got almost all of my ereaders for <50$


[8/10/2022 12:39 AM] szybet
well first, canada has the most kobo ereaders


[8/10/2022 12:39 AM] tux_linux
I meant, in life


[8/10/2022 12:39 AM] tux_linux
true


[8/10/2022 12:40 AM] szybet
i want one in wlarm_le output ;p


[8/10/2022 12:40 AM] tux_linux
check the source code


[8/10/2022 12:40 AM] tux_linux
it's in the same `bcm-dhd-falcon...` tgz


[8/10/2022 12:40 AM] tux_linux
hang on


[8/10/2022 12:40 AM] tux_linux
https://github.com/kobolabs/Kobo-Reader/blob/master/hw/imx508/ntx/bcm-dhd-falcon-5901132-03112011.tgz


[8/10/2022 12:40 AM] the.mightydill
teach me your ways


[8/10/2022 12:40 AM] tux_linux
wait
just wait


[8/10/2022 12:41 AM] tux_linux
and check for ereaders in vancouver, edmonton, toronto, montreal, halifax


[8/10/2022 12:41 AM] tux_linux
then ask if they can ship it to you
and you cover the costs

{Reactions}
👍 

[8/10/2022 12:41 AM] szybet
https://www.olx.pl/d/oferta/czytnik-kobo-n905-CID99-IDPWon4.html

the only one, for 32$

{Embed}
https://www.olx.pl/d/oferta/czytnik-kobo-n905-CID99-IDPWon4.html
Czytnik kobo N905 Knurów • OLX.pl
150 zł: 150 zł: Hej. Mam do sprzedania czytnik kobo n905
Nietrafiony prezent zakupiony na olx, podobno bateria trzyma miesiąc. Specyfikację proszę sprawdzić na necie.
/mnt/data/projects/git/conversations/media/image;s=864x1152-EF8B5


[8/10/2022 12:41 AM] tux_linux
usually, about $15 shipping


[8/10/2022 12:42 AM] szybet
for the entirety of poland


[8/10/2022 12:42 AM] tux_linux
if you get one at 25$ then you pay $40


[8/10/2022 12:42 AM] tux_linux
32$ is fair


[8/10/2022 12:42 AM] the.mightydill
yeah unless it's edmonton


[8/10/2022 12:42 AM] the.mightydill
:P


[8/10/2022 12:42 AM] tux_linux
but check if it's not a N905A


[8/10/2022 12:42 AM] tux_linux
that one has an eMMC


[8/10/2022 12:42 AM] tux_linux
we have a... non-porting thread for it


[8/10/2022 12:43 AM] szybet
really no one figured out how to connect to this eMMC?


[8/10/2022 12:43 AM] tux_linux
someone figured out how to divert the SoC from it


[8/10/2022 12:43 AM] szybet
kobo had somehow write the firmware to it in the first place


[8/10/2022 12:43 AM] szybet
i dont understand?


[8/10/2022 12:43 AM] tux_linux
check the last posts
https://www.mobileread.com/forums/showthread.php?t=340411

{Embed}
https://www.mobileread.com/forums/showthread.php?t=340411
Kobo Touch N905 - need external sd boot - MobileRead Forums
Kobo Touch N905 - need external sd boot Kobo Developer's Corner


[8/10/2022 12:43 AM] tux_linux
absolutely


[8/10/2022 12:43 AM] tux_linux
we just need to find a way


[8/10/2022 12:44 AM] tux_linux
also, U-Boot has bootdelay set to 0, so that's just great


[8/10/2022 12:45 AM] szybet
what


[8/10/2022 12:45 AM] szybet
but he didn't deleted u-boot


[8/10/2022 12:45 AM] tux_linux
it means you can't access the U-Boot console
unless you short the boot device
yay


[8/10/2022 12:45 AM] tux_linux
yeah, it's just a partial unbrick


[8/10/2022 12:45 AM] szybet
thats what the guy did?


[8/10/2022 12:45 AM] tux_linux
yes


[8/10/2022 12:45 AM] szybet
hm okay


[8/10/2022 12:46 AM] tux_linux
maybe you can also access it if you write zeroes to the kernel location


[8/10/2022 12:46 AM] tux_linux
and then you can load a kernel image via serial


[8/10/2022 12:46 AM] tux_linux
`loady`


[8/10/2022 12:47 AM] szybet
still, a way to unbrick without uboot is needed


[8/10/2022 12:47 AM] tux_linux
yes


[8/10/2022 12:47 AM] tux_linux
maybe it puts itself onto download mode automatically if there is no U-Boot


[8/10/2022 12:47 AM] tux_linux
but nobody tested that


[8/10/2022 12:48 AM] tux_linux
and nobody would want that


[8/10/2022 12:48 AM] tux_linux
hehe


[8/10/2022 12:48 AM] szybet
i will drop the wifi security version info - it doesnt make sense


[8/10/2022 12:48 AM] tux_linux
ok


[8/10/2022 12:49 AM] szybet
any good datasheet for the cpu?...


[8/10/2022 12:49 AM] tux_linux
i.mx507


[8/10/2022 12:50 AM] tux_linux
That should give you enough to study for an entire year
https://www.nxp.com/docs/en/reference-manual/IMX50RM.pdf


[8/10/2022 12:51 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-80E53.png


[8/10/2022 12:51 AM] szybet
how did you found that datasheet


[8/10/2022 12:51 AM] szybet
well, a quick look


[8/10/2022 12:51 AM] tux_linux
NXP official website


[8/10/2022 12:51 AM] szybet
```
A key feature of the i.MX50 ROM is the ability to perform a secure or High Assurance
Boot (HAB). This is supported by the HAB security library which is a subcomponent of
the i.MX50 ROM. The HAB uses a combination of hardware and software together with
a Public Key Infrastructure (PKI) protocol to protect the system from executing
unauthorized programs
```
kobo, ***dont***


[8/10/2022 12:52 AM] szybet
😐


[8/10/2022 12:52 AM] tux_linux
I thought of implementing that but allowing users to use their keys


[8/10/2022 12:52 AM] tux_linux
But you have to sign some sort of nonsense contract


[8/10/2022 12:52 AM] szybet
god no


[8/10/2022 12:53 AM] tux_linux
Amazon already did


[8/10/2022 12:53 AM] szybet
how to brick your device, the best guide


[8/10/2022 12:53 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-38A3E.png


[8/10/2022 12:53 AM] szybet
we need


[8/10/2022 12:53 AM] szybet
the datasheet of the pcb


[8/10/2022 12:53 AM] szybet
😁


[8/10/2022 12:53 AM] tux_linux
https://www.nxp.com/docs/en/data-sheet/IMX50CEC.pdf


[8/10/2022 12:54 AM] tux_linux
great find


[8/10/2022 12:54 AM] tux_linux
now
where's that pin


[8/10/2022 12:54 AM] szybet
we need right to repair


[8/10/2022 12:55 AM] szybet
with schematics too


[8/10/2022 12:55 AM] tux_linux
i doubt you will find them


[8/10/2022 12:55 AM] tux_linux
ask Netronix


[8/10/2022 12:55 AM] szybet
i wont


[8/10/2022 12:55 AM] szybet
?


[8/10/2022 12:55 AM] tux_linux
Kobo's dealer for PCB/HW stuff
`ntx`


[8/10/2022 12:56 AM] tux_linux
`ntx_io`


[8/10/2022 12:56 AM] tux_linux
`ntx` = Netronix


[8/10/2022 12:56 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5543F.png


[8/10/2022 12:56 AM] szybet
your theory is true


[8/10/2022 12:56 AM] szybet
look at this


[8/10/2022 12:57 AM] tux_linux
oh, great


[8/10/2022 12:57 AM] tux_linux
we just have to write zeroes to the eMMC, then use `imx_usb_downloader`


[8/10/2022 12:57 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-86566.png


[8/10/2022 12:57 AM] tux_linux
the DCD is stored in the eMMC


[8/10/2022 12:57 AM] szybet
DCD?


[8/10/2022 12:57 AM] tux_linux
Device Configuration Data


[8/10/2022 12:58 AM] tux_linux
contains RAM info, PCB config, etc. I think


[8/10/2022 12:58 AM] szybet
ntx_hwconfig


[8/10/2022 12:58 AM] szybet
i know


[8/10/2022 12:58 AM] tux_linux
yeah that


[8/10/2022 12:58 AM] szybet
i was looking into it


[8/10/2022 12:58 AM] tux_linux
I'm not sure it's exactly the same thing


[8/10/2022 12:58 AM] szybet
you can document this on the forum


[8/10/2022 12:58 AM] tux_linux
andi1 would know a lot more about this


[8/10/2022 1:00 AM] szybet
who is andi1?


[8/10/2022 1:00 AM] tux_linux
Andreas Kemnade


[8/10/2022 1:00 AM] tux_linux
ported Linux 5.16 for Clara


[8/10/2022 1:00 AM] szybet
a hobbyist?


[8/10/2022 1:01 AM] tux_linux
https://github.com/akemnade/linux/tree/kobo/drm-merged-5.17

{Embed}
https://github.com/akemnade/linux/tree/kobo/drm-merged-5.17
GitHub - akemnade/linux at kobo/drm-merged-5.17
Linux kernel source tree. Contribute to akemnade/linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/linux-14C52


[8/10/2022 1:01 AM] tux_linux
probably


[8/10/2022 1:01 AM] tux_linux
you can ask him but he does not seem to be available at the moment


[8/10/2022 1:02 AM] szybet
no need, im just curious

{Reactions}
👍 

[8/10/2022 1:02 AM] szybet
i kn?***e***?w about it


[8/10/2022 1:03 AM] tux_linux
yes correct


[8/10/2022 1:04 AM] szybet
i hate english times


[8/10/2022 1:04 AM] tux_linux
he did this fosdem talk http://mirroronet.pl/pub/mirrors/video.fosdem.org/2022/D.mobile/mobile_kernel_ebook_reader.webm


[8/10/2022 1:04 AM] szybet
ok thanks, i will look into it

{Reactions}
👍 

[8/10/2022 1:04 AM] tux_linux
I did not know - I didn't know -> past
I knew -> past
I know -> present
I will know -> future


[8/10/2022 1:05 AM] szybet
there are more combinations then that


[8/10/2022 1:05 AM] szybet
and it gets messy


[8/10/2022 1:06 AM] the.mightydill
ME TOO


[8/10/2022 1:06 AM] the.mightydill
(as a person who speaks english)


[8/10/2022 1:09 AM] tux_linux
than that


[8/10/2022 1:09 AM] tux_linux
learn french and come back


[8/10/2022 1:10 AM] szybet
exactly


[8/10/2022 1:10 AM] the.mightydill
i am VERY bad at french


[8/10/2022 1:10 AM] the.mightydill
je ne parle pas francais


[8/10/2022 1:10 AM] the.mightydill
...?


[8/10/2022 1:10 AM] tux_linux
you forgot ç


[8/10/2022 1:11 AM] szybet
french is the worse to learn, as for european languages?


[8/10/2022 1:11 AM] tux_linux
À part ça la syntaxe de la phrase est correcte, il manquerait juste un peu de ponctuation au début et à la fin...!


[8/10/2022 1:11 AM] the.mightydill
i don't know the combination


[8/10/2022 1:11 AM] the.mightydill
oui


[8/10/2022 1:12 AM] the.mightydill
... 😄


[8/10/2022 1:12 AM] tux_linux
some thing I don't like about french is that when you talk about programming, you don't have any choice but to use english terms
in a very strange and bizarre way


[8/10/2022 1:12 AM] szybet
its like that in every language


[8/10/2022 1:13 AM] tux_linux
except english


[8/10/2022 1:13 AM] the.mightydill
lol


[8/10/2022 1:13 AM] szybet
🥴


[8/10/2022 1:13 AM] szybet
programming is english, thats it


[8/10/2022 1:13 AM] the.mightydill
wasnt there a rust in french?


[8/10/2022 1:13 AM] tux_linux
rouille


[8/10/2022 1:14 AM] tux_linux
i think there is rust in polish too


[8/10/2022 1:15 AM] szybet
rust? as on metal?


[8/10/2022 1:16 AM] tux_linux
it seems


[8/10/2022 1:16 AM] the.mightydill
the programming language


[8/10/2022 1:16 AM] the.mightydill
https://discord.com/channels/793941135419506728/796445063127236648/886482075761389608


[8/10/2022 1:16 AM] szybet
it is, ***rdza***


[8/10/2022 1:16 AM] szybet
but no one calls the programming language like that


[8/10/2022 1:16 AM] szybet
its just rust


[8/10/2022 1:17 AM] szybet
python is still python, no one calls it ***wąż***


[8/10/2022 1:17 AM] the.mightydill
lol


[8/10/2022 1:18 AM] szybet
computer is komputer, transistor is tranzystor


[8/10/2022 1:18 AM] szybet
its either very similar or the english word is used


[8/10/2022 1:18 AM] szybet
¯\_(ツ)_/¯


[8/10/2022 1:18 AM] tux_linux
dutch is also a strange language


[8/10/2022 1:18 AM] tux_linux
some words are literally the same as in english


[8/10/2022 1:19 AM] szybet
english is dominating, and thats good


[8/10/2022 1:19 AM] szybet
why cant we just all use one language


[8/10/2022 1:20 AM] szybet
why do i need to go through pain to understand anything smart on the internet


[8/10/2022 1:20 AM] szybet
🥴


[8/10/2022 1:20 AM] tux_linux
esperanto


[8/10/2022 1:21 AM] szybet
nie, nie ma takiej opcji


[8/10/2022 1:21 AM] tux_linux
at least I understood `nie`


[8/10/2022 1:21 AM] the.mightydill
look up "dunglish"


[8/10/2022 1:22 AM] the.mightydill
i'm pretty sure that's universal 😆


[8/10/2022 1:22 AM] szybet
to dobrze


[8/10/2022 1:22 AM] tux_linux
7U3XUWC2AAAAJZWWWRDAEABBAELAAAAAOQX6LIYBAAKESIDHOVSXG4ZAPFXXKJ3SMUQHE2LHNB2AUAAAAAAJBW36KMEAXLKRAAAS2FJPBNYW2H5W6N6QCAAAAAAAIWK2


[8/10/2022 1:22 AM] szybet
nope, in polish ***no*** is just as ***ok i accept***


[8/10/2022 1:23 AM] szybet
;p


[8/10/2022 1:23 AM] tux_linux
then how can you live your life


[8/10/2022 1:23 AM] the.mightydill
oh... but it's still "no"


[8/10/2022 1:23 AM] the.mightydill
windows key


[8/10/2022 1:23 AM] tux_linux
...no?


[8/10/2022 1:23 AM] the.mightydill
(joke)


[8/10/2022 1:23 AM] the.mightydill
it looks like one

{Reactions}
👍 

[8/10/2022 1:24 AM] szybet
MQ`���%Y�A�B���9,�H9T@<U(1Db4P����    m(�\��RO~Vސ�����!b


[8/10/2022 1:24 AM] tux_linux
I can't decode binary


[8/10/2022 1:24 AM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7318C.png


[8/10/2022 1:24 AM] tux_linux
you should `xz -d`


[8/10/2022 1:24 AM] tux_linux
hint


[8/10/2022 1:24 AM] szybet
i tryied decoding it from base64


[8/10/2022 1:24 AM] tux_linux
it's base32


[8/10/2022 1:25 AM] szybet
`Error: Invalid base32 characters`?


[8/10/2022 1:25 AM] szybet
HMM


[8/10/2022 1:25 AM] tux_linux
`echo str | base32 -d | xz -d`


[8/10/2022 1:26 AM] szybet
now it makes sense


[8/10/2022 1:27 AM] tux_linux
RFGFUTYABUFBUCQQIAQKACKAAECQGAAABUAAAAAAMLZO2UAAAAAAAABSXECACAAAABWAAAAANRT3YIRU7U3XUWC2AAAAJZWWWRDAEABBAELAAAAAOQX6LIYBAAZFA4TPMJQWE3DZFQQGE5LUEB4W65JHOZSSAZ3POQQHI3ZAORZHSIDUN4QGIZLDN5SGKIDUNBQXIIDPNZSQUAAAZQPBVKBABYKXSAABJMZ7GQW3RQP3N435AEAAAAAAARMVUAAAAAAA====


[8/10/2022 1:28 AM] szybet
okay, english is simple

{Reactions}
😁 

[8/10/2022 1:28 AM] the.mightydill
THAT is base64


[8/10/2022 1:28 AM] tux_linux
no


[8/10/2022 1:28 AM] the.mightydill
no?


[8/10/2022 1:28 AM] tux_linux
no


[8/10/2022 1:28 AM] the.mightydill
:/


[8/10/2022 1:28 AM] tux_linux
hint
ZWNobyBzdHIgfCBiYXNlMzIgLWQgfCBsem9wIC1kIHwgeHogLWQK


[8/10/2022 4:37 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/08747295507ef5e35c1444c2359d01f477a05c48

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/08747295507ef5e35c1444c2359d01f477a05c48
Implement highlights list dialog · Kobo-InkBox/inkbox@0874729


[8/10/2022 2:27 PM] szybet
@tux-linux how do i split between networks in a file?
```
mac
essid
a bool if a password is needed. none is also handled
wifi strength ( RSSID ) - higher better
"split163" - string, to simply split() it in other programs. dont you ever try an ESSID with that exact name.
```


[8/10/2022 2:27 PM] szybet
are you fine with it? its not an elegant solution


[8/10/2022 2:53 PM] tux_linux
i'm not sure to understand


[8/10/2022 2:53 PM] tux_linux
%%==SPLIT==%% is better for your split123 thing


[8/10/2022 2:54 PM] szybet
sure then


[8/10/2022 2:54 PM] tux_linux
i wrote the wrong thing


[8/10/2022 2:54 PM] tux_linux
i don't understand


[8/10/2022 2:54 PM] tux_linux
i just woke up...


[8/10/2022 2:54 PM] szybet
as im iterating between networks, how do i split them in the output file?


[8/10/2022 2:55 PM] szybet
its 3 pm ;p


[8/10/2022 2:55 PM] tux_linux
linebreaks?


[8/10/2022 2:55 PM] tux_linux
the gui already reads it that way


[8/10/2022 2:55 PM] szybet
you mean?


[8/10/2022 2:56 PM] tux_linux
```
ssid1\n
ssid2\n
ssid3
```


[8/10/2022 2:56 PM] szybet
```
mac\n
essid\n
bool\n
RSSID\n
\n
mac\n
essid\n
bool\n
RSSID\n
\n
mac\n
essid\n
bool\n
RSSID\n
```
as you see, it won't work


[8/10/2022 2:56 PM] szybet
there is more data


[8/10/2022 2:57 PM] tux_linux
hmm ok
then use `\n` for data and `%%==SPLIT==%%` for Wi-Fi networks


[8/10/2022 2:57 PM] tux_linux
and put RSSID in lowercase


[8/10/2022 2:57 PM] szybet
rssid is an int


[8/10/2022 2:57 PM] szybet
okay


[8/10/2022 2:58 PM] tux_linux
please spell reconnect `reconnect` if you ever have to write it


[8/10/2022 2:58 PM] tux_linux
and?


[8/10/2022 2:58 PM] szybet
?


[8/10/2022 2:58 PM] tux_linux
in ipd
you wrote
`recconect`


[8/10/2022 2:59 PM] tux_linux
I spent a lot of time just find-replacing those


[8/10/2022 2:59 PM] tux_linux
so please


[8/10/2022 2:59 PM] tux_linux
check your spelling


[8/10/2022 2:59 PM] szybet
and RSSID is a "Shortcut"


[8/10/2022 2:59 PM] szybet
oh ok😕


[8/10/2022 2:59 PM] tux_linux
?


[8/10/2022 3:00 PM] szybet
CPU


[8/10/2022 3:00 PM] szybet
RAM


[8/10/2022 3:00 PM] szybet
just as that


[8/10/2022 3:00 PM] tux_linux
What does it mean


[8/10/2022 3:01 PM] szybet
okay, actually its RSSI, `Received Signal Strength Indication`

{Reactions}
👍 

[8/10/2022 3:01 PM] tux_linux
And what is bool


[8/10/2022 3:01 PM] tux_linux
It's always an int?


[8/10/2022 3:01 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BF78C.png


[8/10/2022 3:01 PM] szybet
yes


[8/10/2022 3:02 PM] tux_linux
If you split correctly, you don't even need to put the identifier before the data


[8/10/2022 3:02 PM] tux_linux
Qt can just read it in order


[8/10/2022 3:02 PM] szybet
it will be simply easier


[8/10/2022 3:02 PM] tux_linux
What


[8/10/2022 3:03 PM] szybet
it will be easier


[8/10/2022 3:03 PM] szybet
the end


[8/10/2022 3:04 PM] tux_linux
Easier for you but harder to parse


[8/10/2022 3:05 PM] szybet
,_ ,
you only do in qt split("%%==SPLIT==%%") and you have everything


[8/10/2022 3:05 PM] szybet
i will do this anyway


[8/10/2022 3:06 PM] tux_linux
And if you want to sort them by signal strength ?


[8/10/2022 3:07 PM] szybet
vector with structures in qt


[8/10/2022 3:07 PM] szybet
easy, really


[8/10/2022 3:07 PM] tux_linux
Ok


[8/10/2022 3:07 PM] tux_linux
What will your class be called ?


[8/10/2022 3:07 PM] szybet
network?


[8/10/2022 3:07 PM] szybet
idk


[8/10/2022 3:07 PM] tux_linux
How will the user access it?


[8/10/2022 3:09 PM] szybet
i will replace the entire wifi menu


[8/10/2022 3:09 PM] szybet
make it non blocking for sure


[8/10/2022 3:09 PM] szybet
and password saving


[8/10/2022 3:09 PM] szybet
you can start thinking what to use to hash the passwords


[8/10/2022 3:10 PM] szybet
actually i will make an option to not decrypt them at all


[8/10/2022 3:42 PM] szybet
i will ignore empty SSID in wlarm_le


[8/10/2022 4:27 PM] szybet
@tux-linux can i get a wlarm_le scan with a wifi that doesnt have a password?


[8/10/2022 6:51 PM] tux_linux
Ok I'll try to provide you one


[8/10/2022 7:20 PM] szybet
well im waiting, the script is almost ready


[8/10/2022 7:21 PM] szybet
only this thing is missing


[8/10/2022 7:23 PM] tux_linux
```
SSID: "intranet"
Mode: Managed    RSSI: -23 dBm    SNR: 0 dB    noise: -92 dBm    Flags: RSSI on-channel     Channel: 6
BSSID: 8A:60:1C:47:5B:BA    Capability: ESS ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
802.11N Capable:
    Chanspec: 2.4GHz channel 6 20MHz (0x2b06)
    Control channel: 6
    802.11N Capabilities: SGI20 
    Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ]
```


[8/10/2022 7:29 PM] szybet
so `RSN`  is missing right?


[8/10/2022 8:04 PM] szybet
https://github.com/Szybet/epub-extract-inkbox
you use this tool right?

{Embed}
https://github.com/Szybet/epub-extract-inkbox
GitHub - Szybet/epub-extract-inkbox
Contribute to Szybet/epub-extract-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/epub-extract-inkbox-68151


[8/10/2022 8:14 PM] szybet
https://github.com/Szybet/inkbox-list-networks
ready to be tested

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-6CB06


[8/10/2022 8:15 PM] szybet
regex is a bit heavy as for binaries


[8/10/2022 8:42 PM] tux_linux
Maybe?


[8/10/2022 8:42 PM] tux_linux
?


[8/10/2022 8:42 PM] szybet
well propably, i implemented it this way


[8/10/2022 8:42 PM] tux_linux
Please tell me it's not stripped


[8/10/2022 8:42 PM] szybet
it is


[8/10/2022 8:42 PM] szybet
could be propably more


[8/10/2022 8:42 PM] tux_linux
Aaaaaaaaa


[8/10/2022 8:43 PM] tux_linux
Too much


[8/10/2022 8:43 PM] szybet
doing it without regex is impossible


[8/10/2022 8:43 PM] tux_linux
A bash script could do the same


[8/10/2022 8:43 PM] szybet
^


[8/10/2022 8:44 PM] tux_linux
Does -Os exist in rust?


[8/10/2022 8:44 PM] szybet
you mean?


[8/10/2022 8:44 PM] szybet
i will try to strip it more


[8/10/2022 8:44 PM] tux_linux
Optimize for size


[8/10/2022 8:44 PM] tux_linux
Os


[8/10/2022 8:44 PM] tux_linux
No
Stripping is dangerous
One time is enough


[8/10/2022 8:44 PM] szybet
i mean


[8/10/2022 8:44 PM] szybet
there are maybe other options


[8/10/2022 8:45 PM] szybet
i will look into it


[8/10/2022 8:45 PM] szybet
you can start accepting this binary


[8/10/2022 8:45 PM] szybet
;p


[8/10/2022 8:45 PM] tux_linux
How much does it weigh if you compress it in txz


[8/10/2022 8:45 PM] tux_linux
We can't afford 1M for this in the rootfs


[8/10/2022 8:45 PM] szybet
okay, i will try making it smaller

{Reactions}
👍 

[8/10/2022 8:48 PM] tux_linux
Did you try the highlighting in GUI?


[8/10/2022 8:48 PM] szybet
i will today / tommorow


[8/10/2022 8:48 PM] szybet
i wanted to finishthis


[8/10/2022 8:49 PM] tux_linux
Ok


[8/10/2022 9:15 PM] szybet
`152K`


[8/10/2022 9:15 PM] szybet
fine?


[8/10/2022 9:16 PM] tux_linux
yes


[8/10/2022 9:16 PM] tux_linux
how


[8/10/2022 9:16 PM] tux_linux
xz?


[8/10/2022 9:17 PM] szybet
some more rust magic + upx


[8/10/2022 9:17 PM] szybet
but there is no debug messages


[8/10/2022 9:17 PM] szybet
0


[8/10/2022 9:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-B3ED9


[8/10/2022 9:25 PM] tux_linux
upx is half-reliable


[8/10/2022 9:25 PM] tux_linux
try only txz


[8/10/2022 9:25 PM] szybet
what? how


[8/10/2022 9:25 PM] szybet
why


[8/10/2022 9:25 PM] szybet
works fine


[8/10/2022 9:25 PM] tux_linux
some binaries I compressed would just segfault randomly


[8/10/2022 9:25 PM] tux_linux
and I had to run them several times for them to work


[8/10/2022 9:25 PM] szybet
em ok


[8/10/2022 9:27 PM] szybet
actually what do you mean with txz


[8/10/2022 9:27 PM] szybet
its a compression algorithm


[8/10/2022 9:27 PM] szybet
and?


[8/10/2022 9:27 PM] szybet
https://www.google.com/search?q=compres+a+binary+with+txz


[8/10/2022 9:27 PM] szybet
hm


[8/10/2022 9:27 PM] szybet
¯\_(ツ)_/¯


[8/11/2022 12:42 AM] szybet
i looked into the reader

questions question questions

dont you think storing all highlights in one file, that then you load to the memory will be get heavy soon?

how do i view the database? i know its json to base64, then compressed with something, but i want to see it on the cli?

i have some problems with the library and i forgot to adjust the size for kobo nia. i will get into this after i finish wifi
and duplicates in last books are there too
no thumbnails at all after regenerating database?...
no books at all now? how do i repair this? i want anything to show up... i cant test further

is there a reason why inkbox restarts after reader exits?

the rest, good code, complicated and 2.4k lines of it... good job


[8/11/2022 12:45 AM] tux_linux
thanks
no books probably means an epub error


[8/11/2022 12:45 AM] the.mightydill
tar.xz


[8/11/2022 12:45 AM] the.mightydill
i think


[8/11/2022 12:46 AM] the.mightydill
right?


[8/11/2022 12:46 AM] tux_linux
yes


[8/11/2022 12:46 AM] szybet
but for a binary


[8/11/2022 12:46 AM] the.mightydill
oh


[8/11/2022 12:46 AM] szybet
how do i get logs


[8/11/2022 12:46 AM] tux_linux
explore_local_library.sh


[8/11/2022 12:46 AM] the.mightydill
the binary is in the txz, isn't it


[8/11/2022 12:46 AM] tux_linux
no


[8/11/2022 12:46 AM] the.mightydill
no?


[8/11/2022 12:46 AM] tux_linux
i wanted to see how much space it would consume in an xz-compressed squashfs


[8/11/2022 12:46 AM] szybet
oh


[8/11/2022 12:46 AM] the.mightydill
ohh okay


[8/11/2022 12:46 AM] szybet
doesnt make sense


[8/11/2022 12:47 AM] szybet
arguments?


[8/11/2022 12:47 AM] tux_linux
did you add a new book recently?


[8/11/2022 12:47 AM] szybet
holy crap thats dumb


[8/11/2022 12:47 AM] szybet
yes


[8/11/2022 12:47 AM] szybet
a test one


[8/11/2022 12:47 AM] tux_linux
well


[8/11/2022 12:47 AM] tux_linux
you have your answer


[8/11/2022 12:47 AM] szybet
https://convertio.co/pl/
is used this

{Attachments}
/mnt/data/projects/git/conversations/media/Untitled-1-514F8.epub

{Embed}
https://convertio.co/pl/
Convertio — Konwerter plików
Convertio - łatwe w obsłudze narzędzie do konwersji plików w Internecie. Ponad 309 różne formaty dokumentów, obrazów, arkuszy kalkulacyjnych, ebook, archiwizacji, prezentacji, wideo i audio obsługiwane.


[8/11/2022 12:47 AM] szybet
the epub extraction is my software


[8/11/2022 12:47 AM] tux_linux
feed it into epubtool


[8/11/2022 12:48 AM] szybet
i will look into it tommorow


[8/11/2022 12:48 AM] szybet
do you have a epub with bold text for now?


[8/11/2022 12:48 AM] tux_linux
for now you can just remove it


[8/11/2022 12:48 AM] szybet
i removed


[8/11/2022 12:48 AM] tux_linux
and `rm LocalLibrary.db`


[8/11/2022 12:48 AM] szybet
but i want to see your problem


[8/11/2022 12:48 AM] szybet
i know i did, it works


[8/11/2022 12:48 AM] tux_linux
yes


[8/11/2022 12:48 AM] tux_linux
ok


[8/11/2022 12:48 AM] szybet
soo any epub?


[8/11/2022 12:49 AM] szybet
wither books dont have any bold or italic text


[8/11/2022 12:49 AM] tux_linux
sent via pm


[8/11/2022 12:50 AM] szybet
can you simply test it with upx?


[8/11/2022 12:50 AM] tux_linux
ok


[8/11/2022 12:51 AM] szybet
i cant open the book from library, i need from last books?...


[8/11/2022 12:52 AM] szybet
inkbox can run from a diffrent path, right?


[8/11/2022 12:52 AM] tux_linux
```
kobo:/tmp# for f in /run/wifi_*; do echo -e "\n${f}:"; cat "${f}"; done

/run/wifi_able:
true

/run/wifi_list_format:
40:65:A3:AE:C7:A6
BELL884 2,4 Gigahertz
true

/run/wifi_list_full:
eth0      Scan completed :
          Cell 01 - Address: 40:65:A3:AE:C7:A6
                    ESSID:"BELL884 2,4 Gigahertz"
                    Mode:Managed
                    Frequency:2.437 GHz (Channel 6)
                    Quality:2/5  Signal level:-71 dBm  Noise level:-92 dBm
                    IE: IEEE 802.11i/WPA2 Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    IE: Unknown: DDA70050F204104A0001101044000102103B000103104700103053186A75E649BA9CAFA1D78C34C8E210210008536167656D636F6D10230011536167656D636F6D353235305F42656C6C1024000D3235333535353138372D312E301042000F4E51533136303230363030313935301054000800060050F204000110110016536167656D636F6D353235305F42656C6C2D4E515331100800020000103C0001031049000600372A000120
                    Encryption key:on
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s; 24 Mb/s; 36 Mb/s
                              48 Mb/s; 54 Mb/s


/run/wifi_networks_list:
intranet
BELL884 2,4 Gigahertz
kobo:/tmp#
```


[8/11/2022 12:52 AM] tux_linux
?


[8/11/2022 12:52 AM] tux_linux
no


[8/11/2022 12:53 AM] szybet
why... so how do i launch it from the same path


[8/11/2022 12:53 AM] tux_linux
what do you mean


[8/11/2022 12:53 AM] szybet
i run inkbox as /tmp/exec


[8/11/2022 12:53 AM] szybet
can this cause problems?


[8/11/2022 12:53 AM] tux_linux
you bind-mount it?


[8/11/2022 12:54 AM] szybet
?


[8/11/2022 12:54 AM] tux_linux
yes


[8/11/2022 12:54 AM] szybet
oh ok


[8/11/2022 12:54 AM] szybet
magic then


[8/11/2022 12:54 AM] tux_linux
if you don't bind-mount it to `/kobo/mnt/onboard/.adds/inkbox/inkbox-bin`


[8/11/2022 12:54 AM] szybet
how do i cancel a bind mount? simply with umount?


[8/11/2022 12:54 AM] tux_linux
yes


[8/11/2022 12:56 AM] szybet
sometimes it does word search for some reason...


[8/11/2022 12:57 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C4491.png


[8/11/2022 12:57 AM] szybet
what is hee happening...


[8/11/2022 12:58 AM] tux_linux
it does word search when your selection does not contain any space


[8/11/2022 12:58 AM] szybet
makes sense


[8/11/2022 12:58 AM] tux_linux
the setwindowflags bit means that it will close and delete itself if you click outside of it


[8/11/2022 12:59 AM] tux_linux
the move bit moves the widget to the last touch point


[8/11/2022 12:59 AM] szybet
but you create a new text dialog


[8/11/2022 12:59 AM] szybet
what


[8/11/2022 12:59 AM] szybet
why


[8/11/2022 12:59 AM] tux_linux
?


[8/11/2022 12:59 AM] tux_linux
it's the highlight button


[8/11/2022 1:00 AM] szybet
OH


[8/11/2022 1:00 AM] tux_linux
a dialog
its purpose is to deal with text
`textDialog`


[8/11/2022 1:00 AM] szybet
ok


[8/11/2022 1:00 AM] tux_linux
storing all highlights to one file is probably the best because handling them for every book separately would be a mess


[8/11/2022 1:01 AM] tux_linux
and I doubt that an average user's highlights database will weigh more than 10M at worst


[8/11/2022 1:01 AM] tux_linux
to see what it is, you can add a `qDebug() << jsonObject` or something like that in functions.h (`readHighlightsDatabase()`)


[8/11/2022 1:05 AM] tux_linux
I will implement highlights export tonight


[8/11/2022 1:05 AM] tux_linux
probably


[8/11/2022 1:07 AM] szybet
i propably see whats the problem
```
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Le Code de la propriété intellectuelle interdit les copies ou reproductions destinées à une utilisation collective. Toute représentation ou reproduction intégrale ou partielle faite par quelque procédé que ce soit, sans le consentement de l’auteur ou de ses ayant-droit ou ayant-cause, est illicite et constitue une contrefaçon. </span>Loi sur le droit d’auteur (L.R.C. (1985), ch. C-42) - Gouvernement du Canada.</p>
```
you replace this text, but it cant because of html garbage


[8/11/2022 1:08 AM] tux_linux
yes


[8/11/2022 1:09 AM] tux_linux
and text saved in database is only plain text


[8/11/2022 1:09 AM] the.mightydill
why would you remove it?


[8/11/2022 1:09 AM] the.mightydill
*replace


[8/11/2022 1:10 AM] tux_linux
to highlight text in the reader viewport


[8/11/2022 1:11 AM] szybet
actually he is right


[8/11/2022 1:11 AM] szybet
we dont need replace it


[8/11/2022 1:11 AM] szybet
we simply need insert our text


[8/11/2022 1:12 AM] tux_linux
but how do you know what to remove


[8/11/2022 1:13 AM] szybet
we dont need anything to remove


[8/11/2022 1:13 AM] szybet
only to insert at start and end of the string the background thing


[8/11/2022 1:13 AM] tux_linux
?


[8/11/2022 1:13 AM] tux_linux
what do you mean exactly?


[8/11/2022 1:14 AM] the.mightydill
don't replace anything. just insert your own text


[8/11/2022 1:15 AM] szybet
but .contains() wont work anyway


[8/11/2022 1:15 AM] szybet
meh


[8/11/2022 1:20 AM] tux_linux
that is precisely the problem


[8/11/2022 1:30 AM] szybet
its almost 2 am so i wont implement this, but here is the solution

https://doc.qt.io/qt-6/qtextcursor.html#selection

Returns the current selection (which may be empty) ***with all its formatting information***. If you just want the selected text (i.e. plain text) use selectedText() instead.

so literally `selected_text = cursor.selection().toHtml;` at line 1892

the only problem is that it gives you all the html, so you need to remove the not needed part ( margins etc ) and you will have an exact html code to save to the database


[8/11/2022 1:30 AM] tux_linux
hehe no


[8/11/2022 1:30 AM] tux_linux
i already tried that


[8/11/2022 1:30 AM] szybet
and?


[8/11/2022 1:30 AM] tux_linux
i already told you about it


[8/11/2022 1:31 AM] tux_linux
start from here


[8/11/2022 1:33 AM] szybet
the highlight is 
```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><!--StartFragment--><span style=" font-family:'Source Serif Pro'; font-size:10pt;">e leurs raisons d’être avec le tourisme scolaire.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Source Serif Pro'; font-size:10pt; font-weight:600;">Tourisme</span><span style=" font-family:'Source Serif Pro'; font-size:10pt;">, nom masculin.</span><span style=" font-family:'Source Serif Pro'; font-size:10pt; font-style:italic;"> Action de voyager, de visiter un site pour son plaisir.</span><span style=" font-family:'Source Serif Pro'; font-size:10pt;"> (Selon le dictionnaire Larousse).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Source Serif Pro'; font-size:10pt;">L’accent doit être mis ici sur le fameux mot plaisir, évoquant le plaisir des nombr</span><!--EndFragment--></p></body></html>
```
and you need
```
<span style=" font-style:italic;"> Action de voyager, de visiter un site pour son plaisir.</span>
```


[8/11/2022 1:34 AM] tux_linux
yes
basically


[8/11/2022 1:34 AM] tux_linux
i think


[8/11/2022 1:34 AM] szybet
crap


[8/11/2022 1:34 AM] szybet
complicated


[8/11/2022 1:35 AM] tux_linux
`font-family:'Source Serif Pro';`
it also outputs this


[8/11/2022 1:35 AM] tux_linux
which is not even in the epub text


[8/11/2022 1:35 AM] tux_linux
so like


[8/11/2022 1:35 AM] tux_linux
awesome


[8/11/2022 1:35 AM] tux_linux
regexr.com


[8/11/2022 1:35 AM] tux_linux
hours of pleasure


[8/11/2022 1:35 AM] szybet
doing this in regex is impossible for me


[8/11/2022 1:52 AM] szybet
another solution

1. html code to hashmap, or array or something like that
2. look at which iterator your plain text starts when stops ( for example, get 3 first characters, look thorugh the vector, if there are more than 2 matches, increase the search to 4 and repeat)
3, soon you will find where it begins where it ends
4. everything now dies because html is stupid
```html
<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body>

<h1>My First<span style="color: red"> Heading</h1>
<p>My first paragraph.</span></p>

</body>
</html>


```
we need this page to get working somehow


[8/11/2022 1:52 AM] szybet
<strong> can go across items in html...


[8/11/2022 1:54 AM] szybet
https://www.w3schools.com/html/html_blocks.asp

{Embed}
https://www.w3schools.com/html/html_blocks.asp
W3Schools offers free online tutorials, references and exercises in all the major languages of the web. Covering popular subjects like HTML, CSS, JavaScript, Python, SQL, Java, and many, many more.
/mnt/data/projects/git/conversations/media/w3schools_logo_436_2-C536F.png


[8/11/2022 1:54 AM] szybet
-_-


[8/11/2022 1:56 AM] the.mightydill
you forgot the opening <span>


[8/11/2022 1:56 AM] the.mightydill
:P


[8/11/2022 1:56 AM] szybet
it is there?


[8/11/2022 1:59 AM] the.mightydill
NEVER MIND


[8/11/2022 1:59 AM] the.mightydill
NEKJGNKLHNS i'm blind


[8/11/2022 2:07 AM] tux_linux
maybe yeah


[8/11/2022 2:16 AM] szybet
you can iterate through these in a qtextdocument and set them styles


[8/11/2022 2:16 AM] szybet
https://doc.qt.io/qt-6/qtextblockformat.html


[8/11/2022 2:25 AM] szybet
https://www.qtcentre.org/threads/52462-QTextCursor-replace-selected-text
https://www.qtcentre.org/threads/27032-QTextEdit-To-make-selected-text-as-Bold
https://www.faqcode4u.com/faq/586024/how-to-highlight-a-string-of-text-within-a-qtextedit

{Embed}
https://www.qtcentre.org/threads/52462-QTextCursor-replace-selected-text
QTextCursor / replace selected text
Can some one explain what I am doing wrong here ?. What I need is to select a text in QTextEdit and make some changes in the selected block texts. 
 
debug prints selected block texts just fine but only when I remove "cursor.insertText("replace block text");". Once added back it screwing up somehow the block numbers and the entire concept. How t...

{Embed}
https://www.qtcentre.org/threads/27032-QTextEdit-To-make-selected-text-as-Bold
QTextEdit. To make selected text as Bold.
There is a QTextEdit, and how to make selected text as Bold? 
 
P.S. Sorry for probable mistakes in the text.

{Embed}
https://www.faqcode4u.com/faq/586024/how-to-highlight-a-string-of-text-within-a-qtextedit
How To Highlight A String Of Text Within A Qte...
I'm a student programmer currently developing an application for work using Qt4. I am  building an equation editor and I'm having issues att...


[8/11/2022 2:25 AM] szybet
i give up for now
please test the wifi binary, i want to finish the wifi thing and start working on the library / reader


[8/11/2022 2:25 AM] tux_linux
i already tested it


[8/11/2022 2:26 AM] szybet
and?


[8/11/2022 2:26 AM] tux_linux
.


[8/11/2022 2:27 AM] szybet
oh


[8/11/2022 2:27 AM] szybet
please give me the whole file... not cutted oout


[8/11/2022 2:27 AM] szybet
wifi_list_formatted is the most important


[8/11/2022 2:27 AM] tux_linux
they are the whole files


[8/11/2022 2:27 AM] szybet
also,  test it on one device with wlarm_le?


[8/11/2022 2:28 AM] tux_linux
i tested it


[8/11/2022 2:28 AM] szybet
signal strenth is missing


[8/11/2022 2:28 AM] szybet
and


[8/11/2022 2:29 AM] szybet
i will fix it tomorrow


[8/11/2022 2:29 AM] tux_linux
it's what you see


[8/11/2022 2:29 AM] tux_linux
i tested it on a mini


[8/11/2022 2:29 AM] the.mightydill
it cannot be healthy to be awake at 3 am


[8/11/2022 2:29 AM] tux_linux
it can


[8/11/2022 2:29 AM] the.mightydill
i mean...


[8/11/2022 2:29 AM] the.mightydill
you know


[8/11/2022 2:29 AM] tux_linux
maybe you ran iwlist on that device too?


[8/11/2022 2:30 AM] tux_linux
mini supports both wlarm_le and iwlist


[8/11/2022 2:30 AM] tux_linux
n437 (Glo HD) only supports wlarm_le


[8/11/2022 2:31 AM] tux_linux
i usually have more energy at 12am than at 6am


[8/11/2022 2:31 AM] the.mightydill
well yeah true...


[8/11/2022 2:31 AM] the.mightydill
i always have energy at 12am


[8/11/2022 2:31 AM] szybet
Not good then


[8/11/2022 2:31 AM] tux_linux
.


[8/11/2022 2:31 AM] szybet
I agree🥴


[8/11/2022 2:32 AM] szybet
This won't fix the problem


[8/11/2022 2:35 AM] tux_linux
hm ok


[8/11/2022 2:35 AM] tux_linux
but yeah 3am is a bit too much


[8/11/2022 2:47 AM] tux_linux
highlights export works
```
kobo:/data/onboard# cat highlights-01-08-11_08.26.16.json 
{
    "Book1": {
        "BookPath": "/mnt/onboard/onboard/pg43.epub"
    },
    "Book2": {
        "BookPath": "/mnt/onboard/onboard/Touristes.epub",
        "T-19923cc3-99c1-48e8-a169-a3973c230e4c": "e Lapointe, ne se rendant peu ou pas compte de la situation, écrit un devoir sur le tableau lorsqu’un élève l’interpelle :",
        "T-9b3c845f-3c18-4f5e-b411-b6742b121c19": "n train d’apprendre à ses élèves certains éléments de laboratoires ainsi que des manipulations "
    }
}
kobo:/data/onboard#
```


[8/11/2022 2:51 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/fc8c2ea8b60dd873ed5ab587927bf90605697df2

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/fc8c2ea8b60dd873ed5ab587927bf90605697df2
settings: Add 'Export highlights' option · Kobo-InkBox/inkbox@fc8c2ea
/mnt/data/projects/git/conversations/media/fc8c2ea8b60dd873ed5ab587927bf90605697df2-9B11B


[8/11/2022 12:30 PM] szybet (pinned)
fix for epubtool to which repository i dont have permissions...

by `// Title`, `// Publication date` and `// Author`
replace the simple unwrap with ```
.unwrap_or("Unknown".to_string());
```

{Reactions}
👍 

[8/11/2022 2:34 PM] szybet
fix for listing networks, for some reason your iwlist output had weird and diffrent syntax, i needed to correct some things. please test it on more devices

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-F756D

{Reactions}
👍 

[8/11/2022 7:44 PM] szybet
there is no way to speed up wifi connection - dhcp takes so long...
udhcdc takes arround 1.5 min
dhclient only one minute

still the fault is that we unload modules like crazy, they need time...


[8/12/2022 12:00 AM] szybet
https://github.com/Kobo-InkBox/rootfs/pull/3

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/3
wifi update - for the future GUI wifi panel by Szybet · Pull Reques...
dont accept it for now
/mnt/data/projects/git/conversations/media/3-CD651


[8/12/2022 12:01 AM] szybet
modularity.


[8/12/2022 5:13 AM] tux_linux
yes, good stuff


[8/12/2022 5:14 AM] tux_linux
i've had two days cleaning this thing : https://youtu.be/M4oM5FEG3KE
it's really fascinating how these work

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=M4oM5FEG3KE
Mysterious Precisa adding/substracting machine, made in Switzerland
Online documentation is scarce for this machine. If you know something about when it was made and in what quantity, I'd like to hear from it.
It can add, substract and multiply with decimals but can't divide.
I found it in a antique shop in a 500 km away from Montreal, Quebec; I don't know how it ended up there, but anyways, I got it for a fair ...
/mnt/data/projects/git/conversations/media/sddefault-F8376.jpg


[8/12/2022 12:10 PM] szybet
complicated machine


[8/12/2022 1:52 PM] tux_linux
Yes, but awesome one too


[8/12/2022 1:52 PM] tux_linux
https://photos.app.goo.gl/2rSwqn5DG2Fc1zGy5

{Embed}
https://photos.app.goo.gl/2rSwqn5DG2Fc1zGy5
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/JPmW1fo7WhRnww2XMWfE4sgD7FQ6VlmoIDZQ3QrFU9-96559


[8/12/2022 1:54 PM] szybet
really complicated


[8/12/2022 1:54 PM] szybet
mechanical magic


[8/12/2022 1:54 PM] tux_linux
yup


[8/12/2022 1:54 PM] szybet
cool that inkbox has the `time` command


[8/12/2022 1:55 PM] szybet
i will use it to measure how long every step in connecting to wifi takes


[8/12/2022 1:55 PM] szybet
and show it to the user


[8/12/2022 1:55 PM] tux_linux
It's only in bash I think
But since the wifi script is using bash
Ok


[8/12/2022 1:56 PM] szybet
its a binary


[8/12/2022 1:59 PM] tux_linux
Oh


[8/12/2022 2:01 PM] szybet
```
squashfuse -o allow_other,nosuid /data/onboard/.apps/Conway/Conway.isa /data/onboard/.apps/Conway/Conway
```
actually, for many apps it will get heave to run squashfs for them all the time


[8/12/2022 2:04 PM] tux_linux
it only gets heavy if you would use them all at once


[8/12/2022 2:05 PM] tux_linux
which... you can't


[8/12/2022 2:48 PM] tux_linux
https://github.com/everydayanchovies/eink-vnc


[8/12/2022 2:49 PM] szybet
rust 😂


[8/12/2022 2:50 PM] tux_linux
it seems relatively lightweight


[8/12/2022 2:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B9C60.png


[8/12/2022 2:50 PM] tux_linux
I think I will adapt it as an userapp


[8/12/2022 2:50 PM] szybet
why do he need mupdf...


[8/12/2022 2:50 PM] tux_linux
no apparent reason


[8/12/2022 2:50 PM] tux_linux
the compiled binary is 5.89M


[8/12/2022 2:50 PM] tux_linux
maybe they forgot to strip it


[8/12/2022 2:50 PM] szybet
you can make it smaller


[8/12/2022 2:50 PM] tux_linux
yes


[8/12/2022 2:51 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3CBE2.png


[8/12/2022 2:51 PM] szybet
and thats stolen form plato ;p


[8/12/2022 2:51 PM] tux_linux
well, stolen in a fair way


[8/12/2022 2:51 PM] szybet
if this vnc is better than the one you are using now, you can replace the built in one


[8/12/2022 2:51 PM] tux_linux
yes, it is
probably faster to launch too


[8/12/2022 2:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-25544.png


[8/12/2022 2:52 PM] szybet
then replace it


[8/12/2022 2:52 PM] tux_linux
that would also mean to replace it for X11


[8/12/2022 2:52 PM] szybet
inform the author that we will use it


[8/12/2022 2:52 PM] tux_linux
does touch input work?


[8/12/2022 2:52 PM] szybet
he says no


[8/12/2022 2:52 PM] szybet
for now


[8/12/2022 2:52 PM] szybet
inform him, maybe it will motivate him


[8/12/2022 2:52 PM] tux_linux
yea
can't use that now


[8/12/2022 2:53 PM] tux_linux
do you want to try it out and tell me if it's worth it?
I'm traveling today


[8/12/2022 2:53 PM] szybet
its rust, i can propably do this one day if i finish everything else


[8/12/2022 2:53 PM] szybet
it is


[8/12/2022 2:53 PM] szybet
just look at the video


[8/12/2022 2:53 PM] szybet
10/10


[8/12/2022 2:53 PM] tux_linux
i did


[8/12/2022 2:53 PM] szybet
it is


[8/12/2022 2:53 PM] szybet
we need to do that


[8/12/2022 2:54 PM] szybet
maybe a nice qt gui for it too?


[8/12/2022 2:54 PM] tux_linux
will just use that binary instead of the built-in vnc server we have I guess


[8/12/2022 2:54 PM] tux_linux
qt gui will remain the same


[8/12/2022 2:54 PM] tux_linux
i think


[8/12/2022 2:54 PM] szybet
i didnt saw it, so idk


[8/12/2022 2:55 PM] tux_linux
it's a generalDialog asking you for server ip and password


[8/12/2022 2:55 PM] tux_linux
so, uh, I ask him?


[8/12/2022 2:55 PM] szybet
good then


[8/12/2022 2:56 PM] szybet
and inform him


[8/12/2022 2:56 PM] szybet
you can even invite him here


[8/12/2022 2:56 PM] tux_linux
ok
I told him in a MR post that I wanted to adapt it as an user app


[8/12/2022 2:56 PM] tux_linux
but if we want to replace it system-wide


[8/12/2022 2:56 PM] tux_linux
other solution: code touch input driver for x11


[8/12/2022 2:56 PM] tux_linux
which one do we choose


[8/12/2022 2:57 PM] szybet
what?


[8/12/2022 2:57 PM] tux_linux
X11 currently uses VNC to get its touch input because I don't know how to write a reliable driver


[8/12/2022 2:57 PM] tux_linux
Graphics are handled by FBInk
the VNC client doesn't print to the screen
it just registers touch input


[8/12/2022 2:58 PM] szybet
i know


[8/12/2022 2:58 PM] szybet
and?


[8/12/2022 2:59 PM] tux_linux
well


[8/12/2022 2:59 PM] tux_linux
do we choose that as the default input layer (and maybe graphics too, if it equals FBInk's performance) or do we write input drivers instead


[8/12/2022 3:00 PM] szybet
can you write an input driver?


[8/12/2022 3:00 PM] szybet
because i dont


[8/12/2022 3:00 PM] tux_linux
i don't know either


[8/12/2022 3:00 PM] szybet
so we would need to use 2 vnc viewers for xorg?


[8/12/2022 3:00 PM] tux_linux
yes


[8/12/2022 3:00 PM] tux_linux
or use an option in the program


[8/12/2022 3:00 PM] tux_linux
to disable graphics


[8/12/2022 3:01 PM] szybet
?


[8/12/2022 3:01 PM] tux_linux
the default one available in the UI will have graphics enabled


[8/12/2022 3:02 PM] tux_linux
the one used by X11 delegates graphics to fbink-xdamage
which prints to the screen in a much clearer and artifact-less way


[8/12/2022 3:02 PM] tux_linux
let's see the upside: if we use Wayland some day, we won't have to rewrite touch input drivers for it


[8/12/2022 3:03 PM] szybet
those are dreams


[8/12/2022 3:03 PM] szybet
and that means?


[8/12/2022 3:04 PM] szybet
do we have space for all of this in the rootfs?


[8/12/2022 3:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CD484.png


[8/12/2022 3:11 PM] tux_linux
good but why use a rare unicode character


[8/12/2022 3:11 PM] tux_linux
i doubt u001 has it


[8/12/2022 3:11 PM] szybet
which do i use then


[8/12/2022 3:11 PM] tux_linux
no


[8/12/2022 3:11 PM] tux_linux
but i will remove node if needed


[8/12/2022 3:11 PM] tux_linux
unless you say you want to use it


[8/12/2022 3:11 PM] tux_linux
`OK`


[8/12/2022 3:13 PM] szybet
:(


[8/12/2022 3:13 PM] szybet
i want emotes


[8/12/2022 3:13 PM] szybet
not in this timeline


[8/12/2022 3:13 PM] szybet
remove python too


[8/12/2022 3:13 PM] tux_linux
python is unrelated to the rootfs


[8/12/2022 3:13 PM] szybet
i know


[8/12/2022 3:13 PM] szybet
still remove it


[8/12/2022 3:13 PM] tux_linux
and split rust program is not ready


[8/12/2022 3:13 PM] szybet
it is


[8/12/2022 3:13 PM] tux_linux
show me


[8/12/2022 3:15 PM] tux_linux
last time I checked it didn't break newlines properly


[8/12/2022 3:16 PM] tux_linux
it can talk to a standard vnc server and register touch input + display graphics


[8/12/2022 3:17 PM] szybet
i still dont understand much
maybe use for xorg the old one but the build in app replace with this one


[8/12/2022 3:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-0005B.png


[8/12/2022 3:19 PM] tux_linux
vnc for user : touch input + graphics handled by program
vnc in x11: touch input handled by program, graphics handled by fbink-xdamage from x11 display socket `DISPLAY=:0`


[8/12/2022 3:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4D7E1.png


[8/12/2022 3:19 PM] tux_linux
ok, how did you do that and does it work for any random text file?


[8/12/2022 3:19 PM] tux_linux
like, if you take a complete ebook from gutenberg


[8/12/2022 3:19 PM] tux_linux
in txt format


[8/12/2022 3:19 PM] szybet
i dont remember
i writed the program for gutenberg books, this is a gutenberg book


[8/12/2022 3:20 PM] tux_linux
can you send me the output for a complete book?


[8/12/2022 3:20 PM] szybet
vnc for user is that the new program?


[8/12/2022 3:20 PM] szybet
you mean? those are 250 files


[8/12/2022 3:20 PM] tux_linux
https://gutenberg.org/files/43/43-0.txt


[8/12/2022 3:21 PM] tux_linux
yes, but vnc in x11 could use the new one too


[8/12/2022 3:21 PM] szybet
it would be heavy


[8/12/2022 3:21 PM] szybet
2 vnc clients


[8/12/2022 3:21 PM] tux_linux
?


[8/12/2022 3:21 PM] szybet
one for touch one for viewing, right?


[8/12/2022 3:21 PM] szybet
and?


[8/12/2022 3:22 PM] tux_linux
feed that to your program and send me the output


[8/12/2022 3:22 PM] tux_linux
one for touch
one for viewing + touch


[8/12/2022 3:27 PM] szybet
what ,_ ,


[8/12/2022 3:28 PM] tux_linux
look at `/etc/init.d/xorg.sh` and `/xorg/scripts/start.sh`


[8/12/2022 3:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/9-C2A86
/mnt/data/projects/git/conversations/media/8-C9086
/mnt/data/projects/git/conversations/media/7-FF201
/mnt/data/projects/git/conversations/media/6-8759B
/mnt/data/projects/git/conversations/media/5-B2566
/mnt/data/projects/git/conversations/media/4-9F2D9
/mnt/data/projects/git/conversations/media/3-284C2
/mnt/data/projects/git/conversations/media/2-E0B5B
/mnt/data/projects/git/conversations/media/1-B551E
/mnt/data/projects/git/conversations/media/0-62174


[8/12/2022 3:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/18-95F07
/mnt/data/projects/git/conversations/media/17-8FB44
/mnt/data/projects/git/conversations/media/16-FBB05
/mnt/data/projects/git/conversations/media/15-DB959
/mnt/data/projects/git/conversations/media/14-8BC62
/mnt/data/projects/git/conversations/media/13-8A3B4
/mnt/data/projects/git/conversations/media/12-2272F
/mnt/data/projects/git/conversations/media/11-0F5AA
/mnt/data/projects/git/conversations/media/10-CC743


[8/12/2022 3:28 PM] szybet
enough?


[8/12/2022 3:28 PM] tux_linux
yes but i see some problems


[8/12/2022 3:28 PM] szybet
for example


[8/12/2022 3:29 PM] tux_linux
in file 0


[8/12/2022 3:29 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E516F.png


[8/12/2022 3:29 PM] tux_linux
`Mr. Utterson the lawyer...` is supposed to have a linebreak before itself, as well as `STORY OF THE DOOR`


[8/12/2022 3:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F0F20.png


[8/12/2022 3:30 PM] szybet
the rest is fine


[8/12/2022 3:30 PM] szybet
only the beginning is not formatted as it should


[8/12/2022 3:30 PM] szybet
i doubt the python script handles that what you are complaining about


[8/12/2022 3:33 PM] szybet
also handling that would need writing an entire algorithm - i think its better spending this time on other things


[8/12/2022 3:51 PM] szybet
well just do what is needed to get the best visual results


[8/12/2022 4:32 PM] tux_linux
it doesn't, i wanted this to be a better version than my crappy python script


[8/12/2022 4:33 PM] tux_linux
```
There is something wrong with hisappearance
```
we need to fix that at least


[8/12/2022 4:33 PM] tux_linux
it glues words together when you remove newlines


[8/12/2022 4:33 PM] szybet
Where


[8/12/2022 4:33 PM] tux_linux
everywhere


[8/12/2022 4:43 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AA3E3.png


[8/12/2022 4:43 PM] szybet
good


[8/12/2022 4:44 PM] szybet
still, where


[8/12/2022 4:44 PM] tux_linux
look in the files you sent me


[8/12/2022 4:44 PM] szybet
file 5


[8/12/2022 4:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-44515.png


[8/12/2022 4:44 PM] szybet
where


[8/12/2022 4:44 PM] tux_linux
`for any period exceedingthree calendar months`


[8/12/2022 4:45 PM] tux_linux
`he sprangup from his chair`


[8/12/2022 4:45 PM] tux_linux
should be `exceeding three` and `sprang up`


[8/12/2022 4:45 PM] szybet
thats true


[8/12/2022 4:45 PM] szybet
i will repair this

{Reactions}
👍 

[8/12/2022 6:51 PM] szybet
Do I have the permission to compile the whole gnu version of the time command binary, and it will be added to the rootfs?


[8/12/2022 6:52 PM] tux_linux
Why


[8/12/2022 6:52 PM] szybet
Because the busybox version is fu... Stupid


[8/12/2022 6:52 PM] tux_linux
It's coreutils?


[8/12/2022 6:53 PM] szybet
They output everything to stderr, even the message that says that command exited with exit code, and I can't filter that seperate. And the argument to switch that off doesn't exist


[8/12/2022 6:53 PM] szybet
Idk, I'm sure its stupid


[8/12/2022 6:54 PM] tux_linux
It's not stupid
It's expected behavior


[8/12/2022 6:54 PM] tux_linux
You wouldn't want that in a pipe


[8/12/2022 6:55 PM] szybet
No.😞


[8/12/2022 6:55 PM] tux_linux
Then...


[8/12/2022 6:55 PM] tux_linux
Have you tried &>


[8/12/2022 6:56 PM] szybet
Yes. Many combinations. For 4 hours.


[8/12/2022 6:56 PM] tux_linux
Does it work with the gnu version


[8/12/2022 6:56 PM] szybet
I tryied every post on the internet for it, doesnt work


[8/12/2022 6:57 PM] szybet
There is a option for my specific problem, so yes


[8/12/2022 6:57 PM] tux_linux
Ok
Try it
If it weighs over 500k it's too big


[8/12/2022 6:58 PM] tux_linux
Even 500k is way too big for such a thing


[8/12/2022 6:58 PM] tux_linux
https://ftp.gnu.org/gnu/time/


[8/12/2022 7:07 PM] szybet
strip + utx should do the thing


[8/12/2022 10:22 PM] szybet
https://github.com/Kobo-InkBox/rootfs/pull/3/commits/f4a61856aca052b391b05849b297094612cb5348
30 KB

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/3/commits/f4a61856aca052b391b05849b297094612cb5348
wifi update - for the future GUI wifi panel by Szybet · Pull Reques...
dont accept it for now
/mnt/data/projects/git/conversations/media/53944559-F1898


[8/12/2022 10:29 PM] tux_linux
Good


[8/12/2022 10:29 PM] tux_linux
With upx?


[8/12/2022 10:30 PM] szybet
yes


[8/12/2022 10:39 PM] szybet
is the ipd finished?


[8/12/2022 10:39 PM] szybet
also, is there a way to close threads on mobileread?


[8/12/2022 10:39 PM] the.mightydill
Nope you can just leave it


[8/12/2022 10:39 PM] the.mightydill
I think


[8/12/2022 10:39 PM] szybet
well okay then


[8/12/2022 10:49 PM] szybet
well i updated it
https://inkbox.ddns.net/wiki/index.php?title=InkBox_OS_power_daemon

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_OS_power_daemon
Index.php


[8/12/2022 10:57 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/reqfeaturesbug-3848E.png


[8/12/2022 10:57 PM] tux_linux
Bug


[8/12/2022 10:57 PM] tux_linux
RequiredFeatures


[8/12/2022 10:58 PM] szybet
***oh no***


[8/12/2022 11:00 PM] tux_linux
userapps.cpp:257 is probably part of the problem


[8/12/2022 11:01 PM] szybet
okayyy i will fix this


[8/12/2022 11:01 PM] szybet
can you check the list networks binary>


[8/12/2022 11:01 PM] szybet
i want to start working on the gui


[8/12/2022 11:03 PM] szybet
do you have somewhere the roadmap for 2.0?


[8/12/2022 11:05 PM] tux_linux
No hurry
I don't want to create unwanted bugs


[8/12/2022 11:05 PM] szybet
i know, so test it


[8/12/2022 11:05 PM] tux_linux
Release date 31th of August?


[8/12/2022 11:05 PM] tux_linux
Traveling right now, will when at home


[8/12/2022 11:06 PM] szybet
i also think of that, we wont have that much time after holidays anyways


[8/12/2022 11:06 PM] szybet
ok sure thanks

{Reactions}
👍 

[8/12/2022 11:06 PM] tux_linux
We always seem to find time even when it doesn't exist


[8/12/2022 11:07 PM] szybet
yeaaaa...

{Reactions}
😁 

[8/12/2022 11:21 PM] tux_linux
Did you sync the online library after all?


[8/12/2022 11:22 PM] szybet
what do you mean? problems with certificates


[8/12/2022 11:22 PM] tux_linux
No, does it finish syncing


[8/12/2022 11:22 PM] tux_linux
Or does the GUI just hang


[8/12/2022 11:22 PM] tux_linux
Even if it should not


[8/12/2022 11:23 PM] szybet
i sent the logs, no, the gui doesnt hang it shows an empty library, and after going to settings for example and the back to library it crashes 255 code


[8/12/2022 11:23 PM] tux_linux
ah great


[8/12/2022 11:23 PM] tux_linux
What a mess


[8/12/2022 11:24 PM] szybet
just... renew the certificates?


[8/12/2022 11:24 PM] tux_linux
No that's not the problem


[8/12/2022 11:24 PM] szybet
i think it is


[8/12/2022 11:24 PM] tux_linux
The certificates aren't outdated, your system time is


[8/12/2022 11:24 PM] szybet
OH okay


[8/12/2022 11:24 PM] szybet
i repaired that today while working on the gui


[8/12/2022 11:24 PM] szybet
let me try

{Reactions}
👍 

[8/12/2022 11:24 PM] tux_linux
But you will probably encounter the hang after that


[8/12/2022 11:32 PM] szybet
what

{Attachments}
/mnt/data/projects/git/conversations/media/message-B5070.txt


[8/12/2022 11:32 PM] szybet
why


[8/12/2022 11:34 PM] szybet
wait, it synced


[8/12/2022 11:34 PM] szybet
the latest book is "the mill of silence"


[8/12/2022 11:34 PM] szybet
so it propably worked


[8/12/2022 11:41 PM] tux_linux
Yes
So it hangs?


[8/12/2022 11:43 PM] szybet
no


[8/12/2022 11:43 PM] szybet
it works


[8/12/2022 11:43 PM] tux_linux
Hmm


[8/12/2022 11:43 PM] szybet
```
{
    "list": [
        {
            "Author": "Szybet",
            "AuthorContact": "https://github.com/Szybet/sanki",
            "Enabled": true,
            "ExecPath": "/app-bin/sanki.sh",
            "IconPath": "/app-misc/sanki.png",
            "Name": "sanki",
            "RequiredFeatures": [
            ],
            "SupportedDevices": [
                "all"
            ],
            "Version": "0.1"
        },
        {
            "Author": "tucnak",
            "AuthorContact": "https://github.com/Kobo-InkBox/conway",
            "Enabled": true,
            "ExecPath": "/app-bin/Conway.sh",
            "IconPath": "/app-misc/Conway.png",
            "Name": "Conway",
            "RequiredFeatures": [
            ],
            "SupportedDevices": [
                "all"
            ],
            "Version": "1.0"
        },
        {
            "Author": "llandsmeer/NiLuJe",
            "AuthorContact": "https://github.com/NiLuJe/inkvt",
            "Enabled": true,
            "ExecPath": "/app-bin/InkVT.sh",
            "IconPath": "inkvt.png",
            "Name": "InkVT",
            "RequiredFeatures": [
                2
            ],
            "SupportedDevices": "all",
            "Version": "N/A"
        }
    ]
}

```
inkvt app is outdated?


[8/12/2022 11:43 PM] szybet
json^


[8/12/2022 11:43 PM] tux_linux
Do you have the latest version?


[8/12/2022 11:43 PM] szybet
yes


[8/12/2022 11:44 PM] tux_linux
Then did you rescan_userapps


[8/12/2022 11:44 PM] szybet
yes


[8/12/2022 11:44 PM] tux_linux
Or exit an usbms session


[8/12/2022 11:44 PM] szybet
yes


[8/12/2022 11:44 PM] szybet
usbms


[8/12/2022 11:44 PM] szybet
i did


[8/12/2022 11:45 PM] szybet
just update inkvt?


[8/12/2022 11:46 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-79C70.png


[8/12/2022 11:46 PM] szybet
the official way is an array


[8/12/2022 11:46 PM] szybet
so its simply outdated


[8/12/2022 11:46 PM] tux_linux
Ok I will


[8/12/2022 11:46 PM] szybet
inkvt needs work anyway


[8/12/2022 11:46 PM] szybet
but i dont know if we will have time for it


[8/12/2022 11:47 PM] tux_linux
sff maybe


[8/12/2022 11:47 PM] tux_linux
If we figure out how to put a keyboard in it


[8/12/2022 11:48 PM] szybet
i could look into it

{Reactions}
👍 

[8/12/2022 11:48 PM] szybet
but for now i want wifi


[8/12/2022 11:58 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/33
😂 😶‍🌫️

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/33
bugfix - i cant believe this was my code by Szybet · Pull Request #...
/mnt/data/projects/git/conversations/media/33-EBF8A

{Reactions}
👍 

[8/13/2022 12:01 AM] tux_linux
Code style guidelines


[8/13/2022 12:01 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220812-180051-99542.png


[8/13/2022 12:01 AM] tux_linux
else


[8/13/2022 12:02 AM] szybet
one sec ;_ ;

{Reactions}
👍 

[8/13/2022 12:03 AM] tux_linux
For your Wi-Fi GUI, add an option for the timeout delay
On my Aura SE sometimes it takes 5min to connect


[8/13/2022 12:04 AM] szybet
w h a t


[8/13/2022 12:04 AM] szybet
😐


[8/13/2022 12:05 AM] szybet
okay then


[8/13/2022 12:05 AM] szybet
for other devices 2 min is fine?


[8/13/2022 12:05 AM] szybet
can you specify a dir for config files?


[8/13/2022 12:05 AM] szybet
i will let the user choose the time if they have some weird wifi


[8/13/2022 12:05 AM] szybet
but min will be setted by us


[8/13/2022 1:37 AM] tux_linux
probably


[8/13/2022 1:37 AM] tux_linux
wifi_connection_information
already there


[8/13/2022 1:37 AM] tux_linux
in /data/config


[8/13/2022 1:39 AM] szybet
is there a list of... these things?
```
DR.
MR.
Mr.
MGR.
```
gutenberg hates me and those are the most points of failute


[8/13/2022 1:44 AM] szybet
gutenberg formatting is just stupid ,_ ,


[8/13/2022 2:05 AM] tux_linux
well


[8/13/2022 2:05 AM] tux_linux
you can ignore them


[8/13/2022 2:05 AM] szybet
it look horrible.


[8/13/2022 2:05 AM] tux_linux
But maybe there is a list


[8/13/2022 2:05 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/12-6DFCC
/mnt/data/projects/git/conversations/media/11-9E7C7
/mnt/data/projects/git/conversations/media/10-A00E7
/mnt/data/projects/git/conversations/media/9-BE782
/mnt/data/projects/git/conversations/media/8-96497
/mnt/data/projects/git/conversations/media/7-D11A6
/mnt/data/projects/git/conversations/media/6-ACD72
/mnt/data/projects/git/conversations/media/5-97609
/mnt/data/projects/git/conversations/media/4-BC476
/mnt/data/projects/git/conversations/media/3-121A7


[8/13/2022 2:05 AM] szybet
look at these


[8/13/2022 2:05 AM] szybet
maybe fast, i want go to sleep


[8/13/2022 2:06 AM] szybet
and i wont send you 0 1 and 2, those are heresy


[8/13/2022 2:06 AM] szybet
;p


[8/13/2022 2:06 AM] tux_linux
search for name prefix list


[8/13/2022 2:06 AM] szybet
are they good?


[8/13/2022 2:07 AM] tux_linux
yes, it's better


[8/13/2022 2:07 AM] szybet
is it good?


[8/13/2022 2:07 AM] szybet
will you implement it?


[8/13/2022 2:07 AM] tux_linux
yes


[8/13/2022 2:08 AM] tux_linux
it can't be worse than the current implementation


[8/13/2022 2:08 AM] szybet
look at that big if

{Attachments}
/mnt/data/projects/git/conversations/media/message-035D5.txt


[8/13/2022 2:08 AM] szybet
~~***its h e l l***~~~


[8/13/2022 2:09 AM] tux_linux
oh yeah, I remember doing this mess in python


[8/13/2022 2:09 AM] tux_linux
it can't be worse than the current implementation


[8/13/2022 2:11 AM] szybet
so its done


[8/13/2022 2:11 AM] szybet
yay


[8/13/2022 2:11 AM] tux_linux
hmm


[8/13/2022 2:12 AM] szybet
https://github.com/johnthagen/min-sized-rust if you want the binary smaller, look here
especially the part that includes "nightly"
also upx


[8/13/2022 2:12 AM] tux_linux
that's not too bad, it will not go into the rootfs


[8/13/2022 2:12 AM] tux_linux
it will be in the gui bundle


[8/13/2022 2:13 AM] szybet
is it possible to apply libs / binaries to the gui bundle from alpine?


[8/13/2022 2:13 AM] tux_linux
yes, I already did that


[8/13/2022 2:13 AM] tux_linux
but let me do it


[8/13/2022 2:13 AM] szybet
good then


[8/13/2022 2:13 AM] szybet
so the audio things will go there


[8/13/2022 2:13 AM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/tree/main/content/inkbox/system


[8/13/2022 2:13 AM] szybet
but thats in the future


[8/13/2022 2:13 AM] tux_linux
yes, we should implement audio support for the kindle too


[8/13/2022 2:13 AM] szybet
will it work?


[8/13/2022 2:13 AM] tux_linux
yes


[8/13/2022 2:14 AM] tux_linux
and create an image flasher of some kind for the kindle


[8/13/2022 2:14 AM] szybet
i will write it modular, so only the backend will be diffrent


[8/13/2022 2:14 AM] szybet
why


[8/13/2022 2:14 AM] tux_linux
...


[8/13/2022 2:14 AM] tux_linux
e


[8/13/2022 2:14 AM] tux_linux
m


[8/13/2022 2:14 AM] tux_linux
m


[8/13/2022 2:14 AM] tux_linux
c


[8/13/2022 2:14 AM] szybet
oh this


[8/13/2022 2:15 AM] szybet
maybe one for all devices? only exporting all storage is needed over usbms


[8/13/2022 2:16 AM] tux_linux
that is not dumb at all


[8/13/2022 2:16 AM] tux_linux
i never thought of usbms


[8/13/2022 2:16 AM] tux_linux
i thought of some kind of usbnet fetcher for base images and it would create the partition layout dynamically


[8/13/2022 2:17 AM] tux_linux
but usbms solves almost all of this


[8/13/2022 2:17 AM] tux_linux
the first unpartitioned space needs to stay the same


[8/13/2022 2:18 AM] szybet
You need usbms anyway if something goes wrong with uboot


[8/13/2022 2:18 AM] tux_linux
kindles have download mode


[8/13/2022 2:18 AM] tux_linux
magic


[8/13/2022 2:19 AM] szybet
It would be slow


[8/13/2022 2:19 AM] szybet
But it would work


[8/13/2022 2:19 AM] tux_linux
no, i mean, for recovering u-boot


[8/13/2022 2:19 AM] szybet
Oh ok


[8/13/2022 2:20 AM] tux_linux
you pushed your commits?


[8/13/2022 2:21 AM] tux_linux
ok good


[8/13/2022 2:25 AM] szybet
Yes
And I don't want to touch that again😞 🥴


[8/13/2022 2:26 AM] szybet
Remember to remove python too


[8/13/2022 2:26 AM] tux_linux
yes


[8/13/2022 5:11 AM] tux_linux
😁


[8/13/2022 5:12 AM] tux_linux
https://www.reddit.com/r/linuxmasterrace/comments/wmtlre/multiple_processes_are_bloat_just_run_the_program/?utm_medium=android_app&utm_source=share

{Embed}
https://www.reddit.com/r/linuxmasterrace/comments/wmtlre/multiple_processes_are_bloat_just_run_the_program/?utm_medium=android_app&utm_source=share
r/linuxmasterrace - Multiple processes are bloat, just run the prog...
802 votes and 79 comments so far on Reddit
/mnt/data/projects/git/conversations/media/farpc7t52ch91-FF9FD.png


[8/13/2022 5:13 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220812-231248-FC170.png


[8/13/2022 6:32 AM] the.mightydill
ah yes


[8/13/2022 6:32 AM] the.mightydill
discord as init


[8/14/2022 9:43 PM] tux_linux
Pinned a message.


[8/14/2022 9:45 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-01810.txt


[8/14/2022 9:45 PM] tux_linux
on Glo N613


[8/14/2022 9:52 PM] szybet
It does work


[8/14/2022 9:52 PM] szybet
Now one  with wlarm le


[8/14/2022 9:52 PM] tux_linux
ok


[8/14/2022 11:07 PM] tux_linux
nothing


[8/14/2022 11:07 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-983AB.txt


[8/14/2022 11:07 PM] tux_linux
on Glo HD N437


[8/15/2022 8:35 AM] szybet
Wtfff


[8/15/2022 11:40 AM] szybet
I never noticed that there are 3 states of wifi connection 🥴

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-04F88.png


[8/15/2022 12:09 PM] szybet
does wlarm_le output to stdout or stderr?


[8/15/2022 1:33 PM] szybet
only a reminder to add this to the stylesheet


[8/15/2022 1:50 PM] szybet
ddossing cloudflare with pings every 10s is not a good idea you know😶‍🌫️


[8/15/2022 1:59 PM] szybet
`/sys/class/net/eth0/operstate` isint reliable
its down until it gets an ip


[8/15/2022 4:36 PM] tux_linux
What do you want me to do
Everyone sends their dns requests
So I think pinging them is not a problem


[8/15/2022 4:37 PM] tux_linux
Don't touch that code, it's working but messed up


[8/15/2022 5:34 PM] szybet
I already did, I will do it properly


[8/15/2022 5:35 PM] tux_linux
```
kobo:~# wlarm_le escanresults > /tmp/test
kobo:~# cat /tmp/test
SSID: "SentFromMyToaster-EXT"
Mode: Managed   RSSI: -66 dBm   SNR: 0 dB       noise: -92 dBm  Flags: RSSI on-channel  Channel: 2
BSSID: 00:1C:F0:F5:FA:0E        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
WPA:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        No WPA Capabilities advertised
RSN:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 2 20MHz (0x2b02)
        Control channel: 2
        802.11N Capabilities: SGI40 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ]

SSID: "SentFromMyToaster"
Mode: Managed   RSSI: -80 dBm   SNR: 0 dB       noise: -92 dBm  Flags: RSSI on-channel  Channel: 11
BSSID: B8:EC:A3:D4:09:20        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
RSN:
        multicast cipher: AES-CCMP
        unicast ciphers(1): AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 11 20MHz (0x2b0b)
        Control channel: 11
        802.11N Capabilities: SGI20 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 96 ]

kobo:~#
```


[8/15/2022 5:36 PM] tux_linux
it outputs over stdout


[8/15/2022 5:37 PM] tux_linux
https://github.com/Szybet/inkbox-list-networks/blob/b61e1181e01714e156fda0ca1bb88e0c1ac3eefe/inkbox-list-networks/src/wlarm_le_wrapper.rs#L11
you could at least change that


[8/15/2022 5:54 PM] szybet
I already did, I will do it properly


[8/15/2022 5:54 PM] szybet
True
But its not an elegant solution


[8/15/2022 5:54 PM] szybet
Nothing, Im writing this code


[8/15/2022 5:57 PM] szybet
Weird, I will send you over a not stripped version

{Reactions}
👍 

[8/15/2022 8:27 PM] szybet
why do i cant execute things in external_root inside gui riitfs chroot?


[8/15/2022 8:27 PM] szybet
@tux-linux


[8/15/2022 8:35 PM] szybet
oh


[8/15/2022 8:35 PM] szybet
there is no bash


[8/15/2022 8:35 PM] szybet
https://youtu.be/pjl8w9UtCzs

{Embed}
RussianMan30
https://www.youtube.com/watch?v=pjl8w9UtCzs
Now that`s not funny
/mnt/data/projects/git/conversations/media/maxresdefault-177D2.jpg


[8/15/2022 9:05 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220815_210454-FBD66.jpg


[8/15/2022 9:12 PM] szybet
https://github.com/Szybet/inkbox/commit/f2d269033dbdc02960465790d37e7e1d53b91d93

Cold😆

{Embed}
https://github.com/Szybet/inkbox/commit/f2d269033dbdc02960465790d37e7e1d53b91d93
purging old cold, some new · Szybet/inkbox@f2d2690
/mnt/data/projects/git/conversations/media/f2d269033dbdc02960465790d37e7e1d53b91d93-B425C


[8/15/2022 9:17 PM] szybet
try this

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-FBD7B.zip


[8/15/2022 10:08 PM] tux_linux
Cool but
`Wi-Fi` not `Wifi`
And fix your fonts + make buttons borderless with lightGray background
For buttons it's Inter Bold


[8/15/2022 10:09 PM] tux_linux
?


[8/15/2022 10:12 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220815-161154-B2FA4.png


[8/15/2022 10:12 PM] tux_linux
It's not the correct way
You did not follow camelCase


[8/15/2022 10:13 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220815-161338-60613.png


[8/15/2022 10:13 PM] tux_linux
`newWIfiDialog` 🧐


[8/15/2022 10:50 PM] szybet
Oh I will correct all of this


[8/15/2022 10:50 PM] szybet
🥴


[8/15/2022 10:51 PM] szybet
Button on the top will have borders

Final look will be the last step


[8/15/2022 11:49 PM] tux_linux
Or you can put lines instead


[8/16/2022 2:12 PM] szybet
yes yes

{Reactions}
👍 

[8/16/2022 4:23 PM] tux_linux
`reconnecting`

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C4C02.png


[8/16/2022 4:25 PM] tux_linux
if you are reimplementing timesync.sh, rewrite the script itself, don't create a new one

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-76B6F.png


[8/16/2022 4:44 PM] szybet
😞


[8/16/2022 4:44 PM] szybet
Im not, its for *fancy* logging


[8/16/2022 4:44 PM] szybet
And I don't want to break compability with ipd

{Reactions}
👍 

[8/16/2022 7:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220816_195513-4E640.jpg


[8/16/2022 7:56 PM] tux_linux
You didn't fix your fonts or spelling at all


[8/16/2022 7:56 PM] tux_linux
But good work


[8/16/2022 7:57 PM] tux_linux
Now with the signal quality you should put different icons aside the label


[8/16/2022 7:57 PM] szybet
that will be the last step


[8/16/2022 7:57 PM] szybet
i want percents


[8/16/2022 7:58 PM] szybet
if you want, add it as an option


[8/16/2022 7:58 PM] tux_linux
put an icon left of the percentage


[8/16/2022 7:58 PM] szybet
i dont see a reason for that


[8/16/2022 7:58 PM] tux_linux
it's not intuitive


[8/16/2022 7:59 PM] szybet
,_ ,


[8/16/2022 7:59 PM] szybet
add it as an option...


[8/16/2022 7:59 PM] tux_linux
no


[8/16/2022 7:59 PM] tux_linux
like this


[8/16/2022 7:59 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-52BA8.png


[8/16/2022 7:59 PM] tux_linux
but you can have the percentage at the right of the icon


[8/16/2022 8:00 PM] szybet
either this or this


[8/16/2022 8:00 PM] tux_linux
no, having the percentage is good too


[8/16/2022 8:01 PM] szybet
having both is stupid


[8/16/2022 8:01 PM] tux_linux
why


[8/16/2022 8:01 PM] tux_linux
having an icon gives you a better idea of the signal strength at first sight instead of comparing numbers


[8/16/2022 8:02 PM] szybet
nah


[8/16/2022 8:02 PM] szybet
oh also... sorting by signal strength


[8/16/2022 8:02 PM] szybet
well i need to do this somehow


[8/16/2022 8:03 PM] tux_linux
it's easier like this
and if the user wants to compare number, they can compare numbers too


[8/16/2022 8:03 PM] tux_linux
https://fonts.google.com/icons?icon.query=wifi
has everything you need

{Embed}
https://fonts.google.com/icons?icon.query=wifi
Material Symbols and Icons - Google Fonts
Material Symbols are our newest icons consolidating over 2,500 glyphs in a single font file with a wide range of design variants.
/mnt/data/projects/git/conversations/media/material_symbols-67D42.jpg


[8/16/2022 8:04 PM] szybet
well maybe later


[8/16/2022 8:04 PM] szybet
maybe


[8/16/2022 8:04 PM] tux_linux
i will make you the icon set


[8/16/2022 8:05 PM] tux_linux
so you can directly throw them in the qrc


[8/16/2022 8:05 PM] szybet
okay, i can add the icons but if you remake the settings


[8/16/2022 8:05 PM] szybet
one section on one page


[8/16/2022 8:05 PM] szybet
now its a mess


[8/16/2022 8:06 PM] tux_linux
?


[8/16/2022 8:06 PM] szybet
.


[8/16/2022 8:06 PM] tux_linux
it's not efficient


[8/16/2022 8:06 PM] tux_linux
some sections will take 1cm of the screen


[8/16/2022 8:07 PM] szybet
for them you can make "misc"


[8/16/2022 8:07 PM] szybet
not its a mess, everything thrown on the screen without order


[8/16/2022 8:16 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/wifi.tar-8C8E0.xz


[8/16/2022 8:16 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BC29B.png


[8/16/2022 8:16 PM] szybet
well those public and lock are better

{Reactions}
👍 

[8/16/2022 8:18 PM] tux_linux
put them on a QLabel and scale them like brightnessIconWidth and brightnessIconHeight in MainWindow


[8/16/2022 8:18 PM] tux_linux
if it's too big, tell me


[8/16/2022 8:19 PM] tux_linux
https://www.mobileread.com/forums/showthread.php?t=348546

{Embed}
https://www.mobileread.com/forums/showthread.php?t=348546
Libra 2 I changed the sdcard of my Kobo Libra 2 - MobileRead Forums
Libra 2 I changed the sdcard of my Kobo Libra 2 Kobo Reader


[8/16/2022 8:19 PM] tux_linux
good


[8/16/2022 8:19 PM] tux_linux
i've got to buy that one


[8/16/2022 8:20 PM] tux_linux
someday


[8/16/2022 8:22 PM] ninuje
Good luck making sense of the largely meaningless signal quality metrics that differ depending on the chip ;p


[8/16/2022 8:23 PM] szybet
higher - better


[8/16/2022 8:23 PM] szybet
if something doesnt fit, the rust backend will convert it


[8/16/2022 8:23 PM] ninuje
The issue is when choosing an icon, as you need an idea of the scale to choose the right icon


[8/16/2022 8:25 PM] szybet
0-100?...


[8/16/2022 8:25 PM] ninuje
Basically moving from the mess the chip outputs to a 0-100% quality value that a random user will understand


[8/16/2022 8:25 PM] szybet
what the...


[8/16/2022 8:26 PM] szybet
why do you both think the user is so stupid that he doesnt understand that higher signal percentage = better


[8/16/2022 8:26 PM] tux_linux
i don't think he meant that


[8/16/2022 8:26 PM] ninuje
You don't get a percentage from the hw/sw stack


[8/16/2022 8:26 PM] tux_linux
I think he's telling that 100% signal might not be the actual strength


[8/16/2022 8:27 PM] szybet
still higher better


[8/16/2022 8:27 PM] szybet
thats the point


[8/16/2022 8:28 PM] tux_linux
updated icons, I added standby + off icons
(so you can replace the existing ones for consistency with other Wi-Fi material icons)

{Attachments}
/mnt/data/projects/git/conversations/media/wifi.tar-9FBD2.xz


[8/16/2022 8:28 PM] ninuje
Bad example because that's an AP and not a client


[8/16/2022 8:28 PM] ninuje
```
root@R7800:~# iwinfo wlan0 info
wlan0     ESSID: "Serenity_5GHz"
          Access Point: 44:A5:6E:47:3E:FA
          Mode: Master  Channel: 132 (5.660 GHz)
          Center Channel 1: 138 2: unknown
          Tx-Power: 26 dBm  Link Quality: 70/70
          Signal: -37 dBm  Noise: -104 dBm
          Bit Rate: 633.3 MBit/s
          Encryption: WPA2 PSK (CCMP)
          Type: nl80211  HW Mode(s): 802.11nac
          Hardware: 168C:0046 168C:CAFE [Qualcomm Atheros QCA9984]
          TX power offset: none
          Frequency offset: none
          Supports VAPs: yes  PHY name: phy0
```


[8/16/2022 8:29 PM] ninuje
You get a random "Link Quality" that's meaningless and hardware-specific


[8/16/2022 8:29 PM] szybet
i know


[8/16/2022 8:29 PM] ninuje
And the fact that you get one at all is also hardware specific


[8/16/2022 8:29 PM] szybet
i look at signal


[8/16/2022 8:29 PM] ninuje
And the scale of the dBm value (and format) is *also* hardware specific


[8/16/2022 8:29 PM] szybet
cool

{Reactions}
👍 

[8/16/2022 8:30 PM] szybet
still, if higher is better, then higher is better


[8/16/2022 8:30 PM] ninuje
I'm talking about choosing an icon, for which you need an universal scale


[8/16/2022 8:30 PM] ninuje
Not sorting by strength/qual/SNR


[8/16/2022 8:31 PM] szybet
there is only one scale on one device


[8/16/2022 8:31 PM] szybet
so i dont need a problem


[8/16/2022 8:31 PM] tux_linux
?
may I remind you that we support 8 devices


[8/16/2022 8:32 PM] szybet
if higher is better than higher is better, then the icon will be better


[8/16/2022 8:32 PM] tux_linux
and the chip is not the same on every of them


[8/16/2022 8:32 PM] szybet
an nothing more is interesting me


[8/16/2022 8:32 PM] szybet
if something is other, i will convert it in rust


[8/16/2022 8:32 PM] tux_linux
ok


[8/16/2022 8:32 PM] ninuje
https://github.com/koreader/lj-wpaclient/blob/4f95110298b89d80e762215331159657ae36b4ef/wpaclient.lua#L97-L131

{Embed}
https://github.com/koreader/lj-wpaclient/blob/4f95110298b89d80e762215331159657ae36b4ef/wpaclient.lua
lj-wpaclient/wpaclient.lua at 4f95110298b89d80e762215331159657ae36b...
wpa_supplicant client library for LuaJIT. Contribute to koreader/lj-wpaclient development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/lj-wpaclient-7B11A


[8/16/2022 8:32 PM] tux_linux
you did not send me your binary for testing with wlarm_le


[8/16/2022 8:33 PM] szybet
i send


[8/16/2022 8:33 PM] szybet
yestarday


[8/16/2022 8:33 PM] tux_linux
oh, did not see it


[8/16/2022 8:36 PM] ninuje
That is *exactly* the point I'm trying to make: it's something you'll have to keep in mind, as you'll definitely want your network manager backend to feed something sensible to the frontend so the UI can act on it sensibly


[8/16/2022 8:37 PM] ninuje
a.k.a., not showing 1 bar icons at full strength like Nickel does ;p


[8/16/2022 8:37 PM] ninuje
On like, half of their devices


[8/16/2022 8:37 PM] tux_linux
up until this point, we only showed a full wi-fi icon when it was connected


[8/16/2022 8:37 PM] szybet
lol


[8/16/2022 8:38 PM] ninuje
It's a stupid little UX refinement that's surprisingly hard to get right because it turns out hardware is terrible


[8/16/2022 8:38 PM] szybet
i know it, thats the point of separeting the backend


[8/16/2022 10:42 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-57CF3.txt


[8/16/2022 11:40 PM] tux_linux
```
connect(this, SIGNAL(killNetworkWidgets()), connectedNetwork, SLOT(close()));
```
Use `QObject::connect` syntax


[8/16/2022 11:40 PM] tux_linux
And a log message starts with a capital letter


[8/16/2022 11:50 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/ec95f7c7b9f711a55ade5601078934693fec2535
I pushed this commit
You can merge it in your repo
So that the icons will be replaced

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/ec95f7c7b9f711a55ade5601078934693fec2535
Add new Wi-Fi icons · Kobo-InkBox/inkbox@ec95f7c
/mnt/data/projects/git/conversations/media/ec95f7c7b9f711a55ade5601078934693fec2535-8777A


[8/16/2022 11:51 PM] tux_linux
your refresh icon is misleading as it could also imply syncing at the same time


[8/17/2022 11:29 AM] szybet
still nothing?


[8/17/2022 11:29 AM] szybet
but do you turn on the interface before?


[8/17/2022 1:54 PM] tux_linux
still nothing


[8/17/2022 1:54 PM] tux_linux
I think it was
I can try again


[8/17/2022 1:56 PM] szybet
as for encrypting the passwords: because the new lockscreen isint ready, and there is no ecosystem i could attach on, i will leave it as it is. adding later an "enter master password to decrypt wifi database" will be easy


[8/17/2022 1:57 PM] tux_linux
Enter master password to unlock system keychain


[8/17/2022 1:57 PM] tux_linux
How would you do that?


[8/17/2022 1:57 PM] szybet
what?


[8/17/2022 1:58 PM] tux_linux
The message
As we are using the database for other things too


[8/17/2022 1:58 PM] szybet
what database?


[8/17/2022 1:58 PM] tux_linux
Password database


[8/17/2022 1:59 PM] tux_linux
Keychain


[8/17/2022 1:59 PM] szybet
?


[8/17/2022 1:59 PM] szybet
what


[8/17/2022 1:59 PM] szybet
i want encrypt / decrypt a json


[8/17/2022 1:59 PM] tux_linux
It can be something else too


[8/17/2022 1:59 PM] tux_linux
But it would be necessary


[8/17/2022 2:00 PM] szybet
IDK
for now there is nothing, soo


[8/17/2022 2:01 PM] tux_linux
Ok I will search for one


[8/17/2022 2:01 PM] tux_linux
We can store lockscreen password as a hash, probably


[8/17/2022 2:01 PM] szybet
yes, exactly


[8/17/2022 2:02 PM] szybet
also as there is now no need to kill apps when going back from sleep, the lock screen should simply unfreeze them


[8/17/2022 2:03 PM] szybet
maybe even grab the touch screen device, to be sure


[8/17/2022 2:07 PM] szybet
nope

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E929A.png


[8/17/2022 2:08 PM] tux_linux
You should not use this:: but className::


[8/17/2022 2:08 PM] szybet
,_ ,


[8/17/2022 2:09 PM] tux_linux
Just check for other examples in the code


[8/17/2022 2:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-26EFD.png


[8/17/2022 2:11 PM] szybet
i dont understand it.


[8/17/2022 2:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F983C.png


[8/17/2022 2:12 PM] szybet
also, "this" should work


[8/17/2022 2:12 PM] tux_linux
connect this, mainwindow::signal, this, mainwindow::slot


[8/17/2022 2:14 PM] szybet
```
mainwindow.cpp:793:70: error: call to non-static member function without an object argument
```


[8/17/2022 2:14 PM] tux_linux
What's your code


[8/17/2022 2:14 PM] szybet
what? i want connect it to wifi dialog


[8/17/2022 2:14 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E0198.png


[8/17/2022 2:14 PM] tux_linux
Ok I read the example


[8/17/2022 2:14 PM] szybet
oh i see


[8/17/2022 2:14 PM] szybet
fuck


[8/17/2022 2:14 PM] tux_linux
&wifiDialog


[8/17/2022 2:15 PM] tux_linux
You forgot ampersand


[8/17/2022 2:17 PM] szybet
```
QObject::connect: signal not found in MainWindow

```


[8/17/2022 2:17 PM] szybet
i found this in logs


[8/17/2022 2:17 PM] szybet
it compiled fine


[8/17/2022 2:17 PM] szybet
😂


[8/17/2022 2:20 PM] tux_linux
You did not put QObject::connect?


[8/17/2022 2:21 PM] szybet
nope


[8/17/2022 2:21 PM] szybet
the same


[8/17/2022 2:21 PM] tux_linux
Does it work at least


[8/17/2022 2:21 PM] tux_linux
?


[8/17/2022 2:24 PM] szybet
well, it was not in good order


[8/17/2022 2:24 PM] szybet
now it works


[8/17/2022 2:24 PM] szybet
bu still there were no errors because of it


[8/17/2022 2:24 PM] szybet
so it doesnt work as intended


[8/17/2022 2:25 PM] szybet
but at least there are some cool logs


[8/17/2022 2:25 PM] szybet
```
QObject::connect:  (sender name:   'toast')
QObject::connect:  (receiver name: 'MainWindow')`
```


[8/17/2022 3:01 PM] tux_linux
not supposed to happen


[8/17/2022 3:02 PM] tux_linux
what's your code


[8/17/2022 3:02 PM] szybet
it works, but it doesnt error at compilation if it doesnt


[8/17/2022 3:10 PM] tux_linux
can you compile a list networks bin that executes wlarm_le too for n613?


[8/17/2022 3:10 PM] tux_linux
just temporary, it will be easier to test here


[8/17/2022 3:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-585B9


[8/17/2022 3:12 PM] szybet
executes wlarm le every time


[8/17/2022 3:13 PM] tux_linux
ok thanks


[8/17/2022 3:15 PM] tux_linux
```
kobo:/tmp# ./inkbox-list-networks
kobo:/tmp# cat /run/wifi_list_format 
00:1C:F0:F5:FA:0E
SentFromMyToaster-EXT
false
73
%%==SPLIT==%%
B8:EC:A3:D4:09:20
SentFromMyToaster
true
79
%%==SPLIT==%%
kobo:/tmp# cat /run/wifi_list_full
SSID: "SentFromMyToaster-EXT"
Mode: Managed   RSSI: -73 dBm   SNR: 0 dB       noise: -92 dBm  Flags: RSSI on-channel  Channel: 1
BSSID: 00:1C:F0:F5:FA:0E        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
WPA:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        No WPA Capabilities advertised
RSN:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 1 20MHz (0x2b01)
        Control channel: 1
        802.11N Capabilities: SGI40 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ]

SSID: "SentFromMyToaster"
Mode: Managed   RSSI: -79 dBm   SNR: 0 dB       noise: -92 dBm  Flags: RSSI on-channel  Channel: 11
BSSID: B8:EC:A3:D4:09:20        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
RSN:
        multicast cipher: AES-CCMP
        unicast ciphers(1): AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 11 20MHz (0x2b0b)
        Control channel: 11
        802.11N Capabilities: SGI20 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 96 ]

kobo:/tmp#
```


[8/17/2022 3:15 PM] tux_linux
It Works


[8/17/2022 3:15 PM] szybet
indeed


[8/17/2022 3:15 PM] szybet
soo upx is the problem?


[8/17/2022 3:15 PM] tux_linux
it could be


[8/17/2022 3:15 PM] szybet
try it


[8/17/2022 3:15 PM] tux_linux
I don't trust it very much


[8/17/2022 3:16 PM] tux_linux
no it works too


[8/17/2022 3:16 PM] tux_linux
for me it segfaults when I compress it with `--ultra-brute` option


[8/17/2022 3:17 PM] tux_linux
which is probably a bit too brute


[8/17/2022 3:17 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/06270094c773c8ce024cabc1ff75467ab936c5c7/initrd/common/inkbox-splash#L66-L68
And is the reason why I need to do this there

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/06270094c773c8ce024cabc1ff75467ab936c5c7/initrd/common/inkbox-splash
kernel/inkbox-splash at 06270094c773c8ce024cabc1ff75467ab936c5c7 · ...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[8/17/2022 3:18 PM] tux_linux
it segfaults at first but if you try enough times it will run at some point


[8/17/2022 3:18 PM] tux_linux
it's just nonsense


[8/17/2022 3:18 PM] szybet
it says brute for a reason


[8/17/2022 3:18 PM] tux_linux
yeah but


[8/17/2022 3:18 PM] tux_linux
like
i would like my binary to be still working, not randomly segfaulting at times


[8/17/2022 3:18 PM] szybet
so you tested it without turning on wifi


[8/17/2022 3:18 PM] szybet
😄


[8/17/2022 3:18 PM] tux_linux
maybe


[8/17/2022 3:19 PM] szybet
as i said, computers work randomly


[8/17/2022 3:19 PM] tux_linux
scientific evidence

{Reactions}
😆 

[8/17/2022 3:27 PM] tux_linux
I will try implementing inkbox-split-rs sometime today or tomorrow


[8/17/2022 3:27 PM] szybet
good


[8/17/2022 3:27 PM] szybet
where is xorg.conf?


[8/17/2022 6:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220817_142550-82501.jpg


[8/17/2022 7:01 PM] tux_linux
Good


[8/17/2022 7:01 PM] tux_linux
Maybe you have to create it
Somewhere in /xorg


[8/17/2022 7:15 PM] szybet
find a better one then...


[8/17/2022 8:29 PM] tux_linux
I put one in my recent commit


[8/17/2022 8:29 PM] tux_linux
.


[8/17/2022 8:29 PM] szybet
oh ok


[8/17/2022 9:22 PM] szybet
```
17/08/2022 @ 21:22:19 | wifiDialog: Found current network in vector
Segmentation fault
```
vectors are the worse 🥴


[8/18/2022 4:18 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220818-101729-3CD18.png


[8/18/2022 5:19 PM] szybet
i hate this
idk about what this is, but people create the language, how they speak is how its pretended to speak
okay, someone can be wrong but the "but" should be "no one speaks like that" and not "its a rule because yes and yes"

{Reactions}
👍 

[8/18/2022 5:20 PM] tux_linux
it's about get wifi information**s** things you put in your recent commits


[8/18/2022 5:22 PM] szybet
,_ , i will not change this


[8/18/2022 5:23 PM] tux_linux
i will then


[8/18/2022 5:24 PM] szybet
english't


[8/18/2022 5:24 PM] tux_linux
i know it's nothing


[8/18/2022 5:24 PM] tux_linux
but i will


[8/18/2022 5:24 PM] szybet
what about adding translations to inkbox?


[8/18/2022 5:24 PM] szybet
p o l i s h


[8/18/2022 5:24 PM] tux_linux
one day


[8/18/2022 5:26 PM] szybet
wifi will be ready today, propably


[8/18/2022 5:26 PM] szybet
without ui fixes, but the main functionality, yes


[8/18/2022 5:26 PM] tux_linux
did you fix camelCase


[8/18/2022 5:26 PM] szybet
👀


[8/18/2022 5:27 PM] szybet
i will

{Reactions}
👍 

[8/18/2022 5:27 PM] tux_linux
**ui** fixes


[8/18/2022 5:27 PM] szybet
dont repair my code until i say that everything is perfect


[8/18/2022 5:27 PM] szybet
;p


[8/18/2022 5:27 PM] tux_linux
when will it be ready


[8/18/2022 5:27 PM] szybet
perfect? tommorow


[8/18/2022 5:27 PM] szybet
for testing? in 4 hours propably


[8/18/2022 5:28 PM] tux_linux
👀


[8/18/2022 9:51 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220818-155118-912E8.png


[8/18/2022 9:52 PM] tux_linux
`> /run/wifi_logs`


[8/18/2022 9:52 PM] tux_linux
And log should not be there


[8/18/2022 9:52 PM] tux_linux
`/var/log/wifi.log`


[8/18/2022 10:06 PM] szybet
No
I want my way of doing this


[8/18/2022 10:06 PM] szybet
Yeaaa I will repair that at the end


[8/18/2022 10:07 PM] szybet
Also its ready for testing, not for reviewing but for testing

{Reactions}
👍 

[8/18/2022 10:07 PM] szybet
Only message about success / fail is missing


[8/18/2022 10:08 PM] szybet
4 days of coding to this point
I hoped for 3 😒


[8/19/2022 1:21 PM] szybet
how do i disconnect from wifi?


[8/19/2022 1:22 PM] szybet
:/


[8/19/2022 2:06 PM] tux_linux
I just turn off the interface, then turn on again


[8/19/2022 2:06 PM] tux_linux
There should be another way but I don't know it


[8/19/2022 3:51 PM] szybet
***no***


[8/19/2022 3:51 PM] szybet
I want a clever way for thid😞


[8/19/2022 3:53 PM] tux_linux
There isn't?


[8/19/2022 4:21 PM] szybet
common linux


[8/19/2022 4:21 PM] szybet
,_ ,


[8/19/2022 5:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C165C.png


[8/19/2022 5:24 PM] szybet
HMM


[8/19/2022 5:43 PM] szybet
```
kobo:/usr/local/bin/wifi# iwevent
Waiting for Wireless Events from interfaces...


15:42:27.380762   eth0     Scan request completed
15:42:42.243674   eth0     Scan request completed
15:42:52.052719   eth0     Set Mode:Managed
15:42:52.060567   eth0     Set ESSID:"\x00\x16g#\x94\x82\xDA\xBC\xEC4S\xFF\x1F\x95x\xFE\xEC\xBD\xCB\x04\x16R\xAB\xBA\xB2b\xD7\x8A\x14\xD2t+"
15:42:52.181469   eth0     Scan request completed
15:42:52.230068   eth0     New Access Point/Cell address:EC:A9:40:6E:74:DD
15:42:52.230981   eth0     New Access Point/Cell address:Not-Associated
15:42:52.231078   eth0     Set ESSID:"\xED/\x10}\x1C\xD4'\xD3\x8A\xC9\x92+\x12"o\xAC\xC6\xA1\xBD\xDF\xC8\x8B\xC4N?\xBBc\x97\x93LD\xFA"
15:42:52.330347   eth0     Scan request completed
15:42:53.332505   eth0     Scan request completed
15:42:53.823939   eth0     New Access Point/Cell address:Not-Associated
15:42:53.824581   eth0     Scan request completed
15:42:53.827445   eth0     Set Mode:Managed
15:42:53.884472   eth0     Set Frequency:244.7 MHz
15:42:53.884666   eth0     Set ESSID:"Deco_AF1C_EXT"
15:42:53.958745   eth0     New Access Point/Cell address:50:D4:F7:B7:27:39
15:43:06.088022   eth0     Scan request completed
15:43:10.748142   eth0     Scan request completed


```


[8/19/2022 5:43 PM] szybet
😍


[8/19/2022 5:43 PM] szybet
so many logs


[8/19/2022 5:43 PM] szybet
can i add it to the background?


[8/19/2022 5:43 PM] szybet
@tux-linux


[8/19/2022 5:44 PM] szybet
it will push logs to a file that the user can view


[8/19/2022 5:45 PM] tux_linux
How much CPU usage?


[8/19/2022 5:46 PM] szybet
```
kobo:/usr/local/bin/wifi# time iwevent
Waiting for Wireless Events from interfaces...
15:45:22.624630   eth0     New Access Point/Cell address:Not-Associated
15:45:22.624750   eth0     Set ESSID:"\xDA\x18\xEA\x9AN\x1D\x06\x07^\x17\xD0\xFB\x87l\xB4zl\x9E\xD4\x9Ar\xC7\x15\xE6a \xE0g)\xB859"
15:45:22.642009   eth0     Set ESSID:"\x94\x11\xD8-\x8D\xD1\x95AD\xA2\x0C\x87\x18\xF9\xB5QW\x07B\xE6\xA4kA\xA1\x0B\xF3\xD1\x1CI9\xE3s"
15:45:22.655473   eth0     New Access Point/Cell address:Not-Associated
15:45:37.223677   eth0     Scan request completed
15:45:49.237792   eth0     Set Mode:Managed
15:45:49.246967   eth0     Set ESSID:"\x00\x16g#\x94\x82\xDA\xBC\xEC4S\xFF\x1F\x95x\xFE\xEC\xBD\xCB\x04\x16R\xAB\xBA\xB2b\xD7\x8A\x14\xD2t+"
15:45:49.372305   eth0     Scan request completed
15:45:49.420893   eth0     New Access Point/Cell address:Not-Associated
15:45:51.946096   eth0     Scan request completed
15:45:51.946187   eth0     Set Mode:Managed
15:45:51.993950   eth0     Set Frequency:244.7 MHz
15:45:51.996675   eth0     Set ESSID:"Deco_AF1C_EXT"
15:45:52.143668   eth0     New Access Point/Cell address:50:D4:F7:B7:27:39

15:46:04.997981   eth0     Scan request completed
^CCommand terminated by signal 2
0.00user 0.00system 1:24.68elapsed 0%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+0minor)pagefaults 0swaps
kobo:/usr/local/bin/wifi# 

```


[8/19/2022 5:46 PM] szybet
0


[8/19/2022 5:46 PM] szybet
it will run only when wifi is running so


[8/19/2022 5:48 PM] tux_linux
Ok


[8/19/2022 5:52 PM] szybet
if user has any problem with the wifi, you have all the logs, and the user can debug it by itself

{Reactions}
👍 

[8/19/2022 5:54 PM] tux_linux
Did you fix log location?


[8/19/2022 5:59 PM] szybet
no


[8/19/2022 5:59 PM] szybet
but camel case, etc is fixed


[8/19/2022 5:59 PM] szybet
almost everything is ready... slowly


[8/19/2022 6:00 PM] tux_linux
Design?


[8/19/2022 6:02 PM] szybet
only apply the icons, and fonts


[8/19/2022 6:02 PM] szybet
the rest... well you need to tweak if its not good

{Reactions}
👍 

[8/19/2022 6:24 PM] szybet
wpa_cli disconnect; wpa_cli logoff; wpa_cli disable_network 0; wpa_cli remove_n
etwork 0; wpa_cli terminate; ip addr flush dev eth0


[8/19/2022 6:24 PM] szybet
😎


[8/19/2022 9:18 PM] szybet
i was too ambitions about it being not blocking, and im getting segmantation fault every 3 clicks


[8/19/2022 9:19 PM] szybet
but its slowly getting better

{Reactions}
👍 

[8/19/2022 9:19 PM] szybet
;p


[8/19/2022 10:02 PM] tux_linux
when will it be ready


[8/19/2022 10:53 PM] szybet
Tommorow....... And tommorow....
When I fix those segment faults
Applying fonts and icons will be fast


[8/19/2022 10:53 PM] szybet
I really wanted to finish it faster😒


[8/19/2022 10:53 PM] tux_linux
no hurry


[8/19/2022 10:53 PM] tux_linux
je ne veux pas de travail bâclé


[8/19/2022 10:53 PM] tux_linux
that's how I would say it in french


[8/19/2022 10:54 PM] szybet
Yes hurry

I want 2.0 to be perfectly usable


[8/19/2022 10:54 PM] tux_linux
we are not obliged to release it 31st of August


[8/19/2022 10:54 PM] tux_linux
I can delay if necessary


[8/19/2022 10:56 PM] szybet
Still I would want this date...


[8/19/2022 11:36 PM] the.mightydill
31st*


[8/19/2022 11:36 PM] the.mightydill
😉


[8/19/2022 11:36 PM] tux_linux
hm yeah


[8/19/2022 11:36 PM] tux_linux
true


[8/20/2022 6:38 PM] tux_linux
did you find a fix?


[8/20/2022 6:40 PM] the.mightydill
your english is MUCH MUCH better than my french 😉 ¯\_(ツ)_/¯


[8/20/2022 6:43 PM] szybet
in theory im on vacation
in practice i program inkbox when i have some time

but today i was all day somewhere, so still no


[8/20/2022 6:43 PM] szybet
but i will work on it, i have some time now


[8/20/2022 6:50 PM] tux_linux
Ok np


[8/20/2022 7:38 PM] szybet
i think the notyfication message needs to be improved


[8/20/2022 9:05 PM] tux_linux
What are your talking about


[8/20/2022 9:06 PM] szybet
the one ipd uses


[8/20/2022 9:06 PM] tux_linux
In what way


[8/20/2022 9:06 PM] szybet
move it to the center


[8/20/2022 9:06 PM] szybet
and add a file in run that if gui detects it after some s it will remove the message by repaitning


[8/20/2022 9:07 PM] tux_linux
Why should it be removed


[8/20/2022 9:08 PM] szybet
because it will be buggied by a half refresh


[8/20/2022 9:08 PM] tux_linux
Not in the center


[8/20/2022 9:09 PM] szybet
there is the most chance it will refresh in 100%


[8/20/2022 9:10 PM] tux_linux
?


[8/20/2022 9:14 PM] szybet
the center refreshes the mostly


[8/20/2022 9:18 PM] tux_linux
Then why do you want to move it to the center


[8/20/2022 9:22 PM] szybet
.


[8/20/2022 10:18 PM] tux_linux
No, using quotes is the right way
You're not following guidelines

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-59A20.png


[8/20/2022 10:22 PM] tux_linux
It's spelled `Wi-Fi` unless you're talking about a variable or a file name

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-20A32.png


[8/20/2022 10:55 PM] tux_linux
do you handle the wifi icon in the main gui (MainWindow) to indicate signal strength?


[8/21/2022 7:46 AM] szybet
No
This would be heavy on performance


[8/21/2022 7:46 AM] szybet
I'd didn't worked with quotes


[8/21/2022 7:46 AM] szybet
I know, I even repaired somewhere this
But new this appear

{Reactions}
👍 

[8/21/2022 2:02 PM] tux_linux
you're still not following guidelines


[8/21/2022 2:02 PM] szybet
I tryied with ""


[8/21/2022 2:02 PM] szybet
and it didn't worked


[8/21/2022 2:02 PM] szybet
i removed


[8/21/2022 2:03 PM] szybet
and it worked


[8/21/2022 2:03 PM] tux_linux
that's impossible


[8/21/2022 2:03 PM] tux_linux
bash or sh?


[8/21/2022 2:03 PM] tux_linux
try to run the script with `sh -x` to get debug output


[8/21/2022 2:03 PM] tux_linux
(or `bash -x`)


[8/21/2022 2:11 PM] szybet
well later


[8/21/2022 2:11 PM] szybet
thats only visual thing


[8/21/2022 2:11 PM] szybet
now i have problem with this
```
#!/bin/bash

# https://superuser.com/questions/903464/wpa-supplicant-detecting-that-my-password-is-incorrect
function waitFunction {
    while true
    do
        sleep 1
    done
}

exitcode=0

function watchForPassword {
    (waitFunction) | wpa_cli | while read line
    do
        case "$line" in
            *'4-Way Handshake failed'*)
                echo "Incorrect key for network"
                exitcode=1
                break
            ;;
            *'CTRL-EVENT-CONNECTED'*)
                echo "Connected to network"
                exitcode=0
                break
            ;;
            *)
                # More logs
                echo "$line" >> /run/wifi_logs
            ;;
        esac
    done
}

watchForPassword

exit $exitcode

```
how do i exit from the while loop? i cant figure it out


[8/21/2022 2:11 PM] szybet
because there us a subshell


[8/21/2022 2:13 PM] tux_linux
break?


[8/21/2022 2:13 PM] szybet
doesnt work


[8/21/2022 2:13 PM] tux_linux
What while loop exactly


[8/21/2022 2:14 PM] szybet
```
    (waitFunction) | wpa_cli | while read line

```


[8/21/2022 2:14 PM] szybet
its complicated


[8/21/2022 2:14 PM] szybet
i stealed the code


[8/21/2022 2:14 PM] szybet
i dont understand it


[8/21/2022 2:15 PM] tux_linux
Where do you want to exit


[8/21/2022 2:23 PM] szybet
here where break is


[8/21/2022 5:26 PM] szybet
i dont think this applies to all buttons i have there...

which buttons? what if i have icons there?

:|


[8/21/2022 5:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BA21B.png


[8/21/2022 5:26 PM] szybet
wtf why


[8/21/2022 5:26 PM] szybet
nooo :(


[8/21/2022 5:27 PM] szybet
wifi_logs will stay, those are logs used by the program, and we dont use for others like was_connected_to_wifi isint with a .txt extension


[8/21/2022 5:51 PM] szybet
what was the problem with gutenberg did you fixed it?


[8/21/2022 5:52 PM] szybet
when i will se a option to sync the library only when i want


[8/21/2022 5:55 PM] szybet
the gui is freezed when the brightness is going up when coming from a reboot


[8/21/2022 5:55 PM] szybet
maybe a non blocking version?


[8/21/2022 7:40 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/34

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/34
complete wifi redesign by Szybet · Pull Request #34 · Kobo-InkBox/i...
rootfs + ipd update is also needed
/mnt/data/projects/git/conversations/media/34-87CD2


[8/21/2022 7:43 PM] szybet
because its non blocking, there are many cases that I maybe didn't cover so more wifi testing is needed

but overall, it works good. Better than the previous one that was well.. arround 100 line of code, not 2000~

also i havent accoured any crashes since 2 days of developing it, so thats good

also i implemented password checking, and maybe more time for this process is needed. This parts needs the most testing

to test it overall, start from using the bare scripts first


[8/21/2022 8:00 PM] szybet
i also had limited wifi networks to test it


[8/21/2022 8:23 PM] tux_linux
then please explain why your whole user apps implementation only uses pascal case in every app.json property


[8/21/2022 8:23 PM] tux_linux
`/var/log/wifi.log`


[8/21/2022 8:23 PM] szybet
really? 😂


[8/21/2022 8:23 PM] szybet
no,  everything will go to run


[8/21/2022 8:23 PM] tux_linux
i don't know
no


[8/21/2022 8:24 PM] szybet
if you wont accept as it is i will rename it but to wifi_events


[8/21/2022 8:24 PM] tux_linux
user can wait
it isn't *that* long


[8/21/2022 8:24 PM] tux_linux
why


[8/21/2022 8:24 PM] szybet
5 minutes


[8/21/2022 8:24 PM] szybet
because i dont want it to go somewhere else


[8/21/2022 8:24 PM] tux_linux
i want it


[8/21/2022 8:24 PM] tux_linux
it doesn't make any sense


[8/21/2022 8:24 PM] szybet
everything is in run


[8/21/2022 8:25 PM] szybet
everything has this naming scheme there


[8/21/2022 8:25 PM] tux_linux
why are we putting ipd logs, gui logs, openrc logs in /var/log and this goes in /run


[8/21/2022 8:25 PM] szybet
those are diffrent logs


[8/21/2022 8:25 PM] szybet
those are logs that the user can view in gui


[8/21/2022 8:25 PM] tux_linux
then keep your other wifi things in run but move the log file in `/var/log`


[8/21/2022 8:26 PM] szybet
._.


[8/21/2022 8:27 PM] tux_linux
here if unsure of the path you should use `setDefaultWorkDir()` before accessing .config, but not accessing it with its full path

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9A993.png


[8/21/2022 8:27 PM] szybet
no, i want full path


[8/21/2022 8:27 PM] szybet
less movement for errors


[8/21/2022 8:27 PM] tux_linux
then what if some day we redesign this


[8/21/2022 8:27 PM] szybet
i already had problems with the small path


[8/21/2022 8:28 PM] szybet
every ide has replace functions


[8/21/2022 8:28 PM] tux_linux
and this?


[8/21/2022 8:29 PM] szybet
here

{Reactions}
👍 

[8/21/2022 8:29 PM] szybet
the user already has soo much informations in the wifi gui


[8/21/2022 8:29 PM] szybet
but in the future


[8/21/2022 8:29 PM] szybet
if you want


[8/21/2022 8:29 PM] szybet
i can add this


[8/21/2022 8:29 PM] szybet
but not now


[8/21/2022 8:29 PM] tux_linux
what icon did you set it to display?


[8/21/2022 8:30 PM] szybet
wifi-100 because it looks better than wifi connected

{Reactions}
👍 

[8/21/2022 8:30 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C68E8.png


[8/21/2022 8:30 PM] tux_linux
c a m e l C a s e


[8/21/2022 8:30 PM] szybet
o h c r a p i d i d n t n o t i c e d

{Reactions}
👍 

[8/21/2022 8:32 PM] tux_linux
is this on purpose or you forgot a C ?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B3995.png


[8/21/2022 8:33 PM] szybet
on purpuse because there are many messages with reconection for example


[8/21/2022 8:33 PM] szybet
i will redesign this anyway one day


[8/21/2022 8:33 PM] tux_linux
ok


[8/21/2022 8:34 PM] tux_linux
change that index back

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-25017.png


[8/21/2022 8:34 PM] szybet
okay


[8/21/2022 8:34 PM] szybet
i wonder what i was doing there


[8/21/2022 8:36 PM] tux_linux
`QFile passwordDatabase = QFile("/mnt/onboard/.adds/inkbox/.config/17-wifi_connection_information/passwords.json");`
it's better to obfuscate it a bit with qCompress/base64 here like it is done with every other json database in this program
i will implement that


[8/21/2022 8:36 PM] szybet
why?


[8/21/2022 8:36 PM] tux_linux
it stores passwords?


[8/21/2022 8:37 PM] tux_linux
plus, it takes less space


[8/21/2022 8:37 PM] szybet
what will qcompress and base change?


[8/21/2022 8:37 PM] szybet
no


[8/21/2022 8:37 PM] tux_linux
not any userspace program is able to uncompress qcompress data


[8/21/2022 8:37 PM] szybet
can you leave it? i already talked about it


[8/21/2022 8:37 PM] tux_linux
only quncompress can


[8/21/2022 8:37 PM] tux_linux
where, why?


[8/21/2022 8:37 PM] szybet
one day real encryption will be implemented


[8/21/2022 8:37 PM] szybet
not this


[8/21/2022 8:37 PM] szybet
i understand qcompress for something that has many items


[8/21/2022 8:38 PM] szybet
but not for this


[8/21/2022 8:38 PM] tux_linux
do you access the database in another way than from c++ code?


[8/21/2022 8:38 PM] tux_linux
.


[8/21/2022 8:38 PM] szybet
no


[8/21/2022 8:38 PM] tux_linux
then it should be good


[8/21/2022 8:38 PM] tux_linux
what do you have in mind


[8/21/2022 8:39 PM] szybet
and what then? qcompress, base and the encryption combined? it will be slow


[8/21/2022 8:39 PM] tux_linux
it's not slow
just look at local library, homepage widget and everything else


[8/21/2022 8:39 PM] tux_linux
look at the time it takes to get "More info" from a book


[8/21/2022 8:39 PM] tux_linux
basically 0.1 sec


[8/21/2022 8:39 PM] szybet
real encryption with a real algorythm using hash from lockscreen, not this simple


[8/21/2022 8:40 PM] szybet
still, it would be a mess if those 3 would be combined


[8/21/2022 8:40 PM] tux_linux
and if user has disabled lockscreen


[8/21/2022 8:40 PM] tux_linux
wdym?


[8/21/2022 8:40 PM] szybet
no encryption then


[8/21/2022 8:41 PM] szybet
if someone wants and is older than 10 years then it will figure out the base and qcompress


[8/21/2022 8:41 PM] szybet
so adding it now for security makes no sense


[8/21/2022 8:41 PM] szybet
base isint any protection


[8/21/2022 8:41 PM] szybet
size also isint a problem, so no, for now leave it


[8/21/2022 8:48 PM] tux_linux
not that again

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-57638.png


[8/21/2022 8:56 PM] szybet
its stable now in now opinion


[8/21/2022 8:57 PM] szybet
we encounter these problems because we are beginning programmers


[8/21/2022 8:57 PM] szybet
;p


[8/21/2022 8:57 PM] tux_linux
i think it's more qt's fault here


[8/21/2022 8:59 PM] szybet
no


[8/21/2022 8:59 PM] szybet
ours


[8/21/2022 8:59 PM] szybet
but in the deeps cpp


[8/21/2022 9:00 PM] szybet
that empty variables have a random chance to contain empty or error


[8/21/2022 9:00 PM] szybet
rust fixes this ;p


[8/22/2022 12:25 AM] tux_linux
why that?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-15CDF.png


[8/22/2022 1:29 AM] tux_linux
`// What can be run in the chroot, should be run here.`
I do not agree at all


[8/22/2022 1:30 AM] tux_linux
ibxd is there for a purpose: running commands in the stock rootfs chroot cleanly, like openrc service ones.


[8/22/2022 8:51 AM] szybet
Those buttons were too small


[8/22/2022 8:52 AM] szybet
This one script only
Its runned many times, even hundreds of times
Please leave it


[8/22/2022 3:44 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/pull/34/commits/5f9cff5a84ec18a62595eff515b92f5244ad65c5
I did not do the design part yet
setFixedSize in this will be replaced by padding

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/34/commits/5f9cff5a84ec18a62595eff515b92f5244ad65c5
complete wifi redesign by Szybet · Pull Request #34 · Kobo-InkBox/i...
rootfs + ipd update is also needed
/mnt/data/projects/git/conversations/media/53944559-F1898


[8/22/2022 3:45 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/pull/3/commits/229bdc155d49723e7aa812427150a78326d583fd

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/3/commits/229bdc155d49723e7aa812427150a78326d583fd
wifi update - for the future GUI wifi panel by Szybet · Pull Reques...
dont accept it for now
/mnt/data/projects/git/conversations/media/53944559-F1898


[8/22/2022 4:36 PM] szybet
its not readable without those lines

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-745CA.png


[8/22/2022 4:37 PM] szybet
and you broke things

do you really want to turn off wifi when time syncing didnt worked? please remove what you added

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-22CA8.png


[8/22/2022 4:37 PM] szybet
i wonder if your changes in `check_wifi_password.sh` wil work


[8/22/2022 4:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5CED9.png


[8/22/2022 4:40 PM] szybet
killall sometimes doesnt kill, to be sure one more time is needed. please make it back


[8/22/2022 4:41 PM] szybet
double // is the official qt way that i copy from the file...

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F949F.png


[8/22/2022 4:42 PM] szybet
oops

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-90BC4.png


[8/22/2022 4:43 PM] szybet
you have a wider screen than i propably

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D2332.png


[8/22/2022 4:43 PM] szybet
`// Some stylesheet magician could make it work that it cant be clicked`
its you you know :D?


[8/22/2022 4:44 PM] szybet
make it back...

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5BF24.png


[8/22/2022 4:45 PM] szybet
._ .

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CCE18.png


[8/22/2022 4:47 PM] aryetis
grey <=> gray, us vs uk english


[8/22/2022 4:47 PM] szybet
```
    // well dont touch this until there is something, *** Error in `/tmp/exec': double free or corruption (fasttop): 0x025ed170 ***

```
A comment what this variable does... why did you deleted this


[8/22/2022 4:48 PM] szybet
the rest is fine


[8/22/2022 4:48 PM] szybet
please repair the things i mentioned and it will be fine


[8/22/2022 4:48 PM] szybet
greay then.


[8/22/2022 5:41 PM] tux_linux
I know, I forgot to change theWatcher in one place
I changed it and it's working on my side


[8/22/2022 5:51 PM] szybet
working? you mean compiling?


[8/22/2022 5:51 PM] szybet
well push the commit then


[8/22/2022 6:11 PM] szybet
I will be tommorow the whole day off, so if something is to do with WiFi say it now🥴


[8/22/2022 6:29 PM] tux_linux
It seemed fine


[8/22/2022 6:29 PM] tux_linux
I will do the design part later today


[8/22/2022 6:29 PM] tux_linux
It's good work


[8/22/2022 6:47 PM] szybet
How do I launch xorg from CLI?


[8/22/2022 6:47 PM] szybet
How do I get logs?


[8/22/2022 6:53 PM] tux_linux
`start xorg`


[8/22/2022 6:53 PM] tux_linux
But study koboxapps.cpp


[8/22/2022 6:54 PM] tux_linux
You need some files in /tmp


[8/22/2022 6:54 PM] tux_linux
/tmp/X_program
/tmp/X_dpmode
/tmp/X_dpi


[8/22/2022 6:55 PM] tux_linux
1. tail -f /dev/null
2. windowed
3. 175
For example


[8/22/2022 7:42 PM] szybet
Him ok


[8/22/2022 9:36 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/wifi-E4CDA.png


[8/22/2022 9:38 PM] szybet
looks great

{Reactions}
👍 

[8/22/2022 9:38 PM] szybet
so much better than mine approach


[8/22/2022 9:38 PM] szybet
does ot work actually?


[8/22/2022 9:39 PM] szybet
any issues?


[8/22/2022 9:39 PM] szybet
also do you have the roadmap for 2.0?


[8/22/2022 9:39 PM] tux_linux
important logs
all logs
not showing anything


[8/22/2022 9:39 PM] tux_linux
network information works though


[8/22/2022 9:40 PM] szybet
quess who changed the path to logs?


[8/22/2022 9:40 PM] szybet
😋


[8/22/2022 9:40 PM] tux_linux
*guess


[8/22/2022 9:40 PM] szybet
qgqgqgqg


[8/22/2022 9:40 PM] tux_linux
oh I changed everything in the rootfs but forgot the gui


[8/22/2022 9:40 PM] tux_linux
thanks


[8/22/2022 9:41 PM] szybet
yea


[8/22/2022 9:41 PM] szybet
also update ipd


[8/22/2022 9:41 PM] szybet
?


[8/22/2022 9:41 PM] tux_linux
yes it works


[8/22/2022 9:41 PM] szybet
?


[8/22/2022 9:41 PM] tux_linux
you should add a status message when it's listing networks


[8/22/2022 9:42 PM] tux_linux
in my brain


[8/22/2022 9:42 PM] szybet
did uou changed the list_nrtworks.bin binary name?


[8/22/2022 9:42 PM] szybet
please share your brain


[8/22/2022 9:42 PM] szybet
maybe make a repo with it


[8/22/2022 9:42 PM] szybet
or a channel dedicated


[8/22/2022 9:43 PM] szybet
hereon discord


[8/22/2022 9:45 PM] tux_linux
yes


[8/22/2022 9:45 PM] tux_linux
`list_networks`


[8/22/2022 9:45 PM] tux_linux
oh it's looking for that too?


[8/22/2022 9:45 PM] tux_linux
ok changed it


[8/22/2022 9:46 PM] szybet
1. god why everything is .sh and that shoild be .bin
2. watcher is looking for .bin😁


[8/22/2022 9:47 PM] tux_linux
have you seen busybox.bin?


[8/22/2022 9:47 PM] tux_linux
there's your answer


[8/22/2022 9:48 PM] tux_linux
works

{Attachments}
/mnt/data/projects/git/conversations/media/wifi-60FB6.png


[8/22/2022 9:48 PM] szybet
😒


[8/22/2022 9:48 PM] szybet
fancy logs?


[8/22/2022 9:48 PM] szybet
return button on the bottom


[8/22/2022 9:48 PM] szybet
briliant


[8/22/2022 9:48 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/wifi-718AE.png


[8/22/2022 9:48 PM] tux_linux
refresh thing?


[8/22/2022 9:49 PM] szybet
but make the return button a bit smaller next yo the refresh button to avoid clickong whats mot needed


[8/22/2022 9:49 PM] szybet
yes

{Reactions}
👍 

[8/22/2022 9:49 PM] szybet
does preparong wpa connection work every time for a network that you know has the vorrect passwors?


[8/22/2022 9:49 PM] szybet
really, amy problems?


[8/22/2022 9:50 PM] szybet
i cant believe there areent


[8/22/2022 9:51 PM] tux_linux
you're not updating the grayed button if network connection fails


[8/22/2022 9:51 PM] szybet
umm whats the reason when it fails


[8/22/2022 9:51 PM] tux_linux
i don't know, random thing


[8/22/2022 9:52 PM] szybet
well debug it then


[8/22/2022 9:52 PM] szybet
show me fancy logs of it when it happens


[8/22/2022 9:52 PM] tux_linux
now i tried again and it worked


[8/22/2022 9:52 PM] szybet
which one


[8/22/2022 9:52 PM] szybet
i want fancy logs


[8/22/2022 9:52 PM] szybet
also, does it fail imidietielly or after some time?


[8/22/2022 9:52 PM] tux_linux
immediately


[8/22/2022 9:53 PM] szybet
fancy logs then?...


[8/22/2022 9:54 PM] tux_linux
does it update networks automatically?


[8/22/2022 9:54 PM] tux_linux
i just had this mess happen

{Attachments}
/mnt/data/projects/git/conversations/media/wifi-968B8.png


[8/22/2022 9:54 PM] szybet
sometimes yes


[8/22/2022 9:55 PM] tux_linux
happens again after relaunching binary

{Attachments}
/mnt/data/projects/git/conversations/media/wifi-544AD.png


[8/22/2022 9:55 PM] tux_linux
is it supposed to update the connected networks list upon successful connection?


[8/22/2022 9:55 PM] szybet
i cant do anything about many networks with the same name

but for this its becausd its checking .contains and not == in ndtwork.cpp, you can change it


[8/22/2022 9:55 PM] szybet
yes


[8/22/2022 9:56 PM] tux_linux
and upon failed connection?


[8/22/2022 9:57 PM] tux_linux
in wifidialog.cpp you mean?


[8/22/2022 9:57 PM] szybet
it depends


[8/22/2022 9:57 PM] tux_linux
it should


[8/22/2022 9:57 PM] szybet
no, network.cpp


[8/22/2022 9:57 PM] szybet
actually never


[8/22/2022 9:57 PM] tux_linux
```
nicolas@fedora ~/D/i/i/s/w/d/wifi (master)> rg contains network.cpp 
nicolas@fedora ~/D/i/i/s/w/d/wifi (master) [1]>
```


[8/22/2022 9:58 PM] szybet
fsiled connection turns off the interface


[8/22/2022 9:58 PM] tux_linux
then it should show it


[8/22/2022 9:58 PM] szybet
what no


[8/22/2022 9:58 PM] tux_linux
i just have the same network list and nothing's moving


[8/22/2022 9:58 PM] szybet
it is
its also removing the network list


[8/22/2022 10:01 PM] tux_linux
and if it hangs on checking wifi network password


[8/22/2022 10:01 PM] tux_linux
because i intentionally put a wrong one


[8/22/2022 10:01 PM] szybet
what does it mesn it hangs


[8/22/2022 10:02 PM] tux_linux
oh it didn't


[8/22/2022 10:02 PM] tux_linux
it just took a very long time


[8/22/2022 10:03 PM] szybet
what does it mean it hangs


[8/22/2022 10:03 PM] tux_linux
nothing


[8/22/2022 10:03 PM] tux_linux
it didn't hang


[8/22/2022 10:03 PM] szybet
im confused


[8/22/2022 10:03 PM] tux_linux
?


[8/22/2022 10:04 PM] szybet
idk what are you doing


[8/22/2022 10:04 PM] tux_linux
i'm trying to grep 'contains' in this file


[8/22/2022 10:04 PM] tux_linux
there is nothing


[8/22/2022 10:05 PM] szybet
network.cpp
contains() function
idk


[8/22/2022 10:05 PM] tux_linux
there isn't


[8/22/2022 10:05 PM] tux_linux
there's only that
```
    if(currentlyConnectedNetwork == mainData.name) {
```


[8/22/2022 10:05 PM] szybet
maybe there is in wifidialoog.cpp while refreshing


[8/22/2022 10:10 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/pull/34/commits/c49da9dc90548b0ea43dce89f9c54c2a4c9572e5
there so you can look for yourself

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/34/commits/c49da9dc90548b0ea43dce89f9c54c2a4c9572e5
complete wifi redesign by Szybet · Pull Request #34 · Kobo-InkBox/i...
rootfs + ipd update is also needed
/mnt/data/projects/git/conversations/media/53944559-F1898


[8/22/2022 10:12 PM] szybet
sooo what are the problems?


[8/22/2022 10:12 PM] szybet
does everythign worl?


[8/22/2022 10:12 PM] tux_linux
.


[8/22/2022 10:13 PM] szybet
well this


[8/22/2022 10:13 PM] szybet
amd?


[8/22/2022 10:13 PM] tux_linux
i need to test it with ipd


[8/22/2022 10:13 PM] tux_linux
i'm currently on Touch N905B


[8/22/2022 10:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_2022-08-22-22-16-36-460_org.moz-D1843.jpg


[8/22/2022 10:17 PM] szybet
here it is


[8/22/2022 10:17 PM] szybet
the problem


[8/22/2022 10:17 PM] tux_linux
ok


[8/22/2022 10:17 PM] tux_linux
so just replace that with == ?


[8/22/2022 10:18 PM] szybet
yes


[8/22/2022 10:18 PM] szybet
and test it


[8/22/2022 10:18 PM] szybet
i hope it will work


[8/22/2022 10:19 PM] tux_linux
ok


[8/22/2022 10:20 PM] tux_linux
```(global::wifi::wifiNetworkData wifiNetwork: pureNetworkList) {
            if(currentWifiNetwork.isEmpty() == false and wifiNetwork.name == currentWifiNetwork) {
```
that?


[8/22/2022 10:33 PM] szybet
? what?


[8/22/2022 10:33 PM] tux_linux
do I replace it with that


[8/22/2022 10:33 PM] szybet
propably yes

{Reactions}
👍 

[8/23/2022 1:12 AM] tux_linux
```
if(checkconfig("/mnt/onboard/.adds/inkbox/.config/17-wifi_connection_information/stopped") == false) {
```
Is there a reason why this isn't in a tmpfs?


[8/23/2022 1:17 AM] tux_linux
Crash upon successfully connecting to a network then trying to refresh the networks list
(and surprise, next try it works)

{Attachments}
/mnt/data/projects/git/conversations/media/message-CFD8A.txt


[8/23/2022 5:18 AM] tux_linux
looks good on Aura SE, now I need to fix the 100% network line

{Attachments}
/mnt/data/projects/git/conversations/media/wifi-9457E.png


[8/23/2022 8:57 AM] szybet
What kind of crash


[8/23/2022 8:57 AM] szybet
What network ine


[8/23/2022 8:58 AM] szybet
Not really, I don't remember


[8/23/2022 11:06 AM] szybet
Now I understand
Its was fixed in theory by me in network.cpp


[8/23/2022 11:09 AM] szybet
Interesting
You need to debug more when there is only one network available

{Reactions}
👍 

[8/23/2022 11:09 AM] szybet
But I don't see a reason why it crashed only with one


[8/23/2022 11:11 AM] szybet
Well maybe it something with sorting

Oh
It tryied to for in a vector that has 0 items


[8/23/2022 11:22 AM] tux_linux
Is there a fix?


[8/23/2022 11:23 AM] tux_linux
I saw something like it when reviewing that too
But it isn't seeming to do much


[8/23/2022 11:23 AM] tux_linux
Maybe it needs a monospaced font

{Reactions}
😁 

[8/23/2022 11:30 AM] szybet
Well I can't even look at the code in the next 7 h

{Reactions}
👍 

[8/23/2022 11:30 AM] szybet
I will look onto it, weird


[8/23/2022 5:10 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/password-E5BEF.png


[8/23/2022 5:10 PM] tux_linux
The 'Scanning networks' thing works, but it should also display it when the dialog is launched, not just when you click the refresh button


[8/23/2022 5:11 PM] szybet
it does when the wifi is on


[8/23/2022 5:11 PM] szybet
?


[8/23/2022 5:15 PM] tux_linux
No, look

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220823_1513110332-ED53C.mp4


[8/23/2022 5:38 PM] szybet
i cant sent the video because 8mb limit


[8/23/2022 5:38 PM] szybet
but it works for me


[8/23/2022 5:38 PM] szybet
you broke the watcher propably even more


[8/23/2022 5:38 PM] tux_linux
on recent git?


[8/23/2022 5:38 PM] szybet
no, on my old


[8/23/2022 5:39 PM] Deleted User
how big is the file


[8/23/2022 5:40 PM] Deleted User
just curl -F"file=@video.mp4" 0x0.st and share the link


[8/23/2022 5:40 PM] Deleted User
you can get up to 512mb video that way


[8/23/2022 5:44 PM] tux_linux
can you try out the new one when you have time?
you will also need to update the rootfs


[8/23/2022 5:44 PM] szybet
im on phonw


[8/23/2022 5:45 PM] szybet
first i will look at xorg

{Reactions}
👍 

[8/23/2022 5:45 PM] tux_linux
termux


[8/23/2022 5:45 PM] Deleted User
termux


[8/23/2022 5:46 PM] szybet
im lazy


[8/23/2022 5:46 PM] szybet
matrix doesnt have thos elimited


[8/23/2022 5:46 PM] Deleted User
what


[8/23/2022 5:46 PM] tux_linux
I think I will rewrite the initrd rcS from scratch today
I'm feeling like it


[8/23/2022 5:59 PM] szybet
rcS?


[8/23/2022 5:59 PM] szybet
doesnt have size limites


[8/23/2022 6:01 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/rcS-root

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/rcS-root
kernel/rcS-root at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[8/23/2022 6:14 PM] szybet
init


[8/23/2022 6:14 PM] szybet
well sure


[8/23/2022 6:14 PM] tux_linux
i'm trying to rewrite it in C


[8/23/2022 6:14 PM] tux_linux
wish me luck


[8/23/2022 6:14 PM] szybet
but, why?


[8/23/2022 6:14 PM] tux_linux
the current script is crap?


[8/23/2022 6:15 PM] szybet
how do i change the password having the sd card?


[8/23/2022 6:15 PM] szybet
to root


[8/23/2022 6:15 PM] szybet
i cant log in


[8/23/2022 6:15 PM] szybet
i changed it but something went wrong


[8/23/2022 6:15 PM] tux_linux
huh ?..


[8/23/2022 6:15 PM] szybet
well try to not make it crap then


[8/23/2022 6:15 PM] tux_linux
that is my goal


[8/23/2022 6:15 PM] szybet
why not cpp


[8/23/2022 6:15 PM] tux_linux
it's too big


[8/23/2022 6:16 PM] szybet
bruh


[8/23/2022 6:16 PM] szybet
yea? how do i do it


[8/23/2022 6:17 PM] tux_linux
seriously, a hello world static binary stripped in cpp is 744K


[8/23/2022 6:17 PM] tux_linux
i didn't understand


[8/23/2022 6:17 PM] szybet
it can be smaller for sure


[8/23/2022 6:18 PM] tux_linux
if a hello world is 744k


[8/23/2022 6:18 PM] tux_linux
then i won't try to imagine what an entire init binary would be


[8/23/2022 6:20 PM] Deleted User
a simple hello world with just c is just 24K for me


[8/23/2022 6:20 PM] Deleted User
you could tinker with or change your compiler


[8/23/2022 6:21 PM] tux_linux
yes, without static


[8/23/2022 6:22 PM] Deleted User
oh why did you make it static


[8/23/2022 6:22 PM] tux_linux
it's an initrd


[8/23/2022 6:22 PM] tux_linux
we don't have any libc really here on most devices


[8/23/2022 6:24 PM] szybet
maybe use rust?


[8/23/2022 6:25 PM] Deleted User
no


[8/23/2022 6:26 PM] Deleted User
its fine as it is


[8/23/2022 6:27 PM] szybet
c is pain


[8/23/2022 6:27 PM] szybet
i wont help with it


[8/23/2022 6:30 PM] tux_linux
you are right


[8/23/2022 6:31 PM] szybet
start command?


[8/23/2022 6:31 PM] tux_linux
yes


[8/23/2022 6:31 PM] tux_linux
it's a shortcut I wrote


[8/23/2022 6:31 PM] tux_linux
`cat /usr/bin/start`


[8/23/2022 6:32 PM] szybet
oh ok


[8/23/2022 6:39 PM] szybet
where is


[8/23/2022 6:40 PM] szybet
where niluje said what config was for this thing


[8/23/2022 6:40 PM] szybet
this xoeg thing thing


[8/23/2022 6:40 PM] szybet
ugh


[8/23/2022 6:42 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220823_184219-367CC.jpg


[8/23/2022 6:42 PM] szybet
no no it will not work...


[8/23/2022 7:11 PM] szybet
@tux-linux i need your help


[8/23/2022 7:11 PM] szybet
```
    (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: "/var/log/Xorg.0.log", Time: Tue Aug 23 17:08:41 2022
(==) Using config file: "/etc/X11/xorg.conf"
(==) Using system config directory "/usr/share/X11/xorg.conf.d"
Data incomplete in file /etc/X11/xorg.conf
    Undefined Screen ":0" referenced by ServerLayout "my name".
(EE) 
Fatal server error:
(EE) no screens found(EE) 
(EE) 
Please consult the The X.Org Foundation support 
     at http://wiki.x.org
 for help. 

```


[8/23/2022 7:11 PM] szybet
what screen... id are you using?


[8/23/2022 7:11 PM] tux_linux
`:0`


[8/23/2022 7:11 PM] szybet
```
  GNU nano 5.5                                                                  etc/X11/xorg.conf                                                                             
Section "ServerLayout"
Identifier "my name"
Screen ":0"
InputDevice "CorePointer"
Option "BlankTime" "time"
EndSection

```


[8/23/2022 7:11 PM] szybet
doesnt work


[8/23/2022 7:11 PM] szybet
0 too


[8/23/2022 7:11 PM] tux_linux
I never used xorg.conf on kobo


[8/23/2022 7:12 PM] szybet
i need somehow add a server layout config


[8/23/2022 7:30 PM] szybet
i figured this out... i deleted the sections that i didn't knowed how to fill...


[8/23/2022 7:30 PM] szybet
did you found your... ereader that has the same xorg problems?


[8/23/2022 7:31 PM] tux_linux
no sadly


[8/23/2022 7:31 PM] szybet
:(


[8/23/2022 7:31 PM] tux_linux
searched it yesterday for a fair time


[8/23/2022 7:31 PM] szybet
not good


[8/23/2022 7:31 PM] tux_linux
ik


[8/23/2022 8:19 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/blob/main/init.c
it is progressing...

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/main/init.c
inkbox-os-init/init.c at main · Kobo-InkBox/inkbox-os-init
InkBox OS' PID 1 process. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-A5CB8


[8/23/2022 8:48 PM] szybet
Possible fix for xorg
```
Section "ServerLayout"
Identifier "my name"
Option "BlankTime" "0"
EndSection
```
put it in /xorg/etc/X11/xorg.conf


[8/23/2022 8:48 PM] tux_linux
It works?


[8/23/2022 8:48 PM] szybet
i tryied to do trigger the problem for 2 hours, nothing


[8/23/2022 8:48 PM] szybet
maybe


[8/23/2022 8:48 PM] tux_linux
Did you reboot and tested with qt GUI?


[8/23/2022 8:48 PM] szybet
@NiLuJe can you explain your solution?, why?


[8/23/2022 8:49 PM] szybet
why reboot?


[8/23/2022 8:49 PM] tux_linux
To settle things up


[8/23/2022 8:49 PM] tux_linux
Maybe


[8/23/2022 8:49 PM] szybet
service xorg restart


[8/23/2022 8:49 PM] tux_linux
Yes but I'm worried about the initial xorg start


[8/23/2022 8:50 PM] szybet
ok im rebooting


[8/23/2022 8:50 PM] tux_linux
You should also reboot, let qt GUI do nothing during 10m (don't touch the screen, disable idle sleep), then see if it froze for no reason


[8/23/2022 8:50 PM] tux_linux
It happens on Kindle


[8/23/2022 8:51 PM] tux_linux
Actually I have one device that has this problem that I didn't lose
The Kindle


[8/23/2022 8:53 PM] szybet
now i demand 2 things
1. Create discord roles that dont change permissions but are named "Kobo nia" for example. if you did it before, now i could ping persons with the device, maybe they would like to help
2. a todo list, here on discord, on or github, or somewhere else. with bugs, todos, to test etc. I want this because many things get lost in conversations in #bugs and here on #dev


[8/23/2022 8:53 PM] szybet
🥴


[8/23/2022 8:53 PM] tux_linux
2 is main priority


[8/23/2022 8:54 PM] szybet
nooo the nia had problem that would accour randomly


[8/23/2022 8:56 PM] szybet
also the todo list only we can edit, and that ~~something like this can be used for deleted items ok~~?


[8/23/2022 8:59 PM] tux_linux
try nevertheless


[8/23/2022 8:59 PM] szybet
i will im


[8/23/2022 9:05 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/discussions/36
tell me items to add and i will add them
i will also add other items when they randomly come into my head

{Embed}
https://github.com/Kobo-InkBox/inkbox/discussions/36
To-Do list for 2.0 release · Discussion #36 · Kobo-InkBox/inkbox
X11 freeze fix Recompile platform plugin with fixes for user apps in rootfs
/mnt/data/projects/git/conversations/media/36-F25D6


[8/23/2022 9:05 PM] szybet
very good


[8/23/2022 9:05 PM] szybet
thanks

{Reactions}
👍 

[8/23/2022 9:06 PM] ninuje
Because blanking is what locks the fb, so, don't blank == gg?


[8/23/2022 9:07 PM] tux_linux
but the man page seemed to talk about a screensaver


[8/23/2022 9:07 PM] tux_linux
it's related?


[8/23/2022 9:07 PM] szybet
please edit it instead of commenting

add update option to disable
library widget with folders
reader better fit to text


[8/23/2022 9:08 PM] szybet
exactly, thats why im asking


[8/23/2022 9:08 PM] ninuje
Yes, blanking is how Xorg does DPMS-like things


[8/23/2022 9:08 PM] ninuje
On fb


[8/23/2022 9:08 PM] szybet
what


[8/23/2022 9:08 PM] szybet
lol


[8/23/2022 9:09 PM] ninuje
https://github.com/Kobo-InkBox/inkbox-os-init/blob/442f3a4388edc9f96360be7dcf271aacafbc7928/init.c#L40-L43

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/442f3a4388edc9f96360be7dcf271aacafbc7928/init.c
inkbox-os-init/init.c at 442f3a4388edc9f96360be7dcf271aacafbc7928 ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-A86D0


[8/23/2022 9:09 PM] ninuje
There's an `INIT` waveform mode for that


[8/23/2022 9:09 PM] tux_linux
ooooh


[8/23/2022 9:09 PM] ninuje
It'll flash to white


[8/23/2022 9:10 PM] tux_linux
I add it in the module cmdline?


[8/23/2022 9:10 PM] ninuje
Huh? `fbink -W INIT`


[8/23/2022 9:10 PM] tux_linux
oh ok


[8/23/2022 9:11 PM] tux_linux
I thought there was a module option to enable it


[8/23/2022 9:11 PM] szybet
what does it do


[8/23/2022 9:11 PM] tux_linux
So it's just one call?


[8/23/2022 9:11 PM] ninuje
I'm halfway sure the module does it on load anyway, but I haven't checked


[8/23/2022 9:11 PM] tux_linux
```
~ # fbink -W INIT
[FBInk] Detected a Kindle Touch (0x11 => Whitney on Yoshi)
[FBInk] Enabled Kindle with Pearl screen quirks
[FBInk] Clock tick frequency appears to be 100 Hz
[FBInk] Screen density set to 167 dpi
[FBInk] Variable fb info: 600x800, 8bpp @ rotation: 1 (Clockwise, 90°)
[FBInk] Fixed fb info: ID is "mxc_epdc_fb", length of fb mem: 2179072 bytes & line length: 608 bytes
[FBInk] Fontsize set to 16x16 (IBM base glyph size: 8x8)
[FBInk] Line length: 37 cols, Page size: 50 rows
[FBInk] Pen colors set to #000000 for the foreground and #FFFFFF for the background

FBInk v1.24.0-170-gde36643 for Kindle [Modular build: Fonts=No Unifont=No Image=No OpenType=No]

Usage: fbink [OPTIONS] [STRING ...]

Print STRING on your device's screen.
```
normal? nothing on screen


[8/23/2022 9:12 PM] tux_linux
it doesn't, that's why I needed to add this in the code


[8/23/2022 9:13 PM] ninuje
Missed a -k or a -s

{Reactions}
👍 

[8/23/2022 9:13 PM] ninuje
Or anything, really


[8/23/2022 9:13 PM] ninuje
waveform is a flag, not an action


[8/23/2022 9:13 PM] tux_linux
I'm not sure I understand the first one


[8/23/2022 9:13 PM] szybet
better managing asking for update / option to disable it


[8/23/2022 9:13 PM] tux_linux
it's always asking you before updating


[8/23/2022 9:14 PM] szybet
what is going on


[8/23/2022 9:14 PM] szybet
🥴


[8/23/2022 9:14 PM] tux_linux
it's for Kindle


[8/23/2022 9:14 PM] szybet
oh ok


[8/23/2022 9:17 PM] szybet
i checked the 10 minutes without touching in gui


[8/23/2022 9:17 PM] szybet
still works


[8/23/2022 9:17 PM] szybet
but i havent tryied without


[8/23/2022 9:17 PM] szybet
soo


[8/23/2022 9:17 PM] szybet
¯\_(ツ)_/¯


[8/23/2022 9:17 PM] tux_linux
hm


[8/23/2022 9:18 PM] tux_linux
should we distribute 2.0 as an entire system image or not?


[8/23/2022 9:18 PM] szybet
so what about redesigning the settings? to not be such a small buttons - mess?


[8/23/2022 9:19 PM] szybet
your decission


[8/23/2022 9:19 PM] szybet
today i discovered that my recovery partition is empty


[8/23/2022 9:19 PM] szybet
so im still runing on the self compiled system


[8/23/2022 9:19 PM] szybet
somehow


[8/23/2022 9:19 PM] tux_linux
lmao


[8/23/2022 9:20 PM] szybet
2.0 will be the first usable release


[8/23/2022 9:20 PM] szybet
so maybe, purge 1.9 out of existence?


[8/23/2022 9:20 PM] tux_linux
you're not very kind...


[8/23/2022 9:21 PM] tux_linux
1.9 is usable for reading


[8/23/2022 9:21 PM] tux_linux
for x11 (except on problematic devices)


[8/23/2022 9:21 PM] szybet
its my opinion and you knowed it before
but hey, im not only complaining, im changing it ;p


[8/23/2022 9:21 PM] tux_linux
hm hm


[8/23/2022 9:22 PM] szybet
oh add to to do list, very important: Redesign built in apps ( make calculator usable, remove light maps out of existence etc )


[8/23/2022 9:22 PM] tux_linux
light maps doesn't need to be removed


[8/23/2022 9:22 PM] tux_linux
it works on some devices


[8/23/2022 9:24 PM] szybet
the only thing
you hear from people about it

"How do i exit this"
"reboot it"
"thats well stupid"

i tryied to do something with light maps, the whole example is purged, doesnt work with qt, crashes after a click

you can't add maps

please... remove it

adding a xorg alternative would be better


[8/23/2022 9:24 PM] tux_linux
i will keep it


[8/23/2022 9:24 PM] tux_linux
and add an exit button


[8/23/2022 9:24 PM] tux_linux
so if the user doesn't like it


[8/23/2022 9:24 PM] tux_linux
they won't have that problem twice


[8/23/2022 9:25 PM] szybet
ehhh


[8/23/2022 9:25 PM] szybet
this all wouldn't be a issue if we added a option to dont show the apps in the first place


[8/23/2022 9:25 PM] szybet
can i add it finally?


[8/23/2022 9:25 PM] tux_linux
no


[8/23/2022 9:26 PM] tux_linux
there's a reason why they're called built-in apps


[8/23/2022 9:27 PM] szybet
it doesnt work😞


[8/23/2022 9:27 PM] tux_linux
I did not have much hope...


[8/23/2022 9:28 PM] szybet
maybe there is a working fork?


[8/23/2022 9:29 PM] szybet
i didnt check actually


[8/23/2022 9:34 PM] tux_linux
does ipd need to be stopped before or after inkbox gui?


[8/23/2022 9:38 PM] szybet
i think yes
the mind mount will be broken

actually you could only mount bind it after restarting inkbox gui


[8/23/2022 9:38 PM] szybet
and thats it


[8/23/2022 9:44 PM] szybet
https://github.com/tranter/qt-google-maps

{Embed}
https://github.com/tranter/qt-google-maps
GitHub - tranter/qt-google-maps: Automatically exported from code.g...
Automatically exported from code.google.com/p/qt-google-maps - GitHub - tranter/qt-google-maps: Automatically exported from code.google.com/p/qt-google-maps
/mnt/data/projects/git/conversations/media/qt-google-maps-B112E


[8/23/2022 9:44 PM] tux_linux
great but does it respect google's ToS?


[8/23/2022 9:46 PM] szybet
what is this


[8/23/2022 9:47 PM] tux_linux
terms of service


[8/23/2022 9:47 PM] tux_linux
and you also need an api key


[8/23/2022 9:48 PM] szybet
ugh


[8/23/2022 9:51 PM] szybet
https://github.com/dcaliste/maep-qt

{Embed}
https://github.com/dcaliste/maep-qt
GitHub - dcaliste/maep-qt: A map viewer for Jolla Sailfish OS
A map viewer for Jolla Sailfish OS. Contribute to dcaliste/maep-qt development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/maep-qt-CB7FA


[8/23/2022 9:51 PM] szybet
too much work to port...


[8/23/2022 9:58 PM] szybet
https://github.com/rinigus/pure-maps

{Embed}
https://github.com/rinigus/pure-maps
GitHub - rinigus/pure-maps: Maps and navigation
Maps and navigation. Contribute to rinigus/pure-maps development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/pure-maps-4AE53


[8/23/2022 9:58 PM] szybet
can qml work on kobo?


[8/23/2022 9:58 PM] tux_linux
sort of


[8/23/2022 9:58 PM] tux_linux
we need to add qml files in the gui-bundle though


[8/23/2022 10:08 PM] szybet
https://invent.kde.org/education/marble

{Embed}
https://invent.kde.org/education/marble
Education / Marble · GitLab
Virtual Globe and World Atlas that you can use to learn more about the Earth
/mnt/data/projects/git/conversations/media/avatar-787F2

{Reactions}
👀 

[8/23/2022 10:09 PM] tux_linux
KDE apps are usually a nightmare to compile


[8/23/2022 10:10 PM] patchworkgarden
kde itself is kinda a nightmare tbh


[8/23/2022 10:13 PM] tux_linux
but that one's really cool
try to compile it if you want


[8/23/2022 10:17 PM] tux_linux
what does yes mean?


[8/23/2022 10:19 PM] szybet
itf im able to run any other map software, will you remove lightmaps?


[8/23/2022 10:19 PM] tux_linux
yes if it's good enough


[8/23/2022 10:20 PM] szybet
the mount bind is broken if /kobo dissapears and it needs to be remade


[8/23/2022 10:20 PM] tux_linux
ok but it doesn't matter on power off


[8/23/2022 10:20 PM] szybet
anything will be better than what is now


[8/23/2022 10:20 PM] szybet
yea


[8/23/2022 10:20 PM] szybet
do you implemented txt files in rust?


[8/23/2022 10:21 PM] tux_linux
no, adding it to todo list


[8/23/2022 10:21 PM] szybet
yea


[8/24/2022 11:59 AM] szybet
@tux-linux  add to todo: Increase checkbox sizes in stylesheets

{Reactions}
👍 

[8/24/2022 12:06 PM] szybet
i dont understand the problem with listing networks


[8/24/2022 12:06 PM] szybet
that the status doesnt show it?


[8/24/2022 12:06 PM] szybet
on the nia it shows


[8/24/2022 12:06 PM] szybet
maybe your device is too fast


[8/24/2022 12:06 PM] szybet
anyway, try `QTimer::singleShot(0, this, SLOT(watcher()));` instead of 2000 in wifidialog.cpp


[8/24/2022 12:25 PM] szybet
setting monospace in ui file didnt fixes the 100% line problem

{Reactions}
👍 

[8/24/2022 12:25 PM] szybet
so idk about it


[8/24/2022 2:38 PM] tux_linux
It doesn't show on the dialog launch
Then when you click the button it's fine


[8/24/2022 2:38 PM] szybet
your device is too fast ;p


[8/24/2022 2:38 PM] tux_linux
see video


[8/24/2022 2:38 PM] szybet
try my fix anyway


[8/24/2022 2:38 PM] tux_linux
Ok


[8/24/2022 5:49 PM] tux_linux
that would be surprising
it's older than the Nia


[8/24/2022 5:50 PM] szybet
¯\_(ツ)_/¯


[8/24/2022 5:50 PM] szybet
how to i make that cmake doesnt look at system libraries


[8/24/2022 5:50 PM] szybet
im trying to compile those kde maps


[8/24/2022 5:51 PM] tux_linux
change LD_LIBRARY_PATH maybe


[8/24/2022 5:51 PM] szybet
its already empty


[8/24/2022 5:51 PM] szybet
so i dont think it will work


[8/24/2022 5:52 PM] tux_linux
it's never empty


[8/24/2022 5:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-0FEB8.png


[8/24/2022 5:53 PM] tux_linux
no, try it anyway


[8/24/2022 5:53 PM] tux_linux
`LD_LIBRARY_PATH=`


[8/24/2022 6:09 PM] tux_linux
waitpid isn't working at all, i see output from my first fsck command after the 3 other ones have been executed


[8/24/2022 6:10 PM] szybet
i have
no idea


[8/24/2022 6:10 PM] tux_linux
will put some debug logs for printing out pid


[8/24/2022 6:10 PM] szybet
as i said, check for zombies on existing inkbox


[8/24/2022 6:11 PM] tux_linux
but why do we always provide 0 as a pid to posix_spawn?


[8/24/2022 6:14 PM] szybet
it gets overwritten anyway
we provide a real variable because it maybe freak out, idk cpp is cpp
i already talked about this in a comment? maybe you deleted it ;p


[8/24/2022 6:17 PM] tux_linux
oh, my fault


[8/24/2022 6:17 PM] tux_linux
return true made the function exit before it reached waitpid


[8/24/2022 6:17 PM] szybet
what


[8/24/2022 6:35 PM] szybet
```
/mnt/HDD/Project/compiling-hell/marble/src/lib/marble/declarative/Routing.cpp:85:5: error: 'QOpenGLPaintDevice' was not declared in this scope
     QOpenGLPaintDevice paintDevice(QSize(width(), height()));
     ^~~~~~~~~~~~~~~~~~

```


[8/24/2022 6:35 PM] szybet
fuck


[8/24/2022 6:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A9ECD.png


[8/24/2022 6:35 PM] szybet
so close


[8/24/2022 6:37 PM] tux_linux
maybe there is a way to compile it


[8/24/2022 6:37 PM] szybet
which is?


[8/24/2022 6:38 PM] tux_linux
recompile qt


[8/24/2022 6:38 PM] tux_linux
with that option


[8/24/2022 6:38 PM] szybet
it will not run propably


[8/24/2022 6:38 PM] tux_linux
also it doesn't need qtwebengine?


[8/24/2022 6:38 PM] szybet
only optional soo...


[8/24/2022 6:38 PM] tux_linux
having run this on my computer, i agree


[8/24/2022 6:40 PM] szybet
if opengl is needed only in routing


[8/24/2022 6:40 PM] szybet
i can maybe purge the source code


[8/24/2022 6:41 PM] szybet
🥴


[8/24/2022 6:42 PM] tux_linux
yep


[8/24/2022 6:50 PM] szybet
```
% grep -rnw '.' -e 'QOpenGLPaintDevice'                   
./src/lib/marble/declarative/Routing.cpp:29:#include <QOpenGLPaintDevice>
./src/lib/marble/declarative/Routing.cpp:33:#include <QOpenGLPaintDevice>
./src/lib/marble/declarative/Routing.cpp:85:    QOpenGLPaintDevice paintDevice(QSize(width(), height()));
```


[8/24/2022 6:50 PM] szybet
i will remove those lines :)


[8/24/2022 6:50 PM] tux_linux
good


[8/24/2022 6:50 PM] szybet
everything will be fine :)


[8/24/2022 6:50 PM] tux_linux
let's see if it will even run


[8/24/2022 6:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-17744.txt


[8/24/2022 6:54 PM] szybet
um?


[8/24/2022 6:54 PM] tux_linux
that's called a curse™️


[8/24/2022 6:55 PM] tux_linux
probably that glibc is not enough recent


[8/24/2022 6:55 PM] szybet
but for what?


[8/24/2022 6:55 PM] tux_linux
for the program


[8/24/2022 6:55 PM] tux_linux
it needs a newer glibc


[8/24/2022 6:55 PM] szybet
but i compiled it with the qt


[8/24/2022 6:55 PM] tux_linux
idk


[8/24/2022 7:00 PM] tux_linux
yay, progress
```
Linux inkbox #1 SMP Wed Aug 24 12:53:57 EDT 2022 GNU/Linux
InkBox OS, kernel build IVmliq2h, commit 0627009

 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p1: clean, 13/4872 files, 1962/19456 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p2: clean, 13/128016 files, 30485/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p3: clean, 15/32768 files, 89202/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
/dev/mmcblk0p4: clean, 53/219024 files, 585236/874752 blocks

Generating device UID ...
random: tr: uninitialized urandom read (8192 bytes read)
random: tr: uninitialized urandom read (8192 bytes read)
random: tr: uninitialized urandom read (8192 bytes read)
Done. UID:
zn4Xpy1FhXXJxqPr3QgCn4mDYE8ZCp0wxiOPPBDU8iwyTgOF20ULImIcZ7qi2KJ00sG5SzzTRYjvONcMQ0Z49E630BaleCDquIk38WBWB9NPEZHF3E4YbN6ucLcUNOUsrKoQmiUie1JJYPl2mnKMmcfWRmoXd2x36CVPPE6whmGKt1Z0pjz66uiXnDMehlWTR7DmYjjCfMJ220XfTTLehV7sZQE2ngcUNFxcmvusBgTvhx1rtl0iqZKsqwzvs2Rf
```


[8/24/2022 7:02 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/1b2b56a58b4be1ba3cd4a89eb2ee6080376aacb8

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/1b2b56a58b4be1ba3cd4a89eb2ee6080376aacb8
Progress · Kobo-InkBox/inkbox-os-init@1b2b56a
/mnt/data/projects/git/conversations/media/1b2b56a58b4be1ba3cd4a89eb2ee6080376aacb8-0770C


[8/24/2022 7:14 PM] szybet
will it be faster?


[8/24/2022 7:15 PM] tux_linux
A lot


[8/24/2022 7:19 PM] szybet
why


[8/24/2022 7:19 PM] szybet
https://github.com/navit-gps/navit/tree/v0.5.6

{Embed}
https://github.com/navit-gps/navit/tree/v0.5.6
GitHub - navit-gps/navit at v0.5.6
The open source (GPL v2) turn-by-turn navigation software for many OS - GitHub - navit-gps/navit at v0.5.6
/mnt/data/projects/git/conversations/media/navit-C360A


[8/24/2022 7:19 PM] szybet
can this be xorg?


[8/24/2022 7:19 PM] szybet
using*


[8/24/2022 7:19 PM] szybet
bdgsjhn


[8/24/2022 7:19 PM] szybet
can the lightmaps replacement use xorg?


[8/24/2022 7:30 PM] tux_linux
Yes it can


[8/24/2022 7:30 PM] szybet
actuallyhttps://github.com/navit-gps/navit/releases/tag/v0.5.6

{Embed}
https://github.com/navit-gps/navit/releases/tag/v0.5.6
Release navit-0.5.6 · navit-gps/navit
Hello Navitters,
Great news: Navit 0.5.6 is out now.
If you want to know what has changed see the Changelog at: https://github.com/navit-gps/navit/blob/v0.5.6/CHANGELOG.md
For the full list of comm...
/mnt/data/projects/git/conversations/media/v0.5-95084.6


[8/24/2022 7:30 PM] szybet
harbour havit is a qt variant


[8/24/2022 7:31 PM] szybet
that even launches in the chroot


[8/24/2022 7:31 PM] szybet
but im missing dbus library


[8/24/2022 7:40 PM] szybet
well its a sailfish port


[8/24/2022 8:13 PM] szybet
how can i view what libraries a executable needs on inkbox? ldd doesnt work


[8/24/2022 8:13 PM] tux_linux
`/lib/ld-*.so`


[8/24/2022 8:13 PM] tux_linux
or something


[8/24/2022 8:13 PM] tux_linux
just execute it


[8/24/2022 8:13 PM] szybet
?


[8/24/2022 8:13 PM] szybet
yea


[8/24/2022 8:13 PM] szybet
and i recompiled qt 3 times already


[8/24/2022 8:14 PM] szybet
because it shows only one thing that is missing


[8/24/2022 8:14 PM] tux_linux
what


[8/24/2022 8:14 PM] szybet
oh wait


[8/24/2022 8:15 PM] szybet
```
./harbour-navit: error while loading shared libraries: libQt5Multimedia.so.5: cannot open shared object file: No such file or directory
kobo:/navit/bin# /lib/ld-
ld-2.21.so           ld-linux-armhf.so.3
kobo:/navit/bin# /lib/ld-
ld-2.21.so           ld-linux-armhf.so.3
kobo:/navit/bin# /lib/ld-2.21.so harbour-navit 
harbour-navit: error while loading shared libraries: harbour-navit: cannot open shared object file
kobo:/navit/bin# /lib/ld-linux-armhf.so.3 harbour-navit 
harbour-navit: error while loading shared libraries: harbour-navit: cannot open shared object file
kobo:/navit/bin# /lib/ld-2.21.so ./harbour-navit 
./harbour-navit: error while loading shared libraries: libQt5Svg.so.5: cannot open shared object file: No such file or directory
kobo:/navit/bin# /lib/ld-linux-armhf.so.3 ./harbour-navit 
./harbour-navit: error while loading shared libraries: libQt5Svg.so.5: cannot open shared object file: No such file or directory
kobo:/navit/bin# 

```


[8/24/2022 8:15 PM] szybet
what?...


[8/24/2022 8:15 PM] tux_linux
well, does libQt5Multimedia.so.5 exist?


[8/24/2022 8:16 PM] szybet
no, i need to compile it


[8/24/2022 8:16 PM] szybet
but


[8/24/2022 8:16 PM] szybet
3 times already


[8/24/2022 8:16 PM] szybet
cant i see which libraries a exec needs


[8/24/2022 8:16 PM] szybet
?


[8/24/2022 8:17 PM] tux_linux
try `--list`


[8/24/2022 8:17 PM] tux_linux
but I doubt it will work


[8/24/2022 8:18 PM] szybet
nothing


[8/24/2022 8:18 PM] szybet
ugh


[8/24/2022 8:18 PM] tux_linux
well you need qt5svg and qt5multimedia


[8/24/2022 8:19 PM] szybet
compiling qt takes h


[8/24/2022 8:19 PM] szybet
i already compiled dbus


[8/24/2022 8:19 PM] szybet
:/


[8/24/2022 8:19 PM] szybet
not good


[8/24/2022 8:19 PM] tux_linux
i know


[8/24/2022 8:43 PM] szybet
```
./harbour-navit: error while loading shared libraries: libQt5Positioning.so.5: cannot open shared object file: No such file or directory

```
another one


[8/24/2022 8:43 PM] szybet
https://tenor.com/view/kermit-kermitreee-kermit-aaaaa-scream-gif-15959515

{Embed}
https://tenor.com/view/kermit-kermitreee-kermit-aaaaa-scream-gif-15959515
/mnt/data/projects/git/conversations/media/kermit-kermitreee-24C25.png


[8/24/2022 8:43 PM] tux_linux
Well, at some point you will get them all


[8/24/2022 8:43 PM] szybet
those aren't pokemons


[8/24/2022 8:43 PM] szybet
it isint fun


[8/24/2022 8:44 PM] tux_linux
I know
Just do something else while it compiles


[8/24/2022 8:44 PM] szybet
well im not waiting for it
but the laptop isint usable if it compiles


[8/24/2022 8:44 PM] szybet
what do i even enable for this?...


[8/24/2022 8:46 PM] szybet
i have no idea, google and configure says nothing


[8/24/2022 8:47 PM] szybet
https://doc.qt.io/qt-5/qtpositioning-index.html


[8/24/2022 8:51 PM] tux_linux
I don't know


[8/24/2022 8:51 PM] tux_linux
Try ripgrep


[8/24/2022 8:51 PM] tux_linux
Maybe


[8/24/2022 9:09 PM] szybet
https://github.com/qt/qtlocation/tree/5.15.2

{Embed}
https://github.com/qt/qtlocation/tree/5.15.2
GitHub - qt/qtlocation at 5.15.2
Qt Location. Contribute to qt/qtlocation development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qtlocation-14842


[8/24/2022 9:09 PM] szybet
how do i even compile this


[8/24/2022 9:47 PM] tux_linux
Open it in QtCreator


[8/24/2022 9:47 PM] tux_linux
Well give you a so file


[8/24/2022 9:47 PM] tux_linux
Like for the platform plugin


[8/24/2022 9:47 PM] tux_linux
Probably


[8/24/2022 9:48 PM] szybet
how to do this in cli?


[8/24/2022 9:48 PM] szybet
i compiled ot using qmake and got a .o file


[8/24/2022 9:48 PM] tux_linux
qmake && make


[8/24/2022 9:48 PM] szybet
😒


[8/24/2022 9:48 PM] tux_linux
Hmm


[8/24/2022 9:48 PM] szybet
sadly  not


[8/24/2022 9:48 PM] tux_linux
Are there different targets?
Try in QtCreator still


[8/24/2022 9:48 PM] szybet
o dont remember how it was with with platform plugin


[8/24/2022 9:49 PM] szybet
id didnt mame a guide


[8/24/2022 9:49 PM] szybet
well tommorow


[8/24/2022 9:49 PM] szybet
but im sure i will be able to run it


[8/24/2022 9:49 PM] szybet
but idk if it will run good


[8/24/2022 9:49 PM] tux_linux
It would compile libkobo.so
Maybe check its pro file for clues


[8/24/2022 9:58 PM] ninuje
ldd / lddtree for a nicer version / readelf for the DIY approach


[8/24/2022 9:58 PM] ninuje
The first two require a loader that can actually parse the target architecture

{Reactions}
👍 

[8/24/2022 9:59 PM] szybet
well i tryied ldd from the cross toolchain and it didnt worked


[8/24/2022 10:00 PM] szybet
as you are here, could you look at #chat and tux linux problems woth posix spawn?


[8/24/2022 10:01 PM] ninuje
I've never used posix_spawn (can't, glibc too old, it sucks)


[8/24/2022 10:01 PM] ninuje
so, read the manpage? ;o)


[8/24/2022 10:02 PM] szybet
you were the one that suggested replacing system with posix spawn😆


[8/24/2022 10:02 PM] ninuje
Because it's much easier to deal with than (v)fork/exec/


[8/24/2022 10:02 PM] ninuje
which I *have* dealt with


[8/24/2022 10:03 PM] ninuje
so I know the pain 😉


[8/24/2022 10:03 PM] szybet
okay then


[8/24/2022 10:03 PM] ninuje
Reading man fork first may help grasping the intricacies of the implementation


[8/24/2022 10:07 PM] tux_linux
it works now


[8/24/2022 10:07 PM] szybet
what was the fix


[8/24/2022 10:07 PM] szybet
does it in ipd work correctly?


[8/24/2022 10:08 PM] tux_linux
I saw some complicated SO answers about redirecting the output to `/dev/null`, that's my next step


[8/24/2022 10:08 PM] tux_linux
didn't test


[8/24/2022 10:08 PM] tux_linux
`return` was before waitpid


[8/24/2022 10:08 PM] szybet
oh


[8/24/2022 10:09 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/blob/1b2b56a58b4be1ba3cd4a89eb2ee6080376aacb8/init.c#L169-L184
now this works


[8/24/2022 10:11 PM] szybet
you use a lot of code from ipd


[8/24/2022 10:11 PM] tux_linux
yes


[8/24/2022 10:11 PM] tux_linux
it's useful


[8/25/2022 6:54 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b
I almost like C now

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b
Even more progress · Kobo-InkBox/inkbox-os-init@4216d8c
/mnt/data/projects/git/conversations/media/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b-9BEDC


[8/25/2022 6:58 AM] ninuje
https://github.com/Kobo-InkBox/inkbox-os-init/blob/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b/init.c#L316-L319

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b/init.c
inkbox-os-init/init.c at 4216d8c14f2e795d0f263b24125b38d7cf5e6d6b ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-6D7B9


[8/25/2022 6:58 AM] ninuje
Apparently you like writing dead code after a return? ;o)


[8/25/2022 6:58 AM] ninuje
Any decent IDE should flag that


[8/25/2022 6:59 AM] tux_linux
vim


[8/25/2022 6:59 AM] tux_linux
But yeah, I was suspicious about this one


[8/25/2022 7:00 AM] tux_linux
Is it necessary to free the buffer?


[8/25/2022 7:00 AM] ninuje
Well, it's init, so it's never going to die, so, err, yeah


[8/25/2022 7:00 AM] ninuje
Which is problematic with your strtok usage


[8/25/2022 7:00 AM] tux_linux
Then how to return the buffer and free it


[8/25/2022 7:00 AM] ninuje
Because strtok mangles pointers, so you need to keep the original pointer around to free it


[8/25/2022 7:00 AM] ninuje
which is why the manpage's example has a bunch of saveptr variables


[8/25/2022 7:01 AM] ninuje
You need to free it in the caller

{Reactions}
👍 

[8/25/2022 7:01 AM] ninuje
the only thing you can do in the callee is close the fd


[8/25/2022 7:01 AM] tux_linux
Actually yes
Unless I really put it in sbin init
Because there's some things (low level setup) that busybox does well that I'm not sure I want to handle


[8/25/2022 7:02 AM] tux_linux
For now it's just launched by a 3-line shell script


[8/25/2022 7:02 AM] ninuje
(Also strtok might be overkill to kill the last char, stymping oin it with a null byte should be fine, something like the previous approach but with strlen doesn't sound horrible)

{Reactions}
👍 

[8/25/2022 7:02 AM] tux_linux
Speed has really improved anyway


[8/25/2022 7:03 AM] ninuje
Or, better, just pass the read length along and use that - 1


[8/25/2022 7:03 AM] tux_linux
I tried with strcspn first but got some segfaults so ...


[8/25/2022 7:03 AM] ninuje
I have never in my life ued that function


[8/25/2022 7:04 AM] tux_linux
It worked
At some places


[8/25/2022 7:04 AM] ninuje
But read return the amount of bytes read, and you want to strip the last byte


[8/25/2022 7:04 AM] ninuje
so you don't need any string trickery at all


[8/25/2022 7:04 AM] tux_linux
Well
The last byte is not \0 ?


[8/25/2022 7:05 AM] ninuje
I mean for the stuff that kills the LF


[8/25/2022 7:05 AM] ninuje
calloc means your buffer is filled with zeroes, so what's *past* your read data is zero, too, yeah

{Reactions}
👍 

[8/25/2022 7:05 AM] ninuje
But you want to also zero out the last read byte

{Reactions}
👍 

[8/25/2022 7:07 AM] ninuje
Random similarish example w/ stack storage


[8/25/2022 7:07 AM] ninuje
https://github.com/koreader/KoboUSBMS/blob/abb52a5b1e10f5b97efc7c1e7ad2fc31dd93965f/usbms.c#L159-L172

{Embed}
https://github.com/koreader/KoboUSBMS/blob/abb52a5b1e10f5b97efc7c1e7ad2fc31dd93965f/usbms.c
KoboUSBMS/usbms.c at abb52a5b1e10f5b97efc7c1e7ad2fc31dd93965f · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03

{Reactions}
👍 

[8/25/2022 7:08 AM] ninuje
I don't usually resort to heap allocs for reading sysfs files


[8/25/2022 7:08 AM] ninuje
I only do that when I slurp binary data


[8/25/2022 7:08 AM] ninuje
But I have a thing about stack memory, so, err ^^

{Reactions}
👍 

[8/25/2022 7:10 AM] tux_linux
You don't see too much sacrilegious things in my code?


[8/25/2022 7:10 AM] ninuje
Haven't looked at it, really, the strtok just jumped at me so I looked into what fed it the buffer, that's all

{Reactions}
👍 

[8/25/2022 7:35 AM] ninuje
Correction: Given that your buffer is sized based on the file's length, what's beyond your read data is *also* beyond your buffer


[8/25/2022 7:36 AM] ninuje
I was thinking of chunked reading in PAGE-sized (or whatever-sized, really, just larger than the data you store in it) buffers when I wrote that comment, which isn't what's happening here


[8/25/2022 9:06 AM] szybet
```
./harbour-navit: error while loading shared libraries: libglib-2.0.so.0: cannot open shared object file: No such file or directory
```


[8/25/2022 9:06 AM] szybet
😒


[8/25/2022 9:07 AM] szybet
Common C routines used by Gtk+ and other libs.


[8/25/2022 9:07 AM] szybet
oh no


[8/25/2022 9:48 AM] szybet
```
./harbour-navit: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory

```


[8/25/2022 9:48 AM] szybet
perl


[8/25/2022 9:49 AM] szybet
🤕


[8/25/2022 10:20 AM] szybet
```
kobo:/navit/bin# env LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib:/qtlib QT_PLUGIN_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/ QT_QPA_PLATFORM=vnc QT
_DEBUG_PLUGINS=1 ./harbour-navit
error:graphics_svg_debug:module_graphics_svg_debug_init:enter svg_debug plugin_init
QFactoryLoader::QFactoryLoader() checking directory path "/mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/platforms" ...
QFactoryLoader::QFactoryLoader() looking at "/mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/platforms/libkobo.so"
Found metadata in lib /mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/platforms/libkobo.so, metadata=
{
    "IID": "org.qt-project.Qt.QPA.QPlatformIntegrationFactoryInterface.5.3",
    "MetaData": {
        "Keys": [
            "kobo"
        ]
    },
    "archreq": 0,
    "className": "KoboPlatformIntegrationPlugin",
    "debug": false,
    "version": 331520
}


Got keys from plugin meta data ("kobo")
QFactoryLoader::QFactoryLoader() looking at "/mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/platforms/libqvnc.so"
Found metadata in lib /mnt/onboard/.adds/qt-linux-5.15.2-kobo/plugins/platforms/libqvnc.so, metadata=
{
    "IID": "org.qt-project.Qt.QPA.QPlatformIntegrationFactoryInterface.5.3",
    "MetaData": {
        "Keys": [
            "vnc"
        ]
    },
    "archreq": 0,
    "className": "QVncIntegrationPlugin",
    "debug": false,
    "version": 331520
}


Got keys from plugin meta data ("vnc")
QFactoryLoader::QFactoryLoader() checking directory path "/navit/bin/platforms" ...
qt.qpa.plugin: Could not find the Qt platform plugin "wayland" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
kobo:/navit/bin#
```


[8/25/2022 10:21 AM] szybet
dsankfnsakjfnsakjfnkj leave my wayland


[8/25/2022 10:23 AM] szybet
https://www.mobileread.com/forums/showthread.php?t=195166

{Embed}
https://www.mobileread.com/forums/showthread.php?t=195166
Navit on Kindle Touch - MobileRead Forums
Navit on Kindle Touch Kindle Developer's Corner


[8/25/2022 10:23 AM] szybet
someone actually did it already


[8/25/2022 10:32 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-08A50.txt


[8/25/2022 10:32 AM] szybet
almost


[8/25/2022 11:55 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-BA62C.txt


[8/25/2022 11:55 AM] szybet
https://tenor.com/view/dying-monkey-dying-gif-13123180

{Embed}
https://tenor.com/view/dying-monkey-dying-gif-13123180
/mnt/data/projects/git/conversations/media/dying-monkey-dying-8A1CB.png


[8/25/2022 12:18 PM] szybet
@tux-linux xorg apps must run in the main rootfs?


[8/25/2022 2:14 PM] szybet
@tux-linux add to todo list: onboard change theme


[8/25/2022 2:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D63FD.txt


[8/25/2022 2:33 PM] szybet
cant we get a fu... higher glibc version?


[8/25/2022 3:06 PM] tux_linux
Never


[8/25/2022 3:09 PM] tux_linux
No
I already explained that


[8/25/2022 3:09 PM] tux_linux
Unless you want to port to mainline 4 kernels


[8/25/2022 3:10 PM] szybet
is there any way to fix software that has those issues?


[8/25/2022 3:11 PM] tux_linux
First you need to compile gobject inspection it seems
Then backport glibc features


[8/25/2022 3:13 PM] szybet
very funny


[8/25/2022 3:13 PM] tux_linux
It's the truth?


[8/25/2022 3:14 PM] tux_linux
Or seriously limit the program's abilities


[8/25/2022 3:14 PM] szybet
i really want this software


[8/25/2022 3:14 PM] szybet
how do i know where to start


[8/25/2022 3:14 PM] szybet
what code makes this problems


[8/25/2022 3:15 PM] tux_linux
std::pmr::monotonic_buffer_resource::_M_new_buffer(unsigned int, unsigned int)@GLIBCXX_3.4.26
It tells you what it's not capable of doing there


[8/25/2022 3:15 PM] tux_linux
There is another possibility
Compile qt with musl


[8/25/2022 3:16 PM] tux_linux
You might have more luck
Plus, it should work on all devices


[8/25/2022 3:16 PM] szybet
with musl


[8/25/2022 3:16 PM] szybet
😂


[8/25/2022 3:16 PM] tux_linux
Don't forget to recompile openssl


[8/25/2022 3:17 PM] tux_linux
@OfficerAction once did it


[8/25/2022 3:19 PM] szybet
you are insine


[8/25/2022 3:19 PM] szybet
and im even more


[8/25/2022 3:19 PM] tux_linux
yes


[8/25/2022 3:19 PM] tux_linux
But you said you really wanted to make it work


[8/25/2022 3:22 PM] szybet
well


[8/25/2022 3:25 PM] szybet
i really want purge light maps


[8/25/2022 3:25 PM] szybet
i will be off for the rest of the day


[8/25/2022 3:25 PM] szybet
add this


[8/25/2022 3:30 PM] tux_linux
not the theme, more the size


[8/25/2022 3:31 PM] tux_linux
but that is not doable


[8/25/2022 3:31 PM] tux_linux
unless we roll entire images for every device


[8/25/2022 3:31 PM] szybet
theme changes the size


[8/25/2022 3:31 PM] szybet
there is the phone theme


[8/25/2022 3:31 PM] szybet
that is really suited for this


[8/25/2022 3:32 PM] szybet
i will do this soon


[8/25/2022 3:32 PM] szybet
alxo xorg propably is fixed


[8/25/2022 3:32 PM] szybet
i havent have issues with xorg enabled, also tested it for arround 3h


[8/25/2022 3:32 PM] szybet
but still wait


[8/25/2022 3:32 PM] szybet
i will test more

{Reactions}
👍 

[8/25/2022 5:29 PM] ninuje
Fun fact: the GLIBCXX symbols have *nothing* to do with your libc


[8/25/2022 5:30 PM] ninuje
That's the C++ STL


[8/25/2022 5:30 PM] ninuje
Which is handled by your compiler


[8/25/2022 5:30 PM] ninuje
either libstdc++ with gcc or libc++ with clang


[8/25/2022 5:38 PM] tux_linux
Huh?


[8/25/2022 5:38 PM] tux_linux
It's so misleading


[8/25/2022 6:45 PM] ninuje
CXX means C++


[8/25/2022 7:35 PM] tux_linux
well, yeah, but `GLIBC` is misleading


[8/25/2022 9:06 PM] tux_linux
Found it


[8/25/2022 9:06 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220825_190630282.MP-D1404.jpg


[8/25/2022 9:59 PM] tux_linux
https://github.com/jmfairlie/cacaMap

{Embed}
https://github.com/jmfairlie/cacaMap
GitHub - jmfairlie/cacaMap: a c++ Qt based map widget
a c++ Qt based map widget. Contribute to jmfairlie/cacaMap development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/cacaMap-1C222


[8/25/2022 10:00 PM] tux_linux
You need to add `QT += widgets` in the .pro file and change `#include <QtGui>` to `#include <QtWidgets>` and `qapplication.h` to `QApplication` where found.


[8/25/2022 10:00 PM] tux_linux
It is quite a strange name for a maps app (especially in French ^^)


[8/25/2022 10:39 PM] szybet
AAAAAAAAA HOW FID YOU FIND THIS


[8/25/2022 10:39 PM] szybet
and how does it work


[8/25/2022 10:39 PM] tux_linux
~20m of searching on GitHub


[8/25/2022 10:39 PM] szybet
😒


[8/25/2022 10:39 PM] szybet
im blind im


[8/25/2022 10:39 PM] tux_linux
it's not that good


[8/25/2022 10:39 PM] tux_linux
it also outputs images to cache


[8/25/2022 10:39 PM] tux_linux
which gets really big


[8/25/2022 10:40 PM] szybet
is it usable a bit?


[8/25/2022 10:40 PM] tux_linux
so we need to find a way to constantly delete it


[8/25/2022 10:40 PM] tux_linux
yes
very much


[8/25/2022 10:40 PM] szybet
we can make it into tmpfs


[8/25/2022 10:40 PM] tux_linux
even there, it reaches 2M in 2 minutes


[8/25/2022 10:40 PM] szybet
good
very good


[8/25/2022 10:40 PM] szybet
i will look into it


[8/25/2022 10:40 PM] szybet
just post your work on github


[8/25/2022 10:41 PM] tux_linux
.


[8/25/2022 10:41 PM] szybet
while travaling i did this:

{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220825_201543-61A2D.jpg


[8/25/2022 10:41 PM] tux_linux
ok good


[8/25/2022 10:41 PM] szybet
custom onboard layout


[8/26/2022 12:46 AM] szybet (pinned)
https://github.com/Kobo-InkBox/inkbox/discussions/36

{Embed}
https://github.com/Kobo-InkBox/inkbox/discussions/36
To-Do list for 2.0 release · Discussion #36 · Kobo-InkBox/inkbox
X11 freeze fix + onboard Recompile platform plugin with fixes for user apps in rootfs Folders in localLibraryWidget (@Szybet) Reader: fit to screen size better Fix built-in apps (add exit buttons) ...
/mnt/data/projects/git/conversations/media/36-68592


[8/26/2022 12:46 AM] szybet
please pin this


[8/26/2022 12:46 AM] tux_linux
Pinned a message.


[8/26/2022 12:47 AM] szybet
'Recompile platform plugin with fixes for user apps in rootfs' what?


[8/26/2022 12:48 AM] tux_linux
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/70eba697d47f237430ce4798928bccd74f6c6c95

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/70eba697d47f237430ce4798928bccd74f6c6c95
kobodevicedescriptor.cpp: If `kobo_config.sh` doesn't exist, get de...
…ce codename from env
/mnt/data/projects/git/conversations/media/70eba697d47f237430ce4798928bccd74f6c6c95-DA22B


[8/26/2022 12:49 AM] szybet
oh tbis


[8/26/2022 12:49 AM] szybet
okay sure


[8/26/2022 11:12 AM] aryetis
Just to be sure, DEVICE_CODENAME is an inkbox specific variable, isn't it.


[8/26/2022 11:13 AM] szybet
you mean n306 for example? kobo names the devices like that. on the nia its even writen on it


[8/26/2022 11:22 AM] aryetis
no I mean the variable itself, does it exist outside of inkbox ?


[8/26/2022 11:22 AM] aryetis
just wondering why bother with kobo_config.sh if the variable spells it out for us.


[8/26/2022 11:47 AM] szybet
you mean the qt part?


[8/26/2022 1:37 PM] tux_linux
Does not exist outside InkBox


[8/26/2022 2:03 PM] aryetis
ok cool thanks

{Reactions}
👍 

[8/26/2022 2:21 PM] szybet
https://github.com/Kaqtus14/osmium
interesting thing you found

{Embed}
https://github.com/Kaqtus14/osmium
GitHub - Kaqtus14/osmium: Web browser written from scratch in C++
Web browser written from scratch in C++. Contribute to Kaqtus14/osmium development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/osmium-8FF2F


[8/26/2022 2:22 PM] szybet
what is the state of wifi? everything works?


[8/26/2022 2:50 PM] szybet
WHY are you keeping xorg in the kernel initrf


[8/26/2022 2:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-88F94.png


[8/26/2022 2:51 PM] szybet
and where is xorg at all


[8/26/2022 2:51 PM] szybet
i wanted the onboard thing to update


[8/26/2022 3:23 PM] szybet
how to apply new onboard keyboard

create all dirs if the dont exist

put user file into /xorg/root/.config/dconf ( replace the existing one )

put onboard dir into /xorg/home/test/.onboard/share/


[8/26/2022 3:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/newkeyboard-A30E3.zip


[8/26/2022 4:31 PM] szybet
cacaMaps have so much potential


[8/26/2022 4:31 PM] szybet
i will work on it for some days


[8/26/2022 5:56 PM] tux_linux
Don't touch the initrd
I'm currently rewriting rcS
I will apply the new onboard layout


[8/26/2022 6:01 PM] szybet
.


[8/26/2022 6:02 PM] szybet
as you are rewriting it, you could also add boot progress messages


[8/26/2022 6:02 PM] szybet
but only if you have the will for that


[8/26/2022 6:47 PM] tux_linux
i'm not currently rewriting startx script


[8/26/2022 6:47 PM] tux_linux
only rcS


[8/26/2022 6:47 PM] tux_linux
but its time will come


[8/26/2022 6:47 PM] tux_linux
and yes, I'm adding more status messages


[8/26/2022 6:47 PM] szybet
well, on the screen?


[8/26/2022 6:47 PM] tux_linux
no, on console


[8/26/2022 6:47 PM] tux_linux
screen = progress bar, period.


[8/26/2022 6:47 PM] szybet
im only asking why xorg is taking up space in the kernel initrd


[8/26/2022 6:47 PM] tux_linux
unless you enable `DISPLAY_DEBUG`


[8/26/2022 6:48 PM] tux_linux
there was a weird bug with udev, it needed it to run


[8/26/2022 6:48 PM] tux_linux
also managing extensions is easier when the system is booting


[8/26/2022 6:48 PM] szybet
i mean some cool texts while updating the scroll bar?


[8/26/2022 6:48 PM] szybet
well okay


[8/26/2022 6:48 PM] szybet
still ugh


[8/26/2022 6:48 PM] tux_linux
idk maybe


[8/26/2022 6:48 PM] tux_linux
but it breaks the design


[8/26/2022 6:49 PM] szybet
well its more informative


[8/26/2022 6:49 PM] szybet
under the scroll bar


[8/26/2022 6:50 PM] tux_linux
Anyone has a clue about why `sprintf` returns `rooted\4` on a char which is only `rooted` at the beginning?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-81394.png


[8/26/2022 6:51 PM] szybet
you are reading too much bytes?


[8/26/2022 6:51 PM] szybet
and its random bytes?


[8/26/2022 6:52 PM] tux_linux
no, I'm reading 6


[8/26/2022 6:52 PM] tux_linux
and strace shows it


[8/26/2022 6:52 PM] tux_linux
it's just added randomly


[8/26/2022 6:52 PM] tux_linux
anyway, will try `strstr`


[8/26/2022 6:54 PM] tux_linux
It works with `strstr` but here I showcase the problem anyways

{Attachments}
/mnt/data/projects/git/conversations/media/message-BB251.txt


[8/26/2022 6:55 PM] tux_linux
```
read(4, "rooted", 6)                    = 6                                                                           
close(4)                                = 0                                                                           
write(1, "rooted\4\n", 8rooted                                                                                        
)
```
(the `\n` is me that added it in `printf`)


[8/26/2022 6:56 PM] szybet
maybe you writed it using utf / ascii but you read it in a diffrent way

what i want to say, character reading things


[8/26/2022 6:56 PM] tux_linux
it's only supposed to read x bytes


[8/26/2022 6:56 PM] tux_linux
so idk


[8/26/2022 6:59 PM] szybet
do we I really need to limit cache size in maps?


[8/26/2022 6:59 PM] tux_linux
yes, otherwise ram will not be happy and/or maps won't show anything


[8/26/2022 6:59 PM] szybet
i was programming it for 2h, i got to 8Mb


[8/26/2022 6:59 PM] tux_linux
i got to 2mb in 3min


[8/26/2022 7:00 PM] tux_linux
did you move a lot or stayed at the same place?


[8/26/2022 7:00 PM] szybet
both


[8/26/2022 7:00 PM] ninuje
Because it's not a C string, so it's not NUL-terminated


[8/26/2022 7:00 PM] ninuje
Use `snprintf`, avoid unbounded string functions at all costs


[8/26/2022 7:02 PM] tux_linux
hm ok, but now I get this
```
init.c: In function ‘main’:
init.c:214:23: warning: passing argument 2 of ‘snprintf’ makes integer from pointer without a cast [-Wint-conversion]
  214 |   snprintf(root_flag, "%s", &sector_content);
      |                       ^~~~
      |                       |
      |                       char *
In file included from init.h:4,
                 from init.c:1:
/usr/arm-linux-gnueabihf/include/stdio.h:354:51: note: expected ‘size_t’ {aka ‘unsigned int’} but argument is of type ‘char *’
  354 | extern int snprintf (char *__restrict __s, size_t __maxlen,
      |                                            ~~~~~~~^~~~~~~~
init.c:214:29: warning: passing argument 3 of ‘snprintf’ from incompatible pointer type [-Wincompatible-pointer-types]
  214 |   snprintf(root_flag, "%s", &sector_content);
      |                             ^~~~~~~~~~~~~~~
      |                             |
      |                             char **
In file included from init.h:4,
                 from init.c:1:
/usr/arm-linux-gnueabihf/include/stdio.h:355:31: note: expected ‘const char * restrict’ but argument is of type ‘char **’
  355 |        const char *__restrict __format, ...)
      |        ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
```


[8/26/2022 7:02 PM] tux_linux
`sector_content` seems to be very sensitive, either I access it with `&` to get its content, either I don't and I get a lot of segfaults


[8/26/2022 7:02 PM] ninuje
Because you haven't read the manpage 😉


[8/26/2022 7:02 PM] tux_linux
oh, size


[8/26/2022 7:03 PM] ninuje
I can't tell what sector_content is or how it's created/allocated/filled


[8/26/2022 7:05 PM] ninuje
In the same vein as last night's, if you don't actually need the rest of sector_content, just pop a NUL at pos 5 and call it a day, no need for string manips


[8/26/2022 7:05 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/blob/4216d8c14f2e795d0f263b24125b38d7cf5e6d6b/init.c#L556-L562


[8/26/2022 7:06 PM] ninuje
Still doesn't tell me how it's declared 😉


[8/26/2022 7:06 PM] tux_linux
oh


[8/26/2022 7:06 PM] ninuje
But, yeah, confirms that you're not reading a C string, hence the extra stuff


[8/26/2022 7:06 PM] tux_linux
`char * sector_content;`


[8/26/2022 7:06 PM] ninuje
Allocated how?


[8/26/2022 7:07 PM] tux_linux
returning contents from the function was making the program segfault


[8/26/2022 7:07 PM] tux_linux
in header


[8/26/2022 7:07 PM] ninuje
That's  apointer


[8/26/2022 7:07 PM] ninuje
Not a buffer


[8/26/2022 7:07 PM] ninuje
Your pointer needs to point somewhere, how is that somewhere allocated?


[8/26/2022 7:08 PM] tux_linux
I'm not sure I follow you, that's the only place where it's declared


[8/26/2022 7:08 PM] ninuje
Then that's another issue


[8/26/2022 7:08 PM] ninuje
And explains your segfaults


[8/26/2022 7:08 PM] tux_linux
You know I'm very bad at C


[8/26/2022 7:09 PM] tux_linux
well, before that, sector_content didn't exist
and I was trying to return the sector contents from the function itself


[8/26/2022 7:09 PM] ninuje
A pointer is aptly-named, it's just a variable that, itself, holds a value that points to a memory region


[8/26/2022 7:09 PM] ninuje
It's "pointer-sized", because the size of that value depends on the architecture


[8/26/2022 7:09 PM] ninuje
(e.g., 32 bit or 64 bit memory layouts)


[8/26/2022 7:09 PM] ninuje
So your pointer itself actually takes up 4 or 8 bytes


[8/26/2022 7:10 PM] ninuje
Here, you want to read data and store it *somewhere*


[8/26/2022 7:10 PM] ninuje
That somewhere doesn't exist, you need to allocate it


[8/26/2022 7:10 PM] ninuje
And *then* you can update your pointer to point to it


[8/26/2022 7:11 PM] ninuje
What you're doing right now is reading data into the pointer *variable* itself


[8/26/2022 7:11 PM] tux_linux
```
openat(AT_FDCWD, "/dev/mmcblk0", O_RDONLY) = 4
_llseek(4, 40894464, [40894464], SEEK_SET) = 0
read(4, "rooted", 6)                    = 6
close(4)                                = 0
access("/opt/root", F_OK)               = 0
openat(AT_FDCWD, "/opt/root", O_RDONLY) = 4
fstat64(4, {st_mode=S_IFREG|0644, st_size=7, ...}) = 0
fstat64(4, {st_mode=S_IFREG|0644, st_size=7, ...}) = 0
_llseek(4, 0, [0], SEEK_SET)            = 0
read(4, "rooted\n", 7)                  = 7
_llseek(4, 7, [7], SEEK_SET)            = 0
close(4)                                = 0
mount("/dev/mmcblk0p1", "/mnt", "ext4", 0, ""ext4 filesystem being mounted at /overlaymount-rootfs/mnt/rootfs/overlay supports timestamps until 2038 (0x7fffffff)
) = 0
openat(AT_FDCWD, "/mnt/flags/DONT_BOOT", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 4
fstat64(4, {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
write(4, "true\n", 5)                   = 5
close(4)                                = 0
sync()                                  = 0
umount2("/mnt", 0)                      = 0
write(1, "root_flag: roo\33[1m\33[31m * \33[0mSe"..., 78root_flag: roo * Security policy was violated! Shutting down ...
) = 78
```


[8/26/2022 7:11 PM] szybet
@tux-linux well whats the max size of cache


[8/26/2022 7:12 PM] szybet
then


[8/26/2022 7:12 PM] tux_linux
32M


[8/26/2022 7:12 PM] szybet
no one never will reach that


[8/26/2022 7:12 PM] tux_linux
But do I really need a pointer?


[8/26/2022 7:12 PM] ninuje
Depends on function singatures


[8/26/2022 7:13 PM] ninuje
Using the adressof (`&`) operator on your actual buffer would work, too


[8/26/2022 7:13 PM] ninuje
e.g., with stack space:


[8/26/2022 7:13 PM] tux_linux
and it \*needs\* to be in a tmpfs


[8/26/2022 7:14 PM] ninuje
```
#include <stdio.h>

void main(void) {
    char buffer[16] = { 0 };
    snprintf(buffer, sizeof(buffer), "%s", "DATA");
    char * ptr = &buffer[0];
    char * ptr2 = buffer;

    printf("buffer: %s\n", buffer);
    printf("buffer: %p\n", buffer);
    printf("&buffer: %p\n", &buffer);
    printf("buffer[0]: %c\n", buffer[0]);
    printf("sizeof(buffer): %zu\n", sizeof(buffer));
    printf("sizeof(*buffer): %zu\n", sizeof(*buffer));

    printf("ptr: %s\n", ptr);
    printf("ptr: %p\n", ptr);
    printf("*ptr: %c\n", *ptr);
    printf("&ptr: %p\n", &ptr);
    printf("sizeof(ptr): %zu\n", sizeof(ptr));
    printf("sizeof(*ptr): %zu\n", sizeof(*ptr));

    printf("ptr2: %s\n", ptr2);
    printf("ptr2: %p\n", ptr2);
    printf("&ptr2: %p\n", &ptr2);
    printf("*ptr2: %c\n", *ptr2);
    printf("sizeof(ptr2): %zu\n", sizeof(ptr2));
    printf("sizeof(*ptr2): %zu\n", sizeof(*ptr2));

    return;
}
```


[8/26/2022 7:14 PM] ninuje
Reading an intro to arrays & pointers would be helpful 😉


[8/26/2022 7:15 PM] tux_linux
Well, I knew that pointers pointed to a memory address
but I don't fully understand them yet


[8/26/2022 7:15 PM] szybet
i know, for performance


[8/26/2022 7:16 PM] ninuje
(Also, I'm writing this blind coming from Lua, I might be spewing nonsense, do go read a real CS course ;p)


[8/26/2022 7:16 PM] tux_linux
but why `&buffer` would be equal to the first char in `buffer`? it should not be something like 0x51A, or whatever a memory address would be?


[8/26/2022 7:19 PM] ninuje
Because this.


[8/26/2022 7:19 PM] ninuje
😄


[8/26/2022 7:19 PM] tux_linux
Hm ok, 👍


[8/26/2022 7:19 PM] ninuje
I wanted to showcase array to pointer decay, but that's not it.


[8/26/2022 7:20 PM] ninuje
I'd need a compiler to write it properly.

{Reactions}
👍 

[8/26/2022 7:20 PM] tux_linux
while you're here, have an idea why sed doesn't work with posix_spawn?
`sed: bad option in substitution expression`
when this is ran

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-59052.png


[8/26/2022 7:21 PM] tux_linux
and when I put single quotes after `"`:
`sed: unsupported command '`


[8/26/2022 7:27 PM] ninuje
There, updated snippet above, now makes actual sense

{Reactions}
👍 

[8/26/2022 7:28 PM] ninuje
Quote your  sed expression


[8/26/2022 7:28 PM] tux_linux
here


[8/26/2022 7:28 PM] ninuje
`"'s/foo/var/'"`


[8/26/2022 7:29 PM] tux_linux
It's what I initially did but it doesn't seem to like it


[8/26/2022 7:29 PM] ninuje
Does it work in a shell simialrly quoted?


[8/26/2022 7:30 PM] ninuje
sed is a bit of a nightmare to remember how shit works


[8/26/2022 7:30 PM] szybet
grep, regex, awk too ;p...


[8/26/2022 7:31 PM] tux_linux
that was my next step, using `system`


[8/26/2022 7:31 PM] tux_linux
it did work before in the rcS


[8/26/2022 7:32 PM] szybet
well if someone wants to look at it
how do i get a .png file from this site
https://a.tile.openstreetmap.de/#map=6/51.4814/22.7856/2

this doesnt work:
https://a.tile.openstreetmap.de/%z/%x/%y.png

0 documentation :/


[8/26/2022 7:36 PM] ninuje
I meant an actual real shell and you typing the command ;p


[8/26/2022 7:36 PM] tux_linux
yes, I just did
actually I need to keep `\/` escape sequence to make sed understand `/`


[8/26/2022 7:36 PM] tux_linux
and silence the compiler warnings about it


[8/26/2022 7:36 PM] ninuje
Again, with deref & sizeof examples


[8/26/2022 7:36 PM] tux_linux
yes, thanks, I will try to understand it


[8/26/2022 7:38 PM] ninuje
In *some* commands, you can use another delimiter so you can keep your path separators as slashes


[8/26/2022 7:38 PM] ninuje
eg `s#/home/niluje#/home/not_niluje#g`


[8/26/2022 7:39 PM] tux_linux
yeah, it's an option too


[8/26/2022 7:40 PM] szybet
https://operations.osmfoundation.org/policies/tiles/


[8/26/2022 7:40 PM] szybet
@tux-linux  no open street maps for us


[8/26/2022 7:41 PM] tux_linux
yeah, better to disable it


[8/26/2022 7:41 PM] tux_linux
wikimedia one doesn't seem too bad


[8/26/2022 7:41 PM] szybet
okay, im purging it


[8/26/2022 7:41 PM] szybet
it doesnt work, yet


[8/26/2022 7:41 PM] tux_linux
just remove it from the xml list


[8/26/2022 7:41 PM] szybet
yea


[8/26/2022 7:41 PM] tux_linux
it did here


[8/26/2022 7:43 PM] szybet
for me never


[8/26/2022 7:45 PM] szybet
https://foundation.wikimedia.org/wiki/Maps_Terms_of_Use

{Embed}
https://foundation.wikimedia.org/wiki/Maps_Terms_of_Use
Maps Terms of Use
Want to help translate? Translate the missing messages.
/mnt/data/projects/git/conversations/media/Screenshot_of_a_map_on_Wikivoyage_displayi-F7955.png


[8/26/2022 7:45 PM] szybet
they dont like it at all


[8/26/2022 7:45 PM] tux_linux
then is there anything


[8/26/2022 7:45 PM] szybet
google


[8/26/2022 7:45 PM] szybet
for sure


[8/26/2022 7:45 PM] tux_linux
not so sure


[8/26/2022 7:45 PM] szybet
its a corpo, not an community


[8/26/2022 7:46 PM] szybet
we can "ddos" them a bit ;p


[8/26/2022 7:46 PM] tux_linux
is there a policy for it?


[8/26/2022 7:46 PM] szybet
google? idk


[8/26/2022 7:46 PM] szybet
dont read it


[8/26/2022 7:47 PM] the.mightydill
Apple maps


[8/26/2022 7:47 PM] szybet
hmm


[8/26/2022 7:47 PM] the.mightydill
THAT WAS A JOKE


[8/26/2022 7:47 PM] szybet
there is 0 chance they allow something like this


[8/26/2022 7:47 PM] szybet
not even allow, have something like this


[8/26/2022 7:48 PM] the.mightydill
Yeah


[8/26/2022 7:48 PM] szybet
i mean stamen maps work


[8/26/2022 7:48 PM] szybet
and i dont see a policy for it


[8/26/2022 7:48 PM] tux_linux
you can keep gmaps


[8/26/2022 7:49 PM] szybet
i will


[8/26/2022 7:49 PM] tux_linux
testing init on the emulator...
```
~ # mount | wc -l
603
~ #
```
thanks this is only run once in real life


[8/26/2022 7:51 PM] szybet
http://maps.stamen.com/#watercolor/12/37.7706/-122.3782

{Embed}
http://maps.stamen.com/
Stamen Maps
Stamen's toner, terrain and watercolor map styles are lovingly crafted and free for the taking.
/mnt/data/projects/git/conversations/media/fb-watercolor-E3E93.png


[8/26/2022 7:51 PM] szybet
they allow it


[8/26/2022 7:51 PM] szybet
even show how to


[8/26/2022 7:51 PM] szybet
nice


[8/26/2022 7:51 PM] szybet
We’d love to see these maps used around the web, so we’ve included some brief instructions to help you use them in the mapping system of your choice. These maps are available free of charge. If you use these tiles, you must use this attribution:


[8/26/2022 7:51 PM] szybet
https://tenor.com/view/wow-omg-meme-suprise-gif-24927190

{Embed}
https://tenor.com/view/wow-omg-meme-suprise-gif-24927190
/mnt/data/projects/git/conversations/media/wow-omg-meme-B351C.png


[8/26/2022 7:51 PM] tux_linux
great


[8/26/2022 7:51 PM] tux_linux
keep those two


[8/26/2022 7:52 PM] szybet
stamen maps are 3 actually


[8/26/2022 7:52 PM] szybet
the contrast one is really great


[8/26/2022 7:52 PM] szybet
but no small villages ;/


[8/26/2022 7:52 PM] tux_linux
that's what I was going to say


[8/26/2022 7:52 PM] szybet
well google satelite doesnt work?


[8/26/2022 7:53 PM] tux_linux
i'm not sure google satellite would work well on eink


[8/26/2022 7:53 PM] szybet
whatever


[8/26/2022 7:53 PM] szybet
https://google-satellite.gosur.com/?ll=50.3210332057412%2C21.28085529740997&z=4.476927986172117&t=satellite

{Embed}
https://google-satellite.gosur.com/?ll=50.3210332057412%2C21.28085529740997&z=4.476927986172117&t=satellite
Google Satellite
Poland: Poland satellite map. Find information about weather, road conditions, routes with driving directions, places and things to do in your destination.


[8/26/2022 7:53 PM] szybet
imagine


[8/26/2022 7:54 PM] szybet
watching weather on this


[8/26/2022 7:54 PM] szybet
like these clouds


[8/26/2022 7:54 PM] szybet
:O


[8/26/2022 7:54 PM] tux_linux
yeah


[8/26/2022 7:54 PM] tux_linux
but


[8/26/2022 7:54 PM] tux_linux
like


[8/26/2022 7:54 PM] tux_linux
no


[8/26/2022 7:54 PM] szybet
well not possible propably


[8/26/2022 7:54 PM] tux_linux
try with midori


[8/26/2022 7:54 PM] szybet
i mean


[8/26/2022 7:55 PM] szybet
getting static images and showing them


[8/26/2022 7:55 PM] szybet
but those images have storm clouds on them


[8/26/2022 7:55 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-910C6.png


[8/26/2022 7:55 PM] tux_linux
there is also a dark one


[8/26/2022 7:55 PM] szybet
now, get and png for that


[8/26/2022 7:55 PM] szybet
a "tile"


[8/26/2022 7:56 PM] szybet
https://www.gosur.com/3d-map/?ll=40.71145825163808%2C-73.99744158319237&z=14&t=3d

{Embed}
https://www.gosur.com/3d-map/?ll=40.71145825163808%2C-73.99744158319237&z=14&t=3d
Map of New York, United States
Interactive Map of New York: Look for places and addresses in New York with our street and route map. Find information about weather, road conditions, routes with driving directions, places and things to do in your destination.


[8/26/2022 7:56 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/58d4a61f1414cb644c27bb9fc24aca5be44d5a92

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/58d4a61f1414cb644c27bb9fc24aca5be44d5a92
A lot of progress · Kobo-InkBox/inkbox-os-init@58d4a61
/mnt/data/projects/git/conversations/media/58d4a61f1414cb644c27bb9fc24aca5be44d5a92-0C512


[8/26/2022 7:57 PM] tux_linux
I think your expectations are a bit too high


[8/26/2022 7:57 PM] szybet
i have dreams okay?

{Reactions}
😄 

[8/26/2022 8:18 PM] szybet
http://alexurquhart.github.io/free-tiles/


[8/26/2022 8:18 PM] szybet
💎


[8/26/2022 8:18 PM] szybet
ESRI light gray base


[8/26/2022 8:18 PM] szybet
😍


[8/26/2022 8:29 PM] tux_linux
great


[8/26/2022 8:47 PM] szybet
well it doesnt work


[8/26/2022 8:47 PM] szybet
https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/4/7/10

{Embed}
https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/4/7/10
/mnt/data/projects/git/conversations/media/10-DFF70


[8/26/2022 8:47 PM] szybet
`https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/4/7/10`


[8/26/2022 8:47 PM] szybet
its an image


[8/26/2022 8:47 PM] szybet
but it downloads it as html


[8/26/2022 8:47 PM] tux_linux
it's too dark anyway


[8/26/2022 8:47 PM] tux_linux
ugh


[8/26/2022 8:47 PM] szybet
i need get the link to the image


[8/26/2022 8:48 PM] szybet
nah, it goes to all ARCI maps


[8/26/2022 8:51 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D7BF3.png


[8/26/2022 8:51 PM] szybet
even wget works with this url


[8/26/2022 8:51 PM] szybet
but this doesnt


[8/26/2022 9:26 PM] tux_linux
maybe launch wget with QProcess


[8/26/2022 9:26 PM] tux_linux
even if it's... not great


[8/26/2022 9:26 PM] szybet
maps are now fast


[8/26/2022 9:26 PM] szybet
i dont want to change this


[8/26/2022 9:27 PM] tux_linux
try the same thing with curl and see if it returns an html page


[8/26/2022 9:27 PM] tux_linux
then try to debug that


[8/26/2022 9:27 PM] tux_linux
maybe


[8/26/2022 9:27 PM] szybet
curl -o works


[8/26/2022 9:27 PM] szybet
wget works oob


[8/26/2022 9:27 PM] szybet
idk...


[8/26/2022 9:27 PM] tux_linux
maybe use libcurl


[8/26/2022 9:28 PM] szybet
over kill


[8/26/2022 9:28 PM] szybet
i want to finish this today


[8/26/2022 9:28 PM] szybet
also i need qt signals and not blocking


[8/26/2022 9:29 PM] tux_linux
what's the html page like?


[8/26/2022 9:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/2-BE401
/mnt/data/projects/git/conversations/media/1-FFBB6
/mnt/data/projects/git/conversations/media/0-3E4E9


[8/26/2022 9:30 PM] szybet
```
<html>
<head><title>301 Moved Permanently</title></head>
<body bgcolor="white">
<center><h1>301 Moved Permanently</h1></center>
<hr><center>CloudFront</center>
</body>
</html>
```


[8/26/2022 9:30 PM] szybet
when you open `https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/4/7/10` you see `10` is a file


[8/26/2022 9:30 PM] szybet
:/


[8/26/2022 9:30 PM] tux_linux
maybe it's `robots.txt`


[8/26/2022 9:30 PM] szybet
what


[8/26/2022 9:31 PM] tux_linux
maybe it doesn't like automated requests like that


[8/26/2022 9:32 PM] szybet
https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer


[8/26/2022 9:32 PM] szybet
it should


[8/26/2022 10:52 PM] szybet
well after getting help from higher forces


[8/26/2022 10:52 PM] szybet
its because this sites needs https


[8/26/2022 10:52 PM] szybet
:/


[8/26/2022 10:52 PM] szybet
is there any hope to use working https on inkbox?


[8/26/2022 10:53 PM] tux_linux
we can add ca certificates to gui rootfs


[8/26/2022 10:53 PM] tux_linux
or run this as an user app (i.e. populate /etc as we want without rolling out a whole new system image)


[8/26/2022 10:53 PM] szybet
i need them to work from qt


[8/26/2022 10:53 PM] szybet
soo


[8/26/2022 10:53 PM] szybet
you agree on this?


[8/26/2022 10:53 PM] szybet
remove light maps and this as an user app?


[8/26/2022 10:53 PM] tux_linux
well... at this point


[8/26/2022 10:54 PM] szybet
your decission


[8/26/2022 10:54 PM] tux_linux
it will need to be a stable user app


[8/26/2022 10:54 PM] tux_linux
work on all devices


[8/26/2022 10:54 PM] tux_linux
as a built-in app would


[8/26/2022 10:54 PM] szybet
everything would be better than lightmaps


[8/26/2022 10:54 PM] szybet
even if i coded in a switch to crash 50% of time it would still be better

{Reactions}
⚡ 

[8/26/2022 10:55 PM] tux_linux
Change the name while you're at it


[8/26/2022 10:55 PM] tux_linux
some languages have a very specific meaning for this word...


[8/26/2022 10:55 PM] szybet
😆


[8/26/2022 10:55 PM] szybet
inkbox maps :)


[8/26/2022 10:55 PM] tux_linux
well yeah, if we improve it enough


[8/26/2022 10:57 PM] szybet
it already works great?


[8/26/2022 10:57 PM] szybet
simple app


[8/26/2022 10:57 PM] szybet
now i want https


[8/26/2022 10:58 PM] szybet
https://stackoverflow.com/questions/36748409/how-can-i-add-a-ssl-cert-to-my-code-in-qt

{Embed}
https://stackoverflow.com/questions/36748409/how-can-i-add-a-ssl-cert-to-my-code-in-qt
How can i add a SSL Cert to my code in QT
What I'm trying to do is send a https request to
https://mapi.alipay.com/gateway.do? in QT and get a response. Whenever I
send the request I get the error below. 
  qt.network.ssl: QSslSocket: can...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[8/26/2022 10:58 PM] szybet
we need propably a higher ssl version for qt?


[8/26/2022 10:59 PM] szybet
the certificate is fine?


[8/26/2022 10:59 PM] tux_linux
for this app I just added certificates in `/kobo/etc` and it worked


[8/26/2022 10:59 PM] szybet
maybe generate some proper certificates for inkbox


[8/26/2022 10:59 PM] szybet
and add them there


[8/26/2022 11:00 PM] szybet
and thats it?


[8/26/2022 11:00 PM] tux_linux
maybe


[8/26/2022 11:00 PM] szybet
well i want to finish it today


[8/26/2022 11:00 PM] szybet
so whats your decission


[8/26/2022 11:00 PM] tux_linux
finish the app today?


[8/26/2022 11:00 PM] tux_linux
no


[8/26/2022 11:01 PM] szybet
yes


[8/26/2022 11:01 PM] tux_linux
just copy the certs from the rootfs in `/kobo` and we will get to them later


[8/26/2022 11:01 PM] szybet
well, from where do i get those certs


[8/26/2022 11:02 PM] tux_linux
`/etc/ssl/certs`


[8/26/2022 11:02 PM] szybet
you mean?


[8/26/2022 11:02 PM] szybet
on my arch?


[8/26/2022 11:02 PM] tux_linux
`mkdir -p /kobo/etc/ssl/`
`cp -r /etc/ssl/certs /kobo/etc/ssl/`


[8/26/2022 11:02 PM] tux_linux
done


[8/26/2022 11:02 PM] tux_linux
profit


[8/26/2022 11:03 PM] szybet
😂


[8/26/2022 11:55 PM] szybet
i wanted some less spacing layout spacing but if i changed it the screen started to flicker like crazy


[8/26/2022 11:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C38A1.png


[8/26/2022 11:55 PM] szybet
._ .


[8/27/2022 1:54 AM] szybet
https://github.com/Szybet/inkbox-maps/blob/master/README.md

{Embed}
https://github.com/Szybet/inkbox-maps/blob/master/README.md
inkbox-maps/README.md at master · Szybet/inkbox-maps
Maps written in qt, c++ for ereaders, inkbox os. Contribute to Szybet/inkbox-maps development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-maps-905B9


[8/27/2022 1:54 AM] szybet
https://user-images.githubusercontent.com/53944559/187004844-f8ebeec6-3ac7-439b-a314-a7aa6d7227ae.mp4

{Embed}
https://user-images.githubusercontent.com/53944559/187004844-f8ebeec6-3ac7-439b-a314-a7aa6d7227ae.mp4


[8/27/2022 1:55 AM] szybet
done


[8/27/2022 1:56 AM] szybet
implementing it im leaving to you @tux-linux , idk where you want to put it etc


[8/27/2022 1:56 AM] szybet
also use global::wifi::isConnected check before launching it


[8/27/2022 1:57 AM] szybet
you can show those "inclusive" inkbox app on mobileread


[8/27/2022 1:57 AM] szybet
sanki too if you want


[8/27/2022 1:57 AM] szybet
conway


[8/27/2022 1:57 AM] szybet
etc


[8/27/2022 1:58 AM] szybet
that was a fun one day project


[8/27/2022 1:58 AM] szybet
i can do this to the rest of built in apps


[8/27/2022 1:58 AM] szybet
when will i get a inkbox repo with calculator?


[8/27/2022 2:00 AM] szybet
is it smoother than your first run? i disabled "animations"


[8/27/2022 3:30 AM] tux_linux
Awesome


[8/27/2022 5:33 AM] the.mightydill
wow, nice!


[8/27/2022 6:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220827_182439-D5A29.jpg


[8/27/2022 6:25 PM] szybet
im starting to work on the library


[8/27/2022 6:25 PM] szybet
and well


[8/27/2022 6:25 PM] szybet
could you point me to where is the problem?


[8/27/2022 6:25 PM] tux_linux
it's not the gui's fault


[8/27/2022 6:26 PM] tux_linux
it's because epubtool references a path to a thumbnail, but it fails to extract a thumbnails or the thumbnail doesn't exist


[8/27/2022 6:26 PM] tux_linux
though my book should definitely have got a thumbnail


[8/27/2022 6:26 PM] tux_linux
`rm -r /data/onboard/.thumbnails`


[8/27/2022 6:26 PM] tux_linux
and retry


[8/27/2022 6:27 PM] szybet
oh this


[8/27/2022 6:28 PM] szybet
well what


[8/27/2022 6:28 PM] szybet
how do i rebuild the library from terminal


[8/27/2022 6:28 PM] szybet
i cant remember that


[8/27/2022 6:28 PM] tux_linux
`rm /data/onboard/.database/LocalLibrary.db`


[8/27/2022 6:30 PM] szybet
how do we extract covers from pdf?


[8/27/2022 6:30 PM] tux_linux
mutool


[8/27/2022 6:30 PM] tux_linux
check `explore_local_library.sh`


[8/27/2022 6:31 PM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/5184489aa8eb903d6a2daa814c8721748077e681/content/inkbox/explore_local_library.sh#L50-L71

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/5184489aa8eb903d6a2daa814c8721748077e681/content/inkbox/explore_local_library.sh
gui-bundle/explore_local_library.sh at 5184489aa8eb903d6a2daa814c87...
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0D0A1


[8/27/2022 6:36 PM] szybet
so what should epub tool do if there is no thumbnail


[8/27/2022 6:36 PM] tux_linux
well, write "" in CoverPath?


[8/27/2022 6:36 PM] tux_linux
except it doesn't do that every time


[8/27/2022 6:37 PM] szybet
there is a weird exception then


[8/27/2022 6:37 PM] tux_linux
it happens more often than it should


[8/27/2022 6:37 PM] szybet
well i will ifx it


[8/27/2022 6:37 PM] szybet
i didn't knowed about it


[8/27/2022 6:40 PM] szybet
https://github.com/Szybet/epub-extract-inkbox/commit/430ce6be9c9ae858f9d94e49d32b079b69474d45

{Embed}
https://github.com/Szybet/epub-extract-inkbox/commit/430ce6be9c9ae858f9d94e49d32b079b69474d45
done the todo one · Szybet/epub-extract-inkbox@430ce6b
/mnt/data/projects/git/conversations/media/430ce6be9c9ae858f9d94e49d32b079b69474d45-273D3


[8/27/2022 6:40 PM] szybet
i already did it?


[8/27/2022 6:41 PM] tux_linux
i think I updated it?


[8/27/2022 6:41 PM] szybet
oh no?


[8/27/2022 6:41 PM] szybet
https://github.com/Kobo-InkBox/epubtool

{Embed}
https://github.com/Kobo-InkBox/epubtool
GitHub - Kobo-InkBox/epubtool: Parse ePUB metadata for InkBox GUI. ...
Parse ePUB metadata for InkBox GUI. Credits go to @Szybet. - GitHub - Kobo-InkBox/epubtool: Parse ePUB metadata for InkBox GUI. Credits go to @Szybet.
/mnt/data/projects/git/conversations/media/epubtool-FE14B


[8/27/2022 6:41 PM] tux_linux
OH


[8/27/2022 6:41 PM] szybet
here is a mess


[8/27/2022 6:41 PM] szybet
5 behind 5 up front


[8/27/2022 6:41 PM] tux_linux
was it that?


[8/27/2022 6:41 PM] tux_linux
but no, I'm not sure it's related


[8/27/2022 6:41 PM] szybet
this has nothing to do with cover


[8/27/2022 6:42 PM] szybet
can you sync up / open pull request to my repo?


[8/27/2022 6:42 PM] szybet
we will soon dont know which one is which


[8/27/2022 6:42 PM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/commit/f5c73872b75390f629d3a97df9e4f618b3c54754

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/commit/f5c73872b75390f629d3a97df9e4f618b3c54754
Update `epubtool` · Kobo-InkBox/gui-bundle@f5c7387
/mnt/data/projects/git/conversations/media/f5c73872b75390f629d3a97df9e4f618b3c54754-89FD5


[8/27/2022 6:42 PM] tux_linux
I updated it back then


[8/27/2022 6:42 PM] szybet
🙄


[8/27/2022 6:44 PM] tux_linux
https://github.com/Kobo-InkBox/epubtool/commit/2071093576322683a5c3b82477be659c653624f6

{Embed}
https://github.com/Kobo-InkBox/epubtool/commit/2071093576322683a5c3b82477be659c653624f6
If no cover found, empty path · Kobo-InkBox/epubtool@2071093
/mnt/data/projects/git/conversations/media/2071093576322683a5c3b82477be659c653624f6-0D6AC


[8/27/2022 6:44 PM] szybet
so you copied the code


[8/27/2022 6:44 PM] tux_linux
I didn't pull your repo because it has a >50M build files history


[8/27/2022 6:44 PM] tux_linux
so it would pollute cloning


[8/27/2022 6:44 PM] tux_linux
I likely forgot to credit you, strange


[8/27/2022 6:45 PM] szybet
well then, i will fork your fork of my repo...

{Reactions}
👍 

[8/27/2022 6:45 PM] tux_linux
i think you can just pull it and overwrite your commits too?


[8/27/2022 6:45 PM] tux_linux
your decision


[8/27/2022 6:45 PM] szybet
i cant


[8/27/2022 6:45 PM] szybet
you would need to push it


[8/27/2022 6:45 PM] szybet
whatever


[8/27/2022 6:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-028BE.png


[8/27/2022 6:45 PM] szybet
i will copy paste your code


[8/27/2022 6:46 PM] tux_linux
send me patches like andi1


[8/27/2022 6:46 PM] tux_linux
you won't need to fork


[8/27/2022 6:46 PM] szybet
i hate those text patches


[8/27/2022 6:46 PM] tux_linux
and you will be in the commit


[8/27/2022 6:46 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/b034e49f4811352fb6ff12e99cd2672150c9e4fa
like here

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/b034e49f4811352fb6ff12e99cd2672150c9e4fa
remove make_devicenodes script · Kobo-InkBox/kernel@b034e49
no need for it, the kernel build scripts already do their job
/mnt/data/projects/git/conversations/media/b034e49f4811352fb6ff12e99cd2672150c9e4fa-FB934


[8/27/2022 6:51 PM] szybet
did you build it like this?
```
~/.cargo/bin/cross build --target armv7-unknown-linux-musleabihf

```


[8/27/2022 6:52 PM] tux_linux
probably


[8/27/2022 6:52 PM] szybet
well... greater speed, size with --release

{Reactions}
👍 

[8/27/2022 7:02 PM] szybet
```
kobo:/# EXTRACT_COVER=1 ./epubtool test.epub
{
            "database":[
            {
            "BookID": "1",
            "BookPath": "test.epub",
            "CoverPath": "/mnt/onboard/onboard/.thumbnails/64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2",
            "Author": "Ira Levin",
            "Title": "A Kiss Before Dying",
            "PublicationDate": "0101-01-01T00:00:00+00:00"
        }kobo:/# 
kobo:/# ls /mnt/onboard/onboard/.thumbnails/
64c1d2d683c9ebe14eac8bded52ed1bab97298a95559ee86af2773630bbb85e2.t
kobo:/# 
```
🥴


[8/27/2022 7:02 PM] szybet
wait, its intentional?


[8/27/2022 7:02 PM] szybet
the +t


[8/27/2022 7:02 PM] szybet
what is going on


[8/27/2022 7:02 PM] tux_linux
yes


[8/27/2022 7:02 PM] szybet
why


[8/27/2022 7:02 PM] tux_linux
but they're supposed to be removed


[8/27/2022 7:03 PM] tux_linux
https://github.com/Kobo-InkBox/epubtool/commit/051d5fbbb50d36ea228298c7b6677ec12682b698

{Embed}
https://github.com/Kobo-InkBox/epubtool/commit/051d5fbbb50d36ea228298c7b6677ec12682b698
Write book cover output to temporary files converted afterwards · K...
/mnt/data/projects/git/conversations/media/051d5fbbb50d36ea228298c7b6677ec12682b698-FFFD1


[8/27/2022 7:04 PM] szybet
oh, and you will convert them after wards?


[8/27/2022 7:04 PM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/5184489aa8eb903d6a2daa814c8721748077e681/content/inkbox/explore_local_library.sh#L26-L30

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/5184489aa8eb903d6a2daa814c8721748077e681/content/inkbox/explore_local_library.sh
gui-bundle/explore_local_library.sh at 5184489aa8eb903d6a2daa814c87...
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0D0A1


[8/27/2022 7:04 PM] szybet
this does makes sense


[8/27/2022 7:28 PM] szybet
here it is


[8/27/2022 7:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/0001-applied-old-fixes-fix-for-no-cover-gi-B150A.patch


[8/27/2022 7:28 PM] szybet
i also applied this old fix


[8/27/2022 7:28 PM] tux_linux
which old fix


[8/27/2022 7:28 PM] szybet
.unwrap_or("Unknown".to_string());


[8/27/2022 7:28 PM] tux_linux
oh ok


[8/27/2022 7:28 PM] tux_linux
thanks


[8/27/2022 7:28 PM] tux_linux
it works?


[8/27/2022 7:29 PM] szybet
it works for this one epub i had problems with


[8/27/2022 7:29 PM] szybet
so yea


[8/27/2022 7:29 PM] szybet
now to pdfs


[8/27/2022 7:29 PM] tux_linux
it doesn't work with pdfs?


[8/27/2022 7:29 PM] szybet
epubtool is for pdfs?


[8/27/2022 7:30 PM] tux_linux
no


[8/27/2022 7:30 PM] szybet
and i have 2 pdfs that are empty


[8/27/2022 7:30 PM] szybet
i mean no cover at all


[8/27/2022 7:30 PM] tux_linux
they should not


[8/27/2022 7:30 PM] tux_linux
mutool is reliable


[8/27/2022 7:30 PM] szybet
even no "not available"


[8/27/2022 7:30 PM] szybet
idk, let me see it


[8/27/2022 7:34 PM] tux_linux
```
27/08/2022 @ 13:33:07 | wifiDialog: Wi-Fi dialog checkbox clicked: 2
27/08/2022 @ 13:33:07 | wifiDialog: Turning Wi-Fi on
/lib/rc/sh/openrc-run.sh: line 45: can't open /run/ibxd: Interrupted system call
Waiting for Wireless Events from interfaces...
```
I get this when trying to turn wifi on on the Glo HD


[8/27/2022 7:34 PM] tux_linux
```
kobo:~# cat /run/wifi_stats 
Turning on Wi-Fi: 2.76s - OK
kobo:~# cat /var/log/wifi.log 
Turning Wi-Fi ON
insmod: ERROR: could not insert module /modules/drivers/mmc/card/sdio_wifi_pwr.ko: File exists
insmod: ERROR: could not insert module /modules/wifi/bcmdhd.ko: File exists
kobo:~#
```


[8/27/2022 7:34 PM] tux_linux
the checkbox unchecks itself after 5 seconds and status returns to idle


[8/27/2022 7:35 PM] szybet
look at /usr/local/bin/wifi/wifi_status.sh


[8/27/2022 7:36 PM] tux_linux
`disabled`


[8/27/2022 7:36 PM] szybet
```
if [ "${DEVICE}" == "n873" ] || [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n306" ] ||  [ "${DEVICE}" == "n705" ] || [ "${DEVICE}" == "n905b" ] || [ "${DEVICE}" == "n905c" ] || [ "${DEVICE}" == "n613" ] || [ "${DEVICE}" == "kt" ]; then
    WIFI_DEV="eth0"
elif [ "${DEVICE}" == "n437" ] || [ "${DEVICE}" == "kt" ]; then
    WIFI_DEV="wlan0"
else
    WIFI_DEV="eth0"
fi

```


[8/27/2022 7:36 PM] szybet
this is propably the problem


[8/27/2022 7:36 PM] tux_linux
You aren't initializing `DEVICE`


[8/27/2022 7:36 PM] tux_linux
almost never


[8/27/2022 7:36 PM] szybet
what is this?


[8/27/2022 7:36 PM] tux_linux
well, tell me how the script is going to get the value of `DEVICE`


[8/27/2022 7:36 PM] szybet
😂


[8/27/2022 7:37 PM] szybet
lol


[8/27/2022 7:37 PM] szybet
true


[8/27/2022 7:37 PM] tux_linux
it works most of the time in GUI
probably because the variable is exported in the gray cloud of global environment variables
but not always


[8/27/2022 7:37 PM] szybet
repair this


[8/27/2022 7:37 PM] szybet
such a dumb bug


[8/27/2022 7:38 PM] szybet
does `explore_local_library.sh` work with subfolders?


[8/27/2022 7:38 PM] tux_linux
it explores them, yes


[8/27/2022 7:38 PM] szybet
good


[8/27/2022 7:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3B34F.png


[8/27/2022 7:58 PM] szybet
mutool does work, the problem is somewhere else


[8/27/2022 7:59 PM] tux_linux
listing networks on glo hd doesn't work


[8/27/2022 7:59 PM] szybet
oof


[8/27/2022 7:59 PM] tux_linux
probably because of wlarm_le


[8/27/2022 7:59 PM] szybet
networks_list_full exists?


[8/27/2022 7:59 PM] tux_linux
wifi_list_full you mean?


[8/27/2022 8:00 PM] szybet
yes yes


[8/27/2022 8:00 PM] tux_linux
yes, both files exist and they are empty


[8/27/2022 8:00 PM] tux_linux
`wlarm_le escanresults` works when executed in shell


[8/27/2022 8:02 PM] szybet
well the problem then is capruting its output


[8/27/2022 8:02 PM] szybet
and i dont know what to do about it, its coppied code from eth0


[8/27/2022 8:02 PM] szybet
you need to debug it yourself


[8/27/2022 8:03 PM] szybet
https://github.com/Szybet/inkbox-list-networks/blob/b84448eb9c1a361d46bb0530d1715afeb77800c0/inkbox-list-networks/src/wlarm_le_wrapper.rs#L8-L13

{Embed}
https://github.com/Szybet/inkbox-list-networks/blob/b84448eb9c1a361d46bb0530d1715afeb77800c0/inkbox-list-networks/src/wlarm_le_wrapper.rs
inkbox-list-networks/wlarm_le_wrapper.rs at b84448eb9c1a361d46bb053...
extract needed data for wifi commands - for inkbox project - inkbox-list-networks/wlarm_le_wrapper.rs at b84448eb9c1a361d46bb0530d1715afeb77800c0 · Szybet/inkbox-list-networks
/mnt/data/projects/git/conversations/media/inkbox-list-networks-4BC03


[8/27/2022 8:03 PM] szybet
this is the problem


[8/27/2022 8:03 PM] tux_linux
on glo hd the interface is wlan0


[8/27/2022 8:03 PM] tux_linux
if that matters


[8/27/2022 8:03 PM] szybet
no


[8/27/2022 8:03 PM] szybet
it doesnt 
https://github.com/Szybet/inkbox-list-networks/blob/b84448eb9c1a361d46bb0530d1715afeb77800c0/inkbox-list-networks/src/main.rs#L43-L47

{Embed}
https://github.com/Szybet/inkbox-list-networks/blob/b84448eb9c1a361d46bb0530d1715afeb77800c0/inkbox-list-networks/src/main.rs
inkbox-list-networks/main.rs at b84448eb9c1a361d46bb0530d1715afeb77...
extract needed data for wifi commands - for inkbox project - inkbox-list-networks/main.rs at b84448eb9c1a361d46bb0530d1715afeb77800c0 · Szybet/inkbox-list-networks
/mnt/data/projects/git/conversations/media/inkbox-list-networks-4BC03


[8/27/2022 8:03 PM] szybet
if you need any help with rust, just say it

{Reactions}
👍 

[8/27/2022 8:04 PM] tux_linux
but it does work on n905b


[8/27/2022 8:04 PM] tux_linux
nonsense


[8/27/2022 8:05 PM] szybet
i have no explanation


[8/27/2022 8:05 PM] tux_linux
is there a gdb for rust?


[8/27/2022 8:06 PM] szybet
https://www.google.com/search?q=gdb+for+rust
yes


[8/27/2022 8:06 PM] tux_linux
oh


[8/27/2022 8:06 PM] szybet
hey, did you compressed it with npx?


[8/27/2022 8:06 PM] tux_linux
i didn't know it was possible


[8/27/2022 8:06 PM] tux_linux
probably not


[8/27/2022 8:06 PM] tux_linux
or you did it


[8/27/2022 8:06 PM] tux_linux
and it messed up


[8/27/2022 8:06 PM] tux_linux
idk


[8/27/2022 8:06 PM] szybet
check it


[8/27/2022 8:07 PM] szybet
well wait


[8/27/2022 8:07 PM] szybet
remove this


[8/27/2022 8:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E8229.png


[8/27/2022 8:07 PM] tux_linux
do you have a clean compiled version I could test now?


[8/27/2022 8:07 PM] tux_linux
without optimization


[8/27/2022 8:07 PM] szybet
okay i will compile it

{Reactions}
👍 

[8/27/2022 8:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-6FA86


[8/27/2022 8:08 PM] tux_linux
thanks


[8/27/2022 8:10 PM] szybet
how do i see output of generating the database?


[8/27/2022 8:10 PM] tux_linux
qDebug


[8/27/2022 8:10 PM] szybet
?


[8/27/2022 8:10 PM] szybet
i mean the script


[8/27/2022 8:10 PM] tux_linux
wdym?


[8/27/2022 8:10 PM] szybet
explore_local_library.sh


[8/27/2022 8:11 PM] tux_linux
wait a minute


[8/27/2022 8:11 PM] tux_linux
you're not invoking wlarm_le


[8/27/2022 8:11 PM] tux_linux
you're invoking iwlist


[8/27/2022 8:11 PM] tux_linux
which of course fails


[8/27/2022 8:11 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-3A349.txt


[8/27/2022 8:11 PM] szybet
which model number has the glo


[8/27/2022 8:12 PM] tux_linux
glo hd


[8/27/2022 8:12 PM] tux_linux
n437


[8/27/2022 8:12 PM] szybet
what is in /opt/inkbox_device


[8/27/2022 8:13 PM] tux_linux
```
kobo:~# cat /opt/inkbox_device 
n437
kobo:~#
```


[8/27/2022 8:13 PM] tux_linux
don't forget that there is a newline in the file


[8/27/2022 8:13 PM] szybet
```
    let model =
        fs::read_to_string("/opt/inkbox_device").expect("Something went wrong reading the file");

    //println!("model is: {}", model);
    /* 
    Command::new("/usr/local/bin/wifi/toggle.sh")
    .arg("on")
    .output()
    .expect("failed to execute iwlist");
    */
    
    if model == "n705" || model == "n905b" || model == "n905c" || model == "n613" || model == "n437"
    {
        wlarm_le_scan();
    } else {
        iwlist_scan();
    }
}
```


[8/27/2022 8:13 PM] szybet
wtf


[8/27/2022 8:13 PM] szybet
it works on other devices.


[8/27/2022 8:13 PM] tux_linux
try with newline just to see


[8/27/2022 8:14 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-9177A


[8/27/2022 8:15 PM] tux_linux
works


[8/27/2022 8:15 PM] szybet
WTF


[8/27/2022 8:15 PM] szybet
***;_;***


[8/27/2022 8:20 PM] tux_linux
though it fails to detect encryption on some networks


[8/27/2022 8:20 PM] szybet
show me full and format wifi list files


[8/27/2022 8:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/encryption-0FE56.png


[8/27/2022 8:21 PM] tux_linux
```
kobo:~# cat /run/wifi_list_format 
00:1C:F0:F5:FA:0E
SentFromMyToaster-EXT
false
76
%%==SPLIT==%%
B8:EC:A3:D4:09:20
SentFromMyToaster
true
83
%%==SPLIT==%%
kobo:~# cat /run/wifi_list_full
SSID: "SentFromMyToaster-EXT"
Mode: Managed   RSSI: -76 dBm   SNR: 0 dB       noise: -92 dBm  Flags: RSSI on-channel  Channel: 1
BSSID: 00:1C:F0:F5:FA:0E        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
WPA:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        No WPA Capabilities advertised
RSN:
        multicast cipher: TKIP
        unicast ciphers(2): TKIP AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 1 20MHz (0x2b01)
        Control channel: 1
        802.11N Capabilities: SGI40 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ]

SSID: "SentFromMyToaster"
Mode: Managed   RSSI: -83 dBm   SNR: 0 dB       noise: -92 dBm  Flags: FromBcn RSSI on-channel  Channel: 11
BSSID: B8:EC:A3:D4:09:20        Capability: ESS WEP ShortPre ShortSlot 
Supported Rates: [ 1(b) 2(b) 5.5(b) 11(b) 6 9 12 18 24 36 48 54 ]
RSN:
        multicast cipher: AES-CCMP
        unicast ciphers(1): AES-CCMP 
        AKM Suites(1): WPA-PSK 
        Capabilities(0x0000): No Pre-Auth, Pairwise, 1 PTK Replay Ctr1 GTK Replay Ctr
802.11N Capable:
        Chanspec: 2.4GHz channel 11 20MHz (0x2b0b)
        Control channel: 11
        802.11N Capabilities: SGI20 
        Supported MCS : [ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 96 ]

kobo:~#
```


[8/27/2022 8:22 PM] szybet
SentFromMyToaster-EXT has a password?


[8/27/2022 8:23 PM] szybet
how do i debug the library...


[8/27/2022 8:23 PM] tux_linux
doesn't work on glo hd


[8/27/2022 8:23 PM] tux_linux
it has one


[8/27/2022 8:23 PM] tux_linux
I know, we have ... strange ... network names here


[8/27/2022 8:24 PM] szybet
it doesnt have anything to do with it


[8/27/2022 8:24 PM] szybet
whats the problem


[8/27/2022 8:24 PM] tux_linux
the wifi status at dialog launch


[8/27/2022 8:24 PM] tux_linux
when it's supposed to say 'Scanning networks' or something


[8/27/2022 8:24 PM] tux_linux
it says 'Wi-Fi status'


[8/27/2022 8:25 PM] szybet
did you apply the fixes i send?


[8/27/2022 8:25 PM] tux_linux
what ones?


[8/27/2022 8:27 PM] szybet
this


[8/27/2022 8:27 PM] szybet
strange. i will look into it later


[8/27/2022 8:28 PM] szybet
🥺


[8/27/2022 8:28 PM] tux_linux
what library


[8/27/2022 8:28 PM] tux_linux
where


[8/27/2022 8:28 PM] tux_linux
oh will try it


[8/27/2022 8:33 PM] szybet
https://tenor.com/view/yikes-monkey-look-and-leave-yikes-monkey-look-and-leave-gif-14895670

{Embed}
https://tenor.com/view/yikes-monkey-look-and-leave-yikes-monkey-look-and-leave-gif-14895670
/mnt/data/projects/git/conversations/media/yikes-monkey-look-and-leave-yikes-monkey-DCC07.png


[8/27/2022 8:33 PM] tux_linux
you know you can use `setStyleSheet("padding: <x>px")` instead of fixed height/width?


[8/27/2022 8:33 PM] szybet
i dont know what padding is


[8/27/2022 8:33 PM] tux_linux
local library?


[8/27/2022 8:33 PM] szybet
so, no


[8/27/2022 8:33 PM] szybet
yes


[8/27/2022 8:33 PM] szybet
i want mutool output when it runs


[8/27/2022 8:33 PM] tux_linux
run it yourself


[8/27/2022 8:34 PM] szybet
just launch the script?...


[8/27/2022 8:34 PM] tux_linux
see what the script is doing (`busybox-initrd sh -x`) then CTRL+C it when it reaches your pdf and you will see what mutool command is executed


[8/27/2022 8:34 PM] tux_linux
or, you can do `ps | grep mutool | grep -v grep` in a while loop


[8/27/2022 8:41 PM] szybet
```
kobo:/# busybox-initrd sh -x
kobo:/# /mnt/onboard/
.adds/    .kobo/    onboard/
kobo:/# /mnt/onboard/.adds/inkbox/explore_local_library.sh 
+ /mnt/onboard/.adds/inkbox/explore_local_library.sh
[FBInk] Unidentified Kobo device code (40)!
awk: cmd. line:1: Unexpected token
awk: cmd. line:1: Unexpected token
awk: cmd. line:1: Unexpected token
awk: cmd. line:1: Unexpected token
/mnt/onboard/.adds/inkbox
awk: cmd. line:1: Unexpected token
awk: cmd. line:1: Unexpected token
/mnt/onboard/.adds/inkbox
kobo:/# 


```


[8/27/2022 8:41 PM] szybet
what


[8/27/2022 8:42 PM] tux_linux
i meant, run the script


[8/27/2022 8:42 PM] tux_linux
`busybox-initrd sh -x /mnt/onboar/onboard/.adds/inkbox/explore_local_library.sh`
you're probably missing some env vars


[8/27/2022 8:42 PM] szybet
😆


[8/27/2022 8:42 PM] szybet
im dumb sometimes


[8/27/2022 8:57 PM] tux_linux
```
   // To avoid confusion with reconnecting
   QTimer::singleShot(2000, this, SLOT(watcher()));
```
it's already there


[8/27/2022 8:57 PM] szybet
yes, and set 2000 to 0


[8/27/2022 8:57 PM] tux_linux
oh


[8/27/2022 8:57 PM] tux_linux
ok


[8/27/2022 8:58 PM] tux_linux
can you compile list-networks with release build and send it here?


[8/27/2022 9:00 PM] szybet
have you a working pdf?


[8/27/2022 9:00 PM] szybet
that works with the cover from the library


[8/27/2022 9:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-F4153


[8/27/2022 9:00 PM] tux_linux
great


[8/27/2022 9:00 PM] tux_linux
try generating sysreport, those ones always work


[8/27/2022 9:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220827_210343-3BF2F.jpg


[8/27/2022 9:04 PM] szybet
these 2 started to work but sysreport doesnt


[8/27/2022 9:04 PM] szybet
😂


[8/27/2022 9:04 PM] tux_linux
nonsense


[8/27/2022 9:04 PM] szybet
😂


[8/27/2022 9:04 PM] tux_linux
what if you remove thumbnails dir and LocalLibrary.db then relaunch the binary?


[8/27/2022 9:10 PM] szybet
now nothing


[8/27/2022 9:10 PM] szybet
not even one pdf hasd a thumbnal


[8/27/2022 9:10 PM] tux_linux
what's gui-bundle commit


[8/27/2022 9:11 PM] szybet
how to check it?


[8/27/2022 9:11 PM] tux_linux
`git log`?


[8/27/2022 9:11 PM] szybet
oh there


[8/27/2022 9:11 PM] tux_linux
and throw the first one


[8/27/2022 9:11 PM] szybet
well


[8/27/2022 9:12 PM] szybet
i wanted too look at it on the kobo


[8/27/2022 9:12 PM] szybet
rootfs has something like that


[8/27/2022 9:12 PM] szybet
```
commit 5bc9fc28a059a6241b2d2599104a5dd597134606 (HEAD -> main, origin/main, origin/HEAD)
Merge: da8d18e 5184489
Author: Szybet <53944559+Szybet@users.noreply.github.com>
Date:   Wed Jul 20 15:55:59 2022 +0200

    Merge branch 'Kobo-InkBox:main' into main

commit 5184489aa8eb903d6a2daa814c8721748077e681
Author: Nicolas Mailloux <nicolecrivain@gmail.com>
Date:   Tue Jul 19 00:08:08 2022 -0400

    `explore_local_library.sh`: Basic support for plain text files

commit da8d18ed2bbb7fd485a425e5fec7d74e83cbbf3c

```


[8/27/2022 9:13 PM] tux_linux
hm latest one


[8/27/2022 9:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220827_212057-8B707.jpg


[8/27/2022 9:21 PM] tux_linux
?


[8/27/2022 9:21 PM] szybet
well as you cant see, everything works ***fine***


[8/27/2022 9:22 PM] szybet
i have a question


[8/27/2022 9:22 PM] tux_linux
yes


[8/27/2022 9:23 PM] szybet
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/launch_app.sh

```
# the proper way for inkbox: bind mount it to the place it should
#umount -f /kobo/mnt/onboard/.adds/inkbox/inkbox-bin
#mount -o ro,bind /kobo/tmp/exec /kobo/mnt/onboard/.adds/inkbox/inkbox-bin
#/usr/bin/inkbox.sh; read;
```

{Embed}
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/launch_app.sh
niAudio/launch_app.sh at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-7924C


[8/27/2022 9:23 PM] szybet
is this the right thing to do this?


[8/27/2022 9:23 PM] szybet
because when i supply inkbox from qtcreator, library gets well, like that


[8/27/2022 9:24 PM] tux_linux
I always use this one-liner
```
rm /tmp/inkbox; wget 192.168.3.1:8000/inkbox -O /tmp/inkbox; chmod +x /tmp/inkbox; killall -q inkbox inkbox-bin; umount -l -f /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; mount --bind /tmp/inkbox /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; env QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh
```


[8/27/2022 9:24 PM] tux_linux
"official method"


[8/27/2022 9:25 PM] szybet
```
 umount -l -f /kobo/mnt/onboard/.adds/inkbox/inkbox-bin
```


[8/27/2022 9:25 PM] szybet
this propably does the job


[8/27/2022 9:26 PM] szybet
hmm mount --bind didnt worked for me


[8/27/2022 9:26 PM] tux_linux
mount bind always work


[8/27/2022 9:27 PM] szybet
i needed this `-o ro,bind`


[8/27/2022 9:31 PM] szybet
it still doesnt work from qt creator


[8/27/2022 9:31 PM] szybet
and only pdfs


[8/27/2022 9:32 PM] tux_linux
just try my one-liner


[8/27/2022 9:32 PM] tux_linux
one more step isn't going to hurt you


[8/27/2022 9:41 PM] tux_linux
look, padding
```
// Button sizes
    ui->refreshBtn->setStyleSheet("padding: 25px;");
    ui->stopBtn->setStyleSheet("padding: 25px;");
    ui->logBtn->setStyleSheet("padding: 25px;");
```
and you don't need complicated setFixedHeight/Width methods

{Attachments}
/mnt/data/projects/git/conversations/media/padding-05B37.png


[8/27/2022 9:42 PM] szybet
well okay


[8/27/2022 9:42 PM] szybet
doesnt work


[8/27/2022 9:42 PM] szybet
IDK


[8/27/2022 9:42 PM] szybet
im leaving this


[8/27/2022 9:42 PM] szybet
only pdfs tho


[8/27/2022 9:42 PM] szybet
and only when im developing


[8/27/2022 9:42 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F8545.png


[8/27/2022 9:42 PM] szybet
this hurts my eyes


[8/27/2022 9:43 PM] tux_linux
yes, it will be done soon


[8/27/2022 9:43 PM] tux_linux
what is `mount | wc -l`?


[8/27/2022 9:44 PM] szybet
220?...


[8/27/2022 9:45 PM] tux_linux
you're 120 mounts higher than normal

{Reactions}
😂 

[8/27/2022 9:45 PM] tux_linux
what's `mount`?
you should reboot and try only my one-liner


[8/27/2022 9:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-E032D.txt


[8/27/2022 9:45 PM] szybet
😂 😂 😂


[8/27/2022 9:46 PM] tux_linux
well, ok, maybe user apps are eating that a bit


[8/27/2022 9:46 PM] szybet
i use every command in it, only with qt creator


[8/27/2022 9:46 PM] szybet
a bit


[8/27/2022 9:46 PM] szybet
why arent you umounting them


[8/27/2022 9:46 PM] tux_linux
i am unmounting it


[8/27/2022 9:46 PM] szybet
well not really


[8/27/2022 9:46 PM] tux_linux
the user apps?


[8/27/2022 9:47 PM] tux_linux
well, you can unmount them with `stop gui_apps`


[8/27/2022 9:47 PM] szybet
oh nevermind


[8/27/2022 9:47 PM] szybet
im blind


[8/27/2022 9:47 PM] szybet
i thought those are duplicated


[8/27/2022 9:47 PM] tux_linux
should never be that


[8/27/2022 9:49 PM] tux_linux
it works


[8/27/2022 9:50 PM] szybet
yay


[8/27/2022 9:50 PM] tux_linux
now only the encryption part remains to be fixed


[8/27/2022 9:51 PM] szybet
in my opinion not for 2.0


[8/27/2022 9:51 PM] tux_linux
no


[8/27/2022 9:51 PM] tux_linux
it's confusing


[8/27/2022 9:51 PM] tux_linux
plus, you can't enter a passphrase


[8/27/2022 9:51 PM] tux_linux
so it's useless


[8/27/2022 9:51 PM] tux_linux
you would never be able to connect to your network


[8/27/2022 9:51 PM] szybet
but... about what are you talking about


[8/27/2022 9:54 PM] tux_linux
this


[8/27/2022 9:55 PM] szybet
OH THIS


[8/27/2022 9:55 PM] szybet
yea i will look at it tommorow


[8/27/2022 9:55 PM] szybet
maybe today


[8/27/2022 9:55 PM] szybet
i want the library to look good at least


[8/27/2022 9:55 PM] tux_linux
you did not go around folders yet right?


[8/27/2022 9:56 PM] szybet
not yet


[8/27/2022 9:56 PM] szybet
i will soon


[8/27/2022 9:57 PM] szybet
it still doesnt work


[8/27/2022 9:57 PM] szybet
well its a developer only issue


[8/27/2022 9:57 PM] szybet
so i will leave it


[8/27/2022 9:57 PM] szybet
¯\_(ツ)_/¯


[8/27/2022 9:57 PM] tux_linux
but what's the issue exactly


[8/27/2022 9:59 PM] szybet
when i launch inkbox from qtcreator, and generate database, pdf covers dont exist


[8/27/2022 10:00 PM] tux_linux
and when you launch it from my one-liner with a fresh reboot


[8/27/2022 10:01 PM] szybet
i use your commands


[8/27/2022 10:01 PM] szybet
just qt creator launches a script


[8/27/2022 10:01 PM] szybet
and the script does scp, and launches the rest of the script on the kobo


[8/27/2022 10:01 PM] szybet
and then everything is the same


[8/27/2022 10:02 PM] tux_linux
it's not the same


[8/27/2022 10:02 PM] tux_linux
you launch `/usr/bin/inkbox.sh`


[8/27/2022 10:02 PM] szybet
i changed it


[8/27/2022 10:02 PM] tux_linux
not `chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh`


[8/27/2022 10:02 PM] tux_linux
ok


[8/27/2022 10:17 PM] szybet
you know there is a problem with the aspect ratio of diffrent covers?


[8/27/2022 10:25 PM] tux_linux
Yes


[8/27/2022 10:33 PM] tux_linux
I will change default tmpfs size in `/etc/init.d/gui_apps` for 32mb


[8/27/2022 10:33 PM] szybet
dont you think using imagemagick instead of convert would fix the problem?


[8/27/2022 10:33 PM] tux_linux
can't hurt


[8/27/2022 10:34 PM] tux_linux
it's - the same thing -


[8/27/2022 10:34 PM] szybet
sure


[8/27/2022 10:34 PM] szybet
really


[8/27/2022 10:34 PM] szybet
what


[8/27/2022 10:34 PM] tux_linux
change my mind?


[8/27/2022 10:34 PM] szybet
:|


[8/27/2022 10:34 PM] szybet
okay


[8/27/2022 10:54 PM] szybet (pinned)
well can you test one thing?
set this in explore_local_library.sh

```
coverSize="$(calculate ${viewWidth}/${icon_width_divider})x$(calculate ${viewHeight}/${icon_height_divider})!"
```


[8/27/2022 10:54 PM] szybet
note the ! at the end


[8/27/2022 10:54 PM] szybet
i readed a bit on the internet


[8/27/2022 10:54 PM] szybet
and it works for my


[8/27/2022 10:54 PM] szybet
but i dont have so many books to test


[8/27/2022 10:54 PM] szybet
only welll. the witcher series


[8/27/2022 10:55 PM] szybet
@tux-linux


[8/27/2022 10:55 PM] tux_linux
what is it about


[8/27/2022 10:55 PM] szybet
https://imagemagick.org/discourse-server/viewtopic.php?t=23799


[8/27/2022 10:55 PM] szybet
aspect ratio


[8/27/2022 10:56 PM] tux_linux
ok I will try


[8/27/2022 10:57 PM] szybet
add to todo list:  do something about 3 months old pull requests in gui bundle and emu ;)


[8/27/2022 11:00 PM] tux_linux
well, i do not agree with your gui-bundle pr


[8/27/2022 11:01 PM] szybet
because


[8/27/2022 11:01 PM] tux_linux
well, I am fine with what I have now


[8/27/2022 11:01 PM] szybet
im not


[8/27/2022 11:10 PM] tux_linux
can't we put OSM in maps?


[8/27/2022 11:10 PM] tux_linux
you didn't find a free tile server?


[8/27/2022 11:11 PM] szybet
no


[8/27/2022 11:11 PM] szybet
i dont see a need for it


[8/27/2022 11:11 PM] tux_linux
well, it's already better than supporting google


[8/27/2022 11:12 PM] szybet
we are not showing adds from google


[8/27/2022 11:12 PM] szybet
we are only using their server resources


[8/27/2022 11:12 PM] szybet
which i think is good

{Reactions}
🤯 

[8/27/2022 11:21 PM] szybet
i tested local library widget

apart from covers that are fixed, everything is working great. and looking great


[8/27/2022 11:21 PM] tux_linux
great, thanks


[8/27/2022 11:45 PM] szybet
add it to todo if you wont do it tonight

{Reactions}
👍 

[8/27/2022 11:51 PM] szybet
where is the ui file of invidual books in local library?


[8/27/2022 11:51 PM] tux_linux
there is not


[8/27/2022 11:51 PM] tux_linux
`bookArrayBtn[i]`


[8/27/2022 11:51 PM] tux_linux
what do you want to change


[8/27/2022 11:51 PM] szybet
im trying to understand


[8/27/2022 11:52 PM] tux_linux
what are you wondering


[8/27/2022 11:52 PM] szybet
those are 4 giant buttons?


[8/27/2022 11:52 PM] tux_linux
it's an array of giant buttons


[8/27/2022 11:52 PM] tux_linux
4 giant buttons


[8/27/2022 11:52 PM] tux_linux
yes


[8/27/2022 11:52 PM] szybet
🥴


[8/27/2022 11:52 PM] tux_linux
i is the button number


[8/27/2022 11:52 PM] szybet
wouldnt it be easier to  do this just as in user apps?


[8/27/2022 11:53 PM] tux_linux
it's already done


[8/27/2022 11:53 PM] tux_linux
so


[8/27/2022 11:53 PM] tux_linux
no


[8/27/2022 11:53 PM] szybet
well okay


[8/27/2022 11:53 PM] szybet
for the future, do that in that way


[8/27/2022 11:53 PM] szybet
it would be more flexible


[8/27/2022 11:53 PM] tux_linux
it is pretty flexible as it is now


[8/27/2022 11:54 PM] szybet
how do you add a button on the right with a convert option


[8/27/2022 11:54 PM] szybet
just an example


[8/27/2022 11:54 PM] tux_linux
why a convert option


[8/27/2022 11:54 PM] szybet
.


[8/27/2022 11:54 PM] tux_linux
there can be only one button


[8/27/2022 11:54 PM] tux_linux
it's designed like that


[8/27/2022 11:54 PM] tux_linux
and will stay like that


[8/27/2022 11:54 PM] szybet
well then this isint true:


[8/27/2022 11:54 PM] szybet
.


[8/27/2022 11:55 PM] szybet
yes, its pretty good


[8/27/2022 11:55 PM] szybet
just for the future, use ui files


[8/27/2022 11:55 PM] tux_linux
if you want to add an option, add it in bookOptionsDialog


[8/27/2022 11:55 PM] tux_linux
be careful to respect padding/style/ui


[8/27/2022 11:55 PM] tux_linux
and code style


[8/27/2022 11:55 PM] tux_linux
sorry, but reviewing your PRs gives me headaches


[8/27/2022 11:55 PM] szybet
i know i know i know just an example just an example just an example

{Reactions}
👍 

[8/27/2022 11:56 PM] szybet
about this, well im bad at designing UI


[8/27/2022 11:56 PM] szybet
its improving

{Reactions}
👍 

[8/27/2022 11:58 PM] szybet
i can agree sometimes its bad (**C**amel **C**ase), so sorry about that

in poland we have a tea called "melisa" which is really good for headaches and being calm

{Reactions}
👍 

[8/27/2022 11:59 PM] tux_linux
**c**amel**C**ase


[8/27/2022 11:59 PM] tux_linux
no problem


[8/27/2022 11:59 PM] tux_linux
i'm working on finalizing maps right now


[8/27/2022 11:59 PM] tux_linux
did some ui improvements


[8/27/2022 11:59 PM] tux_linux
it's a really good backend


[8/28/2022 12:00 AM] szybet
which ones?


[8/28/2022 12:01 AM] szybet
some of them may cause the screen to flicker, as i said yestarday


[8/28/2022 12:01 AM] tux_linux
nothing big


[8/28/2022 12:01 AM] tux_linux
I'm also planning to replace the loading icon


[8/28/2022 12:01 AM] tux_linux
it's so ugly


[8/28/2022 12:01 AM] szybet
excelent one. i may plan expanding it to android. But that in the future


[8/28/2022 12:04 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/maps-45F61.png


[8/28/2022 12:04 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/maps-52AC1.png


[8/28/2022 12:05 AM] szybet
i would still prever more space between buttons


[8/28/2022 12:05 AM] szybet
maybe i have big fingers? maybe the touch on the nia isint accurate?


[8/28/2022 12:08 AM] tux_linux
better?

{Attachments}
/mnt/data/projects/git/conversations/media/maps-1C7B7.png


[8/28/2022 12:08 AM] szybet
yea


[8/28/2022 12:20 AM] tux_linux
can you give me write access to your fork?


[8/28/2022 12:20 AM] tux_linux
or I can send a patch


[8/28/2022 12:21 AM] szybet
done


[8/28/2022 12:21 AM] szybet
sended an invite


[8/28/2022 12:21 AM] tux_linux
thanks


[8/28/2022 12:24 AM] tux_linux
https://github.com/Szybet/inkbox-maps/commit/28f2fff48dbbcb190d47c241152ce2655fbc1799

{Embed}
https://github.com/Szybet/inkbox-maps/commit/28f2fff48dbbcb190d47c241152ce2655fbc1799
Graphic design tweaks; prepare for user app packaging · Szybet/inkb...
/mnt/data/projects/git/conversations/media/28f2fff48dbbcb190d47c241152ce2655fbc1799-2F073


[8/28/2022 12:25 AM] szybet
so it will be an user app


[8/28/2022 12:25 AM] szybet
hmm


[8/28/2022 12:25 AM] tux_linux
yes


[8/28/2022 12:25 AM] tux_linux
because it's better given the complicated tmpfs it needs


[8/28/2022 12:26 AM] szybet
lightmaps are still getting removed?


[8/28/2022 12:27 AM] tux_linux
yes


[8/28/2022 12:27 AM] szybet
GOOD


[8/28/2022 12:27 AM] tux_linux
definetely


[8/28/2022 12:37 AM] tux_linux
icon

{Attachments}
/mnt/data/projects/git/conversations/media/Maps-A6847.png


[8/28/2022 12:37 AM] szybet
and "inkbox" at the top


[8/28/2022 12:38 AM] tux_linux
it's too much for an user app icon


[8/28/2022 12:38 AM] szybet
my idea for adding folders to local library widget: making a second `setupBooksList` which will look for folders and then for books in that directory


[8/28/2022 12:38 AM] szybet
and thats why we need a small logo for inkbox


[8/28/2022 12:39 AM] tux_linux
I named the application "Maps" only because it's a bit pointless to know it's for InkBox


[8/28/2022 12:39 AM] szybet
sure


[8/28/2022 6:49 AM] tux_linux
wifi framework has some random segfaults, probably needs more testing


[8/28/2022 6:53 AM] tux_linux
and that's Maps trying to access ESRI maps on an user app with mounted valid `/etc/ssl` directory

{Attachments}
/mnt/data/projects/git/conversations/media/message-A2127.txt


[8/28/2022 6:53 AM] tux_linux
on a Mini


[8/28/2022 6:55 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220828_045503321.NIGHT-5DE99.jpg


[8/28/2022 6:58 AM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/apps/Maps.zip
First package


[8/28/2022 7:05 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/pull/34/commits/4bb87485e0a50ed856931ae1a1d754552da7a3b2
https://github.com/Kobo-InkBox/rootfs/pull/3/commits/faa26552124e9f20a2490f1089ef1cf46290ca46
I also fixed some things in the GUI + added support for N705 for name truncating, etc.


[8/28/2022 7:25 AM] tux_linux
Oh, it's probably just the urandom device node missing


[8/28/2022 10:32 AM] szybet
tell me how to replocate them


[8/28/2022 11:09 AM] szybet
also, logs


[8/28/2022 11:09 AM] szybet
oh did i fix the only one scanned network bug?


[8/28/2022 11:50 AM] szybet
todo: vnc viewer - if server not found, return to gui... and dont freeze everything. i couldn't reboot, even service inkbox_gui restart


[8/28/2022 12:16 PM] szybet
the screen freezes after a while, touch still works. I cant kill vnc, or launch anything on the system


[8/28/2022 12:16 PM] szybet
complete freeze


[8/28/2022 12:16 PM] szybet
htop cant kill vnc


[8/28/2022 12:17 PM] szybet
we need to replace this with the rust one...


[8/28/2022 2:43 PM] tux_linux
No relevant logs
It just randomly happens


[8/28/2022 2:44 PM] tux_linux
Not updatable


[8/28/2022 2:44 PM] tux_linux
SIGKILL


[8/28/2022 2:48 PM] szybet
show logd when it happens.


[8/28/2022 2:48 PM] szybet
well replace it then


[8/28/2022 2:48 PM] szybet
nope, nothing


[8/28/2022 2:50 PM] tux_linux
Close logs dialog while it's almost finished connecting to a network


[8/28/2022 2:50 PM] szybet
if you cant replicate it, i cant fix it

alsp i doubt its random


[8/28/2022 2:50 PM] szybet
interesting


[8/28/2022 2:51 PM] tux_linux
But then the other time it doesn't happen


[8/28/2022 2:51 PM] szybet
i will try it


[8/28/2022 2:51 PM] tux_linux
Update your things before


[8/28/2022 2:54 PM] tux_linux
But that's not normal behavior
You should at least be able to kill it


[8/28/2022 3:39 PM] szybet
it works horrible anyway


[8/28/2022 4:00 PM] tux_linux
It works well
It handles every touch input in xorg


[8/28/2022 4:01 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220828-100058-5760D.png


[8/28/2022 4:01 PM] tux_linux
I think they listened to you


[8/28/2022 4:02 PM] szybet
well the proper way to do this is with roles


[8/28/2022 4:32 PM] szybet
okay i propably know whats going on


[8/28/2022 4:32 PM] szybet
👀


[8/28/2022 4:36 PM] tux_linux
Yes, what is it


[8/28/2022 4:36 PM] szybet
QTimer calls a function that doesnt exist


[8/28/2022 4:37 PM] szybet
and for some reason qtimer isint destroyed


[8/28/2022 4:44 PM] tux_linux
You should also call wait for finished (-1) when you call commands
Otherwise it waits only 30s


[8/28/2022 4:45 PM] szybet
what do you mean


[8/28/2022 5:05 PM] szybet
try this binary, fix for encryption

{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-2A0AE


[8/28/2022 5:47 PM] szybet
you broke get_wifi_information ibxd call

fixed, but you should know


[8/28/2022 5:49 PM] szybet
also the script


[8/28/2022 5:50 PM] szybet
or maybe thats my write cache...


[8/28/2022 5:56 PM] szybet
crap


[8/28/2022 5:58 PM] szybet
pushed the fixes for inkbox


[8/28/2022 6:39 PM] patchworkgarden
hmm?


[8/28/2022 6:39 PM] patchworkgarden
i do that in a lot of places


[8/28/2022 6:40 PM] szybet
yea, good them


[8/28/2022 6:40 PM] patchworkgarden
im not currently working on anything inkbox related atm tho


[8/28/2022 6:40 PM] szybet
sadly 😉


[8/28/2022 7:10 PM] tux_linux
Why


[8/28/2022 7:10 PM] szybet
👀


[8/28/2022 7:10 PM] tux_linux
Ok 👍


[8/28/2022 7:38 PM] szybet
@tux-linux 
is local library so flexible that its possible to show more than 4 items?
will some devices show more than 4?


[8/28/2022 7:39 PM] tux_linux
yes some do


[8/28/2022 7:39 PM] tux_linux
but only Libra


[8/28/2022 7:39 PM] tux_linux
because 7inch


[8/28/2022 7:39 PM] tux_linux
mini shows 3


[8/28/2022 7:39 PM] szybet
buttonsNumber determines that?


[8/28/2022 7:39 PM] tux_linux
yes


[8/28/2022 7:40 PM] tux_linux
why do you want to change it


[8/28/2022 7:40 PM] szybet
i only think how to design the folders


[8/28/2022 7:40 PM] szybet
knowing that it needs to be flexible... is good

{Reactions}
👍 

[8/28/2022 7:41 PM] szybet
you didnt added to the todo list the fix for aspect ratio


[8/28/2022 7:41 PM] szybet
can i have access to edit the todo list?...


[8/28/2022 7:41 PM] tux_linux
does ! work on your script for that?


[8/28/2022 7:42 PM] szybet
it works - but as i said i dont have many books, mainly the witcher series


[8/28/2022 7:42 PM] szybet
which all have similar aspect ratio


[8/28/2022 7:42 PM] tux_linux
gutenberg


[8/28/2022 7:42 PM] szybet
try it with your books


[8/28/2022 7:43 PM] szybet
still simply try it


[8/28/2022 7:43 PM] szybet
as for the pdfs for example... my inkbox is diffrent


[8/28/2022 7:43 PM] szybet
;p


[8/28/2022 7:44 PM] szybet
gutenberg fix isint in todo also


[8/28/2022 7:44 PM] szybet
well i will simply comment and edit my comment


[8/28/2022 7:44 PM] tux_linux
i don't know how to fix it


[8/28/2022 7:45 PM] tux_linux
you can't otherwise you'd have write access to the whole repo


[8/28/2022 7:45 PM] szybet
i dont even know the problem


[8/28/2022 7:45 PM] tux_linux
it hangs on syncing forever


[8/28/2022 7:45 PM] tux_linux
simply


[8/28/2022 7:45 PM] szybet
i can edit my comment for sure


[8/28/2022 7:45 PM] szybet
logs?...


[8/28/2022 7:46 PM] tux_linux
yes, that no problem


[8/28/2022 7:46 PM] tux_linux
no


[8/28/2022 7:46 PM] tux_linux
it doesn't say anything


[8/28/2022 7:46 PM] tux_linux
it happens everytime


[8/28/2022 7:46 PM] tux_linux
and everything is there for it to work


[8/28/2022 7:46 PM] szybet
so you need to know at which step it freezes


[8/28/2022 7:46 PM] tux_linux
but it doesn't


[8/28/2022 7:48 PM] tux_linux
gutenberg sync finishes
it writes true to a file in /tmp or similar and the GUI is supposed to read it
the gui doesn't freeze completely, the clock still displays the time, but even though it's supposed to read the file it doesn't


[8/28/2022 8:00 PM] szybet
are are files in their places


[8/28/2022 8:01 PM] tux_linux
yes
I'm trying it again now


[8/28/2022 8:01 PM] szybet
is the gui blocked when this is going on?


[8/28/2022 8:01 PM] szybet
like, blocked by the process


[8/28/2022 8:01 PM] tux_linux
well, yes


[8/28/2022 8:01 PM] tux_linux
but it's not frozen


[8/28/2022 8:02 PM] szybet
1. maybe the script never ends? check with ps
2. maybe this is the issue, make a non blocking version


[8/28/2022 8:02 PM] szybet
it is


[8/28/2022 8:02 PM] tux_linux
it's not
the clock moves time


[8/28/2022 8:02 PM] tux_linux
1. not related at all
2. probably not


[8/28/2022 8:03 PM] szybet
1. it is


[8/28/2022 8:03 PM] szybet
still


[8/28/2022 8:03 PM] szybet
still, make a non blocking version


[8/28/2022 8:03 PM] szybet
just as wifi works


[8/28/2022 8:03 PM] tux_linux
no, it waits for a file
look at the code
has nothing to do with the script process


[8/28/2022 8:04 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-21DC7.png


[8/28/2022 8:04 PM] szybet
what the hell is [&]()


[8/28/2022 8:04 PM] szybet
god please remove this


[8/28/2022 8:04 PM] szybet
look at wifi how its done, there is a similar mechanism


[8/28/2022 8:05 PM] szybet
memory address to this function


[8/28/2022 8:05 PM] szybet
who said it wont change


[8/28/2022 8:05 PM] tux_linux
thanks, appreciate your support


[8/28/2022 8:05 PM] szybet
im scared


[8/28/2022 8:05 PM] szybet
im really scared


[8/28/2022 8:05 PM] tux_linux
C++ compiler?


[8/28/2022 8:06 PM] tux_linux
I use it everywhere


[8/28/2022 8:06 PM] szybet
i dont trust him


[8/28/2022 8:06 PM] tux_linux
it's the only place where it breaks


[8/28/2022 8:07 PM] szybet
```
                    QTimer::singleShot(5000, this, SLOT(close()));
```


[8/28/2022 8:07 PM] szybet
you dont do delete later


[8/28/2022 8:07 PM] szybet
which can cause problems


[8/28/2022 8:08 PM] szybet
and had in wifi


[8/28/2022 8:08 PM] tux_linux
You can't say the clock isn't reliable

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CF227.png


[8/28/2022 8:08 PM] szybet
aaaaaaaaaaaaaaaaa


[8/28/2022 8:08 PM] tux_linux
Do you actually know about what you are talking about


[8/28/2022 8:08 PM] tux_linux
I do delete it


[8/28/2022 8:08 PM] szybet
where...


[8/28/2022 8:09 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-05198.png


[8/28/2022 8:09 PM] szybet
yes
i dont like the syntax, way and look of it


[8/28/2022 8:09 PM] szybet
well okay then


[8/28/2022 8:10 PM] szybet
why is there 5000 in single shot close


[8/28/2022 8:10 PM] tux_linux
to let the toast show


[8/28/2022 8:10 PM] tux_linux
and not kill it


[8/28/2022 8:11 PM] szybet
okay


[8/28/2022 8:11 PM] szybet
add logs to setupView?


[8/28/2022 8:11 PM] tux_linux
I already did that


[8/28/2022 8:11 PM] tux_linux
no luck


[8/28/2022 8:11 PM] szybet
and at which exact point it freezed


[8/28/2022 8:11 PM] tux_linux
```
if(QFile::exists("/inkbox/gutenbergSyncDone") == true) {
```


[8/28/2022 8:12 PM] tux_linux
it's supposed to read true in it, then close the "Sync in progress" toast


[8/28/2022 8:12 PM] tux_linux
then setup books view


[8/28/2022 8:13 PM] szybet
so it never thinks the file  exists


[8/28/2022 8:13 PM] szybet
i prever QFile("file").exists()


[8/28/2022 8:13 PM] szybet
does it still loop?


[8/28/2022 8:13 PM] szybet
like log() is still appearing


[8/28/2022 8:13 PM] tux_linux
yes it still loops, the clock updates itself


[8/28/2022 8:13 PM] tux_linux
i can look


[8/28/2022 8:13 PM] szybet
?


[8/28/2022 8:14 PM] szybet
log in the loop


[8/28/2022 8:16 PM] szybet
use the full path


[8/28/2022 8:16 PM] szybet
to be sure.


[8/28/2022 8:16 PM] tux_linux
?


[8/28/2022 8:16 PM] tux_linux
I use the full path


[8/28/2022 8:17 PM] szybet
oh ok


[8/28/2022 8:22 PM] tux_linux
encryption isn't fixed


[8/28/2022 8:23 PM] szybet
show files


[8/28/2022 8:24 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-CB8EA.txt


[8/28/2022 8:25 PM] szybet
"SentFromMyToaster-EXT"?


[8/28/2022 8:25 PM] szybet
is wrong


[8/28/2022 8:25 PM] tux_linux
yes


[8/28/2022 8:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-list-networks-C9CFF


[8/28/2022 8:28 PM] szybet
launch this from terminal


[8/28/2022 8:29 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-F8BF7.txt


[8/28/2022 8:30 PM] szybet
now it works?


[8/28/2022 8:30 PM] tux_linux
yes


[8/28/2022 8:30 PM] szybet
nfuasenhdfsuanhk


[8/28/2022 8:30 PM] tux_linux
what


[8/28/2022 8:30 PM] szybet
did you forgot to replace the binary at the right place


[8/28/2022 8:30 PM] szybet
before trying


[8/28/2022 8:30 PM] tux_linux
no


[8/28/2022 8:31 PM] tux_linux
i don't think so


[8/28/2022 8:31 PM] szybet
https://github.com/Szybet/inkbox-list-networks/commit/5c02e5e92118ba7a6d5fbf9ebceb18e60c2ad162

{Embed}
https://github.com/Szybet/inkbox-list-networks/commit/5c02e5e92118ba7a6d5fbf9ebceb18e60c2ad162
dont ask. i dont know. i dont care · Szybet/inkbox-list-networks@5c...
/mnt/data/projects/git/conversations/media/5c02e5e92118ba7a6d5fbf9ebceb18e60c2ad162-9E8CC


[8/28/2022 8:31 PM] szybet
i have no explanation for this


[8/28/2022 8:32 PM] szybet
there is a space too


[8/28/2022 8:32 PM] szybet
dsaknd


[8/28/2022 8:32 PM] tux_linux
now with timer 2000 -> 0 it displays "Scanning available networks" all the time


[8/28/2022 8:32 PM] szybet
impossible


[8/28/2022 8:35 PM] tux_linux
it was stuck in a scanning networks loop


[8/28/2022 8:36 PM] tux_linux
killed all processes and it's fine now


[8/28/2022 8:36 PM] tux_linux
you know you can put text in a checkbox?


[8/28/2022 8:36 PM] szybet
as i said


[8/28/2022 8:36 PM] tux_linux
it's not impossible, it happened


[8/28/2022 8:37 PM] tux_linux
that way even if the checkbox is small currently you can just click the text and it will enable it

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-6E3DA.png


[8/28/2022 8:37 PM] szybet
um okay...............


[8/28/2022 8:37 PM] szybet
if would just increase the checkbox size


[8/28/2022 8:37 PM] szybet
otherwise ipd settings are needed to be remade


[8/28/2022 8:38 PM] tux_linux
no, it's already done


[8/28/2022 8:38 PM] szybet
checkboxes there are still small


[8/28/2022 8:41 PM] tux_linux
on glo hd I can't connect to any encrypted networks, it hangs on checking passphrase (wpa_supplicant's fault) then when I try to stop it it enter the Scanning available networks loop and never gets the list


[8/28/2022 8:42 PM] szybet
the first issue:
look into check_passprase.sh ( idk the exact name ) i said that there will be issues with that


[8/28/2022 8:42 PM] szybet
look into /var/log/wifi.logs or smth like that there is everything


[8/28/2022 8:42 PM] szybet
get ibxd output


[8/28/2022 8:42 PM] szybet
the second issue
idk, fix the first one


[8/28/2022 8:44 PM] tux_linux
```
kobo:~# cat /var/log/wifi.log 
Setting up wpa_supplicant.conf for passphrase
Successfully initialized wpa_supplicant
rfkill: Cannot get wiphy information
wpa_cli v2.8
Copyright (c) 2004-2019, Jouni Malinen <j@w1.fi> and contributors

This software may be distributed under the terms of the BSD license.
See README for more details.


Selected interface 'wlan0'

Interactive mode

<3>CTRL-EVENT-SCAN-RESULTS
<3>CTRL-EVENT-NETWORK-NOT-FOUND
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>Trying to associate with 00:1c:f0:f5:fa:0e (SSID='SentFromMyToaster-EXT' freq=2412 MHz)
<3>Authentication with 00:1c:f0:f5:fa:0e timed out.
<3>CTRL-EVENT-DISCONNECTED bssid=00:1c:f0:f5:fa:0e reason=3 locally_generated=1
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>CTRL-EVENT-NETWORK-NOT-FOUND
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>Trying to associate with 00:1c:f0:f5:fa:0e (SSID='SentFromMyToaster-EXT' freq=2412 MHz)
<3>Authentication with 00:1c:f0:f5:fa:0e timed out.
<3>CTRL-EVENT-DISCONNECTED bssid=00:1c:f0:f5:fa:0e reason=3 locally_generated=1
<3>CTRL-EVENT-SSID-TEMP-DISABLED id=0 ssid="SentFromMyToaster-EXT" auth_failures=1 duration=10 reason=CONN_FAILED
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>CTRL-EVENT-SSID-REENABLED id=0 ssid="SentFromMyToaster-EXT"
<3>Trying to associate with 00:1c:f0:f5:fa:0e (SSID='SentFromMyToaster-EXT' freq=2412 MHz)
<3>Authentication with 00:1c:f0:f5:fa:0e timed out.
<3>CTRL-EVENT-DISCONNECTED bssid=00:1c:f0:f5:fa:0e reason=3 locally_generated=1
<3>CTRL-EVENT-SSID-TEMP-DISABLED id=0 ssid="SentFromMyToaster-EXT" auth_failures=2 duration=27 reason=CONN_FAILED
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>CTRL-EVENT-SSID-REENABLED id=0 ssid="SentFromMyToaster-EXT"
<3>Trying to associate with 00:1c:f0:f5:fa:0e (SSID='SentFromMyToaster-EXT' freq=2412 MHz)
```


[8/28/2022 8:45 PM] szybet
try more times to connect


[8/28/2022 8:45 PM] szybet
and see if it happens sometimes


[8/28/2022 8:45 PM] tux_linux
it's the third time


[8/28/2022 8:45 PM] szybet
if only sometimes, crap then


[8/28/2022 8:46 PM] szybet
```
wpa_cli disable_network 0 > /dev/null
wpa_cli enable_network 0 > /dev/null

watchForPassphrase

```


[8/28/2022 8:46 PM] szybet
this is  the issue


[8/28/2022 8:46 PM] tux_linux
why do you disable and enable network


[8/28/2022 8:46 PM] szybet
after enable_network there is a high chance that watchForPassphrase wont catch the log that it needs and it will loop


[8/28/2022 8:47 PM] szybet
because its too fast


[8/28/2022 8:47 PM] szybet
only to force wpa cli to output needed logs


[8/28/2022 8:48 PM] tux_linux
then what do I do


[8/28/2022 8:49 PM] szybet
improve the script


[8/28/2022 8:49 PM] szybet
its propably waiting 0.5 s before reading logs


[8/28/2022 8:49 PM] szybet
thats the issue


[8/28/2022 8:49 PM] szybet
i tryied make it better before, thats not on my skill level


[8/28/2022 8:49 PM] tux_linux
but wpa_supplicant can't verify the passphrase


[8/28/2022 8:49 PM] tux_linux
it's not even the script's problem


[8/28/2022 8:49 PM] tux_linux
did you see the log


[8/28/2022 8:50 PM] tux_linux
```
<3>CTRL-EVENT-SSID-TEMP-DISABLED id=0 ssid="SentFromMyToaster-EXT" auth_failures=2 duration=27 
```


[8/28/2022 8:50 PM] szybet
... oh


[8/28/2022 8:50 PM] szybet
so the password is wrong?


[8/28/2022 8:50 PM] szybet
or what


[8/28/2022 8:50 PM] tux_linux
no it's not wrong


[8/28/2022 8:50 PM] szybet
then whats the problem


[8/28/2022 8:50 PM] szybet
exactly


[8/28/2022 8:51 PM] tux_linux
i don't know


[8/28/2022 8:51 PM] tux_linux
maybe wpa_cli just doesn't work on glo hd


[8/28/2022 8:51 PM] szybet
it only reads logs which work


[8/28/2022 8:51 PM] szybet
look at /usr/local/bin/wifi/prepare_network.sh


[8/28/2022 8:56 PM] tux_linux
please change list_networks so that it launches wlarm_le only on n437


[8/28/2022 8:56 PM] szybet
what


[8/28/2022 8:57 PM] tux_linux
i don't want this mess to happen on other devices which actually support iwlist


[8/28/2022 8:57 PM] szybet
which mess


[8/28/2022 8:57 PM] tux_linux
well, I will probably need to dump check_passphrase for the glo hd


[8/28/2022 8:57 PM] szybet
this doesnt have anything to do with list networks


[8/28/2022 8:57 PM] tux_linux
oh


[8/28/2022 8:58 PM] szybet
modular


[8/28/2022 8:58 PM] szybet
independent


[8/28/2022 8:58 PM] tux_linux
but it still launches wlarm_le escanresults


[8/28/2022 8:58 PM] szybet
yes


[8/28/2022 8:58 PM] szybet
and?


[8/28/2022 8:58 PM] tux_linux
which causes problems


[8/28/2022 8:58 PM] tux_linux
and hangs


[8/28/2022 8:58 PM] szybet
because?


[8/28/2022 8:58 PM] tux_linux
i don't know


[8/28/2022 8:58 PM] szybet
what has scan to do with wpa passprase


[8/28/2022 8:58 PM] tux_linux
wlarm_le hanging is the cause of scanning networks on wi-fi status bug


[8/28/2022 8:58 PM] tux_linux
it's the root of all of it


[8/28/2022 8:59 PM] szybet
why does it hang


[8/28/2022 8:59 PM] tux_linux
it usually hangs when the adapter is not up or it's put down while it's doing it


[8/28/2022 9:01 PM] szybet
write a shell wrapper for this


[8/28/2022 9:01 PM] szybet
i can launch it from lister intead of wlarm le


[8/28/2022 9:01 PM] tux_linux
it hangs also when checking wifi passphrase and aborting while it's doing it


[8/28/2022 9:01 PM] szybet
god


[8/28/2022 9:01 PM] szybet
;_ ;


[8/28/2022 9:02 PM] szybet
what hangs


[8/28/2022 9:02 PM] szybet
the adapter?


[8/28/2022 9:02 PM] tux_linux
so


[8/28/2022 9:02 PM] tux_linux
probably


[8/28/2022 9:02 PM] tux_linux
it's not clear


[8/28/2022 9:02 PM] tux_linux
wlarm_le and dhd.ko has always been a mess


[8/28/2022 9:04 PM] szybet
done


[8/28/2022 9:04 PM] tux_linux
good


[8/28/2022 9:04 PM] tux_linux
thanks


[8/28/2022 9:05 PM] szybet
about this issue: me sending  you fixes will take more time for us both, i think its better f you simply do it yourself, i can help obviously


[8/28/2022 9:05 PM] tux_linux
yes


[8/28/2022 9:05 PM] szybet
some checks in scripts that check if something other is going on and wait should do the job


[8/28/2022 9:05 PM] szybet
also more delays


[8/28/2022 9:05 PM] szybet
etc


[8/28/2022 9:05 PM] szybet
a signle script should do that


[8/28/2022 9:06 PM] tux_linux
```
diff --git a/usr/local/bin/wifi/list_networks b/usr/local/bin/wifi/list_networks
index ef7c075..db39082 100755
Binary files a/usr/local/bin/wifi/list_networks and b/usr/local/bin/wifi/list_networks differ
diff --git a/usr/local/bin/wifi/prepare_network.sh b/usr/local/bin/wifi/prepare_network.sh
index 65760fc..c9e3ec9 100755
--- a/usr/local/bin/wifi/prepare_network.sh
+++ b/usr/local/bin/wifi/prepare_network.sh
@@ -55,7 +55,12 @@ if [ "${PASSPHRASE}" = "NONE" ]; then
        quit 0
 else
        rm -f /run/correct_wifi_passphrase
-       timeout 120s /usr/local/bin/wifi/check_wifi_passphrase.sh
+       if [ "${DEVICE}" != "n437" ]; then
+               timeout 120s /usr/local/bin/wifi/check_wifi_passphrase.sh
+       else
+               # Skip passphrase check for Glo HD because dhd.ko is a mess
+               echo "true" > /run/correct_wifi_passphrase
+       fi
 
        if test -f "/run/correct_wifi_passphrase"; then
                echo "/run/correct_wifi_passphrase exists."
```


[8/28/2022 9:06 PM] szybet
yes something like that

{Reactions}
👍 

[8/28/2022 9:30 PM] tux_linux
how did you make your release binary weigh 150k?


[8/28/2022 9:30 PM] tux_linux
mine is 850k


[8/28/2022 9:30 PM] tux_linux
I did add `--release`


[8/28/2022 9:30 PM] szybet
look at ./deploy

{Reactions}
👍 

[8/28/2022 9:30 PM] szybet
https://tenor.com/view/magical-magic-gif-13543499

{Embed}
https://tenor.com/view/magical-magic-gif-13543499
/mnt/data/projects/git/conversations/media/magical-magic-0F106.png


[8/28/2022 9:37 PM] tux_linux
`error: toolchain 'nightly-x86_64-unknown-linux-gnu' is not installed`


[8/28/2022 9:37 PM] tux_linux
of course I did that
`rustup toolchain install nightly-armv7-unknown-linux-gnueabihf`
but then it installed an arm toolchain


[8/28/2022 9:37 PM] tux_linux
not x86_64


[8/28/2022 9:37 PM] szybet
why do you want an x86?...


[8/28/2022 9:38 PM] tux_linux
i mean, it installed arm binaries


[8/28/2022 9:38 PM] tux_linux
i want x86_64->arm


[8/28/2022 9:38 PM] tux_linux
not arm->arm


[8/28/2022 9:38 PM] tux_linux
it still says that


[8/28/2022 9:41 PM] szybet
rustup toolchain install nightly-x86_64-unknown-linux-gnu?


[8/28/2022 9:41 PM] szybet
i dont understand the problem


[8/28/2022 9:49 PM] tux_linux
ok, got it


[8/28/2022 9:49 PM] tux_linux
but it's 557K


[8/28/2022 9:49 PM] szybet
npx?


[8/28/2022 9:49 PM] tux_linux
ok, will try it


[8/28/2022 9:50 PM] tux_linux
i'm doubtful about upx


[8/28/2022 9:50 PM] szybet
nah


[8/28/2022 10:08 PM] tux_linux
are you turning down the wi-fi interface elsewhere apart of toggle.sh?


[8/28/2022 10:09 PM] szybet
everything is pointing to toggle,sh, only connect_to_network.sh not


[8/28/2022 10:10 PM] tux_linux
are you turning off the interface after disconnecting from a network?


[8/28/2022 10:10 PM] szybet
no


[8/28/2022 10:10 PM] tux_linux
though that is what happens


[8/28/2022 10:11 PM] szybet
leave it like that


[8/28/2022 10:11 PM] szybet
for most devices


[8/28/2022 10:11 PM] tux_linux
this is what causes the wlarm_le hang


[8/28/2022 10:11 PM] szybet
turning off an on the interface takes the most time


[8/28/2022 10:20 PM] tux_linux
you most probably are

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4499F.png


[8/28/2022 10:20 PM] szybet
nope


[8/28/2022 10:20 PM] tux_linux
then why is it going down every time


[8/28/2022 10:21 PM] szybet
i described it somewhere: UP and DOWN isint reliable, almost random


[8/28/2022 10:21 PM] szybet
1. if i did ifconfig eth0 down it would take more time
2. then why do you have problems if its turning it off?


[8/28/2022 10:22 PM] tux_linux
it's turning off while wlarm_le is scanning


[8/28/2022 10:22 PM] tux_linux
or a bit before


[8/28/2022 10:22 PM] tux_linux
anyways, it hangs it


[8/28/2022 10:23 PM] szybet
anyways, it works on the nia


[8/28/2022 10:23 PM] szybet
and i cant really help with other devices


[8/28/2022 10:23 PM] szybet
dont break things


[8/28/2022 10:24 PM] szybet
where the heck are you setting `nextPageBtn` text


[8/28/2022 10:24 PM] tux_linux
where


[8/28/2022 10:25 PM] szybet
localLibraryWidget


[8/28/2022 10:26 PM] tux_linux
`pageNumberLabel`


[8/28/2022 10:27 PM] tux_linux
`setupBooksList`


[8/28/2022 10:27 PM] szybet
oh


[8/28/2022 10:27 PM] szybet
its one label


[8/28/2022 10:27 PM] szybet
im blind


[8/28/2022 10:28 PM] tux_linux
```
dormant
dormant
dormant
down
down
```
when getting ip address (which always fails too), then stopping it directly goes to state down


[8/28/2022 10:29 PM] szybet
this


[8/28/2022 10:29 PM] szybet
dormant is up but not exactly


[8/28/2022 10:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/0001-Fix-Glo-HD-wlarm_le-hang-7824D.patch


[8/28/2022 10:45 PM] tux_linux
`git am 0001-Fix-Glo-HD-wlarm_le-hang.patch`


[8/28/2022 10:45 PM] szybet
you dont have access to the repo?


[8/28/2022 10:45 PM] tux_linux
i don't think so?


[8/28/2022 10:45 PM] tux_linux
nope


[8/28/2022 10:46 PM] szybet
now you have


[8/28/2022 10:46 PM] tux_linux
ok thanks


[8/28/2022 10:46 PM] szybet
its a component of your project


[8/28/2022 10:46 PM] szybet
obviously you should have permissions

{Reactions}
👍 

[8/28/2022 10:52 PM] szybet
```
        // Prevent segmentation fault if a book was the last of its page
        if(currentPageNumber > pagesNumber) {
            chooseBookListSetup(currentPageNumber - 1);
        }
```


[8/28/2022 10:52 PM] szybet
i need


[8/28/2022 10:52 PM] szybet
explanation


[8/28/2022 10:53 PM] tux_linux
if a book is deleted and it was on page 5


[8/28/2022 10:53 PM] tux_linux
and there was only one book on page 5


[8/28/2022 10:53 PM] tux_linux
then there would be a segfault if we tried to access page 5 which doesn't exist anymore


[8/28/2022 10:53 PM] tux_linux
because the book has been deleted


[8/28/2022 10:58 PM] szybet
deleting exists...


[8/28/2022 10:59 PM] tux_linux
yes?


[8/28/2022 10:59 PM] szybet
well this will be more complicated than i hoped


[8/28/2022 10:59 PM] tux_linux
there's a reason why I didn't do folders


[8/28/2022 11:00 PM] szybet
well this will be more complicated than i hoped *to attach this functionality to the existing code of the library*. Ekhem modularity

{Reactions}
👍 

[8/28/2022 11:15 PM] szybet
you can choose an folder icon that will be everywhere shown


[8/28/2022 11:15 PM] szybet
and will be the size of book covers


[8/28/2022 11:16 PM] szybet
also a config file to add this option


[8/28/2022 11:16 PM] tux_linux
add what option


[8/28/2022 11:16 PM] szybet
***Folders in local library***


[8/28/2022 11:16 PM] tux_linux
why


[8/28/2022 11:16 PM] tux_linux
why not just make it default


[8/28/2022 11:16 PM] szybet
🤨


[8/28/2022 11:17 PM] szybet
you argued a lot about it


[8/28/2022 11:17 PM] tux_linux
yes


[8/28/2022 11:17 PM] tux_linux
well, it depends on how good is your implementation


[8/28/2022 11:17 PM] szybet
so i wanted an option at least


[8/28/2022 11:17 PM] szybet
and you agreed


[8/28/2022 11:17 PM] tux_linux
i didn't do it because it would have done too much brain damage


[8/28/2022 11:17 PM] tux_linux
like, way too much


[8/28/2022 11:17 PM] szybet
it will be as good so i will use it in my free time


[8/28/2022 11:18 PM] szybet
the initial design with fixed sized vector was bad


[8/28/2022 11:18 PM] szybet
doing it like user apps, based on path would be easier


[8/28/2022 11:18 PM] szybet
but whatever


[8/28/2022 11:18 PM] szybet
and no, make it an option

{Reactions}
👍 

[8/28/2022 11:18 PM] tux_linux
vector isn't fixed sized


[8/28/2022 11:18 PM] szybet
4, 5 and 7 :)


[8/28/2022 11:19 PM] tux_linux
what?


[8/28/2022 11:19 PM] tux_linux
where


[8/28/2022 11:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-8DB02.png


[8/28/2022 11:19 PM] szybet
i mean this


[8/28/2022 11:19 PM] tux_linux
that isn't fixed size


[8/28/2022 11:20 PM] tux_linux
using scrollbars would not have been great


[8/28/2022 11:20 PM] tux_linux
and would also have caused a way too high RAM usage


[8/28/2022 11:20 PM] szybet
thats not what i mean

doing everything dynamically, splitting it as in `userapp.cpp` would be easier


[8/28/2022 11:20 PM] tux_linux
everything is already done dynamically


[8/28/2022 11:21 PM] tux_linux
it there are just 3 books, it will only display 3 buttons


[8/28/2022 11:21 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/folder-26088.png


[8/28/2022 11:21 PM] tux_linux
512x512


[8/28/2022 11:21 PM] szybet
i know ugh, i cant explain


[8/28/2022 11:21 PM] szybet
will it look good at the size of book covers


[8/28/2022 11:21 PM] szybet
in width


[8/28/2022 11:21 PM] tux_linux
`Qt::SmoothTransformation`


[8/28/2022 11:21 PM] tux_linux
well, it can be a small square inside a rectangle


[8/28/2022 11:21 PM] szybet
we will see


[8/28/2022 11:22 PM] tux_linux
or override the default size with a multiplier


[8/28/2022 11:27 PM] tux_linux
wi-fi on glo hd is going to make me turn crazy
it works when connecting to open networks
but never on encrypted ones


[8/28/2022 11:32 PM] szybet
i have no explanation


[8/28/2022 11:32 PM] szybet
maybe try bare commands


[8/28/2022 11:32 PM] szybet
without the scripts


[8/28/2022 11:32 PM] szybet
can you accept the pull request in inkbox? i want to push some localLibraryWidget work


[8/28/2022 11:32 PM] szybet
i treat github as a remote backup soo


[8/28/2022 11:33 PM] szybet
for further work or smth, i will send patches


[8/28/2022 11:33 PM] szybet
i would want to push it now so @tux-linux


[8/28/2022 11:42 PM] szybet
still waiting


[8/28/2022 11:42 PM] tux_linux
It's ready?


[8/28/2022 11:43 PM] szybet
.


[8/28/2022 11:43 PM] szybet
i have done some work


[8/28/2022 11:43 PM] szybet
look at wifi: there are amny commits, most of them are per day


[8/28/2022 11:43 PM] tux_linux
you have pushed to your fork already?


[8/28/2022 11:43 PM] szybet
no


[8/28/2022 11:43 PM] szybet
im waiting


[8/28/2022 11:43 PM] tux_linux
wait i'll push my changes


[8/28/2022 11:44 PM] szybet
and accept the pull request


[8/28/2022 11:44 PM] tux_linux
why accept the pull request


[8/28/2022 11:44 PM] szybet
i doubt the gui will change at this point


[8/28/2022 11:44 PM] szybet
i want to save my library work


[8/28/2022 11:44 PM] szybet
on github


[8/28/2022 11:44 PM] szybet
but there is this pull request, if i push it will go with it which we dont want


[8/28/2022 11:46 PM] tux_linux
done


[8/28/2022 11:47 PM] szybet
thanks

{Reactions}
👍 

[8/28/2022 11:50 PM] tux_linux
you... did not copy this entire block of code

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-85660.png


[8/28/2022 11:50 PM] tux_linux
and you said you wanted it to be mOduLaR


[8/28/2022 11:53 PM] szybet
i coppied and i will mofify it

give me time


[8/28/2022 11:53 PM] tux_linux
Why not make a function


[8/28/2022 11:54 PM] szybet
i omly wanted to see if it will completly segfault with my idea...


[8/28/2022 11:56 PM] tux_linux
Ok fine


[8/28/2022 11:56 PM] tux_linux
But make a function soon


[8/29/2022 11:18 PM] szybet
@tux-linux  is book id reliable, as what im understanding, to save to a vector and use later for showing actuall books? is book id the same as jsonarray.at()?


[8/29/2022 11:20 PM] tux_linux
you should use bookpath


[8/29/2022 11:21 PM] szybet
i will


[8/29/2022 11:21 PM] tux_linux
bookid is ok in local library but is prone to frequent changes when adding a new book


[8/29/2022 11:21 PM] tux_linux
it depends what you want to do


[8/29/2022 11:21 PM] szybet
yes, but i dont want to save into memory the whole path, so id would be fine?


[8/29/2022 11:21 PM] szybet
isint the database rebuilded every time?


[8/29/2022 11:21 PM] tux_linux
yes


[8/29/2022 11:22 PM] tux_linux
every time you add/remove a book


[8/29/2022 11:22 PM] szybet
this isint


[8/29/2022 11:22 PM] szybet
time


[8/29/2022 11:22 PM] szybet
efficient


[8/29/2022 11:22 PM] szybet
but in most cases this will be over usb


[8/29/2022 11:22 PM] szybet
and then the user can wait


[8/29/2022 11:22 PM] szybet
i only worrie about removing books from gui


[8/29/2022 11:22 PM] tux_linux
it's the least messy way to deal with it


[8/29/2022 11:23 PM] szybet
if i was designing this i would simply list all books in the current dir and show them


[8/29/2022 11:23 PM] szybet
and then maybe reload


[8/29/2022 11:23 PM] szybet
or maybe the database complicity is something for i dont understand


[8/29/2022 11:24 PM] szybet
where are you storing book progress?


[8/29/2022 11:24 PM] tux_linux
page number?


[8/29/2022 11:24 PM] szybet
yes


[8/29/2022 11:25 PM] tux_linux
`/data/onboard/.<book sha256>/A-page_number/config`


[8/29/2022 11:25 PM] tux_linux
i'm only storing the page number


[8/29/2022 11:25 PM] tux_linux
not the total


[8/29/2022 11:26 PM] szybet
ugh


[8/29/2022 11:27 PM] szybet
wouldnt integrating this into the database be great>


[8/29/2022 11:27 PM] tux_linux
well, it's already with local reading settings


[8/29/2022 11:27 PM] tux_linux
so it's fine there


[8/29/2022 11:28 PM] szybet
i still dont know what this is


[8/29/2022 11:28 PM] tux_linux
`/data/onboard/.sha256......./` also stores brightness, dark mode setting, alignment, font, etc.


[8/29/2022 11:28 PM] szybet
i would want this in the database


[8/29/2022 11:28 PM] szybet
calculating sha256 of every book at launch etc... ist horribly time costly


[8/29/2022 11:28 PM] szybet
why not sha 1 as git?


[8/29/2022 11:29 PM] tux_linux
no collisions


[8/29/2022 11:30 PM] tux_linux
you would need to rewrite half of the reader framework


[8/29/2022 11:30 PM] tux_linux
besides, it's working


[8/29/2022 11:30 PM] szybet
https://www.google.com/search?q=linux+kernel+git+collisions+because+of++sha+1


[8/29/2022 11:30 PM] szybet
🥴 ...


[8/29/2022 11:30 PM] szybet
well


[8/29/2022 11:31 PM] szybet
i always wondered why it takes soo long


[8/29/2022 11:31 PM] tux_linux
it's not because of that


[8/29/2022 11:31 PM] tux_linux
it's mutool that parses the epub into html


[8/29/2022 11:31 PM] tux_linux
that takes time but you profit from it afterwards


[8/29/2022 11:31 PM] tux_linux
armv7 is pretty fast at sha256


[8/29/2022 11:31 PM] tux_linux
maybe because of NEON


[8/29/2022 11:32 PM] szybet
```
kobo:/data/onboard# time sha256sum Andrzej\ Sapkowski\ -\ Sezon\ burz.pdf 
be8ab430b18013c9937a7a3c634a9c3089e15a407d5a126d6d799297e337e348  Andrzej Sapkowski - Sezon burz.pdf
0.11user 0.00system 0:00.38elapsed 30%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+0minor)pagefaults 0swaps
kobo:/data/onboard# 

```


[8/29/2022 11:32 PM] szybet
yea you are right


[8/29/2022 11:32 PM] szybet
suprisingly


[8/29/2022 11:33 PM] tux_linux
unless your books weighs 50M it isn't going to be a problem


[8/29/2022 11:33 PM] tux_linux
but even the rootfs weighs 50M
sha256sum'ming it is not that long


[8/29/2022 11:33 PM] tux_linux
maybe 8s at worst


[8/29/2022 11:34 PM] tux_linux
iirc


[8/29/2022 11:34 PM] szybet
if i ever want to create reading statistics


[8/29/2022 11:34 PM] szybet
i would want everything at one place


[8/29/2022 11:35 PM] szybet
if you dont want to expand the library database in the future, i dont see a reason it exists at all. it has massive potential


[8/29/2022 11:35 PM] szybet
storing periods of when you readed / date time etc


[8/29/2022 11:35 PM] tux_linux
i will in the future


[8/29/2022 11:36 PM] szybet
also the ereader will waste space after some time with those firs


[8/29/2022 11:36 PM] tux_linux
as it would with database


[8/29/2022 11:37 PM] szybet
no, you delete entries in the database


[8/29/2022 11:37 PM] tux_linux
as I delete the folder when the book is deleted


[8/29/2022 11:37 PM] szybet
uh ok


[8/29/2022 11:38 PM] tux_linux
btw this works on kobo
https://github.com/tpruvot/cpuminer-multi

{Embed}
https://github.com/tpruvot/cpuminer-multi
GitHub - tpruvot/cpuminer-multi: crypto cpuminer (linux + windows)
crypto cpuminer (linux + windows). Contribute to tpruvot/cpuminer-multi development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/cpuminer-multi-1CBDA


[8/29/2022 11:38 PM] tux_linux
I can mine garlicoin


[8/29/2022 11:38 PM] szybet
still, its a bit of a mess


[8/29/2022 11:38 PM] szybet
are you willing to redesign it in the fiuture


[8/29/2022 11:38 PM] szybet
also, writing only part of the file, not the full QString?


[8/29/2022 11:38 PM] szybet
*speed*


[8/29/2022 11:39 PM] tux_linux
oh actually I don't


[8/29/2022 11:39 PM] tux_linux
but I added an option to do it separately


[8/29/2022 11:39 PM] tux_linux
i will combine the two


[8/29/2022 11:39 PM] tux_linux
if the book is deleted


[8/29/2022 11:39 PM] szybet
in the 3d printing community is this popular phrase:
"We stopped asking us if we can, now we need to start asking if we should"
so well


[8/29/2022 11:40 PM] szybet
i want to know this


[8/29/2022 11:40 PM] tux_linux
?


[8/29/2022 11:40 PM] szybet
partial file updates


[8/29/2022 11:40 PM] szybet
right?


[8/29/2022 11:40 PM] tux_linux
what files


[8/29/2022 11:41 PM] szybet
updating the database


[8/29/2022 11:41 PM] szybet
so no need to regenerate it


[8/29/2022 11:41 PM] tux_linux
it's compressed base64


[8/29/2022 11:41 PM] tux_linux
how do you want to partial update it


[8/29/2022 11:42 PM] szybet
UGH


[8/29/2022 11:42 PM] szybet
crap


[8/29/2022 11:42 PM] szybet
well anyway
will you in the future combine the database and the sha file?


[8/29/2022 11:42 PM] szybet
because if one exist the second one doesnt need to


[8/29/2022 11:43 PM] tux_linux
probably not
because it would require an entire rewrite of settings, half rewrite of reader and local reading settings would probably not work well


[8/29/2022 11:43 PM] szybet
ugh


[8/29/2022 11:43 PM] tux_linux
I can put the page number only in the database, that is doable


[8/29/2022 11:43 PM] tux_linux
but the rest it's better not to touch it


[8/29/2022 11:44 PM] szybet
so all statistics will go to sha dirs


[8/29/2022 11:44 PM] szybet
well okay then


[8/29/2022 11:44 PM] szybet
its a bit of a mess for me


[8/29/2022 11:44 PM] tux_linux
what statistics


[8/29/2022 11:44 PM] szybet
but i can live with it


[8/29/2022 11:44 PM] tux_linux
don't work on statistics now


[8/29/2022 11:45 PM] szybet
"you readed this book from 2 am to 3 pm at friday and here is a chart compared to your whole week


[8/29/2022 11:45 PM] szybet
for example


[8/29/2022 11:45 PM] tux_linux
other statistics (i.e. new things) will go in the database + page number/total
but settings will stay there


[8/29/2022 11:45 PM] Deleted User
how many hours you spent reading a certain book for example


[8/29/2022 11:45 PM] Deleted User
for all time


[8/29/2022 11:45 PM] Deleted User
?


[8/29/2022 11:45 PM] szybet
something like that, yes


[8/29/2022 11:45 PM] Deleted User
average mins per page stuff like that


[8/29/2022 11:46 PM] szybet
maybe


[8/29/2022 11:47 PM] szybet
i will think about it


[8/29/2022 11:47 PM] tux_linux
no, they *will* go there


[8/29/2022 11:47 PM] tux_linux
work on folders please


[8/29/2022 11:47 PM] szybet
*i will think about it*


[8/29/2022 11:47 PM] tux_linux
we already have too many things to do for 2.0 release


[8/29/2022 11:47 PM] Deleted User
2.0 👀


[8/29/2022 11:48 PM] tux_linux
but what is the other option?


[8/29/2022 11:48 PM] szybet
im only planning for the future


[8/29/2022 11:48 PM] szybet
i will think about it, idk


[8/29/2022 11:48 PM] szybet
yea, i need to finish my stuff and solder the niAudio board


[8/29/2022 11:48 PM] szybet
and audio then


[8/29/2022 11:49 PM] tux_linux
you want to add audio in 2.0?


[8/29/2022 11:49 PM] szybet
nope


[8/29/2022 11:49 PM] szybet
no chance


[8/29/2022 11:49 PM] tux_linux
ok oof


[8/30/2022 1:19 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D6A9F.png


[8/30/2022 1:19 AM] szybet
why -1


[8/30/2022 1:21 AM] tux_linux
math


[8/30/2022 1:22 AM] tux_linux
probably because of no buttons have an id of 0 but the id in the database is 0


[8/30/2022 1:22 AM] tux_linux
so it counts it then substracts 1


[8/30/2022 1:24 AM] szybet
Vectors start at 0
Buttons are in the vector


[8/30/2022 1:29 AM] Deleted User
is thsi rust


[8/30/2022 1:49 AM] tux_linux
C++


[8/30/2022 1:51 AM] Deleted User
ah


[8/30/2022 5:47 PM] szybet
this needs to be the same size as the cover ( because cover make up the size of the library ). It can be an transparent png, but the thing is how to implement this. provide 4 pngs and choose one? scale it with imagemagick? start to think about it


[8/31/2022 12:18 AM] szybet
```qt
void localLibraryWidget::calcIndexForPage(int pageNumber) {
    if(pageNumber == firstPageForBooks + 1) {
        log("Variable firstPageForBooks is 0", className);
        bookIndexVector = 0;
        return void();
    }

    if(pageNumber == firstPageForBooks + 2) {
        log("The page is just after firstPageForBooks", className);
        bookIndexVector = buttonsNumber - lastPageFolderCount;
        return void();
    }
    else if(pageNumber > firstPageForBooks + 2) {
        bookIndexVector = buttonsNumber - lastPageFolderCount;
        int pageTillGoal = 1;
        int pageDiffrence = pageNumber - (firstPageForBooks + 2);
        log("Variable firstPageForBooks is: " + QString::number(firstPageForBooks), className);
        log("Variable pageDiffrence is: " + QString::number(pageDiffrence), className);
        if(pageDiffrence != 0) {
            while(pageTillGoal != pageDiffrence) {
                log("Looping for pageTillGoal");
                bookIndexVector = bookIndexVector + buttonsNumber;
                pageTillGoal = pageTillGoal + 1;
            }
        }
        bookIndexVector = bookIndexVector + buttonsNumber;
        log("Calculated bookIndexVector is: " + QString::number(bookIndexVector), className);
    }
    else {
        log("Variable pageNumber isin't Higher than firstPageForBooks", className);
        bookIndexVector = 0;
    }
}
```
This took too much time to figure out, im really bad at algorithms


[8/31/2022 12:18 AM] szybet
🥴 ☹️


[8/31/2022 12:42 AM] tux_linux
the whole localLibraryWidget took too much time to figure out


[8/31/2022 2:59 AM] tux_linux
https://github.com/Qalculate
this can replace calculator

{Embed}
https://github.com/Qalculate
Qalculate!
Multi-purpose cross-platform desktop calculator with customizable functions, units, arbitrary precision, symbolic calculations, etc. (library, CLI and GUI) - Qalculate!
/mnt/data/projects/git/conversations/media/19704127-8EF74


[8/31/2022 7:09 AM] szybet
Qt (>= 5.6)


[8/31/2022 7:09 AM] szybet
maybe


[8/31/2022 7:09 AM] szybet
most propably


[8/31/2022 7:09 AM] szybet
navit needs 5.3 and already had problems with glibc


[8/31/2022 2:21 PM] tux_linux
Wi-Fi works oob


[8/31/2022 2:21 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220831_122118201-295E6.jpg


[8/31/2022 2:22 PM] szybet
on libra?


[8/31/2022 2:22 PM] tux_linux
yes, but a 'not connected to internet, but connected to a network' icon should be handled


[8/31/2022 2:22 PM] szybet
no


[8/31/2022 2:23 PM] szybet
as i said


[8/31/2022 2:23 PM] szybet
launch a dialog that will not alloe the user to launch maps without wifi


[8/31/2022 2:23 PM] szybet
oh you are talking about something other


[8/31/2022 2:25 PM] szybet
this would be heavy on performance
i will not implement pinging every 20s again. just no.
the user has everything in logs, there is a ping test at the end


[8/31/2022 2:25 PM] szybet
( in fancy logs)


[8/31/2022 2:25 PM] szybet
so no


[8/31/2022 2:26 PM] tux_linux
We can ping with qnetwork maybe


[8/31/2022 2:26 PM] szybet
JUST NO


[8/31/2022 2:26 PM] szybet
:(


[8/31/2022 2:26 PM] szybet
ugh


[8/31/2022 2:26 PM] szybet
if you really want, add this as an option  in settings


[8/31/2022 2:27 PM] szybet
and touch only mainwindow to do that


[8/31/2022 2:28 PM] szybet
+ there is already too much to do 
+ wifi is already *good*


[8/31/2022 2:37 PM] tux_linux
Android does it


[8/31/2022 2:37 PM] tux_linux
I did it before
Didn't hurt


[8/31/2022 2:39 PM] szybet
it hurts me


[8/31/2022 2:40 PM] szybet
as an option, sure


[8/31/2022 2:52 PM] tux_linux
ipd not working on Libra, not even fifo sleep


[8/31/2022 2:52 PM] tux_linux
Will debug later


[8/31/2022 2:58 PM] szybet
l o g s


[8/31/2022 5:53 PM] tux_linux
Well, was going to school, didn't have time


[8/31/2022 7:35 PM] szybet
pseudo


[8/31/2022 7:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-37776.png


[8/31/2022 7:35 PM] szybet
huh?


[8/31/2022 7:38 PM] tux_linux
It's the button number


[8/31/2022 7:38 PM] tux_linux
Simply


[8/31/2022 7:38 PM] tux_linux
Might be 0-3 instead of 1-4 but otherwise it's the same


[8/31/2022 8:20 PM] szybet
```
31/08/2022 @ 20:19:12 | localLibraryWidget: Opening book options dialog for book with pseudo-ID 4, ID 4

```


[8/31/2022 8:20 PM] szybet
https://tenor.com/view/confused-meme-girl-uhmmm-what-now-gif-16804319

{Embed}
https://tenor.com/view/confused-meme-girl-uhmmm-what-now-gif-16804319
/mnt/data/projects/git/conversations/media/confused-meme-4C6B8.png


[8/31/2022 8:54 PM] szybet
@tux-linux will you be so kind to get bookoptionsdialog working while reviewing the pull request with my folders page? i cant get it to work at all


[8/31/2022 8:54 PM] szybet
mostly ( only! ) ui tweaks that i cant get right


[8/31/2022 8:55 PM] szybet
i also resign with pinning folders - too much work for such a unnecessary feature


[8/31/2022 9:44 PM] szybet
https://github.com/Kobo-InkBox/inkbox/pull/39

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/39
Folders support for local library by Szybet · Pull Request #39 · Ko...
Its working without bugs (More testing needed anyway). Notes:

No implementation of switching off the feature. I didn't got any instructions what config file to use, so folderFeatureEnabled is ...
/mnt/data/projects/git/conversations/media/39-3DDBA


[8/31/2022 10:20 PM] tux_linux
Did you fix this?


[8/31/2022 10:21 PM] tux_linux
Thanks, I will try to review it
Thanks for informing me of what's not ok


[8/31/2022 10:21 PM] szybet
because future features can change this code anyway so a function couldn't be used, no


[8/31/2022 10:22 PM] szybet
its changed inside, trying to use a function would be even more hacky


[8/31/2022 10:22 PM] tux_linux
Did you at least look for unnecessary parts to remove?


[8/31/2022 10:23 PM] szybet
nothing is unnecesery

{Reactions}
👍 

[8/31/2022 10:24 PM] szybet
hear me out:
first test this, give me bugs to solve
review it, change code what you want
test it again, if its not working, we know to which commits to look for problems


[8/31/2022 10:24 PM] szybet
please


[9/1/2022 8:50 AM] szybet
there is a bug with counting files, im aware of it


[9/3/2022 6:29 PM] tux_linux
actually sleep works on the libra, I just tried to put it to sleep in the first 30s when inkbox-bin was being started, does that make sense?


[9/3/2022 6:29 PM] szybet
no


[9/3/2022 6:29 PM] tux_linux
great


[9/3/2022 6:29 PM] szybet
no


[9/3/2022 6:29 PM] szybet
🥴


[9/3/2022 6:29 PM] tux_linux
i was being sarcastic


[9/3/2022 6:30 PM] szybet
i know


[9/3/2022 6:30 PM] szybet
🥴

{Reactions}
👍 

[9/3/2022 9:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1C8F4.png


[9/3/2022 9:47 PM] szybet
am i missing some extensions ( for pictures )


[9/3/2022 9:48 PM] szybet
im too lazy to search this in code, its faster to ask


[9/3/2022 9:48 PM] tux_linux
yes, a lot


[9/3/2022 9:48 PM] szybet
not good


[9/3/2022 9:48 PM] tux_linux
look in generalDialog


[9/3/2022 9:48 PM] tux_linux
search local library


[9/3/2022 9:48 PM] tux_linux
`suffix`


[9/3/2022 9:49 PM] tux_linux
also use `QStringList supportedFiles << "*.txt" << "*.png"` etc.


[9/3/2022 9:49 PM] tux_linux
but why are you doing that?


[9/3/2022 9:49 PM] szybet
```
                            if(suffix == "txt" or suffix == "TXT" or suffix == "epub" or suffix == "EPUB" or suffix == "pdf" or suffix == "PDF" or suffix == "png" or suffix == "PNG" or suffix == "tif" or suffix == "TIF" or suffix == "bmp" or suffix == "BMP" or suffix == "tiff" or suffix == "TIFF" or suffix == "jpg" or suffix == "JPG" or suffix == "jpeg" or suffix == "JPEG") {
```


[9/3/2022 9:49 PM] tux_linux
yes


[9/3/2022 9:49 PM] szybet
found it


[9/3/2022 9:49 PM] szybet
okay


[9/3/2022 9:49 PM] szybet
to count files and increase page number


[9/3/2022 9:49 PM] tux_linux
...why


[9/3/2022 9:50 PM] tux_linux
why didn't I need to do this


[9/3/2022 9:50 PM] szybet
because you didnt counted folders


[9/3/2022 9:50 PM] szybet
;p


[9/3/2022 9:51 PM] tux_linux
what does it mean exactly


[9/3/2022 9:51 PM] szybet
in short:
list files in dir
check if they are in database

add folders to them and increase the size


[9/3/2022 9:52 PM] szybet
actually i dont need to filter file extensions


[9/3/2022 9:52 PM] szybet
just first look for items in this dir


[9/3/2022 9:52 PM] tux_linux
but then what if the item is a tar xz archive


[9/3/2022 9:53 PM] szybet
is it in the database?


[9/3/2022 9:53 PM] szybet
if not i dont care about it


[9/3/2022 9:53 PM] tux_linux
it's not


[9/3/2022 9:53 PM] szybet
then i dont care


[9/3/2022 9:53 PM] tux_linux
good


[9/3/2022 9:56 PM] szybet
can you accept the PR soon? i would want to work on the reader in the next days and as with wifi, github is my backup


[9/3/2022 9:58 PM] tux_linux
create a new branch


[9/3/2022 9:58 PM] szybet
that makes sense


[9/3/2022 9:58 PM] tux_linux
i am busy with school


[9/3/2022 9:58 PM] szybet
i havent though of that


[9/3/2022 9:58 PM] szybet
okay sure


[9/3/2022 9:58 PM] szybet
touch completly died on the nia, as it was sleeping for some days


[9/3/2022 9:58 PM] szybet
not good


[9/3/2022 9:59 PM] tux_linux
it's still dead?


[9/3/2022 9:59 PM] szybet
im rebooting

{Reactions}
👍 

[9/3/2022 10:03 PM] szybet
works


[9/3/2022 10:03 PM] szybet
interesting


[9/3/2022 10:03 PM] tux_linux
ok


[9/3/2022 10:03 PM] tux_linux
scary


[9/3/2022 10:03 PM] szybet
maybe we are shutting something too much off in ipd?


[9/3/2022 10:03 PM] szybet
/dev/input/event1 was silent completly


[9/3/2022 10:07 PM] tux_linux
maybe it was just the xorg bug


[9/3/2022 10:08 PM] szybet
FBINK was working


[9/3/2022 10:08 PM] szybet
i checked


[9/3/2022 10:10 PM] tux_linux
then idk


[9/3/2022 10:10 PM] szybet
@NiLuJe?


[9/3/2022 10:10 PM] tux_linux
if fbink was working then not his fault


[9/3/2022 10:11 PM] szybet
no, he just knows stuff


[9/3/2022 10:11 PM] tux_linux
ok


[9/3/2022 10:29 PM] szybet
CM108 sound cards ( this chip is everywhere, in the cheapest soundcards too ) work too on the nia


[9/3/2022 10:29 PM] szybet
😄


[9/3/2022 10:30 PM] tux_linux
nice


[9/4/2022 2:32 AM] ninuje
The Elan driver sucks donkey balls, but, no, I've never heard of it behaving like that


[9/4/2022 1:30 PM] tux_linux
?

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220904-072927-4C9B9.png


[9/4/2022 1:30 PM] szybet
there is a ugly border on the left and top


[9/4/2022 1:30 PM] tux_linux
Screenshot?


[9/4/2022 1:33 PM] szybet
i was lazy at 1 am and only writed it down


[9/4/2022 1:33 PM] tux_linux
`Settings: Remove network related things`
What are you talking about


[9/4/2022 1:33 PM] szybet
there is something about dhcp


[9/4/2022 1:34 PM] tux_linux
I think I get it, you have to change fixed height/width multiplier, didn't do 768x1024 devices


[9/4/2022 1:34 PM] tux_linux
Actually I did
Send a screenshot it's strange


[9/4/2022 1:35 PM] tux_linux
It's for usbnet
Nothing to do with Wi-Fi


[9/4/2022 1:35 PM] szybet
no, its a frame in the ui file


[9/4/2022 1:35 PM] szybet
set to sunken and 1 px


[9/4/2022 1:35 PM] szybet
ok then i will rename it


[9/4/2022 1:35 PM] tux_linux
Ok


[9/4/2022 9:06 PM] tux_linux
screenshot?


[9/4/2022 9:12 PM] szybet
tommorow


[9/4/2022 9:12 PM] szybet
dont worry about it


[9/4/2022 9:12 PM] tux_linux
fbgrab


[9/4/2022 9:12 PM] tux_linux
but ok


[9/4/2022 10:54 PM] szybet
@NiLuJe how does koreader handle page size? that the text isint cutted, and a scroll bar isint needed?


[9/4/2022 10:55 PM] tux_linux
also, since you hate Discord, you might want to join us on Matrix 😉


[9/4/2022 10:55 PM] tux_linux
https://matrix.to/#/#inkbox-os-project:matrix.org

{Embed}
https://matrix.to/
You're invited to talk on Matrix
You're invited to talk on Matrix


[9/4/2022 10:55 PM] ninuje
That'd be another Electron monstrosity, no thanks 😉


[9/4/2022 10:55 PM] ninuje
gitter and disc are where I draw the line 😉


[9/4/2022 10:55 PM] tux_linux
well, no one said you had to use Element


[9/4/2022 10:56 PM] tux_linux
NeoChat, Nheko, etc. seem nice too


[9/4/2022 10:56 PM] tux_linux
We also want to write one for Kobos


[9/4/2022 10:56 PM] szybet
there are many matrix clients


[9/4/2022 10:56 PM] szybet
too many


[9/4/2022 10:56 PM] ninuje
By having a text layout engine (he's called poire-z on GH ;p)


[9/4/2022 10:56 PM] tux_linux
oh that's him


[9/4/2022 10:56 PM] szybet
lua i quess?


[9/4/2022 10:56 PM] ninuje
Nope, that's all CRe


[9/4/2022 10:57 PM] tux_linux
https://apps.kde.org/neochat/

{Embed}
https://apps.kde.org/neochat/
NeoChat
A client for matrix, the decentralized communication protocol
/mnt/data/projects/git/conversations/media/application-mobile-8B9D7.png


[9/4/2022 10:57 PM] szybet
i wonder if we can use it


[9/4/2022 10:57 PM] ninuje
Or all libk2pdfopt for PDFs


[9/4/2022 10:57 PM] tux_linux
then where was mutool?


[9/4/2022 10:57 PM] tux_linux
\/mupdf


[9/4/2022 10:57 PM] ninuje
^W that'd be another crap I need to check


[9/4/2022 10:57 PM] ninuje
;p


[9/4/2022 10:58 PM] tux_linux
are you talking about NeoChat or mupdf?


[9/4/2022 10:58 PM] ninuje
matrix ;p


[9/4/2022 10:58 PM] tux_linux
it's admittedly already better in terms of bloat than Element


[9/5/2022 4:00 PM] aryetis
How does matrix differ from IRC ?


[9/5/2022 4:00 PM] szybet
its better


[9/5/2022 4:00 PM] szybet
:D


[9/5/2022 4:00 PM] aryetis
ok now I see. Thanks


[9/5/2022 4:01 PM] szybet
i dont have time to write an essay but


[9/5/2022 4:02 PM] szybet
matrix is the modern and invidual friendly messenger app, with capabilities of irc


[9/5/2022 4:02 PM] szybet
just read here


[9/5/2022 4:03 PM] szybet
https://matrix.org

{Embed}
https://matrix.org/
Matrix.org
Matrix is an open standard for interoperable, decentralised, real-time communication
/mnt/data/projects/git/conversations/media/splash-97122.jpg


[9/5/2022 4:05 PM] aryetis
ok so IRC but with voice chat (and better encryption)


[9/5/2022 4:05 PM] szybet
nope


[9/5/2022 4:06 PM] szybet
more complicated


[9/5/2022 5:27 PM] tux_linux
@andi you might want to join too 🙂


[9/5/2022 5:35 PM] andi15701
and what is the preferred client to use on kobos?


[9/5/2022 5:35 PM] tux_linux
we are planning on porting one


[9/5/2022 5:35 PM] tux_linux
or actually writing one


[9/5/2022 5:36 PM] szybet
in the future*


[9/5/2022 5:36 PM] tux_linux
with libquotient


[9/5/2022 5:36 PM] tux_linux
or it could be something in KoBox for now


[9/5/2022 5:36 PM] tux_linux
easier to port


[9/5/2022 5:36 PM] tux_linux
and then when we have time write one in Qt


[9/5/2022 5:36 PM] szybet
focus on 2.0 please


[9/5/2022 5:37 PM] tux_linux
no, it's **really** easier to port


[9/5/2022 5:38 PM] tux_linux
https://gitlab.gnome.org/GNOME/fractal

{Embed}
https://gitlab.gnome.org/GNOME/fractal
GNOME / fractal · GitLab
Matrix group messaging app
/mnt/data/projects/git/conversations/media/fractal-avatar5-82FE1.png


[9/5/2022 5:38 PM] tux_linux
KoBox likes GTK
Native GUI likes Qt


[9/5/2022 6:40 PM] szybet
```
 margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px
```


[9/5/2022 6:40 PM] szybet
do all books use this?


[9/5/2022 6:40 PM] szybet
or does the margin differ


[9/5/2022 6:47 PM] tux_linux
where's that taken from


[9/5/2022 6:48 PM] szybet
ui->text->toHtml()


[9/5/2022 6:48 PM] tux_linux
i don't know


[9/5/2022 6:48 PM] tux_linux
and... you are going to get a lot of brain damage with that function


[9/5/2022 6:49 PM] szybet
nah looks good


[9/5/2022 6:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-ACBAD.txt


[9/5/2022 6:49 PM] szybet
from thml i will just count how many margins there are


[9/5/2022 6:49 PM] szybet
and somehow convert them to how many chars they take in space


[9/5/2022 6:49 PM] szybet
🥴


[9/5/2022 6:50 PM] tux_linux
yes, that is your issue


[9/5/2022 6:50 PM] szybet
there is no other way


[9/5/2022 6:50 PM] szybet
those variables will be setted by user if they really want custom fonts and sizes


[9/5/2022 6:51 PM] tux_linux
then what's the point of this


[9/5/2022 6:51 PM] szybet
if those variables will be right, there will be no text cutting


[9/5/2022 6:52 PM] szybet
a calibration tool that simply asks questions is also possible, in the future


[9/5/2022 6:52 PM] szybet
if you have a better idea, please share it


[9/5/2022 6:52 PM] szybet
🥴


[9/5/2022 6:52 PM] tux_linux
you cannot be sure of this as default font is not monospaced


[9/5/2022 6:53 PM] szybet
of course there will be a bit of error margin that i will count in

{Reactions}
👍 

[9/5/2022 6:53 PM] szybet
its better to have a little less text than cutted text


[9/5/2022 6:56 PM] tux_linux
also, important thing


[9/5/2022 6:56 PM] tux_linux
what if you did push text to the next page but then the user closes the book and reopens it, will the text still be there?


[9/5/2022 6:56 PM] tux_linux
and also, what will be the performance impact of doing this from the beginning of a book with 2000+ pages?


[9/5/2022 6:57 PM] tux_linux
I see issues *everywhere*


[9/5/2022 6:57 PM] szybet
i can simply run the function for the previous page and get the text to insert


[9/5/2022 6:58 PM] szybet
this only happens in the gui, and only on page change

also with 2000 pages inkbox will freeze because you put things into tmpfs


[9/5/2022 6:58 PM] tux_linux
yes, but then what if the previous page also has pushed text


[9/5/2022 6:58 PM] tux_linux
it will not freeze, I already did that before
a book with 2000+ pages is 4M max in HTML


[9/5/2022 6:58 PM] szybet
oh okay


[9/5/2022 6:58 PM] szybet
for how long does it load?


[9/5/2022 6:58 PM] tux_linux
about 30s


[9/5/2022 6:59 PM] tux_linux
but it's fast afterwards


[9/5/2022 6:59 PM] tux_linux
so


[9/5/2022 6:59 PM] tux_linux
no problem


[9/5/2022 6:59 PM] szybet
well fuck

{Reactions}
😐 

[9/5/2022 6:59 PM] szybet
XD


[9/5/2022 6:59 PM] tux_linux
the only way around is to run the thing for the whole book (or at least, until the actual saved page)


[9/5/2022 6:59 PM] tux_linux
but then performance issues will say hello


[9/5/2022 7:03 PM] szybet
wont changing the height in muttol a bit lower fix the issue?


[9/5/2022 7:03 PM] tux_linux
partly


[9/5/2022 7:03 PM] tux_linux
because you will have correctly-sized pages


[9/5/2022 7:04 PM] tux_linux
and then pages with too much words


[9/5/2022 7:04 PM] tux_linux
or pages with not enough words


[9/5/2022 7:04 PM] tux_linux
it's the epub page size setting in Settings


[9/5/2022 7:05 PM] szybet
mutool shouldnt handle that?...........


[9/5/2022 7:05 PM] szybet
whatever, its the books fault


[9/5/2022 7:05 PM] tux_linux
what should it handle then


[9/5/2022 7:06 PM] tux_linux
no?


[9/5/2022 7:06 PM] szybet
i ask if motool is doing that


[9/5/2022 7:06 PM] tux_linux
epub books are just continuous html


[9/5/2022 7:06 PM] szybet
so why is muttol creating it


[9/5/2022 7:06 PM] tux_linux
except for chapters


[9/5/2022 7:07 PM] tux_linux
mutool splits a continuous html flow into small html divs which are pages


[9/5/2022 7:08 PM] szybet
and i dont understand from where mutool has all those problems


[9/5/2022 7:45 PM] szybet
dropping only the width gives some good results already


[9/5/2022 7:45 PM] szybet
what mupdf library version is inkbox using?


[9/5/2022 7:45 PM] tux_linux
a version from june 2021


[9/5/2022 7:46 PM] szybet
i wonder i a update will change anything


[9/5/2022 7:50 PM] szybet
setting 400 width and 450 height on the nia gives almost perfect results with witcher books


[9/5/2022 7:50 PM] tux_linux
can you try with ... other ... samples


[9/5/2022 7:50 PM] szybet
😂


[9/5/2022 7:50 PM] tux_linux
https://gutenberg.org/
just browse here

{Embed}
https://gutenberg.org/
Project Gutenberg
Project Gutenberg is a library of free eBooks.
/mnt/data/projects/git/conversations/media/pg-logo-144x144-3212E.png


[9/5/2022 7:50 PM] szybet
sure


[9/5/2022 7:54 PM] szybet
your book is worse


[9/5/2022 7:54 PM] szybet
there are many pages that are half empty


[9/5/2022 7:55 PM] tux_linux
well, yeah, that's what I was talking about, other samples


[9/5/2022 7:55 PM] tux_linux
not every book is created equal


[9/5/2022 7:55 PM] tux_linux
especially not mine 🙂


[9/5/2022 7:55 PM] szybet
its like that even with 450 / 450


[9/5/2022 7:55 PM] szybet
so i dont undestand


[9/5/2022 7:56 PM] szybet
btw why do you use xhtml


[9/5/2022 7:56 PM] tux_linux
because otherwise the viewport had weird formatting


[9/5/2022 7:56 PM] tux_linux
and gray background


[9/5/2022 7:58 PM] szybet
well apart from tweaking the width


[9/5/2022 7:59 PM] szybet
i dont have any solution in mind


[9/5/2022 7:59 PM] szybet
are there any alternatives to mupdf?


[9/5/2022 7:59 PM] tux_linux
crengine


[9/5/2022 7:59 PM] tux_linux
but I think you have to embed it in the app


[9/5/2022 7:59 PM] tux_linux
like, graphically


[9/5/2022 7:59 PM] szybet
cryengine


[9/5/2022 7:59 PM] tux_linux
yes


[9/5/2022 7:59 PM] szybet
https://www.crengine.net

{Embed}
https://www.crengine.net/
crengine
크렌진
/mnt/data/projects/git/conversations/media/15ca1c55268b6-DBFA9.png


[9/5/2022 8:00 PM] szybet
are you sure about this name?


[9/5/2022 8:00 PM] tux_linux
not that one


[9/5/2022 8:00 PM] tux_linux
https://github.com/koreader/crengine

{Embed}
https://github.com/koreader/crengine
GitHub - koreader/crengine: This is the KOReader CREngine fork. It ...
This is the KOReader CREngine fork. It cross-pollinates with the official CoolReader repository at https://github.com/buggins/coolreader, in case you were looking for that one. - GitHub - koreader/...
/mnt/data/projects/git/conversations/media/crengine-4EEEF


[9/5/2022 8:00 PM] szybet
# Building QT version, in DEBUG mode
mkdir qtbuild
cd qtbuild
cmake -D GUI=QT -D CMAKE_BUILD_TYPE=Debug -D MAX_IMAGE_SCALE_MUL=2 -D DOC_DATA_COMPRESSION_LEVEL=3 -D DOC_BUFFER_SIZE=0x1400000 -D CMAKE_INSTALL_PREFIX=/usr ..
make
sudo make install


[9/5/2022 8:00 PM] szybet
hm


[9/5/2022 8:00 PM] tux_linux
oh, it can be a widget?


[9/5/2022 8:01 PM] szybet
IDK


[9/5/2022 8:01 PM] tux_linux
then, a full rewrite of the reader engine is needed


[9/5/2022 8:01 PM] tux_linux
like, `rm src/reader/reader.*` and start from scratch


[9/5/2022 8:02 PM] szybet
well any other epub engines?


[9/5/2022 8:02 PM] tux_linux
not that I know about


[9/5/2022 8:02 PM] tux_linux
crengine is probably our only hope


[9/5/2022 8:02 PM] tux_linux
though it will add 3months to the release ETA


[9/5/2022 8:03 PM] szybet
https://github.com/buggins/coolreader

{Embed}
https://github.com/buggins/coolreader
GitHub - buggins/coolreader: Official site of CoolReader project. S...
Official site of CoolReader project. Sourceforge repository is obsolete. - GitHub - buggins/coolreader: Official site of CoolReader project. Sourceforge repository is obsolete.
/mnt/data/projects/git/conversations/media/coolreader-20827


[9/5/2022 8:03 PM] szybet
actually


[9/5/2022 8:03 PM] szybet
this has qt support for sure


[9/5/2022 8:03 PM] tux_linux
yes, but I'm not sure whether it's better to take this or the koreader fork


[9/5/2022 8:03 PM] tux_linux
@NiLuJe ?


[9/5/2022 8:03 PM] ninuje
I have no experience with the QT/Android versions


[9/5/2022 8:04 PM] tux_linux
sergeyvl has done qt integration (just remembered)


[9/5/2022 8:04 PM] tux_linux
in his closed-source stuff


[9/5/2022 8:04 PM] tux_linux
that works well


[9/5/2022 8:04 PM] ninuje
But I'd say the main repo is mostly focused on CRe inside the Android app, while we're mostly focused on it being used as an engine with a custom frontend

{Reactions}
👍 

[9/5/2022 8:05 PM] ninuje
And then there's CoolReader which is based on a CRe in a state I'm not familiar with that's mostly geared towards being used with a QPA (and, yeah, that'd be sergey's stuff)

{Reactions}
👍 

[9/5/2022 8:06 PM] ninuje
If you actually have a web engine and a JS VM, I'd look into Readium though


[9/5/2022 8:06 PM] tux_linux
we... don't


[9/5/2022 8:06 PM] tux_linux
the only close thing is Midori via X11


[9/5/2022 8:06 PM] tux_linux
which behaves like a decent browser, but is a bit slow


[9/5/2022 8:06 PM] ninuje
Or anything based on webengine & epub.js (e.g, foliate)


[9/5/2022 8:06 PM] tux_linux
webengine is not compilable for Kobos IIRC


[9/5/2022 8:06 PM] tux_linux
and webkit is probably too old


[9/5/2022 8:07 PM] tux_linux
but yeah, I did look into these options at the time


[9/5/2022 8:07 PM] ninuje
foliate is webkit-gtk, not sure if the name just stuck or if it's still actually webkit


[9/5/2022 8:09 PM] tux_linux
is it possible with crengine to just provide the widget a font size, a page number, margins, alignment data and just let it display the book?


[9/5/2022 8:09 PM] ninuje
it's not a widget


[9/5/2022 8:09 PM] andi15701
Someone has done experiments with that on top of pmOS

{Reactions}
👍 

[9/5/2022 8:10 PM] andi15701
with foliate


[9/5/2022 8:10 PM] tux_linux
then what is it


[9/5/2022 8:10 PM] tux_linux
how can koreader use it if it's not a widget


[9/5/2022 8:10 PM] szybet
koreader is in qt?................


[9/5/2022 8:10 PM] tux_linux
no


[9/5/2022 8:10 PM] tux_linux
but still


[9/5/2022 8:10 PM] ninuje
It spits out an image buffer


[9/5/2022 8:10 PM] ninuje
which is just what we need


[9/5/2022 8:11 PM] tux_linux
and... you... you... you handle text selection from an image?


[9/5/2022 8:11 PM] ninuje
It has a custom pointer and xpath-like API to translate coordinates to DOM nodes


[9/5/2022 8:11 PM] tux_linux
that's lit


[9/5/2022 8:12 PM] ninuje
It's extremely clunky and non-standard


[9/5/2022 8:12 PM] tux_linux
then... any other suggestions?


[9/5/2022 8:12 PM] ninuje
And depends on CRe's main drawback, being that it *has* to parse the full document


[9/5/2022 8:12 PM] tux_linux
don't worry, we do that here too


[9/5/2022 8:12 PM] tux_linux
sadly (or not)


[9/5/2022 8:12 PM] ninuje
(e.g., papyrus scroll approach v.s., chunked/streamed decoding)


[9/5/2022 8:12 PM] tux_linux
although eating some RAM, page turns are much faster


[9/5/2022 8:13 PM] ninuje
It actually *saves* RAM, it's just a heavy processing cost on first open


[9/5/2022 8:13 PM] ninuje
(remember, CRe was designed for palm pilots)


[9/5/2022 8:13 PM] tux_linux
interesting


[9/5/2022 8:13 PM] ninuje
(or some equally shitty and underpowered legacy handheld devices)


[9/5/2022 8:16 PM] szybet
sooooooooooooooo

export pages as mutool does but with rust and based on words, margings and newlines, calibrate it with a handy tool


[9/5/2022 8:16 PM] tux_linux
not based on words


[9/5/2022 8:16 PM] szybet
characters*


[9/5/2022 8:16 PM] tux_linux
and while you're at it, develop a native Qt version


[9/5/2022 8:16 PM] szybet
:(


[9/5/2022 8:18 PM] szybet
well not for 2.0


[9/5/2022 8:19 PM] szybet
sad


[9/5/2022 8:19 PM] tux_linux
because of no rust?


[9/5/2022 8:19 PM] szybet
but changing only width makes the job for now


[9/5/2022 8:19 PM] szybet
even with rust it would take too long


[9/5/2022 8:19 PM] tux_linux
ok


[9/5/2022 8:19 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/922ecb0ab59fab3da7d87492fa594aeb2d208720

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/922ecb0ab59fab3da7d87492fa594aeb2d208720
Improve font size range · Kobo-InkBox/inkbox@922ecb0
The font size slider now has 16 levels of different font sizes.
/mnt/data/projects/git/conversations/media/922ecb0ab59fab3da7d87492fa594aeb2d208720-2ACBC


[9/5/2022 8:20 PM] szybet
well okay


[9/5/2022 8:20 PM] szybet
i will do some other todos then


[9/5/2022 8:20 PM] tux_linux
special chars in keyboard


[9/5/2022 8:20 PM] tux_linux
maybe?


[9/5/2022 8:20 PM] szybet
i want to do settings


[9/5/2022 8:21 PM] szybet
today


[9/5/2022 8:21 PM] tux_linux
I will do it
you said that I had to do it


[9/5/2022 8:21 PM] szybet
what


[9/5/2022 8:21 PM] szybet
i dont remember so


[9/5/2022 8:21 PM] szybet
i will


[9/5/2022 8:21 PM] tux_linux
what exactly in settings


[9/5/2022 8:22 PM] szybet
spinboxes and network


[9/5/2022 8:22 PM] szybet
maybe something more


[9/5/2022 8:22 PM] tux_linux
oh ok


[9/5/2022 8:22 PM] tux_linux
you can but we said I would redesign it


[9/5/2022 8:22 PM] tux_linux
Pinned a message.


[9/5/2022 8:22 PM] szybet
this needs to be done anyway, even with redesigning


[9/5/2022 8:23 PM] tux_linux
.


[9/5/2022 8:23 PM] tux_linux
so I will do it


[9/5/2022 8:24 PM] szybet
i will only replace spinboxes


[9/5/2022 8:24 PM] szybet
thats it


[9/5/2022 8:24 PM] tux_linux
ok


[9/5/2022 9:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220905_212425-AAEA7.jpg


[9/5/2022 9:24 PM] szybet
fine?


[9/5/2022 9:26 PM] tux_linux
ePUB

{Reactions}
👍 

[9/5/2022 9:26 PM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/master/src/settings/settings.cpp word number isint implemented at all?

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/master/src/settings/settings.cpp
inkbox/settings.cpp at master · Kobo-InkBox/inkbox
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-7A1CC


[9/5/2022 9:27 PM] szybet
also: i hate grid layouts


[9/5/2022 9:27 PM] tux_linux
Words number is for text files


[9/5/2022 9:27 PM] szybet
i know


[9/5/2022 9:27 PM] szybet
where is it implementation for spinbox


[9/5/2022 9:28 PM] tux_linux
Well it's there, search


[9/5/2022 9:28 PM] tux_linux
Probably on value changed or smth


[9/5/2022 9:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-367EF.png


[9/5/2022 9:28 PM] szybet
nope


[9/5/2022 9:30 PM] tux_linux
Search wordsNumber maybe


[9/5/2022 9:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3C5A7.png


[9/5/2022 9:30 PM] szybet
okay... weird


[9/5/2022 9:31 PM] szybet
also can i increase the arrows size in width


[9/5/2022 9:31 PM] szybet
with padding?


[9/5/2022 9:31 PM] szybet
its hard to click


[9/5/2022 9:31 PM] szybet
+ bold titles for items?


[9/5/2022 9:31 PM] tux_linux
No bold titles


[9/5/2022 9:31 PM] szybet
Why


[9/5/2022 9:31 PM] tux_linux
You can increase that with padding


[9/5/2022 9:31 PM] szybet
it will look more arranged


[9/5/2022 9:31 PM] tux_linux
Breaks design language


[9/5/2022 9:32 PM] szybet
ugh


[9/5/2022 9:32 PM] szybet
can i at least move the titles to the center?


[9/5/2022 9:32 PM] tux_linux
What titles


[9/5/2022 9:32 PM] tux_linux
The setting option?


[9/5/2022 9:32 PM] szybet
System


[9/5/2022 9:32 PM] szybet
Network


[9/5/2022 9:32 PM] szybet
Storage encryption


[9/5/2022 9:32 PM] szybet
etc


[9/5/2022 9:32 PM] szybet
im talking about them


[9/5/2022 9:32 PM] tux_linux
Oh you're talking about that


[9/5/2022 9:33 PM] szybet
so can i make them bold?


[9/5/2022 9:33 PM] tux_linux
I will revamp everything so don't bother with them


[9/5/2022 9:36 PM] szybet
default value for words_number?


[9/5/2022 9:36 PM] tux_linux
It depends on the device


[9/5/2022 9:36 PM] tux_linux
It should be set at the start of settings


[9/5/2022 9:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C64DF.png


[9/5/2022 9:37 PM] szybet
it isin't


[9/5/2022 9:37 PM] tux_linux
ePUB size too depends on the device


[9/5/2022 9:37 PM] szybet
i know, there are vars for that


[9/5/2022 9:37 PM] tux_linux
Then it's probably set in oobe-inkbox


[9/5/2022 9:37 PM] tux_linux
Actually no


[9/5/2022 9:37 PM] tux_linux
Just in the default config


[9/5/2022 9:37 PM] tux_linux
Wait


[9/5/2022 9:39 PM] szybet
:|


[9/5/2022 9:41 PM] tux_linux
Didn't find it, but this should be ok
Set 175 as default for every device except
For the mini set 120
For the Libra set 250


[9/5/2022 9:42 PM] tux_linux
Don't forget to respect increment step
And max/min


[9/5/2022 9:43 PM] tux_linux
Oh, I know
Put the value between the two buttons
It will be better design


[9/5/2022 9:43 PM] szybet
so i need another label?


[9/5/2022 9:43 PM] szybet
or what


[9/5/2022 9:43 PM] tux_linux
No


[9/5/2022 9:43 PM] tux_linux
Just move the label between the two buttons


[9/5/2022 9:44 PM] tux_linux
And make buttons order - +


[9/5/2022 9:44 PM] tux_linux
```
- value here +
```
Like this


[9/5/2022 9:44 PM] szybet
why.....................


[9/5/2022 9:44 PM] szybet
` -    width: 50     + `


[9/5/2022 9:44 PM] szybet
?


[9/5/2022 9:45 PM] tux_linux
Yeah should be ok
Better even put width separately


[9/5/2022 9:45 PM] tux_linux
Only the value between the buttons


[9/5/2022 9:45 PM] szybet
it will take even more space


[9/5/2022 9:45 PM] tux_linux
So you need another label, yes


[9/5/2022 9:45 PM] tux_linux
Not that much


[9/5/2022 9:46 PM] tux_linux
Also you can omit `:`


[9/5/2022 10:00 PM] szybet
device codenames?


[9/5/2022 10:00 PM] szybet
well i can maybe find the somewhere


[9/5/2022 10:01 PM] tux_linux
Mini=n705
Libra=n873


[9/5/2022 10:29 PM] szybet
here it is

{Attachments}
/mnt/data/projects/git/conversations/media/0001-settings-removed-spin-box-wifi-logger-FA4EA.patch


[9/5/2022 10:31 PM] tux_linux
wordNumber
There are multiple words
So word->words


[9/5/2022 10:32 PM] szybet
another patch file to send for this?


[9/5/2022 10:32 PM] tux_linux
I'm not done


[9/5/2022 10:33 PM] tux_linux
add, del:
Inc, Dec
for increment and decrement


[9/5/2022 10:33 PM] szybet
no...............


[9/5/2022 10:33 PM] szybet
😞


[9/5/2022 10:34 PM] tux_linux
`sed 's/Add/Inc/g'`
Probably


[9/5/2022 10:34 PM] tux_linux
Here only one line break between slots

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220905-163342-49198.png


[9/5/2022 10:36 PM] tux_linux
c o d e  s t a n d a r d s

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220905-163530-FE48D.png


[9/5/2022 10:36 PM] szybet
o h n o


[9/5/2022 10:37 PM] tux_linux
Instead of commenting things, delete them

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220905-163652-D7134.png


[9/5/2022 10:37 PM] szybet
I FORGOT THAT

{Reactions}
👍 

[9/5/2022 10:37 PM] szybet
;_ ;


[9/5/2022 10:37 PM] tux_linux
This applies everywhere
If we need to check something, we can just check the git history


[9/5/2022 10:37 PM] szybet
maybe qt creator didnt save the deletion


[9/5/2022 10:38 PM] szybet
anything else?


[9/5/2022 10:40 PM] tux_linux
Use writeFile


[9/5/2022 10:40 PM] tux_linux
Not string_writeconfig


[9/5/2022 10:40 PM] tux_linux
It's deprecated


[9/5/2022 10:41 PM] szybet
well i didn't knew that


[9/5/2022 10:41 PM] szybet
sure


[9/5/2022 10:41 PM] szybet
is that all?


[9/5/2022 10:43 PM] tux_linux
Don't forget that you have a word number label that needs to change name
You can probably use `wordsNumberValueLabel` for it


[9/5/2022 10:44 PM] tux_linux
Instead of wordNumberShowLabel


[9/5/2022 10:44 PM] szybet
so just change the name?


[9/5/2022 10:44 PM] tux_linux
Yes


[9/5/2022 11:06 PM] szybet
done x2

{Attachments}
/mnt/data/projects/git/conversations/media/0001-c-o-d-e-s-t-a-n-d-a-r-d-s-perfect-eng-39D79.patch


[9/5/2022 11:06 PM] tux_linux
`.config/13-epub_page_size/set`
what's that?


[9/5/2022 11:07 PM] szybet
what?


[9/5/2022 11:07 PM] tux_linux
it seems better


[9/5/2022 11:07 PM] szybet
i didn't invented that


[9/5/2022 11:07 PM] szybet
i coppied your code


[9/5/2022 11:07 PM] szybet
actually i moved it


[9/5/2022 11:07 PM] tux_linux
oh ok


[9/5/2022 11:07 PM] tux_linux
I thought you had learnt how to spell set properly


[9/5/2022 11:07 PM] tux_linux
`setted` isn't valid


[9/5/2022 11:07 PM] tux_linux
btw


[9/5/2022 11:09 PM] szybet
then how it would be valid


[9/5/2022 11:10 PM] tux_linux
`set`
simply


[9/5/2022 11:10 PM] szybet
but its the past


[9/5/2022 11:10 PM] szybet
past time


[9/5/2022 11:10 PM] tux_linux
e x c e p t i o n s


[9/5/2022 11:10 PM] tux_linux
😉


[9/5/2022 11:11 PM] tux_linux
oh maybe it's valid


[9/5/2022 11:11 PM] tux_linux
maybe there are two


[9/5/2022 11:11 PM] szybet
thats why i didn't learned it yet


[9/5/2022 11:12 PM] tux_linux
*I didn't learn it yet


[9/5/2022 11:13 PM] tux_linux
it seems both are valid


[9/5/2022 11:14 PM] szybet
the past time is said in 'didn't` and thats why '-ed' isint needed right?


[9/5/2022 11:14 PM] tux_linux
yes


[9/5/2022 11:14 PM] tux_linux
exactly


[9/5/2022 11:14 PM] tux_linux
`isin't`->`isn't`


[9/5/2022 11:14 PM] tux_linux
`is not`


[9/5/2022 11:16 PM] szybet
i think this depends on UK and US english?


[9/5/2022 11:16 PM] the.mightydill
no


[9/5/2022 11:16 PM] the.mightydill
:p


[9/5/2022 11:16 PM] the.mightydill
it's pronounced isin't so i understand


[9/5/2022 11:16 PM] the.mightydill
but definitely spelled without the second I


[9/5/2022 11:16 PM] tux_linux
@dill ?


[9/5/2022 11:17 PM] the.mightydill
yeah


[9/5/2022 11:17 PM] the.mightydill
it's set


[9/5/2022 11:17 PM] tux_linux
ok


[9/5/2022 11:17 PM] the.mightydill
english is weird, don't worry guys


[9/5/2022 11:17 PM] tux_linux
because wikitionnary is not sure about it


[9/5/2022 11:17 PM] the.mightydill
guys... how do i dual boot... without risking my windows installation


[9/5/2022 11:17 PM] the.mightydill
because i spent like 2 hours setting this up


[9/5/2022 11:18 PM] szybet
make some space on the disk


[9/5/2022 11:18 PM] szybet
and there install grub


[9/5/2022 11:18 PM] the.mightydill
no i mean how do i completely avoid corruption


[9/5/2022 11:18 PM] szybet
dont do something stupid


[9/5/2022 11:18 PM] the.mightydill
man im the most stupid person here


[9/5/2022 11:18 PM] szybet
just make space for linux and dont touch windows


[9/5/2022 11:18 PM] the.mightydill
alright then


[9/5/2022 11:18 PM] the.mightydill
is 512G enough to fit both?


[9/5/2022 11:19 PM] szybet
i strongly dissagree


[9/5/2022 11:19 PM] tux_linux
yes


[9/5/2022 11:19 PM] the.mightydill
also does linux support fingerprint sensors


[9/5/2022 11:19 PM] szybet
😉


[9/5/2022 11:19 PM] the.mightydill
no lol


[9/5/2022 11:19 PM] tux_linux
I disagree too


[9/5/2022 11:19 PM] the.mightydill
thanks ¯\_(ツ)_/¯


[9/5/2022 11:19 PM] szybet
it depends on which


[9/5/2022 11:19 PM] tux_linux
did you read the libra porting thread

{Reactions}
🥴 

[9/5/2022 11:19 PM] the.mightydill
let's say fedora


[9/5/2022 11:19 PM] szybet
but in the past year kde + gnome implemented them, so i think the support is good


[9/5/2022 11:19 PM] szybet
distro doesnt matter


[9/5/2022 11:20 PM] the.mightydill
with gnome


[9/5/2022 11:20 PM] the.mightydill
nicolas are you getting RCMP alerts


[9/5/2022 11:21 PM] the.mightydill
never mind it's only for the prairie provinces


[9/5/2022 11:21 PM] tux_linux
the sask thing?


[9/5/2022 11:21 PM] tux_linux
pretty horrible


[9/5/2022 11:21 PM] szybet
ugh


[9/5/2022 11:21 PM] szybet
https://github.com/linuxhw/hw-probe

{Embed}
https://github.com/linuxhw/hw-probe
GitHub - linuxhw/hw-probe: Probe for hardware, check operability an...
Probe for hardware, check operability and find drivers - GitHub - linuxhw/hw-probe: Probe for hardware, check operability and find drivers
/mnt/data/projects/git/conversations/media/1cefe580-8900-11e9-9774-4638b0e21445-CDD1A


[9/5/2022 11:21 PM] szybet
try this


[9/5/2022 11:21 PM] the.mightydill
yeah


[9/5/2022 11:21 PM] the.mightydill
horrible


[9/5/2022 11:21 PM] szybet
this will tell you everything about your hardware


[9/5/2022 11:21 PM] the.mightydill
alright thx


[9/5/2022 11:21 PM] szybet
sask?


[9/5/2022 11:22 PM] szybet
RCMP?


[9/5/2022 11:22 PM] the.mightydill
saskatchewan


[9/5/2022 11:22 PM] szybet
what is going on in canada


[9/5/2022 11:22 PM] the.mightydill
rcmp is the country's police


[9/5/2022 11:22 PM] the.mightydill
there are 2 people going around


[9/5/2022 11:22 PM] the.mightydill
stabbing many people


[9/5/2022 11:22 PM] the.mightydill
it's pretty bad


[9/5/2022 11:23 PM] szybet
anddd why didn't the police catch them


[9/5/2022 11:23 PM] the.mightydill
idk


[9/5/2022 11:23 PM] the.mightydill
theyre working on it


[9/5/2022 11:24 PM] tux_linux
https://www.cbc.ca/news/canada/saskatchewan/suspects-mass-stabbings-weldon-james-smith-saskatchewan-1.6572876


[9/5/2022 11:24 PM] the.mightydill
every phone in alberta, manitoba, and saskatchewan (provinces) went off with an alert


[9/5/2022 11:25 PM] szybet
thats bad


[9/5/2022 11:25 PM] the.mightydill
yeah


[9/5/2022 11:25 PM] the.mightydill
be right back, booting into fedora

{Reactions}
👍 

[9/5/2022 11:27 PM] tux_linux
good choice


[9/5/2022 11:27 PM] tux_linux
I use it on my laptop


[9/5/2022 11:29 PM] the.mightydill
hmmmm theres no option for separate boot devices


[9/5/2022 11:29 PM] the.mightydill
*cries* i dont wanna break my bios


[9/5/2022 11:29 PM] szybet
you cant break your bios


[9/5/2022 11:29 PM] szybet
its impossible.


[9/5/2022 11:30 PM] the.mightydill
so i switch the boot order?


[9/5/2022 11:30 PM] the.mightydill
it seems irreversible


[9/5/2022 11:30 PM] the.mightydill
WAIT never mind


[9/5/2022 11:30 PM] szybet
to boot fedora? yea


[9/5/2022 11:30 PM] the.mightydill
okay booting into fedora again


[9/5/2022 11:30 PM] szybet
everything can be changed


[9/5/2022 11:30 PM] tux_linux
are you in uefi


[9/5/2022 11:30 PM] the.mightydill
sorry im panicking because... this is my first actual personal device and i dont want to brick it


[9/5/2022 11:30 PM] the.mightydill
yes


[9/5/2022 11:31 PM] the.mightydill
because my parents would be properly PISSED at me


[9/5/2022 11:31 PM] the.mightydill
alright... rebooting


[9/5/2022 11:31 PM] szybet
you cant brick a laptop


[9/5/2022 11:31 PM] the.mightydill
wish me luck


[9/5/2022 11:31 PM] szybet
its not a phone


[9/5/2022 11:31 PM] the.mightydill
IM 14 YEARS OLD AND SCARED lmaoo


[9/5/2022 11:31 PM] the.mightydill
sorry


[9/5/2022 11:32 PM] szybet
until you won't play with efuses, password locks, writing drivers for linux


[9/5/2022 11:32 PM] szybet
no need to be sorry, everyone learns


[9/5/2022 11:33 PM] szybet
for me that was arround the time i installed arcolinux -> linux mint -> arch linux


[9/5/2022 11:33 PM] szybet
¯\_(ツ)_/¯


[9/5/2022 11:34 PM] tux_linux
it's not brickable


[9/5/2022 11:34 PM] tux_linux
at all


[9/5/2022 11:34 PM] tux_linux
unless you shut down during a boot rom update
which would be really, really, really stupid


[9/5/2022 11:34 PM] szybet
it is, but rarely


[9/5/2022 11:34 PM] szybet
yea also that


[9/5/2022 11:35 PM] the.mightydill
i made LFS when i was 12 but that's because nicolas helped me... a LOT


[9/5/2022 11:35 PM] the.mightydill
also this is a thing?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CF252.png


[9/5/2022 11:35 PM] the.mightydill
alright boys we have secure boot :skullparty:


[9/5/2022 11:35 PM] tux_linux
just disable it


[9/5/2022 11:35 PM] the.mightydill
security boot fail


[9/5/2022 11:35 PM] the.mightydill
that would hurt windows, no?


[9/5/2022 11:36 PM] szybet
for a 12 year old that would be trauma ( is it an english word too?)


[9/5/2022 11:36 PM] tux_linux
I disabled it once, it did not hurt anything


[9/5/2022 11:36 PM] the.mightydill
lol


[9/5/2022 11:36 PM] tux_linux
it was, but I think it was a good learning experience for him


[9/5/2022 11:36 PM] the.mightydill
it depends on the manufacturer


[9/5/2022 11:36 PM] the.mightydill
trauma or traumatic yea


[9/5/2022 11:36 PM] tux_linux
then look up docs for your laptop


[9/5/2022 11:36 PM] the.mightydill
ok looking


[9/5/2022 11:37 PM] the.mightydill
so i need a supervisor password apparently


[9/5/2022 11:37 PM] tux_linux
the worst you'll end up doing is wiping windows
but you can reinstall it later


[9/5/2022 11:37 PM] the.mightydill
yeah but OEM


[9/5/2022 11:37 PM] szybet
what


[9/5/2022 11:37 PM] the.mightydill
alright i guess


[9/5/2022 11:38 PM] the.mightydill
to gain access because it's greyed out... anyways


[9/5/2022 11:38 PM] the.mightydill
bye i guess


[9/5/2022 11:38 PM] ninuje
Win 11 won't like secure boot off (I... think?)


[9/5/2022 11:38 PM] tux_linux
he's on 10


[9/5/2022 11:38 PM] the.mightydill
it's windows 10 so i'm good


[9/5/2022 11:38 PM] ninuje
But it's perfectly fine on 10 unless you do weird kernel driver shenanigans

{Reactions}
👍 

[9/5/2022 11:38 PM] the.mightydill
yea


[9/5/2022 11:38 PM] the.mightydill
thx


[9/5/2022 11:38 PM] tux_linux
it did install without secure boot on one of my PCs


[9/5/2022 11:39 PM] tux_linux
with some hacks


[9/5/2022 11:39 PM] ninuje
Actually turning it off for real might be easier said than done depending on how sucky/confusing the UEFI "bios" UI is


[9/5/2022 11:43 PM] the.mightydill
ok so


[9/5/2022 11:43 PM] the.mightydill
good news: windows isnt hurt yet


[9/5/2022 11:43 PM] the.mightydill
bad news: NO WIFI INTERFACE FOUND WHY DO I HAVE TO SUFFER


[9/5/2022 11:43 PM] tux_linux
because you have to


[9/5/2022 11:43 PM] the.mightydill
i guess it's because i use linux


[9/5/2022 11:43 PM] tux_linux
you don't have an ethernet plug I suspect?


[9/5/2022 11:43 PM] the.mightydill
lol


[9/5/2022 11:43 PM] the.mightydill
nope no port


[9/5/2022 11:43 PM] the.mightydill
or wire


[9/5/2022 11:44 PM] the.mightydill
wired is a complete pain


[9/5/2022 11:44 PM] tux_linux
download drivers from windows


[9/5/2022 11:44 PM] tux_linux
lspci


[9/5/2022 11:44 PM] tux_linux
not true


[9/5/2022 11:44 PM] the.mightydill
how


[9/5/2022 11:44 PM] the.mightydill
for me at least


[9/5/2022 11:44 PM] the.mightydill
i mean how do i get those onto the ISO


[9/5/2022 11:44 PM] tux_linux
download the fedora package


[9/5/2022 11:44 PM] the.mightydill
yeah i have it


[9/5/2022 11:44 PM] tux_linux
and mount your windows partition


[9/5/2022 11:44 PM] tux_linux
from fedora


[9/5/2022 11:44 PM] the.mightydill
ohh ok


[9/5/2022 11:45 PM] the.mightydill
what format should the drivers be in


[9/5/2022 11:45 PM] tux_linux
you have it or not?


[9/5/2022 11:45 PM] tux_linux
you're probably using a broadcom chip


[9/5/2022 11:45 PM] tux_linux
which linux does not like very much


[9/5/2022 11:45 PM] the.mightydill
i have the ISO


[9/5/2022 11:45 PM] the.mightydill
on ventoy


[9/5/2022 11:46 PM] tux_linux
I said the package


[9/5/2022 11:46 PM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F8941.png


[9/5/2022 11:46 PM] the.mightydill
package...??


[9/5/2022 11:46 PM] tux_linux
find your wi-fi card and download the package from fedora for it


[9/5/2022 11:46 PM] tux_linux
pkgs.org


[9/5/2022 11:46 PM] the.mightydill
alright


[9/5/2022 11:46 PM] the.mightydill
thx

{Reactions}
👍 

[9/5/2022 11:47 PM] the.mightydill
i have fedora 34 but it only shows 35 and 36


[9/5/2022 11:47 PM] the.mightydill
these are old images that i put on my USB


[9/5/2022 11:48 PM] tux_linux
it shouldn't matter


[9/5/2022 11:48 PM] the.mightydill
alright it looks like drivers exist


[9/5/2022 11:48 PM] the.mightydill
mediatek mt7921


[9/5/2022 11:49 PM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CAF56.png


[9/5/2022 11:49 PM] tux_linux
fedora official?


[9/5/2022 11:50 PM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BAFF0.png


[9/5/2022 11:50 PM] the.mightydill
nope


[9/5/2022 11:51 PM] tux_linux
try `modprobe mt7921e` on fedora maybe


[9/5/2022 11:51 PM] the.mightydill
mt7921e i think


[9/5/2022 11:51 PM] tux_linux
with sudo if necessary


[9/5/2022 11:51 PM] tux_linux
and check dmesg


[9/6/2022 12:02 AM] the.mightydill
linux is doing some shit


[9/6/2022 12:02 AM] the.mightydill
rebooting into linux again


[9/6/2022 12:02 AM] the.mightydill
also windows is making me run Setup.exe when i sign in


[9/6/2022 12:03 AM] tux_linux
you haven't bricked your laptop


[9/6/2022 12:11 AM] the.mightydill
not yet


[9/6/2022 12:11 AM] the.mightydill
no its asking for admin permission i just press no


[9/6/2022 12:11 AM] the.mightydill
also fedora isnt recognizing my touchpad so im going with ubuntu


[9/6/2022 12:11 AM] the.mightydill
modprobe not working


[9/6/2022 12:11 AM] tux_linux
might want to try kde neon


[9/6/2022 12:12 AM] the.mightydill
ok so from stackexchange it looks like i need a more up to date ubuntu


[9/6/2022 12:12 AM] the.mightydill
im on 21.04 right now


[9/6/2022 12:13 AM] tux_linux
why


[9/6/2022 12:13 AM] the.mightydill
idk


[9/6/2022 12:13 AM] the.mightydill
kernel update supports it


[9/6/2022 12:13 AM] the.mightydill
i guess


[9/6/2022 12:14 AM] tux_linux
but why are you on 21.04


[9/6/2022 12:14 AM] the.mightydill
oh i downloaded the iso like a year ago


[9/6/2022 12:14 AM] the.mightydill
i havent needed to reinstall linux since then


[9/6/2022 12:14 AM] tux_linux
ok


[9/6/2022 12:14 AM] the.mightydill
im going with LTS


[9/6/2022 12:15 AM] the.mightydill
wait no


[9/6/2022 12:15 AM] the.mightydill
nvm


[9/6/2022 12:15 AM] the.mightydill
do i do LTS?


[9/6/2022 12:15 AM] tux_linux
22.04 is latest


[9/6/2022 12:15 AM] tux_linux
latest is lts


[9/6/2022 12:16 AM] the.mightydill
alright


[9/6/2022 12:16 AM] the.mightydill
holy shit thats faster than expected

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F25D9.png


[9/6/2022 12:17 AM] the.mightydill
lol my mom got mad at me for installing linux


[9/6/2022 12:17 AM] tux_linux
why


[9/6/2022 12:17 AM] the.mightydill
microsoft family restrictions and stuff


[9/6/2022 12:17 AM] the.mightydill
like COME ON im 14


[9/6/2022 12:17 AM] tux_linux
it's ridiculous


[9/6/2022 12:17 AM] tux_linux
then just reinstall windows


[9/6/2022 12:17 AM] the.mightydill
no im dual booting


[9/6/2022 12:18 AM] tux_linux
you will install linux anyway right?


[9/6/2022 12:18 AM] tux_linux
good


[9/6/2022 12:18 AM] the.mightydill
yaeh


[9/6/2022 12:18 AM] the.mightydill
yeah


[9/6/2022 12:35 AM] the.mightydill
installing ubuntu while holding a 2 month old baby


[9/6/2022 12:35 AM] the.mightydill
not fun


[9/6/2022 12:36 AM] tux_linux
welp


[9/6/2022 12:40 AM] the.mightydill
rebooting

{Reactions}
👍 

[9/6/2022 12:42 AM] the.mightydill
nvm... he's crying


[9/6/2022 12:54 AM] the.mightydill
im in ubuntu


[9/6/2022 12:54 AM] the.mightydill
:D


[9/6/2022 12:54 AM] the.mightydill
it works!!


[9/6/2022 12:54 AM] tux_linux
good


[9/6/2022 12:54 AM] the.mightydill
installing


[9/6/2022 12:54 AM] the.mightydill
i hope windows isnt dead though


[9/6/2022 12:55 AM] the.mightydill
my dad would kill me


[9/6/2022 12:56 AM] the.mightydill
installing system


[9/6/2022 1:01 AM] the.mightydill
THE MOMENT OF TRUTH


[9/6/2022 1:01 AM] the.mightydill
rebooting

{Reactions}
👍 

[9/6/2022 1:08 AM] the.mightydill
and.....


[9/6/2022 1:08 AM] the.mightydill
IT WORKS


[9/6/2022 1:08 AM] the.mightydill
BOTH of them

{Reactions}
👍 

[9/6/2022 1:08 AM] the.mightydill
:D


[9/6/2022 1:09 AM] the.mightydill
fingerprint doesnt work but thats a small sacrifice


[9/6/2022 1:09 AM] the.mightydill
thx for helping

{Reactions}
👍 

[9/6/2022 1:12 AM] the.mightydill
what's the name of the "text editor" program in gnome? @tux-linux


[9/6/2022 1:12 AM] the.mightydill
i need to run it with sudo so i can edit grub.cfg because vim is too complicated for this task


[9/6/2022 1:13 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-809A3.png


[9/6/2022 1:13 AM] the.mightydill
gedit? thanks


[9/6/2022 1:13 AM] the.mightydill
sorry lol

{Reactions}
👍 

[9/6/2022 1:14 AM] the.mightydill
alright, rebooting into grub

{Reactions}
👍 

[9/6/2022 1:32 AM] the.mightydill
FUCK


[9/6/2022 1:32 AM] the.mightydill
FUCK


[9/6/2022 1:32 AM] the.mightydill
FUCK


[9/6/2022 1:32 AM] the.mightydill
@tux-linux HELP


[9/6/2022 1:33 AM] the.mightydill
i have a fuckin BSOD


[9/6/2022 1:37 AM] the.mightydill
trying somethingm


[9/6/2022 1:37 AM] tux_linux
reason?


[9/6/2022 1:37 AM] the.mightydill
some driver


[9/6/2022 1:37 AM] the.mightydill
SYSTEM_THREAD_EXCEPTION_NOT_HANDLED


[9/6/2022 1:37 AM] the.mightydill
doing something brb


[9/6/2022 1:38 AM] tux_linux
is your pc overheating


[9/6/2022 1:42 AM] the.mightydill
no


[9/6/2022 1:42 AM] the.mightydill
its a driver


[9/6/2022 1:42 AM] the.mightydill
causing the problem


[9/6/2022 1:42 AM] the.mightydill
h e l p


[9/6/2022 1:43 AM] the.mightydill
ok reinstalling windows, deleting ubuntu because honestly dual boot is way too hard


[9/6/2022 1:43 AM] tux_linux
wait


[9/6/2022 1:43 AM] the.mightydill
ok


[9/6/2022 1:43 AM] tux_linux
you probably overwrote a driver stored in a blob in a random place


[9/6/2022 1:43 AM] the.mightydill
maybe


[9/6/2022 1:43 AM] tux_linux
so you can download your oem windows iso


[9/6/2022 1:43 AM] the.mightydill
oem?????


[9/6/2022 1:43 AM] tux_linux
and install it on the windows partition


[9/6/2022 1:43 AM] the.mightydill
ok


[9/6/2022 1:43 AM] the.mightydill
trying


[9/6/2022 1:44 AM] tux_linux
keep ubuntu


[9/6/2022 1:44 AM] the.mightydill
ok


[9/6/2022 1:44 AM] the.mightydill
oem iso??


[9/6/2022 1:44 AM] the.mightydill
i'll just reinstall


[9/6/2022 1:44 AM] the.mightydill
brb


[9/6/2022 1:45 AM] tux_linux
keep dual boot


[9/6/2022 1:45 AM] the.mightydill
ok


[9/6/2022 1:45 AM] the.mightydill
keeping all my stuff


[9/6/2022 1:45 AM] the.mightydill
or... trying


[9/6/2022 1:45 AM] tux_linux
maybe the default iso will work


[9/6/2022 1:45 AM] the.mightydill
i have that


[9/6/2022 1:45 AM] the.mightydill
ok rebooting


[9/6/2022 1:45 AM] the.mightydill
bye


[9/6/2022 1:45 AM] tux_linux
just install it on the default partition


[9/6/2022 1:45 AM] tux_linux
(windows partition)


[9/6/2022 1:45 AM] the.mightydill
👍


[9/6/2022 1:55 AM] the.mightydill
BRO IM FUCKED


[9/6/2022 1:56 AM] the.mightydill
i need my mom's admin password to reinstall


[9/6/2022 1:56 AM] the.mightydill
and she's asleep


[9/6/2022 1:56 AM] the.mightydill
also if i ask her she'll make me only use windows which is understandable @tux-linux


[9/6/2022 1:56 AM] the.mightydill
i'll just make a linux vm i guess


[9/6/2022 2:15 AM] tux_linux
That's nonsense


[9/6/2022 2:15 AM] tux_linux
There must be a way to reset it via uefi firmware


[9/6/2022 2:17 AM] tux_linux
what's the error you see


[9/6/2022 2:18 AM] tux_linux
you... you didn't use the built-in settings 'reinstall' option I hope?


[9/6/2022 2:58 AM] the.mightydill
ok so i was going to get the password from her


[9/6/2022 2:58 AM] the.mightydill
and


[9/6/2022 2:59 AM] the.mightydill
opened windows and it... worked??


[9/6/2022 2:59 AM] the.mightydill
wtf


[9/6/2022 2:59 AM] tux_linux
good?


[9/6/2022 2:59 AM] the.mightydill
probably a fluke... crossing my fingers


[9/6/2022 3:00 AM] the.mightydill
the time is 7 hours ahead...


[9/6/2022 3:00 AM] the.mightydill
and fingerprint login is gone


[9/6/2022 3:00 AM] the.mightydill
rebooting


[9/6/2022 3:00 AM] tux_linux
that's linux ntp sync


[9/6/2022 3:00 AM] the.mightydill
it's not safe mode


[9/6/2022 3:00 AM] the.mightydill
oh ok


[9/6/2022 3:00 AM] the.mightydill
let me reboot to see if it actually works


[9/6/2022 3:00 AM] tux_linux
there is worse than not having fingerprint scanning for login


[9/6/2022 3:02 AM] the.mightydill
yeah i meant that a problem might have been causing it


[9/6/2022 3:02 AM] the.mightydill
but THANK GOD WINDOWS WORKS and fingerprint is back btw

{Reactions}
👍 

[9/6/2022 3:02 AM] the.mightydill
how do i fix the ntp sync thing


[9/6/2022 3:02 AM] the.mightydill
hwclock?


[9/6/2022 3:02 AM] tux_linux
ntpdate


[9/6/2022 3:02 AM] the.mightydill
ok


[9/6/2022 3:03 AM] tux_linux
https://github.com/Szybet/rootfs/blob/master/usr/local/bin/timesync.sh

{Embed}
https://github.com/Szybet/rootfs/blob/master/usr/local/bin/timesync.sh
rootfs/timesync.sh at master · Szybet/rootfs
InkBox OS root filesystem. Contribute to Szybet/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-BA917


[9/6/2022 3:04 AM] the.mightydill
linux time is correct


[9/6/2022 3:04 AM] the.mightydill
and DAMNNNN ubuntu boots SO FAST

{Reactions}
👍 

[9/6/2022 3:15 AM] the.mightydill
how do i find out what my fingerprint sensor is


[9/6/2022 3:15 AM] the.mightydill
(what command?)


[9/6/2022 3:15 AM] the.mightydill
thanks!

{Reactions}
👍 

[9/6/2022 3:15 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4919F.png


[9/6/2022 3:16 AM] tux_linux
you should use lspci


[9/6/2022 3:16 AM] the.mightydill
alright


[9/6/2022 3:17 AM] the.mightydill
not lshw?


[9/6/2022 3:17 AM] tux_linux
i usually use lspci


[9/6/2022 3:18 AM] the.mightydill
hmmm nothing about fingerprints or sensors


[9/6/2022 3:19 AM] tux_linux
output?


[9/6/2022 3:19 AM] the.mightydill
too long to send and spectacle doesnt seem to be working... one second

{Reactions}
👍 

[9/6/2022 3:20 AM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DFC02.png


[9/6/2022 3:22 AM] the.mightydill
nothing, right? maybe SMBus


[9/6/2022 3:22 AM] the.mightydill
oh nope


[9/6/2022 3:23 AM] tux_linux
i don't know


[9/6/2022 3:23 AM] tux_linux
maybe platform security processor


[9/6/2022 3:23 AM] tux_linux
but I wouldn't bother


[9/6/2022 3:23 AM] the.mightydill
that's probably tpm


[9/6/2022 3:24 AM] the.mightydill
google says it isnt supported


[9/6/2022 3:24 AM] the.mightydill
oh well, not a big loss

{Reactions}
👍 

[9/6/2022 3:27 AM] wishindo
Fingerprint readers are usually USB-attached (though I think the Linux library for such devices only supports USB readers, so no i2c ones). What computer has the FP reader attached via PCIe?


[9/6/2022 3:55 AM] tux_linux
After 8 hours of work, we have line spacing!

{Attachments}
/mnt/data/projects/git/conversations/media/linespacing-85FF9.png

{Reactions}
😎 (2) 

[9/6/2022 3:56 AM] tux_linux
this has taken me more time than I would have liked to admit


[9/6/2022 5:18 AM] the.mightydill
timesync.sh didnt work


[9/6/2022 5:19 AM] the.mightydill
heyyyyy nice! good job :D


[9/6/2022 5:21 AM] tux_linux
Define "doesn't work"


[9/6/2022 5:21 AM] tux_linux
But I also ended up breaking font size + font, so not great


[9/6/2022 5:24 AM] the.mightydill
windows time is still wrong


[9/6/2022 5:24 AM] the.mightydill
welp...


[9/6/2022 5:27 AM] the.mightydill
changed it in bios


[9/6/2022 5:56 AM] ninuje
Windows needs to be asked very insistently to switch to an UTC hardware clock if you're dual-booting

{Reactions}
👍 (2) 

[9/6/2022 5:56 AM] ninuje
It defaults to localtime otherwise, which is bananas.


[9/6/2022 5:57 AM] ninuje
(And not what Linux expects unless you ask very insistently, which is a terrible idea ;p)


[9/6/2022 5:58 AM] ninuje
IIRC, there's no sane way to do that via the UI, so you can probably find a regedit tweak in something like the Arch or Gentoo wiki


[9/6/2022 5:59 AM] ninuje
You might find older comments saying this requires disabling time sync in Windows. IIRC, that's wrong, but then again, I don't give a crap about ntp on windows, so I might have killed it and forgotten about it 😉


[9/6/2022 9:31 AM] szybet
how did you did line spacing?


[9/6/2022 9:31 AM] szybet
changing html code or the qtextedit?


[9/6/2022 1:10 PM] tux_linux
no, worse


[9/6/2022 2:28 PM] szybet
then how...


[9/6/2022 2:40 PM] tux_linux
QTextBlockFormat


[9/6/2022 2:40 PM] tux_linux
I'm developing a fix
Prototype works


[9/6/2022 2:52 PM] szybet
oh


[9/6/2022 2:52 PM] szybet
so its actually the proper way to do this


[9/6/2022 6:47 PM] szybet
http://pbchess.vlasovsoft.net/en/index.html


[9/6/2022 6:47 PM] szybet
did you knew about it?


[9/6/2022 6:47 PM] szybet
many qt apps


[9/6/2022 6:49 PM] szybet
not open source


[9/6/2022 6:49 PM] szybet
-_-


[9/6/2022 6:56 PM] szybet
@tux-linux

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7701D.png


[9/6/2022 6:56 PM] szybet
im going to replace all crappy built in apps


[9/6/2022 6:56 PM] szybet
qalculate is complicated to compile, and wont work good anyway


[9/6/2022 6:57 PM] szybet
and this calculator needs some ui tweaks and thats it


[9/6/2022 7:07 PM] tux_linux
I am trying to compile qalculate


[9/6/2022 7:07 PM] tux_linux
I got very far


[9/6/2022 7:07 PM] szybet
i think its not worth it


[9/6/2022 7:07 PM] szybet
the current calculator is good, it needs some fixes tho


[9/6/2022 7:08 PM] tux_linux
Qalculate is 100x better


[9/6/2022 7:09 PM] szybet
its not worth spend the time porting it so it will work fine


[9/6/2022 7:30 PM] aryetis
I remember this website, it used to have more... sokoboan, reversi, a calculator (yes for real)


[9/6/2022 7:30 PM] szybet
meh that its closed


[9/6/2022 7:30 PM] szybet
:(


[9/6/2022 7:32 PM] aryetis
https://www.youtube.com/watch?v=JsOl_VYOqRE

{Embed}
Сергей Власов
https://www.youtube.com/watch?v=JsOl_VYOqRE
Applications and games on Kobo Touch, Glo, Mini, Aura
http://www.mobileread.com/forums/showthread.php?t=201632
/mnt/data/projects/git/conversations/media/sddefault-A888F.jpg


[9/6/2022 7:33 PM] szybet
aaaaaaaaaaaaaaaaaaaaaaa i want the codeeeeeeee


[9/6/2022 7:33 PM] aryetis
shoot a mail to the guy


[9/6/2022 7:33 PM] aryetis
maybe he'll answer


[9/6/2022 7:37 PM] aryetis
But I also remember having to pay for those sooooo


[9/6/2022 7:37 PM] szybet
😂 ...


[9/6/2022 8:07 PM] szybet
im trying to tear plato's sketch apart from plato

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1D304.png

{Reactions}
👍 

[9/6/2022 8:07 PM] szybet
🥴


[9/6/2022 10:27 PM] the.mightydill
💀 bernie sanders in #dev


[9/6/2022 10:27 PM] szybet
for me its only a meme


[9/6/2022 10:28 PM] the.mightydill
yeah i didnt even know who bernie was until the meme


[9/6/2022 10:50 PM] the.mightydill
im in french class 💀


[9/6/2022 10:50 PM] the.mightydill
nicolas can just teach me honestly


[9/6/2022 10:56 PM] aryetis
oof good luck with that. You can always ask me if there's something you don't understand.


[9/6/2022 10:57 PM] szybet
i though the teachers job is to do that


[9/6/2022 11:30 PM] tux_linux
Courage, tu vas y parvenir !


[9/6/2022 11:48 PM] the.mightydill
oui :D


[9/6/2022 11:49 PM] the.mightydill
@tux-linux is this MAC address?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4B332.png


[9/6/2022 11:49 PM] the.mightydill
if it is... i'm freeeeeeee


[9/6/2022 11:51 PM] the.mightydill
man im connected to my mom's mobile hotspot while im in the car 💀


[9/6/2022 11:54 PM] tux_linux
Yes


[9/6/2022 11:54 PM] tux_linux
You shouldn't use it


[9/6/2022 11:54 PM] the.mightydill
huh


[9/6/2022 11:54 PM] tux_linux
Your mom will be mad at you


[9/6/2022 11:54 PM] the.mightydill
no she let me


[9/6/2022 11:54 PM] tux_linux
Because you're eating data


[9/6/2022 11:54 PM] the.mightydill
:P


[9/6/2022 11:54 PM] tux_linux
Oh ok


[9/6/2022 11:54 PM] tux_linux
Good then


[9/6/2022 11:54 PM] the.mightydill
honestly i use her phone all the time so it doesnt make much of a difference


[9/6/2022 11:58 PM] tux_linux
windows is going to download updates without your consent


[9/6/2022 11:58 PM] tux_linux
there is probably a way to disable it, look it up


[9/7/2022 12:36 AM] the.mightydill
i was on ubuntu sooo

{Reactions}
👍 

[9/7/2022 12:36 AM] the.mightydill
:D


[9/7/2022 1:04 AM] the.mightydill
@tux-linux is windows update going to fuck ubuntu?


[9/7/2022 1:07 AM] aryetis
I never had any windows update mess with my linux part.


[9/7/2022 1:08 AM] aryetis
The worse windows could do (very very very unlikely) is update its bootloader in a way that mess up grub2 but you'll still have access to windows. And it would only take one ubuntu(or whatever linux distro) live session + a run of grub-repair to fix it.


[9/7/2022 1:12 AM] the.mightydill
yeah that's what i mean, it might fuck grub


[9/7/2022 1:34 AM] the.mightydill
i've had very bad luck before


[9/7/2022 1:36 AM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-00636.png
/mnt/data/projects/git/conversations/media/unknown-ABF36.png


[9/7/2022 1:36 AM] the.mightydill
im worried about "AMD System"


[9/7/2022 7:06 PM] szybet
```
kobo:/# strings /lib/libc.so.6 | grep GLIBC
GLIBC_2.4
GLIBC_2.5
GLIBC_2.6
GLIBC_2.7
GLIBC_2.8
GLIBC_2.9
GLIBC_2.10
GLIBC_2.11
GLIBC_2.12
GLIBC_2.13
GLIBC_2.14
GLIBC_2.15
GLIBC_2.16
GLIBC_2.17
GLIBC_2.18
GLIBC_PRIVATE
kobo:/# env LD_LIBRARY_PATH=/libs-sketch:/lib ./sketch-new-withoutfe 
./sketch-new-withoutfe: /lib/libc.so.6: version `GLIBC_2.28' not found (required by ./sketch-new-withoutfe)
./sketch-new-withoutfe: /lib/libc.so.6: version `GLIBC_2.25' not found (required by ./sketch-new-withoutfe)
./sketch-new-withoutfe: /lib/libm.so.6: version `GLIBC_2.27' not found (required by ./sketch-new-withoutfe)
kobo:/# 


```


[9/7/2022 7:06 PM] szybet
what the fu....


[9/7/2022 7:06 PM] szybet
@tux-linux any ideas?


[9/7/2022 9:03 PM] tux_linux
Glibc is too old


[9/7/2022 9:03 PM] tux_linux
Try with musl


[9/7/2022 9:03 PM] szybet
nope, already resolved it


[9/7/2022 9:04 PM] szybet
the toolchains glibc was too new

{Reactions}
👍 

[9/7/2022 9:04 PM] szybet
i needed an older toolchain


[9/7/2022 9:04 PM] szybet
are you willing to compile mupdf with musl :D?


[9/7/2022 10:22 PM] szybet
@tux-linux `/mnt/onboard/.kobo/version` is unmaintained i think?


[9/7/2022 10:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220907_222827-502E1.jpg


[9/7/2022 10:30 PM] szybet
well anyway


[9/7/2022 10:30 PM] szybet
almost working plato's sketch on inkbox os


[9/7/2022 10:31 PM] tux_linux
Great


[9/7/2022 10:32 PM] tux_linux
It's maintained on user apps
Not on default system


[9/7/2022 10:32 PM] tux_linux
How did you do


[9/7/2022 10:32 PM] szybet
https://github.com/Szybet/sketch-inkbox

{Embed}
https://github.com/Szybet/sketch-inkbox
GitHub - Szybet/sketch-inkbox: Draw sketches on e-paper - fork for ...
Draw sketches on e-paper - fork for inkbox. Contribute to Szybet/sketch-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/sketch-inkbox-C4ABE


[9/7/2022 10:33 PM] szybet
i teared apart plato's code and leaved only what neccesery for sketch


[9/7/2022 10:33 PM] tux_linux
But has it been updated since 5y?


[9/7/2022 10:34 PM] szybet
well, i updated it


[9/7/2022 10:34 PM] szybet
he was maintaining it in the main code


[9/7/2022 10:34 PM] szybet
added a menu etc


[9/7/2022 10:35 PM] szybet
now i teared it apart, im afraid that he will be mad for polluting such a great code


[9/7/2022 10:36 PM] szybet
its really complicated code, something like what you wanted at the beginning to use only fbink


[9/7/2022 10:36 PM] szybet
for example, sketch app will need a custom mupdf -> rust wrapper ( i mean libraries ) because plato uses mupdf for icons


[9/7/2022 10:37 PM] tux_linux
Ok good


[9/7/2022 10:37 PM] szybet
also, he uses mupdf for his viewer. maybe we could ask how he manages page cutting?


[9/7/2022 10:37 PM] tux_linux
I can review it


[9/7/2022 10:37 PM] szybet
you mean what


[9/7/2022 10:37 PM] szybet
+ its not ready, give me another day


[9/7/2022 10:38 PM] tux_linux
Well, I mean, fix spelling mistakes in comments, look closely at the code, etc.


[9/7/2022 10:39 PM] szybet
there are no spelling mistakes, i didn't writed any code, i just... transpanted it, cutted some things out etc


[9/7/2022 10:39 PM] szybet
also, compiling all of this is horrible


[9/7/2022 10:39 PM] szybet
as for looking at the code, you can read it for months and still dont understand some things, better leave it


[9/7/2022 10:39 PM] tux_linux
How many warnings


[9/7/2022 10:39 PM] szybet
its quality code, trust me


[9/7/2022 10:40 PM] tux_linux
I know it's quality code


[9/7/2022 10:40 PM] tux_linux
I thought you also added things
But ok


[9/7/2022 10:41 PM] szybet
from plato creators? none propably

because of me there are only `is never used` warnings

leave them, this can be a base for other apps if we need something really fast on eink


[9/7/2022 10:41 PM] szybet
only 85 warnings of unused things


[9/7/2022 10:41 PM] szybet
its less than inkbox


[9/7/2022 10:42 PM] tux_linux
Honestly, I never said stealing Plato code was fair
but ok


[9/7/2022 10:42 PM] tux_linux
InkBox warnings are more like deprecated functions that repeat themselves because of header files


[9/7/2022 10:43 PM] szybet
i mean, its open source. I choosed it because its the best. We should credit the creator

{Reactions}
👍 

[9/7/2022 10:44 PM] szybet
if he ever plans to, for example release his own os with plato, i would not have anything agains that he would use inkbox base


[9/7/2022 10:45 PM] szybet
if you want you can ask him if he is okay with this, if not how to do that it will be


[9/7/2022 10:46 PM] the.mightydill
just give plato credit


[9/7/2022 10:46 PM] the.mightydill
i mean... it's FOSS


[9/7/2022 10:46 PM] szybet
exactly


[9/7/2022 10:46 PM] the.mightydill
but asking is a good idea


[9/7/2022 10:47 PM] szybet
we tux-linux should ask him, me as the criminal who teared apart his code should be silent ;p


[9/7/2022 11:42 PM] tux_linux
ok, 3rd evening trying to understand QTextEdit


[9/7/2022 11:42 PM] tux_linux
i'm not saying it's a crime, I just think we ... may not deserve such a well-written piece of code


[9/7/2022 11:51 PM] szybet
but im saying its a crime, destroying it so much


[9/7/2022 11:59 PM] tux_linux
progress

{Attachments}
/mnt/data/projects/git/conversations/media/margins-5BEE9.png


[9/8/2022 12:32 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/b5fb88614120ec700d9b4580e52f7597f513e8cd
Qt being Qt...

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/b5fb88614120ec700d9b4580e52f7597f513e8cd
Reader: Add 'Line spacing' and 'Margins' options · Kobo-InkBox/inkb...
/mnt/data/projects/git/conversations/media/b5fb88614120ec700d9b4580e52f7597f513e8cd-DE059


[9/8/2022 3:55 AM] tux_linux
Look! 6th Nia person!
https://www.mobileread.com/forums/showpost.php?p=4254836&postcount=85

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A90EC.png

{Embed}
https://www.mobileread.com/forums/showpost.php?p=4254836&postcount=85
MobileRead Forums - View Single Post -  InkBox: a new open-source O...
MobileRead - the resource for mobile geeks seeking information and advice for keeping their gadgets happy.


[9/8/2022 3:57 AM] nonasuomy
That’s far more than the illusory Sony PRS-T1 people!

{Reactions}
😅 (2) 

[9/8/2022 4:00 AM] nonasuomy
+1 though to having a generic Home Assistant epaper controller!

{Reactions}
👍 

[9/8/2022 7:23 AM] szybet
i can help him out if he joins discord / matrix


[9/8/2022 7:24 AM] szybet
i dont like mobileread forums


[9/8/2022 7:28 AM] szybet
1 is already fixed, 2 idk, 3 is about writing a script


[9/8/2022 7:32 AM] szybet
good that we fixed xorg for him :p


[9/8/2022 10:27 AM] szybet
HEY maybe he is willing to help port kernel from andi, that way he can use a newer web browser


[9/8/2022 1:36 PM] pgaskin
why not?


[9/8/2022 1:58 PM] szybet
ui is the worst, thats first


[9/8/2022 1:58 PM] szybet
finding things on the forum is also a problem


[9/8/2022 2:00 PM] szybet
looking through a threat needs changing pages 8 times, like it couldnt be justt work as any website with scrolling / adding content


[9/8/2022 2:01 PM] szybet
too much soace is wasted, someonr types "ok cool" and it takes 1/6 of the screen for some reason


[9/8/2022 2:01 PM] szybet
and many other things


[9/8/2022 3:08 PM] the.mightydill
http://mobileread.mobi/


[9/8/2022 3:17 PM] szybet
thats a bit better


[9/8/2022 3:17 PM] szybet
but to my second point, i didnt found it before :p


[9/8/2022 3:42 PM] tux_linux
Midori works from 2.6.35.3-5.16


[9/8/2022 4:00 PM] the.mightydill
it's made for mobile devices


[9/8/2022 4:35 PM] szybet
yea, but why not firefox on a mever kernel?


[9/8/2022 4:35 PM] szybet
or falcon


[9/8/2022 4:35 PM] szybet
falcon is great, i use it daily on my tablet with atom cpu


[9/8/2022 4:36 PM] szybet
ask him if you can


[9/8/2022 5:38 PM] tux_linux
Forget about Firefox
Oom everywhere


[9/8/2022 9:11 PM] szybet
@tux-linux will we credit app source creators in inkbox?


[9/8/2022 9:12 PM] szybet
or do i have to add it to sketch internally


[9/8/2022 9:14 PM] szybet
coco maps creator also should be noticed


[9/8/2022 10:28 PM] tux_linux
I credit them in user app info


[9/8/2022 10:28 PM] szybet
wait, so sketch will also be an user app?


[9/8/2022 10:46 PM] tux_linux
Maybe
How much does it require


[9/8/2022 10:46 PM] tux_linux
Like, it's only a binary?


[9/8/2022 10:47 PM] szybet
1.7Mb without npx and rust nightly


[9/8/2022 10:47 PM] szybet
5.2Mb of icons, resorces, fonts mostly


[9/8/2022 10:48 PM] tux_linux
But can it be only a binary


[9/8/2022 10:48 PM] szybet
also it all goes to gui chroot


[9/8/2022 10:48 PM] szybet
no, it also needs other things


[9/8/2022 10:48 PM] tux_linux
Can it be run from a folder


[9/8/2022 10:48 PM] szybet
also 18Mb of not stripped libraries


[9/8/2022 10:48 PM] szybet
you mean?


[9/8/2022 10:48 PM] tux_linux
18M is way too much


[9/8/2022 10:49 PM] tux_linux
Strip them


[9/8/2022 10:49 PM] tux_linux
7M is already a lot


[9/8/2022 10:49 PM] tux_linux
It's the size of inkbox binary


[9/8/2022 10:49 PM] tux_linux
Can it be run from a folder with libs, resources and fonts inside


[9/8/2022 10:49 PM] szybet
yea

{Reactions}
👍 

[9/8/2022 10:49 PM] tux_linux
No external filesystem access required


[9/8/2022 10:49 PM] tux_linux
Ok


[9/8/2022 10:50 PM] tux_linux
It can be <= 7M?


[9/8/2022 10:50 PM] szybet
you mean?


[9/8/2022 10:50 PM] szybet
it needs to save sketches somewhere


[9/8/2022 10:50 PM] tux_linux
/data/onboard/sketches


[9/8/2022 10:50 PM] tux_linux
Actually the path of onboard in GUI chroot but you get it


[9/8/2022 10:51 PM] tux_linux
You answered my question


[9/8/2022 10:51 PM] szybet
good, i already set it like that


[9/8/2022 10:51 PM] tux_linux
Good


[9/8/2022 10:51 PM] tux_linux
So it's ready?


[9/8/2022 10:52 PM] szybet
yea, works perfectly


[9/8/2022 10:52 PM] szybet
now only adjust it to run from gui / user app


[9/8/2022 10:52 PM] tux_linux
Can you compile it without special flags and only a release build? Split program had segfaults with those


[9/8/2022 10:52 PM] tux_linux
Then send me a txz with all of it


[9/8/2022 10:52 PM] szybet
split?


[9/8/2022 10:52 PM] tux_linux
split-rs


[9/8/2022 10:52 PM] szybet
there is the repo


[9/8/2022 10:53 PM] tux_linux
Everything is there?


[9/8/2022 10:53 PM] szybet
i didn't pushed yet


[9/8/2022 10:53 PM] szybet
so wait


[9/8/2022 10:53 PM] tux_linux
Well push


[9/8/2022 10:53 PM] szybet
strip didn't do anything


[9/8/2022 10:53 PM] tux_linux
Traveling currently
Will be home in 30m


[9/8/2022 10:53 PM] szybet
libmupdf.so takes 14Mb


[9/8/2022 10:53 PM] tux_linux
Huh what


[9/8/2022 10:53 PM] szybet
maybe they are already


[9/8/2022 10:53 PM] szybet
idk


[9/8/2022 10:54 PM] tux_linux
Why do you need mupdf for a sketching program


[9/8/2022 10:54 PM] szybet
i already said it


[9/8/2022 10:54 PM] szybet
plato is using mupdf for icons / fonts maybe too


[9/8/2022 10:54 PM] tux_linux
Find the code that requires it and try to strip it off


[9/8/2022 10:54 PM] tux_linux
That would be really surprising


[9/8/2022 10:54 PM] szybet
nope, no chance


[9/8/2022 10:55 PM] tux_linux
Then it's too big


[9/8/2022 10:55 PM] szybet
too much work for such a thing


[9/8/2022 10:55 PM] szybet
im sure about it for 100%


[9/8/2022 10:55 PM] szybet
well then an user app


[9/8/2022 10:55 PM] tux_linux
Yes


[9/8/2022 10:55 PM] szybet
i only want the qt sketch app to dissapear


[9/8/2022 10:55 PM] tux_linux
The sketch app is fine
There is even an exit button


[9/8/2022 10:55 PM] szybet
its horrible


[9/8/2022 10:56 PM] szybet
i want its deletion


[9/8/2022 10:56 PM] tux_linux
It does what you'd expect it to do


[9/8/2022 10:56 PM] szybet
horribly


[9/8/2022 10:56 PM] tux_linux
Yes, but then what else can you have


[9/8/2022 10:56 PM] tux_linux
It weighs like <500K, perfect


[9/8/2022 10:56 PM] szybet
as with lightmaps i wanted then replace with coco maps, its the same with sketch


[9/8/2022 10:56 PM] szybet
and is horrible.


[9/8/2022 10:57 PM] tux_linux
Light maps was completely unusable
This is usable


[9/8/2022 10:57 PM] szybet
its not


[9/8/2022 10:57 PM] tux_linux
I have no problem with this as an userapp


[9/8/2022 10:57 PM] szybet
works horribly on eink, is laggy


[9/8/2022 10:58 PM] tux_linux
No?


[9/8/2022 10:58 PM] szybet
i didn't spend 3 days so that this horrible sketch app will be still there


[9/8/2022 10:58 PM] tux_linux
I will fix the stylesheet and file saving


[9/8/2022 10:58 PM] szybet
have you seen platos sketch in action?


[9/8/2022 10:58 PM] tux_linux
You didn't say it was horrible initially


[9/8/2022 10:59 PM] szybet
i said that 6 months ago


[9/8/2022 10:59 PM] tux_linux
Yes, it's awesome
But it's way too big for GUI bundle
Almost the size of python


[9/8/2022 10:59 PM] szybet
python was fine, this isin't?


[9/8/2022 11:00 PM] tux_linux
Python did text file parsing
Pretty essential


[9/8/2022 11:00 PM] szybet
you will use libmupdf.so in the future anyway, im sure about it.


[9/8/2022 11:00 PM] tux_linux
You compiled it for musl
So probably not


[9/8/2022 11:00 PM] tux_linux
Or you fixed that issue?


[9/8/2022 11:00 PM] szybet
no, sketch runs in /kobo


[9/8/2022 11:00 PM] szybet
chroot /kobo


[9/8/2022 11:00 PM] szybet
thats where i run it


[9/8/2022 11:01 PM] tux_linux
What toolchain


[9/8/2022 11:01 PM] szybet
a cool one


[9/8/2022 11:01 PM] szybet
arm-unknown-linux-gnueabihf


[9/8/2022 11:01 PM] szybet
it works okay?


[9/8/2022 11:01 PM] tux_linux
Gcc version?


[9/8/2022 11:01 PM] szybet
look into plato's repo


[9/8/2022 11:01 PM] szybet
i coppied the libs


[9/8/2022 11:02 PM] tux_linux
Can't really right now


[9/8/2022 11:02 PM] tux_linux
I will try to find a better qt one on GitHub
Having a built-in sketch app is fun


[9/8/2022 11:03 PM] tux_linux
What's the total size of your package?


[9/8/2022 11:03 PM] szybet
can i say the gcc version of the toolchain i use for sketch?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-86907.png


[9/8/2022 11:04 PM] szybet
you wont fine one, the problem is QPaint


[9/8/2022 11:04 PM] tux_linux
8.3.0 is ok


[9/8/2022 11:04 PM] szybet
you mean?


[9/8/2022 11:04 PM] tux_linux
Fonts resources libs binary


[9/8/2022 11:05 PM] szybet
20Mb~


[9/8/2022 11:05 PM] szybet
where 14Mb is mupdf lib


[9/8/2022 11:05 PM] tux_linux
Isn't there already a mupdf.so in the GUI rootfs?


[9/8/2022 11:05 PM] szybet
you said no because you couldn't compile it


[9/8/2022 11:05 PM] tux_linux
I could compile the binaries up to a certain point


[9/8/2022 11:06 PM] tux_linux
Some other tools didn't work


[9/8/2022 11:06 PM] tux_linux
I don't recall if I put the library or just the static bins


[9/8/2022 11:06 PM] szybet
i dont see it


[9/8/2022 11:06 PM] tux_linux
Ok


[9/8/2022 11:06 PM] szybet
so whats the decission?


[9/8/2022 11:07 PM] szybet
i plan using sketch as a part of qt note taking app, to take hand written ones


[9/8/2022 11:08 PM] tux_linux
Official decision: we release 2.0 as complete system images for every device, make everything upgradable, update the rootfs in the recoveryfs, make the upgrade system bullet proof, include Plato sketch in GUI bundle and put libmupdf.so in the GUI rootfs


[9/8/2022 11:09 PM] szybet
where is the part where you remove qt sketch app?


[9/8/2022 11:09 PM] szybet
🥹


[9/8/2022 11:09 PM] szybet
thats an interesting emote, discord


[9/8/2022 11:09 PM] tux_linux
It will be removed too


[9/8/2022 11:09 PM] szybet
good


[9/8/2022 11:09 PM] tux_linux
So will need to add that to todo


[9/8/2022 11:09 PM] tux_linux
Start studying how the upgrade system works maybe


[9/8/2022 11:10 PM] tux_linux
And install a recoveryfs on your device


[9/8/2022 11:10 PM] tux_linux
Easiest way: extract it from the system image


[9/8/2022 11:10 PM] tux_linux
p2


[9/8/2022 11:11 PM] szybet
well add this, and make it more precise


[9/8/2022 11:11 PM] szybet
sure, but i would like to focus on the frontend

{Reactions}
👍 

[9/8/2022 11:16 PM] szybet
as because of school, when do you plan 2.0 now?


[9/8/2022 11:16 PM] szybet
i also have less and less time every day


[9/8/2022 11:17 PM] szybet
donehttps://github.com/Szybet/sketch-inkbox

{Embed}
https://github.com/Szybet/sketch-inkbox
GitHub - Szybet/sketch-inkbox: Draw sketches on e-paper - fork for ...
Draw sketches on e-paper - fork for inkbox. Contribute to Szybet/sketch-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/sketch-inkbox-C4ABE


[9/8/2022 11:17 PM] szybet
also this note
everything works ( closing menu, saving things etc ) the only thing i…
…s missing is a launch script, which cleares the screen after exit ( i didn't figured it how to do this in ) and set the PRODUCT env variable, for nia its PRODUCT=luna ( see device.rs ). to launch overwrite also LD_LIBRARY_PATH for additionall libs


[9/8/2022 11:18 PM] szybet
i dont have the will to write a bash script 🥴


[9/8/2022 11:26 PM] tux_linux
soon


[9/8/2022 11:27 PM] szybet
and that is?


[9/8/2022 11:27 PM] tux_linux
idk


[9/8/2022 11:27 PM] tux_linux
before 2023


[9/8/2022 11:28 PM] szybet
thats


[9/8/2022 11:28 PM] szybet
pesymistic


[9/9/2022 1:14 AM] the.mightydill
and get rid of all the previous images


[9/9/2022 1:14 AM] the.mightydill
pls


[9/9/2022 1:14 AM] the.mightydill
:p


[9/9/2022 1:14 AM] the.mightydill
like, put them in a "legacy" page


[9/9/2022 10:34 AM] szybet
@tux-linux can callendar app be replaced with a xorg app?


[9/9/2022 12:58 PM] tux_linux
No
Qt or Rust <= 5M


[9/9/2022 12:59 PM] szybet
well then i dont think we will find one that makes sense


[9/9/2022 12:59 PM] szybet
the problem is the keyboard


[9/9/2022 12:59 PM] szybet
i dont want the one that is there... its like nothing


[9/9/2022 1:05 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220909-070532-F81AD.png


[9/9/2022 1:05 PM] szybet
i mean


[9/9/2022 1:06 PM] szybet
adding keyboard to a qt callendar app


[9/9/2022 1:06 PM] tux_linux
Yes

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220909-070635-55926.png


[9/9/2022 1:07 PM] szybet
so a xorg app? :D


[9/9/2022 1:07 PM] szybet
wait


[9/9/2022 1:07 PM] tux_linux
Just use this


[9/9/2022 1:07 PM] szybet
i dont know when


[9/9/2022 1:07 PM] szybet
but you improved the callendar view


[9/9/2022 1:07 PM] szybet
its okay, i leave it


[9/9/2022 1:08 PM] tux_linux
Yes
It's part of the design language reform


[9/9/2022 1:08 PM] szybet
cool then

{Reactions}
👍 

[9/9/2022 1:08 PM] szybet
im skipping it

{Reactions}
👍 

[9/10/2022 2:38 PM] szybet
@tux-linux as for the update redesign, we should use the recovery partition to dont use tmpfs


[9/10/2022 2:46 PM] szybet
also you forgot about my patches that i sended you


[9/10/2022 2:48 PM] szybet
also you didnt write things to the todo list


[9/10/2022 2:49 PM] szybet
most of them there are ready / arent implemented


[9/10/2022 5:55 PM] tux_linux
that's the plan


[9/10/2022 5:55 PM] tux_linux
send them again
will add them to todo discussion


[9/10/2022 5:55 PM] tux_linux
which ones


[9/10/2022 5:56 PM] szybet
update redesign for example


[9/10/2022 5:56 PM] szybet
there are here in the chat


[9/10/2022 5:56 PM] tux_linux
well, ok, that was decided only a few days ago


[9/10/2022 5:56 PM] tux_linux
we won't forget it


[9/10/2022 5:56 PM] szybet
i will


[9/10/2022 5:56 PM] szybet
we dont want the incidient as with split-rs ;p


[9/10/2022 5:57 PM] tux_linux
can I delegate you a quite critical issue in reader framework?


[9/10/2022 5:57 PM] szybet
it depends which one is it?


[9/10/2022 5:58 PM] tux_linux
clone my inkbox repo, read a book, flip the pages a bit and you will understand


[9/10/2022 5:58 PM] szybet
well describe the problem


[9/10/2022 5:58 PM] szybet
the official inkbox repo?


[9/10/2022 5:59 PM] tux_linux
it's hard to describe


[9/10/2022 5:59 PM] tux_linux
yes


[9/10/2022 5:59 PM] tux_linux
just look at the text while you're flipping pages


[9/10/2022 5:59 PM] szybet
well sure


[9/10/2022 5:59 PM] szybet
later or tommorow


[9/10/2022 5:59 PM] szybet
i need to learn for school

{Reactions}
👍 

[9/10/2022 6:00 PM] tux_linux
basically to apply text formatting I have to select all text in the qtextedit programatically; **there is no known way around it**, and using HTML like we did before for it doesn't work anymore
so it's very ugly on screen
I've been trying to implement ghostWidget, a widget that would just freeze the screen while it's doing then disappear when it's gone, but then it refreshed the screen which is not something we want

{Reactions}
👍 

[9/10/2022 6:13 PM] aryetis
I'm not sure exactly of what your problem is. But if it's because of the way the "selected text" looks can't you edit the stylesheet of the QTextEdit { selection-\*\*\* : \*\*\*} so it looks like it's not selected and switch back to a default stylesheet once your deed is done ?


[9/10/2022 6:14 PM] tux_linux
even if I did that, since the text is longer than the screen, the qscrollarea would slide down because it's like the text was selected by hand


[9/10/2022 6:14 PM] tux_linux
but yes, it would already be a bit better
though still critical


[9/10/2022 6:16 PM] aryetis
can't you turn off the qscrollarea during that step ? catch the "scroll down" event and ignore it ? save the position and reset it afterwards ? All of those are hacky solution.


[9/10/2022 6:16 PM] tux_linux
at this point, hacky solutions are ok


[9/10/2022 6:17 PM] tux_linux
there are some issues: that would make the scrollbar disappear but it would already be there before, unless the text fits the screen
and how would you catch that


[9/10/2022 6:18 PM] aryetis
catch if the text fits the screen ?


[9/10/2022 6:18 PM] aryetis
or catch the "scroll events" ?


[9/10/2022 6:18 PM] tux_linux
even qt is wrong at that question


[9/10/2022 6:19 PM] tux_linux
sometimes it displays a scrollbar when it doesn't need to at all


[9/10/2022 6:19 PM] tux_linux
yes, maybe


[9/10/2022 6:19 PM] tux_linux
thanks for the idea


[9/10/2022 6:22 PM] szybet
there is a fix for that


[9/10/2022 6:22 PM] aryetis
might be worth to take a look at QScrollArea and see how they handle it then / when they decide to show the scrollarea.
If it's text only they're probably using QFontMetricsF and boundingRect to test if the text fits. Doing something similar-ish here to scale my font to fit its label/button <https://git.hijackedbrain.com/hijackedbrain/Obenkyobo/src/branch/master/Src/Tools.cpp#L254>
(whole project is a mess I'm still refactoring it, sorry about that)


[9/10/2022 6:24 PM] tux_linux
inkbox is more of a mess than your project, I think


[9/10/2022 6:25 PM] aryetis
not quite the same scale too ^^"


[9/10/2022 6:26 PM] tux_linux
some parts are very well-written IMO (example: userapps, localLibrary, homeWidget, etc.) but others will need a complete or partial rewrite in the future


[9/10/2022 10:26 PM] szybet
kobo nia touch input died again

{Reactions}
😐 

[9/10/2022 10:26 PM] szybet
maybe because of my  hardware modyfications... idk


[9/10/2022 10:26 PM] szybet
sad that niluje didnt answered


[9/11/2022 12:23 AM] szybet
@tux-linux you mean that the text becomes black when you select it?


[9/11/2022 12:24 AM] szybet
while doing something


[9/11/2022 12:24 AM] tux_linux
When you turn the page


[9/11/2022 12:24 AM] szybet
also - you can't change the font without generating the book one more time with mutool - everything is messed up


[9/11/2022 12:24 AM] tux_linux
?


[9/11/2022 12:25 AM] szybet
when you change the font the text wont fit the screen


[9/11/2022 12:25 AM] szybet
because mutool generated the html pages for a diffrent size of the font


[9/11/2022 12:26 AM] tux_linux
It's always been like that? And fonts have nothing to do with mutool


[9/11/2022 12:27 AM] szybet
```
kobo:~# cat /kobo/mnt/onboard/.adds/inkbox/epub.sh 
#!/bin/sh

# Arguments        Examples
# 1 - Font size        12
# 2 - Page width    600
# 3 - Page height    800
# 4 - Page number    22
# 5 - Get total pages number

if [ -z "${5}" ]; then
    cat /run/page | tr -d '\n\t' | system/bin/grep -o -P "<div id=\"page${4}\">.*?</div>" | busybox-initrd sed 's/<h3>/<p>/g; s/<\/h3>/<\/p>/g' > /inkbox/book/page
else
    # N is the last page number
    /usr/local/bin/mutool convert -X -F xhtml -S ${1} -W ${2} -H ${3} -o /run/page /run/book.epub 1-N
    sed -n '/div id="page/h;${x;p;}' /run/page | sed 's/[^0-9]*//g' > /run/epub_total_pages_number
fi
```


[9/11/2022 12:27 AM] szybet
nothing?


[9/11/2022 12:27 AM] tux_linux
Oh, that


[9/11/2022 12:27 AM] szybet
whats the argument to mutool


[9/11/2022 12:27 AM] szybet
yea


[9/11/2022 12:27 AM] tux_linux
Ok, will change that


[9/11/2022 12:27 AM] szybet
remove font changing in reader and make a small demo of it in settings


[9/11/2022 12:27 AM] szybet
how the text will look


[9/11/2022 12:28 AM] tux_linux
Huh?


[9/11/2022 12:28 AM] tux_linux
No


[9/11/2022 12:28 AM] tux_linux
And what's "everything is messed up"?


[9/11/2022 12:28 AM] tux_linux
It works on the latest commit with me


[9/11/2022 12:29 AM] szybet
i meant the font thing


[9/11/2022 12:29 AM] tux_linux
...ok


[9/11/2022 12:29 AM] szybet
so how will you manage that


[9/11/2022 12:29 AM] tux_linux
I will input a font size argument to mutool


[9/11/2022 12:30 AM] szybet
and?..............


[9/11/2022 12:30 AM] tux_linux
What else do you want to know


[9/11/2022 12:30 AM] szybet
i dont think you understand


[9/11/2022 12:30 AM] szybet
this script generates the whole book


[9/11/2022 12:31 AM] szybet
when font changes - the whole book needs to be regenerated  in mutool


[9/11/2022 12:31 AM] szybet
and as it changes, the text on pages also moved


[9/11/2022 12:31 AM] tux_linux
Oh ok yes


[9/11/2022 12:31 AM] szybet
so making it in reader makes no sense


[9/11/2022 12:31 AM] szybet
so will you do it as i want in settings?


[9/11/2022 12:31 AM] szybet
as for the selection - why are you seleting the text?


[9/11/2022 12:32 AM] tux_linux
did you read the message I shared three times?


[9/11/2022 12:32 AM] tux_linux
and did you look at the commit?


[9/11/2022 12:34 AM] tux_linux
sometimes the user may just be annoyed he can't read a word because it's darker and no frontlight and just wants to temporarily raise the font size, wouldn't want to reopen the whole book for this


[9/11/2022 12:34 AM] szybet
```
basically to apply text formatting I have to select all text in the qtextedit programatically; there is no known way around it, and using HTML like we did before for it doesn't work anymore

```
this? there are no specifics


[9/11/2022 12:34 AM] tux_linux
what?


[9/11/2022 12:34 AM] tux_linux
and this


[9/11/2022 12:35 AM] szybet
arround 800~ lines of code, i came here to fix one thing. I want to know what to look for


[9/11/2022 12:36 AM] szybet
okay, sure but a base font should be set in settings to make the pages fit. If the user wants a bigger font, sure but then every page will be messed up, so a "back to default" button is needed


[9/11/2022 12:37 AM] tux_linux
i will think about it


[9/11/2022 12:38 AM] szybet
fitting pages is already problematic, dont make it worse


[9/11/2022 12:39 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AF76B.png


[9/11/2022 12:39 AM] szybet
okay, so you need to get a `QTextBlockFormat` of the enrite text, right?


[9/11/2022 12:40 AM] tux_linux
that's not the issue
the issue is that I need to selectAll before applying things such as text alignment or it only applies to a paragraph (it also happens with html tags, so it is the only option probably)


[9/11/2022 12:41 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-95E64.png


[9/11/2022 12:41 AM] szybet
by select all you mean this?


[9/11/2022 12:41 AM] tux_linux
no


[9/11/2022 12:41 AM] tux_linux
look in `setTextProperties` it's there


[9/11/2022 12:42 AM] tux_linux
the reason those two functions are almost identical is because line spacing and margins must be applied at once, not separately, otherwise one overwrites the other


[9/11/2022 12:45 AM] szybet
wtf qt


[9/11/2022 12:48 AM] szybet
only alligment?


[9/11/2022 1:05 AM] tux_linux
Yes I think


[9/11/2022 1:10 AM] szybet
first solution i found:

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CA0E5.png


[9/11/2022 1:10 AM] szybet
this should be used before setting any text


[9/11/2022 1:20 AM] szybet
another solution:
qtextedit ->
qtextdocument ->

then
get a QList<QTextFormat> from allFormats() 

then for every toBlockFormat() call setAlignment()


[9/11/2022 1:21 AM] szybet
also html way:
https://stackoverflow.com/questions/33585593/text-alignment-not-working-in-sethtml-in-qtextdocument

{Embed}
https://stackoverflow.com/questions/33585593/text-alignment-not-working-in-sethtml-in-qtextdocument
Text alignment not working in setHTML in QTextDocument?
I tried aligning my text using both CSS and HTML but none of them work. Somehow HTML align attribute works for h1 and h2 but not for div or span.

QTextDocument doc;
doc.setDefaultStyleSheet("div{ ...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[9/11/2022 1:26 AM] szybet
also ***the easiest solution :p***


[9/11/2022 1:27 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B3F0C.png


[9/11/2022 1:27 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CC3CE.png


[9/11/2022 1:27 AM] szybet
https://doc.qt.io/qt-5/stylesheet-reference.html#selection-color-prop


[9/11/2022 1:27 AM] szybet
ok im going to sleep


[9/11/2022 1:27 AM] szybet
do you want me to try to implement one of those solutions?


[9/11/2022 1:28 AM] szybet
if yes, only if this will be implemented ;p


[9/11/2022 2:42 AM] tux_linux
Yes but you still get problems because the scroll area will scroll down because of the selection


[9/11/2022 2:45 AM] tux_linux
Thanks for investigating the issue
I would really want to stick to the qt way, it already has caused too much issues


[9/11/2022 9:57 AM] szybet
what


[9/11/2022 1:46 PM] tux_linux
When text overflows the screen
selectAll will make it scroll down
Because it's like it you would do it by hand


[9/11/2022 2:15 PM] szybet
disable the scroll bar before it?


[9/11/2022 2:30 PM] szybet
can you apply my patches for settings? i would like to fix the scroll bar there without uncertain commits


[9/11/2022 3:09 PM] tux_linux
I said to only fix spinboxes in settings


[9/11/2022 3:10 PM] szybet
spinboxes*


[9/11/2022 3:10 PM] szybet
well i want to fix scroll bars everywhere


[9/11/2022 3:10 PM] tux_linux
Yes, I had forgot the word


[9/11/2022 3:11 PM] tux_linux
Send all your patches to #patches 
That way I won't lose them


[9/11/2022 3:12 PM] szybet
give me a patch for scroll bar fixes config


[9/11/2022 3:12 PM] tux_linux
.


[9/11/2022 3:13 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F5361.png


[9/11/2022 3:13 PM] szybet
i want to do this


[9/11/2022 3:14 PM] tux_linux
Yes, in a different patch


[9/11/2022 3:14 PM] szybet
Yes, and i want a config file to enable this option


[9/11/2022 3:15 PM] tux_linux
But what did you do in the settings patch? Did you touch scrollbars or not? I don't understand


[9/11/2022 3:15 PM] tux_linux
No need for a config file
It can always be enabled


[9/11/2022 3:15 PM] tux_linux
If it works


[9/11/2022 3:16 PM] szybet
only spinboxes


[9/11/2022 3:16 PM] szybet
+ there is the fix for ugly borders in wifi


[9/11/2022 3:16 PM] tux_linux
Ok


[9/11/2022 3:16 PM] tux_linux
Then why that?


[9/11/2022 3:17 PM] szybet
there might be situations that this will cut some text


[9/11/2022 3:17 PM] szybet
very unlikely


[9/11/2022 3:17 PM] szybet
i want to fix scroll bars


[9/11/2022 3:17 PM] szybet
in settings


[9/11/2022 3:17 PM] tux_linux
Explain how you will do this


[9/11/2022 3:17 PM] szybet
there are scroll bars


[9/11/2022 3:17 PM] szybet
too


[9/11/2022 3:18 PM] tux_linux
There will be no need for scroll bars in the redesign (probably)


[9/11/2022 3:18 PM] szybet
verticalScrollBar()->isVisible() and then math how much can it scroll, if only 1 small step, i will hide the scroll bar


[9/11/2022 3:18 PM] szybet
ok good


[9/11/2022 3:19 PM] tux_linux
Define "math"


[9/11/2022 3:20 PM] szybet
there are some functions


[9/11/2022 3:20 PM] szybet
you will see


[9/11/2022 3:20 PM] szybet
i still want this as an option


[9/11/2022 3:20 PM] tux_linux
Send me a patch and I will see


[9/11/2022 3:20 PM] tux_linux
Also please send your previous ones in #patches


[9/11/2022 3:23 PM] tux_linux
Are the two valid patches or one is a correction of the other?


[9/11/2022 3:23 PM] szybet
one is the correction of the pevious one


[9/11/2022 3:23 PM] tux_linux
Oh ok


[9/11/2022 3:24 PM] szybet
you need to apply both


[9/11/2022 3:24 PM] tux_linux
Ok


[9/11/2022 4:41 PM] szybet
@tux-linux working prototype
```qt
void wifilogger::on_allLogsText_textChanged()
{
    log("Entered allLogsText_textChanged", className);

    waitTimer->disconnect();
    waitTimer->stop();
    log("WaitTimer active: " + QVariant(waitTimer->isActive()).toString(), className);
    if(waitTimer->isActive() == false) {
        log("Launching timer", className);
        waitTimer->start(20);
    }
    // This is another function, using variables from here will cause problems
    connect(waitTimer, &QTimer::timeout, [&]() {
        waitTimer->stop();
        QString scrollbar = "allLogsText";

        log("Checking scrollbar for: " + scrollbar, className);
        log(scrollbar + " scrollbar isVisible: " + QVariant(ui->allLogsText->verticalScrollBar()->isVisible()).toString(), className);
        QScrollBar* scrollBarToCheck = ui->allLogsText->verticalScrollBar();

        log("Scroll bar data sliderPosition: " + QString::number(scrollBarToCheck->sliderPosition()), className);
        log("Scroll bar data maximum: " + QString::number(scrollBarToCheck->maximum()), className);
        log("Scroll bar data minimum: " + QString::number(scrollBarToCheck->minimum()), className);
        log("Scroll bar data singleStep: " + QString::number(scrollBarToCheck->singleStep()), className);
        log("Scroll bar data pageStep: " + QString::number(scrollBarToCheck->pageStep()), className);
    });
}
```
and this:


[9/11/2022 4:41 PM] szybet
```
11/09/2022 @ 16:40:42 | wifilogger: Entered allLogsText_textChanged
11/09/2022 @ 16:40:42 | wifilogger: WaitTimer active: false
11/09/2022 @ 16:40:42 | wifilogger: Launching timer
11/09/2022 @ 16:40:42 | wifilogger: Checking scrollbar for: allLogsText
11/09/2022 @ 16:40:42 | wifilogger: allLogsText scrollbar isVisible: true
11/09/2022 @ 16:40:42 | wifilogger: Scroll bar data sliderPosition: 0
11/09/2022 @ 16:40:42 | wifilogger: Scroll bar data maximum: 21
11/09/2022 @ 16:40:42 | wifilogger: Scroll bar data minimum: 0
11/09/2022 @ 16:40:42 | wifilogger: Scroll bar data singleStep: 20
11/09/2022 @ 16:40:42 | wifilogger: Scroll bar data pageStep: 537
```


[9/11/2022 4:42 PM] szybet
and on the screen is qtextedit with a slider that scrolls and shows nothing


[9/11/2022 4:42 PM] szybet
with math ( how many steps for maximum are needed by singleStep ) we can calculate this behaviour, and disable the scroll bar if needed


[9/11/2022 4:42 PM] szybet
will you aprove it?


[9/11/2022 4:43 PM] szybet
there is a really small chance it will cut text, thats why i want this as an option


[9/11/2022 4:46 PM] szybet
there can be a margin for example maximum is 21 for this, so 1 step and ~5% of the next is needed. For this dialog, we can set 50% of the next step to be also hided, but for reader where its better to show the scroll bar and not hide the text 0% of the next step


[9/11/2022 6:04 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-77934.png


[9/11/2022 6:04 PM] szybet
why


[9/11/2022 7:11 PM] ninuje
If you have an actual *detailed* question with context, ping me, otherwise I won't check, I don't have the bandwidth to do more than glance over here once in a blue moon


[9/11/2022 7:12 PM] szybet
well i have written it before

suddenly, when coming out of suspend the nia loses touch, `cat /dev/input/event1` outputs nothing, reboot fixes that

do you know anything about this / about a similar behaviour?


[9/11/2022 7:12 PM] ninuje
And I already answered no 😉


[9/11/2022 7:12 PM] ninuje
Unless it's an IR grid


[9/11/2022 7:12 PM] ninuje
Which isn't the case on a Nia, IIRC


[9/11/2022 7:13 PM] szybet
well i missed it somehow then


[9/11/2022 7:13 PM] szybet
not good then


[9/11/2022 7:23 PM] tux_linux
Did you check dmesg?


[9/11/2022 7:25 PM] szybet
after waking up dmesg is cleared ( thats how ipd works, if someone has a problem with this, go and fix this, i wasn't able to do this in 2 days ) so i dont think i will see there anything


[9/11/2022 7:25 PM] szybet
even if, what can i do about it


[9/11/2022 7:25 PM] tux_linux
Just don't clear dmesg temporarily?


[9/11/2022 7:25 PM] ninuje
don't clear the kernel log buffer, maybe?


[9/11/2022 7:25 PM] ninuje
😄


[9/11/2022 7:25 PM] tux_linux
Or run syslogd/klogd


[9/11/2022 7:26 PM] szybet
go and fix this then


[9/11/2022 7:26 PM] szybet
good luck


[9/11/2022 7:26 PM] tux_linux
?


[9/11/2022 7:26 PM] tux_linux
Just fake a success on every wake-up to debug


[9/11/2022 7:26 PM] tux_linux
If you don't want klogd


[9/11/2022 7:27 PM] szybet
i need dmesg to get errors if suspending outputet it there
and i dont want old errors to do anything so


[9/11/2022 7:27 PM] szybet
its more complicated, i dont remember


[9/11/2022 7:27 PM] tux_linux
You need to run syslogd, then klogd and it will show up in /var/log/messages


[9/11/2022 7:27 PM] szybet
this input problem is so rare that i would need to run a broken - debug ready ipd for a month to catch it


[9/11/2022 7:28 PM] szybet
+ there wont propablt be anything in ipd, + i cant do anything about it anyway


[9/11/2022 7:29 PM] tux_linux
..


[9/11/2022 7:29 PM] szybet
how would this help


[9/11/2022 7:29 PM] szybet
i propably run klogd in ipd


[9/11/2022 7:30 PM] tux_linux
It logs dmesg to a file


[9/11/2022 7:30 PM] tux_linux
Just launch it on startup and tell it to log to /data/onboard


[9/11/2022 7:31 PM] tux_linux
Or just to the default tmpfs location


[9/11/2022 7:31 PM] szybet
will it save everything even if dmesg is cleared?


[9/11/2022 7:31 PM] tux_linux
And you can check it via usbnet


[9/11/2022 7:31 PM] tux_linux
It **logs**


[9/11/2022 7:31 PM] tux_linux
Yes


[9/11/2022 7:32 PM] szybet
thats an idea


[9/11/2022 7:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220911_193513_HDR-51BA4.jpg


[9/11/2022 7:35 PM] szybet
any idea for special characters button?


[9/11/2022 7:36 PM] szybet
?123 is a bad idea


[9/11/2022 7:36 PM] szybet
what is the d doing there ;p


[9/11/2022 7:38 PM] tux_linux
Did you replicate existing special characters in this layout?


[9/11/2022 7:39 PM] szybet
nope


[9/11/2022 7:39 PM] szybet
complete redesign


[9/11/2022 7:39 PM] tux_linux
Not even @


[9/11/2022 7:39 PM] szybet
i coppied android layout


[9/11/2022 7:39 PM] szybet
thats a question for you


[9/11/2022 7:45 PM] tux_linux
123


[9/11/2022 7:45 PM] szybet
still too big


[9/11/2022 7:45 PM] szybet
as you can see, it makes other keys move too


[9/11/2022 7:45 PM] szybet
maybe a smaller font


[9/11/2022 7:45 PM] szybet
idk


[9/11/2022 7:46 PM] tux_linux
It's already like that


[9/11/2022 7:47 PM] szybet
but 123 too much


[9/11/2022 7:47 PM] tux_linux
{#}


[9/11/2022 7:47 PM] szybet
maybe better


[9/11/2022 7:47 PM] tux_linux
Fix the d


[9/11/2022 7:48 PM] tux_linux
Looks good otherwise


[9/11/2022 7:49 PM] szybet
fixed already


[9/11/2022 7:49 PM] tux_linux
What does the code look like


[9/11/2022 7:49 PM] szybet
give me a path for full screen keyboard option


[9/11/2022 7:49 PM] szybet
https://tenor.com/view/borat-borat-very-nice-verynice-thumbs-up-gif-25080066

{Embed}
https://tenor.com/view/borat-borat-very-nice-verynice-thumbs-up-gif-25080066
/mnt/data/projects/git/conversations/media/borat-borat-very-nice-BA1BF.png


[9/11/2022 7:49 PM] szybet
i will send a patch later


[9/11/2022 7:50 PM] szybet
do i need to add this to settings too? they will be redesigned anyway


[9/11/2022 7:50 PM] tux_linux
What?


[9/11/2022 7:50 PM] tux_linux
Why a full screen keyboard
What do you mean


[9/11/2022 7:51 PM] szybet
did you see the one in sanki?


[9/11/2022 7:51 PM] tux_linux
No


[9/11/2022 7:51 PM] szybet
just like on android


[9/11/2022 7:52 PM] szybet
i just want a bigger keyboard because i cant type correctly


[9/11/2022 7:52 PM] szybet
as an option*


[9/11/2022 7:52 PM] tux_linux
Screenshot
fbgrab


[9/11/2022 7:52 PM] szybet
what


[9/11/2022 7:53 PM] tux_linux
Send a screenshot of your full screen keyboard implementation so I can see


[9/11/2022 7:55 PM] szybet
isint done yet


[9/11/2022 7:57 PM] szybet
still too big


[9/11/2022 7:57 PM] szybet
maybe only `#`?


[9/11/2022 7:57 PM] tux_linux
Ok


[9/11/2022 8:18 PM] szybet
nevermind about bigger keyboard


[9/11/2022 8:18 PM] szybet
its so size - in place fixed that its impossible


[9/11/2022 9:22 PM] tux_linux
did you try ... something?


[9/11/2022 9:51 PM] szybet
?


[9/11/2022 9:52 PM] szybet
also i asked if you want me to implement it, no answer was given


[9/11/2022 9:52 PM] szybet
i did other things, like the scroll bar thing that you didn't replied too


[9/11/2022 9:53 PM] szybet
and the keyboard


[9/11/2022 9:53 PM] tux_linux
you will still get a part of the issue


[9/11/2022 9:53 PM] szybet
which is?


[9/11/2022 9:53 PM] tux_linux
the textedit will scroll down then back up


[9/11/2022 9:53 PM] tux_linux
i am busy with school and I need to study that complicated code correctly


[9/11/2022 9:54 PM] szybet
sure im waiting


[9/11/2022 9:54 PM] tux_linux
you can implement the stylesheet selection color change but then you will have to fix this, probably


[9/11/2022 9:55 PM] szybet
h e l l o


[9/11/2022 9:55 PM] szybet
what with this?


[9/11/2022 9:56 PM] tux_linux
do you really thing it will prevent it from scrolling?


[9/11/2022 9:56 PM] szybet
god nevermind


[9/11/2022 9:56 PM] szybet
its a scroll bar


[9/11/2022 9:56 PM] szybet
we can scroll it back simply


[9/11/2022 9:56 PM] szybet
😆


[9/11/2022 9:57 PM] tux_linux
we must prevent it from scrolling in the first place


[9/11/2022 9:57 PM] tux_linux
the goal is to have the least screen updates as possible


[9/11/2022 9:58 PM] szybet
cant we just hide() the text?


[9/11/2022 9:58 PM] tux_linux
no, because then you get layout problems


[9/11/2022 9:58 PM] szybet
which are?


[9/11/2022 9:58 PM] tux_linux
especially with the reading options menu opened


[9/11/2022 9:58 PM] tux_linux
try it, can't really explain
everything widens up


[9/11/2022 9:59 PM] szybet
spawn a qtextedit, do what is needed and then replace the widget with the one on the screen


[9/11/2022 10:00 PM] tux_linux
but you still get problems in screen refreshes during the span of time the two are interchanged


[9/11/2022 10:00 PM] szybet
which are?


[9/11/2022 10:00 PM] szybet
in theory only the text should be replaced


[9/11/2022 10:00 PM] tux_linux
the textedit you mean?


[9/11/2022 10:00 PM] szybet
yes


[9/11/2022 10:00 PM] szybet
like copy the whole object to the real qtextedit


[9/11/2022 10:00 PM] szybet
what could go wrong


[9/11/2022 10:01 PM] tux_linux
everything


[9/11/2022 10:01 PM] szybet
qt]


[9/11/2022 10:01 PM] szybet
🥴


[9/11/2022 10:01 PM] tux_linux
?


[9/11/2022 10:01 PM] szybet
i will fix this


[9/11/2022 10:01 PM] szybet
one way or another


[9/11/2022 10:01 PM] szybet
new textedit

// do everything to him

ui->text = texteditthatisnew


[9/11/2022 10:02 PM] szybet
:D


[9/11/2022 10:02 PM] tux_linux
you can't do that


[9/11/2022 10:02 PM] tux_linux
probably


[9/11/2022 10:02 PM] szybet
who will stop me


[9/11/2022 10:02 PM] tux_linux
qt


[9/11/2022 10:02 PM] tux_linux
try it


[9/11/2022 10:03 PM] szybet
in the next days, i need to study too sometimes ;p

{Reactions}
👍 

[9/11/2022 10:06 PM] szybet
the todo list is slowly closing to things i cant do because i dont own this device / you need to implement what i prepared / deep backend things, so if you think 2.0 is before 2023, there will be propably the audio subsystem ready till that


[9/11/2022 10:06 PM] tux_linux
i would prefer not adding a 2 months to the estimated release date
for 2.1, sure


[9/11/2022 10:08 PM] szybet
what im trying to say, there are slowly not so many things to be made by me me for 2.0, so i will start to work on audio


[9/11/2022 10:08 PM] tux_linux
ok


[9/12/2022 3:12 PM] tux_linux
C init almost works


[9/12/2022 3:12 PM] szybet
nice


[9/12/2022 3:12 PM] szybet
all functionality?


[9/12/2022 3:12 PM] szybet
is it ready to test?


[9/12/2022 3:12 PM] szybet
is it faster?


[9/12/2022 3:13 PM] tux_linux
1. Yes for standard, will implement diagnostics boot soon
2. No, not committed changes yet
3. Yes


[9/12/2022 3:13 PM] szybet
3 how much


[9/12/2022 3:13 PM] tux_linux
A bit? I mean, I haven't benchmarked it a lot


[9/12/2022 3:13 PM] tux_linux
But it's certainly better than a monstrous shell script


[9/12/2022 11:51 PM] tux_linux
https://stackoverflow.com/questions/21955923/prevent-a-qtextedit-widget-from-scrolling-when-there-is-a-selection

{Embed}
https://stackoverflow.com/questions/21955923/prevent-a-qtextedit-widget-from-scrolling-when-there-is-a-selection
Prevent a QTextEdit widget from scrolling when there is a selection
I've researched this extensively but haven't found a satisfactory solution yet:

How do I append text at the end of QTextEdit widget without triggering a scroll to the bottom of the widget when eit...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[9/12/2022 11:51 PM] tux_linux
good


[9/13/2022 12:12 AM] szybet
thats what i was thinking about


[9/13/2022 12:12 AM] szybet
but


[9/13/2022 12:12 AM] szybet
this will flash the screen propably


[9/13/2022 12:15 AM] tux_linux
we will see


[9/13/2022 12:47 AM] tux_linux
but now we also have the text alignment problem


[9/13/2022 4:10 AM] tux_linux
Re: keyboard patch: looks good, but what is the Shift key supposed to do when you are in special characters mode?


[9/13/2022 4:11 AM] tux_linux
Because its current behavior is not intuitive


[9/13/2022 4:11 AM] tux_linux
(reverts back to letter keys)


[9/13/2022 4:11 AM] tux_linux
might be better to disable it


[9/13/2022 5:57 AM] tux_linux
Experimental widescreen keyboard implementation in to-do app (also experimental, I want it for my physics class, making lab reports without having a to-do list would be really hard)

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220913_035440044-9BF33.jpg


[9/13/2022 7:28 AM] szybet
idk your decission


[9/13/2022 7:28 AM] szybet
in the future it can switch for even more special characters


[9/13/2022 7:28 AM] szybet
is this code from inkbox?


[9/13/2022 7:29 AM] szybet
if yes, i want to see it


[9/13/2022 7:29 AM] szybet
anyway, will you implement this kryboard to inkbox


[9/13/2022 7:29 AM] szybet
i couldnt do it


[9/13/2022 8:43 AM] szybet
CRAP i dont think plato supports this kindle


[9/13/2022 8:43 AM] szybet
🥴😞


[9/13/2022 8:45 AM] szybet
for the nia porting it was adding 4 lines of code


[9/13/2022 8:45 AM] szybet
but yea...


[9/13/2022 12:34 PM] tux_linux
Woops


[9/13/2022 12:35 PM] tux_linux
One day


[9/13/2022 1:11 PM] szybet
we can try port it, if not, write to the author that you are willing to port it because of our goals

win win for everyonr


[9/13/2022 1:11 PM] szybet
?


[9/13/2022 1:12 PM] tux_linux
What code


[9/13/2022 1:12 PM] tux_linux
Oh, yes, it's a built-in app I'm doing


[9/13/2022 1:12 PM] szybet
did you coppied the code from inkbox


[9/13/2022 1:12 PM] szybet
or is it from scratch


[9/13/2022 1:12 PM] tux_linux
It's just another class


[9/13/2022 1:12 PM] szybet
so the keyboarf is coppied?


[9/13/2022 1:13 PM] tux_linux
It's the same keyboard


[9/13/2022 1:13 PM] tux_linux
It's not copied


[9/13/2022 1:13 PM] szybet
can i have a look at the code?


[9/13/2022 1:13 PM] szybet
then i will do it myself


[9/13/2022 1:14 PM] tux_linux
Soon


[9/13/2022 1:14 PM] szybet
im waiting then


[9/13/2022 1:42 PM] szybet
what is the reason once more that fbink in init needs to be packet with libc?


[9/13/2022 2:21 PM] tux_linux
what?


[9/13/2022 2:23 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/32b051b3c75f44e6472ca4d2a06a6d9c2d5ce733
heavy wip for to-do app
to embed the keyboard (some values need adjustments, I know, will do it later), just `global::keyboard::embed = false;`

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/32b051b3c75f44e6472ca4d2a06a6d9c2d5ce733
To-Do app: W.-I.-P. · Kobo-InkBox/inkbox@32b051b
/mnt/data/projects/git/conversations/media/32b051b3c75f44e6472ca4d2a06a6d9c2d5ce733-3C5FD


[9/13/2022 2:28 PM] szybet
csn you described more this commit?


[9/13/2022 2:28 PM] szybet
you touched apps


[9/13/2022 2:29 PM] tux_linux
Because I added an entry for Todo app?


[9/13/2022 2:30 PM] szybet
god i cant remember the glibc version we use


[9/13/2022 2:31 PM] szybet
only?


[9/13/2022 4:57 PM] szybet
` Home page: Remove items that arent in the database anymore ( moved or removed )` did you saw that actually?


[9/13/2022 5:10 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-9AE1F.png


[9/13/2022 5:10 PM] szybet
ouch


[9/13/2022 5:23 PM] tux_linux
did you see that
But what do you mean exactly?


[9/13/2022 5:24 PM] szybet
entry in the todo


[9/13/2022 5:24 PM] szybet
are you aware of it


[9/13/2022 5:24 PM] szybet
im trying out the viewer


[9/13/2022 5:24 PM] szybet
it doesnt scroll to the bottom


[9/13/2022 5:24 PM] szybet
only flashes


[9/13/2022 5:24 PM] tux_linux
It's still not good


[9/13/2022 5:24 PM] tux_linux
Sadly


[9/13/2022 5:25 PM] szybet
so only this flashing needs to be fixed then?


[9/13/2022 5:25 PM] tux_linux
Yes


[9/13/2022 5:25 PM] szybet
good


[9/13/2022 5:25 PM] tux_linux
Ideally alignment too


[9/13/2022 5:26 PM] szybet
you mean?


[9/13/2022 5:26 PM] szybet
what is the problem with alignment


[9/13/2022 5:28 PM] szybet
when you have time, look at this


[9/13/2022 5:44 PM] szybet
well selection flashing is fixed


[9/13/2022 5:44 PM] szybet
i dont see any problems with alignment


[9/13/2022 8:49 PM] tux_linux
Set alignment to justify and try to turn page


[9/13/2022 8:50 PM] szybet
every alignment works fine


[9/13/2022 8:50 PM] szybet
it would be really **easier** if you said whats the problem / bug and not "try it yourself"


[9/13/2022 10:41 PM] tux_linux
Normally when you turn a page the alignment resets to left then it's set to the setting defined by the user


[9/13/2022 10:42 PM] tux_linux
Thanks, will review it soon


[9/13/2022 10:46 PM] szybet
https://streamable.com/8gv9a6


[9/13/2022 10:46 PM] szybet
am i blind?


[9/13/2022 10:46 PM] szybet
where is the problem


[9/14/2022 1:45 AM] aryetis
inconsistent ammount of flashing maybe ? 
1/ first time he clicks "next page" it flashes twice, then none
2/ then he changes the alignement, click "next page" and it flashes once, and then it flashes twice
3/ etc
Also at 00:26 the text is weirdly cut off ? Why so much wasted space at the bottom of the page ? Can't it concatenate the two pages together ? Should it ? Maybe that's the correct way to display this ebook ? maybe not ?
I also don't see any glaring problems with the alignment otherwise.


[9/14/2022 2:28 AM] tux_linux
Congrats this is exactly what I wanted, even better


[9/14/2022 2:29 AM] tux_linux
@Aramir 3. Try to fix that yourself and come back, you will see how difficult it is 😉🥴


[9/14/2022 2:31 AM] tux_linux
The nightmare starts here...


[9/14/2022 7:35 AM] szybet
i added only 2 lines of code? i did nothing to solve your magic problrms that i didnt have


[9/14/2022 7:37 AM] szybet
the text is cutted off because i was messing with the size


[9/14/2022 7:37 AM] szybet
and its a weird book


[9/14/2022 7:37 AM] szybet
you know, french :D


[9/14/2022 7:37 AM] szybet
but mutool has some problems with cutting thr text tho


[9/14/2022 7:38 AM] szybet
about the flashing, we would need a way in the platform plugin to disable full screen refreshes for some time


[9/14/2022 9:42 AM] szybet
https://github.com/ghaerr/microwindows

{Embed}
https://github.com/ghaerr/microwindows
GitHub - ghaerr/microwindows: The Nano-X Window System
The Nano-X Window System. Contribute to ghaerr/microwindows development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/microwindows-E6184


[9/14/2022 9:42 AM] szybet
hmmm


[9/14/2022 10:29 AM] aryetis
XD I thought you were trying to illustrate a bug, I watched it many times to spot anything. I wasn't trying to sh*** on it 👍 .

{Reactions}
👍 

[9/14/2022 2:28 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/checklist-01E35.png
/mnt/data/projects/git/conversations/media/keyboard-FE563.png


[9/14/2022 2:30 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/afa7220f92ef091ec55d7342c711250f9cc21e85

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/afa7220f92ef091ec55d7342c711250f9cc21e85
To-Do app: Basic working prototype · Kobo-InkBox/inkbox@afa7220
/mnt/data/projects/git/conversations/media/afa7220f92ef091ec55d7342c711250f9cc21e85-50292


[9/14/2022 3:39 PM] szybet
checkboxes are too small


[9/14/2022 3:39 PM] szybet
😞


[9/15/2022 7:07 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/377cbe31f1979e8024445b3869330a3261c17694
yay
ready for my physics lab

{Attachments}
/mnt/data/projects/git/conversations/media/list-49756.png
/mnt/data/projects/git/conversations/media/home-A65B2.png

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/377cbe31f1979e8024445b3869330a3261c17694
To-Do app: Beta version · Kobo-InkBox/inkbox@377cbe3
/mnt/data/projects/git/conversations/media/377cbe31f1979e8024445b3869330a3261c17694-387F2


[9/15/2022 8:36 AM] szybet
looks good but


[9/15/2022 8:36 AM] szybet
b i g g e r c h e c k b u t t o n s😞


[9/15/2022 12:49 PM] tux_linux
It's a qlistwidget with check buttons.
So I need to study that a bit


[9/15/2022 12:52 PM] szybet
stylesheet should do that


[9/15/2022 12:52 PM] tux_linux
I will look into it


[9/15/2022 2:37 PM] tux_linux
It still scrolls but it's better
https://photos.app.goo.gl/ujk5ruXKjZRWhGL67

{Embed}
https://photos.app.goo.gl/ujk5ruXKjZRWhGL67
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/vDzI3cj-jE7U0dhoeg8EMpQZD8_78WEwl6VRPmH15a-15277


[9/15/2022 2:48 PM] szybet
why does it scroll?


[9/15/2022 2:48 PM] szybet
on the nia it doesnt


[9/15/2022 2:48 PM] szybet
well i cant help you with that


[9/15/2022 2:48 PM] szybet
i already said the solutions


[9/15/2022 2:49 PM] tux_linux
It's tolerable


[9/15/2022 3:06 PM] szybet
scroll bar shouldnt exist in the first place


[9/15/2022 3:33 PM] the.mightydill
it shouldn't


[9/15/2022 3:33 PM] the.mightydill
yeah


[9/17/2022 2:54 AM] tux_linux
I will implement the audio frontend for the Kindle
I will make a portable backend so it can easily be adapted for the Nia and your hardware
This picture got me inspired

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-121F9.png


[9/17/2022 11:15 AM] szybet
no...


[9/17/2022 11:15 AM] szybet
please focus on 2.0


[9/17/2022 11:15 AM] szybet
really


[9/17/2022 12:32 PM] szybet
i did most of the things that were for me as 2.0


[9/17/2022 12:32 PM] szybet
there are some missing because im waiting for you


[9/17/2022 12:32 PM] szybet
audio isint needed now...


[9/17/2022 2:15 PM] tux_linux
I will also review scrollbars + folders (hopefully) today


[9/17/2022 2:16 PM] tux_linux
I am also trying to compile Qt6 so we can upgrade to a newer version


[9/17/2022 2:20 PM] szybet
2.0 before sound support


[9/17/2022 2:20 PM] szybet
you said it yourself


[9/17/2022 2:21 PM] tux_linux
I think I changed my mind


[9/17/2022 2:21 PM] tux_linux
I will do other to-do list items while working on sound too


[9/17/2022 2:24 PM] tux_linux
and we can work on it together


[9/17/2022 2:50 PM] tux_linux
I told you not to do that

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A20E9.png


[9/17/2022 2:51 PM] tux_linux
on 600x800 devices it amounts to this

{Attachments}
/mnt/data/projects/git/conversations/media/settings-6F19B.png


[9/17/2022 2:51 PM] tux_linux
it's not easier to click


[9/17/2022 2:55 PM] tux_linux
you can use that instead

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-E653C.png


[9/17/2022 3:03 PM] szybet
okay


[9/17/2022 3:03 PM] szybet
it propablt is


[9/17/2022 3:04 PM] tux_linux
btw I didn't find a way to increase QListWidget checkbox size but now you can check the item simply by clicking on the text, which is much easier


[9/17/2022 3:06 PM] szybet
what if you increase the font size


[9/17/2022 3:08 PM] tux_linux
no, it stays the same size


[9/17/2022 3:11 PM] szybet
is there a function iconSize?


[9/17/2022 3:11 PM] tux_linux
it's not an icon


[9/17/2022 3:11 PM] tux_linux
it's another checkbox


[9/17/2022 3:11 PM] tux_linux
like, without the icon we usually use on checkboxes


[9/17/2022 9:44 PM] szybet
the buttons in the reader are bigger?


[9/17/2022 9:44 PM] szybet
yes, they are for sure


[9/17/2022 9:44 PM] szybet
why


[9/17/2022 9:57 PM] szybet
what will be the base of sound backend?


[9/17/2022 9:58 PM] szybet
mplayer has too many dependencies


[9/17/2022 9:58 PM] szybet
maybe mpg123


[9/17/2022 11:19 PM] szybet
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify

what is this.

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify
kernel/checksum-verify at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[9/18/2022 12:43 AM] tux_linux
A faster way to check if the software is genuine from the initrd
We already talked about it
I'm planning to improve it in the future or remove it, don't know yet
It's not phone home, doesn't send any data


[9/18/2022 12:44 AM] szybet
we talked, but i didn't knew it is already implemented


[9/18/2022 12:44 AM] szybet
:/


[9/18/2022 12:56 AM] tux_linux
It has been for one year


[9/18/2022 9:09 PM] tux_linux
` // If a book is missing, its propably because of >= idk`?


[9/18/2022 9:10 PM] szybet
you are authorized to read this comment only if a book is missing


[9/18/2022 9:10 PM] szybet
its a hint


[9/18/2022 9:10 PM] szybet
to where to look if something is messed up


[9/18/2022 9:10 PM] tux_linux
did it happen yet


[9/18/2022 9:12 PM] szybet
no


[9/18/2022 9:12 PM] szybet
this was just my though


[9/18/2022 9:12 PM] tux_linux
good


[9/18/2022 9:39 PM] tux_linux
you know that this isn't necessary?
```
this->deleteLater();
```


[9/18/2022 9:43 PM] szybet
it is


[9/18/2022 9:43 PM] szybet
i learned it the hard way in wifi


[9/18/2022 9:58 PM] tux_linux
`bookOptionsDialogWindow->setAttribute(Qt::WA_DeleteOnClose);`: exists


[9/18/2022 9:58 PM] szybet
i dont like it


[9/18/2022 9:58 PM] tux_linux
it always works


[9/18/2022 9:59 PM] tux_linux
it's not a matter of if you like it or not


[9/18/2022 9:59 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F2498.png


[9/18/2022 10:05 PM] szybet
i dont like it anyway


[9/18/2022 10:05 PM] szybet
if the code finishes, it cleanes after himself


[9/18/2022 10:05 PM] szybet
thats the way


[9/18/2022 10:10 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-8B01C.png


[9/18/2022 11:22 PM] szybet
no


[9/18/2022 11:23 PM] szybet
i dont trust it because of a small crab

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BD608.png

{Reactions}
👀 

[9/19/2022 6:09 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/cff3c2c69d4beeadf1cd646fe72dab3af74aa4b6
I added directory info in options dialog and several other UI fixes, there is no more stacked widget in bookOptionsDialog because it broke the UI and it can be done another way (simpler).
I would like to ask you to review it, as described in #bugs there are things that doesn't work. I know I probably have broken things with my review of the code, but it was really needed (variable names, UI, english, code style, etc.)
Please send patches instead of committing in the PR.
Thanks for the framework, it will be a good part of the local library. I added an option for it in settings
You will need to update the GUI bundle for the config directory to be created

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/cff3c2c69d4beeadf1cd646fe72dab3af74aa4b6
Folders in local library: W.-I.-P. · Kobo-InkBox/inkbox@cff3c2c
/mnt/data/projects/git/conversations/media/cff3c2c69d4beeadf1cd646fe72dab3af74aa4b6-B57FD


[9/19/2022 6:10 AM] tux_linux
Oh, I forgot to credit you in the commit
I will do it in the final stable one when bugs are fixed


[9/19/2022 7:26 PM] szybet
> You will need to update the GUI bundle for the config directory to be created 
why, thats bad


[9/19/2022 7:38 PM] tux_linux
I did not commit it yet
You already created yours, so actually it's fine


[9/19/2022 7:49 PM] szybet
make an else statement that if it doesnt exist create it


[9/19/2022 7:49 PM] szybet
just dont create problems for the future


[9/19/2022 8:51 PM] tux_linux
What's the problem? It's just that

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220919-145110-618D3.png


[9/19/2022 8:51 PM] szybet
oh its in the script


[9/19/2022 8:51 PM] szybet
okay sure


[9/20/2022 1:37 AM] tux_linux
Did you have the time to look at it?


[9/20/2022 6:35 AM] szybet
no


[9/20/2022 6:36 AM] szybet
exams spawned out of nowhere


[9/20/2022 6:36 AM] szybet
also starting from october i will have even less time


[9/20/2022 6:36 AM] szybet
so only weekends are free, propably


[9/20/2022 6:37 AM] szybet
so if you can, review scroll bars and one day ( soon ) if i have time i will do both


[9/20/2022 1:12 PM] tux_linux
I think scroll bars are ok
But the most urgent thing is folders


[9/20/2022 2:10 PM] szybet
i would still do scroll bars


[9/20/2022 2:10 PM] szybet
like, they are in the todo


[9/20/2022 2:10 PM] szybet
i know folders


[9/20/2022 2:10 PM] tux_linux
Ok, but InkBox literally can't work normally now
So this is a priority


[9/20/2022 2:10 PM] szybet
btw, is there anything else for me to do?


[9/20/2022 2:11 PM] szybet
sure🥴


[9/20/2022 2:11 PM] tux_linux
Folders


[9/20/2022 2:11 PM] szybet
anything else


[9/20/2022 2:41 PM] tux_linux
Onboard keyboard layout


[9/20/2022 2:41 PM] tux_linux
Did you send it at some point?


[9/20/2022 2:43 PM] tux_linux
And maybe fbdepth in ipd
You can see what bitdepth you're using with fbdepth -some-option, I don't recall which


[9/20/2022 2:44 PM] tux_linux
Follow the comments in the code to ensure it's setting the right one


[9/20/2022 3:32 PM] szybet
yesss


[9/20/2022 3:32 PM] szybet
fbdepth doesnt affect nia


[9/20/2022 3:32 PM] szybet
so i cant check if its correct


[9/20/2022 5:01 PM] tux_linux
Yes, you can still change it


[9/20/2022 5:01 PM] tux_linux
The important thing is just to check if it sets it correctly


[9/20/2022 6:32 PM] szybet
```qt
void localLibraryWidget::setupBooksListToggle(int pageNumber) {
    if(checkconfig("/mnt/onboard/.adds/inkbox/.config/21-local_library/folders") == true) {
        setupBooksListFolders(pageNumber);
    }
    else {
        setupBooksList(pageNumber);
    }
}
```


[9/20/2022 6:32 PM] szybet
you really like reading configs


[9/20/2022 6:32 PM] szybet
why just not read once?, save it to a bool


[9/20/2022 6:54 PM] szybet
**stop** removing log messages in my code


[9/20/2022 7:35 PM] tux_linux
Ok sorry I just thought it wouldn't be relevant


[9/20/2022 7:35 PM] tux_linux
You can add a public bool to locallibrarywidget.h


[9/20/2022 7:36 PM] szybet
there already is


[9/20/2022 7:36 PM] szybet
its the most important one i would say


[9/20/2022 7:38 PM] tux_linux
Yeah, convert it, my bad


[9/20/2022 8:37 PM] szybet
done


[9/20/2022 8:37 PM] szybet
works perfectly for me


[9/20/2022 8:37 PM] szybet
i resolved all your issues


[9/20/2022 8:38 PM] szybet
*and i do hope you first test, then edit the code?*


[9/20/2022 8:53 PM] tux_linux
Yes, I will test it


[9/20/2022 8:53 PM] tux_linux
Thanks


[9/22/2022 3:07 PM] tux_linux
When clicking "ecole"
It also segfaults when trying to go to the next page
It works with only one folder I think
I applied your patches upstream
I had 30s to take this picture, couldn't capture logs but I think it's fairly easy to reproduce (make 4 folders)

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220922_125513428-108D8.jpg


[9/22/2022 3:24 PM] szybet
it seems like you didnt applied them


[9/22/2022 3:24 PM] szybet
i will try anyway


[9/22/2022 3:25 PM] szybet
"*it works for me*"🥴


[9/22/2022 3:43 PM] tux_linux
I did


[9/22/2022 3:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220922-094441-ED080.png


[9/22/2022 3:46 PM] szybet
log("Database: \n" + jsonDocument.toJson(), className);


[9/22/2022 3:46 PM] szybet
thats an important log...


[9/22/2022 4:02 PM] tux_linux
Yeah but when you have 40+ books it floods the screen quickly


[9/22/2022 4:45 PM] szybet
those are still logs needed for me to debug folders


[9/22/2022 5:31 PM] tux_linux
Well ok, you can add it but comment it


[9/23/2022 4:56 PM] szybet
```
Sep 22 21:26:20 kobo user.err kernel: [ 1086.033807] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1


Sep 23 16:40:57 kobo user.warn kernel: [ 1089.899710] [<80071d38>] (free_irq) from [<8036a884>] (elan_touch_suspend+0xa0/0x114)
Sep 23 16:40:57 kobo user.warn kernel: [ 1089.899733] [<8036a884>] (elan_touch_suspend) from [<802dae38>] (dpm_run_callback+0x2c/0xc0)

Sep 23 16:40:57 kobo user.warn kernel: [ 1090.981503] elan ts starts in interrupt mode.

Sep 23 16:40:57 kobo user.warn kernel: [ 1091.201986] [elan_touch_report_data-603] Hello packet 55:55:55:55:ff:ff:ff:ff received

Sep 23 16:40:58 kobo user.err kernel: [ 1091.900470] dpm_run_callback(): elan_touch_suspend+0x0/0x114 returns 1
```
elan touch when it stopped working, all logs


[9/23/2022 4:57 PM] szybet
maybe trying to suspend too fast causes a bug


[9/23/2022 4:57 PM] szybet
idk


[9/23/2022 5:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20220923_171641-B42B6.mp4


[9/23/2022 5:20 PM] szybet
the lowerst resolution possible so discord will accept it


[9/23/2022 5:21 PM] szybet
it works for me, for all used quantity


[9/23/2022 5:21 PM] szybet
your error with next page looks like you didn't updated the binary, it was the first thing i fixed


[9/23/2022 5:23 PM] szybet
the only thing i can think of that nia is slow, so move 
```
    QTimer::singleShot(100, this, SLOT(setupDisplay()));
```
below ( now its before ) ( move it below the whole if else statement )
```
if(checkconfig("/mnt/onboard/.adds/inkbox/.config/21-local_library/folders") == false) {
```
if the folderFeatureEnabled isin't set, it will segfault for sure. but idk. calling it from signle shot here is weird anyway


[9/23/2022 5:29 PM] szybet
this all in:
```qt
localLibraryWidget::localLibraryWidget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::localLibraryWidget)
{
```
the first main function


[9/23/2022 6:30 PM] tux_linux
Ok thanks I will look into it this evening
I'm currently struggling with init


[9/23/2022 9:13 PM] ninuje
Definitely never saw it happen over here (but, admittedly, the only devices with an Elan panel I have are on sunxi)


[9/23/2022 9:14 PM] szybet
well, spamming suspend isint good for sure


[9/23/2022 9:14 PM] szybet
but, that would be a bug anyway


[9/23/2022 9:15 PM] szybet
what does elan actually stand for?


[9/23/2022 11:37 PM] szybet
what problem exactly


[9/23/2022 11:42 PM] tux_linux
read file function not actually reading any file


[9/23/2022 11:42 PM] tux_linux
And not being able to strip newlines because segfaults


[9/23/2022 11:43 PM] tux_linux
Check recent commit if you want to see where I'm at


[9/23/2022 11:44 PM] szybet
i used the boost library for that


[9/23/2022 11:45 PM] szybet
thats pretty basic c... i know that you tried googling so the problem is deeper


[9/23/2022 11:45 PM] tux_linux
It just stopped working for no reason


[9/23/2022 11:46 PM] tux_linux
Yes, because you can cpp


[9/23/2022 11:46 PM] ninuje
Be...cause the company that's making them is called Elan? ;o)


[9/23/2022 11:46 PM] tux_linux
Elan means jumpstart in French


[9/23/2022 11:46 PM] tux_linux
It's actually spelled élan


[9/23/2022 11:46 PM] szybet
elan is a name


[9/23/2022 11:46 PM] szybet
so im confused


[9/23/2022 11:47 PM] ninuje
It's also an animal in French ;o)


[9/23/2022 11:47 PM] tux_linux
Yes, too


[9/23/2022 11:47 PM] ninuje
A.. fairly famous one in canada, too ;p


[9/23/2022 11:47 PM] tux_linux
Yep


[9/23/2022 11:48 PM] tux_linux
We tend to call them more "caribou" or "orignal"


[9/23/2022 11:49 PM] ninuje
https://github.com/Kobo-InkBox/inkbox-os-init/blob/main/init.c#L553 doesn't return anything on success

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/main/init.c
inkbox-os-init/init.c at main · Kobo-InkBox/inkbox-os-init
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-6D7B9


[9/23/2022 11:53 PM] ninuje
Taking a look at the actual Linux klibc might help? It's dealing with some similar workflows (with the added bonus of being freestanding ;p)


[9/23/2022 11:53 PM] ninuje
https://git.kernel.org/pub/scm/libs/klibc/klibc.git/


[9/23/2022 11:53 PM] ninuje
e.g., https://git.kernel.org/pub/scm/libs/klibc/klibc.git/tree/usr/kinit/readfile.c


[9/23/2022 11:53 PM] tux_linux
True
I erased it without knowing?


[9/23/2022 11:54 PM] tux_linux
Welp ok I didn't even notice that I removed it
Thanks for pointing it out

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20220923-175413-A901D.png


[9/23/2022 11:55 PM] ninuje
Remember the dead code and buffer disucssion of the last time, though


[9/24/2022 12:02 AM] tux_linux
yes...


[9/24/2022 2:55 PM] tux_linux
Hey, it works!

{Attachments}
/mnt/data/projects/git/conversations/media/message-B4FFA.txt


[9/24/2022 2:55 PM] szybet
everything?...


[9/24/2022 2:56 PM] tux_linux
well, it can start up in default mode


[9/24/2022 2:56 PM] tux_linux
at least


[9/24/2022 2:56 PM] szybet
what are other modes?


[9/24/2022 2:57 PM] tux_linux
diags?


[9/24/2022 2:58 PM] szybet
nothimg more?


[9/24/2022 2:58 PM] tux_linux
965 lines of code is not enough for you?


[9/24/2022 3:01 PM] szybet
im only asking if  there are any others


[9/24/2022 3:01 PM] szybet
i simply dont know


[9/24/2022 3:01 PM] szybet
¯\_(ツ)_/¯


[9/24/2022 3:01 PM] tux_linux
boot modes?


[9/24/2022 3:01 PM] szybet
yea


[9/24/2022 3:01 PM] tux_linux
there is main, Qt diagnostics and BDK (https://inkbox.ddns.net/wiki/index.php?title=Basic_diagnostics_kernel)

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Basic_diagnostics_kernel
Index.php


[9/24/2022 3:02 PM] tux_linux
so 3 boot modes


[9/24/2022 3:05 PM] szybet
okay


[9/24/2022 3:55 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/3ff4a883e9322a7f97e84208c26571b3726eefac

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/3ff4a883e9322a7f97e84208c26571b3726eefac
It boots! · Kobo-InkBox/inkbox-os-init@3ff4a88
/mnt/data/projects/git/conversations/media/3ff4a883e9322a7f97e84208c26571b3726eefac-B7DCB


[9/24/2022 4:58 PM] szybet
couldn't you use fbink directly?


[9/24/2022 5:45 PM] tux_linux
initrd is more complicated than the rootfs, the main fbink usage is done by inkbox-splash, and it extracts a rootfs containing fbink


[9/24/2022 5:45 PM] tux_linux
then it deletes it when done


[9/24/2022 5:45 PM] tux_linux
so kinda difficult to access the library


[9/24/2022 5:46 PM] szybet
why it needs to?


[9/24/2022 5:47 PM] tux_linux
that version of fbink was compiled with glibc, and the chroot contains glibc + fbink libs, that's why I compressed it into a tar.xz


[9/24/2022 5:47 PM] szybet
the init doesnt uses glibc?


[9/24/2022 5:47 PM] szybet
it uses musl?


[9/24/2022 5:47 PM] tux_linux
no


[9/24/2022 5:47 PM] tux_linux
kind of


[9/24/2022 5:47 PM] tux_linux
initially it doesn't use anything


[9/24/2022 5:47 PM] szybet
so why not compile fbink under musl


[9/24/2022 5:48 PM] tux_linux
well, at that time it was not possible for me


[9/24/2022 5:48 PM] tux_linux
and inkbox-splash would need a complete rewrite (probably)


[9/24/2022 5:48 PM] szybet
my point is just include inkbox-splash into the init


[9/24/2022 5:48 PM] szybet
why not


[9/24/2022 5:48 PM] szybet
init binary*


[9/24/2022 5:49 PM] tux_linux
hm and uh how do you plan to handle the progress bar?


[9/24/2022 5:49 PM] szybet
i dont see a problem with that


[9/24/2022 5:49 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/0556cc7a3deb72f93de407726b360e5153145b70/initrd/common/inkbox-splash#L138-L175


[9/24/2022 5:49 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/0556cc7a3deb72f93de407726b360e5153145b70/initrd/common/inkbox-splash#L40-L60


[9/24/2022 5:49 PM] szybet
fbink has a built in progress bar btw


[9/24/2022 5:49 PM] tux_linux
it's ugly


[9/24/2022 5:50 PM] tux_linux
sorry niluje


[9/24/2022 5:50 PM] szybet
well okay then


[9/24/2022 5:50 PM] szybet
still i dont like that its unpacking the fbink


[9/24/2022 5:50 PM] tux_linux
for the progress bar it only unpacks it once


[9/24/2022 5:50 PM] tux_linux
in a separate directory


[9/24/2022 5:50 PM] szybet
still


[9/24/2022 5:50 PM] szybet
its overcomplicated


[9/24/2022 6:01 PM] tux_linux
Even DISPLAY_DEBUG works

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220924_155921676-63155.jpg


[9/24/2022 6:01 PM] szybet
what is the reason it didnt worked on the nia?


[9/24/2022 6:01 PM] szybet
there was something


[9/24/2022 6:02 PM] tux_linux
it eats too much battery maybe?


[9/24/2022 6:03 PM] tux_linux
but it seems that writing an init program in C solved this problem

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-993DB.png


[9/24/2022 6:03 PM] szybet
cool

{Reactions}
👍 

[9/24/2022 6:05 PM] tux_linux
```
build@inkbox ~/i/inkbox-os-init (main)> armv7l-linux-musleabihf-gcc init.c -o init -static -D_GNU_SOURCE; armv7l-linux-musleabihf-strip init
build@inkbox ~/i/inkbox-os-init (main)> ls -sh init
72K init*
build@inkbox ~/i/inkbox-os-init (main)>
```


[9/24/2022 6:05 PM] szybet
btw put a how to build guide to your init


[9/24/2022 6:05 PM] szybet
i do this for all programs for inkbox


[9/24/2022 6:07 PM] szybet
is there anything to do for me for 2.0? aside fbink in ipd


[9/24/2022 6:08 PM] tux_linux
..
lockscreen


[9/24/2022 6:08 PM] szybet
i though lockscreen isint for 2.0


[9/24/2022 6:09 PM] tux_linux
well thinking about that it should be


[9/24/2022 6:09 PM] szybet
nah


[9/24/2022 6:09 PM] szybet
;p


[9/24/2022 6:09 PM] tux_linux
at least have it working in harmony with ipd


[9/24/2022 6:10 PM] szybet
well i will see


[9/24/2022 6:10 PM] tux_linux
is that done?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-4A15C.png


[9/24/2022 6:11 PM] szybet
no, im waiting for you to approve this idea.....


[9/24/2022 6:11 PM] szybet
like for 2 weeks


[9/24/2022 6:11 PM] tux_linux
what was it again


[9/24/2022 6:11 PM] szybet
🥴


[9/24/2022 6:12 PM] tux_linux
didn't you put that in your inkbox patch for wifi dialog?


[9/24/2022 6:12 PM] szybet
O.o?


[9/24/2022 6:12 PM] szybet
if i did. thats bad


[9/24/2022 6:12 PM] tux_linux
when you fixed the border in wifilogger


[9/24/2022 6:12 PM] szybet
i think i didnt


[9/24/2022 6:12 PM] szybet
but idk


[9/24/2022 6:12 PM] tux_linux
oh ok


[9/24/2022 6:13 PM] szybet
well say "yes" to this idea and i will implement it


[9/24/2022 6:13 PM] szybet
say "no" and no


[9/24/2022 6:14 PM] tux_linux
I think I will struggle with init and diags today and then folders PR, and then (probably won't happen, because it will be 3am) Glo HD dhcp, so your best option is to either work on lockscreen or study the update system


[9/24/2022 6:15 PM] szybet
propably lockscreen, tommorow

{Reactions}
👍 

[9/24/2022 6:15 PM] tux_linux
https://github.com/Kobo-InkBox/recoveryfs/tree/master/opt/recovery/scripts

{Embed}
https://github.com/Kobo-InkBox/recoveryfs/tree/master/opt/recovery/scripts
recoveryfs/opt/recovery/scripts at master · Kobo-InkBox/recoveryfs
InkBox OS recovery filesystem base. Contribute to Kobo-InkBox/recoveryfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/recoveryfs-186F0


[9/24/2022 6:16 PM] tux_linux
pretty much every recoveryfs script is in there


[9/24/2022 6:44 PM] tux_linux
done
https://github.com/Kobo-InkBox/inkbox-os-init


[9/24/2022 6:53 PM] szybet
good

{Reactions}
👍 

[9/25/2022 11:38 AM] szybet
i forgot to say, for folders you need them to inscrease height based on device to match the cover size


[9/25/2022 11:38 AM] szybet
otherwise it looks horrible


[9/25/2022 12:36 PM] szybet
is there any way to limit the charge current for the mc13892 chip?


[9/25/2022 12:36 PM] szybet
@andi , you propably know


[9/25/2022 12:37 PM] szybet
well somehow

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-50E49.png


[9/25/2022 12:39 PM] szybet
http://markdingst.blogspot.com/2011/12/imx508-battery-charge-issue.html

{Embed}
http://markdingst.blogspot.com/2011/12/imx508-battery-charge-issue.html
iMX508 battery charge issue
Our customer's iMX508 board battery charge has problem when battery's voltage lower than 3.4v. Their PMIC is MC13892. With USB adapter co...
/mnt/data/projects/git/conversations/media/mc13892_CHRG-03444.JPG


[9/25/2022 12:41 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D5512.png


[9/25/2022 2:26 PM] tux_linux
Dangerous?


[9/25/2022 2:31 PM] szybet
🥴


[9/25/2022 2:31 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-83EF6.png


[9/25/2022 2:31 PM] szybet
there are some i2c registers for that


[9/25/2022 2:41 PM] szybet
@NiLuJe Im doing stupid things and you could help, sorry for pinging, if you have time and the will to answer then thanks
1. is writing to a i2c device when its used by a driver... acceptable? i know it isin't safe ( there is an -force option in i2cset tho)
2. in the register 48 is a bit 5 where i need to write 0001 for example, but how? i2cset doesnt have those parameters at all. i tryied googling but with no luck

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-EAAE1.png


[9/25/2022 2:44 PM] tux_linux
1111 is of great interest for me


[9/25/2022 2:55 PM] szybet
to burn your device down?


[9/25/2022 2:55 PM] szybet
also, there was something about detecting if its usb host or wall plug


[9/25/2022 2:55 PM] szybet
i didnt understand much


[9/25/2022 2:56 PM] szybet
'''No distinction can be made between a USB Host or a wall charger. Therefore, when attaching a wall charger, the CHRGSE1B pin must be forced low as a charger attach indicator. The CHRGSE1B pin has a built-in weak pull-up to VCORE. In the application, this pin is preferably pulled low"
'''


[9/25/2022 2:59 PM] tux_linux
no, because I leave my devices plugged in all the time
so I would like them to be powered without charging the battery to extend its lifespan


[9/25/2022 3:00 PM] szybet
1111 doesnt means that


[9/25/2022 3:00 PM] tux_linux
`Externally powered`?


[9/25/2022 3:00 PM] szybet
in my understanding, it opens fully its mosfets and the battery can be charged by another IC


[9/25/2022 3:00 PM] tux_linux
oh


[9/25/2022 3:01 PM] szybet
there were configurations using 2 charging ic


[9/25/2022 3:01 PM] szybet
i may be wrong


[9/25/2022 3:01 PM] szybet
idk


[9/25/2022 5:23 PM] ninuje
Depends on the driver and the device. I'm doing it to the gyro on Kobos and nothing's blown up so far.


[9/25/2022 5:27 PM] ninuje
As for 2., no idea, I don't use i2cset, I use libi2c in C directly


[9/25/2022 5:28 PM] ninuje
The driver usually exposes constants for register addresses and constants for values & bit shifts


[9/25/2022 5:29 PM] ninuje
Actually, no, I'm only doing *reads*, not writes


[9/25/2022 5:32 PM] szybet
does libi2c has those options?


[9/25/2022 5:32 PM] szybet
i dont saw any


[9/25/2022 5:33 PM] ninuje
Then you're in for a deep dive, I guess?


[9/25/2022 5:33 PM] szybet
propably...


[9/25/2022 5:33 PM] szybet
well there is maybe a easier way to limit charging current


[9/25/2022 5:36 PM] ninuje
I have no idea if the register number from your spec sheet translate directly to an address, FWIW


[9/25/2022 5:37 PM] ninuje
But the actual writing is simple enough, you get the current value of the full byte, you mask what you don't need and set what you do, and write that


[9/25/2022 5:38 PM] szybet
>  you get the current value of the full byte
and here is the first problem ;p


[9/25/2022 5:38 PM] ninuje
(or full *whatever the size of the register actually is*)


[9/25/2022 5:39 PM] ninuje
Check basically any Linux driver that does bitbanging over I²C


[9/25/2022 5:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-3D0A6.png


[9/25/2022 5:39 PM] szybet
thats propably answer to this


[9/25/2022 5:40 PM] szybet
i will need to propably


[9/25/2022 5:43 PM] ninuje
There's a driver in mainline for that thing, apparently


[9/25/2022 5:48 PM] szybet
this chip even has audio


[9/25/2022 5:48 PM] szybet
if those pins were exposed :(


[9/25/2022 9:08 PM] andi15701
ICHRG bits


[9/25/2022 9:08 PM] szybet
well i looked up them


[9/25/2022 9:08 PM] andi15701
page 91  of manual


[9/25/2022 9:09 PM] szybet
i know


[9/25/2022 9:09 PM] szybet
but arent they already setted?


[9/25/2022 9:09 PM] szybet
```
i2cdump -y -f 3 0x32 w
     0,8  1,9  2,a  3,b  4,c  5,d  6,e  7,f
00: 2803 1028 0010 0000 0700 0007 4a00 004a 
08: 0100 1001 0e10 9f0e 209f 0020 0500 5b05 
10: 085b d108 00d1 0000 0f00 3f0f 4f3f 2f4f 
18: 8f2f 7f8f bf7f 1fbf 9f1f df9f 5fdf 8f5f 
20: cf8f dfcf efdf efef ffef ffff ffff ffff 
28: ffff 0fff 000f 0300 0303 0303 4303 0343 
30: 0303 0303 0303 0303 0303 4003 d840 d8d8 
38: 30d8 6030 1860 c018 d8c0 2cd8 582c 0058 
40: 0000 0000 0000 f200 10f2 ff10 03ff 0003 
48: 0000 0000 0000 6000 6060 0c60 0c0c 6c0c 
50: 006c 6000 2460 0c24 140c 4014 6040 6060 
58: 5460 0c54 0c0c 6c0c 006c 6000 2460 0c24 
60: 140c 0014 0000 1200 0012 2800 0028 0000 
68: 0000 d600 0dd6 000d 0000 0000 0000 9700 
70: 0997 0009 0000 0000 0000 0000 0000 0000 
78: ff00 a5ff ffa5 00ff ff00 00ff ff00 00ff 
80: ff00 00ff ff00 00ff ff00 00ff ff00 02ff 
88: 0002 0000 0000 0000 0000 0000 0000 0000 
90: 0000 0000 0000 0000 0000 0000 0000 4000 
98: 0040 0000 0000 0000 4d00 004d 0000 2000 
a0: 5320 1653 0016 2500 8925 2289 0022 0000 
a8: 0000 0000 8100 0181 1101 2011 2020 0520 
b0: 0505 0005 2300 0023 0100 0601 e606 44e6 
b8: 0b44 490b 3349 0133 8301 7c83 fc7c fffc 
c0: dfff 00df 0000 e600 00e6 0200 2102 2221 
c8: 00a2 ff00 0fff f50f fff5 ffff ffff ffff 
d0: 0fff 000f 0000 f100 00f1 5500 0055 0100 
d8: 0001 8800 0088 1100 8011 4480 8044 1180 
e0: 4f11 024f c502 03c5 8203 6482 ff64 ffff 
e8: 00ff 2300 0d23 620d 0262 2002 0020 2e00 
f0: 2a2e 522a 0052 0000 2200 9322 0093 0000 
f8: 0000 0000 0100 4801 0048 0000 0000 0300
```


[9/25/2022 9:09 PM] szybet
here it is, its dumb, i know its reading 24 bit registers with 16 bit i2cdump


[9/25/2022 9:10 PM] szybet
maybe im wrong but they are already 0000?


[9/25/2022 9:22 PM] andi15701
I would guess that things are big endian


[9/25/2022 9:22 PM] andi15701
so you will only have the upper 16bit here


[9/25/2022 9:23 PM] andi15701
Usually, charge current can be changed on the fly


[9/25/2022 9:23 PM] szybet
those bits are on the start of the register, so thats fine


[9/25/2022 9:24 PM] szybet
the question is where to look, at the end of line 40: or at the beggining of 48:


[9/25/2022 9:24 PM] szybet
i dont see such an option in sys


[9/25/2022 9:24 PM] andi15701
datasheet is decimal


[9/25/2022 9:24 PM] andi15701
i2cdump is hex


[9/25/2022 9:25 PM] andi15701
30: 0303


[9/25/2022 9:25 PM] andi15701
so I would guess this one


[9/25/2022 9:26 PM] andi15701
but: that 0303 is probably bit 23-8


[9/25/2022 9:26 PM] szybet
oh actually yea


[9/25/2022 9:26 PM] szybet
but not d8d8?


[9/25/2022 9:26 PM] andi15701
and ICHRG is 3-6


[9/25/2022 9:27 PM] szybet
im lost


[9/25/2022 9:27 PM] szybet
doesnt i2cdump show invidual registers in those cells?


[9/25/2022 9:27 PM] andi15701
yes, it dous


[9/25/2022 9:28 PM] andi15701
CHGAUT                CHRGREST CHGTMRRS CHRGLE
48 Charger 0 R/W 1 1 0 0 0 0 0        CYCLB CHGAUTOB                          PLIMDIS PLIM[1:0] RVRSMODE Spare FETCTRL FETOVRD THCHKB ACLPB TREN ICHRG[3:0] VCHRG[2:0]
                                OVIB                   ART        T     DEN


[9/25/2022 9:29 PM] andi15701
0x30 = decimal 48, and in that register there are several bitfields


[9/25/2022 9:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1706B.png


[9/25/2022 9:30 PM] szybet
so this


[9/25/2022 9:30 PM] szybet
i can read the whole register with i2cget


[9/25/2022 9:31 PM] andi15701
yes, that are 16bit of that register


[9/25/2022 9:34 PM] andi15701
hmm, how would you read the whole register?


[9/25/2022 9:35 PM] szybet
i2ctransfer


[9/25/2022 9:35 PM] szybet
give me a moment, i will read it


[9/25/2022 9:36 PM] szybet
```
kobo:~# i2ctransfer -f -y 3 w1@0x32 0x30 r24
0x03 0x03 0x03 0x03 0x03 0x03 0x40 0xd8 0xd8 0x30 0x60 0x18 0xc0 0xd8 0x2c 0x58 0x00 0x00 0x00 0x00 0xf2 0x10 0xff 0x03
kobo:~# 
```


[9/25/2022 9:36 PM] szybet
HM


[9/25/2022 9:37 PM] andi15701
24 bytes?


[9/25/2022 9:37 PM] szybet
um my fault


[9/25/2022 9:37 PM] szybet
still its `0x03`


[9/25/2022 9:38 PM] szybet
um something is wrong


[9/25/2022 9:39 PM] szybet
so in conclusion i dont quite understand this


[9/25/2022 9:40 PM] szybet
i need to read a 24 bit value from 0x30


[9/25/2022 9:40 PM] andi15701
yes, correct


[9/25/2022 9:41 PM] szybet
i dont think its possible with existing tools


[9/25/2022 9:41 PM] szybet
i need to write a c program for it


[9/25/2022 9:42 PM] andi15701
I think I have something


[9/25/2022 9:43 PM] szybet
stupid that those tools have a limit to 16 bit


[9/25/2022 9:45 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/i2c-rw-790BA.c


[9/25/2022 9:46 PM] andi15701
i2c-rw /dev/i2c-3 0x32 30 3


[9/25/2022 9:47 PM] szybet
thats complicated code


[9/25/2022 9:48 PM] andi15701
I think I used that for hacking some dvb-t chips


[9/25/2022 9:50 PM] andi15701
so it is i2c-rw <busfile> <i2c-adress> <input-data-in-hex> <output-length>


[9/25/2022 9:51 PM] szybet
its writing to the address?


[9/25/2022 9:51 PM] andi15701
you need to write the register address


[9/25/2022 9:51 PM] andi15701
yes


[9/25/2022 9:52 PM] andi15701
also i2c-get does that


[9/25/2022 9:52 PM] szybet
so its actually reading? its not setting anything new?


[9/25/2022 9:52 PM] andi15701
yes


[9/25/2022 9:52 PM] andi15701
it is reading


[9/25/2022 9:53 PM] szybet
```
kobo:/# ./i2c.bin /dev/i2c-3 0x32 30 3
i2c rdwr: 2
032810
kobo:/# 
```


[9/25/2022 9:53 PM] szybet
the output is in hex?


[9/25/2022 9:53 PM] andi15701
yes


[9/25/2022 9:54 PM] szybet
`00110010100000010000`


[9/25/2022 9:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BC29B.png


[9/25/2022 9:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B7BA8.png


[9/25/2022 9:56 PM] szybet
800 mA?


[9/25/2022 9:57 PM] szybet
I have never seen that the nia used those 800


[9/25/2022 9:57 PM] szybet
its mostly 500~


[9/25/2022 9:57 PM] andi15701
first: page 45: we have big endion here


[9/25/2022 9:59 PM] szybet
is it a custom i2c communication?


[9/25/2022 9:59 PM] andi15701
no


[9/25/2022 9:59 PM] andi15701
organisation of chip data is on top of i2c protocol


[9/25/2022 10:00 PM] szybet
there is a mess with i2c a bit, thats the only thing i understand


[9/25/2022 10:00 PM] szybet
what does it mean in practice?


[9/25/2022 10:03 PM] andi15701
that you have to look into the data sheet, mostly you send the register adress to the device, and next step you access the device in read mode and get the contents


[9/25/2022 10:04 PM] szybet
so every data till now is not true?


[9/25/2022 10:05 PM] andi15701
I think we are operating like figure 9 on page 45


[9/25/2022 10:06 PM] andi15701
I am first looking at VCHRG


[9/25/2022 10:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-7A569.png


[9/25/2022 10:06 PM] szybet
i think you have a better datasheet


[9/25/2022 10:06 PM] szybet
because mine is cutted in this place


[9/25/2022 10:07 PM] szybet
its getting too complicated really fast


[9/25/2022 10:07 PM] szybet
isint there an easier way to limit the usb charging current :/?


[9/25/2022 10:07 PM] szybet
putting a simple resistor could be stupid but could work, but it will propably confuse the charging circuit


[9/25/2022 10:08 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/i2cread-3-06F29.png


[9/25/2022 10:09 PM] szybet
oh this above, okay


[9/25/2022 10:10 PM] andi15701
oh, we must use one ioctl call


[9/25/2022 10:10 PM] andi15701
and set iod.nmsgs=2


[9/25/2022 10:10 PM] szybet
i dont understand much, its not my knowledge level


[9/25/2022 10:10 PM] szybet
i hoped for a simple i2c write


[9/25/2022 10:13 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/i2c-rw-748D0.c


[9/25/2022 10:13 PM] andi15701
i hopefully fixed that


[9/25/2022 10:14 PM] szybet
```
kobo:/# ./i2c2.bin /dev/i2c-3 0x32 30 3
i2c rdwr: 2
030303
kobo:/# 
```


[9/25/2022 10:15 PM] szybet
`00110000001100000011`


[9/25/2022 10:15 PM] szybet
hm


[9/25/2022 10:15 PM] andi15701
at least VCHRG is sane


[9/25/2022 10:15 PM] andi15701
I would strongly dislike to see it at a wrong value


[9/25/2022 10:16 PM] szybet
thats true


[9/25/2022 10:17 PM] andi15701
is usb connected?


[9/25/2022 10:17 PM] szybet
no


[9/25/2022 10:17 PM] szybet
i can connect it and try once more


[9/25/2022 10:18 PM] andi15701
yes


[9/25/2022 10:19 PM] szybet
no change in output


[9/25/2022 10:25 PM] andi15701
hmm, what about first checking i2c transfers with better understandable data, lets readout rtc registers


[9/25/2022 10:25 PM] andi15701
./i2c-rw /dev/i2c-3 0x32 14 3


[9/25/2022 10:25 PM] szybet
```
kobo:/# ./i2c2.bin /dev/i2c-3 0x32 14 3
i2c rdwr: 2
000f3f
kobo:/#
```


[9/25/2022 10:34 PM] andi15701
hmm, the tool works here with the r5t619


[9/25/2022 10:34 PM] andi15701
root@debnfs:/home/andi# ./i2c-rw /dev/i2c-2 0x32 A0 3
i2c rdwr: 2
273320


[9/25/2022 10:34 PM] andi15701
this chip seems to have register  address autoincrement


[9/25/2022 10:35 PM] andi15701
so we have here register 0xA0, 0xA1, 0xA2


[9/25/2022 10:35 PM] andi15701
with RTC data


[9/25/2022 10:35 PM] szybet
my hope for a "simple" solution was killed ;p


[9/25/2022 10:35 PM] andi15701
20:33:27 UTC


[9/25/2022 10:35 PM] szybet
my time on the kobo is 22 in hours


[9/25/2022 10:35 PM] szybet
but thats propably not the problem


[9/25/2022 10:41 PM] andi15701
hmm, is the chip correct?


[9/25/2022 10:42 PM] andi15701
ntx kernels renome things to exactly the same chip


[9/25/2022 10:42 PM] andi15701
to make userpsace 100% compatible


[9/25/2022 10:43 PM] andi15701
by having the same thing in /sys/class/power_supply/


[9/25/2022 10:43 PM] andi15701
i guess it is really a rc5t619


[9/25/2022 10:43 PM] szybet
```
kobo:/sys/class/power_supply# ls
acpwr            mc13892_bat      mc13892_charger  usbpwr
kobo:/sys/class/power_supply# cd mc13892_bat/
kobo:/sys/devices/platform/soc/2100000.aips-bus/21f8000.i2c/i2c-3/3-0032/ricoh619-battery/power_supply/mc13892_bat# 
```


[9/25/2022 10:43 PM] szybet
ricoh619?


[9/25/2022 10:44 PM] andi15701
= rc5t619


[9/25/2022 10:44 PM] szybet
what the hell... i saw the rico and i didn't though that this would be so stupid


[9/25/2022 10:44 PM] szybet
cool, i tryied googling but with no sucess to find what ricoh stands for


[9/25/2022 10:44 PM] andi15701
ricoh is the company name


[9/25/2022 10:45 PM] szybet
i see now


[9/25/2022 10:45 PM] ninuje
It's.... the name of the company (again ;p)


[9/25/2022 10:45 PM] ninuje
Is your Google allergic to semiconductors?


[9/25/2022 10:45 PM] ninuje
^^


[9/25/2022 10:45 PM] andi15701
ant their chips start with rn or rc


[9/25/2022 10:45 PM] andi15701
e.g.


[9/25/2022 10:46 PM] szybet
i just didn't though that ntx kernels are so stupidp, name a chip and there alias it -_-


[9/25/2022 10:46 PM] andi15701
guess why i  avoid them


[9/25/2022 10:46 PM] szybet
that makes sense


[9/25/2022 10:46 PM] ninuje
What he said ;o).


[9/25/2022 10:46 PM] ninuje
Jumping from reading lab126 kernels to ntx kernels was... not fun.


[9/25/2022 10:47 PM] szybet
well as i see *with the correct IC now* it doesnt have such a cool ways to limit current


[9/25/2022 10:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-A54A4.png


[9/25/2022 10:47 PM] andi15701
drivers/power/supply/rn5t618_power.c


[9/25/2022 10:47 PM] ninuje
(At least, when lab126 doesn't "forget" stuff in their kernel drops and shit actually builds ;p)


[9/25/2022 10:48 PM] andi15701
there it is


[9/25/2022 10:48 PM] andi15701
you have enough possibilities


[9/25/2022 10:48 PM] andi15701
but things get reset after replugging usb


[9/25/2022 10:48 PM] andi15701
in mainline linux


[9/25/2022 10:49 PM] andi15701
the driver I have upstreamed


[9/25/2022 10:49 PM] szybet
yea it isint there in the nia source


[9/25/2022 10:49 PM] szybet
i need to find it


[9/25/2022 10:49 PM] andi15701
there you can find out how to set things


[9/25/2022 10:49 PM] ninuje
It's.. way less pretty, fair warning ;p


[9/25/2022 10:50 PM] szybet
an ioctl, i quess?


[9/25/2022 10:50 PM] ninuje
Check between drivers/power/ricoh619-battery.c & drivers/mfd/ricoh619.c maybe?


[9/25/2022 10:50 PM] andi15701
you can find out what you can do with i2cset


[9/25/2022 10:50 PM] szybet
```
22:49 szybet@hyperbookszyb /mnt/HDD/Project/Public/koboniaaudio-inkbox/inkbox/kernel/kernel/linux-4.1.15-n306
% find . | grep rn5t618                             

./Documentation/devicetree/bindings/mfd/rn5t618.txt
./include/linux/mfd/rn5t618.h
./drivers/regulator/rn5t618-regulator.c
./drivers/mfd/rn5t618.c
./drivers/watchdog/rn5t618_wdt.c
```


[9/25/2022 10:50 PM] szybet
`drivers/mfd/ricoh619.c` propably


[9/25/2022 10:50 PM] andi15701
no


[9/25/2022 10:51 PM] andi15701
it is new in 5.7


[9/25/2022 10:51 PM] andi15701
or so


[9/25/2022 10:51 PM] andi15701
i have upstreamed that driver myself


[9/25/2022 10:51 PM] ninuje
Yeah, i'm talking about the NTX tree


[9/25/2022 10:51 PM] andi15701
ntx crap does not have such interfaces


[9/25/2022 10:51 PM] szybet
i would want to use the nia sources ;/


[9/25/2022 10:51 PM] ninuje
I can confirm that, it's the worst.


[9/25/2022 10:52 PM] andi15701
you do a i2c-set


[9/25/2022 10:52 PM] szybet
i could maybe steal one function and it would magically work? 🥴


[9/25/2022 10:52 PM] andi15701
a simple one


[9/25/2022 10:53 PM] szybet
```c
static struct rn5t618 *rn5t618_pm_power_off;

static void rn5t618_power_off(void)
{
    /* disable automatic repower-on */
    regmap_update_bits(rn5t618_pm_power_off->regmap, RN5T618_REPCNT,
               RN5T618_REPCNT_REPWRON, 0);
    /* start power-off sequence */
    regmap_update_bits(rn5t618_pm_power_off->regmap, RN5T618_SLPCNT,
               RN5T618_SLPCNT_SWPWROFF, RN5T618_SLPCNT_SWPWROFF);
}
```
in conclusion: i dont understand it


[9/25/2022 10:53 PM] szybet
;p


[9/25/2022 10:53 PM] szybet
i cant even find i2c in the datasheet


[9/25/2022 10:55 PM] andi15701
ret = regmap_write(info->rn5t618->regmap, RN5T618_REGISET2,
                                   0xE0 | TO_CUR_REG(val->intval));


[9/25/2022 10:56 PM] andi15701
#define TO_CUR_REG(x) ((x) / 100000 - 1)


[9/25/2022 10:56 PM] andi15701
#define RN5T618_REGISET2                0xb7


[9/25/2022 10:56 PM] szybet
https://elixir.bootlin.com/linux/latest/source/drivers/power/supply/rn5t618_power.c

{Embed}
https://elixir.bootlin.com/linux/latest/source/drivers/power/supply/rn5t618_power.c
rn5t618_power.c - drivers/power/supply/rn5t618_power.c - Linux sour...
Elixir Cross Referencer - Explore source code in your browser - Particularly useful for the Linux kernel and other low-level projects in C/C++ (bootloaders, C libraries...)


[9/25/2022 10:57 PM] szybet
```
static int rn5t618_battery_set_current_limit(struct rn5t618_power_info *info,
                const union power_supply_propval *val)
{
    if (val->intval < CHG_MIN_CUR)
        return -EINVAL;

    if (val->intval >= CHG_MAX_CUR)
        return -EINVAL;

    return regmap_update_bits(info->rn5t618->regmap,
                  RN5T618_CHGISET,
                  0x1F, TO_CUR_REG(val->intval));
}
```


[9/25/2022 10:58 PM] szybet
why doesnt the datasheet contain i2c addresses


[9/25/2022 10:59 PM] andi15701
include/linux/mfd/rn5t618.h


[9/25/2022 11:01 PM] andi15701
rn5t618 = rc5t619 - rtc - some regulators - afaik usb charger type detection


[9/25/2022 11:01 PM] szybet
`i2cset -y -f 3 0x32 0xb8 <a magic value indicating how much current>`


[9/25/2022 11:01 PM] ninuje
> afaik usb charger type detection


[9/25/2022 11:01 PM] szybet
i dont know if its even 8 bit


[9/25/2022 11:01 PM] ninuje
Yup, that's why I had to deal with it


[9/25/2022 11:02 PM] szybet
if its a host or a wall plug?


[9/25/2022 11:02 PM] ninuje
Yep


[9/25/2022 11:02 PM] szybet
inkbox doesnt have that


[9/25/2022 11:02 PM] szybet
it could be usefull


[9/25/2022 11:02 PM] ninuje
Can't do it before Mk. 7


[9/25/2022 11:02 PM] ninuje
(re: ntx sucks)


[9/25/2022 11:02 PM] szybet
oh, that ;p


[9/25/2022 11:03 PM] ninuje
https://github.com/koreader/KoboUSBMS/blob/349947a4bdf3ad7d86674e7ddec7c3b44e476e40/usbms.c#L1415-L1520

{Embed}
https://github.com/koreader/KoboUSBMS/blob/349947a4bdf3ad7d86674e7ddec7c3b44e476e40/usbms.c
KoboUSBMS/usbms.c at 349947a4bdf3ad7d86674e7ddec7c3b44e476e40 · kor...
Small helper to handle USBMS on Kobo in KOReader. Contribute to koreader/KoboUSBMS development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/KoboUSBMS-FBF03


[9/25/2022 11:04 PM] andi15701
the next  weird thing, some ntx devices put usb to the adp port of the pmic


[9/25/2022 11:05 PM] andi15701
btw: charge current = min(max_charge_current, max_usb_current)


[9/25/2022 11:07 PM] szybet
well cant find it


[9/25/2022 11:07 PM] szybet
i wonder how they estimate max_usb_current


[9/25/2022 11:08 PM] andi15701
andi@debnfs:~$ cat /sys/class/power_supply/rn5t618-usb/usb_type 
cat: /sys/class/power_supply/rn5t618-usb/usb_type: No data availab


[9/25/2022 11:08 PM] andi15701
andi@akepd:~$ cat /sys/class/power_supply/rn5t618-usb/usb_type 
SDP [DCP] CDP Unknown


[9/25/2022 11:09 PM] andi15701
the first one:  tolino shine2 with usb connected, but it seems to be connected to the ADP port instead of usb of the pmic


[9/25/2022 11:09 PM] andi15701
second one: Kobo Clara HD with usb connected to a charger


[9/25/2022 11:11 PM] ninuje
Gonna jot that down, for Science(TM)


[9/25/2022 11:11 PM] szybet
`TO_CUR_REG` what is this


[9/25/2022 11:11 PM] szybet
oh


[9/25/2022 11:11 PM] szybet
`


[9/25/2022 11:11 PM] szybet
`TO_CUR_REG`


[9/25/2022 11:11 PM] szybet
`#define TO_CUR_REG(x) ((x) / 100000 - 1)`


[9/25/2022 11:11 PM] andi15701
from uA to register value


[9/25/2022 11:12 PM] szybet
aaaaaaaaaaaa


[9/25/2022 11:13 PM] andi15701
usb_max_current is in RN5T618_REGISET2


[9/25/2022 11:13 PM] andi15701
adp_max_current is in RN5T618_REGISET1


[9/25/2022 11:13 PM] andi15701
accessed via POWER_SUPPLY_PROP_INPUT_CURRENT_LIMIT:


[9/25/2022 11:14 PM] szybet
50 mA

50000 uA

50000 / 100000 = 0.5

0.5 - 1 = -0.5

what


[9/25/2022 11:15 PM] andi15701
you cannot go lower than 100mA


[9/25/2022 11:15 PM] szybet
im looking at `rn5t618_battery_set_current_limit` which uses `RN5T618_CHGISET`


[9/25/2022 11:15 PM] szybet
this explains a lot


[9/25/2022 11:16 PM] szybet
101000 uA

101000 / 100000 = 1.01

1.01 - 1 = 0.01

and now in hex?... 0.028F5C28F5C28F5C28F6

nope


[9/25/2022 11:17 PM] andi15701
integer


[9/25/2022 11:17 PM] andi15701
100mA steps


[9/25/2022 11:17 PM] szybet
?


[9/25/2022 11:18 PM] szybet
100, 200, 300?


[9/25/2022 11:18 PM] andi15701
CHGISET = 0 = 100mA


[9/25/2022 11:18 PM] andi15701
yes


[9/25/2022 11:18 PM] szybet
i2cset -y -f 3 0x32 0xb8 0x00


[9/25/2022 11:18 PM] szybet
something like that


[9/25/2022 11:19 PM] andi15701
yes


[9/25/2022 11:20 PM] szybet
kobo:/# i2cget -y -f 3 0x32 0xb8
0x44
kobo:/#


[9/25/2022 11:21 PM] andi15701
kernel keeps the upper bits


[9/25/2022 11:21 PM] szybet
so its 0x4?


[9/25/2022 11:22 PM] szybet
nia charging is arround 450~ most of the time


[9/25/2022 11:22 PM] szybet
so makes sense at the first glance


[9/25/2022 11:23 PM] andi15701
upper two bits are charge complete current settings


[9/25/2022 11:23 PM] szybet
so i readed the wrong values?


[9/25/2022 11:23 PM] andi15701
and the 0x4 should then be 500mA


[9/25/2022 11:24 PM] szybet
oh right


[9/25/2022 11:24 PM] andi15701
everything looks sane


[9/25/2022 11:25 PM] szybet
i will try charge it then


[9/25/2022 11:27 PM] szybet
It works after i connect the charger, and then set it, and it oscilates arround 200mA~


[9/25/2022 11:27 PM] szybet
so, yay


[9/25/2022 11:27 PM] andi15701
but as said: the usb current setting plays also its role


[9/25/2022 11:28 PM] szybet
actually, is there a way to disable the charging completly, but still keeping 5V on the lines?


[9/25/2022 11:29 PM] andi15701
clear bit 1 and 0 of 0xB3


[9/25/2022 11:29 PM] szybet
i dont see such option in the mainline kernel


[9/25/2022 11:29 PM] szybet
hm?


[9/25/2022 11:30 PM] szybet
RN5T618_CHGCTL1


[9/25/2022 11:30 PM] andi15701
yes


[9/25/2022 11:30 PM] andi15701
these bits are also reset by replugging


[9/25/2022 11:30 PM] szybet
so set RN5T618_CHGCTL1 and RN5T618_CHGCTL1 to 0?


[9/25/2022 11:31 PM] andi15701
read it


[9/25/2022 11:31 PM] andi15701
do read_value & 0xFC


[9/25/2022 11:31 PM] andi15701
write the result back


[9/25/2022 11:32 PM] szybet
```
kobo:/# i2cget -y -f 3 0x32 0xb3
0x23
kobo:/# i2cget -y -f 3 0x32 0xb4
0x00
kobo:/# i2cget -y -f 3 0x32 0xFC
0x90
kobo:/# 

```


[9/25/2022 11:32 PM] szybet
while usb is unplugged^


[9/25/2022 11:32 PM] andi15701
wait


[9/25/2022 11:33 PM] andi15701
you misunderstood me a bit


[9/25/2022 11:33 PM] andi15701
kobo:/# i2cget -y -f 3 0x32 0xb3
0x23


[9/25/2022 11:33 PM] andi15701
that is correct


[9/25/2022 11:33 PM] andi15701
then calculate 0x23 &  0xFC


[9/25/2022 11:33 PM] andi15701
to clear the lower two bits


[9/25/2022 11:34 PM] andi15701
and do i2cset -y -f 3 0x32 0xb3  result


[9/25/2022 11:34 PM] szybet
calculate... how


[9/25/2022 11:34 PM] szybet
i dont think in the uA function


[9/25/2022 11:34 PM] andi15701
printf %x\\n $[0x23 & 0xFC]


[9/25/2022 11:34 PM] szybet
48


[9/25/2022 11:34 PM] szybet
what are we doing here?


[9/25/2022 11:35 PM] szybet
well thats 30


[9/25/2022 11:35 PM] szybet
after edit


[9/25/2022 11:35 PM] szybet
and?


[9/25/2022 11:36 PM] andi15701
i2cset -y -f 3 0x32 0xb3 0x30


[9/25/2022 11:36 PM] szybet
O.o


[9/25/2022 11:37 PM] szybet
it isint charging


[9/25/2022 11:37 PM] szybet
w o w


[9/25/2022 11:37 PM] szybet
arround 2mA


[9/25/2022 11:38 PM] szybet
i await explanations what happened


[9/25/2022 11:39 PM] andi15701
and you should use 0x20


[9/25/2022 11:40 PM] szybet
?


[9/25/2022 11:40 PM] andi15701
i2cset -y -f 3 0x32 0xb3 0x20


[9/25/2022 11:40 PM] andi15701
I  had one typo


[9/25/2022 11:40 PM] szybet
okay


[9/25/2022 11:40 PM] andi15701
up there


[9/25/2022 11:40 PM] szybet
it still worked


[9/25/2022 11:40 PM] szybet
but what is going on


[9/25/2022 11:40 PM] szybet
i have no idea why its working


[9/25/2022 11:43 PM] andi15701
bit 1 and 0 of CHGCTL1 is for turning usage of power supply for charging on/off


[9/25/2022 11:43 PM] andi15701
I also had that in a local version of the driver


[9/25/2022 11:46 PM] szybet
i have a question... what happens if i do this and switch the usb role to host?...


[9/25/2022 11:47 PM] andi15701
hmm, did not try that. I have never seen power out of the kobos


[9/25/2022 11:47 PM] szybet
no, im turning the charger off, still supplying 5v and then switching to host


[9/25/2022 11:47 PM] andi15701
i needed to apply external 5v


[9/25/2022 11:48 PM] szybet
i still do that


[9/25/2022 11:48 PM] szybet
but with yuor charger off option


[9/25/2022 11:48 PM] andi15701
it should work as usual


[9/25/2022 11:48 PM] szybet
i did this, and i saw for a moment 1A of current going, i disconnected it


[9/25/2022 11:48 PM] szybet
its now charging normal at 500mA


[9/25/2022 11:49 PM] szybet
also 0x20 doesnt work


[9/25/2022 11:49 PM] szybet
i need to 0x30


[9/25/2022 11:50 PM] andi15701
0x20 after plugging in usb does not work?


[9/25/2022 11:50 PM] szybet
after?


[9/25/2022 11:50 PM] andi15701
yes


[9/25/2022 11:51 PM] szybet
0x30 works pernamently


[9/25/2022 11:51 PM] szybet
0x20 after connecting causes it to be arround 60mA


[9/25/2022 11:51 PM] andi15701
that is device current


[9/25/2022 11:52 PM] szybet
okay


[9/25/2022 11:52 PM] szybet
how do i... switch back to charging?


[9/25/2022 11:52 PM] andi15701
write 0x23


[9/25/2022 11:52 PM] szybet
yep, works


[9/25/2022 11:52 PM] andi15701
0x30 might turn on vbus from kobo side


[9/25/2022 11:52 PM] andi15701
not researched that


[9/25/2022 11:53 PM] szybet
thats possible?


[9/25/2022 11:53 PM] szybet
supplying 5V?


[9/25/2022 11:53 PM] andi15701
maybe, but i should rather check that at my libra first


[9/25/2022 11:53 PM] andi15701
it is half-broken anyways


[9/25/2022 11:54 PM] szybet
actually yes, there is those 60mA


[9/25/2022 11:54 PM] szybet
so the battery now isint used?


[9/25/2022 11:54 PM] andi15701
afaik no


[9/25/2022 11:54 PM] szybet
so it isint


[9/25/2022 11:54 PM] szybet
thats cool


[9/25/2022 11:54 PM] szybet
i wonder how switching between sources is managed


[9/25/2022 11:56 PM] szybet
is there a way for 0x20 to be applied before plugging?


[9/26/2022 12:01 AM] andi15701
I do not know any


[9/26/2022 12:02 AM] szybet
okay, let now try all of this with my pcb


[9/26/2022 12:07 AM] andi15701
I would avoid doing i2cset quickly after power supply change events


[9/26/2022 12:07 AM] szybet
why?


[9/26/2022 12:07 AM] andi15701
to avoid interfering with driver i2c writes


[9/26/2022 12:07 AM] szybet
okay


[9/26/2022 12:14 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20220926_001353_DRO-1B7A1.jpg


[9/26/2022 12:14 AM] szybet
IT WORKS


[9/26/2022 12:14 AM] szybet
with half of the current


[9/26/2022 12:14 AM] szybet
massive thank you


[9/26/2022 12:16 AM] szybet
for some reason it still indicates that it charges


[9/26/2022 12:17 AM] szybet
but with 1/3 of the regular power


[9/26/2022 12:17 AM] szybet
thanks to you it will not drain its battery while trying to charge from 99 to 100 every some seconds


[9/26/2022 12:19 AM] szybet
well last question, how to learn those things myself? like, there werent any documentation on this chip for i2c


[9/26/2022 1:02 AM] aryetis
@Szybet stupid question, how did you debug what was happening when you were working on the sleep daemon ? 
Yes I'm back at it again.... I've done everything I wanted for my next release except that. Cause so far I either managed to have : 
1/ my devices goes to sleep but never wake up
2/ my devices goes to sleep and wake up.... But if I do anything during their waking up, going to sleep phases it can freeze the device/cancel the sleep/cat got stuck in the ceiling fan instructions unclear.
And `std::cout << "step 1/2/3/4" std::end`  can only go so far.


[9/26/2022 1:03 AM] tux_linux
Serial port


[9/26/2022 1:03 AM] tux_linux
And kernel ring buffer


[9/26/2022 1:04 AM] aryetis
Time to crack open that poor glo again and solder it to death.


[9/26/2022 1:05 AM] tux_linux
**be careful**


[9/26/2022 1:05 AM] aryetis
I might as well leave some wires dangling out of it instead of breaking the nips everytime I open it.


[9/26/2022 1:07 AM] aryetis
nah it's ok no devices complained about my procedures.~~cause they didn't survive.~~


[9/26/2022 3:34 AM] tux_linux
***exhales deeply***

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-6D3CE.png


[9/26/2022 4:17 AM] tux_linux
Yaaaaaay

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220926_021623676-61678.jpg


[9/26/2022 4:31 AM] tux_linux
https://github.com/Qalculate/libqalculate/discussions/469

{Embed}
https://github.com/Qalculate/libqalculate/discussions/469
Qalculate Qt running on a Kobo eReader! · Discussion #469 · Qalcula...
It will be an application for InkBox OS (https://inkbox.ddns.net , https://github.com/Kobo-InkBox/inkbox). Cross-compiling it was a bit of a nightmare, but it works now. It&#39;s too comlicated...
/mnt/data/projects/git/conversations/media/469-5E7EB


[9/26/2022 5:27 AM] the.mightydill
:D


[9/26/2022 5:59 AM] szybet
exactly


[9/26/2022 5:59 AM] szybet
wow you did it

{Reactions}
👍 

[9/26/2022 6:00 AM] szybet
makw a guide to cross compile it


[9/26/2022 6:01 AM] szybet
like, you dont want to go through this hell twice in the future


[9/26/2022 6:10 AM] tux_linux
I will make one
It's very complicated


[9/26/2022 6:28 AM] szybet
maybe just post your 'history'


[9/26/2022 6:28 AM] szybet
also, what time is in canada?...


[9/26/2022 8:08 AM] andi15701
well, if documentation is not available public, analyse every access to the device in various sources, uboot, kernel (and compare various kernels), sometimes there are comments. Compare with similar chips having the same register names or structure


[9/26/2022 8:26 AM] szybet
maybe in some years i will be able to do that


[9/26/2022 8:26 AM] szybet
for now c is a bit scary


[9/26/2022 6:36 PM] szybet
@tux-linux i want 2 patches for config:
1. disable "connect usb dialog" showing up
2. disable automatic updates


[9/26/2022 6:50 PM] szybet
`22-usb/show-dialog`
`23-updates/check-updates`


[9/26/2022 6:51 PM] szybet
🥴


[9/26/2022 7:11 PM] szybet
ota updates are simply updates over the internet?


[9/26/2022 7:11 PM] ninuje
Over The Air


[9/26/2022 7:11 PM] ninuje
yup


[9/26/2022 7:12 PM] szybet
the polish wikipedia says "wireless software"


[9/26/2022 7:12 PM] szybet
so without cables i think


[9/26/2022 8:07 PM] szybet
what `checked_box` in global


[9/26/2022 8:07 PM] szybet
why


[9/26/2022 8:58 PM] tux_linux
2 doesn't exist


[9/26/2022 8:58 PM] szybet
what?


[9/26/2022 8:58 PM] szybet
anyway, #patches


[9/26/2022 8:58 PM] szybet
;p


[9/26/2022 8:58 PM] tux_linux
It only checks for update
Never installs one without your consent


[9/26/2022 8:58 PM] szybet
yea and checking for update if the internet is slow takes 5s


[9/26/2022 8:59 PM] szybet
which freezes the gui


[9/26/2022 8:59 PM] szybet
i cant replicate this


[9/26/2022 8:59 PM] szybet
but i already fixed this


[9/26/2022 9:01 PM] szybet
you porpably will want to change things because you prefer otherwise, but thats your decission ( im talking about settings )


[9/26/2022 9:11 PM] tux_linux
Yes
Maybe throw settings to JSON
But that will be really complicated


[9/26/2022 9:12 PM] szybet
what


[9/26/2022 9:12 PM] szybet
why


[9/26/2022 9:12 PM] szybet
no


[9/26/2022 9:12 PM] tux_linux
It's a bit easier to manage once you have it set up


[9/26/2022 9:12 PM] tux_linux
Probably for 2.1


[9/26/2022 9:12 PM] szybet
no


[9/26/2022 9:12 PM] szybet
why


[9/26/2022 9:13 PM] szybet
now we use 2 functions to do it


[9/26/2022 9:13 PM] szybet
its eassly accessible by other programs


[9/26/2022 9:13 PM] szybet
even shell


[9/26/2022 9:13 PM] tux_linux
wdym


[9/26/2022 9:13 PM] szybet
readfile checkconfig


[9/26/2022 9:13 PM] szybet
writefile


[9/26/2022 9:13 PM] szybet
thats it


[9/26/2022 9:13 PM] tux_linux
Then vi is your friend


[9/26/2022 9:13 PM] tux_linux
I won't compress it


[9/26/2022 9:13 PM] szybet
shell scripts


[9/26/2022 9:14 PM] tux_linux
True
But utilities exist for that


[9/26/2022 9:14 PM] tux_linux
jq


[9/26/2022 9:14 PM] tux_linux
Which is already in the rootfs


[9/26/2022 9:14 PM] szybet
i dont like it


[9/26/2022 9:14 PM] szybet
this is simple


[9/26/2022 9:14 PM] szybet
its readable


[9/26/2022 9:14 PM] szybet
its good


[9/26/2022 9:14 PM] szybet
dont waste time on redesign


[9/26/2022 9:15 PM] szybet
lets put that that way:
you have better things to focus on


[9/26/2022 9:15 PM] tux_linux
.


[9/26/2022 9:15 PM] szybet
i want 2.0 :(


[9/26/2022 9:15 PM] szybet
i dont eved dream about 2.1


[9/26/2022 10:09 PM] andi15701
well, it also took me several month to bite the bullet to analyze things to write that charger driver. The RTC driver, which is also practically a complete rewrite, was easier.


[9/27/2022 12:38 AM] andi15701
btw: If you feel comfortable with i2cset and the pmic, I think trying out a mainline kernel on the nia not more risky


[9/27/2022 12:59 AM] szybet
im still afraid of the regulators


[9/27/2022 12:59 AM] szybet
i2cset is changing one thing, botting a whole kernel is hoping that everything is setted up correctly


[9/27/2022 3:46 AM] tux_linux
thank you for the patch, some corrections:
first, you spelled `prompt` wrong


[9/27/2022 3:50 AM] tux_linux
second:
***c o d e    s t a n d a r d s***

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BF453.png


[9/27/2022 3:53 AM] tux_linux
third:
If you are separating two words, you must use `check_updates` and not `check-updates`. The approach you're using can cause issues if you want to say "show-and-tell test" for example: `show-and-tell-test` isn't great, should be `show-and-tell_test` instead.
Though, here, `check_updates` is superfluous, as the config directory's name is already `updates`. Thus, you should only name the file `check`, as it will `check` for `updates`.

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C516F.png


[9/27/2022 3:55 AM] tux_linux
fourth:
when logging filenames, you must enclose them in single quotes
and here you should just say `Not launching OTA updater because of option '23-updates/check'`

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1272A.png


[9/27/2022 3:56 AM] tux_linux
fifth:
Launching OTA update**r** process

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-DDBF7.png


[9/27/2022 3:59 AM] tux_linux
sixth: did you actually study existing examples of using this function?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1CEF8.png


[9/27/2022 4:00 AM] tux_linux
also, if you use `writeconfig` in Settings, you should use `writeconfig` here

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-CF690.png


[9/27/2022 4:01 AM] tux_linux
seventh: no extraneous line break after slots declaration

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1D5C7.png


[9/27/2022 11:28 AM] szybet
add this to the wiki or smth, i didnt knew

{Reactions}
👍 

[9/27/2022 11:29 AM] szybet
i coppied your code ( and i did it wrong )


[9/27/2022 11:34 AM] szybet
qt does that


[9/27/2022 12:01 PM] szybet
i may not agree with all the changes, but i applied them anyway


[9/27/2022 12:01 PM] szybet
you need to apply both


[9/27/2022 12:32 PM] tux_linux
Thanks


[9/27/2022 1:22 PM] szybet
```
int lockscreen::get_passcode() {
    string_checkconfig_ro("/opt/inkbox_device");
    if(checkconfig_str_val == "n705\n" or checkconfig_str_val == "n905\n" or checkconfig_str_val == "n613\n") {
        QString prog ("dd");
        QStringList args;
        args << "if=/dev/mmcblk0" << "bs=256" << "skip=159745" << "count=1" << "status=none";
        QProcess *proc = new QProcess();
        proc->start(prog, args);
        proc->waitForFinished();

        QString procOutput = proc->readAllStandardOutput();
        procOutput = procOutput.left(8);

        int setPasscode = procOutput.toInt();
        return setPasscode;
    }
}
```


[9/27/2022 1:22 PM] szybet
so you... save the passcode in the middle of nowhere on the sd card in plain text?


[9/27/2022 1:37 PM] szybet
https://stackoverflow.com/questions/33718005/how-to-encrypt-and-decrypt-a-string-text-in-shell-linux-environment

{Embed}
https://stackoverflow.com/questions/33718005/how-to-encrypt-and-decrypt-a-string-text-in-shell-linux-environment
How to encrypt and decrypt a string/text in shell (linux environment)
I have a string, which is actually password. I want to encrypt the string and want to store the encrypted result in a parameter file. Next during execution of a script that encrypted string will be
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[9/27/2022 1:38 PM] szybet
we will use aes-256-cbc


[9/27/2022 1:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D53E2.png


[9/27/2022 1:38 PM] szybet
also look at this


[9/27/2022 1:43 PM] szybet
is there a reason that openssl isint in /kobo?


[9/27/2022 1:44 PM] szybet
https://stackoverflow.com/questions/2990722/howto-crypt-encrypt-some-string-e-g-password-on-qt-simple

{Embed}
https://stackoverflow.com/questions/2990722/howto-crypt-encrypt-some-string-e-g-password-on-qt-simple
HowTo Crypt/Encrypt some string (e.g. Password) on Qt simple
Here what I have got:
Qt SDK version 4.6.2
Windows XP
Question: how can I simply crypt and encrypt simple QString value? I need this to be able to save some crypted string into the INI file, and ...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[9/27/2022 1:44 PM] szybet
or a qt native way which would be better


[9/27/2022 2:00 PM] szybet
okay, my quess is to go with `Sha3_512` and a random long salt to it, and the lockscreen will be a small window with the opened window in the background, and it will grab the touch input until a correct password was given


[9/27/2022 2:00 PM] szybet
im waiting for you @tux-linux to approve this idea


[9/27/2022 2:01 PM] szybet
and they will be saved to a file


[9/27/2022 2:03 PM] tux_linux
Qt native is better
You already have openssl libs


[9/27/2022 2:03 PM] szybet
yea, qt native Sha3_512


[9/27/2022 2:04 PM] tux_linux
Yes
It's already better than on a plain text file


[9/27/2022 2:04 PM] tux_linux
Ok send patches and I will see


[9/27/2022 2:04 PM] szybet
i will start to work on it today

{Reactions}
👍 

[9/27/2022 2:04 PM] szybet
it will take time

{Reactions}
👍 

[9/27/2022 8:09 PM] szybet
whats is in lib32?


[9/27/2022 10:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20220927_223137053-3AC48.jpg


[9/27/2022 10:33 PM] szybet
design approval?


[9/27/2022 10:33 PM] szybet
thats a seperate qt app


[9/27/2022 10:33 PM] szybet
and its *eassly resizable*


[9/27/2022 10:41 PM] tux_linux
Absolutely not


[9/27/2022 10:41 PM] tux_linux
And the purpose of the lockscreen is to hide the screen contents for privacy
So, you get it


[9/27/2022 10:42 PM] szybet
😐


[9/27/2022 10:42 PM] tux_linux
And there is not enough padding around the edges of the dialog


[9/27/2022 10:42 PM] tux_linux
It's a good start


[9/27/2022 10:42 PM] szybet
just increase margins


[9/27/2022 10:42 PM] szybet
i want this option


[9/27/2022 10:42 PM] tux_linux
Well, still


[9/27/2022 10:42 PM] szybet
it will be there


[9/27/2022 10:42 PM] tux_linux
No


[9/27/2022 10:43 PM] tux_linux
It's not relevant


[9/27/2022 10:43 PM] szybet
option


[9/27/2022 10:43 PM] szybet
option


[9/27/2022 10:43 PM] szybet
option


[9/27/2022 10:43 PM] tux_linux
Have you ever seen a phone with a lock screen like that?


[9/27/2022 10:43 PM] szybet
its an ereader


[9/27/2022 10:43 PM] szybet
i read books on it


[9/27/2022 10:43 PM] tux_linux
Hint: keep the work you've done, just showFullScreen instead


[9/27/2022 10:43 PM] szybet
everyone knows i read the witcher


[9/27/2022 10:43 PM] szybet
it will be horrible


[9/27/2022 10:44 PM] szybet
i only need to replace the background image


[9/27/2022 10:44 PM] szybet
so thats easy


[9/27/2022 10:44 PM] tux_linux
Example, and that is not my case, I don't approve it, but an user reading NSFW books


[9/27/2022 10:44 PM] szybet
thats true


[9/27/2022 10:44 PM] szybet
well the lockscreen only points to a png file


[9/27/2022 10:44 PM] tux_linux
The old lockscreen didn't look ugly...?


[9/27/2022 10:44 PM] szybet
what it is, it will be an option


[9/27/2022 10:45 PM] szybet
i mean, a keypad on fullscreen


[9/27/2022 10:45 PM] tux_linux
Ok but put it in the same folder


[9/27/2022 10:45 PM] tux_linux
It was fine? Did you check what it was before redesigning it?


[9/27/2022 10:46 PM] szybet
with my design it resizes to its size i give it


[9/27/2022 10:46 PM] tux_linux
Also your dialog should be rounded
You're going against the design language


[9/27/2022 10:46 PM] szybet
soo


[9/27/2022 10:46 PM] szybet
rounded will look bad with a background image


[9/27/2022 10:47 PM] tux_linux
It can be rounded when it's on the previous background
In the other case I want it to look like encfs passphrase dialog


[9/27/2022 10:48 PM] szybet
it cant


[9/27/2022 10:48 PM] tux_linux
Why


[9/27/2022 10:48 PM] szybet
round corners have white on the pixels there


[9/27/2022 10:49 PM] tux_linux
I know, make it square only there


[9/27/2022 10:49 PM] tux_linux
Like encfs dialog


[9/27/2022 10:49 PM] tux_linux
Copy stylesheets if you need to


[9/27/2022 11:09 PM] tux_linux
For the option, there is already a folder for lockscreen


[9/27/2022 11:09 PM] szybet
i know


[9/28/2022 5:41 PM] szybet
do you want the code to manage power / charging for my project to be in inkbox code or do i need to look for workarounds


[9/28/2022 5:41 PM] szybet
@tux-linux


[9/28/2022 6:39 PM] tux_linux
Wdym


[9/28/2022 7:42 PM] szybet
a script that changes charger current when nerded by i2c


[9/28/2022 7:43 PM] szybet
and a dialog fori it


[9/28/2022 8:31 PM] szybet
hmm @andi `i2cset -y -f 3 0x32 0xb3 0x20` goes back after some time if the battery is almost charged ( 97% )


[9/28/2022 8:31 PM] szybet
any ideas?


[9/28/2022 8:39 PM] szybet
i dont really care because the charging current then is 180~ but just curious


[9/28/2022 8:51 PM] tux_linux
I will think about it


[9/28/2022 9:41 PM] szybet
@tux-linux when lockscreen could be launched


[9/28/2022 9:41 PM] szybet
all possible situations


[9/28/2022 9:41 PM] tux_linux
At boot and on wake up


[9/28/2022 9:42 PM] szybet
and on password change if it was already setted?


[9/28/2022 9:42 PM] tux_linux
Also when coming back from user app and x11


[9/28/2022 9:42 PM] szybet
why


[9/28/2022 9:42 PM] szybet
+ you will launch it


[9/28/2022 10:31 PM] szybet
```qt
void settings::changePassword() {
    global::keyboard::keypadText = "";
    global::keyboard::keypadDialog = true;
    generalDialogWindow = new generalDialog();
    generalDialogWindow->setAttribute(Qt::WA_DeleteOnClose);
    generalDialogWindow->exec();
    if(global::keyboard::keypadText == "") {
        // Im not sure if needed
        // showToastNative("Failed to set passprase");
        string_writeconfig(".config/12-lockscreen/config", "false");
        ui->enableLockscreenCheckBox->setCheckState(Qt::CheckState::Unchecked);
    }
    else {
        // Get the hash
        QByteArray key = global::keyboard::keypadText.toLocal8Bit();
        global::keyboard::keypadText = "";


        // Salt
        QRandomGenerator* generator = QRandomGenerator::system();
        QString salt;
        for(int i = 0; i <= 5; i++) {
            salt.append(QString::number(generator->generate64()));
        }

        // Finish
        QCryptographicHash hasher(QCryptographicHash::RealSha3_512);
        hasher.addData(key + salt.toLocal8Bit());
        QByteArray hash = hasher.result();

        QFile passwordFile = QFile(".config/12-lockscreen/password");
        QFile saltFile = QFile(".config/12-lockscreen/salt");
        passwordFile.open(QIODevice::ReadWrite);
        saltFile.open(QIODevice::ReadWrite);
        passwordFile.write(hash);
        saltFile.write(salt.toLocal8Bit());
    }
}
```


[9/28/2022 10:31 PM] szybet
```
kobo:/opt/config# cat 12-lockscreen/password 
4��1C.���U�k���;�ԋ�Fpp�Y�������G�E��z,�(p��%6�ﴽ�CȡU�kobo:/opt/config# 
kobo:/opt/config# cat 12-lockscreen/salt 
1543344397076438455117821081398448541900141887211110001371101400912372914497054430253144606167949145102745805108941201kobo:/opt/config# 
kobo:/opt/config# 
```


[9/28/2022 10:31 PM] szybet
is it ok?


[9/28/2022 10:33 PM] andi15701
hmm, what about disconnecting the battery?


[9/28/2022 10:33 PM] szybet
why would this um help


[9/28/2022 10:36 PM] tux_linux
Because the user might use an app for some time, put the device to sleep, then want to return to the default GUI?


[9/28/2022 10:37 PM] tux_linux
Good


[9/28/2022 10:37 PM] tux_linux
It's the strongest hash we can use?


[9/28/2022 10:37 PM] szybet
what


[9/28/2022 10:37 PM] tux_linux
Now with this you can encrypt Wi-Fi passwords


[9/28/2022 10:37 PM] szybet
native from qt, yes


[9/28/2022 10:37 PM] szybet
its more complicated then that


[9/28/2022 10:38 PM] szybet
but yes


[9/28/2022 10:38 PM] szybet
but after 2.0


[9/28/2022 10:38 PM] szybet
i want 2.0 already


[9/28/2022 10:38 PM] szybet
:(


[9/28/2022 10:38 PM] tux_linux
It's not ready


[9/28/2022 10:38 PM] tux_linux
You know it


[9/28/2022 10:38 PM] szybet
not really many thing are left


[9/28/2022 10:39 PM] tux_linux
Read it a second time
If you don't implement this then it will be a way to bypass the lockscreen when waking up


[9/28/2022 10:39 PM] szybet
but the lock screen will work for whatever is running in the background


[9/28/2022 10:39 PM] szybet
user app, xorg i dont care


[9/28/2022 10:40 PM] tux_linux
Yes
I have a huge mountain to climb
I just see it as a big big big list of things to do
It's a bit overwhelming


[9/28/2022 10:40 PM] szybet
those are mostly things that i did and you need to implement because i dont have permissions / knowledge


[9/28/2022 10:40 PM] tux_linux
The lockscreen isn't qt anymore?


[9/28/2022 10:40 PM] szybet
it is


[9/28/2022 10:41 PM] szybet
i grabs the touch screen


[9/28/2022 10:41 PM] szybet
so whatever is in the background, we dont care


[9/28/2022 10:41 PM] tux_linux
Ok
Well, roughly, you need to run it each time inkbox_gui restarts


[9/28/2022 10:41 PM] szybet
you will place it where you want to launch


[9/28/2022 10:42 PM] szybet
i just make a binary that if you launch, it works


[9/28/2022 10:42 PM] szybet
i will add it to ipd


[9/28/2022 10:42 PM] tux_linux
Ok


[9/28/2022 10:43 PM] szybet
```qt
    // Invert screen if dark mode setting is set to "true"
    if(checkconfig("/opt/inkbox_genuine") == true) {
        if(checkconfig(".config/10-dark_mode/config") == true) {
            string_writeconfig("/tmp/invertScreen", "y");
        }
        else {
            string_writeconfig("/tmp/invertScreen", "n");
        }
    }**
```can this be done from ipd?


[9/28/2022 10:44 PM] tux_linux
Yes


[9/28/2022 10:44 PM] szybet
good


[9/28/2022 10:44 PM] tux_linux
Why do you want to do it
It isn't even reliable


[9/28/2022 10:44 PM] tux_linux
And it doesn't work on some devices


[9/28/2022 10:44 PM] tux_linux
So don't use it


[9/28/2022 10:44 PM] szybet
what


[9/28/2022 10:44 PM] szybet
it already is here


[9/28/2022 10:44 PM] szybet
well okay then


[9/28/2022 10:45 PM] tux_linux
It works for some devices
But even there it isn't really reliable


[9/28/2022 10:45 PM] szybet
yea, for nia for example


[9/28/2022 10:45 PM] szybet
we need a stylesheet for qt to do it


[9/28/2022 10:46 PM] tux_linux
It's too hard


[9/28/2022 10:47 PM] szybet
its possible


[9/28/2022 10:47 PM] tux_linux
Because then you have to change thousands of setStyleSheet methods throughout InkBox code
probably


[9/28/2022 10:47 PM] szybet
propably not


[9/28/2022 10:47 PM] szybet
you dont everwrite color nowhere


[9/28/2022 10:47 PM] szybet
only size


[9/28/2022 10:47 PM] tux_linux
Yes I do?


[9/28/2022 10:48 PM] szybet
whatever


[9/28/2022 10:49 PM] szybet
it would more black anyways


[9/28/2022 10:50 PM] tux_linux
Maybe


[9/28/2022 11:53 PM] ninuje
For the umpteenth time: get rid of this crap, this belongs in the QPA


[9/28/2022 11:53 PM] ninuje
implemented properly


[9/28/2022 11:53 PM] ninuje
(which is trivial)


[9/28/2022 11:53 PM] tux_linux
For every single device?


[9/28/2022 11:54 PM] ninuje
It's the same mechanism for every one of 'em, since you don't support sunxi anyway

{Reactions}
👍 

[9/29/2022 2:00 AM] tux_linux
I found the Qt project's font
https://fonts.google.com/specimen/Titillium+Web

{Embed}
https://fonts.google.com/specimen/Titillium+Web
Google Fonts: Titillium Web
Titillium is born inside the Accademia di Belle Arti di Urbino as a didactic project Course Type design of the Master of Visual Design Campi Visivi. The aim of
/mnt/data/projects/git/conversations/media/opengraph_color-99B3B.png


[9/29/2022 3:28 AM] tux_linux
TIL you can use `-stylesheet` option on any Qt program to set a global stylesheet for all widgets
This won't be implemented for InkBox though as I use different stylesheets for some widgets (e.g. encryptionManager)


[9/29/2022 3:17 PM] tux_linux
@Szybet for folders in local library, do you handle the fact that the Libra shows 5 books instead of 4 on one page?


[9/29/2022 3:26 PM] szybet
i sended a video long time ago


[9/29/2022 3:26 PM] szybet
it works for every one


[9/29/2022 3:26 PM] szybet
its dynamic


[9/29/2022 4:32 PM] szybet
btw for folders


[9/29/2022 4:32 PM] szybet
i think i mentioned it


[9/29/2022 4:32 PM] szybet
you need to make the folder icon so big as the covers


[9/29/2022 4:33 PM] szybet
otherwise it looks awfull

{Reactions}
👍 

[9/29/2022 4:33 PM] szybet
there are many methofs to do that, so the choice is for you


[10/1/2022 12:07 AM] szybet
in conclusion: https://codebrowser.dev/qt5/qtbase/src/platformsupport/input/evdevkeyboard/qevdevkeyboardhandler.cpp.html#143


[10/1/2022 12:07 AM] szybet
qt is hurting my feelings for writing good software


[10/1/2022 12:08 AM] szybet
i will use `fuser /dev/input/event1` in lockscreen to know what processes use the touchscreen, freeze them, and then unfreeze them


[10/1/2022 12:08 AM] szybet
ipd will be untouched


[10/1/2022 12:08 AM] szybet
do you accept this @tux-linux


[10/1/2022 12:17 AM] tux_linux
You will launch it from the binary?


[10/1/2022 12:17 AM] szybet
yes


[10/1/2022 12:17 AM] szybet
once


[10/1/2022 12:17 AM] szybet
*fuser* right?


[10/1/2022 12:18 AM] tux_linux
Ok
You can't use anything else?


[10/1/2022 12:18 AM] szybet
any ideas?


[10/1/2022 12:18 AM] szybet
i ran out of them


[10/1/2022 12:20 AM] tux_linux
There isn't a lib?


[10/1/2022 12:24 AM] szybet
i dont see any


[10/1/2022 12:30 AM] tux_linux
Hm ok


[10/1/2022 7:27 PM] szybet
@tux-linux how do i run lockscreen from ipd?


[10/1/2022 7:27 PM] szybet
how do i run a program from main rootfs in qt?


[10/1/2022 7:28 PM] tux_linux
chroot?


[10/1/2022 7:28 PM] szybet
do i launch chroot from ipd?


[10/1/2022 7:28 PM] szybet
isint there a better option?


[10/1/2022 7:28 PM] tux_linux
Yes
Don't bother with syscalls
I tried it in init, too complicated
Use posix spawn


[10/1/2022 7:29 PM] szybet
🥴


[10/1/2022 7:52 PM] szybet
I will call fbgrab from ipd for background feature in lockscreen because:
1. its a rare feature only i will use :P
2. the png library is ***hell*** to compile under musl. i dont have time for it


[10/1/2022 11:37 PM] szybet
done.


[10/1/2022 11:37 PM] szybet
https://github.com/Kobo-InkBox/lockscreen/pull/1

{Embed}
https://github.com/Kobo-InkBox/lockscreen/pull/1
rewrite by Szybet · Pull Request #1 · Kobo-InkBox/lockscreen
/mnt/data/projects/git/conversations/media/1-B087D


[10/1/2022 11:38 PM] szybet
also i pushed things to ipd repo, and in #patches is a thread with all the patches for inkbox


[10/1/2022 11:38 PM] szybet
if you want to test, look through ipd repo, there is a file needed to be created in rootfs ( + replace `lockscreen` file in qt rootfs with the binary, `lockscreen-bin` is absolute ) [ also apply all my patches in chrological order, even with those previous "disable dialogs" for example ]


[10/1/2022 11:39 PM] szybet
also, ***I will only help debug problems that are reproducible with those patches above, if there are bugs after "finishing touches" i will be mad :(***


[10/1/2022 11:40 PM] szybet
also, i will look though the code tommorow to look for syntax improvements or smth, but it should be fine


[10/1/2022 11:41 PM] szybet
also, this is the last major contribution in the next 3-4 weeks for sure because of lack of time, in fact i used today's time that i didn't have ;p


[10/3/2022 12:45 AM] tux_linux
starting out well

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-B64AE.png


[10/3/2022 12:46 AM] tux_linux
chos**en**
`option::blank`
**c a m e l C a s e**

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D56B9.png


[10/3/2022 12:47 AM] tux_linux
it's ok, then correct them yourself before sending them out 😉


[10/3/2022 12:47 AM] tux_linux
but jokes aside, thanks for the pr


[10/3/2022 12:48 AM] tux_linux
***hmmmmmmmmmmmmm***


[10/3/2022 12:49 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-AC068.png


[10/3/2022 12:49 AM] tux_linux
```
background,
blank,
screenSaver
```

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-5B719.png


[10/3/2022 12:50 AM] tux_linux
*Nothing else works

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1167B.png


[10/3/2022 12:51 AM] tux_linux
delete if it's commented code

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-D25FC.png


[10/3/2022 12:51 AM] tux_linux
`hiddenPasscode`

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-218CD.png


[10/3/2022 12:52 AM] tux_linux
fdsgkljfdsglfds

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-BDA46.png


[10/3/2022 12:52 AM] tux_linux
did I not say camelCase enough times?


[10/3/2022 12:54 AM] tux_linux
Button->Btn everywhere

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-348EC.png


[10/3/2022 7:29 AM] szybet
200~ english words to learn for today defeated me


[10/3/2022 7:29 AM] szybet
thats my script to deploy it, nevermind i will deleye it😆


[10/3/2022 7:37 AM] szybet
there shpuldnt be any, it works for me


[10/3/2022 1:20 PM] tux_linux
There is ;p

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20221003-071943-27142.png


[10/3/2022 2:56 PM] szybet
im talking about problems, bugs not syntax problems

{Reactions}
👍 

[10/7/2022 10:59 PM] tux_linux
Ok, weekend has come
I'll work on adapting Qalculate to eInk and on init


[10/7/2022 11:19 PM] szybet
good


[10/7/2022 11:20 PM] szybet
i well, dont have time


[10/7/2022 11:20 PM] szybet
for the rest of october propably


[10/7/2022 11:20 PM] szybet
😞


[10/7/2022 11:22 PM] tux_linux
np
On week-ends too?


[10/8/2022 12:09 AM] tux_linux
Looks rather good huh?

{Attachments}
/mnt/data/projects/git/conversations/media/qalculate-3BD42.png


[10/8/2022 12:11 AM] tux_linux
but then there are some... problems

{Attachments}
/mnt/data/projects/git/conversations/media/qalculate-menu-D9157.png


[10/8/2022 12:17 AM] szybet
if there is something important and small to do for inkbox, then maybe


[10/8/2022 12:17 AM] szybet
yea


[10/8/2022 12:17 AM] szybet
hide the option to show it


[10/8/2022 12:19 AM] tux_linux
Actually it's fine with a small fix

{Attachments}
/mnt/data/projects/git/conversations/media/qalculate-menu-8BC7E.png


[10/8/2022 12:19 AM] tux_linux
I don't know how it will look on the Mini


[10/8/2022 12:20 AM] szybet
dont care about the mini that much


[10/8/2022 12:20 AM] tux_linux
...yes


[10/8/2022 12:20 AM] tux_linux
i'm testing on the libra


[10/8/2022 12:20 AM] tux_linux
so, like, worst model to prevent issues for small screens


[10/8/2022 12:21 AM] tux_linux
also, some things need a virtual keyboard if you want to input things in


[10/8/2022 12:21 AM] szybet
that are?


[10/8/2022 12:21 AM] tux_linux
not basic calculations


[10/8/2022 12:21 AM] tux_linux
maybe you want to search a function


[10/8/2022 12:21 AM] szybet
ignore it


[10/8/2022 12:21 AM] tux_linux
like this

{Attachments}
/mnt/data/projects/git/conversations/media/qalculate-menu-F1A6E.png


[10/8/2022 12:21 AM] szybet
like, its the best calculator you will get on a ereader


[10/8/2022 12:22 AM] szybet
so stop complaining ( to the user ) :p


[10/8/2022 12:22 AM] tux_linux
yes


[10/8/2022 12:29 AM] tux_linux
I took a video
will share it shortly


[10/8/2022 12:29 AM] tux_linux
https://photos.app.goo.gl/cDCe8bPyXRmxVsdA7
welp, google needs some time to process it correctly in HD

{Embed}
https://photos.app.goo.gl/cDCe8bPyXRmxVsdA7
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/CJdqQrQARBHC1zOOBZmyvLOicbQ0JEv5zF-NtOiZLT-D621A


[10/8/2022 12:29 AM] the.mightydill
dill has entered the chat


[10/8/2022 12:29 AM] the.mightydill
😈


[10/8/2022 12:33 AM] szybet
oh so you want to be the mini maintainer, thats cool ;p


[10/8/2022 12:35 AM] szybet
looks good


[10/8/2022 12:35 AM] the.mightydill
lmao


[10/8/2022 12:35 AM] the.mightydill
i could try


[10/8/2022 12:35 AM] the.mightydill
but i have 0 knowledge


[10/8/2022 12:35 AM] tux_linux
you have had 0 knowledge for 2 years

{Reactions}
🥴 (3) 

[10/8/2022 12:35 AM] tux_linux
it's time to learn


[10/8/2022 12:35 AM] tux_linux
;p


[10/8/2022 12:35 AM] szybet
what knowledge i had when i entered the project


[10/8/2022 12:35 AM] szybet
some rust coding


[10/8/2022 12:35 AM] szybet
linux


[10/8/2022 12:35 AM] szybet
electronics


[10/8/2022 12:35 AM] szybet
qt and cpp basically learned from scratch


[10/8/2022 12:36 AM] the.mightydill
i did lfs a year ago


[10/8/2022 12:36 AM] the.mightydill
¯\_(ツ)_/¯


[10/8/2022 12:36 AM] tux_linux
you state yourself that you have 0 knowledge


[10/8/2022 12:36 AM] tux_linux
so you're contradicting yourself
and so am I


[10/8/2022 12:36 AM] the.mightydill
true


[10/8/2022 12:36 AM] tux_linux
hehe


[10/8/2022 12:36 AM] the.mightydill
lmao that's also true


[10/8/2022 2:01 AM] tux_linux
https://github.com/Kobo-InkBox/qalculate-qt

{Embed}
https://github.com/Kobo-InkBox/qalculate-qt
GitHub - Kobo-InkBox/qalculate-qt: Qalculate-Qt ported to eReaders
Qalculate-Qt ported to eReaders. Contribute to Kobo-InkBox/qalculate-qt development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qalculate-qt-F79C8


[10/8/2022 2:55 AM] tux_linux
when you want to bring `c` to the next level...

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FF6DE.png


[10/8/2022 3:41 AM] tux_linux
https://github.com/Kobo-InkBox/qalculate-qt/tree/main/libs


[10/8/2022 2:17 PM] szybet
will this app be built in or user app


[10/8/2022 2:17 PM] szybet
i would like it to be built in


[10/8/2022 2:17 PM] tux_linux
Built in


[10/8/2022 6:25 PM] szybet
guide to compile them............


[10/8/2022 7:20 PM] tux_linux
Too long to do now


[10/8/2022 9:26 PM] tux_linux
A bit cramped up but it's working
and usable

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20221008_192401559-5417D.jpg


[10/8/2022 9:58 PM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/commit/bd740d1320eba4d2ff20d7fc0500fd7ff6baaf96
that's it

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/commit/bd740d1320eba4d2ff20d7fc0500fd7ff6baaf96
Add Qalculate to built-in applications · Kobo-InkBox/gui-bundle@bd7...
/mnt/data/projects/git/conversations/media/bd740d1320eba4d2ff20d7fc0500fd7ff6baaf96-B7E67


[10/8/2022 10:00 PM] szybet
😄

{Reactions}
👍 

[10/8/2022 10:00 PM] szybet
finally


[10/8/2022 10:53 PM] szybet
cool, finally
https://github.com/Kobo-InkBox/rootfs/pull/3

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/3
wifi update - for the future GUI wifi panel by Szybet · Pull Reques...
dont accept it for now
/mnt/data/projects/git/conversations/media/3-C769F


[10/8/2022 10:54 PM] tux_linux
Yes but I did not fix Glo HD


[10/8/2022 10:55 PM] tux_linux
yet


[10/9/2022 12:28 AM] szybet
whats the problem once more?


[10/9/2022 12:41 AM] tux_linux
Failure to acquire DHCP lease


[10/9/2022 12:44 AM] szybet
did it work with the previous network manager?


[10/9/2022 12:45 AM] tux_linux
Obviously?


[10/9/2022 12:45 AM] szybet
so yes?


[10/9/2022 12:49 AM] tux_linux
Yes


[10/9/2022 12:49 AM] szybet
logs?


[10/9/2022 12:53 AM] tux_linux
I tracked it down as far as I could and it does the same thing as it should do


[10/9/2022 12:53 AM] szybet
does is simply... time out?


[10/9/2022 12:53 AM] tux_linux
Maybe it's the wpa_cli thing that messes it up


[10/9/2022 12:53 AM] szybet
you can eassly disable it


[10/9/2022 12:53 AM] szybet
and you even did it


[10/9/2022 12:53 AM] tux_linux
Yes. every. single. time.


[10/9/2022 12:54 AM] tux_linux
Not wpa_cli


[10/9/2022 12:54 AM] tux_linux
Only wpa_supplicant and wpa_passphrase


[10/9/2022 12:54 AM] szybet
just increase the time........?


[10/9/2022 12:54 AM] szybet
then why didnt you try


[10/9/2022 12:54 AM] szybet
its one if more


[10/9/2022 12:54 AM] tux_linux
Oh, no matter what


[10/9/2022 12:55 AM] tux_linux
I tried acquiring one manually too but it hung as well iirc


[10/9/2022 12:56 AM] szybet
then why does the previous script work


[10/9/2022 12:57 AM] tux_linux
the problem would already have been solved if I knew that


[10/9/2022 12:57 AM] szybet
maybe some modules arent loaded


[10/9/2022 12:57 AM] szybet
or smth


[10/9/2022 12:58 AM] szybet
or an if with device name isint applied correctly


[10/9/2022 12:58 AM] szybet
but first - try to make the process manually, execute all commands yourself


[10/9/2022 12:59 AM] tux_linux
Yes, maybe


[10/10/2022 2:48 PM] tux_linux
you are running `wpa_supplicant` twice
maybe that's the issue


[10/10/2022 3:13 PM] tux_linux
nope
still nothing

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-8FF2F.png


[10/10/2022 3:15 PM] tux_linux
maybe it doesn't like the fact that it's both scanning and connecting to a network without disabling the interface first


[10/10/2022 4:47 PM] tux_linux
@andi what was the kernel config about DHCP BPF in the kernel you talked about at some point? I can't find it in the Discord search utility


[10/10/2022 4:53 PM] tux_linux
oh, `CONFIG_BPF`
but it doesn't exist in 3.0.35 kernel


[10/10/2022 5:59 PM] szybet
what


[10/10/2022 6:00 PM] szybet
show me the code


[10/10/2022 6:00 PM] tux_linux
it was in prepare_network and connect_to_network but actually only prepare_network is run


[10/10/2022 6:01 PM] szybet
thats how its supposed to work🥴


[10/10/2022 6:01 PM] szybet
fancy logging scripts for the watcher in the gui, and one big for ipd


[10/10/2022 6:02 PM] tux_linux
yes and connect_to_network doesn't work oob I had to edit it
you forgot to remove one `cleanup` call


[10/10/2022 6:02 PM] tux_linux
but it still doesn't work
i spent 3 hours on this
I'm giving up, I will launch the legacy `connect_to_network.sh` script only for Glo HD


[10/10/2022 6:02 PM] szybet
it worked for me so hey🥴


[10/10/2022 6:03 PM] szybet
thid is weird, cant you connect to wifi with cli?


[10/10/2022 6:03 PM] tux_linux
yes but why would it matter


[10/10/2022 6:04 PM] tux_linux
the normal script works
so of course I can


[10/10/2022 6:05 PM] szybet
maybe some more time drlay is needed in the script


[10/10/2022 6:05 PM] tux_linux
did you keep the same delays that were in my script?


[10/10/2022 6:05 PM] szybet
idk


[10/10/2022 6:06 PM] tux_linux
it seems you do, even more


[10/10/2022 6:07 PM] szybet
this?


[10/10/2022 6:07 PM] tux_linux
oh, i checked


[10/10/2022 6:08 PM] tux_linux
it would be nice if ai could solve problems like this for us


[10/10/2022 6:08 PM] szybet
i dont have any explanatiom for your problem


[10/10/2022 6:09 PM] szybet
my scripts are just splitted, with some logging and timeouts


[10/10/2022 6:09 PM] szybet
its basically the same


[10/10/2022 6:09 PM] tux_linux
there must be a difference somewhere
i don't want to spend my life debugging it
just looking at the length of the todo list is enough to make me have nightmares


[10/10/2022 6:10 PM] szybet
okay


[10/10/2022 6:10 PM] szybet
then with this solution you need to apply it to the watcher in thr gui


[10/10/2022 6:11 PM] tux_linux
yes, I will connect it properly


[10/10/2022 6:11 PM] szybet
that it will show the correct info and will rescann


[10/10/2022 6:11 PM] szybet
please dont break things, put everything in if glo hd


[10/10/2022 6:12 PM] tux_linux
yes


[10/10/2022 6:17 PM] tux_linux
good it works now
but inkbox gui segfaults once it has connected to it


[10/10/2022 6:18 PM] tux_linux
```
10/10/2022 @ 12:18:06 | wifiDialog: Wi-Fi dialog checkbox clicked: 2
10/10/2022 @ 12:18:06 | wifiDialog: Clicked refresh button
10/10/2022 @ 12:18:07 | wifiDialog: Retrieved network list successfully
10/10/2022 @ 12:18:07 | wifiDialog: MAC is: 64:0F:28:24:76:D1
10/10/2022 @ 12:18:07 | wifiDialog: Network name is: 'Entrelac'
10/10/2022 @ 12:18:07 | wifiDialog: Encryption type is: true
10/10/2022 @ 12:18:07 | wifiDialog: Signal strength is: 55
10/10/2022 @ 12:18:07 | wifiDialog: Skipping additional items from network information
10/10/2022 @ 12:18:07 | wifiDialog: Data lines count is below 4; skipping
10/10/2022 @ 12:18:07 | wifiDialog: Found 1 valid networks
10/10/2022 @ 12:18:07 | wifiDialog: Current network name is: Entrelac
10/10/2022 @ 12:18:07 | wifiDialog: Found current network in vector
10/10/2022 @ 12:18:07 | network: Applying variables for network
10/10/2022 @ 12:18:07 | wifiDialog: pureNetworkList size is: 1, entry at 0 slated for removal
```


[10/10/2022 6:48 PM] szybet
it crashedm


[10/10/2022 6:48 PM] szybet
?


[10/10/2022 8:21 PM] tux_linux
yes


[10/10/2022 8:21 PM] tux_linux
at the last log line


[10/10/2022 8:22 PM] tux_linux
it does it if the Glo HD connects to a network and if the user opens wifiDialog


[10/10/2022 8:28 PM] andi15701
what was the status of your Glo HD? Fully working?


[10/10/2022 8:28 PM] andi15701
so with usb


[10/10/2022 8:28 PM] andi15701
?


[10/10/2022 8:29 PM] tux_linux
yes
it's only not being able to connect to a network with Szybet's new wi-fi framework


[10/10/2022 8:30 PM] tux_linux
hangs on getting a dhcp lease


[10/10/2022 8:30 PM] tux_linux
so I reverted back to the legacy method only for this model


[10/10/2022 8:30 PM] andi15701
well, you should not need to


[10/10/2022 8:30 PM] andi15701
use a sane kernel  + uboot


[10/10/2022 8:31 PM] tux_linux
yes.. with working epdc


[10/10/2022 8:31 PM] andi15701
Kobo Glo HD  = tolino shine2hd with two buttons less


[10/10/2022 8:31 PM] andi15701
I will check again


[10/10/2022 8:31 PM] andi15701
and the latter has working epdc


[10/10/2022 8:32 PM] tux_linux
hm, interesting


[10/10/2022 8:33 PM] andi15701
so Kobo Clara kernel/initrd as it is in inkbox + Tolino Shine 2HD devicetree should produce something


[10/10/2022 8:33 PM] andi15701
working


[10/10/2022 8:35 PM] andi15701
+ Tolino2 uboot (2020.10) from pmOS


[10/10/2022 8:42 PM] tux_linux
ok thanks


[10/11/2022 7:25 AM] szybet
how did you breaked it


[10/11/2022 7:25 AM] szybet
🥴


[10/11/2022 3:34 PM] szybet
https://github.com/Kobo-InkBox/inkbox/commit/8ab6181b70210482537b88f33b25f31f53e68b51

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/8ab6181b70210482537b88f33b25f31f53e68b51
Folders: Increase icon height for better display in library · Kobo-...
/mnt/data/projects/git/conversations/media/8ab6181b70210482537b88f33b25f31f53e68b51-19637


[10/11/2022 3:34 PM] szybet
is it all the same on all devices?


[10/11/2022 3:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-0A1EB.png


[10/11/2022 3:37 PM] szybet
https://tenor.com/view/kokoro-bandori-anime-fire-dumpster-gif-22029503

{Embed}
https://tenor.com/view/kokoro-bandori-anime-fire-dumpster-gif-22029503
/mnt/data/projects/git/conversations/media/kokoro-bandori-9AD1F.png


[10/11/2022 3:37 PM] szybet
finally this nightmare is removed


[10/11/2022 3:39 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle

{Embed}
https://github.com/Kobo-InkBox/gui-bundle
GitHub - Kobo-InkBox/gui-bundle: InkBox GUI bundle contents and gen...
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[10/11/2022 3:39 PM] szybet
well from there not


[10/11/2022 3:41 PM] tux_linux
Yes it should scale automatically


[10/11/2022 3:41 PM] tux_linux
Will do


[10/11/2022 3:42 PM] szybet
*it should* is the part that scares me


[10/11/2022 5:02 PM] tux_linux
Try it on the nia


[10/11/2022 5:02 PM] tux_linux
I tested it on Glo HD
1448x1072 screen res


[10/11/2022 5:19 PM] tux_linux
I just increased size from 512x512 to 512x768 so it's a rectangle like a book cover


[10/12/2022 3:22 AM] tux_linux
AT LAST

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20221012_012147701-69A5A.jpg


[10/12/2022 3:23 AM] tux_linux
Working with your implementation, without legacy scripts shenanigans


[10/12/2022 3:37 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/02c060978fcdf4bff52c7d7f29f4710388a96647

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/02c060978fcdf4bff52c7d7f29f4710388a96647
N437: Finally solve long-running DHCP lease acquisition issue · Kob...
/mnt/data/projects/git/conversations/media/02c060978fcdf4bff52c7d7f29f4710388a96647-EF0B5


[10/12/2022 3:56 AM] tux_linux
Now Maps work on Glo HD too

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20221012_015555551-47820.jpg
/mnt/data/projects/git/conversations/media/PXL_20221012_015518267-24D40.jpg


[10/12/2022 3:59 AM] the.mightydill
how's the refresh rate?


[10/12/2022 4:00 AM] tux_linux
eink typical


[10/12/2022 4:00 AM] tux_linux
it's fast for a maps app though


[10/12/2022 4:01 AM] the.mightydill
yeah true


[10/12/2022 4:01 AM] the.mightydill
video?


[10/12/2022 4:01 AM] tux_linux
https://github.com/Szybet/inkbox-maps/blob/master/README.md

{Embed}
https://github.com/Szybet/inkbox-maps/blob/master/README.md
inkbox-maps/README.md at master · Szybet/inkbox-maps
Maps written in qt, c++ for ereaders, inkbox os. Contribute to Szybet/inkbox-maps development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-maps-EFE8F


[10/12/2022 4:02 AM] tux_linux
The UI design has changed but it's basically the same thing regarding refresh rate


[10/12/2022 7:25 AM] szybet
logs 😞


[10/12/2022 7:25 AM] szybet
i hope it works for the rest of devices as it was?


[10/12/2022 1:34 PM] tux_linux
Why? It just works
I didn't need to use the original script
Did you look at the commit?


[10/12/2022 1:34 PM] tux_linux
Yes


[10/12/2022 1:34 PM] tux_linux
No change


[10/12/2022 6:54 PM] szybet
it sounded like you dropped the modular approuch

not really, i will later


[10/12/2022 6:54 PM] szybet
cool that you have more time for inkbox lately


[10/12/2022 7:00 PM] szybet
i want a decission soon


[10/12/2022 7:42 PM] tux_linux
What will be the dialog's content exactly ?


[10/12/2022 8:19 PM] szybet
lockscreen mechanism dialog to work on all apps. triggered by charger connection, but to choose to:
- if to limit charging current
- to what amount if yes
- a default option done after 5s
- option to set the default option


[10/12/2022 8:20 PM] szybet
this^ will be launched by ipd, and enabled by writing to a file on the filesystem a quote something like "im ok that my ereader will catch fire, give me that option"


[10/12/2022 8:21 PM] szybet
i will do this anyway, its only if you want this in the official code


[10/12/2022 8:21 PM] szybet
a cool option i would say, needed for niAudio but for example for preserving batteries life, charging it slowly etc


[10/12/2022 10:36 PM] tux_linux
But what does it have to do with lockscreen?


[10/12/2022 10:38 PM] szybet
it freezes apps below itself


[10/12/2022 10:38 PM] szybet
the backend of lockscreen will be reused


[10/12/2022 10:40 PM] tux_linux
Oh ok


[10/12/2022 10:40 PM] tux_linux
22-charging_properties


[10/12/2022 10:41 PM] tux_linux
I will make the option in settings


[10/12/2022 10:41 PM] szybet
this is a dangerous option


[10/12/2022 10:41 PM] szybet
really


[10/12/2022 10:41 PM] szybet
dont enable it to regular users


[10/12/2022 10:42 PM] szybet
hide it, only on rooted kernel, only mentioned on the wiki


[10/12/2022 10:42 PM] tux_linux
I know
I will make a dead skull splash just for it ☠️


[10/12/2022 10:43 PM] szybet
a section for things that can damage your device? :D


[10/12/2022 10:43 PM] tux_linux
Probably


[10/12/2022 10:46 PM] the.mightydill
lmaoo


[10/13/2022 5:43 AM] tux_linux
@Szybet did it happen on your Nia?

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-48F6E.png


[10/13/2022 8:47 AM] szybet
no, i will test it today


[10/13/2022 8:48 AM] szybet
i didnt noticed it


[10/13/2022 4:39 PM] ninuje
https://github.com/koreader/koreader/blob/2a354912f4215380668479859acd8dd4fb5a0afe/frontend/device/kobo/device.lua#L1258-L1262

{Embed}
https://github.com/koreader/koreader/blob/2a354912f4215380668479859acd8dd4fb5a0afe/frontend/device/kobo/device.lua
koreader/device.lua at 2a354912f4215380668479859acd8dd4fb5a0afe · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at 2a354912f4215380668479...
/mnt/data/projects/git/conversations/media/koreader-17FE1


[10/13/2022 10:34 PM] tux_linux
In my case, I didn't touch the screen or do anything, idle sleep was turned off, nothing was going on, it just turned off


[10/15/2022 1:06 AM] tux_linux
@Szybet https://github.com/Kobo-InkBox/rootfs/commit/c3acde06d21d74649877df87ce19e2bcecad68d5

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/c3acde06d21d74649877df87ce19e2bcecad68d5
GUI: Increase check box icon size depending on screen resolution · ...
/mnt/data/projects/git/conversations/media/c3acde06d21d74649877df87ce19e2bcecad68d5-17786


[10/15/2022 1:07 AM] szybet
Finally


[10/15/2022 1:07 AM] szybet
i will look into it, how it looks

{Reactions}
👍 

[10/15/2022 1:54 PM] tux_linux
Folders bug: put files in a folder, then delete all files in that folder from the GUI.
Then the bug happens: "page request is out of range" or something like that


[10/15/2022 1:55 PM] tux_linux
It's very simple to reproduce, you can get logs yourself


[10/15/2022 2:43 PM] szybet
no

i looked, nothing happened
i was writing ipd, i would notice that


[10/15/2022 2:43 PM] szybet
will look into it


[10/15/2022 2:44 PM] szybet
i would still make it bigger but its enough for me to not complaint further


[10/15/2022 2:47 PM] szybet
folders look good

{Reactions}
👍 

[10/15/2022 2:52 PM] szybet
`15/10/2022 @ 14:52:13 | localLibraryWidget: Error: Shouldn't be possible to get here` wtf.......


[10/15/2022 3:12 PM] tux_linux
Anyway you can just click the label it will work too


[10/15/2022 3:12 PM] szybet
i know


[10/15/2022 3:24 PM] szybet
the hell


[10/15/2022 3:24 PM] szybet
this patch
https://discord.com/channels/809205711778480158/1018508714178781184/1021852681259716608


[10/15/2022 3:25 PM] szybet
```
// https://stackoverflow.com/questions/2799379/is-there-an-easy-way-to-strip-html-from-a-qstring-in-qt
+            // This can cause problems if someone names its directory as html tags, my solution: Stop. Anki which is a big project also doesnt cares about this
+            directory.remove(QRegExp("<[^>]*>"));
```


[10/15/2022 3:25 PM] szybet
this is missing


[10/15/2022 3:25 PM] szybet
its pretty important...


[10/15/2022 3:25 PM] tux_linux
I thought I applied it?


[10/15/2022 3:25 PM] szybet
it isint there


[10/15/2022 3:25 PM] tux_linux
I remember reading this bit


[10/15/2022 3:25 PM] szybet
its missing


[10/15/2022 3:25 PM] tux_linux
Is it the only thing missing?


[10/15/2022 3:25 PM] szybet
everything else works so... propably...


[10/15/2022 3:26 PM] tux_linux
Ok


[10/15/2022 3:26 PM] szybet
i will apply this and send with the patch for this


[10/15/2022 3:27 PM] szybet
this bug wouldn't exist if we had one active user, tester :/


[10/15/2022 3:28 PM] szybet
ok sorry


[10/15/2022 3:28 PM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/2a51e6a24fcb190c638e2cfa0d22fe8cb364fca5/src/localLibrary/locallibrarywidget.cpp#L348-L350

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/2a51e6a24fcb190c638e2cfa0d22fe8cb364fca5/src/localLibrary/locallibrarywidget.cpp
inkbox/locallibrarywidget.cpp at 2a51e6a24fcb190c638e2cfa0d22fe8cb3...
An open-source, Qt-based eBook reader for Kobos. Contribute to Kobo-InkBox/inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-D3DB3


[10/15/2022 3:28 PM] szybet
im blind


[10/15/2022 3:28 PM] szybet
but it doesnt work now


[10/15/2022 3:28 PM] szybet
thats interesting


[10/15/2022 3:29 PM] szybet
🥴


[10/15/2022 3:29 PM] tux_linux
Great


[10/15/2022 4:35 PM] szybet
done


[10/15/2022 4:35 PM] szybet
#patches


[10/15/2022 4:57 PM] tux_linux
Thanks
Do you actually handle not showing books in main library if it's only in a folder?


[10/15/2022 4:57 PM] szybet
i dont understand


[10/15/2022 5:04 PM] tux_linux
if a book exists
and it's in a folder
will local library show the book both outside and inside the folder or only inside it?


[10/15/2022 5:05 PM] szybet
only inside it?...


[10/15/2022 5:05 PM] tux_linux
ok good


[10/15/2022 5:05 PM] szybet
thats the point of folders...


[10/15/2022 5:05 PM] tux_linux
yes, but the way local library is designed initially would have done both


[10/15/2022 5:06 PM] tux_linux
I just wanted to ensure that you thought about it


[10/15/2022 5:06 PM] szybet
i just filter the books based on path


[10/15/2022 5:06 PM] tux_linux
good


[10/16/2022 11:06 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-FB4BB.png


[10/16/2022 11:06 AM] szybet
maybe inform him that everything is well fixed?


[10/16/2022 5:30 PM] aryetis
~~@andi  I've been told you know you're way around u-boot on kobo. Can you please explain to my dumb ass how to add `no_console_suspend` to boot args ? So that I can debug sleep/wakeup on my app (running on nickel, not inkbox)
Everything screams u-boot at me and I'm kinda drowning in low level code and documentation atm.  From what I understand I've got 3 ways to go :
- recompile it and replace it .... seems overkill and I can see this approach breaking a ton of thing
- setting some system variables. I'm seeing those `bootcmd` and `bootargs` var in the docs (https://u-boot.readthedocs.io/en/latest/usage/environment.html) but they don't show up when I type `env` so I'm confused... Do I have to set them up ? Will they be added to the existing `/proc/cmdline` or replace it entirely ? 
- Interrupting the booting sequence (but how ?) and adding my arg `no_console_suspend` during the u-boot startup sequence thingy (as with `grub`) ? Cause right now it seems to autoboot in 0 seconds. (I'm already connected to serial and have access to the internal sd card btw)~~

{Attachments}
/mnt/data/projects/git/conversations/media/unknown-1230A.png


[10/16/2022 5:45 PM] aryetis
Sorry for the ping, ignore me. I'm dumb, `no_console_suspend` wouldn't even have helped me much in my case.


[10/16/2022 9:10 PM] andi15701
the problem is that several uboots seem to append quiet


[10/16/2022 11:16 PM] aryetis
multiple uboots ? 
I resolved my issue anyways so it's all ok. But if you're curious here's what happened when I was spamming the keyboard trying to stop the boot sequence.
My boot loader understanding is not really good but it seems to be booting only one time ?

{Attachments}
/mnt/data/projects/git/conversations/media/spamito_in_D_minor-CCCFC.webm


[10/16/2022 11:59 PM] szybet
i still dont see you spamming all the time


[10/17/2022 1:08 AM] aryetis
I am spamming


[10/17/2022 1:09 AM] aryetis
I'm typing all all the time during the video


[10/17/2022 3:52 AM] tux_linux
yay it works
https://github.com/Kobo-InkBox/gui-bundle/commit/db1f088a75a81195cc726e4d13937b81d364818a

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/commit/db1f088a75a81195cc726e4d13937b81d364818a
Local library: Fix books cover size ratio discrepancies · Kobo-InkB...
/mnt/data/projects/git/conversations/media/db1f088a75a81195cc726e4d13937b81d364818a-226AF


[10/17/2022 4:06 AM] tux_linux
Oh, now I remember
You have the dreaded bootdelay=0 U-Boot


[10/17/2022 4:07 AM] tux_linux
do you have the inkbox kernel source at hand?


[10/17/2022 6:27 AM] szybet
https://tenor.com/view/megamind-gif-26070434

{Embed}
https://tenor.com/view/megamind-gif-26070434
/mnt/data/projects/git/conversations/media/megamind-879EE.png


[10/17/2022 6:27 AM] szybet
i will meme about it


[10/17/2022 6:27 AM] szybet
"no credit?"


[10/17/2022 6:27 AM] szybet
🥴😄


[10/17/2022 6:37 AM] the.mightydill
LMAO


[10/17/2022 9:58 AM] aryetis
not really but again it's not needed anymore. So it's all ok ^^, don't waste any time on this.

{Reactions}
👍 

[10/17/2022 11:55 AM] tux_linux
Forgot sorry


[10/17/2022 12:57 PM] szybet
just joking


[10/17/2022 3:51 PM] the.mightydill
reminds me of when i compile stuff lol i do the same thing


[10/18/2022 2:00 PM] szybet
https://www.reddit.com/r/imagemagick/comments/y6tuou/imagemagick_did_an_obscenely_good_job_compressing/

{Embed}
https://www.reddit.com/r/imagemagick/comments/y6tuou/imagemagick_did_an_obscenely_good_job_compressing/
r/imagemagick - Imagemagick did an obscenely good job compressing a...
6 votes and 4 comments so far on Reddit
/mnt/data/projects/git/conversations/media/wmnYl2gMsRZt0jwXi2dKsBP4VJbAOoIi8ccPBz6tKN-928ED.jpg


[10/18/2022 2:01 PM] szybet
bu maybe compress them too?


[10/18/2022 2:01 PM] szybet
covers


[10/18/2022 2:06 PM] tux_linux
Compressing != Speed


[10/18/2022 2:07 PM] szybet
size


[10/18/2022 2:07 PM] szybet
size


[10/18/2022 2:07 PM] szybet
size


[10/18/2022 2:11 PM] tux_linux
Yes but generating database will likely take 3x more time


[10/18/2022 2:11 PM] szybet
there needs to be optimization done anyway


[10/18/2022 2:12 PM] szybet
the simplest things i would add is to check the old database for books, if its there, just copy it


[10/18/2022 2:12 PM] szybet
but after 2.0


[10/18/2022 2:23 PM] tux_linux
I already do that


[10/18/2022 2:23 PM] szybet
O.o?


[10/18/2022 2:24 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/explore_local_library.sh

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/explore_local_library.sh
gui-bundle/explore_local_library.sh at main · Kobo-InkBox/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[10/18/2022 2:24 PM] szybet
where


[10/18/2022 2:27 PM] tux_linux
Actually I don't do it with epubs because it's more complicated
But I do it for PDFs
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/explore_local_library.sh#L56

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/explore_local_library.sh
gui-bundle/explore_local_library.sh at main · Kobo-InkBox/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[10/18/2022 2:28 PM] szybet
okay then


[10/18/2022 2:28 PM] szybet
good


[10/18/2022 2:28 PM] szybet
but epubs are more popular


[10/18/2022 2:28 PM] tux_linux
Yes, well, implement it in epubtool I guess ?


[10/18/2022 2:29 PM] szybet
first i will rewrite it to rust


[10/18/2022 2:29 PM] szybet
s p e e d


[10/18/2022 2:29 PM] tux_linux
?


[10/18/2022 2:29 PM] szybet
those are my plans


[10/18/2022 2:29 PM] szybet
for the far future


[10/18/2022 2:30 PM] tux_linux
Epubtool is already written in rust, you forgot?


[10/18/2022 2:30 PM] szybet
yea exactly


[10/18/2022 2:30 PM] szybet
use it as a native library


[10/18/2022 2:30 PM] szybet
also faster


[10/20/2022 8:59 AM] szybet
idk if its in todolist but time isint correct in userapps brcause timezone isint simlinked


[10/20/2022 8:59 AM] szybet
well, mount binded*


[10/20/2022 3:41 PM] tux_linux
Oh true


[10/20/2022 11:11 PM] szybet (pinned)
highlitning idea fix: with regex, get the text with html garbage in it, using it, make sure all html tags are closed correctly


[10/20/2022 11:11 PM] szybet
this would be a crazy algorithm but its possible


[10/20/2022 11:11 PM] szybet
Pinned a message.


[10/20/2022 11:12 PM] szybet
i dont have time for this in the nearest future so


[10/21/2022 5:24 AM] tux_linux
Me neither
4 exams in 4 periods tomorrow
😂🥴


[10/21/2022 5:26 AM] the.mightydill
oh damn... good luck

{Reactions}
👍 

[10/21/2022 5:27 AM] tux_linux
Music
French
Math
Chemistry


[10/21/2022 5:27 AM] the.mightydill
what are you doing in math?


[10/21/2022 5:27 AM] the.mightydill
french should be easy though...


[10/21/2022 5:27 AM] tux_linux
Probably not
It's a reading comprehension


[10/21/2022 5:28 AM] tux_linux
Absolute value function
Square root function
Rational function


[10/21/2022 5:28 AM] the.mightydill
shit.....


[10/21/2022 5:29 AM] the.mightydill
and i thought grade 9 was stressful


[10/21/2022 5:29 AM] tux_linux
What are you doing


[10/21/2022 5:29 AM] the.mightydill
in math we're doing geometry and in french we're doing conjugation ||just like the past 9 years||


[10/21/2022 5:30 AM] tux_linux
Geometry like what?


[10/21/2022 5:30 AM] tux_linux
I do geometry in physics


[10/21/2022 5:30 AM] the.mightydill
surface area, overlapping, symmetry, etc.


[10/21/2022 5:30 AM] the.mightydill
but in science we have genetics


[10/21/2022 5:31 AM] the.mightydill
i should be doing homework but im watching the oilers lol


[10/21/2022 5:31 AM] tux_linux
Cool I did that last year


[10/21/2022 5:32 AM] the.mightydill
*what* is that math?


[10/21/2022 5:32 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20221021_033102652-DAD35.jpg


[10/21/2022 5:32 AM] tux_linux
Physics
Mirrors
Light rays


[10/21/2022 5:32 AM] the.mightydill
oh i did that last year too


[10/21/2022 5:32 AM] the.mightydill
in science, light and optics


[10/21/2022 5:32 AM] tux_linux
Cool


[10/21/2022 5:33 AM] tux_linux
With formulas?


[10/21/2022 5:33 AM] the.mightydill
yeah


[10/21/2022 5:36 AM] tux_linux
Did you see specular and diffuse reflection?


[10/21/2022 5:36 AM] tux_linux
Did you see light rays on an incurved mirror?


[10/21/2022 2:30 PM] aryetis
Argh caustics !


[10/21/2022 2:30 PM] aryetis
_rolls up on the floor remembering his 3D rendering courses_

{Reactions}
😆 

[10/21/2022 2:49 PM] szybet
and im wasting my time doing for loops in visual basics in school


[10/21/2022 2:49 PM] szybet
they should look at my github and f*ck off


[10/21/2022 7:36 PM] the.mightydill
nope


[10/21/2022 7:36 PM] the.mightydill
yup


[10/22/2022 12:04 AM] tux_linux
So outdated
I was programming in VB in 2013


[10/22/2022 12:05 AM] tux_linux
Even then, it was almost outdated


[10/22/2022 12:19 AM] szybet
im frustrated, to put simply


[11/3/2022 4:02 PM] dottedmag
Hello folks. Do any Kobo devices have serial port wired on the PCB? I'd like to play around with some of new eInk readers. Last one I touched was Azbooka/Hanvon n516... 10 years ago?


[11/3/2022 4:14 PM] tux_linux
Yes they do


[11/3/2022 4:15 PM] tux_linux
It's tiny 1mm diameter holes


[11/3/2022 4:16 PM] the.mightydill
and keeping the wires in place is hard as shit


[11/3/2022 4:23 PM] dottedmag
Yeah, I remember that from back then. I am glad I had a development board for Hanvon so I didn't need to solder anything to develop.

I found a few pinounts here http://gethighstayhigh.co.uk/kobo-self-build/ — is there more info? Anyone broken out and figured out Sage?

{Embed}
gethighs
http://gethighstayhigh.co.uk/kobo-self-build/
Kobo Self Build - Get High, Stay High
Which Kobo Model? Your new Kobo – firmware update Your new Kobo – backup the SD Card Connecting an instrument to a Kobo – overview Removing the rear cover Inside a Kobo – Serial port Inside a Kobo – SD Card Inside a Kobo – Battery Dissembling a Kobo Connecting a Bluefly to the Kobo … Continue reading Kobo Self Build →
/mnt/data/projects/git/conversations/media/Kobo-Model-Matrix-v3-2020-B1997.jpg


[11/3/2022 4:43 PM] szybet
s o l d e r


[11/3/2022 4:43 PM] dottedmag
yeah, pitch seems to be standard 2.54mm from the photos


[11/3/2022 4:44 PM] aryetis
yeah "get high stay high" is pretty much the best resource I could find regarding pcb / serial port.

{Reactions}
👌 

[11/3/2022 4:44 PM] aryetis
Kobo sage is also called Kobo cadmus


[11/3/2022 4:44 PM] aryetis
You might get more chances using that name, but I wouldn't keep my hopes up


[11/3/2022 5:22 PM] the.mightydill
what? why would i solder it


[11/3/2022 5:24 PM] dottedmag
Soldering a header like this might work: https://eu.mouser.com/ProductDetail/Harwin/M20-9750342?qs=93uzuGORGqdQxUS08lpPTw%3D%3D — if there is space under cover, of course


[11/3/2022 5:29 PM] aryetis
There might not be enough space and I doubt wires would stay in place for long. Grip on those isn't very tight.  But you're welcome to give it a try.


[11/3/2022 5:31 PM] szybet
i did this at 45 angle with a custom case


[11/3/2022 5:35 PM] szybet
to not make a short


[11/3/2022 5:38 PM] dottedmag
Kindle Keyboard 3G had the the nicest serial port: it had two openings in the body to attach the cover, and one of the openings had the serial contacts. I still have a PCB with USB-serial chip somewhere that could be just slid into the hole.


[11/3/2022 5:39 PM] szybet
https://serhack.me/articles/os-embedded-booting-phase-uboot/

{Embed}
https://serhack.me/articles/os-embedded-booting-phase-uboot/
Booting an Embedded OS: the Booting and U-Boot Phase
Discover the booting steps of an embedded operating system and the powerful Uboot bootloader.
/mnt/data/projects/git/conversations/media/reolink_2_800px-EED87.png


[11/3/2022 6:18 PM] tux_linux
Kindle touch has the worst ...


[11/4/2022 10:15 AM] szybet
https://crates.io/crates/rodio/0.14.0


[11/4/2022 10:15 AM] szybet
the audio player will get rusty after all i think


[11/8/2022 6:18 PM] szybet
was xorg finally fixed or not


[11/8/2022 6:18 PM] szybet
i cant remember...


[11/10/2022 9:30 AM] tux_linux
no


[11/10/2022 10:47 AM] szybet
but i remember i used it a lot


[11/10/2022 10:47 AM] szybet
and it worked


[11/12/2022 3:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20221112_153416_DRO-EF20B.jpg
/mnt/data/projects/git/conversations/media/IMG_20221112_153355_DRO-2CC64.jpg


[11/12/2022 3:35 PM] szybet
I present


[11/12/2022 3:35 PM] szybet
a thick Nia


[11/12/2022 3:40 PM] szybet
ereader with usb ports 🥴


[11/12/2022 5:07 PM] the.mightydill
WHAT


[11/12/2022 5:07 PM] the.mightydill
WHY


[11/12/2022 5:08 PM] the.mightydill
SJDHFKJDH WHAT


[11/12/2022 5:08 PM] szybet
XD


[11/12/2022 5:08 PM] szybet
there will be the soundcard attached


[11/12/2022 5:08 PM] szybet
+ a removable battery, because it was needed anyway


[11/12/2022 5:08 PM] szybet
+ 2 other ports, maybe a keyboard in the future


[11/12/2022 5:08 PM] the.mightydill
oh thats true


[11/12/2022 5:08 PM] the.mightydill
you madman 😂


[11/12/2022 5:09 PM] szybet
remarkable costs 700$~


[11/12/2022 5:09 PM] szybet
im developing things to do the same with Nia for 100$


[11/12/2022 5:10 PM] the.mightydill
oh smart


[11/12/2022 5:10 PM] szybet
the enclouser is designed in 2 parts so i can flex with my custom hardware ~~and repair things...~~


[11/12/2022 5:11 PM] szybet
is one year of hobby time worth 600$? maybe


[11/12/2022 5:13 PM] the.mightydill
perhaps


[11/12/2022 5:35 PM] koboglohduser5419
Maybe you can try "PineNote"


[11/12/2022 5:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0C55E.png


[11/12/2022 5:36 PM] szybet
you missed one point


[11/12/2022 5:36 PM] koboglohduser5419
Yes, but the hardware is way better


[11/12/2022 5:36 PM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/image-8C3F1.png


[11/12/2022 5:37 PM] szybet
PineNote is great


[11/12/2022 5:37 PM] szybet
but im a student


[11/12/2022 5:37 PM] szybet
im broke


[11/12/2022 5:37 PM] koboglohduser5419
Haha, welcome in the club


[11/12/2022 6:05 PM] tux_linux
thicc Nia:TM:
$599.99 MSRP + tx.
Not free shipping
Variable delay


[11/12/2022 6:05 PM] tux_linux
(congratulations)


[11/12/2022 6:05 PM] szybet
its cheaper tho ;p


[11/12/2022 6:05 PM] szybet
thanks, but its not ready yet


[11/12/2022 6:06 PM] szybet
software is missing


[11/12/2022 6:06 PM] szybet
i will slowly return  to the project to write it


[11/12/2022 6:06 PM] tux_linux
It will program itself with magic


[11/12/2022 6:06 PM] the.mightydill
do they *work*


[11/12/2022 6:07 PM] szybet
🥴


[11/12/2022 6:07 PM] szybet
What do you mean with *work*?


[11/12/2022 6:07 PM] szybet
i was fighting 3 days to make the usb hub chip to work, stupid resistors and usb specifications


[11/12/2022 6:08 PM] szybet
so in the hardware layer, it works


[11/12/2022 6:08 PM] szybet
it also plays music


[11/12/2022 6:08 PM] szybet
i can also see it sees other usb devices


[11/12/2022 6:08 PM] szybet
i will read books from a  pendrive and you cant stop me


[11/12/2022 6:10 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-C1CBF.png


[11/12/2022 6:10 PM] szybet
poor girl, what did she did to you


[11/12/2022 6:11 PM] the.mightydill
carolina is a place in america


[11/12/2022 6:11 PM] the.mightydill
their hockey team beat my hockey team 7-2


[11/12/2022 6:11 PM] the.mightydill
woah nice


[11/12/2022 6:12 PM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/image-47573.png


[11/12/2022 6:12 PM] szybet
Oilers


[11/12/2022 6:12 PM] szybet
interesting


[11/27/2022 5:13 PM] szybet
idea for non gutenberg native txt files

set how many "lines" are available, how many words are fit those lines, and if \n accours, just finish counting the current line


[11/27/2022 5:13 PM] szybet
because normal txt files look awfull with the gutenberg created script to split it


[12/3/2022 12:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E1D9F.png


[12/3/2022 12:39 PM] szybet
kek


[12/4/2022 3:30 PM] szybet
`e-1-charger_manager` new config folder


[12/4/2022 3:30 PM] szybet
e as for extension


[12/4/2022 3:33 PM] szybet
`e-1-charger_manager/time` - seconds to wait before setting the charger current


[12/4/2022 5:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20221204_170516-70094.mp4


[12/4/2022 5:07 PM] szybet
i didn't know it could be soo smooth


[12/4/2022 5:31 PM] the.mightydill
daaaaamn


[12/4/2022 5:31 PM] the.mightydill
nice!


[12/4/2022 5:31 PM] the.mightydill
this font is weird

{Attachments}
/mnt/data/projects/git/conversations/media/image-E5F77.png


[12/4/2022 5:31 PM] szybet
what


[12/4/2022 7:17 PM] the.mightydill
i dont like this new discord font


[12/4/2022 7:18 PM] szybet
i dont see a diffrence


[12/4/2022 7:19 PM] the.mightydill
really?


[12/4/2022 7:19 PM] szybet
no


[12/4/2022 7:19 PM] szybet
i mean


[12/4/2022 7:19 PM] szybet
yes


[12/4/2022 7:19 PM] szybet
i dont see a diffrence


[12/5/2022 10:34 PM] szybet
um lol


[12/5/2022 10:34 PM] szybet
i was able to launch this on inkbox


[12/5/2022 10:34 PM] szybet
https://github.com/nuttyartist/notes

{Embed}
https://github.com/nuttyartist/notes
GitHub - nuttyartist/notes: Note-taking application, write down you...
Note-taking application, write down your thoughts. - GitHub - nuttyartist/notes: Note-taking application, write down your thoughts.
/mnt/data/projects/git/conversations/media/notes-C176C


[12/5/2022 10:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-149BC.png


[12/5/2022 10:35 PM] szybet
like in 30 minutes, by removing one X11 library, nothing more


[12/5/2022 10:35 PM] szybet
;o


[12/5/2022 10:36 PM] szybet
rotate it, a bit of maintanance of the code and we have a working note app ~~if i figure out keyboard support~~


[12/6/2022 5:04 AM] tux_linux
It's specific to an extension, look at xorg.sh in init.d
Or check dotfiles in the root of an x11 extension like midori


[12/6/2022 6:33 AM] szybet
but its a qt native app


[12/7/2022 5:50 AM] tux_linux
Oh, I thought you spoke of x11


[12/7/2022 5:51 AM] tux_linux
Ok well then a design adaptation is... needed


[12/7/2022 5:51 AM] tux_linux
Great that you got it working


[12/7/2022 5:51 AM] tux_linux
Apart from keyboard


[12/7/2022 5:51 AM] tux_linux
You got it half working actually...


[12/7/2022 8:29 AM] szybet
keyboard is working


[12/7/2022 8:30 AM] szybet
its flickering too much though


[12/7/2022 8:30 AM] szybet
but how do i rotate the screen


[12/7/2022 8:30 AM] szybet
there was a way, cant  remember


[12/7/2022 8:37 AM] aryetis
`echo [0;3] > /sys/class/graphics/fb0/rotate`


[12/7/2022 8:37 AM] aryetis
or something like that


[12/7/2022 8:39 AM] szybet
maybe


[12/8/2022 1:21 AM] tux_linux
this, yes


[12/8/2022 1:21 AM] tux_linux
not onboard keyboard...


[12/8/2022 1:21 AM] tux_linux
or I am wrong?


[12/8/2022 7:22 AM] szybet
psyhical one


[12/8/2022 7:22 AM] szybet
onboard only for xorg apps + there is a patch for it


[12/11/2022 8:52 PM] szybet
@tux-linux can i purge custom functions from the platform plugin? we dont use them anyway (upper services handle wifi, sleep for example) and the ram is still used


[12/11/2022 8:55 PM] szybet
i also wonder about forking the whole os - with you having no time, my work is trapped inside forked repos, it would be more organised inside a new organisation


[12/11/2022 8:57 PM] szybet
is there a possibility to fork entire organisations? 🥴


[12/12/2022 8:04 PM] szybet
why epubs are found in qt before generating the database, and pdfs in the script with
`for pdf in $(find /mnt/onboard/onboard \( -path "/mnt/onboard/onboard/.inkbox" -o -path "/mnt/onboard/onboard/.apps" -o -path "/mnt/onboard/onboard/.thumbnails" \) -prune -o -name "*.pdf" -or -name "*.PDF"); do`
who not both in one way?


[12/13/2022 3:40 PM] szybet
or can i just have permission to all repos? im really trying with code quality ( i will today review those from yestarday... ) 

new release will be not made without you anyway and just let the project live😞


[12/23/2022 6:08 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/e6fd161b88851d8fb0bb33f86a1f75d1e2506cc2
first commit since what, two months? ^^

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/e6fd161b88851d8fb0bb33f86a1f75d1e2506cc2
Some fixes, it seems · Kobo-InkBox/inkbox-os-init@e6fd161
At last, you will say...
/mnt/data/projects/git/conversations/media/e6fd161b88851d8fb0bb33f86a1f75d1e2506cc2-C8001


[12/23/2022 10:47 AM] szybet
yayy


[12/23/2022 10:47 AM] szybet
please look up my pull request


[12/24/2022 4:21 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/2cc4d8aa1d8e5ee6437fd533b8148579c328f60d
yay

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/2cc4d8aa1d8e5ee6437fd533b8148579c328f60d
Switch to C init program · Kobo-InkBox/kernel@2cc4d8a
Source code repository can be found here: https://github.com/Kobo-InkBox/inkbox-os-init
/mnt/data/projects/git/conversations/media/2cc4d8aa1d8e5ee6437fd533b8148579c328f60d-34EA8


[12/24/2022 4:30 PM] szybet
waaaait let me test it


[12/24/2022 4:30 PM] szybet
🥴


[12/24/2022 4:30 PM] tux_linux
good luck


[12/24/2022 4:30 PM] tux_linux
only build a new kernel for your device and it should work


[12/24/2022 4:30 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-7CC7B.png


[12/24/2022 4:32 PM] tux_linux
this works 100%?

{Attachments}
/mnt/data/projects/git/conversations/media/image-CD931.png


[12/24/2022 4:37 PM] tux_linux
wait i forgot to commit the init binary


[12/24/2022 4:37 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/47887602eb175a3af9cae5379c7c589c2222e2f4
now it's there

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/47887602eb175a3af9cae5379c7c589c2222e2f4
Add C init binary · Kobo-InkBox/kernel@4788760
/mnt/data/projects/git/conversations/media/47887602eb175a3af9cae5379c7c589c2222e2f4-961CD


[12/24/2022 4:37 PM] tux_linux
69.9KB is a nice size


[12/24/2022 5:42 PM] szybet
only with this i was able to get my books kn the device finally

{Reactions}
👍 

[12/24/2022 6:24 PM] tux_linux
Does init work?


[12/24/2022 6:40 PM] tux_linux
why was it data onboard before?

{Attachments}
/mnt/data/projects/git/conversations/media/image-16BC1.png


[12/24/2022 7:03 PM] szybet
i dont have time to test, tommorow

{Reactions}
👍 

[12/24/2022 7:03 PM] szybet
i was running it in musl rootfs for testing


[12/24/2022 9:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20221224_212211_DRO-A7381.jpg


[12/24/2022 9:24 PM] szybet
im collecting data about power consumption on diffrent states like wifi etc, i will share the info in the next days


[12/24/2022 9:26 PM] tux_linux
Good


[12/25/2022 5:01 PM] szybet
https://github.com/Szybet/niAudio/blob/main/power.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/power.md
niAudio/power.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[12/25/2022 7:43 PM] ninuje
Idle seems a tiny bit high, FWIW


[12/25/2022 7:43 PM] ninuje
Can't find my own Forma numbers, but IIRC, they were roughly identical to this: https://www.e-reader-forum.de/t/kobo-sage.157785/#post-2436711

{Embed}
https://www.e-reader-forum.de/t/kobo-sage.157785/
Kobo Sage
/mnt/data/projects/git/conversations/media/e-reader-forum_metadata-B8790.png


[12/25/2022 7:43 PM] ninuje
Sage numbers: https://github.com/koreader/koreader/issues/9435#issuecomment-1214257679 (which should be *vastly* worse across the board)

{Embed}
https://github.com/koreader/koreader/issues/9435
1% per hour battery drain during sleep when a PDF is open · Issue #...
KOReader version: v2022.07 Device: Kobo Elipsa Issue When the device goes to sleep with a PDF open, the battery drain is relatively high (1% per hour). Steps to reproduce Open a PDF; Click the powe...
/mnt/data/projects/git/conversations/media/9435-BF109


[12/25/2022 7:48 PM] szybet
the nia always had worse battery life, even on nickel for me


[12/25/2022 7:48 PM] szybet
maybe only my model, idk


[12/25/2022 7:50 PM] ninuje
No, apparently that board/SoC (and similar ones, e.g., Libra 2 & Clara 2E) have worse PM than they should for an i.MX6, for some reason


[12/25/2022 7:51 PM] ninuje
And a very very wonky EPDC that likes to randomly crash, apparently (especially the Libra 2, although the volume of reports is probably relative to the popularity of the device)


[12/25/2022 7:52 PM] szybet
¯\_(ツ)_/¯


[12/25/2022 8:17 PM] tux_linux
Can the usb-only thing work on other devices ? I am interested


[12/25/2022 8:18 PM] szybet
what do you mean


[12/25/2022 8:18 PM] tux_linux
0x20


[12/25/2022 8:19 PM] szybet
maybe


[12/25/2022 8:19 PM] szybet
maybe not


[12/25/2022 8:19 PM] szybet
ask andi


[12/25/2022 8:19 PM] szybet
im developing an app to apply it when its needed


[12/25/2022 8:20 PM] szybet
dont try, first ask, it could destroy your device

{Reactions}
👍 

[12/25/2022 8:48 PM] ninuje
Should behave as long ad it's the same pmic


[12/25/2022 8:48 PM] ninuje
I don't recall which one this deals with, though... The Ricoh one?


[12/25/2022 9:28 PM] szybet
propably


[12/25/2022 9:44 PM] szybet
https://docs.rs/posixmq/latest/posixmq/

{Embed}
https://docs.rs/posixmq/latest/posixmq/
posixmq - Rust
API documentation for the Rust `posixmq` crate.


[12/25/2022 9:44 PM] szybet
i plan to use message queues @tux-linux  for audio, i dont like pipes


[12/26/2022 1:40 AM] szybet
old init: 2.19
new init: 59.0 error code 2


[12/26/2022 1:40 AM] szybet
ups


[12/26/2022 1:41 AM] tux_linux
what?


[12/26/2022 1:41 AM] szybet
i measured time


[12/26/2022 1:41 AM] tux_linux
serial output?


[12/26/2022 1:42 AM] szybet
https://github.com/Kobo-InkBox/inkbox/commit/6771966e53e0a147ad7f0ba9f622a75d2c6a9b44
wanted by me ;p

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/6771966e53e0a147ad7f0ba9f622a75d2c6a9b44
Revert unwanted changes · Kobo-InkBox/inkbox@6771966
/mnt/data/projects/git/conversations/media/6771966e53e0a147ad7f0ba9f622a75d2c6a9b44-C1BEC


[12/26/2022 1:42 AM] tux_linux
no

{Attachments}
/mnt/data/projects/git/conversations/media/image-44F36.png


[12/26/2022 1:42 AM] tux_linux
?


[12/26/2022 1:43 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-84905.png


[12/26/2022 1:43 AM] szybet
i propably have the wrong key


[12/26/2022 1:44 AM] szybet
what key is it?


[12/26/2022 1:44 AM] tux_linux
output would help...


[12/26/2022 1:44 AM] szybet
i have only 2, rootfs and user apps


[12/26/2022 1:44 AM] szybet
is there a third?


[12/26/2022 1:44 AM] tux_linux
kobox
gui apps
main


[12/26/2022 1:44 AM] tux_linux
main is linked to gui rootfs


[12/26/2022 1:45 AM] szybet
wait, this is the main gui rootfs, not the update


[12/26/2022 1:45 AM] szybet
i havent touched that


[12/26/2022 1:45 AM] tux_linux
output


[12/26/2022 1:45 AM] szybet
i will get serial

{Reactions}
👍 

[12/26/2022 1:50 AM] szybet
ipd works anyways?


[12/26/2022 1:50 AM] szybet
well im rebooting now


[12/26/2022 1:52 AM] szybet
` * This device is in boot-time USB debug mode. Please reset or reboot it to resume normal operation.` at least this worked


[12/26/2022 1:52 AM] tux_linux
hm ok


[12/26/2022 1:52 AM] tux_linux
`echo false > /boot/flags/BOOT_USB_DEBUG`?


[12/26/2022 1:52 AM] szybet
security risk?


[12/26/2022 1:52 AM] tux_linux
wdym


[12/26/2022 1:53 AM] szybet
ipd worked even if error


[12/26/2022 1:53 AM] szybet
maybe only on rooted kernel?


[12/26/2022 1:53 AM] tux_linux
i don't understand


[12/26/2022 1:53 AM] szybet
i clicked the power button and screen saver appeard


[12/26/2022 1:54 AM] szybet
there was the error screen


[12/26/2022 1:54 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-EC8B4.txt


[12/26/2022 1:54 AM] szybet
well nothing new in the logs


[12/26/2022 1:54 AM] szybet
i have a fresh kernel repo


[12/26/2022 1:54 AM] tux_linux
` * GUI root filesystem's digital signature is invalid!`
ok if it says that then it's right (probably)


[12/26/2022 1:54 AM] tux_linux
check your signatures


[12/26/2022 1:55 AM] tux_linux
it should power off though


[12/26/2022 1:55 AM] tux_linux
welp, forgot to tell it to power off


[12/26/2022 1:55 AM] szybet
🥴


[12/26/2022 1:56 AM] szybet
```
kobo:/mnt# sha512sum gui_rootfs.isa.dgst 
010570f96f3c1746dc93a499b7b95cc7f80ca08ed5138bfafdea5fdd594ea3c0e3ad1b66c73bde2523770b6451a123f1781845aa810dcd412afdcdb7b8916586  gui_rootfs.isa.dgst
kobo:/mnt# 
```


[12/26/2022 1:56 AM] szybet
and?


[12/26/2022 1:57 AM] szybet
also this


[12/26/2022 1:57 AM] szybet
```
kobo:/mnt# sha512sum gui_rootfs.isa
1571d1440c08986bfc3e4f3b1313d2f38bbcf05223cde0e51d7fad22c85bd88011cd9412933d9e30975c430bd6c2a720443179da837c2a9aaaddf7ca2bb06c23  gui_rootfs.isa
kobo:/mnt# 
```


[12/26/2022 1:57 AM] szybet
what are the correct ones?


[12/26/2022 1:59 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/f238afac3cba486b3a8a60749a0e4dad6a2e7af5

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/f238afac3cba486b3a8a60749a0e4dad6a2e7af5
Actually power off the device if GUI rootfs signature is invalid · ...
The script from where this program is launched takes care of the rest (e.g., https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/rcS-root).
/mnt/data/projects/git/conversations/media/f238afac3cba486b3a8a60749a0e4dad6a2e7af5-65F08


[12/26/2022 2:00 AM] szybet
good


[12/26/2022 2:00 AM] tux_linux
```
kindle:/opt/storage# sha512sum gui_rootfs.isa
504b8516c7c67bb840267317eb4fe388b8f3399ba1142592932f66d73cd09108752ce06c6b553f1a97f1398aeda7bfd16e991204b6133d3d73004f04be684bb5  gui_rootfs.isa
kindle:/opt/storage# sha512sum gui_rootfs.isa.dgst
973290f057cce1040adc667cf2ec7dc7993e725023ab6a64db26b22a52bc9d4eefdc46849dd21065fd4b022619bd7a6a42c533e338689872001f3da8a6108d4d  gui_rootfs.isa.dgst
kindle:/opt/storage#
```
I have that


[12/26/2022 2:00 AM] szybet
um


[12/26/2022 2:00 AM] szybet
what


[12/26/2022 2:00 AM] tux_linux
just try to verify them manually with openssl


[12/26/2022 2:00 AM] szybet
how


[12/26/2022 2:01 AM] tux_linux
maybe because it's a Kindle and that I *might* have done changes in it?


[12/26/2022 2:01 AM] szybet
what was the command


[12/26/2022 2:10 AM] szybet
```
kobo:/mnt# ls /opt/key/
applications-public.pem     kobox-nographic-public.pem
kobox-graphic-public.pem    public.pem
kobo:/mnt# openssl dgst -verify /opt/key/public.pem -signature gui_rootfs.isa.dg
st gui_rootfs.isa
Verified OK
kobo:/mnt# 
```


[12/26/2022 2:10 AM] szybet
what now


[12/26/2022 2:14 AM] tux_linux
now i don't understand


[12/26/2022 2:14 AM] tux_linux
maybe try to run it with strace


[12/26/2022 2:14 AM] tux_linux
just press enter the first time it prompts you to enter a shell, then `strace /etc/init.d/init`


[12/26/2022 2:15 AM] tux_linux
https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/arm/strace

{Embed}
https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/arm/strace
static-binaries/strace at master · andrew-d/static-binaries
Various *nix tools built as statically-linked binaries - static-binaries/strace at master · andrew-d/static-binaries
/mnt/data/projects/git/conversations/media/static-binaries-0B110


[12/26/2022 2:15 AM] tux_linux
You can load strace with xmodem and minicom (`busybox rx strace` on the Kobo)


[12/26/2022 2:16 AM] szybet
ok, tommorow

{Reactions}
👍 

[12/26/2022 2:16 AM] tux_linux
`strace -o file` to redirect to file


[12/26/2022 12:34 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D9868.txt


[12/26/2022 12:34 PM] szybet
here


[12/26/2022 12:44 PM] szybet
line 1028 `writev(1, [{"\33[1m\33[31m * \33[0mGUI root filesys"..., 67}, {"\n", 1}], 2 * GUI root filesystem's digital signatu!`


[12/26/2022 3:09 PM] tux_linux
```
wait4(567, Verified OK
[{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 567
--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=567, si_uid=0, si_status=0, si_utime=85, si_stime=14} ---
writev(1, [{"\33[1m\33[31m * \33[0mGUI root filesys"..., 67}, {"\n", 1}], 2 * GUI root filesystem's digital signatu!
) = 68
```
It seems to check if the command exited and if the exit status is 0, which is what I programmed it for... but then we don't get 0 as a result but 567


[12/26/2022 3:12 PM] tux_linux
Maybe is it because (I think?) all devices tested had a developer key?

{Attachments}
/mnt/data/projects/git/conversations/media/image-EB1B5.png


[12/26/2022 3:14 PM] szybet
yea, i dont have one


[12/26/2022 3:14 PM] szybet
well


[12/26/2022 3:44 PM] tux_linux
ok, I can reproduce it


[12/26/2022 3:46 PM] tux_linux
Is there something wrong there? https://github.com/Kobo-InkBox/inkbox-os-init/blob/f238afac3cba486b3a8a60749a0e4dad6a2e7af5/init.c#L509

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/f238afac3cba486b3a8a60749a0e4dad6a2e7af5/init.c
inkbox-os-init/init.c at f238afac3cba486b3a8a60749a0e4dad6a2e7af5 ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-6D7B9


[12/26/2022 3:47 PM] szybet
i dont see anything, but i dont know c


[12/26/2022 3:47 PM] szybet
also, why are you calling an external executable?


[12/26/2022 3:47 PM] szybet
openssl had a library


[12/26/2022 3:48 PM] tux_linux
library in initrd is complicated stuff


[12/26/2022 3:49 PM] szybet
:/


[12/26/2022 3:49 PM] szybet
fine?


[12/26/2022 3:50 PM] tux_linux
do you have a comparison between the two? I know next to nothing to audio on linux


[12/26/2022 3:50 PM] szybet
its only to exchange data, not audi


[12/26/2022 3:51 PM] szybet
i just dont like pipes


[12/26/2022 3:52 PM] tux_linux
try to implement it
it can work on kt too?


[12/26/2022 3:52 PM] szybet
minimum kernel version is 2.6 i think


[12/26/2022 3:53 PM] tux_linux
2.6.what?


[12/26/2022 3:53 PM] tux_linux
kt is 2.6.31


[12/26/2022 3:53 PM] tux_linux
hacked to present itself like it's a 2.6.35 kernel


[12/26/2022 3:54 PM] szybet
```
   Versions
       POSIX message queues have been supported on Linux since kernel
       2.6.6.  Glibc support has been provided since version 2.3.4.
```


[12/26/2022 3:54 PM] szybet
oof


[12/26/2022 3:54 PM] tux_linux
whoops


[12/26/2022 3:55 PM] szybet
unix pipes?


[12/26/2022 3:55 PM] szybet
:D


[12/26/2022 3:55 PM] tux_linux
if it works


[12/26/2022 4:14 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/b0dec61862babfa2ee336e1003ddc1dc9eee7310

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/b0dec61862babfa2ee336e1003ddc1dc9eee7310
Update init binary to commit https://github.com/Kobo-InkBox/inkbox-...
…-init/commit/f238afac3cba486b3a8a60749a0e4dad6a2e7af5
/mnt/data/projects/git/conversations/media/b0dec61862babfa2ee336e1003ddc1dc9eee7310-FF9E2


[12/26/2022 4:14 PM] tux_linux
works on my side now


[12/26/2022 4:16 PM] szybet
i will try it

{Reactions}
👍 

[12/26/2022 5:12 PM] szybet
@tux-linux what qemu setup are you using for cross comping


[12/26/2022 5:12 PM] szybet
alsa has a stroke...


[12/26/2022 5:19 PM] tux_linux
i'm using a native arm debian 64 qemu machine with an alpine 3.10 chroot inside


[12/26/2022 5:20 PM] szybet
is there a more powerfull one?


[12/26/2022 5:20 PM] tux_linux
no
unless you want to cross-compile yourself


[12/26/2022 5:20 PM] tux_linux
which is hazardous


[12/26/2022 5:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-46D00.png


[12/26/2022 5:20 PM] szybet
what do i choose here


[12/26/2022 5:21 PM] tux_linux
aarch64


[12/26/2022 5:21 PM] tux_linux
machine type : virt


[12/26/2022 5:21 PM] szybet
heh no such option


[12/26/2022 5:21 PM] tux_linux
then what are the options


[12/26/2022 5:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D58E5.png


[12/26/2022 5:22 PM] tux_linux
well use cli


[12/26/2022 5:22 PM] tux_linux
qemu-system-aarch64


[12/26/2022 5:22 PM] szybet
:(


[12/26/2022 5:22 PM] tux_linux
https://cdimage.debian.org/debian-cd/current/arm64/iso-cd/debian-11.6.0-arm64-netinst.iso


[12/26/2022 5:24 PM] tux_linux
`qemu-img create -f qcow2 debian.img 100G`
`qemu-system-aarch64 -cdrom debian-11.6.0-arm64-netinst.iso -hda debian.img -M virt -m 4096M`


[12/26/2022 5:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9BF11.png


[12/26/2022 5:25 PM] szybet
it fucking runs in with root


[12/26/2022 5:25 PM] szybet
i will go with cli


[12/26/2022 5:26 PM] tux_linux
don't boot alpine
i had problems with it iirc


[12/26/2022 5:27 PM] tux_linux
first install debian then install alpine minirootfs


[12/26/2022 5:27 PM] szybet
WTF?


[12/26/2022 5:27 PM] tux_linux
then you can chroot and profit


[12/26/2022 5:27 PM] tux_linux
besides you need alpine 3.10 to build compatible binaries with the rootfs


[12/26/2022 5:27 PM] tux_linux
and it needs to be 32-bit


[12/26/2022 5:27 PM] szybet
musl, right?


[12/26/2022 5:28 PM] tux_linux
https://dl-cdn.alpinelinux.org/alpine/v3.10/releases/armv7/alpine-minirootfs-3.10.9-armv7.tar.gz


[12/26/2022 5:30 PM] szybet
shouldnt we use armv7?


[12/26/2022 5:31 PM] tux_linux
I use arm64 and armv7 chroot


[12/26/2022 5:31 PM] tux_linux
arm64 is for debian
and debian can support 32-bit chroots


[12/26/2022 5:32 PM] tux_linux
or, maybe you can use a chroot with qemu-user-static
but at this point, i think either will be slow


[12/26/2022 5:34 PM] szybet
https://gist.github.com/tuxmartin/f348d4247beda04e6029366da494f164

{Embed}
https://gist.github.com/tuxmartin/f348d4247beda04e6029366da494f164
alpine-qemu-arm.sh
GitHub Gist: instantly share code, notes, and snippets.
/mnt/data/projects/git/conversations/media/gist-og-image-17482.png


[12/26/2022 5:34 PM] szybet
i will try this


[12/26/2022 5:35 PM] tux_linux
change 3.7.0 for 3.10.9


[12/26/2022 5:35 PM] szybet
i know


[12/26/2022 5:35 PM] tux_linux
but i recommend you try debian


[12/26/2022 5:35 PM] szybet
i think its stupid


[12/26/2022 6:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B1EB2.png


[12/26/2022 6:08 PM] tux_linux
good


[12/26/2022 6:08 PM] tux_linux
now good luck


[12/26/2022 6:08 PM] szybet
how do i get now to install this to a disk


[12/26/2022 6:09 PM] szybet
its unetboot


[12/26/2022 6:09 PM] szybet
🥴


[12/26/2022 6:10 PM] tux_linux
setup-alpine?


[12/26/2022 6:13 PM] szybet
it doesnt see any disks


[12/26/2022 6:13 PM] szybet
hmm


[12/26/2022 6:13 PM] tux_linux
did you put one?


[12/26/2022 6:23 PM] szybet
yea...


[12/26/2022 6:30 PM] tux_linux
welp


[12/26/2022 7:10 PM] tux_linux
testing lockscreen now


[12/26/2022 7:10 PM] tux_linux
got to get that merged soon


[12/26/2022 7:10 PM] szybet
`qemu-system-arm -M virt -append "modules=loop,squashfs,sd-mod,usb-storage,ext4 root=/dev/mmcblk0 console=ttyAMA0" -cpu cortex-a15 -kernel vmlinuz-vanilla -initrd initramfs-vanilla -nographic -m 6000 -drive file='disk2.qcow2,if=virtio,format=qcow2'`


[12/26/2022 7:11 PM] szybet
```
/ # cat /proc/partitions 
major minor  #blocks  name

   1        0       4096 ram0
   1        1       4096 ram1
   1        2       4096 ram2
   1        3       4096 ram3
   1        4       4096 ram4
   1        5       4096 ram5
   1        6       4096 ram6
   1        7       4096 ram7
   1        8       4096 ram8
   1        9       4096 ram9
   1       10       4096 ram10
   1       11       4096 ram11
   1       12       4096 ram12
   1       13       4096 ram13
   1       14       4096 ram14
   1       15       4096 ram15
/ # 
```


[12/26/2022 7:11 PM] szybet
WHYYYYYYYY


[12/26/2022 7:11 PM] tux_linux
no idea


[12/26/2022 7:51 PM] ninuje
man waitpid ;o)


[12/26/2022 7:51 PM] ninuje
wstatus is *NOT* a plain exit code

{Reactions}
👍 

[12/26/2022 7:52 PM] ninuje
there's a few extra bits with info about how the process died


[12/26/2022 7:52 PM] tux_linux
well, I put `!= 0` instead and it worked


[12/26/2022 7:53 PM] ninuje
see WEXITSTATUS if you actually want the exit code

{Reactions}
👍 

[12/26/2022 7:54 PM] ninuje
I'd link to kfmon for that, but the actual example in man waitpid is much simpler and clearer ;p

{Reactions}
👍 

[12/26/2022 8:04 PM] szybet
qemu is horrible


[12/26/2022 8:04 PM] szybet
never again


[12/26/2022 8:04 PM] szybet
doesnt work


[12/26/2022 8:04 PM] szybet
anything


[12/26/2022 8:40 PM] szybet
@tux-linux rust cant into arm-musl-alsa because every library has a dependience to alsa-sys which doesnt support static linking


[12/26/2022 8:40 PM] szybet
so any ideas for a easy to use cpp library?


[12/26/2022 8:48 PM] tux_linux
no...


[12/26/2022 8:57 PM] szybet
😞


[12/26/2022 10:02 PM] szybet
https://mpg123.org/api/modules.shtml


[12/26/2022 11:12 PM] tux_linux
Seems good


[12/26/2022 11:23 PM] szybet
well after a longer look it just handles file formats / conversions


[12/26/2022 11:23 PM] szybet
i will just go bare alsa then


[12/26/2022 11:23 PM] szybet
🥴


[12/26/2022 11:23 PM] ninuje
May the Force be with you.


[12/26/2022 11:23 PM] ninuje
ALSA's API is... painful.


[12/26/2022 11:23 PM] szybet
maybe i will convert every file to one format


[12/26/2022 11:23 PM] szybet
nah


[12/26/2022 11:25 PM] szybet
qemu is more painfull


[12/27/2022 1:29 AM] tux_linux
good luck


[12/27/2022 1:39 AM] szybet
```
/mnt/HDD/Project/Public/kernel/toolchain/armv7l-linux-musleabihf-cross/bin/../lib/gcc/armv7l-linux-musleabihf/10.2.1/../../../../armv7l-linux-musleabihf/bin/ld: warning: libc.musl-armv7.so.1, needed by /mnt/HDD/Project/Public/kernel/toolchain/armv7l-linux-musleabihf-cross/bin/../lib/gcc/armv7l-linux-musleabihf/10.2.1/../../../../armv7l-linux-musleabihf/lib/libasound.so, not found (try using -rpath or -rpath-link)
```
```
1:39 szybet@hyperbookszyb /home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross
% find . | grep libc
./armv7l-linux-musleabihf/lib/libc.a
./armv7l-linux-musleabihf/lib/libc.so
./armv7l-linux-musleabihf/lib/libcrypt.a
./armv7l-linux-musleabihf/include/linux/libc-compat.h
./lib/gcc/armv7l-linux-musleabihf/10.2.1/libcaf_single.a
./lib/gcc/armv7l-linux-musleabihf/10.2.1/libcaf_single.la
```


[12/27/2022 1:39 AM] szybet
why doesnt the musl toolchain has this?


[12/27/2022 1:51 AM] szybet
well works anyway


[12/27/2022 1:51 AM] szybet
still weird


[12/27/2022 1:51 AM] szybet
now i need my audio kernel back


[12/27/2022 4:00 PM] szybet
c init works


[12/27/2022 4:05 PM] tux_linux
good


[12/28/2022 8:43 PM] szybet
https://github.com/Szybet/inkbox-audio

{Embed}
https://github.com/Szybet/inkbox-audio
GitHub - Szybet/inkbox-audio
Contribute to Szybet/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-E6A12

{Reactions}
👀 

[12/28/2022 8:43 PM] szybet
pretty much done


[12/28/2022 8:44 PM] szybet
only wav files 

basic functions like:
play file
pause
continue
set volume level

everything bare alsa, controlled via /dev/iaudio.socket


[12/28/2022 8:44 PM] szybet
unix socket to be precise


[12/28/2022 8:44 PM] szybet
rest of the logic in the gui then


[12/28/2022 8:47 PM] szybet
maybe i will add better alsa management, because maybe because of current implementation it makes a "click" at start of every file


[12/28/2022 8:56 PM] szybet
for GUI, @tux-linux you need to accept https://github.com/libsndfile/libsndfile
this library for inkbox

{Embed}
https://github.com/libsndfile/libsndfile
GitHub - libsndfile/libsndfile: A C library for reading and writing...
A C library for reading and writing sound files containing sampled audio data. - GitHub - libsndfile/libsndfile: A C library for reading and writing sound files containing sampled audio data.
/mnt/data/projects/git/conversations/media/libsndfile-A5C82

{Reactions}
👍 

[12/28/2022 9:31 PM] tux_linux
```
      } else {
```
How... many... times... will... I... need... to... remind... you...
Also, 4-space indentation


[12/28/2022 9:35 PM] szybet
clang format makes brrrrrrrrrrrrrrrrrr


[12/28/2022 9:36 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20221228-153544_Chromium-ED485.png


[12/28/2022 10:00 PM] szybet
yea


[12/28/2022 10:01 PM] szybet
i will be better of writing a custom formatter


[12/28/2022 11:35 PM] tux_linux
You forgot to implement setting passcode in lockscreen


[12/28/2022 11:38 PM] tux_linux
I pushed my changes
It's a good base


[12/28/2022 11:38 PM] tux_linux
But you'd still need to reimplement it


[12/29/2022 12:56 AM] szybet
i implemented it


[12/29/2022 12:56 AM] szybet
in settings


[12/29/2022 12:56 AM] szybet
🥴


[12/29/2022 1:01 AM] tux_linux
Uh?


[12/29/2022 1:02 AM] tux_linux
Then where


[12/29/2022 1:02 AM] szybet
yea...


[12/29/2022 1:02 AM] szybet
where......................................


[12/29/2022 1:02 AM] szybet
f u c k


[12/29/2022 1:02 AM] tux_linux
Whoops


[12/29/2022 1:03 AM] szybet
i will do this after audio and sanki


[12/29/2022 1:03 AM] szybet
dskjanfdkjsankjfnskjanfdsjaklfnsal


[12/29/2022 1:03 AM] tux_linux
I might do it before you


[12/29/2022 1:05 AM] szybet
well its copying code from lockscreen to generate the hash, set some bools, before setting new passhprase / disabling lockscreen, call lockscreen


[12/29/2022 1:05 AM] szybet
its not much


[12/29/2022 1:05 AM] szybet
i just hate that i lost this code


[12/29/2022 3:44 PM] szybet
so my code for disabling mass storage promt / disable checking updates also dissapeard


[12/29/2022 3:44 PM] szybet
funny


[12/29/2022 3:44 PM] szybet
indeed


[12/29/2022 3:58 PM] szybet
`/data/config/22-usb/show-dialog`


[12/29/2022 4:09 PM] szybet
`/data/config/23-updates/check-updates`


[12/29/2022 5:24 PM] szybet
`/data/config/e-2-audio/enabled`


[12/29/2022 10:04 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8B90F.png


[12/29/2022 10:05 PM] szybet
github shows it horribly


[12/29/2022 10:05 PM] szybet
only lines were remover


[12/29/2022 10:05 PM] szybet
i was confused


[12/29/2022 10:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F2953.png


[12/29/2022 10:26 PM] szybet
why i cant pin it


[12/29/2022 10:26 PM] szybet
:(


[12/30/2022 12:20 AM] tux_linux
How did you generate the salt for lockscreen?


[12/30/2022 12:40 AM] szybet
random bytes


[12/30/2022 12:40 AM] szybet
many bytes


[12/30/2022 4:25 AM] tux_linux
https://github.com/Kobo-InkBox/lockscreen/commit/719d576adde8b3f392cb170cb76bc6af58256fc9

{Embed}
https://github.com/Kobo-InkBox/lockscreen/commit/719d576adde8b3f392cb170cb76bc6af58256fc9
Actually allow an user to set a passcode · Kobo-InkBox/lockscreen@7...
/mnt/data/projects/git/conversations/media/719d576adde8b3f392cb170cb76bc6af58256fc9-17F1A


[12/30/2022 4:26 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/3299b1d3993fe1282345acc72016a06cf1b33ecb

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/3299b1d3993fe1282345acc72016a06cf1b33ecb
Lockscreen support · Kobo-InkBox/rootfs@3299b1d
/mnt/data/projects/git/conversations/media/3299b1d3993fe1282345acc72016a06cf1b33ecb-411A7


[12/30/2022 4:30 AM] tux_linux
Please :
- Try to find out why FBInk restore doesn't work after the passcode is entered correctly and the program quits
- Try to find out why IPD launches lockscreen when waking from sleep even if it is disabled and even if it supposedly contains code to prevent that

Apart from that, it works fairly good, I reconstructed the part which allowed the user to set a passcode.

Priority : High

Thanks!


[12/30/2022 8:12 AM] szybet
1 because ipd doesnt wait for lockscreen to exit, this should be managed by a external script ( the same that launches lockscreen, but after launching it, exiting )
2 idk sure

{Reactions}
👍 

[12/30/2022 5:00 PM] szybet
please accept https://github.com/Kobo-InkBox/inkbox/pull/41

{Embed}
https://github.com/Kobo-InkBox/inkbox/pull/41
lost code - option to disable automatic updates and showing usb mas...
/mnt/data/projects/git/conversations/media/41-7AEF9


[12/30/2022 5:00 PM] szybet
so i can push and save my audio commits


[12/30/2022 6:06 PM] szybet
`/data/config/e-2-audio/path`


[12/30/2022 9:29 PM] tux_linux
I will review it tonight (17pm probably)


[12/31/2022 12:14 AM] tux_linux
Merged


[12/31/2022 12:16 AM] szybet
good


[12/31/2022 5:57 AM] tux_linux
I pushed a lot of code to a lot of repositories
Pretty much everything should work now
IPD, rootfs, gui-bundle, inkbox, lockscreen


[12/31/2022 5:57 AM] tux_linux
Lockscreen will not work when x11 is running because the GUI rootfs is unmounted. I suppose that's not too much of a big deal


[12/31/2022 5:58 AM] tux_linux
And what is `e-1`?


[12/31/2022 10:06 AM] szybet
it could work actually


[12/31/2022 10:07 AM] szybet
charger controller


[12/31/2022 1:24 PM] tux_linux
How


[12/31/2022 1:30 PM] szybet
well if it was mounted


[12/31/2022 1:30 PM] szybet
it would work


[12/31/2022 1:31 PM] szybet
no other issues


[12/31/2022 6:24 PM] tux_linux
What happens if lockscreen is already running and then user puts the device to sleep? Will it be launched again?


[12/31/2022 6:26 PM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/f969f0a4ad396976f779d989185f5d230bcfd73f/src/afterSleep.cpp#L126

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/f969f0a4ad396976f779d989185f5d230bcfd73f/src/afterSleep.cpp
inkbox-power-daemon/afterSleep.cpp at f969f0a4ad396976f779d989185f5...
Contribute to Kobo-InkBox/inkbox-power-daemon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-daemon-687AA

{Reactions}
👍 

[12/31/2022 6:31 PM] tux_linux
Ok thanks


[12/31/2022 8:04 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20221231_140423-0D62B.jpg


[12/31/2022 8:04 PM] tux_linux
On the mini


[12/31/2022 8:05 PM] szybet
everything good?


[12/31/2022 8:27 PM] tux_linux
It seems


[12/31/2022 8:28 PM] szybet
then good


[12/31/2022 8:28 PM] szybet
¯\_(ツ)_/¯


[1/1/2023 12:27 PM] szybet
`        fbink -g file="/tmp/lockscreen.png" -h`
this shouldnt be only restored in dark mode...


[1/1/2023 3:28 PM] tux_linux
It isn't?


[1/1/2023 4:54 PM] szybet
its after darkmode if


[1/1/2023 6:42 PM] tux_linux
I'm licensing IPD under gpl3
Seems we didn't have a license
It's ok?


[1/1/2023 6:59 PM] szybet
sure


[1/1/2023 9:43 PM] andi15701
what kind of sources we have for the WC121 nvram.txt?


[1/1/2023 9:43 PM] andi15701
are there different ones out there?


[1/1/2023 9:43 PM] tux_linux
a nightmare


[1/1/2023 9:43 PM] tux_linux
don't...


[1/1/2023 9:44 PM] tux_linux
But to answer your question, yes, too many


[1/1/2023 9:44 PM] szybet
what even is this


[1/1/2023 9:44 PM] tux_linux
a nightmare


[1/1/2023 9:44 PM] andi15701
Wifi firmware needs a configuration textfile


[1/1/2023 9:45 PM] andi15701
the broadcom wifi firmware


[1/1/2023 9:45 PM] andi15701
of these chips


[1/1/2023 9:45 PM] andi15701
I am about to upstream it to linux-firmware.git


[1/1/2023 9:45 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.32.1/_install-glo/opt/firmware.sqsh
Example
See other _install folders for different versions

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.32.1/_install-glo/opt/firmware.sqsh
kernel/firmware.sqsh at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[1/1/2023 9:47 PM] andi15701
common practise is to have something like this:


[1/1/2023 9:47 PM] andi15701
brcmfmac43430-sdio.sinovoip,bpi-m2-zero.txt -> brcmfmac43430-sdio.AP6212.txt


[1/1/2023 9:47 PM] andi15701
as a symlink there


[1/1/2023 9:47 PM] tux_linux
I have the M2 zero


[1/1/2023 9:47 PM] szybet
its the glo one?


[1/1/2023 9:48 PM] tux_linux
yes


[1/1/2023 9:48 PM] andi15701
and I am just wondering whether I should add a brcmfmac4XXXX-sdo.WC121.txt


[1/1/2023 9:49 PM] andi15701
and add symlinks to it like: brcmfmac43362-sdio.kobo,tolino-shine2hd.txt ->  brcmfmac4XXXX-sdo.WC121.txt


[1/1/2023 9:49 PM] andi15701
to be more correct: just nightmare with old kernels


[1/1/2023 9:49 PM] tux_linux
yes...


[1/1/2023 9:50 PM] andi15701
on the shine2 it is just putting that brcmfmac43362-sdio.kobo,tolino-shine2hd.txt  file in place


[1/1/2023 9:52 PM] szybet
https://tenor.com/view/run-running-mascot-running-away-gif-15262317

{Embed}
https://tenor.com/view/run-running-mascot-running-away-gif-15262317
/mnt/data/projects/git/conversations/media/run-running-41E0B.png


[1/1/2023 9:54 PM] andi15701
since it is considered configuration, it can be just added to linux-firmware.git and spread from there into distributions


[1/1/2023 9:54 PM] andi15701
and nightmare will end


[1/1/2023 9:55 PM] andi15701
at least for mainlined stuff


[1/1/2023 9:55 PM] tux_linux
Yes but it seems different for each device


[1/1/2023 9:55 PM] andi15701
I will check, it might just be that an older wifi firmware knows less options

{Reactions}
👍 

[1/1/2023 9:56 PM] andi15701
that is cruical


[1/1/2023 9:57 PM] andi15701
Hmm, Kobo Glo HD has the WC121, too?


[1/1/2023 9:57 PM] tux_linux
Yes, it's one of the worst ones


[1/1/2023 9:58 PM] tux_linux
I had too much trouble with drivers and kernel panics iirc


[1/1/2023 9:58 PM] tux_linux
But it works now
With some miracles


[1/1/2023 9:58 PM] andi15701
with Shine 2 kernel?


[1/1/2023 9:58 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/e2e772ba708aa9418785a71dfacd2a133d7f00fa

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/e2e772ba708aa9418785a71dfacd2a133d7f00fa
N437: Add Wi-Fi compatibility for Broadcom CyberTAN chip · Kobo-Ink...
Let me tell you, this was a nightmare.
/mnt/data/projects/git/conversations/media/e2e772ba708aa9418785a71dfacd2a133d7f00fa-451AE


[1/1/2023 9:58 PM] tux_linux
No, the native one


[1/1/2023 10:01 PM] andi15701
Hmm, as said Tolino Shine 2 u-boot + Kobo Clara 5.16 kernel + Tolino Shine 2 devicetree should roughly run on that device

{Reactions}
👍 

[1/1/2023 10:04 PM] andi15701
backlight might not work and it has less buttons


[1/1/2023 10:04 PM] andi15701
but that's it probably

{Reactions}
👍 

[1/1/2023 10:40 PM] andi15701
--- brcmfmac43362-sdio.kobo,tolino-shine2hd.txt    2022-09-10 17:32:43.336436753 +0200
+++ /home/andi/n437-nvram.txt    2023-01-01 22:37:31.340433774 +0100
@@ -1,4 +1,8 @@
 
+# sw oob 
+sd_gpout=1
+sd_oobonly=1
+
 # Copied from bcm94336sdg.txt, same WLBGA pkg, same control logic.
 manfid=0x2d0
 prodid=0x492


[1/1/2023 10:41 PM] andi15701
that is the most interesting difference I found


[1/1/2023 10:42 PM] andi15701
oob = out of band = (probably) stuff transferred through other means than the sdio bus


[1/1/2023 10:46 PM] andi15701
there are sometimes GPIO lines for IRQ


[1/1/2023 10:46 PM] andi15701
not going through the sdio bus


[1/1/2023 10:46 PM] andi15701
that might be the case here


[1/1/2023 10:48 PM] andi15701
but on the shine2 mainline I am just happily using the IRQ vio SDIO


[1/1/2023 11:01 PM] andi15701
ok, current firmware seems not to know that


[1/1/2023 11:01 PM] andi15701
so I can skip that


[1/4/2023 7:08 PM] szybet
https://github.com/Kobo-InkBox/imgtool/blob/49501458569a476d4e73468989795b05100c059b/release.bash#L178

{Embed}
https://github.com/Kobo-InkBox/imgtool/blob/49501458569a476d4e73468989795b05100c059b/release.bash
imgtool/release.bash at 49501458569a476d4e73468989795b05100c059b · ...
Reproducible image builder for InkBox OS. Contribute to Kobo-InkBox/imgtool development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/imgtool-0EE5B


[1/4/2023 7:08 PM] szybet
uuf


[1/4/2023 7:08 PM] szybet
i dont like using the emu repo for this


[1/4/2023 7:59 PM] tux_linux
It works


[1/5/2023 8:23 PM] szybet
@tux-linux i awai explanations


[1/5/2023 8:23 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-783EA.png


[1/5/2023 8:23 PM] szybet
those sha dirs are copy of configs for books for configs for them


[1/5/2023 8:24 PM] szybet
where the hell does inkbox change its dir to this directory


[1/5/2023 8:31 PM] szybet
```
.config/04-book/word-lookup-enabled
```
```.config/04-book/highlighting-enabled
```
at default true, if false it will not select any text


[1/5/2023 8:31 PM] szybet
well it depends on the settings if any, if only words if only highlight


[1/5/2023 8:34 PM] tux_linux
It doesn't


[1/5/2023 8:34 PM] tux_linux
/etc/init.d/ibxd
bookconfig_mount


[1/5/2023 8:34 PM] szybet
bu it always calls for example ".config/04-book/refresh" directly


[1/5/2023 8:35 PM] szybet
does it mount this dir to the whole dir?


[1/5/2023 8:35 PM] szybet
oh my god


[1/5/2023 8:35 PM] tux_linux
It fools the program itself
Yes


[1/5/2023 8:35 PM] szybet
oh my god


[1/5/2023 8:35 PM] tux_linux
hehe


[1/5/2023 8:35 PM] szybet
why dont you just change the dir?


[1/5/2023 8:35 PM] szybet
;_;


[1/5/2023 8:35 PM] tux_linux
Because it's less trouble to access settings?


[1/5/2023 8:36 PM] tux_linux
You can just add your exception if you need to


[1/5/2023 8:37 PM] szybet
nooooooo, it would simply set the dir to the sha one


[1/5/2023 8:37 PM] szybet
ibxd wouldnt be needed here


[1/6/2023 12:14 PM] szybet
@tux-linux so there is no way to change refresh, height, width when the book was once open without clearing reading data????..........


[1/6/2023 12:14 PM] szybet
its a major flaw...


[1/6/2023 12:14 PM] szybet
:/


[1/6/2023 12:14 PM] szybet
The solution i can think of is isolating reading settings into qwidget, and show it as a dialog in book options and as default settings in settings


[1/6/2023 1:41 PM] tux_linux
Then what do you do about keeping page numbers coherent
It's not a major flaw, it's just because I am a 17 year old self-learner which isn't a genius everywhere, at some point, I reach a limit


[1/6/2023 1:44 PM] szybet
we cant, but i have an idea with accuracy to about 2% of the book pages
```
450 - 100%
300 - x%

30000 / 450 = 66.666%

520 - 100%
x - 66.666%

34666.32 / 100 = 346
```
based on percantage we can shift pages


[1/6/2023 1:45 PM] szybet
do we have a search function? if yes, we can find the text withing these pages


[1/6/2023 1:46 PM] szybet
do you want to implement this? if yes, clone my fork to avoid some big merge issues


[1/6/2023 1:47 PM] tux_linux
Yes, but what do you do about margins, font size, line spacing
If you think it's a major flaw, it shouldn't even need to be changed manually in the first place


[1/6/2023 1:48 PM] tux_linux
No


[1/6/2023 1:48 PM] tux_linux
Maybe


[1/6/2023 1:48 PM] tux_linux
Idk


[1/6/2023 1:48 PM] tux_linux
Create a new branch


[1/6/2023 1:54 PM] szybet
you misunderstood me i think?

pages will shift only if height / width will be changed


[1/6/2023 1:54 PM] szybet
height / width could be needed changing if font size changes


[1/6/2023 1:55 PM] tux_linux
Yes


[1/6/2023 1:55 PM] szybet
so we can still shift pages using %


[1/6/2023 1:55 PM] tux_linux
Then why not do it automatically


[1/6/2023 1:56 PM] szybet
no, no merging, you will die trying to merge the ui file


[1/6/2023 1:56 PM] szybet
obviously automatically


[1/6/2023 1:56 PM] szybet
thats the point ( of shifting pages? )


[1/6/2023 1:57 PM] tux_linux
Just create a new branch and submit a new pr from this branch?


[1/6/2023 1:58 PM] tux_linux
Then tell me
What would happen if the user was to set font size to 6 and it was 2 previously
Page width and height is 450


[1/6/2023 1:58 PM] szybet
does mutool have arguments for font size?


[1/6/2023 1:59 PM] tux_linux
Maybe


[1/6/2023 1:59 PM] tux_linux
But I wouldn't count on them


[1/6/2023 2:00 PM] szybet
well im talking as for page shifting only for width . height for now


[1/6/2023 2:00 PM] szybet
only for it that the user could adjust is as needed eassly


[1/6/2023 2:03 PM] szybet
```
#!/bin/sh

# Arguments        Examples
# 1 - Font size        12
# 2 - Page width    600
# 3 - Page height    800
# 4 - Page number    22
# 5 - Get total pages number

if [ -z "${5}" ]; then
    cat /run/page | tr -d '\n\t' | system/bin/grep -o -P "<div id=\"page${4}\">.*?</div>" | busybox-initrd sed 's/<h3>/<p>/g; s/<\/h3>/<\/p>/g' > /inkbox/book/page
else
    # N is the last page number
    /usr/local/bin/mutool convert -X -F xhtml -S ${1} -W ${2} -H ${3} -o /run/page /run/book.epub 1-N
    sed -n '/div id="page/h;${x;p;}' /run/page | sed 's/[^0-9]*//g' > /run/epub_total_pages_number
fi
```


[1/6/2023 2:03 PM] szybet
well exactly


[1/6/2023 2:04 PM] szybet
well percantage shifting is still better than nothing


[1/6/2023 2:04 PM] szybet
also, setting the font the user wants when running mutool could improve the problem with scroll bar


[1/6/2023 2:11 PM] szybet
¯\_(ツ)_/¯


[1/6/2023 2:35 PM] szybet
wait
mutool ignores user settings inside the sha config anyway, right? it gets it from the default one


[1/6/2023 2:36 PM] tux_linux
Yes


[1/6/2023 2:37 PM] szybet
oh


[1/6/2023 2:37 PM] szybet
good then


[1/6/2023 2:40 PM] szybet
and what is here happening

{Attachments}
/mnt/data/projects/git/conversations/media/image-1C748.png
/mnt/data/projects/git/conversations/media/image-92C66.png


[1/6/2023 2:43 PM] szybet
restoring page?


[1/6/2023 2:43 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2054F.png


[1/6/2023 3:31 PM] szybet
god complicated code


[1/6/2023 3:31 PM] szybet
`system/bin/grep -o -P "<div id=\"page${4}\">.*?</div>"` i wonder how this grep works


[1/6/2023 3:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F9F2D.png


[1/6/2023 4:59 PM] tux_linux
it's gnu grep, not busybox grep


[1/6/2023 4:59 PM] szybet
im trying with mutool to get perfect page fit


[1/6/2023 5:00 PM] szybet
its impossible


[1/6/2023 5:00 PM] tux_linux
yes but don't fiddle with this code
I had too much problems with it


[1/6/2023 5:00 PM] szybet
im only adding it


[1/6/2023 5:01 PM] szybet
the comment


[1/6/2023 5:01 PM] tux_linux
it does a regex operation on the entire book html and returns only the required page, which is stored in a `<div/>`


[1/6/2023 5:02 PM] tux_linux
don't care about the 0s


[1/6/2023 5:03 PM] szybet
yea i understood


[1/6/2023 5:03 PM] szybet
how the heck does plato use mutool


[1/6/2023 5:03 PM] szybet
i cant remember those problems


[1/6/2023 5:03 PM] szybet
i he using svg instead of html?


[1/6/2023 5:05 PM] tux_linux
i honestly do not know


[1/6/2023 5:05 PM] tux_linux
but if you want to use svg you lose highlighting and word search probably


[1/6/2023 5:06 PM] szybet
i dont care


[1/6/2023 5:06 PM] szybet
second option


[1/6/2023 5:06 PM] tux_linux
i care


[1/6/2023 5:06 PM] szybet
runner


[1/6/2023 5:06 PM] tux_linux
no


[1/6/2023 5:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E1D5E.png


[1/6/2023 5:08 PM] szybet
let the user choose


[1/6/2023 5:09 PM] szybet
i might just create a second reader class


[1/6/2023 5:09 PM] tux_linux
AAAAAAAAAAAAAAAAAAAA


[1/6/2023 5:09 PM] szybet
what


[1/6/2023 5:09 PM] tux_linux
no


[1/6/2023 5:09 PM] tux_linux
no


[1/6/2023 5:09 PM] tux_linux
no


[1/6/2023 5:09 PM] szybet
you launch this or this


[1/6/2023 5:09 PM] szybet
you dont care about the second one


[1/6/2023 5:09 PM] tux_linux
then rewrite it entirely


[1/6/2023 5:09 PM] tux_linux
otherwise it's ridiculous


[1/6/2023 5:10 PM] szybet
no because i want sometime highlitin too


[1/6/2023 5:10 PM] tux_linux
then try to rewrite it with highlighting


[1/6/2023 5:11 PM] szybet
svg and highliting? how


[1/6/2023 5:11 PM] tux_linux
using svg is good, but is it as flexible, like, can you change margins, line spacing, font size, etc.


[1/6/2023 5:11 PM] szybet
but hm


[1/6/2023 5:11 PM] tux_linux
magic


[1/6/2023 5:11 PM] szybet
give me a sec

{Reactions}
👍 

[1/6/2023 5:11 PM] tux_linux
magic is how koreader uses crengine and allows user to highlight from a picture


[1/6/2023 5:12 PM] szybet
we dont have 200 developers


[1/6/2023 5:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5A2BD.png


[1/6/2023 5:17 PM] szybet
holy shit


[1/6/2023 5:17 PM] szybet
XD


[1/6/2023 5:18 PM] tux_linux
so what


[1/6/2023 5:23 PM] szybet
i runned out of ideas


[1/6/2023 5:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2C48E.png


[1/6/2023 5:37 PM] szybet
it does work in the browser


[1/6/2023 5:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D6EC6.png


[1/6/2023 5:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-13338.png


[1/6/2023 5:38 PM] szybet
but not for xhtml


[1/6/2023 5:39 PM] szybet
https://tenor.com/view/hmm-dot-dot-dot-stick-figure-intresting-gif-23376515

{Embed}
https://tenor.com/view/hmm-dot-dot-dot-stick-figure-intresting-gif-23376515
/mnt/data/projects/git/conversations/media/hmm-dot-dot-dot-4B25D.png


[1/6/2023 5:39 PM] szybet
@tux-linux any reason not to use html?


[1/6/2023 5:41 PM] tux_linux
it was strange


[1/6/2023 5:41 PM] szybet
xhtml doesnt work


[1/6/2023 5:41 PM] szybet
simply


[1/6/2023 5:41 PM] szybet
doesnt


[1/6/2023 5:41 PM] szybet
work


[1/6/2023 5:41 PM] szybet
:(


[1/6/2023 5:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F914C.png


[1/6/2023 5:44 PM] szybet
it will be hard


[1/6/2023 5:44 PM] szybet
but it has chances to work


[1/6/2023 6:33 PM] tux_linux
good luck


[1/6/2023 6:36 PM] szybet
well audio first i think ( 60% done? )


[1/6/2023 6:37 PM] szybet
when will you have time for inkbox? 😶


[1/6/2023 6:37 PM] tux_linux
when you will stop pushing PRs that haunt my dreams


[1/6/2023 6:38 PM] tux_linux
like, we should focus on what does not work


[1/6/2023 6:38 PM] tux_linux
not what could be improved


[1/6/2023 6:38 PM] tux_linux
at this point


[1/6/2023 6:39 PM] tux_linux
i know i'm contradicting myself with the myself from two weeks ago, but i don't have the energy to review three PRs of monstrous changes, even thinking about redesigning the update system is enough to scare me


[1/6/2023 6:40 PM] szybet
expand this opinion?


[1/6/2023 6:41 PM] szybet
apart of audio, i do?


[1/6/2023 6:41 PM] tux_linux
no?


[1/6/2023 6:42 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-53125.png


[1/6/2023 6:42 PM] szybet
there isin;t much apart ui changes, and i documented them in comments inside reader.cpp


[1/6/2023 6:43 PM] szybet
well im reading sometimes on the ereader and at some point i need to fix some things


[1/6/2023 6:43 PM] tux_linux
you should have your brain for logical thinking and my brain for respecting english spelling and code standards


[1/6/2023 6:45 PM] tux_linux
because, and i'm sorry to tell you this, while your ideas are good, your PRs are often a nightmare to review for me


[1/6/2023 6:45 PM] tux_linux
like, design, in the first place
how did you let this pass

{Attachments}
/mnt/data/projects/git/conversations/media/image-E8DFC.png


[1/6/2023 6:46 PM] szybet
already fixed :D


[1/6/2023 6:46 PM] tux_linux
and the margins are not like how they should be


[1/6/2023 6:46 PM] szybet
i changed them for nia


[1/6/2023 6:46 PM] tux_linux
i disagree


[1/6/2023 6:47 PM] szybet
im aware and i hope you see some improvements ( god this word in commit is bad written )


[1/6/2023 6:48 PM] tux_linux
`( god this word in commit is bad written )`
wdym?


[1/6/2023 6:49 PM] tux_linux
yes, there are, but `i`->`I` should be already acquired since some time
`doesnt`->`doesn't`
sentences that start with a capital letter and end with a period
it's not discord, it's production code


[1/6/2023 6:49 PM] tux_linux
end of rant


[1/6/2023 6:50 PM] tux_linux
sorry


[1/6/2023 6:50 PM] szybet
improvments / improvements


[1/6/2023 6:50 PM] szybet
nah, i understand, partially

{Reactions}
👍 

[1/6/2023 6:50 PM] tux_linux
yes, among others


[1/6/2023 6:51 PM] tux_linux
I can understand some people are not good at UI/UX design, and I can fix that without issue, but some things like code standards and english have to be respected


[1/6/2023 6:52 PM] szybet
yea...


[1/6/2023 6:52 PM] tux_linux
well, thanks for staying around
since almost a year


[1/6/2023 6:52 PM] tux_linux
we're probably crazy


[1/6/2023 6:52 PM] szybet
just focus on your work, if you don't want to review mine? don't force yourself to


[1/6/2023 6:52 PM] tux_linux
yes but I will have to some day


[1/6/2023 6:52 PM] szybet
because?


[1/6/2023 6:53 PM] tux_linux
because no one is like us


[1/6/2023 6:53 PM] tux_linux
yes, maybe we have no full-time job (at least it's the case for me), but some people could still invest in some of their time for the project on week-end or extended time periods


[1/6/2023 6:54 PM] szybet
thats not a reason to be "scared" and do nothing


[1/6/2023 6:54 PM] tux_linux
alex in the Clara porting thread is a fair exception
andi1 too


[1/6/2023 6:54 PM] tux_linux
sometimes, yes
I feel so overwhelmed that I can't get myself to do what I need to do


[1/6/2023 6:54 PM] tux_linux
I will update epubtool today


[1/6/2023 6:55 PM] szybet
well school is killing me and my time

also i dont think there are many people using inkbox anyways? before 1.9 it was unusable


[1/6/2023 6:55 PM] tux_linux
it has been usable now for almost a year;)


[1/6/2023 6:55 PM] tux_linux
did you fix folders issue in library?


[1/6/2023 6:56 PM] szybet
well split the task then
there are many ways to help in such situations


[1/6/2023 6:56 PM] szybet
which one😂


[1/6/2023 6:56 PM] tux_linux
the one you talked about yesterday


[1/6/2023 6:56 PM] szybet
well in my opinion, compared to plato and koreader


[1/6/2023 6:57 PM] tux_linux
when you posted a picture of the json file


[1/6/2023 6:58 PM] szybet
?


[1/6/2023 6:58 PM] szybet
https://github.com/Szybet/inkbox/commit/fd16ff8e678a93b230a983a54f8299ae36424fe0

{Embed}
https://github.com/Szybet/inkbox/commit/fd16ff8e678a93b230a983a54f8299ae36424fe0
Library epubtool error reporting · Szybet/inkbox@fd16ff8
/mnt/data/projects/git/conversations/media/fd16ff8e678a93b230a983a54f8299ae36424fe0-AD0D6


[1/6/2023 6:58 PM] szybet
this one commit


[1/6/2023 6:58 PM] tux_linux
can't you use padding instead? maybe?

{Attachments}
/mnt/data/projects/git/conversations/media/image-CB2A9.png


[1/6/2023 6:59 PM] szybet
+ latest commit to my epubtool repo


[1/6/2023 6:59 PM] szybet
why complicate things?


[1/6/2023 6:59 PM] tux_linux
because not every device has the same screen size as yours?!


[1/6/2023 7:00 PM] szybet
so i need to implement a function to set them? :/


[1/6/2023 7:00 PM] szybet
n i a h a s


[1/6/2023 7:01 PM] tux_linux
you just have to set a padding value that works with your device and it probably will work on others without a need for adaptation


[1/6/2023 7:01 PM] tux_linux
no, that's not like I want them, margins in home screen are fine, please don't change them
in reader, we can work on them


[1/6/2023 7:02 PM] tux_linux
btw, in English you don't need to put a space before and after starting a sentence in a group of parenthesis

{Attachments}
/mnt/data/projects/git/conversations/media/image-FF607.png


[1/6/2023 7:02 PM] szybet
??? no


[1/6/2023 7:02 PM] szybet
but i want them


[1/6/2023 7:03 PM] szybet
like i set them


[1/6/2023 7:03 PM] szybet
no space wasted


[1/6/2023 7:03 PM] szybet
i prefer it that way...


[1/6/2023 7:03 PM] tux_linux
it's not legal 😉

{Reactions}
😮 

[1/6/2023 7:04 PM] szybet
nia has a shifted screen ( 4 px? ) it hurts my eyes


[1/6/2023 7:05 PM] tux_linux
why put a space after a new line?

{Attachments}
/mnt/data/projects/git/conversations/media/image-8ED75.png


[1/6/2023 7:05 PM] tux_linux
i'm curious


[1/6/2023 7:06 PM] tux_linux
you should merge this before it's too late...

{Attachments}
/mnt/data/projects/git/conversations/media/image-78102.png


[1/6/2023 7:07 PM] szybet
It doesn't matter, code is easier to read


[1/6/2023 7:07 PM] szybet
I CAAAAAAANT


[1/6/2023 7:08 PM] szybet
i have no buttons to do thissss


[1/6/2023 7:08 PM] tux_linux
yes? it makes the text be off-center


[1/6/2023 7:09 PM] szybet
well i didn't saw this :/


[1/6/2023 7:09 PM] tux_linux
```
tar cJvf ../inkbox-backup-20230106.tar.xz .
git remote set-url git@github.com:Kobo-InkBox/inkbox
git pull
git remote set-url git@github.com:Szybet/inkbox
```
done
if it messes up, you have a backup


[1/6/2023 7:09 PM] tux_linux
*see this


[1/6/2023 7:10 PM] tux_linux
and if it asks you to merge, maybe it's not so bad


[1/6/2023 7:11 PM] szybet
past time?


[1/6/2023 7:11 PM] szybet
it will ask, and its horrible


[1/6/2023 7:12 PM] tux_linux
sometimes not


[1/6/2023 7:12 PM] tux_linux
-> I did not see
`did` already implies past, otherwise, it wouldn't even need to be there
so why imply it twice?
-> I didn't see


[1/6/2023 7:13 PM] szybet
well okay


[1/6/2023 7:13 PM] tux_linux
it only asks if you've modified files that I modified


[1/6/2023 7:21 PM] tux_linux
normal that `unwrap` disappeared in your repo?

{Attachments}
/mnt/data/projects/git/conversations/media/image-C7135.png


[1/6/2023 7:21 PM] szybet
yea, thats the point


[1/6/2023 7:21 PM] szybet
if this failt, the epub is corrupted


[1/6/2023 7:21 PM] szybet
so there is a ok next


[1/6/2023 7:21 PM] tux_linux
ok


[1/6/2023 7:21 PM] tux_linux
thanks


[1/6/2023 7:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-86699.png


[1/6/2023 7:25 PM] tux_linux
shouldn't it be `cover_path` instead?


[1/6/2023 7:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-80E31.png


[1/6/2023 7:26 PM] szybet
the point is to make the path empty in json


[1/6/2023 7:26 PM] tux_linux
ok


[1/6/2023 7:35 PM] tux_linux
can you check if I haven't done any mess there please? thanks
https://github.com/Kobo-InkBox/epubtool/commit/fddfdbe207690bd56d2058dcd6a82e4f9c812c75

{Embed}
https://github.com/Kobo-InkBox/epubtool/commit/fddfdbe207690bd56d2058dcd6a82e4f9c812c75
Changes by @Szybet · Kobo-InkBox/epubtool@fddfdbe
/mnt/data/projects/git/conversations/media/fddfdbe207690bd56d2058dcd6a82e4f9c812c75-7CE2C


[1/6/2023 7:37 PM] szybet
check if it works, then yes. Otherwise seems good


[1/6/2023 7:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-CD13A.png


[1/6/2023 7:38 PM] szybet
btw


[1/6/2023 7:38 PM] szybet
nope


[1/6/2023 7:42 PM] szybet
also


[1/6/2023 7:42 PM] szybet (pinned)
https://rustc-dev-guide.rust-lang.org/conventions.html

{Embed}
https://rustc-dev-guide.rust-lang.org/conventions.html
Coding conventions - Guide to Rustc Development
A guide to developing rustc


[1/6/2023 7:42 PM] szybet
🥲


[1/6/2023 7:48 PM] tux_linux
ok will look into it thanks


[1/6/2023 7:49 PM] tux_linux
but merge your repo before


[1/6/2023 7:50 PM] szybet
i did


[1/6/2023 7:50 PM] szybet
i dont have access


[1/6/2023 7:50 PM] tux_linux
I just gave you access


[1/6/2023 7:50 PM] tux_linux
Pinned a message.


[1/6/2023 7:58 PM] szybet
well i will try then


[1/6/2023 7:58 PM] szybet
nope


[1/6/2023 7:58 PM] szybet
denied by szybet


[1/6/2023 7:58 PM] szybet
so hmm


[1/6/2023 8:00 PM] tux_linux
You should have received an invite


[1/6/2023 8:01 PM] szybet
oh this


[1/6/2023 8:04 PM] szybet
woah


[1/6/2023 8:04 PM] szybet
done


[1/6/2023 8:05 PM] szybet
aaaand it doesnt compile


[1/6/2023 8:10 PM] szybet
check now if it works


[1/6/2023 8:10 PM] szybet
great success


[1/6/2023 9:16 PM] tux_linux
It compiled here


[1/6/2023 9:18 PM] szybet
.

{Reactions}
👍 

[1/6/2023 10:19 PM] tux_linux
now i remember why i created a separate repo and never merged your fork


[1/6/2023 10:19 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-32CDD.png


[1/6/2023 10:20 PM] szybet
yea


[1/6/2023 10:20 PM] szybet
is there a solution to that?


[1/6/2023 10:20 PM] tux_linux
probably not


[1/6/2023 10:21 PM] szybet
stupid ~~me~~ git


[1/6/2023 10:21 PM] szybet
well now that i have permissions we will continue to use your repo


[1/6/2023 10:39 PM] tux_linux
works


[1/6/2023 10:40 PM] tux_linux
can you read txt files with the nia?


[1/6/2023 11:04 PM] szybet
cant check


[1/6/2023 11:04 PM] szybet
tommorow


[1/6/2023 11:04 PM] szybet
why are you asking?


[1/6/2023 11:04 PM] tux_linux
because it doesn't seem to work here


[1/6/2023 11:07 PM] tux_linux
don't forget to merge your repo too


[1/6/2023 11:07 PM] tux_linux
(inkbox)


[1/7/2023 10:57 AM] szybet
dont do a conflict


[1/7/2023 10:57 AM] szybet
https://tenor.com/view/hug-gif-26312675

{Embed}
https://tenor.com/view/hug-gif-26312675
/mnt/data/projects/git/conversations/media/hug-82E66.png


[1/7/2023 3:58 PM] tux_linux
It's not my fault
You should have merged before


[1/7/2023 3:58 PM] tux_linux
Shouldn't you?...


[1/8/2023 3:16 PM] szybet
there is no way with mutool to get how many pages there are


[1/8/2023 3:17 PM] szybet
i want to generate it dynamically :(


[1/8/2023 3:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-21B4E.png


[1/8/2023 3:21 PM] szybet
by copying mutool to ram


[1/8/2023 3:30 PM] szybet
well when it gets cached there is no diffrence


[1/8/2023 3:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F550A.png


[1/8/2023 3:30 PM] szybet
this is also cool


[1/8/2023 3:31 PM] szybet
well it will try to find it in the background, there will be also a request button, explanation


[1/8/2023 5:14 PM] szybet
what is using /tmp/inkboxReading


[1/8/2023 5:15 PM] szybet
who do you think wants to upload books to the ereader while reading, and not only charge it


[1/8/2023 6:22 PM] tux_linux
Yes there is


[1/8/2023 6:23 PM] szybet
yea please tell me


[1/8/2023 6:23 PM] tux_linux
How would InkBox do it


[1/8/2023 6:23 PM] szybet
i generate pages one by one


[1/8/2023 6:23 PM] tux_linux
Change your page number to 1-N


[1/8/2023 6:23 PM] szybet
not all at once


[1/8/2023 6:23 PM] tux_linux
Then regex to grep the last div
Then page number


[1/8/2023 6:23 PM] szybet
noooo


[1/8/2023 6:23 PM] tux_linux
It's the only way I know


[1/8/2023 6:23 PM] szybet
no more waiting 10s


[1/8/2023 6:24 PM] szybet
🥴


[1/8/2023 6:24 PM] tux_linux
It's done only once ?


[1/8/2023 6:24 PM] szybet
for 10s


[1/8/2023 6:24 PM] tux_linux
And it parses the book at the same time


[1/8/2023 6:24 PM] tux_linux
So what


[1/8/2023 6:24 PM] szybet
i prefer waiting 10s for "the last page is unknown" than the book to open


[1/8/2023 6:25 PM] tux_linux
You don't understand


[1/8/2023 6:25 PM] szybet
I do


[1/8/2023 6:26 PM] tux_linux
When I send a request for the page number, it's parsing the book to XHTML with 1-N
Then I grep the last div for pages number and it I want a single page I just have to grep that specific div, which often doesn't even take half a second


[1/8/2023 6:27 PM] szybet
i know


[1/8/2023 6:27 PM] szybet
i dont do this that way


[1/8/2023 6:27 PM] tux_linux
Then why are you complaining


[1/8/2023 6:27 PM] szybet
im


[1/8/2023 6:27 PM] szybet
asking


[1/8/2023 6:27 PM] szybet
for another


[1/8/2023 6:27 PM] szybet
solution


[1/8/2023 6:27 PM] szybet
¯\_(ツ)_/¯


[1/8/2023 6:27 PM] tux_linux
Which is


[1/8/2023 6:27 PM] szybet
i dont know one ( fast one )


[1/8/2023 6:27 PM] tux_linux
What do you want to do with it


[1/8/2023 6:28 PM] szybet
**html** based reader?


[1/8/2023 6:28 PM] tux_linux
It's already html based


[1/8/2023 6:28 PM] szybet
its xhtml


[1/8/2023 6:28 PM] tux_linux
Almost the same thing


[1/8/2023 6:28 PM] szybet
xhtml doesnt fit, mutool doesn't handle it good


[1/8/2023 6:29 PM] tux_linux
mutool handled html worse


[1/8/2023 6:29 PM] szybet
no, it works


[1/8/2023 6:29 PM] szybet
i showed you


[1/8/2023 6:29 PM] szybet
even basic browser html vs xhtml | html worked better


[1/8/2023 6:30 PM] tux_linux
Then try with html and try changing every option out there spacing margins font size and come back


[1/8/2023 6:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D1F61.png


[1/8/2023 6:30 PM] szybet
im doing exactly that


[1/8/2023 6:30 PM] szybet
well every option no, just the basic ones for now


[1/8/2023 6:31 PM] tux_linux
What is this class name


[1/8/2023 6:31 PM] tux_linux
Did we really need this


[1/8/2023 6:31 PM] szybet
I lost hopes for 2.0, kinda so i just develope things that i want


[1/8/2023 6:31 PM] szybet
**t**he **o**ther **reader**


[1/8/2023 6:31 PM] tux_linux
Did you create a new branch


[1/8/2023 6:31 PM] szybet
no


[1/8/2023 6:31 PM] tux_linux
Only one reader can exist
I don't want this to become android


[1/8/2023 6:32 PM] szybet
`I lost hopes for 2.0, kinda so i just develope things that i want`


[1/8/2023 6:32 PM] szybet
if it will work, toreader will became the only one


[1/8/2023 6:32 PM] szybet
which will be funny


[1/8/2023 6:32 PM] tux_linux
This will be post 2.0 or we will still be there in 2027


[1/8/2023 6:32 PM] tux_linux
no


[1/8/2023 6:32 PM] szybet
sure, obviously

{Reactions}
👍 

[1/8/2023 6:32 PM] szybet
yes 😄


[1/8/2023 6:32 PM] tux_linux
It will change name


[1/8/2023 6:33 PM] szybet
:(


[1/8/2023 6:33 PM] tux_linux
!!!!!!!!!


[1/8/2023 6:33 PM] szybet
no, do i really need to?


[1/8/2023 6:34 PM] tux_linux
Think a bit
You want to change something before 2.0 release
You make a pr
Problems


[1/8/2023 6:34 PM] tux_linux
And don't forget to merge regularly your branch with upstream if you change things in existing classes


[1/8/2023 6:34 PM] szybet
its already a mess in settings so when i find time and will to do it, i will do it


[1/8/2023 6:35 PM] tux_linux
It shouldn't be a mess


[1/8/2023 6:35 PM] tux_linux
Whatever


[1/8/2023 6:35 PM] szybet
when do you even plan 2.0? when will you be able to


[1/8/2023 6:35 PM] tux_linux
What else do you want to add to 2.0


[1/8/2023 6:36 PM] tux_linux
That isn't in upstream yet


[1/8/2023 6:36 PM] szybet
we have a todo


[1/8/2023 6:36 PM] szybet
all* of the things there are waiting for you


[1/8/2023 6:36 PM] tux_linux
Then what is audio there for


[1/8/2023 6:36 PM] tux_linux
2030?


[1/8/2023 6:37 PM] szybet
im not `verb: hasten, hurry, make haste` you, just asking


[1/8/2023 6:37 PM] szybet
yea idk too, except audio, its 60% finished anyway


[1/8/2023 6:37 PM] szybet
you serious?


[1/8/2023 6:37 PM] tux_linux
And your other things that aren't separate in other branches that you won't have the choice to pr when you will want me to merge audio?


[1/8/2023 6:38 PM] tux_linux
I hope not


[1/8/2023 6:38 PM] szybet
i hope git can do patches based on one commits between other commits


[1/8/2023 6:39 PM] szybet
Don't focus on my work


[1/8/2023 6:39 PM] tux_linux
Start now
I already see too much problems...


[1/8/2023 6:39 PM] tux_linux
And create branches from now


[1/8/2023 6:39 PM] szybet
if you say "2.0 could be done next week" i will merge / provide every code i wrote


[1/8/2023 6:39 PM] szybet
okay


[1/8/2023 6:40 PM] szybet
So
Don't focus on my work
Don't focus on my work
Don't focus on my work
Don't focus on my work

{Reactions}
👍 

[1/8/2023 6:43 PM] szybet
In may i will have a LOOT of time, so if 2.0 isin't released till then, i will fork the project ( to avoid waiting for PR, and having a tidy set of repos, only because of this ) and do it myself, in limited way because i have only the nia but yea


[1/8/2023 6:56 PM] tux_linux
I hope it will be released at this point


[1/8/2023 6:56 PM] szybet
me too


[1/8/2023 8:33 PM] szybet
I have a prototype
1. Sometimes it does excelent job
2. Sometimes it cuts to much text, sadly
3. If ever scroll bar appears, its qt fault, text isin't cutted, this can be fixed by my prototype fix ( still waiting for acceptence, but its in the main repo for ages )


[1/8/2023 8:35 PM] szybet
+ font size change will not force to change width / height, it will simply work


[1/8/2023 8:52 PM] szybet
qtextedit ignores absolute position...

{Attachments}
/mnt/data/projects/git/conversations/media/image-AF031.png


[1/8/2023 8:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-1F118.png


[1/8/2023 8:58 PM] szybet
based on this, and font size i will be able to add a new line


[1/9/2023 10:19 PM] szybet
https://github.com/Szybet/inkbox-html-lib-rs
another library for inkbox

{Embed}
https://github.com/Szybet/inkbox-html-lib-rs
GitHub - Szybet/inkbox-html-lib-rs: Library in rust for inkbox html...
Library in rust for inkbox html needs. Contribute to Szybet/inkbox-html-lib-rs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-html-lib-rs-867F2


[1/9/2023 10:30 PM] tux_linux
do not ever put build artifacts in this commit history


[1/9/2023 10:30 PM] szybet
you mean target?


[1/9/2023 10:30 PM] szybet
yea


[1/9/2023 10:31 PM] szybet
i have no idea how it got in epub tool


[1/9/2023 10:31 PM] szybet
rust has a gitignore at default


[1/9/2023 10:31 PM] szybet
¯\_(ツ)_/¯


[1/9/2023 10:31 PM] tux_linux
https://github.com/Szybet/inkbox-html-lib-rs/blob/f67ee57d86617198c7349bd5e7078b0bd79cad31/src/main.rs#L49
what did i say

{Embed}
https://github.com/Szybet/inkbox-html-lib-rs/blob/f67ee57d86617198c7349bd5e7078b0bd79cad31/src/main.rs
inkbox-html-lib-rs/main.rs at f67ee57d86617198c7349bd5e7078b0bd79ca...
Library in rust for inkbox html needs. Contribute to Szybet/inkbox-html-lib-rs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-html-lib-rs-867F2


[1/9/2023 10:31 PM] szybet
https://rustc-dev-guide.rust-lang.org/conventions.html
https://rustc-dev-guide.rust-lang.org/conventions.html
https://rustc-dev-guide.rust-lang.org/conventions.html
https://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-lang.org/conventions.htmlhttps://rustc-dev-guide.rust-

{Embed}
https://rustc-dev-guide.rust-lang.org/conventions.html
Coding conventions - Guide to Rustc Development
A guide to developing rustc


[1/9/2023 10:32 PM] szybet
when you code rust, and something is non speck it gives a warning


[1/9/2023 10:32 PM] tux_linux
well ok but only for rust


[1/9/2023 10:32 PM] szybet
yea, only

{Reactions}
👍 

[1/9/2023 10:34 PM] tux_linux
but what does it do exactly


[1/9/2023 10:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-434B4.png


[1/9/2023 10:35 PM] szybet
give me a sec


[1/9/2023 10:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230108_204455_DRO-F066E.jpg


[1/9/2023 10:36 PM] szybet
see the diffrence


[1/9/2023 10:36 PM] tux_linux
not that gray mess


[1/9/2023 10:36 PM] szybet
i will fix this


[1/9/2023 10:36 PM] szybet
focus on the layout


[1/9/2023 10:36 PM] szybet
almost prefect


[1/9/2023 10:37 PM] szybet
misses a few lines


[1/9/2023 10:37 PM] szybet
i will add them manually


[1/9/2023 10:37 PM] tux_linux
ok good


[1/9/2023 10:38 PM] tux_linux
What will you do for txt files?


[1/9/2023 10:57 PM] szybet
the same one i have written


[1/9/2023 10:57 PM] szybet
its good


[1/9/2023 10:57 PM] szybet
maybe add a second regular mode that will be simpler for non gutenberg books


[1/10/2023 2:26 PM] tux_linux
can you submit a working patch upstream that I just have to `git apply`?


[1/10/2023 2:27 PM] tux_linux
I want to check this

{Attachments}
/mnt/data/projects/git/conversations/media/image-706DB.png


[1/10/2023 2:31 PM] szybet
well in coming days, yes


[1/10/2023 2:58 PM] szybet
do something else, dont wait for me


[1/10/2023 2:58 PM] szybet
like, recompiling xorg?


[1/10/2023 10:35 PM] tux_linux
We found a fix?


[1/10/2023 10:35 PM] szybet
yes


[1/10/2023 10:35 PM] szybet
2 actually


[1/10/2023 10:35 PM] szybet
thanks to niluje


[1/10/2023 10:36 PM] tux_linux
Oh I recall the unblank thing


[1/10/2023 10:36 PM] tux_linux
But it was hard to implement or smth


[1/10/2023 10:36 PM] szybet
well there were 3 things in xorg sources to comment out to make it work


[1/10/2023 10:36 PM] szybet
so i would go with this


[1/10/2023 10:36 PM] tux_linux
Did you compile it successfully?


[1/10/2023 10:36 PM] szybet
you have knowledge with xorg, so i hope you will do it

{Reactions}
🤣 

[1/10/2023 10:36 PM] szybet
i dont know which source / version you used


[1/10/2023 10:37 PM] szybet
so, no


[1/10/2023 10:40 PM] szybet
i will do the reader out of sudden so i *hope*
also you did it once already, reverse enginering qt for me was no fun sooo 🥴


[1/10/2023 10:43 PM] tux_linux
What do you mean


[1/10/2023 10:44 PM] tux_linux
Yes, sometimes the lack of experience makes you do things no one thought was possible


[1/10/2023 10:45 PM] szybet
in simpler words "there are logical reasons for you to do it, also im scared so please you" 😄

{Reactions}
👍 

[1/13/2023 2:31 PM] szybet
@tux-linux do i name the rust library for inkbox binary inkbox-html-rs or something more generic


[1/13/2023 2:35 PM] tux_linux
libreader.so


[1/13/2023 2:35 PM] szybet
maybe something more inkbox-rusty like?


[1/13/2023 2:35 PM] szybet
also is the home page supposed to be scrolled because of "recent books"?


[1/13/2023 2:36 PM] tux_linux
Because c++ extensions should have cpp in their name ?


[1/13/2023 2:36 PM] tux_linux
Yes


[1/13/2023 2:36 PM] tux_linux
Did you ever look at Kindle UI?


[1/13/2023 2:36 PM] szybet
if everything is c++, and this one is diffrent then well


[1/13/2023 2:36 PM] szybet
¯\_(ツ)_/¯


[1/13/2023 2:36 PM] szybet
i cant remember


[1/13/2023 2:36 PM] tux_linux
It scrolls


[1/13/2023 2:38 PM] szybet
libreader-rs.so?

{Reactions}
👍 

[1/13/2023 2:39 PM] szybet
also this would indicate that its only for reader


[1/13/2023 2:39 PM] szybet
this could be used for other tasks


[1/13/2023 5:18 PM] szybet
@tux-linux do i add my repo as a submodule?


[1/13/2023 5:18 PM] tux_linux
Yes


[1/13/2023 5:18 PM] szybet
I really don't think its needed


[1/13/2023 5:18 PM] szybet
oh god


[1/13/2023 5:19 PM] tux_linux
Did you create a new branch


[1/13/2023 5:19 PM] tux_linux
It is


[1/13/2023 5:19 PM] szybet
I didn't touched git, i will soon

{Reactions}
👍 

[1/13/2023 5:19 PM] tux_linux
Do it before adding submodule


[1/13/2023 5:20 PM] szybet
oof


[1/13/2023 5:58 PM] szybet
Do you know any real way to aquire size in pixels od qtextedit?


[1/13/2023 5:58 PM] szybet
i tryied in inkbox, i remember in sanki too and i didn't found a way


[1/13/2023 7:05 PM] szybet
+ it will be a static library


[1/13/2023 10:23 PM] tux_linux
this->size()


[1/13/2023 10:23 PM] tux_linux
I think


[1/13/2023 10:23 PM] szybet
nope


[1/13/2023 10:23 PM] szybet
XD


[1/13/2023 10:24 PM] tux_linux
I use it somewhere


[1/13/2023 10:24 PM] tux_linux
Maybe check in virtual keyboard


[1/13/2023 10:24 PM] tux_linux
Embedded mode


[1/13/2023 10:24 PM] szybet
doesnt work


[1/13/2023 10:24 PM] szybet
size()


[1/13/2023 10:25 PM] tux_linux
How does it not work


[1/13/2023 10:25 PM] szybet
there is also size hint, document size, layout size, abstract document block size... nothing works


[1/13/2023 10:25 PM] szybet
gives unresonable low values / 0 / -1


[1/13/2023 10:25 PM] szybet
or or *


[1/13/2023 10:26 PM] szybet
if you figure this out for qtextedit, the user wouldn't need to play arround with weight / height at all until they use some crazy margins / line spacing


[1/13/2023 10:26 PM] szybet
well i hope, for now its a mess


[1/13/2023 10:27 PM] tux_linux
It's qsize, you aware of that?


[1/13/2023 10:28 PM] szybet
yes... don't assume i didn't tryied


[1/13/2023 10:28 PM] szybet
i tryied ***hard*** both with sanki and the current reader


[1/13/2023 10:38 PM] szybet
@tux-linux 
https://matrix.to/#/!PHMgdTuHOkmIQHFPdW:matrix.org/$yZwBNUbc0HA-LvEkvhQpbxOLYRWCid9ch1stF277Kh0?via=matrix.org&via=tchncs.de

on matrix develepovment channel, because discord has a limit size

{Embed}
https://matrix.to/
Matrix - Decentralised and secure communication
You're invited to talk on Matrix. If you don't already have a client this link will help you pick one, and join the conversation. If you already have one, this link will help you join the conversation
/mnt/data/projects/git/conversations/media/matrix-logo-56B2E.png


[1/13/2023 10:39 PM] szybet
look at it


[1/13/2023 10:39 PM] szybet
i havent focused on speed / look at all


[1/13/2023 10:39 PM] szybet
only layout of the text


[1/13/2023 10:39 PM] szybet
its almost perfect


[1/13/2023 10:41 PM] szybet
for the look on the video, only once the text is cut, only half a line, the rest isin't cutted and the scroll bar is unnecesery ( which can be fixed using my prototype that you didn't approve... im waiting )

and if i did the height -5, there would be only once unneceserry scroll bar, the text wouldn't be cutted anywhere at all


[1/13/2023 10:45 PM] szybet
why there are so many spaces: those are dialogs. they finally look good, as how they are supposed to. noormal pages look fine too


[1/13/2023 10:46 PM] szybet
and why is there the doom slayer testament in the background playing, rust betrayed me, his power against me and took away 5h of my life only for one line of code :)
~~return Box::leak(CString::new(root.html()).unwrap().into_boxed_c_str()).as_ptr();~~


[1/14/2023 1:19 PM] andi15701
Something I really wonder about:


[1/14/2023 1:19 PM] andi15701
power consumption of serial console


[1/14/2023 1:21 PM] andi15701
background: The linux kernel has a mechanism called runtime suspend where everything which is not used is powered down, sometimes with a slight delay


[1/14/2023 1:22 PM] andi15701
so in theory no suspend mechanism should be needed if the user is just reading stuff on the screen


[1/14/2023 1:24 PM] andi15701
at least if e.g. wifi is turned off


[1/14/2023 1:24 PM] andi15701
one thing which might consume unneeded power might be the console


[1/14/2023 1:25 PM] andi15701
in some cases such can be the last user of some power-expensive clocks


[1/14/2023 1:30 PM] andi15701
some serial drivers have mechanisms to have a separate wakeup irq, which would just detect level change in a less power-consuming way


[1/14/2023 1:31 PM] andi15701
so it can be turned off by that runtime suspend mechanism and wake up (and loose one character) if there is a level change


[1/14/2023 1:37 PM] andi15701
of curse if some real suspend is done, console should be fully turned off


[1/14/2023 4:48 PM] szybet
it is i think, RX and TX go UP in the state for some reason


[1/14/2023 4:49 PM] szybet
did you measure whats the diffrence of turned on / off serial console?


[1/14/2023 4:49 PM] szybet
its not like wifi, when spikes can get up to 300 mA


[1/14/2023 5:15 PM] andi15701
on other devices I have seen like 30mA


[1/14/2023 5:15 PM] andi15701
and even with mainline I see around 5mA in suspend, 25mA in idle (without suspend)


[1/14/2023 5:15 PM] szybet
woa, thats a lot


[1/14/2023 5:16 PM] andi15701
it is not the actual state of the lines


[1/14/2023 5:16 PM] szybet
its the logic inside cpu, i know


[1/14/2023 5:17 PM] andi15701
it is some clock + pll+ stuff, deriving the clocks for recognizing the bits from something high frequency


[1/14/2023 5:17 PM] andi15701
listening for simple gpios is cheaper


[1/14/2023 5:18 PM] szybet
so the question is does linux know how to do that on those cpus? thats pretty low level


[1/14/2023 5:18 PM] szybet
also every cpu is diffrent


[1/14/2023 5:18 PM] andi15701
it knows how to turn off for suspend


[1/14/2023 5:19 PM] andi15701
probably easy to implement that for runtime, too


[1/14/2023 5:19 PM] szybet
maybe its not independent for the suspend mechanism soo


[1/14/2023 5:19 PM] szybet
🥴


[1/14/2023 5:20 PM] szybet
***easy***


[1/14/2023 5:24 PM] andi15701
well, I know where the folks maintaining the imx driver are lurking around on the FOSDEM


[1/14/2023 5:25 PM] andi15701
I know personally one guy trying to generalize serial runtime suspend stuff


[1/14/2023 5:25 PM] andi15701
so I am probably not alone on that venture


[1/14/2023 6:11 PM] szybet
as you are on it, what about porting it to older kernels?


[1/14/2023 6:20 PM] andi15701
on top of ntx mess with strange power management stuff sprinkled all over the plate?


[1/14/2023 6:20 PM] andi15701
well, rather adding some more devicetrees to new kernels


[1/14/2023 6:29 PM] szybet
:(


[1/14/2023 8:40 PM] andi15701
well, I would not rule that out, but probably first get such thing into mainline


[1/14/2023 8:40 PM] andi15701
so it gets reviewed


[1/14/2023 9:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20230114_212032-60EE0.mp4


[1/14/2023 9:21 PM] szybet
arround 4 seconds


[1/14/2023 9:21 PM] szybet
too many screen refreshes sadly


[1/14/2023 9:21 PM] szybet
but i can live with it


[1/14/2023 11:35 PM] szybet
@tux-linux 
1. Im sending you those readers updates for you to if there is something wrong, say it now
2. Also im informing you of a feature im adding: to the left of "settings" button in reader will be time added and to the right battery percantego. obviously as an option. the question is if this could replace the "show always status bar" because its simply too big


[1/14/2023 11:45 PM] tux_linux
2. maybe the option exists because it is too big for some users?


[1/14/2023 11:46 PM] tux_linux
I do not like this idea


[1/14/2023 11:46 PM] szybet
what


[1/14/2023 11:47 PM] tux_linux
if it is an option, maybe it's because that
some users may like it
we don't decide that for everyone


[1/14/2023 11:47 PM] szybet
okay


[1/14/2023 11:47 PM] szybet
sure


[1/14/2023 11:47 PM] szybet
so i will leave it alone


[1/14/2023 11:47 PM] tux_linux
1. You said not to look or think about your stuff
so I will do that
it is too overwhelming for me now


[1/14/2023 11:48 PM] szybet
only looking at videos / photos


[1/14/2023 11:48 PM] szybet
*not to look or think about your stuff* - **i meant code**


[1/14/2023 11:48 PM] tux_linux
what i can tell is that there aren't enough margins on your screen


[1/14/2023 11:48 PM] szybet
i tell you what to focus on


[1/14/2023 11:49 PM] tux_linux
refreshes?


[1/14/2023 11:49 PM] tux_linux
does it refresh when you turn the page ?


[1/14/2023 11:49 PM] szybet
speed


[1/14/2023 11:49 PM] tux_linux
and what did you change underneath


[1/14/2023 11:50 PM] szybet
this video is only about speed, this isin't even implemented


[1/14/2023 11:50 PM] szybet
everything


[1/14/2023 11:50 PM] tux_linux
.


[1/14/2023 11:50 PM] tux_linux
what does everything mean


[1/14/2023 11:50 PM] tux_linux
how did you find total pages number


[1/14/2023 11:51 PM] szybet
it launches a second thread, requests the book, in this time it renders the gui / everything at start and then grabs the page, and then next / previous page is rendered


[1/14/2023 11:51 PM] szybet
i already said that


[1/14/2023 11:51 PM] tux_linux
ok what if i decide do go to a specific page right away


[1/14/2023 11:52 PM] tux_linux
or if i adjust font size and you have to include previous or next page in it


[1/14/2023 11:52 PM] szybet
mutex -> bool -> it stops rendering pages and focuses on what you want


[1/14/2023 11:53 PM] tux_linux
and what will you do when the font changes


[1/14/2023 11:53 PM] szybet
font size is managed by mutool, in that way the text will fit always, so it will simply call to overwrit the current page


[1/14/2023 11:54 PM] szybet
call one sneaky rust function that manages this


[1/14/2023 11:54 PM] szybet
it will shift, we can do nothing about it


[1/14/2023 11:54 PM] szybet
we can only "adjust" where we were


[1/14/2023 11:55 PM] tux_linux
then what if font size is set to 12 and you change it to 3
how will it handle this
remember that it is recursive
if you are at page 999, it might segfault because there aren't enough pages if you set it to a lower font size
if you are at page 999 and change font size up or down, it has to apply that font size from the beginning, so page 999 might be actually whole chapters away from what the reader was initially on


[1/15/2023 12:02 AM] szybet
this

1. in mutool, we can get the last page, but we can't know the number of it ( freaking stupid! ) so to find the page number i will quess 9999999, then 1000, if those are the same, it means there are 1000 or less pages in this books, and then 500 and 1000 and so on. so it won't segfault, we just need to know the last page, and then look up the phrase that was before the change. it will take time, but it will be optional ( we can just say you shifted to the last page )
2. already explained


[1/15/2023 12:02 AM] szybet
this is better than every page wasting / using too much 1/5 of the screen


[1/15/2023 12:03 AM] szybet
you set it once, you are happy


[1/15/2023 12:03 AM] tux_linux
ok


[1/15/2023 12:04 AM] szybet
i didn't expected you to accept such an crazy idea but nice😄


[1/15/2023 12:05 AM] tux_linux
i thought of the solution while you were writing but I wanted to see if you would have said the same one


[1/15/2023 12:05 AM] tux_linux
*guess


[1/15/2023 12:06 AM] szybet
btw %d doesn't work, which would be a perfect solution

{Attachments}
/mnt/data/projects/git/conversations/media/image-2E38C.png


[1/15/2023 12:07 AM] szybet
also `    preserve-images: keep images in output` possible image support


[1/15/2023 12:07 AM] szybet
if mutool really preservers it


[1/15/2023 12:07 AM] tux_linux
if qt can read them


[1/15/2023 12:09 AM] szybet
sanki already support images


[1/15/2023 12:09 AM] szybet
also uses qtextedit


[1/15/2023 5:02 PM] tux_linux
did you get around gray background yet?


[1/15/2023 5:25 PM] szybet
reader? yes?


[1/15/2023 9:40 PM] szybet
fucking qt
Qt::QueuedConnection doesn't work, so slots across threads don't work too


[1/15/2023 9:42 PM] szybet
actually until RequestThread->start(); isin't called


[1/15/2023 9:42 PM] szybet
im so stupid


[1/15/2023 9:43 PM] szybet
also: i writed this one line rant, the idea got into my head and thats it
https://en.wikipedia.org/wiki/Rubber_duck_debugging
this is relatable

{Embed}
https://en.wikipedia.org/wiki/Rubber_duck_debugging
Rubber duck debugging
In software engineering, rubber duck debugging (or rubberducking) is a method of debugging code by articulating a problem in spoken or written natural language. The name is a reference to a story in the book The Pragmatic Programmer in which a programmer would carry around a rubber duck and debug their code by forcing themselves to explain it, l...
/mnt/data/projects/git/conversations/media/Rubber_duck_assisting_with_debugging-D64CB.jpg


[1/15/2023 11:54 PM] aryetis
Hmmmm

{Attachments}
/mnt/data/projects/git/conversations/media/1673823240602-EDD03.jpg

{Reactions}
😄 

[1/16/2023 4:07 AM] ninuje
^ Yup. Writing up a detailed bug-report for something you might not have time to work on right now and/or to get someone else's advice on; and, bam; it makes sense.


[1/16/2023 7:18 AM] szybet
\> detailed
\> fucking qt


[1/16/2023 7:18 AM] szybet
😄


[1/16/2023 11:02 PM] szybet
you mean full black white refresh?


[1/17/2023 12:20 AM] tux_linux
Yes


[1/17/2023 7:15 AM] szybet
and how dod you do that


[1/17/2023 7:16 AM] szybet
to avoid that


[1/17/2023 12:00 PM] szybet
hmm
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.32.1/_install-n306/opt/key.sqsh

here are private keys located, am i right?

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/busybox-1.32.1/_install-n306/opt/key.sqsh
kernel/key.sqsh at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[1/17/2023 12:19 PM] tux_linux
I don't know
It just worked before


[1/17/2023 12:19 PM] tux_linux
Only public?


[1/17/2023 1:06 PM] szybet
oh no


[1/17/2023 1:07 PM] szybet
okay i was confused


[1/17/2023 5:02 PM] szybet
@tux-linux can you record how non full screen refreshes work on your devices


[1/17/2023 5:02 PM] szybet
i can get any non full, even with the stock reader


[1/17/2023 5:02 PM] szybet
hmm ;/


[1/17/2023 5:05 PM] szybet
did my commits to reader did this?...

obviously they did, nice...


[1/17/2023 5:20 PM] tux_linux
Probably
It's very fragile
You change one thing and it fails to work


[1/17/2023 5:24 PM] szybet
well it was the cursor


[1/17/2023 5:25 PM] szybet
for notes app i need to figure out anyway how to prevent that


[1/17/2023 5:25 PM] szybet
can i remove unneceserry bloat for inkbox qt platform plugin


[1/17/2023 5:25 PM] szybet
like


[1/17/2023 5:25 PM] szybet
wifi


[1/17/2023 5:26 PM] tux_linux
Yes


[1/17/2023 5:26 PM] tux_linux
But be careful


[1/17/2023 10:49 PM] szybet
how big is eink power draw ( Spikes )? and ntx cpus power spikes


[1/17/2023 10:50 PM] szybet
maybe someone knows already or i will need to use the osciloscope


[1/17/2023 11:11 PM] ninuje
Depends on the screen, and on what's shown on screen


[1/17/2023 11:11 PM] ninuje
(so, yes, fire up the oscillo)


[1/17/2023 11:12 PM] ninuje
The more power-hungry pattern would be flashing a tight checkerboard


[1/18/2023 9:04 AM] andi15701
the question is what kind of spikes you want to measure, maybe LINMON of the rc5t619 might already enough to measure something


[1/18/2023 9:04 AM] andi15701
or working with usb only and having some current limitation/measurement there


[1/18/2023 10:15 AM] szybet
from usb port  exactly


[1/18/2023 10:16 AM] andi15701
with battery unplugged


[1/18/2023 10:52 AM] szybet
with battery plugged in


[1/18/2023 10:53 AM] szybet
it shouldnt use battery anyway?


[1/18/2023 11:39 PM] andi15701
maybe if spikes goes a above usb max current, but I do not think so


[1/19/2023 6:18 AM] szybet
yea it doesnt go above 500mA of usb limit


[1/19/2023 6:18 AM] szybet
eink gives almost perfect pulses of it


[1/24/2023 5:10 PM] szybet
@tux-linux i now know why i wasn't able to compile qalculate


[1/24/2023 5:11 PM] szybet
and many other apps


[1/24/2023 5:11 PM] szybet
in the kernel repo, the toolchain is outdated which gives glibc errors often


[1/24/2023 5:11 PM] szybet
and i have been using it instead of my built with qt one


[1/24/2023 5:11 PM] szybet
🥴


[1/27/2023 2:06 PM] szybet
frontlight, key support?


[1/27/2023 2:07 PM] szybet
those things are managed by ipd, and frontlight is also higher level in reader / inkbox and our function are used


[1/27/2023 2:08 PM] szybet
let the platform plugin be used for low level stuff that can't be used in higher level software, like input / screen


[1/27/2023 2:09 PM] szybet
the frontlight control code is cool, we should copy it later if we were cleaning code


[1/27/2023 2:13 PM] szybet
also, what does actually inkbox use from this: https://github.com/Szybet/qt5-kobo-platform-plugin/blob/a5357d87682b6efeac31615ccf6b60f66206aa38/src/kobodevicedescriptor.cpp#L281


[1/27/2023 2:17 PM] szybet
+ i dont see any support for kindle, how did you do that?


[1/27/2023 2:17 PM] szybet
already removed, a bit rhetorical question


[1/27/2023 2:18 PM] szybet
@tux-linux


[1/27/2023 6:09 PM] tux_linux
It's important for user apps


[1/27/2023 6:09 PM] tux_linux
Don't remove it


[1/27/2023 6:09 PM] tux_linux
It's really simple, you just have to change the FBInk target iirc, I didn't create any branch for that


[1/27/2023 6:24 PM] szybet
i mean all of it? i dont think we have those scripts  / paths


[1/27/2023 6:28 PM] tux_linux
Yes I did add/write them
Check for yourself


[1/27/2023 6:29 PM] tux_linux
Otherwise it messes up screen orientation and touch doesn't work for some devices


[1/27/2023 6:32 PM] szybet
ok


[1/27/2023 6:33 PM] szybet
also i fixed screen orientation


[1/27/2023 6:33 PM] szybet
now it listens to the write to sys


[1/27/2023 6:33 PM] szybet
its not fixed in vertical


[1/27/2023 9:42 PM] tux_linux
What?


[1/27/2023 9:42 PM] tux_linux
Oh ok


[1/28/2023 12:25 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230128_002258_DRO-7586D.jpg


[1/28/2023 12:26 AM] szybet
at low level, qt with qpaint is able to write to the epdc as fast as plato


[1/28/2023 12:26 AM] szybet
this might interest you


[1/28/2023 12:49 AM] tux_linux
You never tried scribble did you


[1/28/2023 12:49 AM] szybet
i did and it was slow


[1/28/2023 12:49 AM] szybet
:D


[1/28/2023 12:50 AM] tux_linux
It's because it painted gray


[1/28/2023 12:50 AM] szybet
i tryied diffrent colors


[1/28/2023 12:50 AM] tux_linux
In black it was faster


[1/28/2023 12:50 AM] szybet
naaah


[1/28/2023 12:51 AM] tux_linux
And Nia is just one kobo model


[1/28/2023 12:52 AM] szybet
every device is just one model


[1/28/2023 12:53 AM] szybet
https://tenor.com/view/surprised-cat-mind-blown-gif-13269676

{Embed}
https://tenor.com/view/surprised-cat-mind-blown-gif-13269676
/mnt/data/projects/git/conversations/media/surprised-cat-C0D34.png


[1/28/2023 5:46 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230119_2317475362-2A688.jpg

{Reactions}
😻 (2) 

[1/28/2023 10:08 PM] szybet
there is supposed to be a progress bar while booting, right?


[1/28/2023 10:40 PM] tux_linux
Yes


[1/28/2023 10:40 PM] szybet
and it is on all devices, with the new c init yes?


[1/28/2023 10:41 PM] tux_linux
Yes


[1/28/2023 10:43 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-F71E1.png


[1/28/2023 10:43 PM] szybet
🥴


[1/29/2023 10:59 AM] szybet
@tux-linux have you tried nix packages instead of alpine on inkbox?


[1/29/2023 11:35 AM] tux_linux
Current system is complicated enough so that it won't change
And guess what, it works
Do not try
Thanks


[1/29/2023 11:56 AM] szybet
🥴


[1/29/2023 12:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/uh-D76D9.png


[1/29/2023 12:37 PM] szybet
fbgrab doesn't like rotation, eh?


[1/31/2023 9:29 PM] szybet
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/pull/1

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/pull/1
Overall improvements, for changes look to the changed readme by Szy...
/mnt/data/projects/git/conversations/media/1-E0037


[1/31/2023 9:29 PM] szybet
@tux-linux ***hey***

{Reactions}
👍 

[1/31/2023 9:32 PM] szybet
some notes;
- every line of english was checked by chatgpt
- don't try to understand mouse support code, thanks
- test it on 2 different devices if it even launches, if yes it's good
- deleted some unused stuff - also funnier this caused the app to launch faster ( eink and cpu usage spiked at the same time ), and with additionall magic caused a short detection on my niAudio PCB, so yea... it launches faster
- also repaired some if else statements to inkbox guidelines


[1/31/2023 9:37 PM] szybet
and Rain92 is a wizard and you can't prove me wrong

{Reactions}
👍 

[2/3/2023 9:27 AM] szybet
@tux-linux what do you think about many apps at the same time:
an app is running, with the power button you are returning to an app chooser, the previous app is freezed, with clicking the power button the ereader goes to sleep, and from this screen you can run new apps, return to the old ones, stop running, look up ram and cpu consumption, battery wifi and time


[2/3/2023 9:28 AM] szybet
we could even hack in the inkbox repo to use the same classes from it


[2/3/2023 9:31 AM] szybet
user apps & inkbox


[2/3/2023 9:32 AM] szybet
Also when do you plan to accept this ~~or do anything with inkbox~~


[2/3/2023 9:43 AM] szybet
github send you an email for access for me in github for scalar. its a matric bot, i want it please accept it ~~why i dont have permissions tho~~ if you want i can add it to the matrix server too


[2/3/2023 2:43 PM] tux_linux
https://www.quebec.ca/en/education/cegep/studying/admission
I am there

{Embed}
https://www.quebec.ca/en/education/cegep/studying/admission
Admission
Admission requirements for a college program in Québec and how to register.


[2/3/2023 2:46 PM] szybet
well i went to a technical school so i will go to university next year, so i have time till that


[2/3/2023 2:46 PM] szybet
can i get access then? to the entire organisation on github?


[2/3/2023 2:46 PM] szybet
+ discord and matrix channel admins


[2/3/2023 2:47 PM] szybet
to avoid the project dying


[2/3/2023 2:47 PM] szybet
atro will soon return, i hope to something


[2/3/2023 2:48 PM] szybet
i think you can trust me with privileges, those don't require english


[2/3/2023 3:25 PM] tux_linux
I approved scalar


[2/3/2023 3:28 PM] szybet
and the rest


[2/3/2023 3:28 PM] szybet
?


[2/3/2023 3:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-AD87E.png


[2/3/2023 3:38 PM] szybet
bruh, i need more access for this


[2/4/2023 12:34 PM] szybet
?


[2/17/2023 6:01 PM] tux_linux
When the company is so desperate it can't even vouch for its own software

{Attachments}
/mnt/data/projects/git/conversations/media/image-3FCAA.png


[2/17/2023 6:05 PM] szybet
on the other end, it's cool


[2/17/2023 6:05 PM] szybet
imagine that iphone users wouldn't need to wait for home page widgets 10 years because there was an unnoficial launcher


[2/17/2023 6:12 PM] tux_linux
yes


[2/17/2023 8:34 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230217_203340_DRO-9D53D.jpg


[2/17/2023 8:34 PM] szybet
nia


[2/17/2023 8:34 PM] szybet
nia keyboard


[2/17/2023 8:34 PM] tux_linux
Good


[2/17/2023 8:35 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230217_193527540-92C5F.jpg


[2/17/2023 8:35 PM] szybet
get a 3d printer


[2/17/2023 8:36 PM] szybet
and you will have an almost cyber deck


[2/18/2023 2:35 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/lshw-D22E8


[2/18/2023 2:36 PM] szybet
compiled for qt root


[2/18/2023 4:32 PM] tux_linux
Starting

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230218_153118402-DA48A.jpg


[2/18/2023 4:33 PM] szybet
it's not native linux on boox, right?


[2/18/2023 4:40 PM] tux_linux
vnc + raspberrypi


[2/18/2023 4:41 PM] tux_linux
you do not include the mouse cursos by default right ?


[2/18/2023 4:41 PM] tux_linux
*cursor


[2/18/2023 4:41 PM] szybet
`mouse` needs to be added to the arguments


[2/18/2023 4:41 PM] szybet
keyboard too


[2/18/2023 4:42 PM] tux_linux
ok


[2/18/2023 4:44 PM] tux_linux
`motiondebug`->`motionDebug`


[2/18/2023 4:44 PM] szybet
it's an argument to an app


[2/18/2023 4:45 PM] tux_linux
`forcemode`->`forceMode`


[2/18/2023 4:45 PM] tux_linux
and?


[2/18/2023 4:45 PM] szybet
don't


[2/18/2023 4:45 PM] tux_linux
you're not following the guidelines


[2/18/2023 4:45 PM] tux_linux
especially for forceMode


[2/18/2023 4:46 PM] szybet
only for force mode


[2/18/2023 4:46 PM] szybet
it's for variables, not arguments


[2/18/2023 4:46 PM] tux_linux
variables related to arguments should still be in camelCase


[2/18/2023 4:47 PM] szybet
good to know, now


[2/18/2023 4:47 PM] tux_linux
**variables** 😉


[2/18/2023 4:47 PM] tux_linux
they are still variables even if thy are associated to an argument


[2/18/2023 4:48 PM] szybet
i wanted it to be the same exact name but sure


[2/18/2023 4:50 PM] tux_linux
will you change it or I do it


[2/18/2023 4:50 PM] szybet
your decission


[2/18/2023 4:50 PM] tux_linux
just push a commit and i will pull it
I haven't changed anything yet


[2/18/2023 4:50 PM] tux_linux
look for camelCase everywhere


[2/18/2023 4:59 PM] szybet
done


[2/18/2023 5:07 PM] tux_linux
thanks


[2/18/2023 5:42 PM] tux_linux
i pushed minor fixes but I need to check if it still works and compiles fine for kindle


[2/22/2023 4:05 AM] tux_linux
did you find why it didn't work?


[2/22/2023 11:35 AM] szybet
sometimes it goes slow, sometimes really fast so i didn't saw it that time. those diffrences are propably because of my sd card expander


[2/22/2023 11:35 AM] szybet
so yea, resolved


[2/25/2023 5:23 PM] tux_linux
merged


[2/25/2023 5:30 PM] szybet
cool


[2/25/2023 5:30 PM] szybet
feathernotes is ready too


[2/25/2023 5:30 PM] szybet
i will convert it to a user app


[2/25/2023 5:31 PM] tux_linux
how does it look


[2/25/2023 5:31 PM] szybet
+ for example app could request orientation


[2/25/2023 5:31 PM] szybet
im finishing the hardware, i will publish everything soon, with a video too


[2/25/2023 5:33 PM] tux_linux
did you change the icons ?


[2/25/2023 5:40 PM] szybet
Yea


[2/25/2023 5:40 PM] szybet
For some reason this guy implemented his own svg engine or something


[2/25/2023 5:40 PM] szybet
I just removed it and used QIcon


[2/25/2023 5:40 PM] szybet
🥴


[2/27/2023 5:47 AM] szybet
@tux-linux i want access to more things in an user app:
- input devices, i will just mount bind the entire folder, do a chmod 777 on it

as a request:
- USB sys devices, chmod 777 on them
- the same with I2C, brightness control

I will do that when everything is mounted, and warnings will be showed. Also a option to disable those warnings will be added

Are you fine with this plan?


[2/27/2023 5:51 AM] szybet
Also debugfs will be mounted by default


[2/27/2023 6:29 AM] szybet
Also inkbox in landscape mode is not horrible


[2/27/2023 6:29 AM] szybet
If we moved the menu to the left it would be good


[2/27/2023 6:39 PM] szybet
https://github.com/Szybet/gui-bundle/tree/main/content/qt/plugins/platforms

{Embed}
https://github.com/Szybet/gui-bundle/tree/main/content/qt/plugins/platforms
gui-bundle/content/qt/plugins/platforms at main · Szybet/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Szybet/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-51239


[2/27/2023 6:39 PM] szybet
update this too


[2/27/2023 6:39 PM] szybet
i mean in the main repo


[2/27/2023 6:54 PM] szybet
i did for my repo


[2/27/2023 6:54 PM] szybet
just accept the pull request


[2/27/2023 8:09 PM] szybet
@NiLuJe looking through fbgrab code, there is a bit of rotation. Do you know what is going on?


[2/28/2023 2:20 PM] tux_linux
it does not belong there


[2/28/2023 2:22 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/b4f2a811935d412787991fe68db7d3ce178a3cba/etc/init.d/inkbox_gui#L48-L54

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/b4f2a811935d412787991fe68db7d3ce178a3cba/etc/init.d/inkbox_gui
rootfs/inkbox_gui at b4f2a811935d412787991fe68db7d3ce178a3cba · Kob...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-EFA33


[2/28/2023 2:23 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/tree/master/lib/qt5-plugins

{Embed}
https://github.com/Kobo-InkBox/rootfs/tree/master/lib/qt5-plugins
rootfs/lib/qt5-plugins at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-EFA33


[2/28/2023 2:31 PM] szybet
What?


[2/28/2023 2:31 PM] szybet
There is a file


[2/28/2023 2:32 PM] szybet
It will overwrite this one in rootfs


[2/28/2023 2:32 PM] szybet
Oh ok


[2/28/2023 2:32 PM] szybet
Bruh


[2/28/2023 2:37 PM] tux_linux
You used the new platform plugin for the Nia? The one with FBInk?


[2/28/2023 2:38 PM] tux_linux
Some devices don't like that one
So except for the Glo HD & Kindle, only the Nia will support mouse and keyboard
(they use the one with an older commit without FBInk)


[2/28/2023 3:01 PM] tux_linux
Done, updated


[2/28/2023 3:02 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/1879e55595bab83c6f9b702bf57ec8fe91351ce1

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/1879e55595bab83c6f9b702bf57ec8fe91351ce1
Update some Qt platform plugins · Kobo-InkBox/rootfs@1879e55


[2/28/2023 3:03 PM] tux_linux
is it done?

{Attachments}
/mnt/data/projects/git/conversations/media/image-EE46A.png


[2/28/2023 3:05 PM] tux_linux
what are we doing with this?

{Attachments}
/mnt/data/projects/git/conversations/media/image-B9166.png


[2/28/2023 3:06 PM] tux_linux
if you submit a PR for gui-bundle, start from my commits with a fresh repo


[2/28/2023 3:12 PM] szybet
What? Yes? The one i edited? What?


[2/28/2023 3:13 PM] szybet
Whaaaat


[2/28/2023 3:13 PM] szybet
There are many platform plugins?


[2/28/2023 3:14 PM] szybet
There is one without fbink?


[2/28/2023 3:14 PM] szybet
I mean - keyboard is litterally one line of code to add. Mouse is harder, but it also isin't fbink dependent - could be ported


[2/28/2023 3:14 PM] szybet
So if someone really wants, why not


[2/28/2023 3:27 PM] szybet
yea, idk what you are waiting for


[2/28/2023 3:27 PM] szybet
i even integrated the rust sketch app with feathernotes


[2/28/2023 3:27 PM] szybet
if you really want kindle support on it - go to plato creator to port plato to that device


[2/28/2023 3:27 PM] szybet
if not, then there is a reason we added a device compability check


[2/28/2023 3:34 PM] tux_linux
Where is it


[2/28/2023 3:47 PM] szybet
you mean?


[2/28/2023 6:24 PM] ninuje
There... isn't? fbgrab will dump the fb as-is, which may not match the actual orientation ;o)


[2/28/2023 6:30 PM] szybet
well okay


[2/28/2023 6:31 PM] szybet
a work arround is to change the rotation before and after fbgrab


[2/28/2023 6:38 PM] ninuje
that won't change the fb's content unless you also redraw in between


[2/28/2023 6:38 PM] ninuje
The better approach is to dump and rotate *that* as needed


[2/28/2023 6:39 PM] ninuje
if there's rotation at play, you most likely already know *how* it's going to be rotated


[2/28/2023 6:40 PM] ninuje
rota -> dump without a redraw will dump a scrambled mess because the layout will have changed but not the buffer's content


[2/28/2023 6:41 PM] szybet
thats the point, to capture the rotated content


[2/28/2023 6:41 PM] szybet
say that to qt, won't work


[2/28/2023 6:42 PM] szybet
well that's sad


[2/28/2023 6:42 PM] ninuje
If it's qt, just dump your QScreen backing buffer


[2/28/2023 6:42 PM] ninuje
that's probably not rotated


[2/28/2023 6:42 PM] ninuje
unless there's no buffering and it's mapped to the fb directly


[2/28/2023 6:44 PM] szybet
it's for an external small app that freezes the current app, and draws above it


[2/28/2023 6:44 PM] ninuje
(But it might have an easier to track idea of *how* it's rotated, regardless?)


[2/28/2023 6:44 PM] szybet
communicating with whatever app is below ( xorg, other plato magic ) to capture a ss is overkill


[2/28/2023 6:45 PM] szybet
you mean? i know it's shifted


[2/28/2023 6:45 PM] ninuje
I'd have to check the doc, but the subclass or base class probably has a rotation property or something?


[2/28/2023 6:46 PM] szybet
yes? `/sys/class/graphics/fb0/rotate`


[2/28/2023 6:46 PM] szybet
you mean this?


[2/28/2023 6:46 PM] ninuje
No, the actual Qt class


[2/28/2023 6:46 PM] szybet
i modified the platform plugin to watch for this file


[2/28/2023 6:47 PM] szybet
but it has, but i still don't understand your point


[2/28/2023 6:47 PM] szybet
i want an image of the current screen, to set it as the background of the qt app


[2/28/2023 6:47 PM] ninuje
https://doc.qt.io/qt-6/qscreen.html#nativeOrientation-prop


[2/28/2023 6:47 PM] ninuje
(except not qt6, but whatever ;p)


[2/28/2023 6:48 PM] szybet
i could dump the content, then only refresh the qt app, but isin't there an easier way with fbgrab


[2/28/2023 6:48 PM] ninuje
That's what FBInk's dump/restore API is designed for


[2/28/2023 6:49 PM] szybet
yes, fbgrab does exactly that


[2/28/2023 6:49 PM] szybet
and it fails if the screen is rotated


[2/28/2023 6:49 PM] ninuje
FBInk embeds metadata in the dump


[2/28/2023 6:49 PM] ninuje
If the rotation don't match, it'll shout at you


[2/28/2023 6:50 PM] ninuje
If you're not *drawing* at the fb's current rotation, you're doing something wrong


[2/28/2023 6:51 PM] ninuje
(e.g., pickel, and as such the Kobo boot animation, *is* doing it wrong)


[2/28/2023 6:51 PM] szybet
?...


[2/28/2023 6:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/what-F02C9.png


[2/28/2023 6:52 PM] szybet
it worked now?


[2/28/2023 6:52 PM] szybet
there is even color


[2/28/2023 6:52 PM] szybet
what is going on


[2/28/2023 7:59 PM] tux_linux
W o O


[2/28/2023 10:47 PM] szybet
```
KoboKb: Attempting to capture input...
KoboKb: Capture keyboard input error: -1
device: "" 0 
```
can't figure this out


[2/28/2023 10:47 PM] szybet
what is kobokb


[2/28/2023 10:47 PM] szybet
kobo keyboard


[2/28/2023 10:47 PM] szybet
from where is this code


[2/28/2023 10:47 PM] tux_linux
`rg KoboKb`?


[2/28/2023 10:48 PM] szybet
?


[2/28/2023 11:07 PM] szybet
entire dev needs to be mounted


[2/28/2023 11:07 PM] szybet
i cant figure out it in another way, sadly


[2/28/2023 11:07 PM] szybet
rooted device will be needed for this


[3/1/2023 12:11 AM] tux_linux
strace


[3/1/2023 12:11 AM] tux_linux
See what it accesses


[3/1/2023 2:37 AM] tux_linux
Update system will move to initrd instead of recoveryfs
Will try to write it as a function in C init


[3/1/2023 6:15 AM] szybet
Maybe cpp or rust?


[3/1/2023 6:15 AM] szybet
To make it easier


[3/1/2023 6:15 AM] szybet
As you want


[3/1/2023 6:15 AM] szybet
¯\_(ツ)_/¯


[3/1/2023 6:34 AM] szybet
Even if, how do I mount bind only /dev/uinput for example


[3/1/2023 6:34 AM] szybet
You can only bind directories


[3/1/2023 6:35 AM] szybet
😤


[3/1/2023 6:35 AM] szybet
And mknod is weird.


[3/1/2023 2:02 PM] tux_linux
What?


[3/1/2023 2:05 PM] szybet
Yes?


[3/1/2023 2:05 PM] tux_linux
why


[3/1/2023 2:05 PM] szybet
It didnt work


[3/1/2023 2:05 PM] tux_linux
What didn't work


[3/1/2023 2:06 PM] szybet
Mount --bind /dev/uinput (thepathimwritingfrommyphone)/dev


[3/1/2023 2:07 PM] tux_linux
```
touch /mnt/dev/uinput
mount --bind /dev/uinput /mnt/dev/uinput
```


[3/1/2023 2:07 PM] szybet
I tried touching the file, then binding


[3/1/2023 2:07 PM] szybet
Idk, didnt worked


[3/1/2023 2:07 PM] szybet
I can try today too


[3/1/2023 2:07 PM] szybet
Yea this didnt worked


[3/1/2023 2:07 PM] tux_linux
Why do you need uinput


[3/1/2023 2:07 PM] szybet
It has input in the name


[3/1/2023 2:07 PM] szybet
and im desparate to make it work


[3/1/2023 2:08 PM] tux_linux
You need to emulate input devices from userspace ?


[3/1/2023 2:08 PM] szybet
You mean?


[3/1/2023 2:08 PM] tux_linux
Did you read this? https://kernel.org/doc/html/v4.12/input/uinput.html


[3/1/2023 2:09 PM] szybet
Yes


[3/1/2023 2:09 PM] szybet
And?


[3/1/2023 2:09 PM] szybet
Do you have any other ideas?


[3/1/2023 2:10 PM] tux_linux
Well, not sure it falls into the direct "input devices" category


[3/1/2023 2:10 PM] tux_linux
Use mknod


[3/1/2023 2:11 PM] tux_linux
It's not *that* bad


[3/1/2023 2:12 PM] szybet
It didnt work


[3/1/2023 2:12 PM] szybet
At all


[3/1/2023 2:17 PM] tux_linux
`mknod /tmp/uinput c 10 223`


[3/1/2023 2:17 PM] tux_linux
doesn't work?


[3/1/2023 2:19 PM] szybet
From where did you get this 10


[3/1/2023 2:19 PM] szybet
Proc devices?


[3/1/2023 2:20 PM] tux_linux
```
/ # ls /dev/uinput -shal
     0 crw-------    1 root     root       10, 223 Jan  1  1970 /dev/uinput
```


[3/1/2023 2:29 PM] szybet
Bruh


[3/1/2023 2:29 PM] szybet
C o o l


[3/1/2023 2:29 PM] szybet
I will try it, but i dont have much hopes

{Reactions}
👍 

[3/1/2023 2:30 PM] szybet
It still has nothing to do with usb input things


[3/1/2023 2:34 PM] tux_linux
I'm starting to think I should keep the update script as sh


[3/1/2023 2:34 PM] tux_linux
Maybe it's too dangerous to switch to C
the update script is reliable at the moment


[3/1/2023 2:34 PM] tux_linux
And C has plenty of points of failure everywhere


[3/1/2023 2:51 PM] szybet
Until its not cpp, rust, qt it wont be fluent for me to edit


[3/1/2023 2:51 PM] szybet
so your decission ( but yea, c is overkill )


[3/1/2023 2:51 PM] szybet
I dont like complicated shell scripts, the syntax kills me


[3/1/2023 2:51 PM] szybet
There is a reason im tossing out every script for the reader


[3/1/2023 2:54 PM] tux_linux
well honestly I think bash is the simplest way to go


[3/1/2023 2:55 PM] tux_linux
but the slowest


[3/1/2023 2:55 PM] tux_linux
I find it easier to understand than C


[3/1/2023 2:56 PM] szybet
In c you write ffunctions and then the logic is easy to understand


[3/1/2023 2:56 PM] szybet
In bash a simple if statement looks horrible


[3/1/2023 2:56 PM] szybet
But yea go with bash if you dont want any of them that i writed down


[3/2/2023 11:24 PM] szybet
```
Failed to open tty (No such file or directory)
qt.qpa.input: evdevtouch: Adding device at /dev/input/event1
KoboKb: Attempting to capture input...
KoboKb: Capture keyboard input error: -1
device: "" 0 
 screen: 1024 758 dpi: 260
qt.qpa.input: evdevtouch: Using device /dev/input/event1
qt.qpa.input: evdevtouch: /dev/input/event1: Protocol type A  (multi), filtered=no
qt.qpa.input: evdevtouch: /dev/input/event1: min X: 0 max X: 1024
qt.qpa.input: evdevtouch: overwriting touch x max: 758
qt.qpa.input: evdevtouch: /dev/input/event1: min Y: 0 max Y: 758
qt.qpa.input: evdevtouch: overwriting touch y max: 1024
qt.qpa.input: evdevtouch: /dev/input/event1: min pressure: 0 max pressure: 2048
qt.qpa.input: evdevtouch: /dev/input/event1: device name: elan-touch
Starting
qt.qpa.input: evdevtouch: Updating QInputDeviceManager device count: 1 touch devices, 0 pending handler(s)
```


[3/2/2023 11:24 PM] szybet
no chance...


[3/2/2023 11:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-B3684.txt


[3/2/2023 11:48 PM] szybet
line 435


[3/2/2023 11:48 PM] szybet
wtf


[3/2/2023 11:48 PM] szybet
ioctl(7, EVIOCGRAB, 0x1)                = -1 EBUSY (Resource busy)


[3/2/2023 11:49 PM] szybet
why doesit even try for event0


[3/2/2023 11:51 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-99CA5.txt


[3/2/2023 11:51 PM] szybet
and here is a working one


[3/2/2023 11:52 PM] szybet
line 690


[3/2/2023 11:53 PM] szybet
```
write(2, "qt.qpa.input: doing static devic"..., 69qt.qpa.input: doing static device discovery for  "/dev/input/event0"
) = 69
ioctl(8, EVIOCGBIT(EV_ABS, 12), [ 0 ])  = 8
ioctl(8, EVIOCGBIT(EV_KEY, 100), [KEY_F1]) = 96
ioctl(8, EVIOCGBIT(EV_REL, 4), [ 0 ])   = 4
close(8)                           
```


[3/2/2023 11:53 PM] szybet
here are even my logs...


[3/2/2023 11:53 PM] szybet
IS IT ||FUCKING|| USING THE WRONG PLATFORM PLUGIN


[3/3/2023 12:09 AM] szybet
Nicolas, how many platform plugins are out there? 😞


[3/3/2023 12:15 AM] szybet
now it has a segmentation fault...


[3/3/2023 12:15 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-E7635.txt


[3/3/2023 12:15 AM] szybet
because of tiime?


[3/3/2023 12:28 AM] tux_linux
3


[3/3/2023 3:17 AM] tux_linux
you're not alone in being desperate... kobo mini kernel stopped working for no apparent reason when i tried to update it tonight...
edit: so scary now it worked when compiled with another computer


[3/3/2023 5:05 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/d23883b964c3c99dd5f97f0d4807b28cad74e07c
https://github.com/Kobo-InkBox/kernel/commit/0f6a921b4b0f3f3c6380eb0a168e9b6aa477a2d0

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/d23883b964c3c99dd5f97f0d4807b28cad74e07c
Update system redesign · Kobo-InkBox/rootfs@d23883b
Allow updating the root filesystem without having to copy it in tmpfs beforehand.
/mnt/data/projects/git/conversations/media/d23883b964c3c99dd5f97f0d4807b28cad74e07c-3EDEF

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/0f6a921b4b0f3f3c6380eb0a168e9b6aa477a2d0
Update system redesign · Kobo-InkBox/kernel@0f6a921
Allow updating the root filesystem without having to copy it in tmpfs beforehand.
/mnt/data/projects/git/conversations/media/0f6a921b4b0f3f3c6380eb0a168e9b6aa477a2d0-09A8F


[3/3/2023 8:09 AM] szybet
I already was there... Use debian docker


[3/3/2023 8:10 AM] szybet
Explain


[3/3/2023 8:10 AM] szybet
One is for kindle as of what i know


[3/3/2023 8:12 AM] szybet
Why there are 3?


[3/3/2023 1:35 PM] tux_linux
Did you notice `mount --move` ?


[3/3/2023 1:39 PM] szybet
yes


[3/3/2023 1:39 PM] szybet
and


[3/3/2023 1:39 PM] szybet
I won't say that you should write a wiki article about how it works, but at least explain it to me


[3/3/2023 1:40 PM] szybet
especially, how did you fixed the low ram limit


[3/3/2023 1:40 PM] tux_linux
It overwrites rootfs.squashfs directly from initrd
Takes it from the archive


[3/3/2023 1:40 PM] szybet
will it work? when i do it, the system crashes and it doesnt have access to any commands anymore


[3/3/2023 1:41 PM] tux_linux
Read a bit and try to understand ?
BASEPATH is the update package mountpoint
Update package contains rootfs.squashfs*


[3/3/2023 1:42 PM] tux_linux
It works here


[3/3/2023 1:42 PM] szybet
can you call sync after this?


[3/3/2023 1:42 PM] tux_linux
Already done?


[3/3/2023 1:43 PM] szybet
yea, for me it's always sync: command not found


[3/3/2023 1:43 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/initrd-fifo#L36

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/initrd-fifo
kernel/initrd-fifo at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[3/3/2023 1:43 PM] szybet
so you simply overwrite the squashes... But where do you store the updates before it


[3/3/2023 1:43 PM] tux_linux
It's because you are running it from rootfs


[3/3/2023 1:44 PM] tux_linux
It's mounted elsewhere


[3/3/2023 1:44 PM] tux_linux
I move the package mountpoint


[3/3/2023 1:44 PM] tux_linux
To initrd


[3/3/2023 1:44 PM] szybet
where is it stored


[3/3/2023 1:44 PM] tux_linux
The package?


[3/3/2023 1:44 PM] szybet
i dont care where it's mounted


[3/3/2023 1:44 PM] szybet
yes


[3/3/2023 1:44 PM] szybet
oh ok, i got confused


[3/3/2023 1:45 PM] tux_linux
`/data/onboard/.inkbox/inkbox-update-2.0.upd.isa`


[3/3/2023 1:45 PM] szybet
soooo the user needs to make space for it


[3/3/2023 1:46 PM] szybet
good


[3/3/2023 1:47 PM] szybet
what about OTA updates?


[3/3/2023 1:47 PM] szybet
too?


[3/3/2023 1:47 PM] tux_linux
Well... yes, obviously


[3/3/2023 1:47 PM] tux_linux
It's downloaded to the same location


[3/3/2023 1:47 PM] szybet
it's a compromise im willing to accept because it makes the most sense


[3/3/2023 1:47 PM] tux_linux
What compromise


[3/3/2023 1:47 PM] szybet
well then we need a check in gui if space is there


[3/3/2023 1:48 PM] szybet
that the user needs to move his books to do this


[3/3/2023 1:48 PM] tux_linux
Oh yes maybe for ota


[3/3/2023 1:48 PM] tux_linux
It's deleted afterwards


[3/3/2023 1:48 PM] szybet
not maybe, for sure ;D


[3/3/2023 1:48 PM] tux_linux
Kobo update also works similar to this


[3/3/2023 1:48 PM] tux_linux
At least for the user part


[3/3/2023 1:48 PM] szybet
idk, never used it

{Reactions}
👍 

[3/3/2023 1:51 PM] szybet
thats it for update?


[3/3/2023 1:51 PM] tux_linux
No


[3/3/2023 1:51 PM] szybet
oh, the p4


[3/3/2023 1:51 PM] szybet
oof


[3/3/2023 1:51 PM] tux_linux
Still need to write functions for updating x11 filesystem and GUI rootfs


[3/3/2023 1:51 PM] tux_linux
Probably less hard


[3/3/2023 1:52 PM] szybet
i mean


[3/3/2023 1:52 PM] szybet
the same way


[3/3/2023 1:52 PM] tux_linux
Maybe not even necessary


[3/3/2023 1:52 PM] szybet
idk, depends on size


[3/3/2023 1:53 PM] tux_linux
Because we might don't need to move to initrd for this


[3/3/2023 1:53 PM] tux_linux
It's not the rootfs that we are updating


[3/3/2023 1:53 PM] szybet
answer


[3/3/2023 1:53 PM] tux_linux
1. Old for kobo
2. New for kobo
3. New for Kindle


[3/3/2023 1:53 PM] tux_linux
Optionally 4. VNC


[3/3/2023 1:54 PM] szybet
and as i imagine... gui apps get the old one?


[3/3/2023 1:54 PM] tux_linux
No?


[3/3/2023 1:54 PM] szybet
then wtf


[3/3/2023 1:54 PM] szybet
how do i update it properly


[3/3/2023 1:54 PM] szybet
once and for all


[3/3/2023 1:55 PM] szybet
rootfs only?


[3/3/2023 1:55 PM] szybet
and what about the one in gui bundle\


[3/3/2023 1:56 PM] tux_linux
This should bind mount the correct platform plugin
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/gui_apps#L76

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/gui_apps
rootfs/gui_apps at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-AB743


[3/3/2023 1:56 PM] szybet
?


[3/3/2023 1:57 PM] tux_linux
The one in GUI bundle is a blank file


[3/3/2023 1:57 PM] tux_linux
Awaiting bind-mount


[3/3/2023 1:58 PM] tux_linux
Real platform plugins are located in the rootfs
`/lib/qt5-plugins`


[3/3/2023 1:58 PM] szybet
https://tenor.com/view/dead-inside-anime-loveiswar-kaguya-gif-13628541

{Embed}
https://tenor.com/view/dead-inside-anime-loveiswar-kaguya-gif-13628541
/mnt/data/projects/git/conversations/media/dead-inside-ABBB0.png


[3/3/2023 1:58 PM] szybet
you know i lost 3 days debugging this madness


[3/3/2023 1:58 PM] tux_linux
You could have asked?


[3/3/2023 1:58 PM] tux_linux
It works now?


[3/3/2023 1:59 PM] szybet
i can't ask for a thing i dont know yet about


[3/3/2023 1:59 PM] szybet
please tell me such things in the future when you see me working on it in the upper level

{Reactions}
👍 

[3/3/2023 1:59 PM] szybet
no.


[3/3/2023 1:59 PM] tux_linux
Ok


[3/3/2023 1:59 PM] szybet
it segmant faults


[3/3/2023 1:59 PM] szybet
on time?


[3/3/2023 1:59 PM] szybet
idk, give it a look if you have time


[3/3/2023 1:59 PM] tux_linux
And it works when not in userapp


[3/3/2023 2:00 PM] szybet
of course


[3/3/2023 2:00 PM] tux_linux
Ok


[3/3/2023 9:03 PM] szybet
@tux-linux please provide a yhm name syntax? category? on the wiki for small articles with code snippets importnat for that topic, eg platform plugin related code


[3/3/2023 9:19 PM] tux_linux
yhm?


[3/3/2023 9:20 PM] szybet
low effort docs


[3/3/2023 9:20 PM] szybet
i would name it


[3/3/2023 9:20 PM] szybet
i just would copy code related to things that are hidden


[3/3/2023 9:35 PM] szybet
ONLY WHEN DEBUG IS ENABLED IN PLATFORM PLUGIN........................


[3/3/2023 9:35 PM] szybet
and keyboard


[3/3/2023 9:35 PM] szybet
wtf


[3/3/2023 10:37 PM] tux_linux
hello, could you please prepare me a tarball with the essentials to run sketch app on Kobo?


[3/3/2023 10:37 PM] tux_linux
that way I can integrate it with compatible devices


[3/3/2023 10:38 PM] tux_linux
classic movie


[3/3/2023 10:38 PM] tux_linux
I have seen it too much times already


[3/3/2023 10:38 PM] szybet
your linker can cause problems?


[3/3/2023 10:38 PM] tux_linux
no, I just want to concentrate on update things


[3/3/2023 10:38 PM] tux_linux
well, maybe it can but I don't want to know


[3/3/2023 10:38 PM] szybet
i will, but if you dont want to wait its explained in the repo


[3/3/2023 10:39 PM] tux_linux
ok


[3/3/2023 10:39 PM] tux_linux
thanks


[3/3/2023 10:52 PM] szybet
```
kobo:/#  * WARNING: sshd has already been started
iniparser: cannot open /mnt/onboard/.kobo/nightmode.ini
cat: can't open '/mnt/onboard/.kobo/Kobo/Kobo eReader.conf': No such file or directory
Its the fucking luna
Motion debug enabled. Debug information for screen and mouse will be printed
Motion debug enabled. Debug information for screen and mouse will be printed
Motion debug enabled. Debug information for screen and mouse will be printed
Motion debug enabled. Debug information for screen and mouse will be printed
[FBInk] Unidentified Kobo device code (40)!
kobofb: Finished initialization.
03/03/2023 @ 22:52:05 | main: Running on device n306
03/03/2023 @ 22:52:05 | main: Device has Wi-Fi capabilities
03/03/2023 @ 22:52:08 | sleepThread: Sleep pipe thread active
03/03/2023 @ 22:52:09 | sleepThread: Looking for messages in pipe
03/03/2023 @ 22:52:16 | homePageWidget: Reading database
03/03/2023 @ 22:52:16 | homePageWidget: Reading recent books database
03/03/2023 @ 22:52:16 | homePageWidget: Setting up home page
03/03/2023 @ 22:52:17 | homePageWidget: Reading pinned books database
qUncompress: Input data is corrupted
Segmentation fault
```


[3/3/2023 10:52 PM] szybet
inkbox stopped launching


[3/3/2023 10:52 PM] szybet
great


[3/3/2023 11:09 PM] tux_linux
I doubt I can help you at this point
I would start over


[3/3/2023 11:09 PM] tux_linux
Good luck


[3/3/2023 11:10 PM] tux_linux
Did you compile feathernotes with release or debug build?


[3/3/2023 11:10 PM] tux_linux
Debug build sometimes causes problems


[3/3/2023 11:11 PM] szybet
inkbox stopped launching


[3/3/2023 11:11 PM] szybet
its platform plugins fault


[3/4/2023 12:20 AM] szybet
I cleaned out write folder on p3 and p4, still doesnt boot


[3/4/2023 12:20 AM] szybet
update has the platform plugin, but it should be over written


[3/4/2023 12:21 AM] szybet
ugh...


[3/4/2023 12:21 AM] tux_linux
Oh no


[3/4/2023 12:21 AM] szybet
?


[3/4/2023 12:21 AM] tux_linux
strace?


[3/4/2023 12:21 AM] tux_linux
Not now


[3/4/2023 12:21 AM] szybet
i dont have access to the device


[3/4/2023 12:21 AM] szybet
i mean


[3/4/2023 12:21 AM] tux_linux
This is an emergency


[3/4/2023 12:22 AM] szybet
im too lazy to get the serial connector


[3/4/2023 12:22 AM] szybet
what emergency


[3/4/2023 12:22 AM] tux_linux
Well
It's in production code


[3/4/2023 12:22 AM] szybet
did you tested it?


[3/4/2023 12:22 AM] tux_linux
At some point if GUI can't launch on glo HD there's a problem


[3/4/2023 12:22 AM] tux_linux
I will try it


[3/4/2023 12:23 AM] szybet
i developed it... now it stopped working


[3/4/2023 12:23 AM] szybet
i cant understand it


[3/4/2023 12:23 AM] tux_linux
strace


[3/4/2023 12:23 AM] tux_linux
You don't need a serial console for strace


[3/4/2023 12:24 AM] tux_linux
SSH exists


[3/4/2023 12:24 AM] tux_linux
No?


[3/4/2023 12:24 AM] szybet
well tommorow


[3/4/2023 12:24 AM] szybet
im just tired of this


[3/4/2023 12:24 AM] tux_linux
Ok


[3/4/2023 12:24 AM] tux_linux
Trying on glo HD currently


[3/4/2023 12:27 AM] tux_linux
You sure there isn't anything on overlayfs folders?


[3/4/2023 12:27 AM] szybet
nothing related


[3/4/2023 12:27 AM] szybet
***`nothing`***


[3/4/2023 12:27 AM] tux_linux
What steps to reproduce


[3/4/2023 12:28 AM] tux_linux
rootfs commit?


[3/4/2023 12:28 AM] szybet
i replace libkobo.so.1 with the newest mine updated


[3/4/2023 12:28 AM] tux_linux
You're supposed to use .so.2


[3/4/2023 12:28 AM] szybet
wha


[3/4/2023 12:29 AM] tux_linux
Or am I wrong?


[3/4/2023 12:29 AM] tux_linux
`cat /.commit`


[3/4/2023 12:29 AM] szybet
https://github.com/Kobo-InkBox/rootfs/blob/d23883b964c3c99dd5f97f0d4807b28cad74e07c/etc/init.d/inkbox_gui#L48-L54

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/d23883b964c3c99dd5f97f0d4807b28cad74e07c/etc/init.d/inkbox_gui
rootfs/inkbox_gui at d23883b964c3c99dd5f97f0d4807b28cad74e07c · Kob...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-AB743


[3/4/2023 12:30 AM] tux_linux
well ok


[3/4/2023 12:30 AM] tux_linux
so I will change this for the nia


[3/4/2023 12:30 AM] szybet
what?


[3/4/2023 12:31 AM] szybet
cant check. its old because i update ipd / lockscreen for example manually when i develop it so there is no need


[3/4/2023 12:31 AM] tux_linux
**hmm hmm**


[3/4/2023 12:32 AM] szybet
i know what im doing, what files do what


[3/4/2023 12:32 AM] szybet
???????????????


[3/4/2023 12:32 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-58F0D.png


[3/4/2023 12:32 AM] tux_linux
`libkobo.so.2`->"New platform plugin" using FBInk for Kobo devices


[3/4/2023 12:33 AM] tux_linux
.1 uses native drawing via `pxp_device` IIRC


[3/4/2023 12:33 AM] szybet
but... if i replaced the 1 then nothing should have happen


[3/4/2023 12:33 AM] tux_linux
no it should


[3/4/2023 12:33 AM] tux_linux
I just changed it


[3/4/2023 12:34 AM] szybet
oh then


[3/4/2023 12:34 AM] szybet
well


[3/4/2023 12:34 AM] tux_linux
you should use bind-mounts


[3/4/2023 12:34 AM] szybet
i use them for gui chroot


[3/4/2023 12:34 AM] szybet
here not needed


[3/4/2023 12:34 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/0ec8757e82e7fb4822b1f2d3b69225474f639266

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/0ec8757e82e7fb4822b1f2d3b69225474f639266
N306: switch to `libkobo.so.2` · Kobo-InkBox/rootfs@0ec8757
/mnt/data/projects/git/conversations/media/0ec8757e82e7fb4822b1f2d3b69225474f639266-D8CB7


[3/4/2023 12:35 AM] tux_linux
it works on my glo hd


[3/4/2023 12:35 AM] szybet
try with ::debug


[3/4/2023 12:35 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-8691F.txt


[3/4/2023 12:35 AM] szybet
one : only


[3/4/2023 12:35 AM] tux_linux
where, how, when


[3/4/2023 12:35 AM] szybet
platform_plugin=kobo:debug


[3/4/2023 12:35 AM] szybet
something like that


[3/4/2023 12:35 AM] tux_linux
ok


[3/4/2023 12:35 AM] szybet
in arguments


[3/4/2023 12:38 AM] tux_linux
works

{Attachments}
/mnt/data/projects/git/conversations/media/message-DB0BA.txt


[3/4/2023 12:38 AM] szybet
wait 20s


[3/4/2023 12:38 AM] tux_linux
still works


[3/4/2023 12:38 AM] szybet
try with keyboard:mouse too


[3/4/2023 12:38 AM] tux_linux
you should delete all rootfs cache


[3/4/2023 12:39 AM] szybet
ugh...


[3/4/2023 12:39 AM] szybet
btw `Motion debug enabled. Debug information for screen and mouse will be printed` its a bug this is showed. I didn't saw it when i tested it because i didn't used many arguments. fixed already, i will push it tommorow

{Reactions}
👍 

[3/4/2023 12:40 AM] szybet
this


[3/4/2023 12:40 AM] tux_linux
still works

{Attachments}
/mnt/data/projects/git/conversations/media/message-F98DC.txt


[3/4/2023 12:41 AM] szybet
ok, add QT_LOGGING_RULES=qt.qpa.input=true


[3/4/2023 12:41 AM] tux_linux
probably because I have no mouse


[3/4/2023 12:41 AM] szybet
nah


[3/4/2023 12:41 AM] szybet
i was testing everything today without one too


[3/4/2023 12:43 AM] tux_linux
Still still still works

{Attachments}
/mnt/data/projects/git/conversations/media/message-C9CF4.txt


[3/4/2023 12:44 AM] szybet
well


[3/4/2023 12:44 AM] szybet
fuck


[3/4/2023 12:44 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-82F09.png


[3/4/2023 12:44 AM] szybet
i will debug it tommorow properly, whats the problem


[3/4/2023 12:44 AM] tux_linux
\*laughs maliciously\*


[3/4/2023 12:44 AM] tux_linux
probably your rootfs


[3/4/2023 12:44 AM] szybet
maybe my sd card is dying


[3/4/2023 12:45 AM] tux_linux
I was reading KT porting thread yesterday, we forgot NFS rootfs idea


[3/4/2023 12:45 AM] szybet
what was that about


[3/4/2023 12:46 AM] tux_linux
throwing rootfs in an nfs disk and spoofing kernel in thinking it's the real rootfs


[3/4/2023 12:46 AM] tux_linux
having infinite space


[3/4/2023 12:46 AM] tux_linux
i guess


[3/4/2023 12:46 AM] szybet
what


[3/4/2023 12:47 AM] tux_linux
instead of putting it in the mmc in a squashfs, mount it over nfs from local network


[3/4/2023 12:47 AM] tux_linux
rootfs would be stored on another computer with more disk space


[3/4/2023 12:47 AM] tux_linux
and limit writes to mmc


[3/4/2023 12:47 AM] tux_linux
if you're using the overlayfs feature


[3/4/2023 12:47 AM] szybet
for dev things?


[3/4/2023 12:47 AM] tux_linux
yes


[3/4/2023 12:47 AM] szybet
my ssh connection sometimes lags for 3 seconds


[3/4/2023 12:47 AM] tux_linux
ssh != nfs


[3/4/2023 12:47 AM] szybet
very often


[3/4/2023 12:48 AM] tux_linux
also, do you use usbnet?


[3/4/2023 12:48 AM] szybet
example


[3/4/2023 12:48 AM] szybet
no, wifi


[3/4/2023 12:48 AM] tux_linux
almost never lags over usbnet


[3/4/2023 12:48 AM] szybet
usb is used for keyboard things


[3/4/2023 12:48 AM] tux_linux
also nfs over wifi might not be a very good idea


[3/4/2023 12:48 AM] szybet
well yea


[3/4/2023 12:48 AM] szybet
maybe measure speeds / latency before thinking more about it


[3/4/2023 12:49 AM] szybet
but if you want to do it, sure then


[3/4/2023 12:49 AM] tux_linux
should be good over usbnet


[3/4/2023 12:49 AM] szybet
i have 3 big things already to do, won't add anything to this


[3/4/2023 12:49 AM] tux_linux
I get 8mb/s transfer speed sometimes over ssh


[3/4/2023 12:49 AM] tux_linux
probably for 2.1


[3/4/2023 12:49 AM] tux_linux
but anyway


[3/4/2023 12:50 AM] szybet
latency is important


[3/4/2023 1:17 AM] tux_linux
ok, found your segfault problem


[3/4/2023 1:19 AM] tux_linux
doesn't segfault when launching inkbox but it does when launching any other qt app?...


[3/4/2023 1:19 AM] tux_linux
why did this need to happen


[3/4/2023 1:20 AM] tux_linux
come on qt


[3/4/2023 2:10 AM] tux_linux
the problem is solved when adding `:mouse` to platform plugin options


[3/4/2023 2:10 AM] tux_linux
otherwise, it segfaults


[3/4/2023 2:13 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/3923cd4f4d2969b6f29b35c772deaed5546aff07
I compiled a new strace static binary so that you can copy it in gui rootfs to debug this mess

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/3923cd4f4d2969b6f29b35c772deaed5546aff07
Update `strace` to v6.2 and include it as a static binary · Kobo-In...
/mnt/data/projects/git/conversations/media/3923cd4f4d2969b6f29b35c772deaed5546aff07-779DB


[3/4/2023 2:13 AM] tux_linux
`cp /usr/bin/strace /kobo/usr/bin` and you will be able to use it in the chroot


[3/4/2023 2:16 AM] tux_linux
With mouse argument and 2048 app (works)

{Attachments}
/mnt/data/projects/git/conversations/media/message-B3D00.txt


[3/4/2023 2:17 AM] tux_linux
Without mouse argument and 2048 app (doesn't work)

{Attachments}
/mnt/data/projects/git/conversations/media/message-3C30E.txt


[3/4/2023 10:54 AM] szybet
Inkbox too


[3/4/2023 12:30 PM] szybet
Please send me your platform plugin, compiled


[3/4/2023 12:31 PM] szybet
Maybe my compiler got broken


[3/4/2023 1:17 PM] tux_linux
Same one that is in rootfs


[3/4/2023 1:17 PM] tux_linux
Not with me


[3/4/2023 1:17 PM] tux_linux
Clear your cache!!


[3/4/2023 1:42 PM] szybet
Oh ok


[3/4/2023 2:18 PM] tux_linux
can you reproduce it?


[3/4/2023 2:20 PM] szybet
Im starting to work on it

{Reactions}
👍 

[3/4/2023 2:52 PM] szybet
```
Welcome to minicom 2.8

OPTIONS: I18n 
Compiled on Jan  9 2021, 12:42:45.
Port /dev/ttyUSB0, 14:50:12

Press CTRL-A Z for help on special keys

Can't open squashfs image: No such file or directory
 * Setting up GUI user applications
 [ ok ]
 [ ok ]
 * Loading modules ...chroot: failed to run command ‘/mnt/onboard/.adds/inkbox/inkbox.sh’: No such file or direc   y
 * Starting sshd ... [ ok ]
 [ ok ]
 * Setting system clock using the hardware clock [UTC] ... [ ok ]
 * Checking local filesystems  ... [ ok ]
 * Remounting root filesystem read/write ... [ ok ]
 * Remounting filesystems ... [ ok ]
 * Mounting local filesystems ... [ ok ]
 * Starting busybox syslog ... [ ok ]
 * Starting busybox klogd ... [ ok ]

Welcome to InkBox OS 1.9
Kernel 4.1.15niAudio on armv7l (/dev/ttymxc0)

kobo login: root
Password: 
Welcome to InkBox OS!
kobo:~# service inkbox_gui restart
 * Stopping InkBox GUI ...
 [ ok ]
 * Starting InkBox GUI ...
 * Starting InkBox Daemon (ibxd) ...
 [ ok ]
Can't open squashfs image: No such file or directory
 * Setting up GUI user applications
 [ ok ]
 [ ok ]
 * WARNING: sshd has already been started
kobo:~# chroot: failed to run command ‘/mnt/onboard/.adds/inkbox/inkbox.sh’: No such file or directory

kobo:~# 
kobo:~# 
kobo:~# 
kobo:~# 
kobo:~# 
kobo:~# 
kobo:~# 
kobo:~# mount /dev/mmcblk0p4 /mnt
kobo:~# cd /mnt/
kobo:/mnt# ls
X11                  gui_rootfs.isa       onboard
config               gui_rootfs.isa.dgst  ssh
dhcpcd_duid          gutenberg            tmpfs
gui_rootfs           lost+found           update
kobo:/mnt# 
```


[3/4/2023 2:53 PM] tux_linux
`ls /mnt/update`


[3/4/2023 2:53 PM] szybet
```
kobo:/mnt# ls /mnt/update/
inkbox_updated  update.isa      will_update
last_sync       version
kobo:/mnt# 
```


[3/4/2023 2:54 PM] tux_linux
```
 * Remounting root filesystem read/write ... [ ok ]
 * Remounting filesystems ... [ ok ]
```
I did not write this


[3/4/2023 2:54 PM] szybet
```
kobo:/mnt# ls /kobo/mnt/onboard/.adds/inkbox/
2048                           oobe-inkbox
2048-bin                       oobe-inkbox-bin
AUTHORS                        pdf_get_total_pages_number.sh
LICENSE                        qalculate
dictionary                     qalculate-bin
eink.qss                       qreversi
epub.sh                        qreversi-bin
explore_local_library.sh       remount_tmpfs_launch.sh
find_epub_metadata.sh          reset-config.sh
inkbox                         scribble
inkbox-bin                     splash.sh
inkbox.sh                      split-txt.py
install_developer-key.sh       split.sh
launch_user_application.sh     system
lockscreen                     test_ping.sh
lockscreen-bin                 wake.sh
kobo:/mnt# 
```


[3/4/2023 2:54 PM] tux_linux
you are not on a clean commit


[3/4/2023 2:56 PM] tux_linux
`find /data/storage/gui_rootfs/write`


[3/4/2023 2:59 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D47A9.txt


[3/4/2023 3:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-B74BC.txt


[3/4/2023 3:00 PM] szybet
nothing.


[3/4/2023 3:01 PM] tux_linux
make a backup, i don't know, but remove it please


[3/4/2023 3:01 PM] szybet
:(


[3/4/2023 3:01 PM] tux_linux
please


[3/4/2023 3:02 PM] tux_linux
you want to know the worst part? I cleared my cache in gui rootfs and now qt apps launch


[3/4/2023 3:03 PM] szybet
https://tenor.com/view/im-out-of-here-gif-24981088

{Embed}
https://tenor.com/view/im-out-of-here-gif-24981088
/mnt/data/projects/git/conversations/media/im-out-04DDC.png


[3/4/2023 3:03 PM] tux_linux
and I have nothing in rootfs cache either


[3/4/2023 3:10 PM] szybet
It booted.....................


[3/4/2023 3:10 PM] tux_linux
good


[3/4/2023 3:10 PM] szybet
NO


[3/4/2023 3:10 PM] szybet
WHY


[3/4/2023 3:10 PM] tux_linux
what


[3/4/2023 3:10 PM] szybet
why it works


[3/4/2023 3:12 PM] szybet
but i still get `Can't open squashfs image: No such file or directory`


[3/4/2023 3:12 PM] szybet
``` * Setting hostname ... [ ok ]
 * Starting InkBox Daemon (ibxd) ... [ ok ]
 * Checking for available updates ...Update skipped or no update available, aborting ...
 [ ok ]
 * Starting InkBox GUI ... * Starting InkBox Daemon (ibxd) ... [ ok ]
Can't open squashfs image: No such file or directory
 * Setting up GUI user applications
 [ ok ]
 [ ok ]

```


[3/4/2023 3:12 PM] tux_linux
does gui launch


[3/4/2023 3:13 PM] szybet
yes


[3/4/2023 3:13 PM] tux_linux
`rc-service inkbox_gui restart -d`


[3/4/2023 3:14 PM] szybet
thats cool

{Reactions}
👍 

[3/4/2023 3:15 PM] szybet
'

{Attachments}
/mnt/data/projects/git/conversations/media/message-FF924.txt


[3/4/2023 3:15 PM] szybet
python


[3/4/2023 3:15 PM] szybet
nevermind this


[3/4/2023 3:16 PM] tux_linux
you didn't clear rootfs cache


[3/4/2023 3:16 PM] tux_linux
right?


[3/4/2023 3:16 PM] szybet
i did


[3/4/2023 3:16 PM] szybet
you mean write folder?


[3/4/2023 3:16 PM] tux_linux
yes


[3/4/2023 3:16 PM] szybet
i did


[3/4/2023 3:16 PM] szybet
i made a backup


[3/4/2023 3:16 PM] tux_linux
but how is it still trying to mount it


[3/4/2023 3:18 PM] tux_linux
something didn't clean up properly


[3/4/2023 3:18 PM] tux_linux
or you didn't update the rootfs


[3/4/2023 3:18 PM] tux_linux
that is probably the reason


[3/4/2023 3:19 PM] szybet
yea its propably old


[3/4/2023 3:19 PM] szybet
but thats not the reason


[3/4/2023 3:19 PM] tux_linux
`cat /.commit`


[3/4/2023 3:19 PM] szybet
faa26552124e9f20a2490f1089ef1cf46290ca46


[3/4/2023 3:19 PM] tux_linux
28 aug 2022


[3/4/2023 3:19 PM] tux_linux
that's **old**


[3/4/2023 3:20 PM] tux_linux
it was before wi-fi framework pull request merge


[3/4/2023 3:21 PM] szybet
you still cant explain why it's not working


[3/4/2023 3:22 PM] tux_linux
what's not working


[3/4/2023 3:22 PM] szybet
why it didn't booted


[3/4/2023 3:22 PM] tux_linux
when


[3/4/2023 3:22 PM] szybet
yesterday


[3/4/2023 3:23 PM] tux_linux
because you left over a 7 month-old rootfs with probably only partially-added updates and old things lagging behind
at this point, it just broke off for a good reason?


[3/4/2023 3:23 PM] szybet
bruh...


[3/4/2023 3:24 PM] tux_linux
well, you can't deny that clearing the rootfs cache solved your problem


[3/4/2023 3:24 PM] szybet
do you want to have a look at my backup write folders?


[3/4/2023 3:24 PM] szybet
dsabhfjdsklfinuiewo


[3/4/2023 3:24 PM] tux_linux
maybe but I would update the rootfs first


[3/4/2023 3:24 PM] tux_linux
then see if the problem happens again


[3/4/2023 3:24 PM] szybet
im doing it

{Reactions}
👍 

[3/4/2023 3:35 PM] tux_linux
X11 base updates will have to be decompressed first on the device to final destination because they're too big (715M on Glo HD, 162M when compressed in squashfs)


[3/4/2023 3:36 PM] szybet
what


[3/4/2023 3:37 PM] tux_linux
X11 base filesystem is stored in a `base.img` file at `/opt/storage/X11/base.img`. It is mounted by initrd to provide a rootfs for KoBox. It is mounted uncompressed because launching X11 in a squashfs really takes too much time, so there it weighs 715M


[3/4/2023 3:38 PM] tux_linux
I might look into using zstd but I'd have to compile squashfuse so that it would support it


[3/4/2023 3:38 PM] szybet
sure, whatever


[3/4/2023 3:39 PM] szybet
X11 is sucha feature that the user can do anything for it

{Reactions}
👍 

[3/4/2023 3:58 PM] szybet
updated everything - gui works


[3/4/2023 3:58 PM] tux_linux
good


[3/4/2023 4:21 PM] szybet
i get segmant fault with feather notes outside of user apps


[3/4/2023 4:21 PM] tux_linux
inverted problem?


[3/4/2023 4:21 PM] szybet
and now im 100% sure thats because or qt are compiled diffrent


[3/4/2023 4:21 PM] szybet
i have more things enabled


[3/4/2023 4:22 PM] szybet
like printing, svg something idk


[3/4/2023 4:22 PM] tux_linux
you should check your platform plugin code


[3/4/2023 4:22 PM] szybet
i will grab yours, that's it


[3/4/2023 4:22 PM] szybet
im using yours


[3/4/2023 4:22 PM] szybet
compiled


[3/4/2023 4:22 PM] tux_linux
ok


[3/4/2023 4:22 PM] szybet
i didn't touch that

{Reactions}
👍 

[3/4/2023 4:23 PM] szybet
gui bundle has qt?


[3/4/2023 4:23 PM] szybet
or rootfs


[3/4/2023 4:23 PM] tux_linux
yes


[3/4/2023 4:23 PM] tux_linux
qt libs are in gui-bundle
qt platform plugins are in rootfs


[3/4/2023 4:24 PM] szybet
can i ask why?


[3/4/2023 4:24 PM] tux_linux
i'm not sure to remember


[3/4/2023 4:25 PM] szybet
i understand.


[3/4/2023 4:25 PM] tux_linux
it was something related to bind-mounts


[3/4/2023 4:59 PM] szybet
we need to create a qt bible


[3/4/2023 5:01 PM] szybet (pinned)
0. qt needs love
*but sometimes you just can't love it*
1. Never mismatch your qt with another qt, every qt binaries are diffrent
2. Pray every sunday night on 3 am
3. clean your qt every 6 months
4. If something doesnt work, use qtimers
5. Nokia forums from 2002 are your best friend
6. dont use special characters on fridays


[3/4/2023 5:01 PM] szybet
anyway, i will try in user app now


[3/4/2023 5:01 PM] tux_linux
0. qt needs love
but sometimes you just can't love it


[3/4/2023 5:02 PM] szybet
Pinned a message.


[3/4/2023 5:05 PM] szybet
by the way


[3/4/2023 5:05 PM] szybet
i forgot to mention


[3/4/2023 5:05 PM] szybet
i fixed many things in stylesheet


[3/4/2023 5:06 PM] tux_linux
which are


[3/4/2023 5:06 PM] szybet
like spin boxes, menus


[3/4/2023 5:06 PM] tux_linux
and now it looks like


[3/4/2023 5:06 PM] szybet
you will see in feather notes when i present it


[3/4/2023 5:06 PM] tux_linux
can't you send a small screenshot?


[3/4/2023 5:07 PM] szybet
i can for sure


[3/4/2023 5:07 PM] szybet
will do when user app launches

{Reactions}
👍 

[3/4/2023 5:11 PM] szybet
it


[3/4/2023 5:11 PM] szybet
segmant faults


[3/4/2023 5:11 PM] tux_linux
again?


[3/4/2023 5:12 PM] szybet
in user app


[3/4/2023 5:12 PM] tux_linux
check your platform plugin code regarding mouse


[3/4/2023 5:13 PM] tux_linux
for me adding mouse made it work


[3/4/2023 5:16 PM] szybet
now only with keyboard


[3/4/2023 5:17 PM] szybet
fuck fuckfuck fuck


[3/4/2023 5:17 PM] szybet
its random with keyboard


[3/4/2023 5:17 PM] szybet
i dont have even a keyboard attached


[3/4/2023 5:19 PM] szybet
if i replace the platform plugin without mounting it again it rootfs, will it work?


[3/4/2023 5:19 PM] tux_linux
wdym


[3/4/2023 5:19 PM] szybet
i drop a new verdsion, overwrite libkobo.so.2


[3/4/2023 5:19 PM] szybet
will it work


[3/4/2023 5:20 PM] tux_linux
i would rather do this
```
scp libkobo.so.2 root@192.168.3.2:/tmp
mount --bind /tmp/libkobo.so.2 /lib/qt5-plugins/libkobo.so.2
restart inkbox_gui
```


[3/4/2023 5:20 PM] szybet
this takes time


[3/4/2023 5:20 PM] tux_linux
it's ***safer***


[3/4/2023 5:43 PM] szybet
```
% /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake .
Project MESSAGE: This project is using private headers and will therefore be tied to this specific Qt module build version.
Project MESSAGE: Running this project against other versions of the Qt modules may crash at any arbitrary point.
Project MESSAGE: This is not a bug, but a result of using Qt internals. You have been warned!
Failure to open file: /mnt/HDD/Project/git-syncthing/qt5-kobo-platform-plugin/Makefile
Unable to generate makefile for: ./koboplatformplugin.pro
```


[3/4/2023 5:46 PM] tux_linux
ls


[3/4/2023 5:46 PM] szybet
i mean the warnings


[3/4/2023 6:01 PM] tux_linux
It's normal


[3/4/2023 6:01 PM] szybet
the bundle doesnt have many static libraries


[3/4/2023 6:02 PM] szybet
libQt5ServiceSupport


[3/4/2023 6:02 PM] szybet
libQt5EventDispatcherSupport.a'


[3/4/2023 6:02 PM] szybet
and more propably


[3/4/2023 6:02 PM] szybet
ugh


[3/4/2023 6:03 PM] tux_linux
Now I see why your platform plugin doesn't work


[3/4/2023 6:03 PM] tux_linux
This warning


[3/4/2023 6:03 PM] szybet
yea


[3/4/2023 6:03 PM] szybet
i will use your lib binaries


[3/4/2023 6:03 PM] szybet
maybe this will fix it


[3/4/2023 6:03 PM] szybet
it fixed almost


[3/4/2023 6:04 PM] tux_linux
almost?


[3/4/2023 6:05 PM] szybet
gui app crashes on keyboard, sometimes


[3/4/2023 6:05 PM] tux_linux
virtual keyboard?


[3/4/2023 6:06 PM] szybet
keyboard argument


[3/4/2023 6:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-040F4.png


[3/4/2023 6:06 PM] szybet
w t f


[3/4/2023 6:06 PM] tux_linux
do you use dbus somewhere?


[3/4/2023 6:07 PM] szybet
NO


[3/4/2023 6:07 PM] szybet
NFJDBJF


[3/4/2023 6:07 PM] tux_linux
can you share your user app package?


[3/4/2023 6:08 PM] szybet
im trying to build platform plugin


[3/4/2023 6:08 PM] szybet
and it says the dbus thing


[3/4/2023 6:09 PM] szybet
`make[2]: arm-kobo-linux-gnueabihf-gcc-ar: No such file or directory`


[3/4/2023 6:09 PM] tux_linux
path thing?


[3/4/2023 6:11 PM] szybet
no


[3/4/2023 6:11 PM] szybet
its clearly in there


[3/4/2023 6:13 PM] tux_linux
are you on debian?


[3/4/2023 6:13 PM] szybet
nevermind


[3/4/2023 6:13 PM] szybet
im back at dbus error


[3/4/2023 6:14 PM] szybet
can you try to compile it?


[3/4/2023 6:15 PM] tux_linux
i already did?


[3/4/2023 6:15 PM] szybet
do you have dbus library


[3/4/2023 6:15 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/1879e55595bab83c6f9b702bf57ec8fe91351ce1

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/1879e55595bab83c6f9b702bf57ec8fe91351ce1
Update some Qt platform plugins · Kobo-InkBox/rootfs@1879e55
/mnt/data/projects/git/conversations/media/1879e55595bab83c6f9b702bf57ec8fe91351ce1-889B9


[3/4/2023 6:15 PM] tux_linux
no afair


[3/4/2023 6:16 PM] szybet
check it


[3/4/2023 6:16 PM] szybet
ls your lib dir


[3/4/2023 6:16 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-5FA45.txt


[3/4/2023 6:16 PM] szybet
...


[3/4/2023 6:22 PM] szybet
i use my qmake


[3/4/2023 6:22 PM] szybet
maybe thats why


[3/4/2023 6:22 PM] szybet
just get me the entire qt


[3/4/2023 6:23 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/qt-bin.sqsh


[3/4/2023 6:23 PM] szybet
what toolchain do you use


[3/4/2023 6:23 PM] szybet
kernel repo?


[3/4/2023 6:23 PM] tux_linux
gcc 11.2.0


[3/4/2023 6:23 PM] tux_linux
no


[3/4/2023 6:23 PM] szybet
from


[3/4/2023 6:23 PM] tux_linux
koxtoolchain


[3/4/2023 6:23 PM] szybet
custom?


[3/4/2023 6:23 PM] tux_linux
no


[3/4/2023 6:23 PM] szybet
give me it


[3/4/2023 6:24 PM] szybet
remember i compiled koxtoolchain later than you and it wasn't compatible


[3/4/2023 6:24 PM] szybet
give me the toolchain too


[3/4/2023 6:24 PM] tux_linux
might take some time


[3/4/2023 6:24 PM] szybet
not the entire koxtoolchain


[3/4/2023 6:24 PM] szybet
only x-tools


[3/4/2023 6:24 PM] tux_linux
yes


[3/4/2023 6:24 PM] tux_linux
i have the libs for qalculate in it


[3/4/2023 6:24 PM] tux_linux
so it's big


[3/4/2023 6:25 PM] tux_linux
(sysroot)


[3/4/2023 6:25 PM] szybet
can you... remove them please


[3/4/2023 6:25 PM] tux_linux
no


[3/4/2023 6:25 PM] szybet
copy and remove them


[3/4/2023 6:25 PM] tux_linux
it's compressing


[3/4/2023 6:25 PM] szybet
eh


[3/4/2023 6:25 PM] szybet
i will try with this qt


[3/4/2023 6:26 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-C8E3F.png


[3/4/2023 6:27 PM] szybet
oof...


[3/4/2023 6:30 PM] szybet
```
CMake Error at /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Core/Qt5CoreConfig.cmake:14 (message):
  The imported target "Qt5::Core" references the file

     "/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/libQt5Core.so.5.15.2"

  but this file does not exist.  Possible reasons include:

  * The file was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and contained

     "/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Core/Qt5CoreConfig.cmake"

  but not all the files it references.

Call Stack (most recent call first):
  /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Core/Qt5CoreConfig.cmake:32 (_qt5_Core_check_file_exists)
  /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5Core/Qt5CoreConfig.cmake:201 (_populate_Core_target_properties)
  /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/lib/cmake/Qt5/Qt5Config.cmake:28 (find_package)
  feathernotes/CMakeLists.txt:8 (find_package)


-- Configuring incomplete, errors occurred!
See also "/mnt/HDD/Project/git-syncthing/FeatherNotes-inkbox/build/CMakeFiles/CMakeOutput.log".
FAILED: build.ninja 
/usr/bin/cmake -S/mnt/HDD/Project/git-syncthing/FeatherNotes-inkbox -B/mnt/HDD/Project/git-syncthing/FeatherNotes-inkbox/build
ninja: error: rebuilding 'build.ninja': subcommand failed
18:29:41: The process "/usr/bin/cmake" exited with code 1.
18:29:41: Elapsed time: 00:00.
```


[3/4/2023 6:30 PM] szybet
cool...


[3/4/2023 6:30 PM] tux_linux
72%


[3/4/2023 6:30 PM] szybet
create a folder in misc called dev tools or smth


[3/4/2023 6:31 PM] szybet
once and for all, this problem should be never occur again


[3/4/2023 6:33 PM] tux_linux
done


[3/4/2023 6:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-A105C.txt


[3/4/2023 6:41 PM] tux_linux
I don't know what to say


[3/4/2023 6:42 PM] szybet
please tell me how do you compile


[3/4/2023 6:42 PM] szybet
exact commands


[3/4/2023 6:43 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-50C6C.txt


[3/4/2023 6:44 PM] tux_linux
well this was for kindle but it's the same commands for a kobo build


[3/4/2023 6:45 PM] szybet
```
root@hyperbookszyb:/mnt/HDD/Project/git-syncthing/qt5-kobo-platform-plugin# /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake .
/mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake)
/mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake: /usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.33' not found (required by /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake)
/mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake: /usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.34' not found (required by /mnt/HDD/Project/qt-kobo/qt-linux-5.15.2-kobo/bin/qmake)
root@hyperbookszyb:/mnt/HDD/Project/git-syncthing/qt5-kobo-platform-plugin# 
```


[3/4/2023 6:45 PM] szybet
tryied manually on debian


[3/4/2023 6:45 PM] szybet
wtf


[3/4/2023 6:46 PM] tux_linux
did you make clean


[3/4/2023 6:46 PM] szybet
yes


[3/4/2023 6:48 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-66594.png


[3/4/2023 6:50 PM] tux_linux
it's like your computer is breaking off piece by piece


[3/4/2023 6:50 PM] szybet
my arch is very stable


[3/4/2023 6:50 PM] szybet
this is debian


[3/4/2023 6:52 PM] tux_linux
debian isn't under the arch
might have been shook by a storm or smth


[3/4/2023 6:52 PM] szybet
https://archlinux.org/news/switch-to-the-base-devel-meta-package-requires-manual-intervention/


[3/4/2023 6:52 PM] szybet
if this is it


[3/4/2023 6:53 PM] szybet
my god


[3/4/2023 6:53 PM] szybet
i rememered it


[3/4/2023 6:53 PM] szybet
https://www.cfd-online.com/Forums/openfoam-programming-development/232767-no-such-file-directory-include-features-h.html

{Embed}
https://www.cfd-online.com/Forums/openfoam-programming-development/232767-no-such-file-directory-include-features-h.html
No such file or directory: #include <features.h> -- CFD Online Dis...
Hi, I want to write a simple code in OpenFoam Code: // A hello world program in C++ #include using namespace std; int main() { cout <


[3/4/2023 6:53 PM] szybet
this says about this package


[3/4/2023 6:53 PM] tux_linux
you did not pacman -Syu since feb 1?


[3/4/2023 6:53 PM] szybet
i did, but without base-devel


[3/4/2023 6:53 PM] szybet
i will try


[3/4/2023 6:53 PM] tux_linux
ok


[3/4/2023 6:53 PM] szybet
im tired of this already


[3/4/2023 7:17 PM] tux_linux
WE HAVE TO USE THIS
https://github.com/ttalvitie/browservice

{Embed}
https://github.com/ttalvitie/browservice
GitHub - ttalvitie/browservice: Browservice: Browse the modern web ...
Browservice: Browse the modern web on historical browsers - GitHub - ttalvitie/browservice: Browservice: Browse the modern web on historical browsers
/mnt/data/projects/git/conversations/media/browservice-D8822


[3/4/2023 7:17 PM] tux_linux
That way we could use a crappy Qt browser and load whatever we want with it


[3/4/2023 7:23 PM] szybet
where will you


[3/4/2023 7:23 PM] szybet
host it


[3/4/2023 7:23 PM] szybet
which one


[3/4/2023 7:24 PM] szybet
nothing after update


[3/4/2023 7:26 PM] tux_linux
I can't believe what I am seeing


[3/4/2023 7:27 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230304_182654469-7E9FC.jpg


[3/4/2023 7:29 PM] szybet
whhhat did you do


[3/4/2023 7:29 PM] szybet
discord without javacript?


[3/4/2023 7:29 PM] tux_linux
https://github.com/ttalvitie/browservice
this

{Embed}
https://github.com/ttalvitie/browservice
GitHub - ttalvitie/browservice: Browservice: Browse the modern web ...
Browservice: Browse the modern web on historical browsers - GitHub - ttalvitie/browservice: Browservice: Browse the modern web on historical browsers
/mnt/data/projects/git/conversations/media/browservice-D8822


[3/4/2023 7:29 PM] tux_linux
it sends png images of chromium embedded from server


[3/4/2023 7:30 PM] tux_linux
illusion is pretty much perfect


[3/4/2023 7:30 PM] szybet
input?


[3/4/2023 7:30 PM] tux_linux
yes


[3/4/2023 7:30 PM] szybet
how


[3/4/2023 7:31 PM] tux_linux
https://photos.app.goo.gl/VcxtyqpVXvdRdTAn6

{Embed}
https://photos.app.goo.gl/VcxtyqpVXvdRdTAn6
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/R1p1mJ7t40i5rQ_Y6ll4Bwa5g9Pzzb5oEd0dpnPnr5-4A44F


[3/4/2023 7:31 PM] tux_linux
png buffer if I recall correctly


[3/4/2023 7:31 PM] tux_linux
stream


[3/4/2023 7:31 PM] tux_linux
idk


[3/4/2023 7:32 PM] szybet
https://stackoverflow.com/questions/12599233/qt-version-is-invalid

{Embed}
https://stackoverflow.com/questions/12599233/qt-version-is-invalid
Qt version is invalid
I am working on Linux and I have installed Qt Creator 2.5.2, Qt libraries 4.7.4 and 4.4.3 all from sources. I cannot install the binaries directly for incompatibility between versions. The installa...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[3/4/2023 7:32 PM] szybet
do you understand it


[3/4/2023 7:33 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-62AE0.txt


[3/4/2023 7:33 PM] szybet
qmake has a fucking eeprom in it


[3/4/2023 7:33 PM] szybet
MY GOOOOD


[3/4/2023 7:34 PM] tux_linux
what?


[3/4/2023 7:38 PM] szybet
https://web.archive.org/web/20121001022715/http://doc.qt.digia.com:80/4.7-snapshot/qmake-environment-reference.html


[3/4/2023 7:38 PM] szybet
theydont mention any config path


[3/4/2023 7:38 PM] szybet
so i suppose they modify the binary


[3/4/2023 7:40 PM] szybet
sum doesnt change


[3/4/2023 7:41 PM] szybet
md5


[3/4/2023 7:41 PM] szybet
idk then


[3/4/2023 7:43 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-B2CFD.txt


[3/4/2023 7:44 PM] szybet
hard coded nicolas


[3/4/2023 7:44 PM] szybet
cool...


[3/4/2023 7:44 PM] tux_linux
yeah, I think I ran into some of these issues when I started developing inkbox


[3/4/2023 7:44 PM] tux_linux
at worst you can just create symlinks


[3/4/2023 7:45 PM] szybet
i will use my qmake...


[3/4/2023 7:45 PM] szybet
try...


[3/4/2023 7:45 PM] szybet
it compiled with my qmake, but with your libraries


[3/4/2023 7:54 PM] szybet
do you have a FindQt5.cmake file


[3/4/2023 7:54 PM] szybet
somewhere


[3/4/2023 7:55 PM] szybet
nevermind


[3/4/2023 7:58 PM] szybet
```/usr/share/cmake-3.16/Modules/CMakeTestCCompiler.cmake:60: error: The C compiler "/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc" is not able to compile a simple test program. It fails with the following output: Change Dir: /tmp/QtCreator-XsZcoP/qtc-cmake-kVNvvuKU/CMakeFiles/CMakeTmp Run Build Command(s):/usr/bin/ninja cmTC_c3033 && [1/2] Building C object CMakeFiles/cmTC_c3033.dir/testCCompiler.c.o FAILED: CMakeFiles/cmTC_c3033.dir/testCCompiler.c.o /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc    -o CMakeFiles/cmTC_c3033.dir/testCCompiler.c.o   -c testCCompiler.c /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc: /usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.33' not found (required by /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc) /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc: /usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.34' not found (required by /mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/bin/arm-kobo-linux-gnueabihf-gcc) ninja: build stopped: subcommand failed.```


[3/4/2023 7:58 PM] szybet
your toolchain is not compatible with debian


[3/4/2023 8:18 PM] szybet
https://bugreports.qt.io/browse/QTBUG-56214


[3/4/2023 8:18 PM] szybet
dont even think about qt6


[3/4/2023 8:18 PM] szybet
scroll doesnt work, everywhere XD


[3/4/2023 8:37 PM] szybet
also this


[3/4/2023 8:37 PM] szybet
```
                elif [ "${DEVICE}" == "n613" ] || [ "${DEVICE}" == "n236" ] || [ "${DEVICE}" == "n306" ]; then
                        echo "195" > .config/09-dpi/config
```


[3/4/2023 8:37 PM] szybet
195


[3/4/2023 8:37 PM] szybet
in qt platform plugin its 212


[3/4/2023 8:40 PM] tux_linux
How


[3/4/2023 8:41 PM] szybet
normally


[3/4/2023 8:41 PM] szybet
i wonder what plato uses


[3/4/2023 8:42 PM] szybet
i got to that point that i need either mouse or keyboard enabled, as you to make it work


[3/4/2023 8:42 PM] szybet
idk... i wonder how inkbox still launches


[3/4/2023 8:45 PM] szybet
sometimeskeyboard crashes too


[3/4/2023 8:47 PM] tux_linux
if it is that unstable I will have to revert to an older commit


[3/4/2023 8:47 PM] szybet
it worked


[3/4/2023 8:47 PM] szybet
now it doesnt idk why


[3/4/2023 8:48 PM] szybet
instead of that just look at the code.


[3/4/2023 8:52 PM] szybet
inkbox stopped launching with my platform plugin with additional debug information


[3/4/2023 8:53 PM] tux_linux
your debian is too old?


[3/4/2023 9:11 PM] szybet
nevermind, i stopped using it


[3/4/2023 9:13 PM] szybet
https://anonfiles.com/T1X6Yab3zf/qt5_kobo_platform_plugin_7z


[3/4/2023 9:13 PM] szybet
compile this


[3/4/2023 9:13 PM] szybet
https://cdn-151.anonfiles.com/T1X6Yab3zf/d945ae44-1677961396/qt5-kobo-platform-plugin.7z


[3/4/2023 9:13 PM] szybet
direct link


[3/4/2023 9:20 PM] szybet
i think i found it


[3/4/2023 9:20 PM] szybet
this bug makes sense... but it doesnt make sense why it worked till now


[3/4/2023 9:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-13014.png


[3/4/2023 9:21 PM] szybet
this overrides the cursor


[3/4/2023 9:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-4AB2E.png


[3/4/2023 9:21 PM] szybet
and it was created only when mouse true


[3/4/2023 9:22 PM] szybet
THEN WHY DID IT WORKED TILL LAST WEDNESDAY


[3/4/2023 9:22 PM] szybet
WHY DID IT WORK SOMETIMES ONLY WITH KEYBOARD


[3/4/2023 9:22 PM] szybet
i must do more tests... but inkbox booted with my compiled plugin


[3/4/2023 9:22 PM] szybet
im tired


[3/4/2023 9:23 PM] szybet
😞


[3/4/2023 9:23 PM] tux_linux
good luck
nice that you found something


[3/4/2023 9:23 PM] szybet
i think thats it


[3/4/2023 9:24 PM] szybet
maybe fucking unix time shifted a bit or something last Wednesday  and memory arranged otherwise and now it accessed something in private


[3/4/2023 9:25 PM] szybet
https://tenor.com/view/dies-from-cringe-d-ies-from-cringe-star-wars-star-wars-star-wars-meme-meme-gif-24121898

{Embed}
https://tenor.com/view/dies-from-cringe-d-ies-from-cringe-star-wars-star-wars-star-wars-meme-meme-gif-24121898
/mnt/data/projects/git/conversations/media/dies-from-cringe-d-ies-from-cringe-star-wa-127FA.png


[3/4/2023 11:20 PM] szybet
user app doesnt crash


[3/4/2023 11:20 PM] szybet
but the problem i was really trying to solve was keyboard for user apps


[3/4/2023 11:20 PM] szybet
so well


[3/4/2023 11:20 PM] szybet
¯\_(ツ)_/¯


[3/4/2023 11:26 PM] szybet
and for ./launch_user_application.sh ~~you forgot to set QT_QPA_PLATFORM~~ for inkbox, i need to add it, because after debbuging the user app it crashes, also PLATFORM_PAT smth liek that should be also set everywhere, because with a custom qt the path could be diffrent, and we still should support at least a bit of custom qt compiled things. if i need QLIBINPUT too, i won't force you to add it, i will simply add mine, and then it could be a problem with the path, idk something like that


[3/4/2023 11:29 PM] tux_linux
It's supposed to add it automatically


[3/4/2023 11:29 PM] szybet
well it gets it from inkbox-bin, as a child


[3/4/2023 11:29 PM] szybet
but i launch it directly for chroot


[3/4/2023 11:31 PM] tux_linux
well then no need to add it


[3/4/2023 11:32 PM] szybet
lets do the work for as and every imaginable user app developer easier, ok?


[3/4/2023 11:32 PM] tux_linux
I'll see


[3/8/2023 10:46 PM] szybet
@tux-linux should the kobo nia have model number 306 in platform plugin?


[3/8/2023 10:50 PM] szybet
and what with this, decide


[3/8/2023 10:59 PM] tux_linux
n306


[3/8/2023 10:59 PM] tux_linux
.


[3/8/2023 10:59 PM] tux_linux
For your second inquiry


[3/8/2023 10:59 PM] szybet
its an int i think


[3/8/2023 11:00 PM] szybet
and what


[3/8/2023 11:00 PM] tux_linux
No, use qstrings
"n306\n" for consistency and compatibility


[3/8/2023 11:01 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-072DB.png


[3/8/2023 11:01 PM] tux_linux
What do I have to decide


[3/8/2023 11:01 PM] szybet
its not my thing


[3/8/2023 11:01 PM] szybet
i just ak


[3/8/2023 11:01 PM] szybet
its still an int


[3/8/2023 11:01 PM] szybet
explain


[3/8/2023 11:01 PM] tux_linux
Well you said "decide"


[3/8/2023 11:02 PM] tux_linux
.


[3/8/2023 11:02 PM] tux_linux
Oh


[3/8/2023 11:02 PM] tux_linux
Where is it used normally


[3/8/2023 11:03 PM] szybet
and i said explain


[3/8/2023 11:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-BFBA9.png


[3/8/2023 11:04 PM] tux_linux
Ouch what are these


[3/8/2023 11:04 PM] szybet
🥴


[3/8/2023 11:04 PM] tux_linux
Search for 437


[3/8/2023 11:04 PM] szybet
none


[3/8/2023 11:05 PM] tux_linux
@NiLuJe what are these numbers about again? Thanks


[3/8/2023 11:05 PM] tux_linux
The ones here


[3/8/2023 11:09 PM] szybet
shouldnt DEVICE_CODENAME be applied to the user app from the upper script, even if its launched from a inside in script ( fixed, env -i was deleting it )


[3/8/2023 11:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-16C57.png


[3/8/2023 11:11 PM] szybet
thi is depraceted, right?


[3/8/2023 11:12 PM] szybet
and the what
```
kobo:/# cat /kobo/mnt/onboard/.kobo/version
N705362002807,2.6.35.3,4.26.16704,2.6.35.3,2.6.35.3,00000000-0000-0000-0000-000000000340
kobo:/# 
```


[3/8/2023 11:26 PM] szybet
here is the full function that i have doubts for

{Attachments}
/mnt/data/projects/git/conversations/media/message-57484.txt


[3/8/2023 11:26 PM] szybet
please answer the DPI and clean the function till tommorow, i will make a second pull request with fixes


[3/8/2023 11:26 PM] szybet
+ gui app keyboard works oob now


[3/8/2023 11:26 PM] szybet
lovely


[3/8/2023 11:34 PM] tux_linux
NO


[3/8/2023 11:34 PM] szybet
i dont have such a file


[3/8/2023 11:35 PM] tux_linux
`cat /bin/kobo_config.sh`


[3/8/2023 11:35 PM] szybet
oh, not in chroot


[3/8/2023 11:35 PM] tux_linux
cat /kobo/bin/kobo_config.sh
Idk


[3/8/2023 11:35 PM] tux_linux
Somewhere


[3/8/2023 11:35 PM] szybet
sure

{Reactions}
👍 

[3/8/2023 11:36 PM] tux_linux
That is not what it should be but it makes the rest work so don't touch it...


[3/8/2023 11:36 PM] szybet
https://tenor.com/view/do-not-touch-it-programmer-walking-cow-coding-gif-17252607

{Embed}
https://tenor.com/view/do-not-touch-it-programmer-walking-cow-coding-gif-17252607
/mnt/data/projects/git/conversations/media/do-not-touch-it-programmer-8D8E7.png

{Reactions}
🥴 

[3/8/2023 11:36 PM] tux_linux
I don't remember
env is mysterious sometimes


[3/8/2023 11:37 PM] szybet
fixed


[3/8/2023 11:37 PM] tux_linux
In what way?


[3/8/2023 11:37 PM] szybet
fixed, env -i was deleting it


[3/8/2023 11:37 PM] szybet
fixed, env -i was deleting itfixed, env -i was deleting it


[3/8/2023 11:37 PM] szybet
fixed, env -i was deleting itfixed, env -i was deleting itfixed, env -i was deleting it


[3/8/2023 11:37 PM] szybet
fixed, env -i was deleting itfixed, env -i was deleting it


[3/8/2023 11:37 PM] szybet
fixed, env -i was deleting it


[3/8/2023 11:38 PM] tux_linux
Where was the -i


[3/8/2023 11:38 PM] szybet
in my command


[3/8/2023 11:38 PM] tux_linux
Ok


[3/8/2023 11:38 PM] szybet
and i coppied it from sanki


[3/8/2023 11:38 PM] tux_linux
User app command?


[3/8/2023 11:38 PM] szybet
and sanki was based on conway


[3/8/2023 11:39 PM] tux_linux
Oh no


[3/8/2023 11:39 PM] szybet
look up recent ocmmit


[3/8/2023 11:39 PM] tux_linux
You tried to run it from shell


[3/8/2023 11:39 PM] tux_linux
Instead of userapp button


[3/8/2023 11:39 PM] tux_linux
Right?


[3/8/2023 11:39 PM] szybet
no


[3/8/2023 11:39 PM] szybet
feathernotes.sh


[3/8/2023 11:39 PM] szybet
launched .bin


[3/8/2023 11:39 PM] tux_linux
Then how does it not work like before


[3/8/2023 11:39 PM] szybet
i mean it worked


[3/8/2023 11:40 PM] szybet
but i fixed rotation i mean everything now points to /sys/fb/rotate something like that


[3/8/2023 11:40 PM] szybet
it doesnt knew the device and freaked out


[3/8/2023 11:40 PM] tux_linux
What's the link with what we are taking about


[3/8/2023 11:40 PM] szybet
and yea inkbox will need to be fixed with this for all devices


[3/8/2023 11:40 PM] tux_linux
Ouch


[3/8/2023 11:40 PM] szybet
it doesnt knew the device and freaked out


[3/8/2023 11:41 PM] tux_linux
So you needed to do...


[3/8/2023 11:41 PM] szybet
fix that it knows where the sys path is


[3/8/2023 11:41 PM] szybet
to read the rotation


[3/8/2023 11:41 PM] szybet
nah, at some point i will rotate inkbox


[3/8/2023 11:42 PM] szybet
i mean move bottom and top panel and menu to the left and right


[3/8/2023 11:42 PM] szybet
😄


[3/8/2023 11:42 PM] tux_linux
Ok and what do I need to do for other devices?


[3/8/2023 11:42 PM] szybet
test


[3/8/2023 11:43 PM] szybet
inkbox has some weird invert x rotate y something argumentes,


[3/8/2023 11:43 PM] tux_linux
It's the platform plugin
Not InkBox


[3/8/2023 11:43 PM] szybet
no, inkbox has arguments for it


[3/8/2023 11:43 PM] tux_linux
Except if you're talking about some kernel modifications I had to do for some devices


[3/8/2023 11:43 PM] tux_linux
Really?


[3/8/2023 11:43 PM] tux_linux
Then it must be qt


[3/8/2023 11:44 PM] szybet
+ you will need to set default rotation for devices ( maybe it differs ) and run it at inkbox launch


[3/8/2023 11:44 PM] szybet
echo the sys, thats all


[3/8/2023 11:45 PM] szybet
well maybe set the rotation at inkbox_gui launch only


[3/8/2023 11:46 PM] szybet
so everything else will need to care at its own for rotation, which will open up a way for a launcher app eassly


[3/8/2023 11:47 PM] szybet
**TLDR a shell file that sets default rotation depending on device, runned on inkbox_gui launch and thats it + test touch input for every device**


[3/8/2023 11:50 PM] szybet
and maybe can i rename system-bin to bin in user apps? this breaks shell files eassly... and default rotation is one of them


[3/8/2023 11:51 PM] tux_linux
No


[3/8/2023 11:51 PM] szybet
thats a quick anwer to a lot of text


[3/8/2023 11:51 PM] tux_linux
#!/system-bin/sh


[3/8/2023 11:51 PM] szybet
his breaks shell files eassly... and default rotation is one of them


[3/8/2023 11:51 PM] szybet
do you want every user app to ship a script to set rotation?


[3/8/2023 11:52 PM] tux_linux
No, maybe not all of them need it?


[3/8/2023 11:52 PM] szybet
bruh


[3/8/2023 11:52 PM] szybet
why do you complicate things


[3/8/2023 11:52 PM] tux_linux
It should be implemented as a FIFO function somewhere in an ibxd-like service


[3/8/2023 11:53 PM] szybet
i dont like ibxd


[3/8/2023 11:53 PM] tux_linux
So that non-root users could rotate screen


[3/8/2023 11:53 PM] tux_linux
How do you get your user app to rotate screen?


[3/8/2023 11:53 PM] szybet
chmod 777 the rotate file in sys


[3/8/2023 11:53 PM] szybet
simplest, leave it.


[3/8/2023 11:54 PM] szybet
you won't implement a ibxd function for every sys call i want to make


[3/8/2023 11:54 PM] tux_linux
List them


[3/8/2023 11:55 PM] szybet
brightness
/sys/kernel/debug usb managing
rotating
i2c devices management


[3/8/2023 11:55 PM] szybet
and thats only for feathernotes


[3/8/2023 11:55 PM] szybet
stop overcomplicating


[3/8/2023 11:55 PM] tux_linux
i2c is dangerous


[3/8/2023 11:55 PM] szybet
i know


[3/8/2023 11:55 PM] szybet
and?


[3/8/2023 11:56 PM] tux_linux
Could be used for a security exploit


[3/8/2023 11:56 PM] szybet
https://tenor.com/view/ups-ops-otka%C4%8Deni-uh-ooo-gif-19207499

{Embed}
https://tenor.com/view/ups-ops-otka%C4%8Deni-uh-ooo-gif-19207499
/mnt/data/projects/git/conversations/media/ups-ops-25F42.png


[3/8/2023 11:56 PM] szybet
or to burn the device


[3/8/2023 11:56 PM] tux_linux
Yes


[3/8/2023 11:56 PM] szybet
well i use it anyways ;p


[3/8/2023 11:56 PM] tux_linux
What are the commands you send


[3/8/2023 11:56 PM] tux_linux
And how do you send them


[3/8/2023 11:57 PM] szybet
i2cset -y -f 3 0x32 0xb3 0x20


[3/8/2023 11:57 PM] szybet
stoppppppppp leave my sys filesystem alone


[3/8/2023 11:58 PM] szybet
if the user doesnt want it, he will not launch it


[3/8/2023 11:58 PM] tux_linux
And what does this do


[3/8/2023 11:58 PM] szybet
all power, is used through usb, not battery ( except power spikesabove 500 mA )


[3/8/2023 11:58 PM] szybet
and disables charging


[3/8/2023 11:58 PM] tux_linux
Nice


[3/8/2023 11:58 PM] szybet
dont test it on your devices


[3/8/2023 11:58 PM] tux_linux
But dangerous


[3/8/2023 11:59 PM] szybet
well only way


[3/8/2023 11:59 PM] szybet
https://github.com/Szybet/niAudio/blob/main/power.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/power.md
niAudio/power.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[3/8/2023 11:59 PM] szybet
other things too


[3/8/2023 11:59 PM] tux_linux
Well ok, one more reason to sign user apps ourselves


[3/8/2023 11:59 PM] szybet
so sys filesystem, not pipe?


[3/9/2023 12:00 AM] tux_linux
I will add a pipe for brightness and rotation


[3/9/2023 12:00 AM] szybet
my god


[3/9/2023 12:00 AM] tux_linux
Probably will be easier to access than to get into sys


[3/9/2023 12:00 AM] szybet
its the same method


[3/9/2023 12:00 AM] szybet
the same function


[3/9/2023 12:00 AM] szybet
just diffrent path


[3/9/2023 12:00 AM] tux_linux
For debugfs you can add a required feature thing


[3/9/2023 12:01 AM] szybet
you know user app will spam brightness because of slider


[3/9/2023 12:01 AM] szybet
just agree to sys filesystem, i want to go to sleep already ;p


[3/9/2023 12:02 AM] tux_linux
Well, only one thing can spam it at once


[3/9/2023 12:03 AM] tux_linux
sys or proc can sometimes give access to device serial numbers


[3/9/2023 12:03 AM] szybet
the pipe is overcomplicating things


[3/9/2023 12:03 AM] tux_linux
Control or disable touchscreen


[3/9/2023 12:03 AM] tux_linux
Throwing whole sys there for user app is probably not the best idea


[3/9/2023 12:03 AM] szybet
you give write access only to what you allow it to


[3/9/2023 12:04 AM] tux_linux
Well, maybe then


[3/9/2023 12:04 AM] szybet
i wont chmod -R 777 /sys/


[3/9/2023 12:04 AM] szybet
;-;


[3/9/2023 12:05 AM] szybet
https://github.com/Kobo-InkBox/rootfs/blob/3923cd4f4d2969b6f29b35c772deaed5546aff07/etc/init.d/gui_apps#L67
its already mounted read only because its the only normal way to do it

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/3923cd4f4d2969b6f29b35c772deaed5546aff07/etc/init.d/gui_apps
rootfs/gui_apps at 3923cd4f4d2969b6f29b35c772deaed5546aff07 · Kobo-...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-48B85


[3/9/2023 12:05 AM] tux_linux
You need to add a hard limit for devices that don't support your i2c commands


[3/9/2023 12:05 AM] tux_linux
Completely prevent execution of user app on non-compatible devices


[3/9/2023 12:06 AM] tux_linux
Like unsupported device, but you don't have the option to launch it anyway


[3/9/2023 12:06 AM] szybet
we give access only to files that are used to set things, like rotation, brightness

{Reactions}
👍 

[3/9/2023 12:06 AM] tux_linux
But then it becomes a mess because devices have different node paths


[3/9/2023 12:06 AM] szybet
i will not *propably* use it inside user app, if IPD managing it will be reliable, but i will see

{Reactions}
👍 

[3/9/2023 12:07 AM] szybet
and thats why we need to develop a kobo-inkbox library for managing such things


[3/9/2023 12:07 AM] szybet
for 2.1~


[3/9/2023 12:07 AM] tux_linux
Yes
Or maybe just standardize names in every kernel source...


[3/9/2023 12:08 AM] szybet
https://tenor.com/view/nope-gif-10699219

{Embed}
https://tenor.com/view/nope-gif-10699219
/mnt/data/projects/git/conversations/media/nope-9935D.png


[3/9/2023 12:08 AM] szybet
so sys then? no pipe? can i go to sleep now?


[3/9/2023 12:09 AM] tux_linux
Yes
But no general sys chmod
Good night!


[3/9/2023 12:11 AM] szybet
thanks finally 😆


[3/9/2023 12:11 AM] szybet
good night


[3/9/2023 12:12 AM] tux_linux
Well


[3/9/2023 12:13 AM] tux_linux
chmod generally so that users can't even read sys files

{Reactions}
👍 

[3/9/2023 12:13 AM] tux_linux
Then chmod 777 individually


[3/9/2023 8:09 PM] szybet
https://pl.wikipedia.org/wiki/Dpi

{Embed}
https://pl.wikipedia.org/wiki/Dpi
Dpi
dpi (ang. dots per inch) – liczba punktów obrazu przypadająca na cal. Jednostka stosowana do określenia rozdzielczości obrazów generowanych przez drukarki, plotery, naświetlarki itp. Pojęcie to jest bardzo rozpowszechnione i często stosowane także jako potoczny zamiennik określeń pokrewnych, jak ppi (pixels per inch – pikseli na cal), czyli jedn...


[3/9/2023 8:09 PM] szybet
https://pl.wikipedia.org/wiki/Ppi

{Embed}
https://pl.wikipedia.org/wiki/Ppi
Ppi
ppi (ang. pixels per inch) – liczba pikseli przypadająca na cal długości. Jednostka stosowana do określania rozdzielczości obrazów cyfrowych.
Przy określaniu rozdzielczości obrazów często zamiast jednostki ppi mylnie używa się określenia dpi (ang. dots per inch – punktów na cal), które odnosi się do rozdzielczości urządzeń drukujących lub naświe...


[3/9/2023 8:09 PM] szybet
https://eu.kobobooks.com/pl/products/kobo-nia

{Embed}
https://eu.kobobooks.com/pl/products/kobo-nia
Kobo Nia
Kobo Nia lets you to carry up to 6,000 eBooks anywhere you go with 8GB of storage and a battery charge that can last for weeks. Read in the sun on a glare-free 6" touchscreen, or read at night with built-in, adjustable ComfortLight. Shop now.
/mnt/data/projects/git/conversations/media/Luna_Front_2_EN_1200x1200-5F521.jpg


[3/9/2023 8:09 PM] szybet
its 212


[3/9/2023 9:21 PM] szybet
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/pull/2

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/pull/2
fixes... by Szybet · Pull Request #2 · Kobo-InkBox/qt5-kobo-platfor...
/mnt/data/projects/git/conversations/media/2-908CB


[3/9/2023 9:50 PM] szybet
can you disable those tests for me, annoying

{Attachments}
/mnt/data/projects/git/conversations/media/image-53812.png


[3/9/2023 9:50 PM] szybet
im not a robot, propably


[3/9/2023 10:35 PM] tux_linux
It's because spammers


[3/9/2023 10:35 PM] tux_linux
Before I had hundreds of trash pages and user accounts


[3/9/2023 10:35 PM] tux_linux
This solves the problem for now


[3/9/2023 10:35 PM] szybet
bruh


[3/9/2023 10:36 PM] szybet
cant you disable it for me


[3/9/2023 10:36 PM] tux_linux
Yes, hundreds


[3/9/2023 10:36 PM] tux_linux
I don't know


[3/9/2023 10:36 PM] szybet
ok


[3/9/2023 10:36 PM] szybet
btw urandom isin't created when terminal support is requested


[3/9/2023 10:37 PM] tux_linux
Not another bug


[3/9/2023 10:37 PM] tux_linux
How


[3/9/2023 10:37 PM] szybet
idk, just noticed it


[3/9/2023 10:37 PM] szybet
like look
```
kobo:/data/onboard/.apps/feathernotes/feathernotes# ls -shal dev/
total 0      
     0 drwxrwxrwt    5 root     root         160 Mar  9 22:32 .
     0 drwxrwxrwx   14 user     user           0 Mar  9 22:28 ..
     0 crw-r--r--    1 user     user       29,   0 Mar  9 22:32 fb0
     0 drwxr-xr-x    2 user     user         420 Mar  9 22:32 input
     0 drwxr-xr-x    2 root     root          60 Mar  9 22:32 ipd
     0 crw-r--r--    1 user     user        5,   2 Mar  9 22:32 ptmx
     0 drwxr-xr-x    2 root     root           0 Jan  1  1970 pts
     0 crw-r--r--    1 user     user        5,   0 Mar  9 22:32 tty
kobo:/data/onboard/.apps/feathernotes/feathernotes# 
```


[3/9/2023 10:39 PM] tux_linux
It can't be


[3/9/2023 10:39 PM] tux_linux
Debug it


[3/9/2023 10:39 PM] tux_linux
It has to work


[3/9/2023 10:39 PM] tux_linux
Qt won't like it otherwise


[3/9/2023 10:39 PM] tux_linux
Maybe because something you missed in rewriting the script?


[3/9/2023 10:40 PM] szybet
nope


[3/9/2023 10:40 PM] szybet
urandom is needed by qt always ( see the strace i provided ) i will add urandom always


[3/9/2023 10:41 PM] tux_linux
Well it worked before


[3/9/2023 10:41 PM] tux_linux
You need to know what caused it to disappear


[3/9/2023 10:46 PM] szybet
fixed


[3/9/2023 10:46 PM] szybet
needed to add ! to -f


[3/9/2023 10:46 PM] szybet
¯\_(ツ)_/¯


[3/9/2023 10:54 PM] szybet
https://github.com/Kobo-InkBox/rootfs/pull/4

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/4
gui apps fixes and features by Szybet · Pull Request #4 · Kobo-InkB...
/mnt/data/projects/git/conversations/media/4-E1985


[3/9/2023 10:55 PM] szybet
fourth pull request today


[3/9/2023 10:55 PM] szybet
for you to check


[3/9/2023 10:55 PM] szybet
;p...


[3/9/2023 11:08 PM] szybet
also please finnaly do something about my gui-bundle pull request - change it as you want, whatever - accept it in any form


[3/9/2023 11:30 PM] szybet
remember: for those 2 pull request you need to check if touch works in all rotation options and if rotation works too on devices + add somewhere in inkbox gui service to set initial rotation + set it


[3/9/2023 11:31 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230309_233102-F99C2.jpg


[3/9/2023 11:31 PM] szybet
looks good


[3/9/2023 11:31 PM] szybet
could be better


[3/9/2023 11:31 PM] szybet
i need to set folder width, it pushed it over


[3/9/2023 11:32 PM] szybet
but works


[3/9/2023 11:33 PM] szybet
+ gui app keyboard works perfectly now


[3/9/2023 11:38 PM] tux_linux
for loops : *exist*

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230309-173748_GitHub-9EDCD.png


[3/9/2023 11:38 PM] szybet
bash horrible syntax : exists too


[3/9/2023 11:38 PM] szybet
it sh, even worse


[3/9/2023 11:39 PM] tux_linux
It's less pain for the eyes


[3/9/2023 11:40 PM] szybet
i dislike it.


[3/9/2023 11:40 PM] tux_linux
People won't hire you if you write such code


[3/9/2023 11:40 PM] tux_linux
So
Try and learn ?


[3/9/2023 11:41 PM] tux_linux
You have my cat's support

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230309_224103470-B34B8.jpg


[3/9/2023 11:42 PM] szybet
good that no one will hire me for shell scripts


[3/9/2023 11:42 PM] szybet
do you want it rewritten in c++? rust?


[3/9/2023 11:42 PM] szybet
cool cat

{Reactions}
👍 

[3/9/2023 11:42 PM] szybet
it hurts my eyes, is horrible and the worst. Noooo thanks


[3/9/2023 11:42 PM] tux_linux
People may not only hire you for shell scripts...


[3/9/2023 11:43 PM] szybet
good then, because i can write this in a for loop in c++ or rust with closed eyes


[3/9/2023 11:45 PM] tux_linux
you forgot general chmod of sys


[3/9/2023 11:45 PM] tux_linux
don't allow users to read files


[3/9/2023 11:45 PM] tux_linux
except the ones they are allowed to use


[3/9/2023 11:46 PM] szybet
oh this


[3/9/2023 11:46 PM] tux_linux
where do you even mount sys


[3/9/2023 11:46 PM] szybet
well if you add it then remember that other users ( as in permission ) require execute permission for folders to open them


[3/9/2023 11:47 PM] szybet
i didn't touched it


[3/9/2023 11:47 PM] tux_linux
oh i mounted it already


[3/9/2023 11:47 PM] tux_linux
not so secure... oops


[3/9/2023 11:48 PM] tux_linux
well you can add it after `mount -t sysfs sysfs -o nosuid "${extension_mountpoint}/sys" *&& ...*`


[3/9/2023 11:51 PM] szybet
just chmod -R 001 it


[3/9/2023 11:51 PM] tux_linux
ok


[3/9/2023 11:52 PM] szybet
```
#!/bin/sh

i=0
while [ $i -lt 8 ]
do
    event_num=$((i+67))
    event_idx=$((i+3))
    mknod "${extension_mountpoint}/dev/input/event${event_idx}" c 13 ${event_num} || die "Failed add input device" 1
    i=$((i+1))
done

j=0
while [ $j -lt 7 ]
do
    mouse_num=$((j+32))
    mknod "${extension_mountpoint}/dev/input/mouse${j}" c 13 ${mouse_num} || die "Failed add input device" 1
    j=$((j+1))
done

# create the "mice" file
mknod "${extension_mountpoint}/dev/input/mice" c 13 63 || die "Failed add input device" 1
```


[3/9/2023 11:52 PM] tux_linux
yes, this


[3/9/2023 11:52 PM] tux_linux
good


[3/9/2023 11:52 PM] szybet
here, chat gpt awfull code


[3/9/2023 11:52 PM] szybet
well test it first lol


[3/9/2023 11:52 PM] tux_linux
ofc


[3/9/2023 11:52 PM] szybet
```
#!/bin/bash

for i in {0..7}
do
    event_num=$((i+67))
    event_idx=$((i+3))
    mknod "${extension_mountpoint}/dev/input/event${event_idx}" c 13 ${event_num} || die "Failed add input device" 1
done

for j in {0..6}
do
    mouse_num=$((j+32))
    mknod "${extension_mountpoint}/dev/input/mouse${j}" c 13 ${mouse_num} || die "Failed add input device" 1
done

# create the "mice" file
mknod "${extension_mountpoint}/dev/input/mice" c 13 63 || die "Failed add input device" 1
```


[3/9/2023 11:52 PM] szybet
bash is less chaotic, still evil


[3/9/2023 11:52 PM] tux_linux
better not use bash on embedded systems


[3/9/2023 11:53 PM] szybet
test if you cant cd into folders manually inside chroot

{Reactions}
👍 

[3/9/2023 11:53 PM] szybet
everything will be rust*


[3/9/2023 11:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/ZYKCJs-rust_poster-2A3E7.png


[3/9/2023 11:57 PM] tux_linux
vaguely looks like a war propaganda poster


[3/9/2023 11:57 PM] szybet
it is


[3/9/2023 11:57 PM] szybet
it is war


[3/9/2023 11:57 PM] szybet
WITH THIS HORRIBLE SH SYNTAX DO YOU UNDERSTAND


[3/9/2023 11:59 PM] szybet
like for real, if some beggining developer wants to start with inkbox and learn rust / cpp i will send him to rewrite those shell scripts


[3/9/2023 11:59 PM] tux_linux
it is not horrible

{Reactions}
🤝 

[3/9/2023 11:59 PM] tux_linux
I find it easier to understand than cpp sometimes


[3/10/2023 12:00 AM] tux_linux
maybe because I work too much with computers everyday I'm starting to become one myself?


[3/10/2023 12:01 AM] szybet
you are easier to understand than computers most of the time, so i dont think thats the point

{Reactions}
👍 

[3/10/2023 12:04 AM] szybet
chat gpt refuses to stop using "system" calls 😆

{Attachments}
/mnt/data/projects/git/conversations/media/message-132EE.txt


[3/10/2023 12:04 AM] szybet
well anyway this doesnt work


[3/10/2023 6:39 PM] szybet
https://github.com/Szybet/gui-bundle

{Embed}
https://github.com/Szybet/gui-bundle
GitHub - Szybet/gui-bundle: InkBox GUI bundle contents and generati...
InkBox GUI bundle contents and generation script. Contribute to Szybet/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-51239


[3/10/2023 6:39 PM] szybet
here are also other fixes


[3/10/2023 6:39 PM] szybet
+ dpi


[3/10/2023 7:38 PM] ninuje
They're the actual internal device code (e.g, for API calls like a FW update request), and easily slurped from the Nickel version tag  (.kobo/version)


[3/10/2023 7:39 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/6572b5f393f810785e382104391d177120da46f6/fbink.h#L209-L238

{Embed}
https://github.com/NiLuJe/FBInk/blob/6572b5f393f810785e382104391d177120da46f6/fbink.h
FBInk/fbink.h at 6572b5f393f810785e382104391d177120da46f6 · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 6572b5f393f810785e382104391d177120da46f6 · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-BE769


[3/10/2023 7:40 PM] ninuje
(As well as basically everybody else's code. You're the only weirdos using the crappy model numbers ;p)

{Reactions}
😂 

[3/10/2023 10:44 PM] tux_linux
Welp, ok, thanks for the clarification


[3/13/2023 10:32 AM] szybet
https://openlibrary.org/

{Embed}
https://openlibrary.org/
Open Library is an open, editable library catalog, building towards a web page for every book ever published. Read, borrow, and discover more than 3M books for free.


[3/13/2023 10:32 AM] szybet
If we rewrite online library, lets make it easy to add other backend stores


[3/13/2023 11:06 AM] szybet
Also @tux-linux can i now update qt on gui bundle? I want libinput integrated


[3/13/2023 3:18 PM] tux_linux
...not...now...not...now


[3/13/2023 3:18 PM] tux_linux
Who said it needed a rewrite


[3/13/2023 3:19 PM] tux_linux
Why did you write
```
deviceModel = 0;
```
or something like that in platform plugin code?


[3/13/2023 4:07 PM] szybet
i didn't said now


[3/13/2023 4:08 PM] szybet
you screaming that those scripts just freeze with no reason


[3/13/2023 4:08 PM] tux_linux
They seem not to freeze lately


[3/13/2023 4:11 PM] szybet
default values + ai explains


[3/13/2023 4:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-DA2D7.png


[3/13/2023 4:18 PM] tux_linux
Well ok


[3/14/2023 7:43 AM] szybet
@Aramir did you use kde qt on kobo?


[3/14/2023 7:49 AM] szybet
There isint a changelog for kde patches even


[3/14/2023 8:57 AM] aryetis
yes that's what I used


[3/14/2023 9:32 AM] szybet
1. Can you send me the whole toolchain / compiled qt?
2. Did you used both regular and this? Any diffrences?
3. Do you know where to get the list of fixes?
4. Does getting resolution of textedit work on kdeqt??


[3/14/2023 2:48 PM] loiz6530
Is there a way to install python3 and pygame ?


[3/14/2023 3:10 PM] szybet
Yes?


[3/14/2023 3:10 PM] szybet
But what?


[3/14/2023 3:10 PM] szybet
Python launches for 30 seconds, just the pure interpreter


[3/14/2023 3:11 PM] szybet
Dont even try pygame...


[3/14/2023 3:15 PM] loiz6530
I want to make a dashboard for my house with a Kobo glo.


[3/14/2023 3:15 PM] szybet
Sure, it is possible


[3/14/2023 3:16 PM] szybet
Idk if qt + python would work


[3/14/2023 3:16 PM] szybet
Why pygame?...


[3/14/2023 3:16 PM] szybet
Anyway we use qt c++ for such things


[3/14/2023 3:34 PM] loiz6530
Pygame and python are just to make it easier


[3/14/2023 3:35 PM] loiz6530
I've Never make qt before


[3/14/2023 3:43 PM] loiz6530
Is there a documentation to buid apps with qt and c++ with toolchain installation...


[3/14/2023 3:46 PM] szybet
Yes there is. Search the chat or remind me later to send it to you. I m on phone currently


[3/14/2023 3:46 PM] szybet
Always time to learn


[3/14/2023 3:47 PM] szybet
They wont run, at all on this kind of hardware


[3/14/2023 3:47 PM] szybet
Or very slow


[3/14/2023 3:48 PM] szybet
Well look up github niaudio szybet apps on kobo folder


[3/14/2023 3:56 PM] loiz6530
I will look


[3/14/2023 3:56 PM] loiz6530
Thanks


[3/14/2023 4:40 PM] aryetis
1. I'm simply using the stuff from OfficerAction <https://github.com/Rain92/kobo-qt-setup-scripts> (it gets qt 5.15 kde), sure I can send you some compiled qt. Ping me again in 5/6 hours in case I forgot.
2. Used both. Overall less weird behaviours and new features cause I also jumped to a new qt. But I was also very very bad at qt when I was using the vanilla one, so I ended up miss-using a bunch of functions.
3. no idea :/
4. probably, I don't use textEdit yet.


[3/14/2023 4:41 PM] aryetis
If I have time I can try to get a quick test working for textEdit if you give me some test cases you want to try.


[3/14/2023 4:45 PM] aryetis
I have some notes for making kobo-qt-setup-scripts work on my setup <https://github.com/Aryetis/Obenkyobo/blob/master/DevReadme.md#setup-the-environment> it might help.


[3/14/2023 4:46 PM] aryetis
cause the scripts struggles to compile some stuff such as libbrotli


[3/14/2023 4:49 PM] aryetis
(can't access my WSL files right now, so I'll upload compiled qt when I get back at home)


[3/14/2023 4:49 PM] szybet
can you imagine i haven't knew the guide from rain92 till now?


[3/14/2023 4:49 PM] szybet
😂


[3/14/2023 4:50 PM] aryetis
I honestly don't know if that's sarcasm or not :p


[3/14/2023 4:50 PM] szybet
okay thanks. will do them soon ( next days, weekd )

{Reactions}
👍 

[3/14/2023 4:50 PM] aryetis
probably .... I hope so.


[3/14/2023 4:51 PM] szybet
its not


[3/14/2023 4:51 PM] aryetis
take your time I've got some exam to cram.


[3/14/2023 4:51 PM] szybet
i thought it was broken so only resource for me were a few lines of description in the manga reader repo, and a broken link to this repo apparently


[3/14/2023 4:52 PM] aryetis
yeah there's a missing `s` in the links


[3/14/2023 4:52 PM] aryetis
I've told him about it a few times :p


[3/14/2023 4:53 PM] szybet
🥴


[3/14/2023 4:53 PM] szybet
for the pain it was for me to setup... why... bruh


[3/14/2023 4:53 PM] aryetis
there's even a docker image for it ^^
(I don't use docker tho so I don't know if it works)


[3/14/2023 4:54 PM] szybet
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/qt-setup.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/qt-setup.md
niAudio/qt-setup.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[3/14/2023 4:54 PM] szybet
or the rain92 one


[3/14/2023 4:54 PM] szybet
well i did one for mine too, so cool


[3/14/2023 4:55 PM] aryetis
if you use rain92's one (<https://github.com/Rain92/kobo-qt-setup-scripts>), my notes might help you fix some problems you might encounter along the way <https://github.com/Aryetis/Obenkyobo/blob/master/DevReadme.md#setup-the-environment>

{Reactions}
👍 

[3/14/2023 5:33 PM] tux_linux
Don't forget hard-coded paths in compiled binaries...


[3/14/2023 7:18 PM] szybet
point 1, i asked for them


[3/14/2023 9:42 PM] szybet
@NiLuJe are there any eink datasheets containing specific tests on how long they would last?


[3/14/2023 9:46 PM] tux_linux
Very long


[3/14/2023 9:47 PM] tux_linux
Considering my abusive use of VNC on pretty much every kind of eReader, I can say they last very long


[3/14/2023 9:47 PM] tux_linux
Haven't seen one "fail" or ghost
Except that my kobo mini's screen darkens if not refreshed for a long while (>1day)


[3/14/2023 9:48 PM] szybet
Well i use it as a text editor


[3/14/2023 9:48 PM] szybet
Do im curious


[3/14/2023 9:49 PM] szybet
+ how cool would be adding a counter for pixels, how much the screen already is depleted? Used?


[3/14/2023 9:49 PM] szybet
Idk english


[3/14/2023 9:53 PM] szybet
Or other statistics


[3/14/2023 9:53 PM] szybet
A HEATMAP EVEN


[3/14/2023 9:53 PM] szybet
https://media.discordapp.net/attachments/742373302768762930/1038493124986671225/halflife_cat.gif

{Embed}
https://media.discordapp.net/attachments/742373302768762930/1038493124986671225/halflife_cat.gif
/mnt/data/projects/git/conversations/media/halflife_cat-E4C1D.gif


[3/15/2023 3:43 AM] tux_linux
then you'll probably be fine for the next ten years


[3/15/2023 3:43 AM] tux_linux
looks too much like my cat


[3/15/2023 3:44 AM] tux_linux
Translation : **Lilou the First, Empress of Greece**
*("graisse" in French means "fat", so that's the pun)*

{Attachments}
/mnt/data/projects/git/conversations/media/lilou-AE131.png


[3/15/2023 3:44 AM] tux_linux
admit it matches her quite well...


[3/15/2023 3:44 AM] tux_linux
😉


[3/15/2023 8:06 AM] szybet
Yea


[3/15/2023 11:11 AM] szybet
@tux-linux if you really dont want giving me permissions, is there an option to give me just permissions to add webhooks in github repos? Its for the matrix bot


[3/15/2023 11:47 AM] tux_linux
I don't know if it's possible
What do you want to do with the Matrix bot


[3/15/2023 12:18 PM] szybet
Have it


[3/15/2023 12:18 PM] szybet
It notifies about everything


[3/15/2023 4:50 PM] szybet
https://github.com/Kobo-InkBox/rootfs/commit/fdf2fedce968d3ec1227070dfca2247c53a9c0dd

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/fdf2fedce968d3ec1227070dfca2247c53a9c0dd
Some fixes · Kobo-InkBox/rootfs@fdf2fed
/mnt/data/projects/git/conversations/media/fdf2fedce968d3ec1227070dfca2247c53a9c0dd-DFC82


[3/15/2023 4:50 PM] szybet
explain


[3/15/2023 6:49 PM] szybet
@tux-linux can i create a repo with qt toolchain / libs?


[3/15/2023 6:49 PM] szybet
so we can both upload there libs / updated qt


[3/15/2023 6:55 PM] szybet
also, do you want libusb, usbutils, libudev + modified qt officialy in inkbox?


[3/15/2023 6:57 PM] szybet
if i got them to work


[3/15/2023 6:57 PM] szybet
libudev needs usbutils, usbutils needs libusb and libusb needs libudev


[3/15/2023 6:57 PM] szybet
bruh


[3/15/2023 8:30 PM] szybet
`./.libs/libblkid.so: undefined reference to ``static_assert'`


[3/15/2023 8:30 PM] szybet
well here i give up


[3/15/2023 8:47 PM] tux_linux
Update squashfuse
Fix page refresh setting not bind-mounting


[3/15/2023 8:51 PM] szybet
```
checking for USBUTILS... no
configure: error: Package requirements (usbutils >= 0.82) were not met:

Package 'usbutils', required by 'virtual:world', not found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables USBUTILS_CFLAGS
and USBUTILS_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
20:49 szybet@hyperbookszyb /mnt/HDD/Project/qt-test/udev-182/udev-182
```


[3/15/2023 8:51 PM] szybet
```
checking for library containing clock_gettime... -lrt
checking for pthread_setname_np... yes
checking for libudev.h... yes
checking for udev_new in -ludev... no
configure: error: udev support requested but libudev not installed
20:50 szybet@hyperbookszyb /mnt/HDD/Project/qt-test/libusb
```


[3/15/2023 8:52 PM] szybet
```
checking for pkg-config... /usr/bin/pkg-config
configure: WARNING: using cross tools not prefixed with host triplet
checking pkg-config is at least version 0.9.0... yes
checking for LIBUSB... no
configure: error: Package requirements (libusb-1.0 >= 1.0.14) were not met:

Package 'libusb-1.0', required by 'virtual:world', not found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables LIBUSB_CFLAGS
and LIBUSB_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
20:51 szybet@hyperbookszyb /mnt/HDD/Project/qt-test/usbutils
% 

```


[3/15/2023 8:52 PM] szybet
what the fuuuuuck


[3/15/2023 8:53 PM] tux_linux
Oh joy, pkg config mess


[3/15/2023 8:53 PM] szybet
libusb needs libudev, libudev needs usb utils, usb utils needs libusb


[3/15/2023 8:53 PM] szybet
there arent any pkgconfig files for those libs


[3/15/2023 8:53 PM] tux_linux
OH I remember trying to compile it I think


[3/15/2023 8:54 PM] tux_linux
I think I gave up


[3/15/2023 8:54 PM] tux_linux
Maybe it was in 2021
For usbms


[3/15/2023 8:54 PM] szybet
https://tenor.com/view/triggered-anime-smiling-shaking-angry-gif-17024997

{Embed}
https://tenor.com/view/triggered-anime-smiling-shaking-angry-gif-17024997
/mnt/data/projects/git/conversations/media/triggered-anime-73D02.png


[3/15/2023 8:54 PM] tux_linux
It also reminds me of a similar situation with libxml2 which required the whole ICU from Unicode


[3/15/2023 8:55 PM] tux_linux
Which was a pain to compile


[3/15/2023 8:55 PM] tux_linux
Maybe try on native alpine arm 3.10?


[3/15/2023 8:55 PM] tux_linux
Qemu-user?


[3/15/2023 8:55 PM] tux_linux
Take 3.10 otherwise it won't work for other devices


[3/15/2023 8:56 PM] szybet
i need it for qt


[3/15/2023 8:56 PM] szybet
its arm


[3/15/2023 8:56 PM] tux_linux
And glibc


[3/15/2023 8:57 PM] szybet
in the worse case i will try arch linux arm


[3/15/2023 8:57 PM] tux_linux
Forget it


[3/15/2023 8:57 PM] szybet
but nah


[3/15/2023 8:57 PM] tux_linux
Will probably complain


[3/15/2023 8:57 PM] tux_linux
Buildroot


[3/15/2023 8:57 PM] tux_linux
2015 buildroot


[3/15/2023 8:58 PM] tux_linux
GUI rootfs was built with buildroot 2015.x to avoid issues with glibc compatibility


[3/15/2023 8:58 PM] tux_linux
Buildroot is like a wizard when it comes to cross compiling libraries


[3/15/2023 8:58 PM] szybet
what build root


[3/15/2023 8:58 PM] tux_linux
If you build libusb there it should be compatible with GUI rootfs
Albeit a bit too old


[3/15/2023 8:59 PM] szybet
what you are talking about


[3/15/2023 8:59 PM] tux_linux
https://buildroot.org/


[3/15/2023 8:59 PM] tux_linux
You don't know buildroot?


[3/15/2023 8:59 PM] szybet
nope, only heard from it


[3/15/2023 9:00 PM] tux_linux
Well maybe it's your only hope


[3/15/2023 9:00 PM] szybet
what? like how? will it magically build those libraries for me?


[3/15/2023 9:00 PM] szybet
if its automated, then why didn't you include it at the start


[3/15/2023 9:01 PM] tux_linux
Yes


[3/15/2023 9:01 PM] szybet
if its automated, then why didn't you include it at the start
if its automated, then why didn't you include it at the start
if its automated, then why didn't you include it at the start


[3/15/2023 9:01 PM] tux_linux
Because it's too old to start with?


[3/15/2023 9:01 PM] szybet
what


[3/15/2023 9:01 PM] tux_linux
Libraries built with recent buildroot would not work on every imx507/8 model out there or anything with a <3.0 kernel


[3/15/2023 9:02 PM] tux_linux
Because linked glibc doesn't support them


[3/15/2023 9:02 PM] szybet
yes, and?


[3/15/2023 9:02 PM] tux_linux
Maybe you can hack a bit in the 2015 libusb script and point to recent sources tarballs
I don't know if it will work


[3/15/2023 9:03 PM] tux_linux
Well, 2015 software is too old?


[3/15/2023 9:03 PM] szybet
for what


[3/15/2023 9:03 PM] szybet
well not now


[3/15/2023 9:03 PM] szybet
i should be learning for school for 2 hours now ;p

{Reactions}
👍 

[3/15/2023 9:03 PM] tux_linux
For the whole project?


[3/15/2023 9:04 PM] szybet
if you want you can post on stack overflow this issue


[3/15/2023 9:04 PM] szybet
um yes and?


[3/15/2023 9:04 PM] szybet
get to the point


[3/15/2023 9:10 PM] tux_linux
Well, 2015 software is too old, we would have outdated libraries, outdated features, no direct access to new features, etc.


[3/15/2023 9:10 PM] tux_linux
Alpine 3.10 from 2019 is already slightly better, and now it is a bit of a Frankenstein because most new software I add is compiled manually from newest stable sources

{Reactions}
👍 

[3/15/2023 11:30 PM] andi15701
so does that mean, that just check some epdc_ver <20 code in the 5.16 kernel + some devicetree stuff and you get rid of some nasty problems


[3/15/2023 11:30 PM] andi15701
?


[3/15/2023 11:31 PM] andi15701
if it is about the kobo aura


[3/15/2023 11:40 PM] andi15701
what is still running a <3.0 kernel?


[3/15/2023 11:43 PM] ninuje
Mk. 5 for sure


[3/15/2023 11:43 PM] ninuje
Maaaybe Mk. 6


[3/15/2023 11:59 PM] tux_linux
Every imx507/8 device


[3/16/2023 3:10 AM] tux_linux
not only it


[3/16/2023 7:14 PM] andi15701
How many different kernels are involved?


[3/16/2023 7:14 PM] andi15701
basically one netronix kernel or more


[3/16/2023 7:54 PM] tux_linux
Check kernel folder in InkBox repo
There are many


[3/16/2023 7:54 PM] tux_linux
N905c
N905b
N705
N613


[3/16/2023 7:54 PM] tux_linux
Maybe more


[3/16/2023 8:47 PM] szybet
hello dont ignore me


[3/16/2023 8:56 PM] tux_linux
I will add it tonight and give you access


[3/16/2023 9:14 PM] szybet
~~i could create it 🥴 ~~


[3/16/2023 9:14 PM] szybet
the emoji isin't cut


[3/16/2023 9:14 PM] szybet
https://tenor.com/view/my-disappointment-is-immeasurable-and-gif-20080022

{Embed}
https://tenor.com/view/my-disappointment-is-immeasurable-and-gif-20080022
/mnt/data/projects/git/conversations/media/my-disappointment-99388.png


[3/16/2023 9:25 PM] tux_linux
🥴


[3/16/2023 11:02 PM] szybet
`/mnt/onboard/.adds/inkbox/inkbox-bin: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory`


[3/16/2023 11:02 PM] szybet
interesting


[3/16/2023 11:03 PM] szybet
why?


[3/16/2023 11:32 PM] szybet
```
kobo:/mnt/onboard/.adds/inkbox# QT_QPA_PLATFORM=kobo ADDSPATH="/mnt/onboard/.add
s/" QTPATH="${ADDSPATH}/qt-linux-5.15.2-kobo" LD_LIBRARY_PATH="${QTPATH}/lib:lib
:" ./inkbox-bin
qt.qpa.plugin: Could not load the Qt platform plugin "kobo" in "" even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, linuxfb, minimal, offscreen, vnc.

Aborted
kobo:/mnt/onboard/.adds/inkbox# 
```


[3/16/2023 11:32 PM] szybet
@tux-linux i updated qt for gui bundle, and the platform plugin + inkbox binary and this


[3/16/2023 11:33 PM] szybet
if there is anything related to libraries, qt then ***now*** its the time to say it to me.


[3/16/2023 11:35 PM] szybet
ok i need to copy some more libraries

{Attachments}
/mnt/data/projects/git/conversations/media/message-398FE.txt


[3/16/2023 11:36 PM] szybet
**but! inkbox doesnt launches because i needed to add `/` after QTPATH to `LD_LIBRARY_PATH="${QTPATH}/lib:lib:"` to make it launch further**


[3/16/2023 11:36 PM] szybet
*why?*


[3/16/2023 11:45 PM] tux_linux
i really don't know


[3/16/2023 11:46 PM] szybet
and this?


[3/17/2023 1:20 AM] tux_linux
obscure reason


[3/17/2023 1:28 AM] tux_linux
Done
```
git remote set-url origin https://inkbox.ddns.net/git/tux-linux/compiled-binaries
git push
```


[3/17/2023 1:28 AM] tux_linux
Will mirror to GH automatically


[3/17/2023 1:50 AM] tux_linux
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/1ab63e13af00d3ca3a486e6f9ebaab9107595194

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/1ab63e13af00d3ca3a486e6f9ebaab9107595194
Merge pull request #2 from Szybet/master · Kobo-InkBox/qt5-kobo-pla...
fixes...
/mnt/data/projects/git/conversations/media/1ab63e13af00d3ca3a486e6f9ebaab9107595194-159B8


[3/17/2023 1:51 AM] tux_linux
welp


[3/17/2023 1:52 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-E1496.txt


[3/17/2023 1:52 AM] tux_linux
and there is theoretically only one sys


[3/17/2023 1:52 AM] tux_linux
so even if it's in namespace/chroot mode it will probably affect other mounted sys directories


[3/17/2023 1:53 AM] tux_linux
but then there is a problem


[3/17/2023 1:53 AM] tux_linux
why isn't root able to read those files


[3/17/2023 2:18 AM] tux_linux
`chmod -R 700 /sys`


[3/17/2023 2:18 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/45e8250f3800a90461994cf338cd243b71abb908

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/45e8250f3800a90461994cf338cd243b71abb908
Protect sysfs against unpriviledged read and/or writes · Kobo-InkBo...
/mnt/data/projects/git/conversations/media/45e8250f3800a90461994cf338cd243b71abb908-D7805


[3/17/2023 7:15 AM] szybet
Isint it like that if you chmod one sysfs, it will go to other sysfs? This could enable app privilege escalation


[3/17/2023 8:09 AM] szybet
One app requests it, the other uses it


[3/17/2023 8:09 AM] szybet
I dont know a solution for per app permissions to sys then


[3/17/2023 8:09 AM] szybet
Maybe bind mount only whats needed instead of giving thr wholr onr


[3/17/2023 12:14 PM] tux_linux
You were already against that


[3/17/2023 12:15 PM] tux_linux
The best idea is to systematically chmod it back every time user app closes


[3/17/2023 12:15 PM] tux_linux
I think


[3/17/2023 12:31 PM] szybet
if its the only solution?


[3/17/2023 12:32 PM] szybet
this will need a whole redesign, just go bind mounts then ;/


[3/17/2023 12:41 PM] szybet
` Don't ever expect this to be regularly updated and/or maintained.` why


[3/17/2023 12:48 PM] tux_linux
You really will update it regularly?


[3/17/2023 12:48 PM] szybet
no, but if I / you change something, then simply upload it there to share with the other


[3/17/2023 12:49 PM] szybet
there is no way we can work with diffrent toolchains / qt so its neccesery


[3/17/2023 2:53 PM] szybet
For every bind mount i need or you write a function to make it less of a pain to use


[3/17/2023 3:55 PM] szybet
Also every device in sys has some weord symlinks to other parts of sys sooo 🤔


[3/17/2023 5:42 PM] andi15701
hmm, in the end you only need write permissions for specific files?


[3/17/2023 5:43 PM] andi15701
and that is probably nothing that dangerous


[3/17/2023 5:43 PM] andi15701
ok, you want to protect more


[3/17/2023 5:44 PM] andi15701
but is it really worth protecting *reads* there?


[3/17/2023 5:51 PM] andi15701
writes are usually protected


[3/17/2023 7:01 PM] andi15701
or rather a proxy app for such things


[3/17/2023 7:12 PM] szybet
Well i would want to write apps that could run on nickel as well, or any other os


[3/17/2023 7:13 PM] szybet
^make porting easier


[3/17/2023 7:27 PM] andi15701
hmm, if you write apps that run everywhere, have you considered porting them to alpine too?


[3/17/2023 7:33 PM] tux_linux
InkBox OS is InkBox **OS**


[3/17/2023 7:33 PM] tux_linux
\;)


[3/17/2023 7:34 PM] szybet
no because musl, but they should run without issue


[3/17/2023 7:34 PM] szybet
https://media.discordapp.net/attachments/742373302768762930/1038493124986671225/halflife_cat.gif

{Embed}
https://media.discordapp.net/attachments/742373302768762930/1038493124986671225/halflife_cat.gif
/mnt/data/projects/git/conversations/media/halflife_cat-E4C1D.gif


[3/17/2023 7:36 PM] tux_linux
Be like in physics class
Everything works in theory but never in practice


[3/17/2023 8:57 PM] andi15701
Well, I think it is always a good idea to keep things are universal as possible.

{Reactions}
😄 

[3/17/2023 8:58 PM] andi15701
if things also work outside of InkBox OS


[3/17/2023 8:58 PM] andi15701
that can attract also other developers


[3/17/2023 9:02 PM] andi15701
whether an app is eink-friendly does not depend too much on the init system


[3/17/2023 9:02 PM] andi15701
e.g.


[3/17/2023 9:05 PM] andi15701
providing some kind of well-paved road is always important, but not erect high fences around it


[3/17/2023 9:13 PM] andi15701
andi@aktux:~/kobo/inkbox/src$ grep -R onboard/.adds | wc -l
66


[3/17/2023 9:13 PM] andi15701
that looks insane


[3/17/2023 9:13 PM] szybet
?


[3/17/2023 9:14 PM] andi15701
I would expect some define somewhere


[3/17/2023 9:14 PM] andi15701
to be used everywhere


[3/17/2023 9:14 PM] szybet
what are you talking about


[3/17/2023 9:15 PM] andi15701
g++ -DINKBOX_BASE_PATH=/mnt/onboard/.adds/inkbox


[3/17/2023 9:15 PM] andi15701
or in a central config.h


[3/17/2023 9:15 PM] andi15701
or something


[3/17/2023 9:15 PM] szybet
what are you still talking about


[3/17/2023 9:15 PM] andi15701
and then use that in the code


[3/17/2023 9:16 PM] andi15701
instead of repeating that string over and over again


[3/17/2023 9:16 PM] szybet
which one


[3/17/2023 9:16 PM] andi15701
settings/powerdaemonsettings.cpp:    writeFile("/mnt/onboard/.adds/inkbox/.config/20-sleep_daemon/6-ledUsage", QVariant(ledUsageBool).toString());


[3/17/2023 9:17 PM] andi15701
so instead writeFile(INKBOX_BASE_PATH "/.config/20-sleep_daemon/6-ledUsage")


[3/17/2023 9:18 PM] andi15701
or even  INKBOX_CONFIG_PATH


[3/17/2023 9:18 PM] szybet
oh this


[3/17/2023 9:18 PM] szybet
well


[3/17/2023 9:19 PM] szybet
oops


[3/17/2023 9:24 PM] szybet
I plan to write a general inkbox library to make use of enums and make repeating code in inkbox even smaller


[3/17/2023 9:27 PM] andi15701
andi@aktux:~/kobo/inkbox/src$ grep -ER 'n[[:digit:]]{3}' * | wc -l
147


[3/17/2023 9:27 PM] andi15701
another issue


[3/17/2023 9:27 PM] szybet
?


[3/17/2023 9:28 PM] andi15701
count of if (device == X)


[3/17/2023 9:28 PM] andi15701
that number should better be lower


[3/17/2023 9:28 PM] szybet
well how would you solve that, apart from enums that i plan to implement


[3/17/2023 9:30 PM] andi15701
basically look at fbink_device_id.c


[3/17/2023 9:33 PM] andi15701
so one central place where you have if (device == X) { enable_nasty_quirk1=true; backlight_driver=standard; wifi_power_off_func = remove_driver x (or devntx_wifi) }


[3/17/2023 9:33 PM] szybet
instead of many small quirks one big?


[3/17/2023 9:35 PM] andi15701
The point is to accelerate adding new devices


[3/17/2023 9:36 PM] andi15701
fbink_device_id.c has this


[3/17/2023 9:36 PM] szybet
oh


[3/17/2023 9:36 PM] andi15701
case DEVICE_KOBO_CLARA_HD:    // Clara HD (nova)
                        deviceQuirks.isKoboMk7 = true;
                        // NOTE: Is indeed NTX_ROTA_STRAIGHT
                        deviceQuirks.screenDPI = 300U;


[3/17/2023 9:36 PM] szybet
good idea


[3/17/2023 9:37 PM] andi15701
and in other code is if (deviceQuirks.isKoboMk7)


[3/17/2023 9:37 PM] szybet
cool


[3/17/2023 9:38 PM] andi15701
maybe even text files defining that


[3/17/2023 9:39 PM] andi15701
not sure about the details


[3/17/2023 9:42 PM] andi15701
but you got the general idea?


[3/17/2023 9:43 PM] szybet
yea, it's cool


[3/17/2023 9:43 PM] szybet
will do it in the future


[3/17/2023 9:43 PM] szybet
for 2.1 maybe


[3/17/2023 9:57 PM] andi15701
maybe it is also worth having things depend on kernel version


[3/17/2023 9:58 PM] andi15701
not pure version number but like 3.0.35NTX, so perhaps not direct uname -r


[3/17/2023 10:03 PM] andi15701
if there are sane kernels involved, you  also have /sys/firmware/devicetree/base/compatible


[3/17/2023 10:05 PM] andi15701
which gives strings like kobo,clarahd kobo,tolino-shine3 kobo,librah2o


[3/18/2023 1:22 AM] tux_linux
Why?


[3/18/2023 6:54 PM] szybet
```
qt.qpa.input: libinput: event2  - skip unconfigured input device '/dev/input/event2'
qt.qpa.input: libinput: event3  - skip unconfigured input device '/dev/input/event3'
qt.qpa.input: libinput: event1  - skip unconfigured input device '/dev/input/event1'
```


[3/18/2023 6:54 PM] szybet
will explain later


[3/18/2023 6:54 PM] szybet
anyone any ideas?


[3/18/2023 6:55 PM] the.mightydill
what are the events


[3/18/2023 6:55 PM] the.mightydill
like what's event1 event2 and event3


[3/18/2023 6:55 PM] szybet
/dev/input devices


[3/18/2023 6:55 PM] the.mightydill
for what purpose


[3/18/2023 6:55 PM] the.mightydill
keyboard, touch input, etc


[3/18/2023 6:56 PM] szybet
yes.


[3/18/2023 6:56 PM] szybet
🥴


[3/18/2023 6:56 PM] the.mightydill
oh.. i see


[3/18/2023 6:56 PM] szybet
keyboard is event2


[3/18/2023 6:56 PM] the.mightydill
well config seems to be needed


[3/18/2023 6:57 PM] the.mightydill
`ls /dev/input`?


[3/18/2023 6:57 PM] szybet
```
kobo:/mnt/onboard/onboard/.apps/feathernotes/feathernotes/app-bin# ls /dev/input
by-id    by-path  event0   event1   event2   event3   mice     mouse0   mouse1
```


[3/18/2023 6:57 PM] szybet
like which one


[3/18/2023 6:57 PM] szybet
libinput is screaming about it


[3/18/2023 6:57 PM] the.mightydill
that's weird


[3/18/2023 6:58 PM] szybet
yea


[3/18/2023 6:59 PM] the.mightydill
look at `/usr/share/X11/xorg.conf.d/99-libinput.conf` maybe?


[3/18/2023 6:59 PM] the.mightydill
libinput config files


[3/18/2023 6:59 PM] szybet
im not using xorg


[3/18/2023 6:59 PM] szybet
at all


[3/18/2023 6:59 PM] szybet
so i doubt


[3/18/2023 6:59 PM] the.mightydill
oh


[3/18/2023 7:01 PM] the.mightydill
i got nothing sorry


[3/18/2023 7:01 PM] the.mightydill
maybe tux-linux has something


[3/18/2023 7:01 PM] szybet
you tried, i appreciate it

{Reactions}
👍 

[3/18/2023 7:08 PM] andi15701
Are things sane in /proc/bus//input/devices


[3/18/2023 7:12 PM] andi15701
libinput has some commandline tool called libinput


[3/18/2023 7:12 PM] andi15701
maybe that helps


[3/18/2023 7:38 PM] szybet
Thanks, will look into it


[3/18/2023 8:13 PM] szybet
Well it doesnt


[3/18/2023 8:13 PM] szybet
I will need to strace it


[3/18/2023 8:13 PM] szybet
But propabky a config, not a xorg one


[3/18/2023 8:57 PM] andi15701
on debian it is separate tool


[3/18/2023 8:58 PM] andi15701
ah, same source


[3/18/2023 8:58 PM] andi15701
so probably just not enabled/installed


[3/18/2023 8:58 PM] andi15701
looking around at my desktop


[3/18/2023 8:59 PM] andi15701
i see patterns like this


[3/18/2023 8:59 PM] andi15701
openat(AT_FDCWD, "/sys/devices/pci0000:00/0000:00:1f.3/sound/card0/input14/uevent", O_RDONLY|O_CLOEXEC) = 8
openat(AT_FDCWD, "/run/udev/data/+input:input14", O_RDONLY|O_CLOEXEC) = 8


[3/18/2023 9:00 PM] andi15701
and some /usr/share/libinput


[3/18/2023 9:00 PM] andi15701
and /etc/libinput/local-overrides.quirks


[3/18/2023 9:01 PM] szybet
Hmm, this is weird, should be documented somewhere


[3/18/2023 9:04 PM] szybet
https://wayland.freedesktop.org/libinput/doc/latest/configuration.html

Hint, maybe


[3/18/2023 9:07 PM] andi15701
there is also  access to /sys/firmware/devicetree/base/compatible


[3/18/2023 9:07 PM] szybet
https://wayland.freedesktop.org/libinput/doc/latest/device-quirks.html#device-quirks


[3/18/2023 9:07 PM] szybet
Bruh, it needs an etc file, maybe thats that


[3/18/2023 9:07 PM] szybet
What is this path


[3/18/2023 9:08 PM] szybet
Also a question, why next to rotate in fb0 sys is cursor, what does it mean


[3/18/2023 9:08 PM] szybet
Cursor as a file


[3/18/2023 9:10 PM] andi15701
as said in that file you find the vendor,device name combo (if kernel is sane, it would be very usable), so quirks could be matched to a specific device


[3/18/2023 9:10 PM] andi15701
no idea about tha cursor file


[3/18/2023 9:11 PM] andi15701
but /sys/class/graphics/fbcon/cursor_blink is very nice to have that configurable


[3/18/2023 9:13 PM] szybet
I dont remember having it, what is it


[3/18/2023 9:13 PM] andi15701
turning cursor blinking off


[3/18/2023 9:13 PM] andi15701
very nice if you are playing around with the drm driver


[3/18/2023 9:14 PM] andi15701
because there you get refreshes for every cursor blink


[3/18/2023 9:15 PM] szybet
Well qt manages it on its own


[3/18/2023 9:15 PM] andi15701
static ssize_t store_cursor(struct device *device,
                            struct device_attribute *attr,
                            const char *buf, size_t count)
{
//      struct fb_info *fb_info = dev_get_drvdata(device);
        return 0;
}

static ssize_t show_cursor(struct device *device,
                           struct device_attribute *attr, char *buf)
{
//      struct fb_info *fb_info = dev_get_drvdata(device);
        return 0;
}


[3/18/2023 9:16 PM] andi15701
about cursor


[3/18/2023 9:16 PM] andi15701
in a recent kernel


[3/18/2023 9:17 PM] andi15701
functions called when cursor is read or written


[3/18/2023 9:20 PM] andi15701
a noop is already ithere in the initial git commit for the linux kernel


[3/18/2023 9:20 PM] andi15701
aka Linux-2.6.12-rc2


[3/18/2023 9:48 PM] andi15701
btw: I have analyzed the serial stuff, the clock seems to come from an 480Mhz PLL


[3/18/2023 9:48 PM] andi15701
divided by 6


[3/18/2023 9:49 PM] andi15701
but it can wake up without clock


[3/18/2023 9:49 PM] andi15701
the uart clocks currently only get powered off at suspend


[3/18/2023 9:54 PM] andi15701
so basically as mentioned earlier, turning that thing off if not used for some seconds might help us a lot


[3/18/2023 9:54 PM] andi15701
maybe the first character has to be typed twice


[3/19/2023 12:38 AM] szybet
`-I/mnt/HDD/Project/qt-kobo/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/home/nicolas/x-tools/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/include/libxml2` our path merged in ninja


[3/19/2023 12:38 AM] szybet
nice...


[3/19/2023 1:47 AM] szybet
what am i supposed to do?

{Attachments}
/mnt/data/projects/git/conversations/media/message-597A4.txt


[3/19/2023 1:48 AM] szybet
`ABS_MT_SLOT` isin't declared anywhere


[3/19/2023 1:52 AM] szybet
i found it in mtdev library... but now i need INPUT_PROP_DIRECT


[3/19/2023 1:52 AM] szybet
what is this garbage of errors in c


[3/19/2023 1:54 AM] szybet
i need this? https://github.com/linuxwacom/libwacom

{Embed}
https://github.com/linuxwacom/libwacom
GitHub - linuxwacom/libwacom: libwacom is a tablet description library
libwacom is a tablet description library. Contribute to linuxwacom/libwacom development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/libwacom-A3CDE


[3/19/2023 1:54 AM] szybet
but i disabled wacom tablet?


[3/19/2023 1:54 AM] szybet
but it needs it anyway? what a garbage of a library, there is a command line feature that no one even tested.


[3/19/2023 11:30 AM] szybet
```
KERNEL[1696.276229] change   /devices/platform/soc/2100000.aips-bus/21f8000.i2c/i2c-3/3-0032/ricoh619-battery/power_supply/mc13892_bat (power_supply)
KERNEL[1696.375029] move     /devices/platform/usb_host (platform)
KERNEL[1696.375184] add      /devices/platform/usb_host (platform)
KERNEL[1696.402209] change   /devices/platform/soc/2100000.aips-bus/21f8000.i2c/i2c-3/3-0032/ricoh619-battery/power_supply/mc13892_bat (power_supply)
KERNEL[1701.019034] change   /devices/platform/soc/2100000.aips-bus/21f8000.i2c/i2c-3/3-0032/ricoh619-battery/power_supply/mc13892_bat (power_supply)
```


[3/19/2023 11:30 AM] szybet
interesting


[3/19/2023 12:28 PM] szybet
https://gitlab.freedesktop.org/libinput/libinput/-/blob/main/src/evdev.c#L1981

{Embed}
https://gitlab.freedesktop.org/libinput/libinput/-/blob/main/src/evdev.c
src/evdev.c · main · libinput / libinput · GitLab
Input device management and event handling library
/mnt/data/projects/git/conversations/media/twitter_card-570ddb06edf56a2312253c5872489-B0E6E.jpg


[3/19/2023 12:28 PM] szybet
ehh


[3/19/2023 1:29 PM] szybet
its impossible to make udev run inside gui rootfs. /run/udev needs to be bind mounted


[3/19/2023 2:07 PM] andi15701
which in in #include <linux/input-event-codes.h>


[3/19/2023 2:15 PM] szybet
i found it in by googling


[3/19/2023 2:15 PM] szybet
still i dont have this file


[3/19/2023 2:17 PM] szybet
basically instead of creating 
```
kobo:~# ls /run/udev/data/
+input:input0
```
devices, it created `b*:**` some, which is weird so libinput doesnt saw them at all. the one in rootfs, alpine works correctly


[3/19/2023 2:17 PM] szybet
also the one i compiled doesnt even read the rules, i mean i cant see in logs that it does, alpine one does


[3/19/2023 3:55 PM] szybet
@tux-linux thats a ton of new libraries to add
```
eudev          kmod      libinput  libxkbcommon-1.5.0         mtdev-1.1.6               sys2      usbutils         wget-log
eudev-3.2.10   libevdev  libusb    libxkbcommon-1.5.0.tar.xz  mtdev-1.1.6.tar.gz        systemd   util-linux
eudev-v3.2.10  libgudev  libwacom  meson-kobo.txt             qt-everywhere-src-5.15.2  udev-182  util-linux-2.36
```
not all of them were used, but most


[3/19/2023 3:56 PM] szybet
+ keymap files, quirk files, other things that must be added, and are at static path like `/usr/local/share/X11/xkb/rules/evdev`


[3/19/2023 3:57 PM] szybet
weight a ton, i think with the current filesystem doesnt even support updating it


[3/19/2023 3:57 PM] szybet
all of it for now only for qt apps to have hot plugging keyboard or mouse


[3/19/2023 3:58 PM] szybet
on the other hand, in the future some devices might need libinput


[3/19/2023 3:58 PM] szybet
so the question: may this be my side hacky project of modyfying inkbox or an official thing


[3/19/2023 3:59 PM] szybet
connecting keyboards etc to kobos isin't that hard, only a special cable is needed. I think it's cool and we should support it


[3/19/2023 4:00 PM] ninuje
libinput requires a sane and up-to-date udev framework


[3/19/2023 4:01 PM] ninuje
That involves a recent (to very recent, depending on how recent libinput itself is) udev, working as intended


[3/19/2023 4:01 PM] ninuje
Which may carry kernel depedencies with it


[3/19/2023 4:01 PM] ninuje
Which is precisely why I dropped the idea altogether


[3/19/2023 4:02 PM] ninuje
It's great, but it basically requires a decent and working distro 😉


[3/19/2023 4:02 PM] szybet
btw done, the solution was
```
mkdir /kobo/run/udev
mount --bind /run/udev/ /kobo/run/udev/
```
and
`nano /etc/udev/rules.d/99-disable-touchscreen.rules`
`ACTION=="add|change", SUBSYSTEM=="input", KERNEL=="event[0-1]*", ATTR{enabled}="0"`


[3/19/2023 4:02 PM] szybet
i know


[3/19/2023 4:02 PM] szybet
3 days out of my life but i got it to work somehow


[3/19/2023 4:02 PM] szybet
still, hot plugging is really needed for normal use


[3/19/2023 4:04 PM] ninuje
You can also listen to the udev feed yourself to handle hotplugging


[3/19/2023 4:04 PM] szybet
i mean: hot plugging in native qt magic


[3/19/2023 4:05 PM] ninuje
"magic" ^^


[3/19/2023 4:06 PM] ninuje
FWIW: https://github.com/koreader/koreader-base/blob/82e6c282c2d741b2342cfef991dd8ad75f9319a7/input/input-kobo.h#L96-L118

{Embed}
https://github.com/koreader/koreader-base/blob/82e6c282c2d741b2342cfef991dd8ad75f9319a7/input/input-kobo.h
koreader-base/input-kobo.h at 82e6c282c2d741b2342cfef991dd8ad75f931...
Base framework offering a Lua scriptable environment for creating document readers - koreader-base/input-kobo.h at 82e6c282c2d741b2342cfef991dd8ad75f9319a7 · koreader/koreader-base
/mnt/data/projects/git/conversations/media/koreader-base-157AD


[3/19/2023 4:07 PM] ninuje
Via https://github.com/koreader/koreader-base/blob/master/input/libue.h to poll the kernel's uevent socket

{Embed}
https://github.com/koreader/koreader-base/blob/master/input/libue.h
koreader-base/libue.h at master · koreader/koreader-base
Base framework offering a Lua scriptable environment for creating document readers - koreader-base/libue.h at master · koreader/koreader-base
/mnt/data/projects/git/conversations/media/koreader-base-157AD


[3/19/2023 6:10 PM] tux_linux
How do they weigh


[3/19/2023 6:12 PM] szybet
~30Mb, maybe smaller because i was debbuging testing things so i created more than neccesery


[3/19/2023 6:12 PM] szybet
worst case scenerio 30 mb


[3/19/2023 6:37 PM] tux_linux
And when compressed?


[3/19/2023 6:40 PM] szybet
which what type


[3/19/2023 6:40 PM] szybet
lz4?


[3/19/2023 6:40 PM] szybet
i can test only by compressing x-tools and comparing it


[3/19/2023 7:08 PM] tux_linux
xz


[3/19/2023 7:08 PM] tux_linux
compress sysroot folder


[3/19/2023 7:18 PM] szybet
decrease of about 83%, so 5.1 Mb


[3/19/2023 7:18 PM] szybet
arround this


[3/19/2023 7:19 PM] szybet
lets go with 6 because config files


[3/19/2023 7:19 PM] tux_linux
1m of config files? that's a LOT


[3/19/2023 7:19 PM] szybet
i dont count qt in this, its needs a recompile


[3/19/2023 7:19 PM] tux_linux
but 5m is... kinda reaching the limits


[3/19/2023 7:20 PM] tux_linux
but ok


[3/19/2023 7:20 PM] tux_linux
did you strip the libraries


[3/19/2023 7:20 PM] szybet
maybe i overestimate, but yea


[3/19/2023 7:20 PM] tux_linux
every one of them


[3/19/2023 7:20 PM] szybet
obviously not


[3/19/2023 7:20 PM] szybet
;p


[3/19/2023 7:20 PM] tux_linux
well, do


[3/19/2023 7:20 PM] tux_linux
will probably become 1.5 m


[3/19/2023 7:22 PM] szybet
only if  consciously accept the idea - user apps will need access to many files, like ` /usr/local/share/X11/xkb/rules/evde`


[3/19/2023 7:23 PM] szybet
i think in /lib is also something


[3/19/2023 7:23 PM] tux_linux
oh no


[3/19/2023 7:23 PM] szybet
/run/udev for sure


[3/19/2023 7:23 PM] tux_linux
oh no


[3/19/2023 7:23 PM] tux_linux
oh no


[3/19/2023 7:23 PM] szybet
¯\_(ツ)_/¯


[3/19/2023 7:23 PM] tux_linux
oh no


[3/19/2023 7:23 PM] szybet
+ you need to put them in the main file system


[3/19/2023 7:24 PM] szybet
gui_rootfs


[3/19/2023 7:24 PM] szybet
no changing paths


[3/19/2023 7:24 PM] tux_linux
wdym


[3/19/2023 7:24 PM] szybet
i would like avoid bind mounts from rootfs


[3/19/2023 7:24 PM] szybet
i mean that you need to update gui_rootfs for that


[3/19/2023 7:24 PM] szybet
the file system


[3/19/2023 7:25 PM] tux_linux
why didn't you cross-compile with musl


[3/19/2023 7:26 PM] szybet
i want this in qt?


[3/19/2023 7:26 PM] tux_linux
well ok


[3/19/2023 7:27 PM] szybet
so to do that, you need to finish system updating


[3/19/2023 7:28 PM] szybet
+ udev daemon running in rootfs


[3/19/2023 7:28 PM] tux_linux
it isn't already running?


[3/19/2023 7:28 PM] szybet
propably is, idk


[3/19/2023 7:28 PM] szybet
just saying


[3/19/2023 7:29 PM] szybet
+ testing on devices if touch works


[3/19/2023 7:30 PM] szybet
dont ask, it works on the nia, should everywhere else


[3/19/2023 7:34 PM] tux_linux
i did


[3/19/2023 7:37 PM] szybet
What?


[3/19/2023 7:37 PM] szybet
You mean rotation right?


[3/19/2023 7:38 PM] szybet
Qlibinputhandler doesnt have an option to ignore devices, so i make udev ignore them, works but still testing because its messy


[3/19/2023 7:40 PM] tux_linux
not rotation


[3/19/2023 7:40 PM] tux_linux
only touch


[3/19/2023 7:41 PM] szybet
Well i meant checking touch when rotated


[3/19/2023 7:41 PM] szybet
Well then test this after i add this


[3/19/2023 7:42 PM] szybet
Im mostly off from programming for 2 weeks because school, i hope you will do updates in the mean time


[3/23/2023 11:48 PM] szybet
@tux-linux does `QJSEngine` work on inkbox / kobos?


[3/24/2023 12:36 PM] tux_linux
No idea


[3/28/2023 6:58 PM] szybet
https://github.com/AnswerOverflow/AnswerOverflow

{Embed}
https://github.com/AnswerOverflow/AnswerOverflow
GitHub - AnswerOverflow/AnswerOverflow: Indexing Discord Help Chann...
Indexing Discord Help Channel Questions into Google - GitHub - AnswerOverflow/AnswerOverflow: Indexing Discord Help Channel Questions into Google
/mnt/data/projects/git/conversations/media/AnswerOverflow-4DB73


[3/28/2023 6:58 PM] szybet
i want this for the server and i won't stop complaining until you add it ( or give me a way of adding it )


[3/28/2023 8:37 PM] andi15701
btw: basic device tree for Tolino Vision is now successfully upstreamed


[3/28/2023 8:37 PM] andi15701
I am also working a bit on that serial-runtime-suspend issue


[3/28/2023 8:37 PM] andi15701
turning off clocks seem to work


[3/28/2023 8:38 PM] andi15701
and the uart is behind a 480Mhz PLL


[3/28/2023 8:39 PM] andi15701
I have not started current measurements yet to compare with suspend and normal active


[3/28/2023 8:41 PM] andi15701
If that all has the effect I expect, we can live without suspend (and daemons for auto-suspend), expect for some deeper thing when we accept reduced


[3/28/2023 8:41 PM] andi15701
responsiveness (e.g. no reaction to touch input)


[3/28/2023 8:42 PM] andi15701
at least the experiments have already enhanced my knowledge about linux clock internals


[3/29/2023 2:23 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/7g9fut-ACF13.jpg


[3/29/2023 2:23 PM] szybet
When


[3/29/2023 2:39 PM] tux_linux
?


[3/29/2023 2:40 PM] tux_linux
Well ok, I'll send you the update scripts I wrote, you can test them


[3/29/2023 2:41 PM] szybet
Also what about p4


[3/29/2023 2:41 PM] szybet
How are we supposed to work on it


[3/29/2023 2:41 PM] szybet
Its currently 3 files in emu repo


[3/29/2023 2:41 PM] tux_linux
.


[3/29/2023 2:42 PM] szybet
Aaand?


[3/29/2023 2:42 PM] tux_linux
I can't write a bootstrapper for everything
Maybe we can put X11 rootfs in git repo but not sure it's worth it


[3/29/2023 2:43 PM] tux_linux
```
cd rootfs/
git apply git.patch
```

{Attachments}
/mnt/data/projects/git/conversations/media/git-F8D89.patch


[3/29/2023 2:43 PM] tux_linux
then test it if you want


[3/29/2023 2:43 PM] tux_linux
it did not work for me


[3/29/2023 2:43 PM] tux_linux
as usual


[3/29/2023 2:45 PM] szybet
What about p4...


[3/29/2023 2:45 PM] tux_linux
we are not there yet


[3/29/2023 2:46 PM] tux_linux
ask more and i will go on burn out


[3/29/2023 2:46 PM] tux_linux
i don't get how you can have so much time


[3/29/2023 2:46 PM] tux_linux
i don't...


[3/29/2023 2:46 PM] szybet
Im not in the final year of school yet


[3/29/2023 2:47 PM] szybet
I dont have exams, in a year not now


[3/29/2023 2:47 PM] tux_linux
i have at least 5 exams a month in average


[3/29/2023 2:47 PM] szybet
I mean i have... Idk english small exams too


[3/29/2023 2:47 PM] tux_linux
and for the end of the year we have one physics exam per week for 9 weeks


[3/29/2023 2:48 PM] szybet
I just learned to optimise my learning time to the smallest possible, while having the best grades in my class anyways


[3/29/2023 2:48 PM] szybet
Um yea... And my school is not so strict, horryfic and terrible


[3/29/2023 2:49 PM] szybet
Are you in an elite school or what


[3/29/2023 2:49 PM] tux_linux
No


[3/29/2023 2:49 PM] tux_linux
Not even


[3/29/2023 2:50 PM] tux_linux
Sadic teachers
Or whatever that means in English


[3/29/2023 2:50 PM] szybet
Sadic what


[3/29/2023 2:50 PM] kuratius
Sadistic probably

{Reactions}
👍 

[3/29/2023 2:50 PM] tux_linux
Then we could move forward


[3/29/2023 2:50 PM] tux_linux
Thanks


[3/29/2023 2:51 PM] szybet
Well my teachers are normal


[3/29/2023 2:52 PM] kuratius
If it's not phd level stuff I can probably help with some physics questions, doing a physics master atm
Although I can't claim to be very good at it, I try


[3/29/2023 2:52 PM] tux_linux
It's high school physics 😂


[3/29/2023 2:52 PM] tux_linux
But hard even there...


[3/29/2023 2:53 PM] szybet
I have... Basic physics, not too much to learn


[3/29/2023 2:53 PM] szybet
Are you on physics specific highscool course / class?


[3/29/2023 2:53 PM] kuratius
Should be easy, or at least not harder than bachelor level


[3/29/2023 2:54 PM] szybet
I only ask😐


[3/29/2023 2:55 PM] kuratius
I can't think of any high schools that have particularly hard stuff, maybe it's different in other places 
I know india has some physics/electrical engineering exams that aren't really meant for normal people


[3/29/2023 2:59 PM] szybet
What country?


[3/29/2023 3:03 PM] tux_linux
It's probably also that but the teachers are extra strict and they take out 3 whole points from a question if you mistakenly wrote that 2a was -19.6 m/s^2 (-9.8 m/s^2*2, automatism) while a was -28,0 m/s^2
At this point, yes, in real life it would be a big mistake, but it's high school. Be human at some point...
Classes average for last exam (cinematique, it's called) were around 45-59%
I got 86% but it was really hard to obtain
Exams are sadistic, questions are sadistic, it's so easy to make a mistake and it's designed exactly for that


[3/29/2023 3:04 PM] szybet
So in short you have insane teachers?


[3/29/2023 3:04 PM] tux_linux
Idk


[3/29/2023 3:04 PM] szybet
Propably


[3/29/2023 3:04 PM] szybet
Are you planning to go to univ related to physics?


[3/29/2023 3:04 PM] tux_linux
Yes


[3/29/2023 3:05 PM] szybet
Okay then, its neccesery then


[3/29/2023 3:05 PM] tux_linux
I'm in Canada


[3/29/2023 3:05 PM] tux_linux
Thanks for offering help


[3/29/2023 3:07 PM] tux_linux
Just better to do one thing at a time
Update system is priority
Without it we can't continue anywhere


[3/29/2023 3:11 PM] szybet
I litterally cant so yea


[3/29/2023 3:12 PM] szybet
What about p4, think about it


[3/29/2023 3:12 PM] kuratius
Germany


[3/29/2023 3:15 PM] szybet
Yea germany school system is better a bit from the others


[3/29/2023 3:25 PM] tux_linux
Can't do what


[3/29/2023 3:26 PM] tux_linux
We can't update p4 as a monolithic package because p4 includes onboard storage and user config data


[3/29/2023 3:39 PM] szybet
I mean only the file system part


[3/29/2023 3:41 PM] tux_linux
What do you want to do with it


[3/29/2023 3:43 PM] szybet
Update it


[3/29/2023 3:43 PM] szybet
Put libinput keymaps etc


[3/29/2023 3:44 PM] tux_linux
Where


[3/29/2023 3:44 PM] szybet
In some static paths, usr share x11 keymaps something like that


[3/29/2023 3:44 PM] szybet
i already talkeb about it


[3/29/2023 3:44 PM] tux_linux
In X11 rootfs?


[3/29/2023 3:45 PM] szybet
No


[3/29/2023 3:45 PM] szybet
In gui rootfs


[3/29/2023 3:45 PM] tux_linux
Ok


[3/29/2023 3:45 PM] tux_linux
You can test it yourself


[3/29/2023 3:45 PM] szybet
How ok?


[3/29/2023 3:45 PM] szybet
Is there gonna be a repo for this rootfs? Or what?


[3/29/2023 3:45 PM] tux_linux
Have you seen my patch?


[3/29/2023 3:45 PM] szybet
No, im on my phone


[3/29/2023 3:46 PM] tux_linux
Well it contains the new untested update scripts


[3/29/2023 3:47 PM] szybet
Cool, this doesn answer this question


[3/29/2023 3:48 PM] szybet
Btw what was the reason there are 2 rootfs? I cant remember


[3/29/2023 4:55 PM] tux_linux
Glibc


[3/29/2023 4:56 PM] tux_linux
Outdated glibc vs up to date musl


[3/29/2023 5:08 PM] szybet
so why we need glibc at all


[3/29/2023 5:34 PM] tux_linux
qt?!


[3/29/2023 5:34 PM] tux_linux
You ever tried to compile musl qt?


[3/29/2023 5:43 PM] szybet
you said thats possible


[3/29/2023 8:21 PM] andi15701
well, qt is around in pmOS

{Reactions}
👍 

[3/29/2023 8:21 PM] andi15701
so it should be possible


[3/29/2023 8:22 PM] andi15701
at least with some quirks


[3/29/2023 8:42 PM] andi15701
maybe there are some patches there to cherry-pick


[3/30/2023 11:15 PM] szybet
i looked arround, basically for libinput i need to edit overlaymount-rootfs, its small, i create a repo for it and we need a way of updating it in the future


[3/30/2023 11:15 PM] szybet
https://github.com/Szybet/overlaymount-gui-rootfs

{Embed}
https://github.com/Szybet/overlaymount-gui-rootfs
Szybet/overlaymount-gui-rootfs
gui-rootfs base for inkbox. Contribute to Szybet/overlaymount-gui-rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/overlaymount-gui-rootfs-A244F


[3/30/2023 11:17 PM] szybet
~~I can't create a repo in the inkbox organisation. I DONT CARE i will work on my own, you can later fork it and make it official. Yes i dont want to wait for you to create the repo~~


[3/30/2023 11:18 PM] szybet
anyway, cool to see that libc takes only 4Mb of additional space, so no reason to go full musl


[3/31/2023 1:31 AM] tux_linux
it's a lot


[3/31/2023 1:32 AM] tux_linux
https://inkbox.ddns.net/git/tux-linux/overlaymount-rootfs
and you have access

{Embed}
https://inkbox.ddns.net/git/tux-linux/overlaymount-rootfs
Nicolas Mailloux / overlaymount-rootfs · GitLab
GitLab Enterprise Edition
/mnt/data/projects/git/conversations/media/twitter_card-570ddb06edf56a2312253c5872489-A73AB.jpg


[3/31/2023 1:32 AM] tux_linux
please not confuse overlaymount-rootfs and gui-rootfs
it's completely different things


[3/31/2023 1:33 AM] tux_linux
did you even know where overlaymount-rootfs was used?


[3/31/2023 1:33 AM] tux_linux
is it really the usage you intended it for?


[3/31/2023 1:36 AM] tux_linux
what did you add in it


[3/31/2023 1:44 AM] tux_linux
```
As this is a crucial mini-filesystem for InkBox OS to start up and it contains the essential binaries to mount other SquashFSes with FUSE instead of a native kernel driver, it needs to be compressed with gzip, otherwise some devices with a <3.x kernel won't support mounting it natively as it would have been compressed with xz, and thus the whole OS will crash.
This commit hopefully fixes this issue.
```
for the gzip thing you couldn't know but now you do


[3/31/2023 1:45 AM] tux_linux
https://github.com/Kobo-InkBox/overlaymount-rootfs/commit/406af5f685e11ba43ccb219f649d29d17760fcb7


[3/31/2023 1:45 AM] tux_linux
done x2
https://inkbox.ddns.net/git/tux-linux/gui-rootfs
and you have access

{Embed}
https://inkbox.ddns.net/git/tux-linux/gui-rootfs
Nicolas Mailloux / gui-rootfs · GitLab
GitLab Enterprise Edition
/mnt/data/projects/git/conversations/media/twitter_card-570ddb06edf56a2312253c5872489-A73AB.jpg


[3/31/2023 1:48 AM] tux_linux
now you can
but if you do tell me because I will need to mirror it to gitlab probably


[3/31/2023 8:06 AM] szybet
The filesystem for gui rootfs when i chroot is where then?


[3/31/2023 2:27 PM] szybet
well okay


[3/31/2023 2:27 PM] szybet
so libc costs arround 25Mb


[3/31/2023 2:28 PM] szybet
i dont care then


[3/31/2023 2:28 PM] szybet
nah, if you want more space on p4 then remove default apps / xorg apps and make them as a package


[3/31/2023 2:41 PM] szybet
what is rootfs.tar.xz


[3/31/2023 2:41 PM] szybet
in gui rootfs


[3/31/2023 2:49 PM] szybet
https://github.com/Kobo-InkBox/kernel/pull/4

{Embed}
https://github.com/Kobo-InkBox/kernel/pull/4
Update README.md by Szybet · Pull Request #4 · Kobo-InkBox/kernel
/mnt/data/projects/git/conversations/media/4-7ACA0


[3/31/2023 2:52 PM] szybet
COMMON WHY

{Attachments}
/mnt/data/projects/git/conversations/media/image-E5680.png


[3/31/2023 2:55 PM] szybet
```
14:55 szybet@hyperbookszyb /home/build/inkbox/compiled-binaries
% git push
ERROR: Permission to Kobo-InkBox/compiled-binaries.git denied to Szybet.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
14:55 szybet@hyperbookszyb /home/build/inkbox/compiled-binaries
% 
```


[3/31/2023 2:55 PM] szybet
...


[3/31/2023 2:57 PM] szybet
and i dont have access to it on gitlab too


[3/31/2023 2:58 PM] szybet
@tux-linux can you at least add an empty readme so i can fork the repo?...


[3/31/2023 2:59 PM] szybet
or just stop annyoing me and give me access


[3/31/2023 3:08 PM] tux_linux
I think I forgot that one
Hang on


[3/31/2023 3:12 PM] tux_linux
Done


[3/31/2023 3:17 PM] szybet
i still dont have access


[3/31/2023 3:17 PM] szybet
i joined the organisation


[3/31/2023 3:24 PM] tux_linux
Try on gitlab


[3/31/2023 3:24 PM] szybet
i dont want to...


[3/31/2023 3:24 PM] szybet
its slow


[3/31/2023 3:24 PM] szybet
i will upload whole toolchain and qt soon


[3/31/2023 3:26 PM] szybet
add the readme to the repo on github so i can fork it


[3/31/2023 4:22 PM] tux_linux
Patience is a virtue


[3/31/2023 4:22 PM] szybet
wadnhyuaofjnuhwoierskdhrfffffuihdfyri


[3/31/2023 4:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D35EC.png


[3/31/2023 4:28 PM] szybet
CAN YOU STOP


[3/31/2023 4:28 PM] szybet
IM TRYING TO CONTRIBUTE


[3/31/2023 4:32 PM] tux_linux
Try with cli via https?


[3/31/2023 4:32 PM] tux_linux
I never tried via web ui


[3/31/2023 4:32 PM] szybet
oh ssh doesnt work?


[3/31/2023 4:32 PM] tux_linux
Cli works usually


[3/31/2023 4:32 PM] tux_linux
I already told you


[3/31/2023 4:33 PM] tux_linux
I will try to set it up tonight (ssh)
But https is usually reliable


[3/31/2023 4:53 PM] szybet
`/home/nicolas/Development/kox/koxtoolchain/build/kobo/.build/arm-kobo-linux-gnueabihf/src/binutils/bfd/stabs.c` i really wonder why all toolchain binaries have a fixed path in it


[3/31/2023 7:05 PM] szybet
```
remote: warning: See https://gh.io/lfs for more information.
remote: warning: File arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/usr/lib/libqalculate.a is 52.91 MB; this is larger than GitHub's recommended maximum file size of 50.00 MB
remote: warning: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.
```


[3/31/2023 7:54 PM] tux_linux
It's paid


[3/31/2023 7:55 PM] szybet
only a warning


[3/31/2023 7:58 PM] szybet
what with thissss


[3/31/2023 8:13 PM] tux_linux
And how are you pushing to GitHub


[3/31/2023 8:13 PM] tux_linux
Fork?


[3/31/2023 8:13 PM] szybet
fork.


[3/31/2023 8:15 PM] tux_linux
I give you access to repositories
I thought that was enough? Most commits don't weigh >50M


[3/31/2023 8:15 PM] szybet
not to github


[3/31/2023 8:16 PM] szybet
i dont really like pasting my password every time for https


[3/31/2023 8:16 PM] szybet
and its not a reason to add it to your gitlab, i prefer github


[3/31/2023 8:16 PM] tux_linux
GitHub is a backup


[3/31/2023 8:17 PM] tux_linux
I will fix ssh tonight


[3/31/2023 8:17 PM] szybet
i trust github more for being uptime


[4/1/2023 2:43 AM] tux_linux
fixed ssh


[4/1/2023 2:43 AM] tux_linux
tell me if it doesn't work


[4/1/2023 3:19 AM] tux_linux
Working on it...

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230401_011856422-37FD8.jpg


[4/1/2023 4:30 AM] tux_linux
TIL using `-f` on a device node does not work the same as `-e` because it's not really a `f`ile
i was scared


[4/1/2023 4:30 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/bb7ffa6abefcd8d7f114563d6dcd0b6192b96757
Presumably done

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/bb7ffa6abefcd8d7f114563d6dcd0b6192b96757
Update system overhaul; `gui_apps`: some fixes · Kobo-InkBox/rootfs...
The update script (`/etc/init.d/update.sh`) is now able (if stars are aligned correctly), to update the rootfs in an &#39;in-place&#39; way, to update X11 base and extensions filesystems, t...
/mnt/data/projects/git/conversations/media/bb7ffa6abefcd8d7f114563d6dcd0b6192b96757-8BD04


[4/1/2023 4:30 AM] tux_linux
I also put some for loops in gui_apps


[4/1/2023 4:31 AM] tux_linux
please test it...


[4/1/2023 4:31 AM] tux_linux
thanks


[4/1/2023 2:34 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle/pull/1

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/pull/1
fixes that worked for me, readme and a faster way to download neede...
…things
/mnt/data/projects/git/conversations/media/1-1900B


[4/1/2023 2:34 PM] szybet
@tux-linux @tux-linux @tux-linux


[4/1/2023 2:34 PM] szybet
on May 16, 2022


[4/1/2023 2:34 PM] szybet
A YEAR


[4/1/2023 2:34 PM] szybet
;-;


[4/1/2023 2:35 PM] tux_linux
I said I wouldn't accept it
Open a new pr with the commits that are really important for the os itself


[4/1/2023 2:36 PM] szybet
nope, accept it and modify it that it doesnt hurt you or smth


[4/1/2023 2:36 PM] tux_linux
DPI needs to be the same as other 768x1024 devices


[4/1/2023 2:36 PM] tux_linux
It's the same screen size


[4/1/2023 2:36 PM] szybet
lol no


[4/1/2023 2:36 PM] tux_linux
It can't just be different for another device


[4/1/2023 2:36 PM] szybet
it is


[4/1/2023 2:36 PM] szybet
for the nia


[4/1/2023 2:36 PM] szybet
i already said


[4/1/2023 2:37 PM] tux_linux
Prove me it's a different screen resolution


[4/1/2023 2:37 PM] tux_linux
No


[4/1/2023 2:37 PM] szybet
PIXELS dont say the size of the screen, or the size of the pixels


[4/1/2023 2:37 PM] szybet
DPI does


[4/1/2023 2:37 PM] tux_linux
It's 6in


[4/1/2023 2:37 PM] szybet
not every HD screen is the same size


[4/1/2023 2:38 PM] tux_linux
Same as Aura se or glo


[4/1/2023 2:39 PM] tux_linux
This DPI was fine on these devices
I don't see why it would be wrong on the nia


[4/1/2023 2:39 PM] szybet
its 64.9606299 inches


[4/1/2023 2:39 PM] szybet
i measured it


[4/1/2023 2:39 PM] szybet
like now


[4/1/2023 2:39 PM] tux_linux
64in


[4/1/2023 2:39 PM] tux_linux
Really


[4/1/2023 2:39 PM] tux_linux
Really


[4/1/2023 2:39 PM] tux_linux
Really


[4/1/2023 2:39 PM] szybet
165 cm


[4/1/2023 2:39 PM] tux_linux
!=64in


[4/1/2023 2:39 PM] tux_linux
The screen or the device


[4/1/2023 2:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230401_144009-AA6A7.jpg


[4/1/2023 2:40 PM] szybet
Stop arguing with me over specific nia things


[4/1/2023 2:40 PM] tux_linux
Ok, will do here too


[4/1/2023 2:41 PM] szybet
after changing this dpi even touch works better


[4/1/2023 2:41 PM] szybet
remember how i complained?


[4/1/2023 2:42 PM] szybet
especially when rotated


[4/1/2023 2:42 PM] kuratius
why is dpi relevant for the software?


[4/1/2023 2:43 PM] szybet
https://www.newegg.com/insider/what-is-mouse-dpi-and-why-is-it-important/

{Embed}
https://www.newegg.com/insider/what-is-mouse-dpi-and-why-is-it-important/
What is DPI, and why is it important? - Newegg Insider
DPI stands for dots per inch, referring to how a computer mouse measures physical distance. Higher DPI can lead to faster movement of your cusor on-screen.
/mnt/data/projects/git/conversations/media/corsair-cougar-lg-mouse-6-ECA2A.jpg


[4/1/2023 2:43 PM] tux_linux
ok, you proved your point


[4/1/2023 2:43 PM] tux_linux
I have 15 cm here


[4/1/2023 2:43 PM] tux_linux
(on glo)


[4/1/2023 2:43 PM] szybet
dpi for mouse - dpi for touchscreen


[4/1/2023 2:43 PM] tux_linux
strange


[4/1/2023 2:43 PM] szybet
THANK YOU ACCEPT THE COMMIT 😄


[4/1/2023 2:43 PM] tux_linux
do you know that this is 1,65 **m**?


[4/1/2023 2:44 PM] szybet
fuck


[4/1/2023 2:44 PM] szybet
mm


[4/1/2023 2:44 PM] szybet
165 mm


[4/1/2023 2:44 PM] szybet
😂


[4/1/2023 2:44 PM] tux_linux
physics class...


[4/1/2023 2:44 PM] tux_linux
here we do that error and fail exams


[4/1/2023 2:44 PM] szybet
and i do the error and have a tv sized eink


[4/1/2023 2:44 PM] szybet
nice


[4/1/2023 2:45 PM] tux_linux
why has epubtool changed in pr


[4/1/2023 2:46 PM] szybet
i updated it? propably idk


[4/1/2023 2:46 PM] tux_linux
when


[4/1/2023 2:46 PM] szybet
half a year ago it seems


[4/1/2023 2:47 PM] tux_linux
well

{Attachments}
/mnt/data/projects/git/conversations/media/image-2915A.png


[4/1/2023 2:48 PM] szybet
your fault


[4/1/2023 2:48 PM] szybet
you didnt accept it


[4/1/2023 2:48 PM] tux_linux
what was changed


[4/1/2023 2:48 PM] szybet
i just merged with the host repo


[4/1/2023 2:49 PM] tux_linux
why does this exist

{Attachments}
/mnt/data/projects/git/conversations/media/image-1378E.png


[4/1/2023 2:49 PM] szybet
propably some code that changed but could be helpful in the future


[4/1/2023 2:49 PM] tux_linux
then why not just use git checkout


[4/1/2023 2:50 PM] szybet
faster


[4/1/2023 2:58 PM] tux_linux
```
commit e9bac3bed10d567f091accca46a928ae96f73dc6 (HEAD -> main, origin/main, origin/HEAD)
Author: Nicolas Mailloux <nicolecrivain@gmail.com>
Date:   Fri Jan 6 16:47:09 2023 -0500

    Update `epubtool`
    
    It is now at this commit: https://github.com/Kobo-InkBox/epubtool/commit/f2a32df0465bc7c64df79b38ed17b9d5855ffa3a
```
well already done


[4/1/2023 2:58 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-9820D.png


[4/1/2023 2:59 PM] szybet
then whatever


[4/1/2023 2:59 PM] szybet
remove it i dont care


[4/1/2023 3:01 PM] tux_linux
you tested your qt?


[4/1/2023 3:01 PM] tux_linux
does it mean in using this version that platform plugins compiled here will never work?


[4/1/2023 3:02 PM] szybet
this newest? no, will in a minute but a similar setup i had , identical and worked


[4/1/2023 3:02 PM] szybet
yep you need clone compiled-binaries to home build inkbox and use it


[4/1/2023 3:03 PM] szybet
i mean wait, i will push today all those pull requests about the new qt


[4/1/2023 3:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-87561.png


[4/1/2023 3:04 PM] szybet
https://github.com/Szybet/compiled-binaries

{Embed}
https://github.com/Szybet/compiled-binaries
GitHub - Szybet/compiled-binaries: Compiled binaries of stuff used ...
Compiled binaries of stuff used for InkBox OS. WARNING : Don&#39;t ever expect this to be regularly updated and/or maintained. - GitHub - Szybet/compiled-binaries: Compiled binaries of stuff us...
/mnt/data/projects/git/conversations/media/compiled-binaries-F91D2


[4/1/2023 3:04 PM] szybet
i said i will make a pull request today


[4/1/2023 3:04 PM] tux_linux
G *i* **t** *l* a **b**


[4/1/2023 3:05 PM] szybet
https://tenor.com/view/no-gif-23721072

{Embed}
https://tenor.com/view/no-gif-23721072
/mnt/data/projects/git/conversations/media/no-AE423.png


[4/1/2023 3:05 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-EBD4F.png


[4/1/2023 3:06 PM] tux_linux
then i will do it for you


[4/1/2023 3:06 PM] szybet
what?


[4/1/2023 3:06 PM] tux_linux
push to gitlab


[4/1/2023 3:06 PM] tux_linux
from your repo


[4/1/2023 3:06 PM] szybet
WAIT COMMON


[4/1/2023 3:06 PM] szybet
I SAID NOT READY


[4/1/2023 3:07 PM] szybet
;-;


[4/1/2023 3:07 PM] tux_linux
well, qt and toolchain are ready?


[4/1/2023 3:08 PM] szybet
let me


[4/1/2023 3:08 PM] szybet
test


[4/1/2023 3:08 PM] szybet
it


[4/1/2023 3:08 PM] tux_linux
ok


[4/1/2023 3:09 PM] tux_linux
sorry


[4/1/2023 4:14 PM] szybet
@tux-linux any way to update rootfs without reboot?


[4/1/2023 4:14 PM] szybet
i mean i replace rootfs.squashfs


[4/1/2023 4:15 PM] tux_linux
Absolutely not


[4/1/2023 4:15 PM] szybet
😞


[4/1/2023 4:16 PM] tux_linux
It will not like it


[4/1/2023 4:16 PM] szybet
i only ask for a way to do it


[4/1/2023 4:16 PM] szybet
not that i want to make it


[4/1/2023 4:16 PM] tux_linux
I don't know any one


[4/1/2023 4:23 PM] tux_linux
i usually update mine by
```
(kobo)
mount /dev/mmcblk0p3 /mnt
(host)
scp rootfs.squashfs* root@192.168.3.2:/mnt

telnet 192.168.3.2
(kobo) sync && reboot -f
```


[4/1/2023 4:23 PM] tux_linux
telnet goes to initrd shell


[4/1/2023 4:23 PM] tux_linux
which is not affected by rootfs replacing mess


[4/1/2023 4:25 PM] tux_linux
scp is able to handle the transfer while rootfs is being replaced
but afterwards nothing works or almost nothing


[4/1/2023 4:57 PM] szybet
@tux-linux at what point of launching inkbox_gui is /kobo/run cleared?


[4/1/2023 5:49 PM] szybet
launching inkbox somehow removes /run/udev


[4/1/2023 6:02 PM] tux_linux
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/remount_tmpfs_launch.sh

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/remount_tmpfs_launch.sh
gui-bundle/remount_tmpfs_launch.sh at main · Kobo-InkBox/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[4/1/2023 6:02 PM] szybet
the fuck...


[4/1/2023 6:02 PM] tux_linux
I don't remember quite when it is launched
But I remember that it absolutely needs to stay like this


[4/1/2023 6:02 PM] szybet
why isint this... okay...


[4/1/2023 6:02 PM] szybet
its launched from the gui?


[4/1/2023 6:02 PM] tux_linux
I think


[4/1/2023 6:02 PM] szybet
fuuuck :(


[4/1/2023 6:02 PM] tux_linux
Do ripgrep maybe


[4/1/2023 6:03 PM] szybet
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa


[4/1/2023 6:04 PM] tux_linux
You can maybe just send udev folder elsewhere (maybe in /dev) and add a line to symlink it in run in this script


[4/1/2023 6:04 PM] szybet
i symlink it


[4/1/2023 6:04 PM] szybet
i mount it


[4/1/2023 6:04 PM] szybet
and it gets removed


[4/1/2023 6:04 PM] tux_linux
You symlink it where


[4/1/2023 6:04 PM] szybet
for an hour i was trying to figure out what is going on


[4/1/2023 6:04 PM] szybet
it needs to be /run/udev


[4/1/2023 6:05 PM] szybet
and it will be


[4/1/2023 6:05 PM] tux_linux
Well, mount it to /dev/udev


[4/1/2023 6:05 PM] szybet
n o


[4/1/2023 6:05 PM] szybet
no


[4/1/2023 6:05 PM] szybet
no


[4/1/2023 6:05 PM] szybet
no


[4/1/2023 6:05 PM] szybet
NO NO


[4/1/2023 6:05 PM] szybet
NO


[4/1/2023 6:05 PM] szybet
NO


[4/1/2023 6:05 PM] szybet
STOP


[4/1/2023 6:05 PM] tux_linux
And then add a symlink in /kobo/run/udev


[4/1/2023 6:05 PM] szybet
i symlink it from rootfs


[4/1/2023 6:05 PM] szybet
to /kobo/run/udev


[4/1/2023 6:05 PM] tux_linux
What?


[4/1/2023 6:06 PM] tux_linux
How are you able to access it


[4/1/2023 6:06 PM] szybet
whatever you will se in the pull request


[4/1/2023 6:06 PM] tux_linux
From chroot


[4/1/2023 6:06 PM] szybet
ln -s /external_root/run/udev/ /kobo/run/udev


[4/1/2023 6:06 PM] tux_linux
!?


[4/1/2023 6:06 PM] tux_linux
The first path looks like you're in Gui rootfs and the second looks like you're in rootfs


[4/1/2023 6:07 PM] szybet
yes


[4/1/2023 6:07 PM] tux_linux
It doesn't make sense


[4/1/2023 6:07 PM] szybet
it works


[4/1/2023 6:07 PM] szybet
heh


[4/1/2023 6:07 PM] tux_linux
Where is external_root located in rootfs


[4/1/2023 6:08 PM] szybet
nowhere


[4/1/2023 6:08 PM] szybet
heh


[4/1/2023 6:08 PM] szybet
`build/build_inkbox/src/main.cpp:            QProcess::execute("remount_tmpfs_launch.sh", QStringList());`


[4/1/2023 6:08 PM] szybet
can this be done in the script?


[4/1/2023 6:08 PM] szybet
wtf?


[4/1/2023 6:08 PM] tux_linux
Or maybe just tell remount sh script to send a ibxd message telling it to symlink/bind-mount it every time needed


[4/1/2023 6:09 PM] szybet
or i will tell my dog to go buy some milk


[4/1/2023 6:09 PM] tux_linux
No, from what I remember it was very tricky and was the cause of a big reader problem that was opening random files instead of the wanted one


[4/1/2023 6:09 PM] szybet
overcomplicating things


[4/1/2023 6:09 PM] tux_linux
No


[4/1/2023 6:10 PM] szybet
i will add `ln -s /external_root/run/udev/ /run/udev`  in `remount_tmpfs_launch.sh` and hope udev doesnt freak out


[4/1/2023 6:10 PM] tux_linux
Well try it


[4/1/2023 6:11 PM] szybet
inkbox doesnt need keyboard anyway


[4/1/2023 6:11 PM] szybet
user apps need


[4/1/2023 7:39 PM] szybet
@tux-linux how do i add udev in rootfs in autostart


[4/1/2023 7:40 PM] tux_linux
It's already there


[4/1/2023 7:40 PM] szybet
o k


[4/1/2023 7:40 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230401-134053-9804A.png


[4/1/2023 8:26 PM] szybet
what is rootfs.tar.xz in gui-rootfs repo


[4/1/2023 8:26 PM] szybet
did you forgot to delete it?


[4/1/2023 8:26 PM] szybet
@tux-linux


[4/1/2023 8:28 PM] tux_linux
It's the original build root file system
It is safe to delete


[4/1/2023 8:47 PM] szybet
@tux-linux when is gui-rootfs.isa used, i mean do i need to reset a service or reboot to update it


[4/1/2023 8:52 PM] szybet
in well... os init, eh


[4/1/2023 9:50 PM] tux_linux
restart inkbox_gui


[4/1/2023 9:51 PM] tux_linux
I think


[4/1/2023 9:51 PM] szybet
nope


[4/1/2023 9:51 PM] tux_linux
What is the file name


[4/1/2023 10:11 PM] tux_linux
on kindle touch input is event2

{Attachments}
/mnt/data/projects/git/conversations/media/image-00CD8.png


[4/1/2023 10:12 PM] szybet
you said the newest platform plugin is not used on kt anyway?


[4/1/2023 10:12 PM] tux_linux
no, it is


[4/1/2023 10:13 PM] szybet
then write a rule applying to event2 only when its using the device name that kt has


[4/1/2023 10:14 PM] tux_linux
and how do i do that


[4/1/2023 10:14 PM] szybet
google & try and error


[4/1/2023 10:14 PM] tux_linux
you're the author of the pr


[4/1/2023 10:14 PM] szybet
you have my base, which was too lot to figure out so thats it


[4/1/2023 10:15 PM] szybet
im trying to make my own udev role to work for 2h and you expect me to do it for the kindle which i dont have LOL


[4/1/2023 10:15 PM] tux_linux
well, you don't have to submit it now


[4/1/2023 10:15 PM] szybet
my point is that i wont support other devices, i cant


[4/1/2023 10:16 PM] tux_linux
if you do `KERNEL=="event[0-2]"` would it work?


[4/1/2023 10:16 PM] szybet
wifi, ipd things that i wrote only support other devices because i already has `if` references for other devices


[4/1/2023 10:16 PM] tux_linux
I don't have this kind of setup either


[4/1/2023 10:16 PM] szybet
cool, i care for the nia you for the kindle


[4/1/2023 10:17 PM] tux_linux
i can't test keyboard on kindle


[4/1/2023 10:17 PM] szybet
you would kill my keyboard which is on event2 so ummm NO


[4/1/2023 10:17 PM] tux_linux
kill?


[4/1/2023 10:17 PM] szybet
turn off


[4/1/2023 10:17 PM] szybet
whatever


[4/1/2023 10:17 PM] tux_linux
oh
well
i know


[4/1/2023 10:17 PM] tux_linux
bind-mount rule


[4/1/2023 10:17 PM] szybet
no


[4/1/2023 10:17 PM] tux_linux
no ifs in udev rule


[4/1/2023 10:18 PM] szybet
you run debug:keyboard and libinput has logs which say what devices it ignores, which it uses


[4/1/2023 10:18 PM] szybet
so you dont need a keyboard


[4/1/2023 10:18 PM] szybet
write a second udev rule, make it propely


[4/1/2023 10:18 PM] tux_linux
it would be a single udev rule probably


[4/1/2023 10:18 PM] tux_linux
i don't know how it handles conditions


[4/1/2023 10:18 PM] szybet
yes


[4/1/2023 10:19 PM] szybet
.


[4/1/2023 10:19 PM] szybet
my touchescreen is elan-touch


[4/1/2023 10:19 PM] szybet
and udev knows that


[4/1/2023 10:23 PM] tux_linux
Well can you add `nia` in rule file name and we can deal with this after 2.0 and only support keyboard for nia?
Also is there a protection measure for other devices trying to run userapps using a keyboard?


[4/1/2023 10:25 PM] szybet
not after 2.0 because i already added it, just create the udev rule...


[4/1/2023 10:25 PM] szybet
userapps will have privileges to access keyboard, like there already is bind mount /dev/input devices


[4/1/2023 10:29 PM] tux_linux
Is it really only the udev rule?


[4/1/2023 10:30 PM] szybet
yes?


[4/1/2023 10:30 PM] szybet
why do you even need it


[4/1/2023 10:30 PM] szybet
until you dont call keyboard or mouse to launch a qt app libinput will not even try to grab the touchscreen, it will be not created


[4/1/2023 10:41 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-876D4.png

{Reactions}
👍 

[4/1/2023 10:41 PM] szybet
good luck


[4/1/2023 10:42 PM] szybet
you are welcome


[4/1/2023 10:42 PM] szybet
finally i can finish feathernotes and move on


[4/2/2023 6:40 PM] szybet
@tux-linux why cant i edit `/data/onboard/.apps/feathernotes/feathernotes/etc/group`


[4/2/2023 6:40 PM] szybet
from rootfs


[4/2/2023 6:44 PM] szybet
how is it read only


[4/2/2023 6:45 PM] szybet
ok i see


[4/2/2023 6:45 PM] szybet
(mount -o remount,ro "${extension_mountpoint}/etc") || die "Failed to remount '${extension_mountpoint}/etc' read-only." 1


[4/2/2023 7:55 PM] tux_linux
why do you want to change it


[4/2/2023 7:55 PM] szybet
not change it, just use it later because `                    echo "input:x:23:user" >> "${extension_mountpoint}/etc/group" || die "Failed to add input group at ${extension_mountpoint}/etc/group" 1`


[4/2/2023 7:56 PM] tux_linux
ok


[4/2/2023 7:56 PM] szybet
what


[4/2/2023 7:56 PM] tux_linux
'input


[4/2/2023 7:56 PM] tux_linux
'


[4/2/2023 7:56 PM] tux_linux
'input'


[4/2/2023 7:56 PM] tux_linux
quote it


[4/2/2023 7:57 PM] szybet
https://tenor.com/view/okay-ok-meme-gif-21668690

{Embed}
https://tenor.com/view/okay-ok-meme-gif-21668690
/mnt/data/projects/git/conversations/media/okay-ok-DE6BC.png


[4/2/2023 8:35 PM] szybet
```
stat64("/sys/subsystem", 0x7ec21680)    = -1 ENOENT (No such file or directory)
openat(AT_FDCWD, "/sys/bus", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_CLOEXEC|O_DIRECTORY) = -1 ENOENT (No such file or directory)
openat(AT_FDCWD, "/sys/class", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_CLOEXEC|O_DIRECTORY) = 11
```


[4/2/2023 8:35 PM] szybet
my god


[4/2/2023 8:35 PM] szybet
libinput needs access to whole /sys


[4/2/2023 8:48 PM] szybet
You won't like it, but it's necceserry


[4/2/2023 8:50 PM] tux_linux
My god
Oh no


[4/2/2023 8:50 PM] szybet
even write access


[4/2/2023 8:50 PM] tux_linux
n o


[4/2/2023 8:50 PM] szybet
https://tenor.com/view/oh-no-gif-24189318

{Embed}
https://tenor.com/view/oh-no-gif-24189318
/mnt/data/projects/git/conversations/media/oh-no-02DE8.png


[4/2/2023 8:50 PM] tux_linux
Then require rooted device


[4/2/2023 8:51 PM] szybet
apps are still signed by us?


[4/2/2023 8:56 PM] tux_linux
Yes
It's still not cool anyway


[4/2/2023 8:56 PM] szybet
well you can add those restrictions


[4/2/2023 8:57 PM] szybet
i already commited


[4/2/2023 8:57 PM] szybet
andimexhausted5hittooktofigurethisoutiwantsomesleep


[4/2/2023 9:01 PM] tux_linux
At least we know sys restrictions effectively worked


[4/2/2023 9:02 PM] szybet
they effectively took my time away


[4/2/2023 9:03 PM] szybet
i mean no, now it doesnt mount a sysfs, i bind mount from the main rootfs whats needed


[4/2/2023 9:03 PM] szybet
we talked about it


[4/2/2023 9:03 PM] szybet
so thats the way to go


[4/2/2023 9:11 PM] szybet
dont accept rootfs commit yet - ipd doesnt work


[4/3/2023 8:50 PM] andi15701
never count on evdev numbers, they are not stable, rather depend on device names or classes do setup anything specific


[4/3/2023 10:11 PM] szybet
good point but it's rather stable... never seen it otherwise


[4/3/2023 10:11 PM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/86133e15e43b5ba722909abfa4d535edd681bd45

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/86133e15e43b5ba722909abfa4d535edd681bd45
bugbugbug what · Kobo-InkBox/inkbox-power-daemon@86133e1
/mnt/data/projects/git/conversations/media/86133e15e43b5ba722909abfa4d535edd681bd45-5134F


[4/3/2023 10:11 PM] szybet
anyone would want to explain? warnings say those are unneceserry


[4/3/2023 10:52 PM] tux_linux
What is the "first one"?


[4/3/2023 10:57 PM] szybet
what


[4/3/2023 11:02 PM] szybet
does `4 - chargerWakeUp` work for you?


[4/3/2023 11:02 PM] szybet
for me not


[4/3/2023 11:02 PM] szybet
why...


[4/3/2023 11:07 PM] ninuje
It isn't on most newer devices, especially if N > 2 or it's an SMP board


[4/3/2023 11:08 PM] andi15701
not only that


[4/3/2023 11:08 PM] andi15701
subtle configuration changes might suffice


[4/3/2023 11:08 PM] ninuje
Yup


[4/3/2023 11:09 PM] ninuje
I don't think early kernels/userland have by-path support, though, which is basically your only excuse to YOLO it on old devices


[4/3/2023 11:09 PM] ninuje
(Not talking out of my ass, I *have* seen it move around on the exact same devices from one boot to another)


[4/3/2023 11:09 PM] szybet
well okay, i will change that ~~and i just see how tux-linux write 5 diffrent udev rules for every device~~


[4/3/2023 11:10 PM] ninuje
That's not even talking about devices with hardware revisions where you have a completely different set of input devices on the same model ;o)


[4/3/2023 11:10 PM] szybet
btw connecting kobo usb host to pc usb host causes the kobo to reset, and the pc to reset all usb - not even on the same controller 🥴


[4/3/2023 11:11 PM] ninuje
(Which, again applies to almost the entirety of the current lineup)


[4/3/2023 11:11 PM] andi15701
seen that also


[4/3/2023 11:11 PM] szybet
sounds like hell to manage 😄


[4/3/2023 11:11 PM] ninuje
We keep a list of by-path entries and poke 'em in order


[4/3/2023 11:12 PM] ninuje
if it's there, we win!


[4/3/2023 11:12 PM] ninuje
https://github.com/koreader/koreader/blob/14de514ae8a9c92450be457970201a53017f2f48/frontend/device/kobo/device.lua#L595-L652

{Embed}
https://github.com/koreader/koreader/blob/14de514ae8a9c92450be457970201a53017f2f48/frontend/device/kobo/device.lua
koreader/device.lua at 14de514ae8a9c92450be457970201a53017f2f48 · k...
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/device.lua at 14de514ae8a9c92450be45...
/mnt/data/projects/git/conversations/media/koreader-125C6


[4/3/2023 11:13 PM] szybet
Automagic :D


[4/3/2023 11:18 PM] andi15701
well, no automagic


[4/3/2023 11:19 PM] andi15701
to me it looks like to many paths


[4/3/2023 11:26 PM] andi15701
-- NOTE: i.MX5 devices have a wonky RTC that doesn't like alarms set further away that UINT16_MAX seconds from now...
    --       (c.f., WakeupMgr for more details).
    -- NOTE: getRTCName is currently hardcoded to rtc0 (which is also WakeupMgr's default).
    local dodgy_rtc = false
    if getRTCName() == "pmic_rtc" then
        -- This *should* match the 'RTC' (46) NTX HWConfig field being set to 'MSP430' (0).
        dodgy_rtc = true
    end


[4/3/2023 11:26 PM] andi15701
just wondering: is that rtc problem bound to a specific firmware version of that msp430?


[4/3/2023 11:27 PM] andi15701
there are i.MX6 devices out there which use the rtc in the msp430


[4/3/2023 11:27 PM] kuratius
question about imx architecture stuff: I recently went through plato src and saw that it targets a generic 32 bit arm instead of a more specific model, are there performance gains from compiling for a native architecture for your ereader or do all kobos use the same featureset?


[4/3/2023 11:28 PM] kuratius
also what kind of cpu target is arm-nickel?


[4/3/2023 11:29 PM] kuratius
does it map to an existing arm cpu target or is it a fully custom one?


[4/3/2023 11:29 PM] andi15701
nickel stands for the original firmware


[4/3/2023 11:30 PM] kuratius
yeah but is that relevant for a cpu target?


[4/3/2023 11:30 PM] andi15701
probably not cpu, but maybe operation system stuff


[4/3/2023 11:30 PM] andi15701
i.e. libc, etc.


[4/3/2023 11:31 PM] andi15701
second word in the triplet is os


[4/3/2023 11:31 PM] kuratius
so if you were to compile fully static binaries you wouldnt need arm-nickel as a target?


[4/3/2023 11:31 PM] kuratius
and could use arm-unknown-eabi etc?


[4/3/2023 11:32 PM] andi15701
or if you replace the operating system by something completely different


[4/3/2023 11:33 PM] andi15701
so I would propse something arm-linux-eabi


[4/3/2023 11:43 PM] ninuje
Good question. No idea, I'm not sure I've ever had my hands on an i.MX6 one not using another RTC; but we reproduced that on basically the full NTX lineup using that RTC (at least for Kobo devices)


[4/3/2023 11:45 PM] ninuje
Cross-compiling the std Rust crates with a custom toolchain was a very very very very ugly nightmarish endeavor the last time I checked, so I'm fairly sure Plato goes with whatever the standard cross TC for arm32 is


[4/3/2023 11:46 PM] ninuje
(and they're certainly not using our Nickel-compatible TC; for one, Plato predates it, and for another, it'd be very very dumb, because that TC is horrible. It's only there for stupid STL reasons because Qt).


[4/3/2023 11:52 PM] andi15701
the reason my I am asking is because the rtc driver in the mainline kernel for the msp430 thing then should also reject those things


[4/3/2023 11:52 PM] andi15701
and there are several version checks


[4/3/2023 11:52 PM] andi15701
hmm, that one does not implement alarm at all


[4/3/2023 11:53 PM] ninuje
c.f., https://github.com/koreader/koreader/issues/8039 for the details (basically, it wraps around)

{Embed}
https://github.com/koreader/koreader/issues/8039
Autoshutdown not working on a Koob Touch · Issue #8039 · koreader/k...
Hi there, as the title states I can't seem to get auto shutdown to work. Auto suspend on the other hand does work. I'm using Kobo Touch (2gb). I have auto suspend set to 15min and auto shut...
/mnt/data/projects/git/conversations/media/8039-6A223


[4/4/2023 12:27 AM] kuratius
Do these configuration/feature sets differ between the arm cpus used in the different kobos?

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230404-002446-0ECF8.png


[4/4/2023 12:27 AM] kuratius
It seems like it may be configurable without a toolchain change


[4/4/2023 12:27 AM] kuratius
Also what was the major hurdle? LLVM? No rust bootstrapping capability? Something else?


[4/4/2023 4:44 AM] tux_linux
try to find out! \;)


[4/4/2023 4:44 AM] tux_linux
when everything is ready, tell me and i will examine your PRs one by one


[4/4/2023 6:57 PM] andi15701
about that evdev access: what you really want to achieve?


[4/4/2023 7:00 PM] szybet
make libinput ignore gpio pins and touch input


[4/4/2023 7:01 PM] andi15701
does libinput something horrible with that?


[4/4/2023 7:01 PM] szybet
messes up qt input, because we still use modified evdev touch handler which is good


[4/4/2023 7:14 PM] andi15701
interesting, I remember some trouble with libinput and cyttsp5 and Xorg


[4/4/2023 7:15 PM] andi15701
but that went away with some kernel patching


[4/4/2023 7:15 PM] andi15701
but what happens with gpio pins?


[4/4/2023 7:15 PM] szybet
i could make it work - but i have no interest in doing that


[4/4/2023 7:15 PM] szybet
they are grabbed by ipd


[4/4/2023 7:19 PM] andi15701
hmm, so they go through ipd then through qt to the application?


[4/4/2023 7:20 PM] andi15701
so that the application can handle page up/down?


[4/4/2023 7:20 PM] szybet
gpio pins are completly managed by ipd


[4/4/2023 7:20 PM] szybet
which can send requests to apps


[4/4/2023 7:20 PM] szybet
like "go to sleep save data"


[4/4/2023 7:20 PM] szybet
or "wake up"


[4/4/2023 7:20 PM] szybet
we dont have currecntly any device for it so not yet


[4/4/2023 7:21 PM] andi15701
Kobo Libra H2O?


[4/4/2023 7:21 PM] szybet
idk, i dont have it


[4/4/2023 7:21 PM] szybet
nicolas didn't mention any need for it


[4/4/2023 7:26 PM] andi15701
Well, I have the vision5, which has also the keys. And you can turn pages with it


[4/4/2023 7:28 PM] andi15701
hmm, but why is the sleep key on an external keyboard different from any sleep key on a gpio pin?


[4/4/2023 7:30 PM] andi15701
is that Libra H2O still alive?


[4/4/2023 7:30 PM] szybet
idk, i dont have it
nicolas didn't mention any need for it
idk, i dont have it
nicolas didn't mention any need for it
idk, i dont have it
nicolas didn't mention any need for it


[4/4/2023 7:31 PM] andi15701
question towards tux-linux


[4/4/2023 7:31 PM] szybet
i dont really care for keyboard sleep request


[4/4/2023 8:43 PM] andi15701
do you do anything with the homepad thing?


[4/4/2023 8:47 PM] szybet
what homepad?


[4/4/2023 8:48 PM] andi15701
https://de.wikipedia.org/wiki/Datei:EBook_Reader_Tolino_Vision_-_Frontansicht.jpg

{Embed}
https://de.wikipedia.org/wiki/Datei:EBook_Reader_Tolino_Vision_-_Frontansicht.jpg
Datei:EBook Reader Tolino Vision - Frontansicht.jpg
/mnt/data/projects/git/conversations/media/EBook_Reader_Tolino_Vision_-_Frontansicht-363F6.jpg


[4/4/2023 8:48 PM] andi15701
that thing below the display


[4/4/2023 8:49 PM] andi15701
which looks like a button


[4/4/2023 8:49 PM] szybet
kobo nia doesnt have it


[4/4/2023 8:52 PM] andi15701
e.g. Tolino Shine 2 has a home button there


[4/4/2023 8:52 PM] andi15701
so it is not always there


[4/4/2023 9:18 PM] szybet
it works, IDK IDK IDK


[4/4/2023 9:18 PM] szybet
you can accept all the PR :)


[4/4/2023 9:34 PM] szybet
~~and update IPD~~


[4/4/2023 11:28 PM] szybet
the nia randomly wakes up at 95% when charging


[4/4/2023 11:28 PM] szybet
cool...


[4/4/2023 11:37 PM] andi15701
technically you can wake up from any gpio


[4/4/2023 11:37 PM] szybet
i want it to sleep :(


[4/4/2023 11:37 PM] andi15701
and one of the gpio is the interrupt of the pmic


[4/4/2023 11:38 PM] andi15701
and if the corresponding bits are set, you can wake up from many things


[4/4/2023 11:38 PM] andi15701
so maybe clear some bits there


[4/4/2023 11:39 PM] andi15701
and the ntx 4.1.15 kernel has some bugs in the interrupt handling


[4/4/2023 11:41 PM] szybet
i see :)


[4/4/2023 11:42 PM] andi15701
the interrupt handling for that pmic in mainline is completely rewritten by me


[4/4/2023 11:43 PM] andi15701
one of the bugs is that it uses edge interrupts instead of level interrupts


[4/5/2023 3:51 AM] tux_linux
test it more


[4/5/2023 9:14 AM] szybet
Tested


[4/5/2023 4:17 PM] tux_linux
Yes it is


[4/5/2023 4:18 PM] tux_linux
For real this time


[4/5/2023 4:18 PM] tux_linux
?


[4/5/2023 4:22 PM] szybet
there werent any issues with ipd - it was feathernotes fault


[4/5/2023 4:22 PM] szybet
but i still fixed a fev things, improved


[4/5/2023 4:22 PM] szybet
so yea, you can accept all PR and update IPD binary


[4/5/2023 4:22 PM] szybet
but first check if it will work after a reboot -  fixed this strange bug but still


[4/5/2023 4:23 PM] tux_linux
Ok


[4/5/2023 4:24 PM] tux_linux
IPD?


[4/5/2023 4:24 PM] szybet
like look here: https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/339cbb1fa0271011d15a3a10cc8afa81f6e0dbfe/src/main.cpp#L63-L67

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/339cbb1fa0271011d15a3a10cc8afa81f6e0dbfe/src/main.cpp
inkbox-power-daemon/main.cpp at 339cbb1fa0271011d15a3a10cc8afa81f6e...
InkBox Power Daemon (IPD) source code. Contribute to Kobo-InkBox/inkbox-power-daemon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-daemon-C2D7A


[4/5/2023 4:24 PM] szybet
yes


[4/5/2023 4:24 PM] tux_linux
Why is it connected


[4/5/2023 4:25 PM] szybet
what connected


[4/5/2023 4:25 PM] tux_linux
commented


[4/5/2023 4:25 PM] szybet
FIX FOR RANDOM SEGMENTATION FAULTS WHICH IS CAUSING EVEN MORE SEGMENTATION FAULTS OH NOOOOOOOO


[4/5/2023 4:25 PM] szybet
i mean it works now


[4/5/2023 4:25 PM] szybet
for now


[4/5/2023 4:25 PM] szybet
:D


[4/5/2023 4:25 PM] tux_linux
So it's the static< lines that caused the problem


[4/5/2023 4:25 PM] szybet
propably, yes


[4/5/2023 4:25 PM] szybet
BUT


[4/5/2023 4:26 PM] szybet
those lines were fixes for thread things that also were random


[4/5/2023 4:26 PM] szybet
but i tested it now and its pretty good going


[4/5/2023 4:26 PM] szybet
so um yea


[4/5/2023 5:53 PM] szybet
@andi any way to get what is causing a kobo to wake up? no info on UART line,,,


[4/5/2023 5:53 PM] szybet
only thing i see in dmesg is ```[ 1039.907425] [elan_touch_report_data-603] Hello packet 55:55:55:55:ff:ff:ff:ff received
[ 1040.069623] PM: resume of devices complete after 399.740 msecs
[ 1040.071358] PM: resume devices took 0.400 seconds
[ 1040.071373] PM: Finishing wakeup.
```


[4/5/2023 5:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-E6397.txt


[4/5/2023 5:53 PM] szybet
full dmesg, but i cant see anything


[4/5/2023 5:56 PM] andi15701
I guess no_console_suspend is already appended?


[4/5/2023 5:56 PM] andi15701
to kernel commandline


[4/5/2023 5:56 PM] szybet
um what is it


[4/5/2023 5:57 PM] andi15701
more debug output during suspend/resume


[4/5/2023 5:58 PM] szybet
any way to append it from uboot?


[4/5/2023 6:06 PM] andi15701
setenv bootargs before booting the kernel


[4/5/2023 6:07 PM] andi15701
load_ntxkernel ; load_ntxdtb


[4/5/2023 6:07 PM] andi15701
and then setenv bootargs ......


[4/5/2023 6:07 PM] andi15701
and bootm


[4/5/2023 6:14 PM] andi15701
maybe wakeup_count files are interesting


[4/5/2023 6:14 PM] andi15701
in /sys


[4/5/2023 8:35 PM] ninuje
Can't remember the name right now, but there's something in /sys that flags the wakeup source


[4/5/2023 8:36 PM] ninuje
It's a mess on sunxi, but, IIRC, might be human-readable on NXP


[4/5/2023 8:37 PM] ninuje
Can't remember if that's wakeup_sources in debugfs


[4/5/2023 8:37 PM] ninuje
Would need to pull my shell history, not near the devices right now


[4/5/2023 8:40 PM] ninuje
That's an x86_64 target, so I don't even understand the question.


[4/5/2023 9:19 PM] andi15701
/sys/power/pm_wakeup_irq


[4/5/2023 9:20 PM] andi15701
on 6.1 kernel


[4/5/2023 9:21 PM] andi15701
root@akepd:~# grep  $(cat /sys/power/pm_wakeup_irq) /proc/interrupts 
174:         46  gpio-mxc  11 Level     rc5t619


[4/5/2023 9:21 PM] andi15701
that is nasty, becase that is the parent


[4/5/2023 9:21 PM] andi15701
of


[4/5/2023 9:22 PM] andi15701
243:          3   rc5t619   2 Edge      rtc-rc5t619


[4/5/2023 9:22 PM] andi15701
which actually triggered the wakeup


[4/5/2023 9:23 PM] andi15701
but you probably would get it down to the status register bit of the rc5t619


[4/5/2023 9:26 PM] andi15701
so if you debug something in the NTX mess: drivers/mfd/ricoh619.c


[4/5/2023 9:27 PM] andi15701
or drivers/mfd/ricoh619-irq.c


[4/5/2023 9:27 PM] andi15701
but disinfect your screen after looking at those files


[4/5/2023 10:35 PM] andi15701
you might also try the other way around


[4/5/2023 10:35 PM] andi15701
just find out what interrupts occur when the device is not in suspend


[4/5/2023 10:37 PM] andi15701
and if the rc5t619 is doing something maybe you just disable its interrupts


[4/5/2023 10:38 PM] andi15701
register 0x8C and 0x8D are interesting


[4/5/2023 10:39 PM] andi15701
maybe clearing things helps


[4/5/2023 10:39 PM] andi15701
there


[4/5/2023 10:55 PM] andi15701
that is some adc threshold stuff


[4/5/2023 10:59 PM] andi15701
0xBE-0xC1 might also be interesting


[4/5/2023 10:59 PM] andi15701
I am not sure about the logic direction at those regs


[4/5/2023 10:59 PM] andi15701
that is configuring irqs of charger


[4/5/2023 11:11 PM] szybet
not really


[4/5/2023 11:12 PM] szybet
cool i hope its that easy


[4/5/2023 11:12 PM] szybet
i hope this console thing helps


[4/5/2023 11:55 PM] tux_linux
why 3mb for sys


[4/5/2023 11:55 PM] tux_linux
too much
or am i wrong


[4/6/2023 5:56 AM] tux_linux
Huge power outage here
Will bring server up as soon as possible


[4/6/2023 8:12 AM] andi15701
/sys/module/printk/parameters/console_suspend might also help


[4/6/2023 8:12 AM] andi15701
write N to it


[4/6/2023 10:22 AM] szybet
Idk


[4/6/2023 11:09 AM] kuratius
@tux-linux If I pay you 10-20€, would you make a build container for the images so that building doesn't require a lot of fiddling to reproduce your configuration?
I think while there may be people who want an ereader that is more locked down than the kobo defaultOS, something that is easy to play around with for ereader software development and that doesn't run the risk of a nickel update nuking your install would be good to have. It fills a similar niche as e.g. raspberry pi boards, and those are never really that locked down. The people who are going to install a customOS are mostly going to be tinkerers, and having a fully locked downOS is more of an option that a hardware manufacturer or a project where you cant just swap or reimage after you screwed up your system to the point of not booting would use, since it would offer more value to the users.


[4/6/2023 11:09 AM] kuratius
I'm probably not gonna use inkboxOS for now, but I'm at least interested in seeing it succeed, and I'm willing to invest a little bit to see that happen


[4/6/2023 11:10 AM] szybet
if tux-linux doesnt want to, i can do this ~~but its better that he does it, he wrote imgtool~~


[4/6/2023 11:11 AM] szybet
very cool approach


[4/6/2023 11:14 AM] szybet
also, i understand your concerns but inkbox can be build from scratch not using imgtool, but by manually creating and compiling everything, and placing it in right places ( but yes, its not easy )


[4/6/2023 12:12 PM] andi15701
There are some readers supported by pmOS, that brings you a system to create images. Acceptance criteria it is that login via ssh is possible. What is missing there: eink-optimized apps. But image creation is more solid.  What readers do you have access to?


[4/6/2023 12:14 PM] andi15701
I am not seeing postmarketOS as the best/only option, but I see it a good way to get people to a system where they can start developing something without having to deal with serial consoles, etc.


[4/6/2023 12:14 PM] andi15701
I would love to see the same apps on both systems


[4/6/2023 12:16 PM] kuratius
A kobo nia and a kindle paperwhite


[4/6/2023 12:17 PM] kuratius
(the paperwhite is jailbroken, but I suspect it's irrelevant anyway)


[4/6/2023 12:18 PM] kuratius
I can flash the sd on the nia easily


[4/6/2023 12:18 PM] kuratius
And I can get a serial console if needed but it's not convenient


[4/6/2023 12:18 PM] kuratius
(and there is a flag to display serial output on e.g. inkboxOS directly on the eink screen, so it might not have been needed anyway)


[4/6/2023 12:19 PM] andi15701
serial console is needed for convincing the bootloader to load kernel


[4/6/2023 12:19 PM] andi15701
if it misbehaves


[4/6/2023 12:20 PM] andi15701
but once that is solved, it should be rarely needed


[4/6/2023 12:30 PM] andi15701
I am not against Inkbox OS but I am a bit annoyed by having to tame another init system for things which work out of the box at most places


[4/6/2023 12:35 PM] andi15701
the init system has of course interesting features and is a great learning experience


[4/6/2023 12:43 PM] andi15701
and probably needed for very old kernels


[4/6/2023 1:13 PM] andi15701
Especially about the Nia: Drivers are probably all there, so support for a new system should be a few days away.


[4/6/2023 1:16 PM] andi15701
I am willing to help there


[4/6/2023 1:31 PM] andi15701
and personally on my main working horse I use the original firmware (just for actually reading books) + new  bootloader + custom bootscript + new kernel + debian in a dual boot


[4/6/2023 3:20 PM] kuratius
what would the steps be?


[4/6/2023 3:23 PM] szybet
Um soooo there is a mainline kernel to test on the nia, but there is risk it will destroy the device so im not doing it


[4/6/2023 3:40 PM] kuratius
why is that?


[4/6/2023 3:41 PM] szybet
why is what


[4/6/2023 3:41 PM] kuratius
as in, how can it destroy the device?


[4/6/2023 3:41 PM] szybet
higher voltages & friends


[4/6/2023 3:41 PM] kuratius
this isnt controlled by the bios?


[4/6/2023 3:42 PM] szybet
where do you have bios on arm?


[4/6/2023 3:42 PM] szybet
there is uboot - it boots the linux kernel


[4/6/2023 3:42 PM] kuratius
admittedly you said it doesnt have a bios, just a special section on the sd card, but still


[4/6/2023 3:43 PM] szybet
and how do you think the linux kernel for example turns off wifi? by turning off the power supply for the wifi IC


[4/6/2023 3:43 PM] szybet
it really only boots linux


[4/6/2023 3:43 PM] kuratius
do you know where the kernel controls voltages?


[4/6/2023 3:44 PM] kuratius
is it possible to get the equivalent section from the nia (nickel or inkbox) or is it obfuscated?


[4/6/2023 3:45 PM] szybet
what where?... cpu? code? binary section? linux sys filesystem?..............


[4/6/2023 3:45 PM] szybet
it is, andi did it already, but there is STILL the RISK


[4/6/2023 3:45 PM] kuratius
as in section of code


[4/6/2023 3:46 PM] kuratius
is the risk that the kernel decides it's booting from a different cpu and sets the wrong voltage? or what is your thinking?


[4/6/2023 3:49 PM] szybet
andi did it


[4/6/2023 3:49 PM] szybet
voltage regulators


[4/6/2023 3:49 PM] szybet
not diffrent cpu


[4/6/2023 3:49 PM] szybet
its not my thinking, its how its working


[4/6/2023 3:50 PM] kuratius
(distantly related question: I read on a wiki article that every nia/kobo has a different waveform for the screen, does that mean technically I should copy the corresponding part from my sd card and overwrite it on the inkbox image?)


[4/6/2023 3:50 PM] kuratius
I'm asking you to explain your thought process, that's all


[4/6/2023 3:51 PM] kuratius
I'm trying to understand your reasoning


[4/6/2023 3:52 PM] szybet
i mean if it works then it works. maybe ask niluje if there is any benefit of doing that if it works anyway


[4/6/2023 3:53 PM] szybet
wrong configuration of voltage regulators can burn the device.


[4/6/2023 3:53 PM] szybet
thats the problem, thats all


[4/6/2023 3:53 PM] kuratius
Is the risk that something goes wrong when copying that component? Or that it's not replaced completely?


[4/6/2023 3:54 PM] kuratius
or a bug with it?


[4/6/2023 3:55 PM] kuratius
does the newer kernel have some completely new way of controlling voltages?


[4/6/2023 3:57 PM] szybet
every problem you mentioned still could accour, the risk can always be there


[4/6/2023 3:58 PM] szybet
and thats my problem with it


[4/6/2023 3:58 PM] szybet
idk about controlling voltages, ask andi if you want


[4/6/2023 4:01 PM] andi15701
I think I have booted around 7 devices


[4/6/2023 4:01 PM] andi15701
with new kernels


[4/6/2023 4:01 PM] andi15701
nothing burned


[4/6/2023 4:01 PM] andi15701
voltages are known


[4/6/2023 4:02 PM] andi15701
and well-readable in the old kernel


[4/6/2023 4:04 PM] andi15701
but you can also kill the device if you do some weird things with i2c via userspace, or simply being in a bad mood


[4/6/2023 4:04 PM] andi15701
and skip safety measures


[4/6/2023 4:06 PM] andi15701
you should at least have a full backup including that waveform


[4/6/2023 4:06 PM] andi15701
it will work with other devices, but it is just not the best quality


[4/6/2023 4:09 PM] andi15701
kernel: arch/arm/boot/dts/imx6ull-e60u12.dts


[4/6/2023 4:09 PM] andi15701
for the nia


[4/6/2023 4:16 PM] andi15701
regulators have some boot defaults enough to have the kernel loaded which then takes over and may configure additional regulators


[4/6/2023 4:17 PM] andi15701
or change configuration of already enabled regulators


[4/6/2023 4:17 PM] szybet
how are those defaults set? resistors?


[4/6/2023 4:17 PM] andi15701
at least hardware


[4/6/2023 5:56 PM] andi15701
in most cases just the builtin defaults of the pmic


[4/6/2023 5:56 PM] ninuje
It's based on the screen production batches, yeah, which is why there's a label on the flex cable with a VCOM value on it


[4/6/2023 5:57 PM] ninuje
A mismatch will cause refresh fidelity issues, the severity of which varies


[4/6/2023 5:58 PM] ninuje
(e.g., you could end up with severely reduced color depth (and when you only start at 16 shades of grey, that hurts really fast ;p), higher latency, messed up contrast, or stuff generally looking like utter shit ;p)


[4/6/2023 6:39 PM] szybet
okay, good, so if we ever make an installer, then we take it from the backup it made


[4/6/2023 8:16 PM] tux_linux
i confirm


[4/6/2023 8:16 PM] tux_linux
touch n905b suffered from this (probably)
still working but the screen behaves really strangely


[4/6/2023 8:17 PM] kuratius
It's permanent?


[4/6/2023 8:17 PM] andi15701
from my experiments with bad waveforms: no


[4/6/2023 8:17 PM] tux_linux
well for me yes


[4/6/2023 8:18 PM] andi15701
but your mileage might be different


[4/6/2023 8:19 PM] kuratius
It didn't fix itself when swapping back to nickel either?


[4/6/2023 8:20 PM] tux_linux
i'm not sure


[4/6/2023 8:20 PM] tux_linux
but it's the only device on which it happened


[4/6/2023 8:21 PM] tux_linux
on the kindle touch I had no waveform initially so the kernel loaded a built-in one, then I used the device one and it worked just as before


[4/6/2023 8:22 PM] tux_linux
cf. https://discord.com/channels/809205711778480158/971524185815928934/972349218389901322 for complete thread


[4/6/2023 8:23 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-298B0.png


[4/6/2023 8:27 PM] tux_linux
then I will bring it down to 512K


[4/6/2023 8:31 PM] szybet
sys in theory weights nothing


[4/6/2023 8:31 PM] tux_linux
yes but bind mount folders do


[4/6/2023 8:31 PM] tux_linux
but actually it's overkill as well


[4/6/2023 8:31 PM] tux_linux
16k could do


[4/6/2023 8:31 PM] tux_linux
i will leave it at 512, we never know


[4/6/2023 8:31 PM] szybet
go 69 please


[4/6/2023 8:32 PM] tux_linux
69?


[4/6/2023 8:32 PM] szybet
for the memes


[4/6/2023 8:32 PM] tux_linux
no


[4/6/2023 8:32 PM] szybet
:(


[4/6/2023 8:32 PM] szybet
1 april was only 5 days ago


[4/6/2023 8:57 PM] tux_linux
why do you need 3m for usr


[4/6/2023 8:57 PM] tux_linux
and run


[4/6/2023 8:58 PM] szybet
its only 3m? crap


[4/6/2023 8:58 PM] szybet
set it to 5


[4/6/2023 8:59 PM] tux_linux
what do you put in it


[4/6/2023 8:59 PM] szybet
look up my comits, 3MB of keymaps


[4/6/2023 8:59 PM] tux_linux
it should be `system-usr`


[4/6/2023 8:59 PM] szybet
run is udev, its size depends of how many are there devices


[4/6/2023 8:59 PM] szybet
NO


[4/6/2023 8:59 PM] szybet
NO


[4/6/2023 8:59 PM] szybet
NO


[4/6/2023 8:59 PM] tux_linux
it absolutely needs to be?


[4/6/2023 8:59 PM] szybet
i already explained


[4/6/2023 8:59 PM] tux_linux
hardcoded in udev?


[4/6/2023 9:00 PM] szybet
in alpine udev, yes


[4/6/2023 9:00 PM] tux_linux
ok


[4/6/2023 9:00 PM] szybet (pinned)
in my compiled binaries i could MAYBE change it but NO


[4/6/2023 9:00 PM] szybet
so


[4/6/2023 9:00 PM] szybet
MAYBE NO?


[4/6/2023 9:00 PM] szybet
:D


[4/6/2023 9:00 PM] tux_linux
Pinned a message.


[4/6/2023 9:00 PM] tux_linux
todo


[4/6/2023 9:00 PM] tux_linux
why 705 and not 707


[4/6/2023 9:01 PM] szybet
are you mad i tryied to make as little permissions needed?


[4/6/2023 9:01 PM] tux_linux
ok


[4/6/2023 9:01 PM] tux_linux
I just ask why other ones are 707


[4/6/2023 9:02 PM] szybet
i tested it everything with strace for 5h


[4/6/2023 9:02 PM] szybet
trust me its needed


[4/6/2023 9:02 PM] tux_linux
ok


[4/6/2023 9:02 PM] szybet
i was getting write errors to some weird sys devices


[4/6/2023 9:02 PM] tux_linux
so usr 705 and the rest 707


[4/6/2023 9:02 PM] szybet
im not a linux expert


[4/6/2023 9:02 PM] szybet
yep

{Reactions}
👍 

[4/6/2023 9:02 PM] szybet
it for sure writes to /run/udev/control


[4/6/2023 9:02 PM] szybet
andddd how do i see if i correctly applied it?


[4/6/2023 9:03 PM] tux_linux
`cat /proc/cmdline`


[4/6/2023 9:03 PM] szybet
wait you at default applied no_console_suspend right?


[4/6/2023 9:04 PM] tux_linux
no


[4/6/2023 9:05 PM] tux_linux
777 for input? you are sure that it is not too much?


[4/6/2023 9:05 PM] szybet
3h out of 5 was figuring out why "cant create device in input" :)


[4/6/2023 9:05 PM] szybet
so yes, its neccesery


[4/6/2023 9:05 PM] tux_linux
ok


[4/6/2023 9:06 PM] andi15701
/sys/module/printk/parameters/console_suspend


[4/6/2023 9:06 PM] szybet
`console=ttymxc0,115200 rootwait rw no_console_suspend hwcfg_p=0x8ffffe00 hwcfg_sz=110 waveform_p=0x8ff71a00 waveform_sz=582529 ntxfw_p=0x8ff71400 ntxfw_sz=1034 mem=255M boott`


[4/6/2023 9:06 PM] szybet
it is


[4/6/2023 9:06 PM] andi15701
you can also use that one instead of the commandline parameter


[4/6/2023 9:06 PM] szybet
`/sys/module/printk/parameters/console_suspend` its already N


[4/6/2023 9:06 PM] tux_linux
oh ok


[4/6/2023 9:06 PM] szybet
well then


[4/6/2023 9:06 PM] szybet
bad news


[4/6/2023 9:06 PM] szybet
then


[4/6/2023 9:06 PM] szybet
any other idead? when it waked up, there was nothing on the console


[4/6/2023 9:07 PM] tux_linux
why did you update libkobo


[4/6/2023 9:07 PM] szybet
i usually only get something on console when there are errors


[4/6/2023 9:07 PM] tux_linux
did you strip it


[4/6/2023 9:07 PM] szybet
i actually implemented libinput and tested it, and throwed out tlib


[4/6/2023 9:07 PM] szybet
oops


[4/6/2023 9:07 PM] tux_linux
do that


[4/6/2023 9:07 PM] tux_linux
and compile it for kindle


[4/6/2023 9:07 PM] tux_linux
strip it


[4/6/2023 9:07 PM] szybet
what


[4/6/2023 9:07 PM] tux_linux
and upload it as well


[4/6/2023 9:07 PM] szybet
it works on kindle too?


[4/6/2023 9:08 PM] tux_linux
yes


[4/6/2023 9:08 PM] szybet
how do i compile it for kindle?...........


[4/6/2023 9:08 PM] andi15701
grep  $(cat /sys/power/pm_wakeup_irq) /proc/interrupts


[4/6/2023 9:08 PM] tux_linux
kindle_build.patch


[4/6/2023 9:08 PM] szybet
um eh... can you do it?


[4/6/2023 9:08 PM] szybet
its less work you doing it that me figuring this out


[4/6/2023 9:08 PM] andi15701
what do you get for that line?


[4/6/2023 9:08 PM] szybet
```
cat: /sys/power/pm_wakeup_irq: No such file or directory```


[4/6/2023 9:09 PM] szybet
```
kobo:~# cat /sys/power/
pm_async           pm_print_times     state              wakeup_count
pm_freeze_timeout  pm_test            state-extended
```


[4/6/2023 9:09 PM] tux_linux
it's not complicated at all


[4/6/2023 9:09 PM] szybet
you need to test it anyways because of udev


[4/6/2023 9:09 PM] tux_linux
`git apply kindle_build.patch`
`make distclean`
`qmake`
`make -j8`


[4/6/2023 9:09 PM] tux_linux
done


[4/6/2023 9:10 PM] tux_linux
i will test it when you upload it


[4/6/2023 9:10 PM] tux_linux
it is libkobo.so.3 in rootfs


[4/6/2023 9:10 PM] andi15701
CONFIG_PM_SLEEP_DEBUG


[4/6/2023 9:10 PM] andi15701
you need that in the kernel


[4/6/2023 9:11 PM] szybet
noooo.... :( please you do it


[4/6/2023 9:11 PM] andi15701
to get that pm_wakeup_irq


[4/6/2023 9:11 PM] szybet
recompile it?


[4/6/2023 9:11 PM] andi15701
yes


[4/6/2023 9:11 PM] szybet
oof


[4/6/2023 9:12 PM] szybet
okay, i need to recompile it anyway


[4/6/2023 9:12 PM] tux_linux
recompile what


[4/6/2023 9:12 PM] tux_linux
kernel?


[4/6/2023 9:12 PM] szybet
kernel


[4/6/2023 9:12 PM] tux_linux
ok


[4/6/2023 9:12 PM] szybet
i refuse to touch kindle for now


[4/6/2023 9:14 PM] tux_linux
Pro**b**ably


[4/6/2023 9:15 PM] szybet
did i really do that?😂


[4/6/2023 9:16 PM] tux_linux
always?


[4/6/2023 9:16 PM] szybet
where


[4/6/2023 9:16 PM] szybet
send the link


[4/6/2023 9:17 PM] tux_linux
no i mean you always say 'propably' instead of 'probably'


[4/6/2023 9:17 PM] szybet
wait


[4/6/2023 9:17 PM] szybet
probably is good?


[4/6/2023 9:18 PM] szybet
https://whichiscorrect.com/probably-or-propably/

{Embed}
https://whichiscorrect.com/probably-or-propably/
Probably or propably? - Spelling Which Is Correct How To Spell
Probably or propably ✅ check which spelling is correct on WhichIsCorrect.com - Free Online English Dictionary. Definition for probably or propably


[4/6/2023 9:18 PM] szybet
WOAH


[4/6/2023 9:18 PM] tux_linux
WHAT


[4/6/2023 9:18 PM] szybet
😂


[4/6/2023 9:18 PM] tux_linux
oh ok


[4/6/2023 9:18 PM] tux_linux
I thought it showed that propably existed


[4/6/2023 9:18 PM] szybet
im confused as hell


[4/6/2023 9:19 PM] szybet
propably because i never would say probably :D


[4/6/2023 9:19 PM] szybet
like bubles


[4/6/2023 9:19 PM] szybet
lool


[4/6/2023 9:19 PM] tux_linux
at least you don't say becouse as you did before


[4/6/2023 9:19 PM] szybet
well next goal then

{Reactions}
👍 

[4/6/2023 9:19 PM] tux_linux
i see what you did there


[4/6/2023 9:20 PM] tux_linux
bubbles but i guess you know it


[4/6/2023 9:20 PM] szybet
.............


[4/6/2023 9:20 PM] tux_linux
well now you do


[4/6/2023 9:21 PM] szybet
https://tenor.com/view/wtf-what-the-hell-gif-5763905

{Embed}
https://tenor.com/view/wtf-what-the-hell-gif-5763905
/mnt/data/projects/git/conversations/media/wtf-what-the-hell-557E5.png


[4/6/2023 9:21 PM] szybet
crap then


[4/6/2023 9:21 PM] szybet
crap crap


[4/6/2023 9:21 PM] szybet
i wait till someone creates a chatgpt plugin that corrects you in discord chats


[4/6/2023 9:21 PM] tux_linux
it probably already exists


[4/6/2023 9:21 PM] szybet
get it then


[4/6/2023 9:22 PM] szybet
i mean


[4/6/2023 9:22 PM] szybet
give me it


[4/6/2023 9:24 PM] tux_linux
i'm just thinking


[4/6/2023 9:24 PM] szybet
i dont see it when i search with `/` in menuconfig


[4/6/2023 9:24 PM] szybet
`Extra PM attributes in sysfs for low-level debugging/testing` propably


[4/6/2023 9:28 PM] szybet
its `CONFIG_PM_ADVANCED_DEBUG`


[4/6/2023 9:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B8AB8.png


[4/6/2023 9:29 PM] szybet
its at default on, @andi


[4/6/2023 9:33 PM] andi15701
a6f5f0dd4e21191ce35030dd4d6421e1cca10ee4


[4/6/2023 9:34 PM] szybet
i dont speak md5 hashes


[4/6/2023 9:35 PM] andi15701
introduced in kernel v4.4


[4/6/2023 9:35 PM] andi15701
so you might be able to just cherry-pick that


[4/6/2023 9:36 PM] szybet
you mean what?


[4/6/2023 9:37 PM] andi15701
in theory: git cherry-pick a6f5f0dd4e21191ce35030dd4d6421e1cca10ee4


[4/6/2023 9:37 PM] andi15701
in the kernel repository


[4/6/2023 9:37 PM] andi15701
in practice we have ntx kernels...


[4/6/2023 9:37 PM] szybet
what a funny command


[4/6/2023 9:38 PM] andi15701
$ git format-patch a6f5f0dd4e21191ce35030dd4d6421e1cca10ee4...a6f5f0dd4e21191ce35030dd4d6421e1cca10ee4^
0001-PM-sleep-Report-interrupt-that-caused-system-wakeup.patch


[4/6/2023 9:38 PM] andi15701
cd /path/to/ntx-nia-kernel


[4/6/2023 9:39 PM] andi15701
patch -p1 </path/to/0001-PM-sleep-Report-interrupt-that-caused-system-wakeup.patch


[4/6/2023 9:39 PM] szybet
what are you talking?...


[4/6/2023 9:41 PM] szybet
so what am i supposed to do then?


[4/6/2023 9:41 PM] andi15701


{Attachments}
/mnt/data/projects/git/conversations/media/0001-PM-sleep-Report-interrupt-that-caused-13D7E.patch


[4/6/2023 9:42 PM] andi15701
apply this to your kernel


[4/6/2023 9:50 PM] szybet
how long is the patch command supposed to take


[4/6/2023 9:50 PM] andi15701
a second


[4/6/2023 9:50 PM] szybet
it runs for 2 minutes


[4/6/2023 9:50 PM] szybet
¯\_(ツ)_/¯


[4/6/2023 9:50 PM] andi15701
it takes the patch from stdin


[4/6/2023 9:50 PM] szybet
oh


[4/6/2023 9:51 PM] szybet
```
patch -p1 <~/Downloads/0001-PM-sleep-Report-interrupt-that-caused-system-wakeup.patch
patching file Documentation/ABI/testing/sysfs-power
patching file drivers/base/power/wakeup.c
Hunk #1 succeeded at 24 (offset -1 lines).
Hunk #2 succeeded at 738 (offset -133 lines).
patching file include/linux/suspend.h
patching file kernel/irq/pm.c
patching file kernel/power/main.c
Hunk #1 FAILED at 272.
Hunk #2 succeeded at 647 (offset 43 lines).
1 out of 2 hunks FAILED -- saving rejects to file kernel/power/main.c.rej```


[4/6/2023 9:53 PM] andi15701
should be easy


[4/6/2023 9:54 PM] andi15701
probably just take the functions in kernel/power/main.c.rej and place them into any place in that file in the CONFIG_PM_SLEEP_DEBUG


[4/6/2023 9:54 PM] andi15701
ifdef


[4/6/2023 9:55 PM] szybet
kernel things are never easy


[4/6/2023 10:17 PM] szybet
well i will try it in the future when i will care about those random wake ups more, thanks anyway


[4/6/2023 10:27 PM] andi15701
how I have found that patch:


[4/6/2023 10:27 PM] andi15701
searched for that string in the kernel


[4/6/2023 10:28 PM] andi15701
and then run a git blame on that file (kernel/power/main.c)


[4/6/2023 10:28 PM] andi15701
and took the shorthash for the most promising commit in the lines around


[4/6/2023 10:32 PM] szybet
sounds too easy to actually work


[4/6/2023 10:35 PM] andi15701
sometimes you just end up in a refactor commit


[4/6/2023 10:35 PM] andi15701
so you have to checkout that one and do the git blame again


[4/6/2023 10:56 PM] tux_linux
this is the most useful feature in qtcreator i have ever seen

{Attachments}
/mnt/data/projects/git/conversations/media/image-DD26C.png


[4/6/2023 10:57 PM] szybet
in vscode its called gitlens and its there for years


[4/7/2023 5:48 AM] tux_linux
This is hilarious
https://github.com/NARKOZ/hacker-scripts

{Embed}
https://github.com/NARKOZ/hacker-scripts
GitHub - NARKOZ/hacker-scripts: Based on a true story
Based on a true story. Contribute to NARKOZ/hacker-scripts development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/hacker-scripts-A7D8F


[4/7/2023 9:30 AM] szybet
😄


[4/7/2023 9:31 AM] szybet
@tux-linux anwer to that


[4/7/2023 11:33 PM] tux_linux
can your power measure tool or something (oscillo?) can mesure current used by the device depending on the CPU load?


[4/7/2023 11:34 PM] tux_linux
if so please test this and report how much power it drew out if it is significant
thanks

{Attachments}
/mnt/data/projects/git/conversations/media/blank-BE407


[4/7/2023 11:34 PM] tux_linux
```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include <linux/fb.h>
#include <stdbool.h>

int main() {
        int fd = open("/dev/fb0", O_RDONLY | O_CLOEXEC | O_NONBLOCK);
        unsigned long arg = VESA_NO_BLANKING;
        while(true) {
                ioctl(fd, FBIOBLANK, arg);
                sleep(1);
        }
        close(fd);
}
```
source


[4/7/2023 11:39 PM] szybet
it blinks the eink?


[4/7/2023 11:40 PM] tux_linux
normally


[4/7/2023 11:40 PM] tux_linux
cancels xorg freeze


[4/7/2023 11:40 PM] tux_linux
no visible impact on screen if it is not frozen


[4/7/2023 11:41 PM] szybet
wo~~w~~


[4/7/2023 11:41 PM] tux_linux
?


[4/7/2023 11:41 PM] szybet
how precise your measurments are


[4/7/2023 11:41 PM] tux_linux
wdym


[4/7/2023 11:42 PM] szybet
i have this setup with my custom power supply, thats how i measured this https://github.com/Szybet/niAudio/blob/main/power.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/power.md
niAudio/power.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[4/7/2023 11:42 PM] szybet
it isin't precise


[4/7/2023 11:42 PM] tux_linux
hm ok


[4/7/2023 11:45 PM] szybet
normally arround 175 now, mostly hitting 180


[4/7/2023 11:45 PM] szybet
with it running its 178-180


[4/7/2023 11:46 PM] szybet
almost none


[4/7/2023 11:48 PM] szybet
yea, confirmed tested once more


[4/7/2023 11:48 PM] tux_linux
ok so compared to other things it's fine


[4/7/2023 11:48 PM] szybet
why do you care about power consumption? its xorg, its always 100% on the cpu


[4/7/2023 11:48 PM] szybet
the only thing we should care is if it will do any dasmage to the eink


[4/7/2023 11:48 PM] szybet
even not eink, maybe the controller


[4/7/2023 11:48 PM] szybet
we should aks niluje


[4/7/2023 11:48 PM] tux_linux
try this
0.1 sec sleep delay

{Attachments}
/mnt/data/projects/git/conversations/media/blank-69CF4


[4/7/2023 11:49 PM] szybet
nope no chance, i already saying you


[4/7/2023 11:49 PM] szybet
from arroun 350 ms the delay stops hurting the cpu


[4/7/2023 11:49 PM] szybet
1s is fine for this


[4/7/2023 11:49 PM] tux_linux
ok


[4/7/2023 11:50 PM] szybet
.


[4/7/2023 11:50 PM] szybet
+ what about the other things, xorg fixes that other guys did?


[4/7/2023 11:50 PM] tux_linux
xorg 'fixes' were for input


[4/7/2023 11:50 PM] tux_linux
touch input


[4/7/2023 11:51 PM] szybet
and onboard not showing up


[4/7/2023 11:51 PM] szybet
and my onboard custom theme


[4/7/2023 11:51 PM] tux_linux
oh yes that


[4/7/2023 11:51 PM] tux_linux
what 'not showing up'


[4/7/2023 11:52 PM] szybet
idk, you said there was a fix for that


[4/7/2023 11:53 PM] tux_linux
it's just slow to load


[4/7/2023 11:53 PM] tux_linux
python


[4/7/2023 11:53 PM] szybet
there was a fix


[4/7/2023 11:53 PM] tux_linux
really?


[4/7/2023 11:55 PM] szybet
idk


[4/7/2023 11:55 PM] szybet
there were other fixes propably


[4/7/2023 11:56 PM] szybet
BTW if you use the native touch driver than usb keyboard and mouse will work too


[4/7/2023 11:56 PM] szybet
i think


[4/7/2023 11:56 PM] szybet
maybe


[4/7/2023 11:56 PM] szybet
propably


[4/7/2023 11:56 PM] szybet
the guy mentioned something


[4/7/2023 11:58 PM] szybet
BTW accept my PR: i want to run the backup of inkbox repos with this included


[4/7/2023 11:58 PM] tux_linux
which one


[4/7/2023 11:58 PM] tux_linux
I'm reviewing them


[4/7/2023 11:58 PM] szybet
every one


[4/7/2023 11:58 PM] szybet
just dont forget about them


[4/7/2023 11:58 PM] tux_linux
.


[4/7/2023 11:58 PM] tux_linux
wip


[4/7/2023 11:58 PM] szybet
dont "gui-bundle" them 😄


[4/7/2023 11:59 PM] szybet
good then


[4/8/2023 6:04 AM] tux_linux
Done (all of them)
I commented `udevadm trigger` in inkbox_gui script because it made the kindle go to sleep every time I did `restart inkbox_gui` as if the power button was pressed
I don't know if it is important in this case but anyway we should find a way to fix that if it is


[4/8/2023 12:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-7D702.png


[4/8/2023 12:28 PM] szybet
why so serious


[4/8/2023 12:28 PM] szybet
there is a meme for that


[4/8/2023 12:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/fetchimage-E1C97.png


[4/8/2023 12:29 PM] szybet
it is important, it is there for a reason. You need to find a way to ignore those devices for libinput on kindle


[4/8/2023 12:29 PM] szybet
at least make an if if its not kindle


[4/8/2023 12:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-7236A.png


[4/8/2023 12:32 PM] szybet
what the


[4/8/2023 12:32 PM] szybet
why


[4/8/2023 12:32 PM] szybet
this was very important for mouse not to freeze the entire device, please roll it back


[4/8/2023 12:33 PM] szybet
or convince niluje that its better now


[4/8/2023 1:52 PM] tux_linux
You didn't look in rootfs


[4/8/2023 1:53 PM] tux_linux
/etc/init.d/blank


[4/8/2023 2:09 PM] szybet
And what?


[4/8/2023 2:09 PM] tux_linux
it does the same thing (almost)


[4/8/2023 2:09 PM] szybet
For sure?


[4/8/2023 2:10 PM] tux_linux
i guess?


[4/8/2023 2:10 PM] szybet
@NiLuJe can you confirm those eink things?


[4/8/2023 2:10 PM] tux_linux
this one was half-reliable and didn't work a lot of times


[4/8/2023 2:15 PM] tux_linux
also I have no problem running user apps with my own platform plugins compiled with my own qt and not yours


[4/8/2023 2:16 PM] tux_linux
unrelated; KT seems to experience refresh problems even with X11 disabled


[4/8/2023 2:16 PM] tux_linux
blank seems to help it


[4/8/2023 2:52 PM] szybet
yea, cool, until it doesnt and you spend 3 days debugging


[4/8/2023 2:52 PM] tux_linux
try it on your side?


[4/8/2023 2:52 PM] szybet
use my toolchain, this with libinput


[4/8/2023 2:53 PM] szybet
stop my god


[4/8/2023 2:53 PM] szybet
i spend almost a weekd debugging qt incompability mess


[4/8/2023 2:53 PM] szybet
+ use the one i created at the specified path, this way no pkg config problems


[4/8/2023 3:26 PM] kuratius
@andi Is this directly applicable?
Would a kobo reader use a mainline/close to mainline kernel or a custom one?
https://wiki.postmarketos.org/wiki/Porting_to_a_new_device

Are there parts where I would need to be extra careful?

{Embed}
https://wiki.postmarketos.org/wiki/Porting_to_a_new_device
Porting to a new device


[4/8/2023 3:29 PM] kuratius
(I have an sd card backup and I wouldn't use the original sd card for this anyway)


[4/8/2023 3:41 PM] tux_linux
updated platform plugins


[4/8/2023 3:42 PM] szybet
on the correct path


[4/8/2023 3:42 PM] szybet
?


[4/8/2023 3:42 PM] tux_linux
yes


[4/8/2023 3:46 PM] szybet
goodd


[4/8/2023 7:17 PM] tux_linux
onboard keyboard looks like this with your new theme on the libra

{Attachments}
/mnt/data/projects/git/conversations/media/onboard-A6D06.png


[4/8/2023 7:57 PM] szybet
make onboard a little bigger and its good?


[4/8/2023 7:59 PM] szybet
also if you want a text editor - code editor there is this
https://github.com/tsujan/FeatherPad

{Embed}
https://github.com/tsujan/FeatherPad
GitHub - tsujan/FeatherPad: Lightweight Qt Plain-Text Editor for Linux
Lightweight Qt Plain-Text Editor for Linux. Contribute to tsujan/FeatherPad development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/FeatherPad-B46FC


[4/8/2023 7:59 PM] szybet
we have notes already bit yea, this is cool too


[4/8/2023 7:59 PM] szybet
the same author


[4/8/2023 8:09 PM] szybet
@tux-linux what file / dir / anything to make time zones work in gui apps?


[4/8/2023 8:14 PM] szybet
```
        [ ! -e "/kobo/usr/share/zoneinfo" ] && mkdir -p /kobo/usr/share/zoneinfo
        [ ! -e "/kobo/etc/localtime" ] && touch /kobo/etc/localtime
        [ ! -e "/data/config/19-timezone" ] && mkdir -p /data/config/19-timezone
        [ ! -e "/data/config/19-timezone/config" ] && ln -sf /usr/share/zoneinfo/UTC /data/config/19-timezone/config
        mount --bind /usr/share/zoneinfo /kobo/usr/share/zoneinfo
````


[4/8/2023 8:14 PM] szybet
propably


[4/8/2023 8:34 PM] ninuje
https://www.x.org/releases/current/doc/man/man5/xorg.conf.5.xhtml#heading5


[4/8/2023 8:34 PM] ninuje
`BlankTime`


[4/8/2023 8:34 PM] ninuje
(fourth time's the charm, maybe?)


[4/8/2023 8:35 PM] szybet
@tux-linux


[4/8/2023 8:39 PM] szybet
also this. will you fix that?


[4/8/2023 8:42 PM] szybet
https://github.com/Kobo-InkBox/rootfs/pull/6

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/6
gui apps time zone support by Szybet · Pull Request #6 · Kobo-InkBo...
/mnt/data/projects/git/conversations/media/6-DAC4F


[4/8/2023 8:42 PM] szybet
also if you update xorg, create a repo for its rootfs


[4/8/2023 8:52 PM] tux_linux
It has been fixed already


[4/8/2023 8:52 PM] tux_linux
Try it


[4/8/2023 8:52 PM] szybet
but you still removed this call?


[4/8/2023 8:52 PM] tux_linux
/etc/init.d/xorg.sh


[4/8/2023 8:52 PM] tux_linux
No


[4/8/2023 8:52 PM] szybet
not really


[4/8/2023 8:53 PM] szybet
xorg scary


[4/8/2023 8:53 PM] szybet
also i dont have time trying to catch this bug


[4/8/2023 8:53 PM] tux_linux
I told you just change the script


[4/8/2023 8:53 PM] szybet
also i dont see a reason why it should fix it


[4/8/2023 8:56 PM] tux_linux
Idk


[4/8/2023 8:56 PM] tux_linux
At least current solution seems to work


[4/8/2023 10:10 PM] szybet
@tux-linux any idea why qprocess doesnt work in user app


[4/8/2023 10:10 PM] szybet
```Failed to start process: "Unknown error"```


[4/8/2023 10:55 PM] ninuje
It's also a runtime prop, if just calling xset somewhere feels less daunting (and, also, in case you actually have somethign fucking with you at runtime setting it on startup or something)


[4/8/2023 11:41 PM] szybet
`/sys/bus/platform/devices/ricoh619-battery/power_on_reason` interesting


[4/9/2023 12:15 AM] tux_linux
Ok thanks


[4/9/2023 12:15 AM] tux_linux
strace


[4/9/2023 12:15 AM] szybet
figured thsi out, my fault


[4/9/2023 12:15 AM] tux_linux
What was it


[4/9/2023 12:15 AM] szybet
still better to ask than to spend too much time on it


[4/9/2023 12:16 AM] szybet
just my stupid fault


[4/9/2023 12:17 AM] tux_linux
https://xkcd.com/979/

{Embed}
https://xkcd.com/979/
xkcd: Wisdom of the Ancients
/mnt/data/projects/git/conversations/media/wisdom_of_the_ancients-07AA9.png
All long help threads should have a sticky globally-editable post at the top saying 'DEAR PEOPLE FROM THE FUTURE: Here's what we've figured out so far ...'


[4/9/2023 12:17 AM] szybet
🥴


[4/9/2023 12:18 AM] szybet
developing things in inkbox for a year and still forbidden shell scripts can trick me into wasting time debugging mess


[4/9/2023 12:22 AM] the.mightydill
theres a relevant xkcd for everything isnt there

{Reactions}
👍 

[4/9/2023 12:38 AM] szybet
https://xkcd.com/386/

{Embed}
https://xkcd.com/386/
xkcd: Duty Calls
/mnt/data/projects/git/conversations/media/duty_calls-85F8D.png
What do you want me to do?  LEAVE?  Then they'll keep being wrong!


[4/9/2023 12:39 AM] szybet
there isin't


[4/9/2023 12:39 AM] szybet
oh wait


[4/9/2023 12:45 AM] tux_linux
b


[4/9/2023 12:47 AM] szybet
https://tenor.com/view/idk-i-dont-know-maybe-ehhh-tony-gif-17090250

{Embed}
https://tenor.com/view/idk-i-dont-know-maybe-ehhh-tony-gif-17090250
/mnt/data/projects/git/conversations/media/idk-i-dont-know-DC14D.png


[4/9/2023 3:25 PM] szybet
BTW another user app


[4/9/2023 3:25 PM] szybet
https://github.com/Szybet/FeatherNotes-inkbox/releases/tag/0.1

{Embed}
https://github.com/Szybet/FeatherNotes-inkbox/releases/tag/0.1
Release 0.1 · Szybet/FeatherNotes-inkbox
/mnt/data/projects/git/conversations/media/0-EF037.1

{Reactions}
👍 

[4/9/2023 3:25 PM] szybet
its not like only I will use it but yea


[4/10/2023 7:04 PM] tux_linux
what's happening

{Attachments}
/mnt/data/projects/git/conversations/media/message-D4D06.txt


[4/10/2023 7:04 PM] szybet
time?


[4/10/2023 7:13 PM] tux_linux
yes


[4/10/2023 7:13 PM] tux_linux
the pr doesn't work


[4/10/2023 7:14 PM] szybet
why?


[4/10/2023 7:14 PM] tux_linux
localtime is null


[4/10/2023 7:14 PM] tux_linux
blank file


[4/10/2023 7:14 PM] tux_linux
nothing


[4/10/2023 7:14 PM] tux_linux
what is in your rootfs cache?


[4/10/2023 7:15 PM] szybet
because you have the default timezone


[4/10/2023 7:15 PM] tux_linux
why is zoneinfo empty?


[4/10/2023 7:16 PM] szybet
where


[4/10/2023 7:16 PM] szybet
it gets all time things from gui-rootfs, i leaved a command why


[4/10/2023 7:17 PM] tux_linux
```
kobo:~# ls -l /data/onboard/.apps/feathernotes/feathernotes/usr/share/zoneinfo/ -a
total 4
drwxr-xr-x    1 root     root          4096 Jun 26  2022 .
drwxr-xr-x    3 root     root            60 Apr 10 12:58 ..
crwx------    1 root     root        0,   0 Jun 26  2022 .wh..opq
-rwx------    1 root     root             0 Jun 26  2022 .wh..wh..opq
kobo:~# ls /usr/share/zoneinfo/
```


[4/10/2023 7:17 PM] szybet
um lol


[4/10/2023 7:17 PM] szybet
show me /kobo/usr/share/zoneinfo


[4/10/2023 7:17 PM] tux_linux
no


[4/10/2023 7:17 PM] tux_linux
```
kobo:~# ls -l /data/config/19-timezone/config
lrwxrwxrwx    1 root     root            36 Apr  7  2022 /data/config/19-timezone/config -> /usr/share/zoneinfo/America/New_York
kobo:~#
```


[4/10/2023 7:18 PM] szybet
um ok


[4/10/2023 7:18 PM] tux_linux
look there it's all there


[4/10/2023 7:18 PM] szybet
mount bind failed?


[4/10/2023 7:18 PM] szybet
wtf


[4/10/2023 7:19 PM] tux_linux
.


[4/10/2023 7:19 PM] szybet
give me a sec

{Reactions}
👍 

[4/10/2023 7:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-6FBF0.txt


[4/10/2023 7:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-4AF88.txt


[4/10/2023 7:25 PM] szybet
i dont see here anything interesting


[4/10/2023 7:27 PM] tux_linux
why does it work for you


[4/10/2023 7:28 PM] szybet
lol it doesnt


[4/10/2023 7:28 PM] szybet
it was working


[4/10/2023 7:28 PM] szybet
XD


[4/10/2023 7:28 PM] szybet
i also have an empty dir


[4/10/2023 7:32 PM] tux_linux
good


[4/10/2023 7:32 PM] szybet
no


[4/10/2023 7:32 PM] szybet
it doesnt have sense


[4/10/2023 7:33 PM] tux_linux
good that you can reproduce it


[4/10/2023 7:33 PM] szybet
`bind_mount_wrapper "/usr/share/zoneinfo/" "gui"`


[4/10/2023 7:33 PM] szybet
this should work


[4/10/2023 7:34 PM] tux_linux
i know what is the problem


[4/10/2023 7:34 PM] szybet
them please tell me


[4/10/2023 7:34 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-1EB1F.png


[4/10/2023 7:34 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-EC3DB.png


[4/10/2023 7:34 PM] szybet
and?


[4/10/2023 7:34 PM] tux_linux
look at line numbers


[4/10/2023 7:34 PM] szybet
bruh


[4/10/2023 7:35 PM] szybet
i need full gui rootfs when gui apps launch


[4/10/2023 7:35 PM] szybet
move it just before inkbox launch


[4/10/2023 7:35 PM] tux_linux
ok


[4/10/2023 7:35 PM] szybet
this doesnt explain why it worked yestarday


[4/10/2023 7:35 PM] tux_linux
magic


[4/10/2023 10:19 PM] tux_linux
wiki is up


[4/10/2023 10:19 PM] szybet
good


[4/11/2023 5:34 PM] andi15701
a close to mainline kernel probably, so I would probably just extend the kobo-clara-mainline kernel by the devicetree


[4/11/2023 5:35 PM] andi15701
a copy-paste-modify package named device-kobo-nia


[4/11/2023 5:36 PM] andi15701
and for the first try, u-boot is needed


[4/11/2023 9:03 PM] andi15701
Kernel package is shared between all the kobos and tolinos supported by pmOS. And I have a variant with an older fbdev driver, which allows more finetuning


[4/11/2023 9:03 PM] andi15701
Inkbox uses that one


[4/11/2023 9:04 PM] andi15701
downside is that you need special userspace to see something


[4/11/2023 9:08 PM] andi15701
once there is any devicetree in there, both inkbox and pmOS could use it


[4/11/2023 9:09 PM] andi15701
I could prepare such a devicetree, someone then could compare voltages


[4/11/2023 9:13 PM] andi15701
The kernels used in pmOS use a drm-based driver. Userspace (and even kernel console) supplies information about needed refreshes


[4/11/2023 9:15 PM] andi15701
so even the cursor on the text consoles blinks


[4/16/2023 6:46 AM] tux_linux
found on Reddit

{Attachments}
/mnt/data/projects/git/conversations/media/image-C4B6D.png


[4/16/2023 9:26 AM] andi15701
backup? whats that? do you mean git push? 😉


[4/16/2023 9:29 AM] andi15701
in an office I worked once in, there was an emergency plan like:"In case of a fire/emergency, git commit, git push, and then leave the building"


[4/16/2023 11:40 PM] szybet
https://github.com/everydayanchovies/eink-vnc

{Embed}
https://github.com/everydayanchovies/eink-vnc
GitHub - everydayanchovies/eink-vnc
Contribute to everydayanchovies/eink-vnc development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/eink-vnc-2CD4C


[4/16/2023 11:40 PM] szybet
how can this software render at such fast rates and possibly degrade the display?


[4/16/2023 11:41 PM] szybet
i only saw such fast eink when someone used a prototype eink or hacked the controller


[4/16/2023 11:42 PM] szybet
in other words, i want to learn about einks more, like technical stuff


[4/16/2023 11:42 PM] szybet
is there any documentation? ~~its not everything reverse engineered right?~~


[4/16/2023 11:43 PM] szybet
I won't ping you niluje, but if you find time and answer, I appreciate it


[4/17/2023 12:02 AM] kuratius
Some ideas: You can probably estimate the voltage required for a given refresh rate using Stokes Law.

You need to move the black pigment a specific distance s in time t to achieve a color change.
Meaning a velocity v=s/t

We know from stokes law that for spheres F=6π eta R v 
Electric force on a charged particle is
qE

E is voltage/distance
so 


qE=6π eta R v 
qV/s=6π eta R s/t


V=6π eta R s^2/(qt).
t=1/framerate (let's call it f)
so V=6π eta R s^2 f/q

So for double the framerate you would expect double the voltage. Now the question is, when does higher voltage lead to damage?
And where does the damage occur? 

Also typically power draw scales with the square of the voltage, so you would expect that 2x voltage means 4x power draw.

The other thing to consider is that Stokes Law is an approximation for low velocities, you would expect that for high velocities it is invalid and you may have a quadratic relationship between force and velocity, so your voltage may scale with s^3/t^2, (meaning double the framerate is now 4x the voltage and ~~8x ~~16x the power draw)

{Reactions}
👍 

[4/17/2023 12:20 AM] szybet
Its not that easy, there are grey colors, there are diffrent kinds of refreshes


[4/17/2023 12:20 AM] szybet
But otherwise, sounds good


[4/17/2023 12:20 AM] tux_linux
Maybe we can start by only considering b/w refreshes


[4/17/2023 12:21 AM] szybet
Well those calculations etc i would like to get from from a Datasheet


[4/17/2023 12:21 AM] szybet
Like manufacturer tested


[4/17/2023 1:04 AM] ninuje
wording issue. What is actually meant is fidelity being degraded, because it's A2.


[4/17/2023 1:04 AM] ninuje
Not actual physical damage.


[4/17/2023 1:05 AM] ninuje
You can indeed push 30Hz and further @ A2


[4/17/2023 1:06 AM] ninuje
(prime examples being Plato's Sketch, which this is based on, or my PSX Doom fire demo for funsies, especially on devices w/ hw dithering)


[4/17/2023 1:08 AM] ninuje
There's an eInk implementor recap linked somewhere on GitHub for their in-house latency and power tests for older screens; I can't quite recall where it's hidden, but IIRC, it was dug up by rM hackers


[4/17/2023 1:09 AM] ninuje
It's the source (as well as rM's actual tests) for the numbers in https://github.com/NiLuJe/FBInk/blob/6572b5f393f810785e382104391d177120da46f6/fbink.h#L304-L397

{Embed}
https://github.com/NiLuJe/FBInk/blob/6572b5f393f810785e382104391d177120da46f6/fbink.h
FBInk/fbink.h at 6572b5f393f810785e382104391d177120da46f6 · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at 6572b5f393f810785e382104391d177120da46f6 · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-37E7E


[4/17/2023 4:34 PM] kuratius
Just realized I made a math error, 4x the voltage would be 16x Power. Edited to fix it.


[4/18/2023 5:49 AM] tux_linux
Building InkBox development tools on ARM64 Mac... I look forward to Qt...

{Attachments}
/mnt/data/projects/git/conversations/media/image-99F69.png


[4/18/2023 5:52 AM] tux_linux
(Oh, yes, it's a virtualized Arch ARM VM, of course... but still very performant because it's the native architecture)


[4/18/2023 10:08 AM] aryetis
But why ?


[4/18/2023 2:30 PM] szybet
Somewhere ugh


[4/18/2023 2:31 PM] szybet
Also a random thought: waveshare needs calibration, then what about replacement screens?😬


[4/18/2023 3:04 PM] tux_linux
waveform


[4/18/2023 3:14 PM] szybet
Oh yea, waveshare was the company


[4/18/2023 3:47 PM] kuratius
I think the calibration is due to how the screen is manufactured.
You have many different capsules making up each pixel, and they are a random size, and depending on the screen a single pixel might also affect neighboring pixels to some degree.
If you're fine with some bleedover and with grey levels that aren't perfect (or potentially slightly uneven black?)  you can probably get by without calibration.

If you have test images you can render then you can probably figure out a way to do the calibration manually. Won't be as accurate as manufacturer' calibration, but probably usable.

I also found this project, may be helpful
https://hackaday.io/project/21168-fpga-eink-controller/log/57302-waveforms-table-introduction

{Embed}
https://hackaday.io/project/21168-fpga-eink-controller/log/57302-waveforms-table-introduction
Waveforms table introduction | Details | Hackaday.io
With eink display, you cannot just send "set pixel black", "set pixel white" or "set pixel grey", the brightness of display depend on a sequence of voltage applied for a certain time on pixel.The table found in "Source driver" section on Essential Scrap site  is incomplete, when you send 0b10, you do not actually set pixel white, you apply a vol...
/mnt/data/projects/git/conversations/media/9023541492109886911-A2ED0.jpg


[4/18/2023 7:51 PM] ninuje
That's a problem. Some devices *can* set the VCOM at runtime, which helps a bit for those cases.


[4/18/2023 7:52 PM] szybet
vcom stands for voltage comunication?...


[4/18/2023 8:56 PM] andi15701
compensation


[4/18/2023 8:57 PM] andi15701
these pmics for the EPD often can measure vcom input


[4/18/2023 8:57 PM] andi15701
when not active


[4/18/2023 8:58 PM] andi15701
So I think the procedure is to do a mode 0 update, and during that measure the voltage


[4/18/2023 8:58 PM] andi15701
and then use that voltage as the setting for the regulator


[4/19/2023 2:07 AM] tux_linux
I bought a new laptop


[4/19/2023 2:29 AM] tux_linux
@Szybet I get this error when building libinput and your docs don't seem to tell anything about it


[4/19/2023 2:30 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-93BE1.txt


[4/19/2023 8:18 AM] szybet
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/libinput.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/libinput.md
niAudio/libinput.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[4/19/2023 8:18 AM] szybet
Show me meson options file


[4/19/2023 4:19 PM] tux_linux
I don't have access to it right now but I changed the settings according to your docs


[4/19/2023 4:19 PM] tux_linux
Qt build successfully without libinput on arm64, so there's at least that


[4/19/2023 4:50 PM] szybet
Nooooouuu🥴


[4/19/2023 4:50 PM] szybet
You propably need to disable tests / docs /gui? for libinput idk i hope you used the same source as I


[4/19/2023 4:50 PM] tux_linux
Well, then explain how I am supposed to build it


[4/19/2023 4:51 PM] tux_linux
Yes, if the links were good
But actually no
Because there might have been other commits since last time you cloned the repo


[4/19/2023 4:51 PM] szybet
Shouldnt break it lol


[4/19/2023 4:52 PM] tux_linux
Maybe


[4/20/2023 11:14 PM] tux_linux
Ouch I just realized we got past one year without inkbox release


[4/20/2023 11:14 PM] tux_linux
Tuesday


[4/20/2023 11:14 PM] tux_linux
I think


[4/20/2023 11:17 PM] szybet
https://youtu.be/k1BneeJTDcU?t=158

{Embed}
boburnham
https://www.youtube.com/watch?v=k1BneeJTDcU&start=158
Welcome to the Internet - Bo Burnham (from "Inside" -- ALBUM OUT NOW)
merch: https://boburnham.store/
vinyl/cd/cassette: https://boburnham.lnk.to/Shop
listen to the album: https://boburnham.lnk.to/INSIDE

inside now streaming on netflix.

thank you for watching.
/mnt/data/projects/git/conversations/media/maxresdefault-C7C3A.jpg


[4/20/2023 11:17 PM] szybet
`"a chat room or two, we spend our nights waiting for you..."`


[4/20/2023 11:17 PM] tux_linux
What remains to be done


[4/20/2023 11:18 PM] szybet
idk about xorg, you did something recently to it


[4/20/2023 11:18 PM] szybet
update, only


[4/20/2023 11:18 PM] szybet
and testing


[4/20/2023 11:18 PM] tux_linux
Onboard


[4/20/2023 11:18 PM] tux_linux
I did update system


[4/20/2023 11:18 PM] tux_linux
It's done


[4/20/2023 11:18 PM] szybet
if you gived me the whole list of changes then I could say what needs some testing


[4/20/2023 11:18 PM] szybet
when


[4/20/2023 11:18 PM] szybet
what


[4/20/2023 11:19 PM] tux_linux
A month ago??


[4/20/2023 11:19 PM] tux_linux
Ok maybe not that much time


[4/20/2023 11:20 PM] szybet
the last thing i remember was "here have it, it partially works"


[4/20/2023 11:20 PM] szybet
and i didn't touched it


[4/20/2023 11:20 PM] tux_linux
It's "works but needs testing" now


[4/20/2023 11:21 PM] szybet
welp then give me instructions to test it


[4/20/2023 11:21 PM] szybet
+


[4/20/2023 11:22 PM] tux_linux
Read update.sh
It's the same structure or pretty much
You add xorg ISAs


[4/20/2023 11:23 PM] szybet
my english is really bad today


[4/20/2023 11:23 PM] tux_linux
Wdym


[4/20/2023 11:24 PM] szybet
well gui rootfs is updatable too?


[4/20/2023 11:24 PM] tux_linux
It should yes


[4/20/2023 11:24 PM] szybet
you didn't noticed, thats good


[4/20/2023 11:25 PM] szybet
well if i get time i can have a look on it

{Reactions}
👍 

[4/20/2023 11:25 PM] tux_linux
It's pretty much how you talk usually? 😉


[4/20/2023 11:25 PM] szybet
it's not as that bad as today


[4/20/2023 11:25 PM] tux_linux
Well I didn't notice


[4/20/2023 11:25 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/update.sh#L147-L166

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/update.sh
rootfs/update.sh at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-B0475


[4/20/2023 11:25 PM] tux_linux
Xorg base update


[4/20/2023 11:26 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/update.sh#L43-L51
File names

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/update.sh
rootfs/update.sh at master · Kobo-InkBox/rootfs
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-B0475


[4/20/2023 11:26 PM] szybet
well then then this, we really need testing like idk about lockscreen? you didn't tested it - i haven't touched encryption at all, idk how it's going to behave with folder feature


[4/20/2023 11:27 PM] szybet
+ rotation, touchscreen on all devices


[4/20/2023 11:27 PM] tux_linux
I already see the nightmares coming


[4/20/2023 11:27 PM] szybet
because libinput


[4/20/2023 11:27 PM] szybet
I mean - encrytion should be working in such a way that higher level apps dont even see a diffrence


[4/20/2023 11:27 PM] tux_linux
We'd need a physical robot to do this for us


[4/20/2023 11:28 PM] tux_linux
You could at least try it once


[4/20/2023 11:28 PM] tux_linux
(encryption(


[4/20/2023 11:28 PM] tux_linux
Easy setup


[4/20/2023 11:28 PM] tux_linux
Gui


[4/20/2023 11:28 PM] szybet
it's not impossible to do this? we have done worse things, i just dont have any interest for it


[4/20/2023 11:28 PM] szybet
in may - i will have time

{Reactions}
👍 

[4/20/2023 11:30 PM] szybet
well do this, release 2.0, advertise it and if the project doesn't get fraction thats it then propably, then my plan for "i do my things and thats it" persists


[4/20/2023 11:35 PM] kuratius
Stuff like encryption and hardened software are features that only someone working under NDAs or for government agencies is going to care about on an ereader. I still think these should be optional and shouldn't be your main priority


[4/20/2023 11:35 PM] szybet
are optional


[4/20/2023 11:36 PM] kuratius
in the releases too?


[4/20/2023 11:36 PM] szybet
aren't main priority


[4/20/2023 11:36 PM] szybet
you need to turn it on, its never on on default ( it even couldn't be, the user needs to provide a password )


[4/20/2023 11:36 PM] tux_linux
it's already programmed and implemented


[4/20/2023 11:37 PM] kuratius
is deactivating software signing/rooting the device doable via the gui?


[4/20/2023 11:38 PM] tux_linux
no


[4/20/2023 11:38 PM] szybet
nope


[4/20/2023 11:38 PM] tux_linux
it wasn't designed for that


[4/20/2023 11:38 PM] szybet
every os uses signing


[4/20/2023 11:38 PM] szybet
( apart from kobo default os lol? but i quess it's good )


[4/20/2023 11:39 PM] tux_linux
kobo default os is full of security flaws IMO


[4/20/2023 11:39 PM] tux_linux
probably done intentionally


[4/20/2023 11:39 PM] tux_linux
and their update system is equally a bit flawed


[4/20/2023 11:39 PM] kuratius
What is the use case for a customOS? Custom Software. What if you cant install custom software and are instead limited to a walled garden? I'd say that's not hitting your target demographic


[4/20/2023 11:39 PM] tux_linux
a script that extracts a rootfs tarball on top of the live running one


[4/20/2023 11:39 PM] tux_linux
i didn't say you couldn't develop software for it


[4/20/2023 11:40 PM] kuratius
for what purpose?


[4/20/2023 11:40 PM] tux_linux
you can ask for a developer key which will allow you to test your own software


[4/20/2023 11:40 PM] tux_linux
or you just recompile everything


[4/20/2023 11:40 PM] tux_linux
and you learn in the process


[4/20/2023 11:40 PM] tux_linux
to better contribute afterwards


[4/20/2023 11:40 PM] tux_linux
for people to hack their kobos? but it's really going a bit too far


[4/20/2023 11:40 PM] szybet
LOL

i came to the project, i wanted to write apps for it, then i designed and written an ecosystem for custom apps and it was accepted, and its officially used


[4/20/2023 11:41 PM] kuratius
I'm talking more ease-of-use


[4/20/2023 11:41 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
Index.php


[4/20/2023 11:41 PM] kuratius
please dont misunderstand


[4/20/2023 11:42 PM] szybet
its easy used - the only reason i defend signing its because if the update server got hacked - you cant fry the device without knowing the key


[4/20/2023 11:42 PM] kuratius
it's just way easier to get a kobo and install e.g. koreader or plato on it than to do the same with inkbox


[4/20/2023 11:42 PM] tux_linux
if sometime in the future InkBox OS is used on a sold device, it will have everything it needs to be secure already


[4/20/2023 11:42 PM] tux_linux
well yes but koreader or plato are much more limited in comparison


[4/20/2023 11:42 PM] tux_linux
you can't run xorg with koreader


[4/20/2023 11:42 PM] tux_linux
or it's really difficult


[4/20/2023 11:43 PM] szybet
this and only this - kobo is vurnelable for that


[4/20/2023 11:43 PM] kuratius
this is a useful attitude to have if you want to commercialize it for mass production


[4/20/2023 11:43 PM] tux_linux
well, yes, sometime in the future


[4/20/2023 11:43 PM] kuratius
I don't think it's useful while the main audience is tinkerers


[4/20/2023 11:43 PM] tux_linux
it would be great


[4/20/2023 11:43 PM] szybet
as the creator of an alternative OS its pretty hipocryte to say? XD


[4/20/2023 11:43 PM] tux_linux
while keeping os open source


[4/20/2023 11:44 PM] szybet
what problem do tinkerers have with tinkering with inkbox?


[4/20/2023 11:44 PM] tux_linux
well yes, but seriously as someone who likes implementing the most secure system possible it's kinda disappointing


[4/20/2023 11:44 PM] szybet
to tinker with it - you need to recompile it yourself anyway


[4/20/2023 11:45 PM] kuratius
I think there ought to be a lower barrier to entry.
If you think that isn't going to lead to better adoption then so be it.


[4/20/2023 11:45 PM] szybet
tinkering with an ARM system will never be easy, inkbox is a full linux distro


[4/20/2023 11:46 PM] szybet
to tinker with RPI you also need to learn to recompile the kernel sometimes


[4/20/2023 11:46 PM] kuratius
it has been easy on e.g. rpi systems for me


[4/20/2023 11:46 PM] szybet
heh


[4/20/2023 11:47 PM] szybet
ugh


[4/20/2023 11:47 PM] szybet
how do i put this into words


[4/20/2023 11:47 PM] kuratius
btw, consider mailing pine64 regarding their thingy, maybe they'd show an interest in inkbox


[4/20/2023 11:47 PM] kuratius
I say maybe


[4/20/2023 11:47 PM] szybet
i got to this project with little electronic experience, a bit of rust and c++, nothing serious


[4/20/2023 11:48 PM] kuratius
good documentation, good automatic scripts


[4/20/2023 11:48 PM] szybet
welp every project should have it


[4/20/2023 11:48 PM] szybet
also, RPI by design is a "learning" device


[4/20/2023 11:49 PM] szybet
its advertised to students


[4/20/2023 11:49 PM] tux_linux
I think it would be better if I ported it myself beforehand


[4/20/2023 11:50 PM] kuratius
could be


[4/20/2023 11:50 PM] szybet
nope, dont waste money and time with a "maybe"


[4/20/2023 11:50 PM] tux_linux
it's 64-bit
but ram is under 4g
so wouldn't need whole userspace recompilation to 64-bit


[4/20/2023 11:51 PM] tux_linux
it wouldn't be worthless, could raise awareness on inkbox anyway for users of the tablet


[4/20/2023 11:51 PM] szybet
i dont think inkbox is designed for such big devices anyway


[4/20/2023 11:52 PM] tux_linux
ok this is a joke


[4/20/2023 11:52 PM] tux_linux
libra froze screen again


[4/20/2023 11:52 PM] tux_linux
i give up


[4/20/2023 11:53 PM] szybet
run blank something manually


[4/20/2023 11:53 PM] tux_linux
it shouldn't be freezing


[4/20/2023 11:53 PM] szybet
maybe try what niluje was saying?


[4/20/2023 11:53 PM] szybet
.


[4/20/2023 11:53 PM] szybet
you give up a lot lately


[4/20/2023 11:53 PM] tux_linux
that was just what i'd done


[4/20/2023 11:54 PM] tux_linux
two weeks ago


[4/20/2023 11:54 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/554e2bf8fc298c3f8b2a1d99cc9ebf64f89db8c4

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/554e2bf8fc298c3f8b2a1d99cc9ebf64f89db8c4
X11 freeze fix (for real this time) · Kobo-InkBox/rootfs@554e2bf
/mnt/data/projects/git/conversations/media/554e2bf8fc298c3f8b2a1d99cc9ebf64f89db8c4-AB0D8


[4/20/2023 11:54 PM] szybet
for sure?


[4/20/2023 11:54 PM] szybet
so it doesnt work?


[4/20/2023 11:54 PM] tux_linux
it worked


[4/20/2023 11:54 PM] szybet
what about blank?


[4/20/2023 11:55 PM] tux_linux
like, 3 hours on no sleep


[4/20/2023 11:55 PM] szybet
maybe spamming it isn't a good idea?


[4/20/2023 11:55 PM] tux_linux
I stopped using blank with that fix


[4/20/2023 11:55 PM] tux_linux
i don't spam anything


[4/20/2023 11:55 PM] szybet
so this fix doesnt work


[4/20/2023 11:55 PM] szybet
blank works?


[4/20/2023 11:55 PM] tux_linux
it doesn't seem to


[4/20/2023 11:55 PM] tux_linux
yes


[4/20/2023 11:55 PM] tux_linux
i guess


[4/20/2023 11:55 PM] szybet
well then


[4/20/2023 11:55 PM] szybet
what can we do then


[4/20/2023 11:55 PM] szybet
just make run blank every 10 s and thats it


[4/20/2023 11:56 PM] szybet
¯\_(ツ)_/¯


[4/20/2023 11:56 PM] tux_linux
yea


[4/20/2023 11:56 PM] szybet
if you can't 🥩  your goals just lower your expactations


[4/20/2023 11:56 PM] tux_linux
meet


[4/20/2023 11:56 PM] szybet
😄


[4/20/2023 11:56 PM] szybet
😆


[4/20/2023 11:56 PM] tux_linux
spelling errors are ok but like at some point it's too much

{Reactions}
🥴 

[4/20/2023 11:56 PM] kuratius
is there any feedback on the cause of the freeze?


[4/20/2023 11:57 PM] tux_linux
kernel design issues


[4/20/2023 11:57 PM] tux_linux
weird devs


[4/20/2023 11:57 PM] tux_linux
corporation rush


[4/20/2023 11:57 PM] tux_linux
idk


[4/20/2023 11:57 PM] szybet
every answer above is true


[4/21/2023 12:16 AM] szybet
how much?


[4/21/2023 12:25 AM] tux_linux
well ok maybe we should tell them

{Attachments}
/mnt/data/projects/git/conversations/media/image-7AF55.png


[4/21/2023 12:42 AM] szybet
Ask if they are interested


[4/21/2023 12:43 AM] szybet
If yes, im also willing to help port it ~~but not to pay😬~~


[4/21/2023 12:52 AM] tux_linux
~~maybe they'll pay it for us~~


[4/21/2023 12:55 AM] tux_linux
https://github.com/Kobo-InkBox/rootfs/commit/66260f8cc34bf687399cc1f6e6f7483455e018e8

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/66260f8cc34bf687399cc1f6e6f7483455e018e8
Nuclear-proof X11 freeze fix · Kobo-InkBox/rootfs@66260f8
/mnt/data/projects/git/conversations/media/66260f8cc34bf687399cc1f6e6f7483455e018e8-E13C3


[4/21/2023 12:56 AM] tux_linux
If you think it's spamming it too much, change the flag to false


[4/21/2023 12:56 AM] tux_linux
`/boot/flags/EINK_BLANK`


[4/21/2023 4:44 AM] tux_linux
I found this which seems to be WAAAY faster (launches in like 3s) than onboard and still manages to look ok
http://t-sato.in.coocan.jp/xvkbd/#download
```
cd /xorg
tar -xvf /tmp/xvkbd.tar.xz
```

{Attachments}
/mnt/data/projects/git/conversations/media/xvkbd.tar-EA6CD.xz


[4/21/2023 4:45 AM] tux_linux
of course it needs some tweaking and customisation but I think it is a better idea overall


[4/21/2023 8:26 AM] szybet
Then what


[4/21/2023 9:36 AM] szybet
~~Ask then please~~


[4/22/2023 3:41 AM] tux_linux
I hate dealing with bitmap fonts


[4/22/2023 3:41 AM] tux_linux
Feels like I've gone back to 1995


[4/22/2023 10:06 AM] szybet
Xorg?


[4/22/2023 12:38 PM] tux_linux
Yes


[4/22/2023 1:33 PM] tux_linux
welp
I need help

{Attachments}
/mnt/data/projects/git/conversations/media/xvkbd-E790B.png


[4/22/2023 1:55 PM] szybet
Welp are there other layouts?


[4/22/2023 1:56 PM] tux_linux
it's just the font


[4/22/2023 1:56 PM] tux_linux
you can set up your own layout I think


[4/22/2023 1:56 PM] szybet
Then do it


[4/22/2023 1:56 PM] szybet
This is horrible


[4/22/2023 1:56 PM] tux_linux
it doesn't have anything to do with fonts?


[4/22/2023 1:56 PM] szybet
Nah i like it


[4/22/2023 1:56 PM] tux_linux
if we can't get the font to be any bigger it's worthless


[4/22/2023 1:57 PM] tux_linux
it stays small like this no matter what i do


[4/22/2023 1:57 PM] szybet
Yea needs to be bigger


[4/22/2023 1:57 PM] szybet
What did you tried


[4/22/2023 1:57 PM] tux_linux
everything?


[4/22/2023 1:57 PM] tux_linux
i guess?


[4/22/2023 1:57 PM] szybet
?


[4/22/2023 1:57 PM] tux_linux
Xresources
xrdb
dpi
install other fonts
force size


[4/22/2023 1:57 PM] tux_linux
none worked


[4/22/2023 1:57 PM] szybet
Everything says me nothing


[4/22/2023 1:57 PM] tux_linux
http://t-sato.in.coocan.jp/xvkbd/


[4/22/2023 1:57 PM] szybet
Welp is there an aur for this?


[4/22/2023 1:58 PM] tux_linux
probably


[4/22/2023 1:58 PM] szybet
I could try to change it ona desktop first

{Reactions}
👍 

[4/22/2023 1:58 PM] tux_linux
thanks


[4/22/2023 8:42 PM] andi15701
I usually use matchbox-keyboard


[4/22/2023 8:59 PM] tux_linux
AFAIR it was a bit limited


[4/23/2023 12:24 AM] szybet
@tux-linux this BDK mode is in /overlaymount-rootfs.squashfs?


[4/23/2023 12:24 AM] tux_linux
no


[4/23/2023 12:24 AM] tux_linux
it's a different kernel


[4/23/2023 12:24 AM] tux_linux
switching is handled by u-boot


[4/23/2023 12:24 AM] szybet
well


[4/23/2023 12:24 AM] szybet
i got error 5 when trying to enter it


[4/23/2023 12:24 AM] szybet
https://inkbox.ddns.net/wiki/index.php?title=Boot_error_codes

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Boot_error_codes
Index.php


[4/23/2023 12:25 AM] tux_linux
https://github.com/Kobo-InkBox/kernel/tree/master/initrd/busybox-1.32.1/_install-kt-recovery
example

{Embed}
https://github.com/Kobo-InkBox/kernel/tree/master/initrd/busybox-1.32.1/_install-kt-recovery
kernel/initrd/busybox-1.32.1/_install-kt-recovery at master · Kobo-...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[4/23/2023 12:25 AM] szybet
overlaymount was for?...


[4/23/2023 12:25 AM] tux_linux
how did you try to enter it


[4/23/2023 12:25 AM] szybet
spam power button


[4/23/2023 12:25 AM] tux_linux
it's not the same thing?!


[4/23/2023 12:25 AM] tux_linux
BDK and diagnostics are two separate things


[4/23/2023 12:26 AM] tux_linux
overlaymount-rootfs is a different file on mmcblk0p2


[4/23/2023 12:26 AM] tux_linux
maybe you need to sign it


[4/23/2023 12:26 AM] tux_linux
or check serial port


[4/23/2023 12:26 AM] tux_linux
idk


[4/23/2023 12:26 AM] szybet
um ok


[4/23/2023 12:26 AM] tux_linux
BDK interface is as basic as this
https://inkbox.ddns.net/wiki/index.php?title=File:BDK_on_N905B.jpg
Diagnostics are a whole Qt application

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=File:BDK_on_N905B.jpg
Index.php


[4/23/2023 12:26 AM] szybet
what is overlaymount rootfs and why this error appeared only now


[4/23/2023 12:27 AM] tux_linux
Because you probably never booted there before?


[4/23/2023 12:27 AM] szybet
yea


[4/23/2023 1:38 AM] tux_linux
thanks @andi we have found our holy savior

{Attachments}
/mnt/data/projects/git/conversations/media/keyboard-56C89.png


[4/23/2023 3:11 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/key-CE3BA.png


[4/23/2023 4:17 AM] tux_linux
https://www.youtube.com/watch?v=_VQhJQCFlyE

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=_VQhJQCFlyE
matchbox keyboard demo
/mnt/data/projects/git/conversations/media/maxresdefault-91B84.jpg


[4/23/2023 10:38 PM] tux_linux
@Szybet could you look into the compilation issue for libinput?
now I can't launch GUI because my arm64 Qt build wasn't built with it

{Attachments}
/mnt/data/projects/git/conversations/media/image-DAD61.png


[4/23/2023 10:38 PM] tux_linux
and it gives me this dreaded error instead
```
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.
```


[4/23/2023 10:39 PM] tux_linux
.


[4/23/2023 10:39 PM] tux_linux
thanks


[4/23/2023 10:43 PM] szybet
set debug-gui to false


[4/23/2023 10:43 PM] szybet
updated the guide with it


[4/23/2023 10:43 PM] szybet
thats it


[4/23/2023 10:43 PM] szybet
¯\_(ツ)_/¯


[4/23/2023 10:58 PM] tux_linux
ok thanks


[4/23/2023 11:00 PM] tux_linux
for libxkbcommon
you had to build libxml-2


[4/23/2023 11:00 PM] tux_linux
right


[4/23/2023 11:00 PM] tux_linux
?


[4/23/2023 11:32 PM] szybet
it was builded already propably


[4/23/2023 11:33 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-ACE09.png


[4/23/2023 11:33 PM] tux_linux
i rebuilt it for arm64


[4/23/2023 11:33 PM] tux_linux
now i have this error


[4/23/2023 11:33 PM] tux_linux
(on qt configure)


[4/23/2023 11:35 PM] tux_linux
oh i will try your fix


[4/23/2023 11:36 PM] tux_linux
caution


[4/23/2023 11:37 PM] tux_linux
remove `/`

{Attachments}
/mnt/data/projects/git/conversations/media/image-40B4A.png


[4/23/2023 11:37 PM] szybet
thanks

{Reactions}
👍 

[4/24/2023 7:23 PM] szybet
https://github.com/Kobo-InkBox/rootfs/commit/d5b558c0fb2df93c44e6e8ffec3a6a386a2e768b

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/d5b558c0fb2df93c44e6e8ffec3a6a386a2e768b
X11 touch handler fixes · Kobo-InkBox/rootfs@d5b558c
c.f. https://github.com/Kobo-InkBox/kernel/commit/a5809a4c34e0775b012774d973d3371767aa69a9
/mnt/data/projects/git/conversations/media/d5b558c0fb2df93c44e6e8ffec3a6a386a2e768b-53011


[4/24/2023 7:23 PM] szybet
explain


[4/24/2023 7:31 PM] tux_linux
I already explained in the other commit


[4/24/2023 7:37 PM] szybet
where


[4/24/2023 7:40 PM] tux_linux
The cf. link
cf. means "refer to"


[4/24/2023 7:41 PM] szybet
https://github.com/Kobo-InkBox/kernel/commit/a5809a4c34e0775b012774d973d3371767aa69a9 hey nooo

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/a5809a4c34e0775b012774d973d3371767aa69a9
`startx`: Some fixes · Kobo-InkBox/kernel@a5809a4
Since the now-default platform plugins that InkBox GUI uses are linked to `libinput`, this seems to create an unexplainable panic from the VNC touch input handler which just throws `Segmentation fa...
/mnt/data/projects/git/conversations/media/a5809a4c34e0775b012774d973d3371767aa69a9-7E025


[4/24/2023 7:41 PM] szybet
why not use libinput at this point


[4/24/2023 7:42 PM] szybet
in xorg


[4/24/2023 8:00 PM] tux_linux
Segfault


[4/24/2023 8:00 PM] tux_linux
v2.1


[4/24/2023 8:00 PM] tux_linux
I spent 5h debugging this yesterday
It's enough


[4/24/2023 11:08 PM] szybet
Ok


[4/24/2023 11:19 PM] szybet
@andi btw - is it possible - for all devices to flash an uboot / maybe kernel to make the sd card fully accessible through usb?, with capabilities to overwrite the whole sd card ( even the kernel, uboot, they are in ram so it should be fine )

Thinking about an easy installer


[4/24/2023 11:20 PM] andi15701
yes


[4/25/2023 12:18 AM] tux_linux
It already exists


[4/25/2023 12:18 AM] tux_linux
ums 0 mmc 0


[4/25/2023 12:18 AM] tux_linux
Uboot


[4/25/2023 12:25 AM] tux_linux
Not available on 2009.08 uboot


[4/25/2023 12:39 AM] andi15701
well, we might just use a newer u-boot just for that purpose

{Reactions}
👍 

[4/25/2023 12:39 AM] andi15701
but what is probably also important is hashing some of the hidden stuff


[4/25/2023 12:39 AM] andi15701
to detect wrong hardware or new, incompatible hw versions


[4/25/2023 12:39 AM] andi15701
before installing something


[4/25/2023 12:40 AM] andi15701
hashing more "stable" stuff


[4/25/2023 5:33 AM] tux_linux
https://photos.app.goo.gl/cLVMjh2k1txmyQZV8

{Embed}
https://photos.app.goo.gl/cLVMjh2k1txmyQZV8
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/vfQxDPGOpPWwwLC3c7sxm9g5RVhiBM_1BGdD9yFt_H-551FF


[4/25/2023 5:33 AM] tux_linux
https://discord.com/channels/809205711778480158/1095021786132910213/1100261434958561341
F_a_s_t


[4/25/2023 7:16 AM] szybet
Impressive


[4/25/2023 7:16 AM] szybet
An the layout be changed?


[4/25/2023 2:36 PM] tux_linux
I think yes


[4/25/2023 10:01 PM] szybet
https://www.reddit.com/r/linux/comments/12yokxl/lua_as_a_bash_alternative/

{Embed}
https://www.reddit.com/r/linux/comments/12yokxl/lua_as_a_bash_alternative/
r/linux - Lua as a Bash alternative
19 votes and 29 comments so far on Reddit


[4/25/2023 10:02 PM] szybet
what i want to say I would want to ditch shell / bash at some point


[4/26/2023 3:51 AM] tux_linux
```
kindle:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/loop13     175M  -55M  220M    - /mnt
```
df going crazy...


[4/26/2023 4:31 AM] tux_linux
m a y b e


[4/26/2023 7:55 AM] tux_linux
thanks kobo glo
why did you start showing this error and mysteriously not starting any service after udev, even though if started manually via serial port it seems to work?
i hate these things so much

{Attachments}
/mnt/data/projects/git/conversations/media/message-BE999.txt


[4/26/2023 9:17 AM] szybet
What the fuck


[4/26/2023 9:17 AM] szybet
1. Strace
2. Run apk and reinstall udev


[4/26/2023 9:18 AM] szybet
3. Fuck it, don't care - touch will work anyway but libinput libs need to be installed anyway because we dont want 2 seperate qt libs


[4/26/2023 9:19 AM] szybet
2.5 make it run with a delay or smth, but it needs to be run before inkbox gui and gui apps


[4/26/2023 9:20 AM] szybet
Black hole


[4/26/2023 12:28 PM] tux_linux
strace on what... when...


[4/26/2023 12:29 PM] tux_linux
Even this isn't random
`d2??0??A?K??L?L???: applet not found`
It happens everytime


[4/26/2023 12:30 PM] tux_linux
It's not even related to X
The system just doesn't want to boot


[4/26/2023 12:30 PM] tux_linux
Doesn't even start ipd


[4/26/2023 12:32 PM] tux_linux
And it spawns a shell at random like it wants us to think it's finished starting up


[4/26/2023 1:11 PM] szybet
Udev daemom


[4/26/2023 1:12 PM] szybet
Openrc😒


[4/26/2023 1:14 PM] tux_linux
The busybox spawning is the one in the initrd


[4/26/2023 1:18 PM] szybet
It should be like that?


[4/26/2023 1:19 PM] szybet
Well you have instructions for that


[4/26/2023 1:19 PM] szybet
For what to try


[4/26/2023 1:21 PM] tux_linux
I don't know what does it
I just know from the build date


[4/26/2023 1:21 PM] tux_linux
How could udev be a problem


[4/26/2023 1:21 PM] tux_linux
It isn't even at the stage where it's supposed to restart


[4/26/2023 1:22 PM] tux_linux
I recompiled kernel and init to be sure and still does the same


[4/26/2023 1:51 PM] szybet
Follow my steps


[4/26/2023 1:51 PM] szybet
Nothing more


[4/26/2023 1:52 PM] szybet
Also, udev has some good logging - enable it too


[4/26/2023 2:36 PM] szybet
@tux-linux @Aramir you guys tinkered a bit with the platform plugin

Any idea how on the run disable enable options to modify the platform behaviour? Like disable full screen refreshes ( i was able to do it with mouse, but its in the platform code, not the app )

Any better ideas than with a temporary file? I have no idea how to do this properly but i need it ( reader, text editing )


[4/26/2023 2:37 PM] szybet
**Tldr change a public bool in platform plugin from app code**


[4/26/2023 2:41 PM] aryetis
I'm at work right now so I can't fully answer.


[4/26/2023 2:41 PM] aryetis
But iirc that would be somewhere in qplatformscreen


[4/26/2023 2:41 PM] szybet
No hurry


[4/26/2023 2:48 PM] szybet
But at first - no, not really

Those classes are private, even if you could access them, how do you manage it from the gui? We need a header file of this included, but its a custom class how do you manage that it will run it those... Complicated things.

Also the platform plugin gives out a set of functions, classes - thats how those platform plugins are hot pluggable, how do you add it to the class?... My god


[4/26/2023 2:48 PM] tux_linux
Text editing in reader!?


[4/26/2023 2:48 PM] szybet
No, feathernotes


[4/26/2023 2:49 PM] tux_linux
What do you want to change


[4/26/2023 2:49 PM] tux_linux
dbus


[4/26/2023 2:49 PM] tux_linux
But we don't have it


[4/26/2023 2:49 PM] szybet
But the reader also flickers and this would be a proper solution, not magic with text selection things


[4/26/2023 2:49 PM] tux_linux
So, cool


[4/26/2023 2:49 PM] szybet
I hate dbus


[4/26/2023 2:49 PM] szybet
And we won't have it


[4/26/2023 2:49 PM] tux_linux
It is the best solution?


[4/26/2023 2:49 PM] tux_linux
I agree


[4/26/2023 2:50 PM] tux_linux
Best I can think of is a fifo


[4/26/2023 2:50 PM] szybet
Dbus will never be a good solution, my whole experience with it is horrible


[4/26/2023 2:51 PM] szybet
I tryied writing a custom app using it - fuck standards it stopped working after o month


[4/26/2023 2:52 PM] szybet
A matrix app - combo used it - worked only when i launched the app from one terminal and onky sometimes - horrible


[4/26/2023 2:54 PM] szybet
Um eh meh no pls

Also for waiting for messages we would need a new raw c++  thread runned from the platform plugin to wait for it...


[4/26/2023 2:55 PM] tux_linux
It's better than watching a text file


[4/26/2023 2:56 PM] szybet
No, propably maybe a monitoring of the dir would not need a new thread - idk if it would work for fifo


[4/26/2023 3:16 PM] szybet
https://stackoverflow.com/questions/6504611/when-do-global-variables-allocate-their-memory

{Embed}
https://stackoverflow.com/questions/6504611/when-do-global-variables-allocate-their-memory
when do global variables allocate their memory?
It's been bothering me for a while but I didn't find any good resource about this matter. I have some global variables in my code. It's obvious that they are initialized in some order but is the me...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[4/26/2023 3:17 PM] szybet
Some C hacking, one time sharing of the address of the variable and its done


[4/26/2023 3:17 PM] szybet
😈


[4/26/2023 3:20 PM] tux_linux
More bugs


[4/26/2023 3:32 PM] szybet
https://youtu.be/vuUrqs1yjUk?t=5


[4/26/2023 9:05 PM] ninuje
That's from busybox


[4/26/2023 9:05 PM] tux_linux
I know ...


[4/26/2023 9:05 PM] ninuje
Feels like a broken busybox build, a broken symlink, or a broken shell script somewhere


[4/26/2023 9:05 PM] tux_linux
The big question is : why


[4/26/2023 9:05 PM] ninuje
(or, well, init script given OpenRC)


[4/26/2023 9:05 PM] szybet
strace


[4/26/2023 9:06 PM] ninuje
Does the OpenRC depchain look sane?


[4/26/2023 9:06 PM] ninuje
(I'm no longer running OpenRC, so I can't quite recall how you display that :s)


[4/26/2023 9:06 PM] ninuje
dep cache okay, etc?


[4/26/2023 9:41 PM] tux_linux
I think, and I tried a supposedly clean system on another device this morning and didn't get this error


[4/26/2023 9:42 PM] tux_linux
First time it happens in whole inkbox os history


[4/26/2023 9:43 PM] szybet
so only on the glo?


[4/26/2023 9:46 PM] tux_linux
Afaik yes


[4/26/2023 9:46 PM] tux_linux
You can try to reproduce it


[4/26/2023 9:46 PM] tux_linux
Just install a clean system


[4/26/2023 9:46 PM] tux_linux
From latest commits


[4/26/2023 9:55 PM] szybet
if you dont care just disable udev


[4/26/2023 9:55 PM] szybet
only I use keyboard and mouse


[4/26/2023 9:55 PM] szybet
in other words


[4/26/2023 9:55 PM] szybet
there is no glo hd user who wants a keyboard


[4/26/2023 10:27 PM] tux_linux
How can you know it's udev 's fault


[4/26/2023 10:28 PM] szybet
what did change that it happens now?


[4/26/2023 10:28 PM] tux_linux
No idea


[4/26/2023 10:28 PM] szybet
udev


[4/26/2023 10:28 PM] tux_linux
I don't understand why it works on other devices


[4/26/2023 10:29 PM] szybet
maybe update glo once more


[4/26/2023 10:29 PM] szybet
but check sums when transfering files


[4/26/2023 10:29 PM] szybet
¯\_(ツ)_/¯


[4/26/2023 10:31 PM] szybet
btw 2.0 in may?


[4/26/2023 10:32 PM] szybet
i already don't have school, till september


[4/26/2023 10:47 PM] tux_linux
I recompiled the kernel and tried it again, did the same thing


[4/26/2023 10:48 PM] szybet
.


[4/26/2023 10:49 PM] tux_linux
2.0 will be ready in ∞ days


[4/26/2023 10:49 PM] szybet
what is missing?


[4/26/2023 10:49 PM] szybet
only testing?


[4/26/2023 10:49 PM] szybet
~~glo but glo is glo~~


[4/26/2023 10:51 PM] tux_linux
Glo was a really clean update, started from blank 1.5 to 1.6 then 1.9 then 2.0 in one evening


[4/26/2023 10:53 PM] szybet
for 2.0 all devices should get a clean image


[4/26/2023 10:53 PM] tux_linux
They will


[4/26/2023 10:54 PM] kuratius
is the stuff where andi is porting a kernel for the nia useful to you?


[4/26/2023 10:54 PM] szybet
and those images should be tested


[4/26/2023 10:54 PM] tux_linux
But I can't make a clean image if the clean system isn't even working


[4/26/2023 10:54 PM] szybet
i mean wakeup debuging fixes, nothing really more


[4/26/2023 10:54 PM] szybet
only on the glo


[4/26/2023 10:54 PM] tux_linux
Maybe it affects more devices


[4/26/2023 10:54 PM] szybet
just idk try rewinging commits


[4/26/2023 10:54 PM] tux_linux
We don't know


[4/26/2023 10:54 PM] szybet
nah


[4/26/2023 10:55 PM] tux_linux
Glo is imx507
Three devices share the same kernel


[4/26/2023 10:55 PM] kuratius
andi mentioned that you have to do a lot of userspace/application hacks because you're using a kernel that is misconfigured (I'm paraphrasing, please dont flog me)


[4/26/2023 10:55 PM] tux_linux
n613 n705 n905c


[4/26/2023 10:56 PM] tux_linux
Kobo kernels are pretty much flawed as soon as they start to exist


[4/26/2023 10:56 PM] tux_linux
Sorry but it's kind of true...


[4/26/2023 10:56 PM] szybet
I dont remember but there were improvements to be made - but those are code quality improvements, nothing more


[4/26/2023 11:09 PM] kuratius
would the hidden section from my nia be useful to have for you to compare against szybets to search for differences?


[4/26/2023 11:09 PM] kuratius
e.g. to find where screen calibration is stored for example


[4/26/2023 11:09 PM] szybet
wrong channel, propably


[4/26/2023 11:10 PM] szybet
( he knows that already )


[4/26/2023 11:11 PM] kuratius
in my defense, I just spent 6 months in Japan and people talk about each other there in third person all the time


[4/26/2023 11:11 PM] szybet
what


[4/26/2023 11:11 PM] szybet
okay


[4/26/2023 11:11 PM] szybet
nevermind


[4/26/2023 11:13 PM] kuratius
(I assume you meant he=szybet and were calling me out for not talking to you directly)


[4/26/2023 11:14 PM] kuratius
or who did you mean?


[4/26/2023 11:14 PM] szybet
i thought you are talking to andi


[4/26/2023 11:14 PM] kuratius
I was talking to you and tux in general


[4/26/2023 11:16 PM] kuratius
@Szybet is yours also rev c https://discord.com/channels/809205711778480158/1095426950811619418/1100534643440230491?

{Embed}
https://discord.com/channels/809205711778480158/1095426950811619418/1100534643440230491?
Discord - A New Way to Chat with Friends & Communities
Discord is the easiest way to communicate over voice, video, and text.  Chat, hang out, and stay close with your friends and communities.


[4/26/2023 11:16 PM] szybet
you can share the wafeform - if someones eink doesnt work with mine, and theirs is lost they can try yours


[4/26/2023 11:16 PM] kuratius
(I maybe confusing hardware revisions with kernel revisions)


[4/26/2023 11:17 PM] szybet
yes
nevermind my english is already confused


[4/27/2023 12:19 AM] tux_linux
ok, it seems to happen everytime `openrc sysinit` has finished running


[4/27/2023 12:20 AM] tux_linux
which gets us there

{Attachments}
/mnt/data/projects/git/conversations/media/image-3DA5C.png


[4/27/2023 12:23 AM] ninuje
Strace to confirm that that's what's actually running and that you're not suffering from memory corruption (which would be stack corruption here which is... bad)


[4/27/2023 12:23 AM] tux_linux
why only on this device, and with the kernel and init binary compiled twice?


[4/27/2023 12:24 AM] ninuje
Because memory corruption is fun 😉


[4/27/2023 12:24 AM] tux_linux
will do strace


[4/27/2023 12:24 AM] ninuje
The random-ish nature is actually a pretty strong hint in itself that it smells like a corrupt stack


[4/27/2023 12:25 AM] tux_linux
`d2å0àAÎKâÀLÀLâà` those are the same characters every time afaict


[4/27/2023 12:28 AM] szybet
```
// https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/8296c4a1811e3921ff98e9980504c24d23435dac/src/functions.cpp#L415-L430
int run_command(const char * path, const char * arguments[], bool wait) {
    int status = -1;
    int pid = 0;

    status = posix_spawn(&pid, path, NULL, NULL, (char**)arguments, NULL);
    if(status != 0) {
        fprintf(stderr, "Error in spawning process %s\n", path);
        return false;
    }

    if(wait == true) {
        int exit_code = 0;
        waitpid(pid, &exit_code, 0);
        return exit_code;
    }

    return pid;
}
```
sometimes you are returning the exit code, and sometimes the pid


[4/27/2023 12:28 AM] ninuje
Given that I've got a screenful of GCC warnings when building that, I'm inclined to say that shit's broken somewhere ;o)


[4/27/2023 12:28 AM] ninuje
Actually overflowed my scrollback buffer ;o)


[4/27/2023 12:28 AM] tux_linux
I don't have any


[4/27/2023 12:28 AM] tux_linux
did you add -D_GNU_SOURCE


[4/27/2023 12:28 AM] ninuje
*Use the force*


[4/27/2023 12:29 AM] szybet
a bit cursed that its only 2 files


[4/27/2023 12:29 AM] ninuje
`-Wall -Wextra -Wunused -Wformat=2 -Wformat-signedness -Wformat-truncation=1 -Wnull-dereference -Wuninitialized -Wno-maybe-uninitialized -Wduplicated-branches -Wduplicated-cond -Wundef -Wbad-function-cast -Wwrite-strings -Wjump-misses-init -Wlogical-op -Wstrict-prototypes -Wold-style-definition -Wshadow -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -Winline -Wcast-qual -Wcast-align -Wconversion -Wno-jump-misses-init`


[4/27/2023 12:29 AM] szybet
like IPD is 10


[4/27/2023 12:29 AM] ninuje
`-Wall -Wextra` should be a good start though ;p


[4/27/2023 12:29 AM] ninuje
That's just my go-to tweaked list from FBInk


[4/27/2023 12:29 AM] tux_linux
OH ok


[4/27/2023 12:29 AM] ninuje
(the rest, I mean)


[4/27/2023 12:30 AM] ninuje
Yeah, Wall & Wextra are a good start and still overflow my scrollback buffer ^^


[4/27/2023 12:30 AM] ninuje
-Wall is mandatory in my book


[4/27/2023 12:31 AM] ninuje
-Wextra can throw a lot of more bening stuff or plain false-positives (which explains the long-ass list I use, it's to filter that out)


[4/27/2023 12:31 AM] tux_linux
what does it say


[4/27/2023 12:32 AM] ninuje
Actually, no, i'm blind, it's doesn't overflow anymore ;D


[4/27/2023 12:32 AM] ninuje
Still too large for my non-Nitro ass


[4/27/2023 12:32 AM] ninuje
fuck you, discord

{Reactions}
😂 

[4/27/2023 12:32 AM] tux_linux
good?


[4/27/2023 12:32 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9EEA5.png


[4/27/2023 12:33 AM] szybet
can this cause problems?


[4/27/2023 12:33 AM] szybet
its only a print


[4/27/2023 12:33 AM] tux_linux
YES
IT DID


[4/27/2023 12:33 AM] tux_linux
TOO MUCH


[4/27/2023 12:33 AM] szybet
i mean the warning


[4/27/2023 12:33 AM] tux_linux
but it was the only working way


[4/27/2023 12:33 AM] tux_linux
oh, I thought you were talking about the code block


[4/27/2023 12:34 AM] ninuje
https://pastebin.com/QLkm3Hpv

{Embed}
https://pastebin.com/QLkm3Hpv
init.c: In function 'main':init.c:93:46: warning: argument to 'size...
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.


[4/27/2023 12:34 AM] ninuje
I'm seeing that one, yeah


[4/27/2023 12:34 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E4037.png


[4/27/2023 12:34 AM] szybet
this is bad


[4/27/2023 12:34 AM] szybet
1. you are not returning nothing sometimes
2. you are not closing the file, sometimes


[4/27/2023 12:34 AM] tux_linux
yes, i know


[4/27/2023 12:35 AM] szybet
actually this function cannot run properly


[4/27/2023 12:35 AM] tux_linux
but it does?


[4/27/2023 12:35 AM] szybet
yea and then you have random bugs


[4/27/2023 12:35 AM] tux_linux
anyway, writing C without having a degree pretty much looks like this... hehe


[4/27/2023 12:35 AM] szybet
fix this


[4/27/2023 12:35 AM] szybet
rust would scream at you


[4/27/2023 12:35 AM] ninuje
I'm hating your IDE's annotations, BTW


[4/27/2023 12:35 AM] ninuje
But the actual warnings are on point 😉


[4/27/2023 12:36 AM] tux_linux
how exactly


[4/27/2023 12:36 AM] szybet
those should be used for rust, but yea


[4/27/2023 12:36 AM] ninuje
Just check your fopen call instead, and fclose after the fputs


[4/27/2023 12:36 AM] tux_linux
well i will just return false on the else part


[4/27/2023 12:36 AM] tux_linux
and close the file


[4/27/2023 12:36 AM] ninuje
You don't have a fp if fopen fails, that's the only case where you know you have nothing to fclose


[4/27/2023 12:36 AM] szybet
```c
// https://stackoverflow.com/a/14576624/14164574
bool write_file(char * file_path, char * content) {
    FILE *file = fopen(file_path, "wb");

    int rc = fputs(content, file);
    fclose(file);
    if (rc == EOF) {
        return false;
    }
    else {
        return true;
    }
}
````


[4/27/2023 12:36 AM] szybet
here


[4/27/2023 12:36 AM] szybet
copy this


[4/27/2023 12:36 AM] ninuje
Otherwise, close when you're done with it (... before return ;o))


[4/27/2023 12:36 AM] tux_linux
hmm, better look before copying SO examples


[4/27/2023 12:37 AM] ninuje
i.e., that, + a checked fopen


[4/27/2023 12:37 AM] szybet
```
// https://stackoverflow.com/a/39191360/14164574
bool copy_file(char * source_file, char * destination_file) {
    FILE *fp_I;
    FILE *fp_O;

    fp_I = fopen(source_file, "rb");
    if(!fp_I) {
        perror(source_file);
        return false;
    }

    fp_O = fopen(destination_file, "wb");
    if(!fp_O) {
        fclose(fp_I);
        return false;
    }

    int c;
    while((c = getc(fp_I)) != EOF) {
        putc(c, fp_O);
    }

    fclose(fp_I);
    if(fclose(fp_O) != 0) {
        return false;
    }
    return true;
}
```
here is the same story


[4/27/2023 12:38 AM] szybet
but its better actually


[4/27/2023 12:38 AM] tux_linux
this one isn't fine?


[4/27/2023 12:38 AM] szybet
you dont close fp_I if it fails


[4/27/2023 12:38 AM] szybet
¯\_(ツ)_/¯


[4/27/2023 12:39 AM] szybet
and you dont close fp_O at all?


[4/27/2023 12:39 AM] szybet
ok, its in this if, i see it


[4/27/2023 12:40 AM] szybet
this is why define exists in c, but nevermind just colors

{Attachments}
/mnt/data/projects/git/conversations/media/image-0B2F9.png


[4/27/2023 12:42 AM] szybet
sleep -1 while its taking an unsigned int?... whaat?

{Attachments}
/mnt/data/projects/git/conversations/media/image-1A17E.png


[4/27/2023 12:42 AM] tux_linux
otherwise it becomes a zombie process


[4/27/2023 12:43 AM] szybet
um okay


[4/27/2023 12:43 AM] tux_linux
and everything else breaks down


[4/27/2023 12:43 AM] tux_linux
because... well you know


[4/27/2023 12:46 AM] szybet
i wil ltry to replicate this tommorow


[4/27/2023 12:47 AM] szybet
fix the file issues for now


[4/27/2023 12:47 AM] tux_linux
i hate this


[4/27/2023 12:47 AM] szybet
if i cant replicate this, then you need to just make the running code smaller and smaller to narrow the issue


[4/27/2023 12:47 AM] tux_linux
great


[4/27/2023 12:47 AM] tux_linux
oh, guess what


[4/27/2023 12:48 AM] tux_linux
with strace running it did actually boot


[4/27/2023 12:48 AM] tux_linux
what a surprise


[4/27/2023 12:48 AM] ninuje
Okay.


[4/27/2023 12:48 AM] ninuje
`sprintf(root_flag, "%s", &sector_content);`


[4/27/2023 12:48 AM] tux_linux
😐


[4/27/2023 12:48 AM] ninuje
her eis your stack corruption


[4/27/2023 12:48 AM] szybet
waaaait


[4/27/2023 12:48 AM] tux_linux
worked for 9 months before throwing this error?


[4/27/2023 12:48 AM] ninuje
You're writing to the address of a stackj variable


[4/27/2023 12:48 AM] szybet
clang really showed the problem?


[4/27/2023 12:49 AM] szybet
;p


[4/27/2023 12:49 AM] tux_linux
thanks for informing me


[4/27/2023 12:49 AM] ninuje
You need actual space to put this in, you're just randomly stomping on the stack there


[4/27/2023 12:49 AM] tux_linux
ok


[4/27/2023 12:49 AM] szybet
remember my problem with ipd? and then qt mouse?... welcome in the club


[4/27/2023 12:50 AM] tux_linux
no but seriously, it's like terribly random
the same exact commit works on other devices


[4/27/2023 12:50 AM] tux_linux
even the mini


[4/27/2023 12:50 AM] tux_linux
which has the same cpu


[4/27/2023 12:50 AM] szybet
just fix the issues we pointed out


[4/27/2023 12:51 AM] ninuje
dammit, fuck discord ²


[4/27/2023 12:52 AM] ninuje
https://pastebin.com/fM0yvhrL

{Embed}
https://pastebin.com/fM0yvhrL
```diffdiff --git a/init.c b/init.cindex 2a19f7a..e176513 100644---...
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.


[4/27/2023 12:52 AM] ninuje
working through the rest


[4/27/2023 12:52 AM] tux_linux
And how would I do this


[4/27/2023 12:52 AM] tux_linux
Oh ok


[4/27/2023 12:52 AM] tux_linux
Well thanks a lot


[4/27/2023 12:52 AM] szybet
hmm one word and we move the main conversation to matrix


[4/27/2023 12:53 AM] tux_linux
I hope it will work
I had numerous issues with that specific function where it thought it was not rooted but it was actually


[4/27/2023 12:53 AM] tux_linux
There is a trick


[4/27/2023 12:53 AM] tux_linux
Paste the text
Press enter
Click upload as file
Ctrl+A backspace
Send


[4/27/2023 12:54 AM] szybet
we can simply move to matrix tho


[4/27/2023 12:54 AM] szybet
if he wants


[4/27/2023 12:54 AM] tux_linux
But I agree it's messed up^18


[4/27/2023 12:58 AM] szybet
i can implement this
https://github.com/42wim/matterbridge

{Embed}
https://github.com/42wim/matterbridge
GitHub - 42wim/matterbridge: bridge between mattermost, IRC, gitter...
bridge between mattermost, IRC, gitter, xmpp, slack, discord, telegram, rocketchat, twitch, ssh-chat, zulip, whatsapp, keybase, matrix, microsoft teams, nextcloud, mumble, vk and more with REST API...
/mnt/data/projects/git/conversations/media/matterbridge-8FE81


[4/27/2023 12:58 AM] szybet
if you give me permissions


[4/27/2023 12:58 AM] szybet
on discord and matrix


[4/27/2023 1:03 AM] ninuje
https://pastebin.com/Fv0M7gSM

{Embed}
https://pastebin.com/Fv0M7gSM
diff --git a/init.c b/init.cindex 2a19f7a..3faa294 100644--- a/init...
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.


[4/27/2023 1:03 AM] ninuje
There, passes -Wextra


[4/27/2023 1:07 AM] ninuje
r2: https://pastebin.com/3QnkQDMd

{Embed}
https://pastebin.com/3QnkQDMd
diff --git a/init.c b/init.cindex 2a19f7a..cab7f24 100644--- a/init...
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.


[4/27/2023 1:10 AM] ninuje
Oh, the commented out module.h may not be desirable for you


[4/27/2023 1:10 AM] ninuje
I just don't have it on my TC (and don't need it, apparently)


[4/27/2023 1:12 AM] ninuje
And I may not have respected the house style


[4/27/2023 1:13 AM] ninuje
and/or typos, I still haven't setup my IDE again


[4/27/2023 1:19 AM] ninuje
Also, is the root flag thing actually NULL terminated?


[4/27/2023 1:19 AM] ninuje
Because if it isn't, strstr isn't the right tool for the job


[4/27/2023 1:20 AM] ninuje
(strstr isn't the right tool for a lot of what you're using it for, actually ;p)


[4/27/2023 1:20 AM] ninuje
Use strcmp (or, better, strncmp) if it's a string


[4/27/2023 1:20 AM] ninuje
memcmp otherwise


[4/27/2023 1:21 AM] ninuje
okay, basic maths answered my question


[4/27/2023 1:22 AM] ninuje
"rooted" is 6 characters, the buffer and read are both 6 bytes, ergo it can't be a C string 😉


[4/27/2023 1:22 AM] ninuje
because no space for a NULL


[4/27/2023 1:23 AM] ninuje
so, r3: https://pastebin.com/Y6AE1VtD

{Embed}
https://pastebin.com/Y6AE1VtD
diff --git a/init.c b/init.cindex 2a19f7a..f3d2b72 100644--- a/init...
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.


[4/27/2023 1:23 AM] tux_linux
Well, strstr was a mess for me but it was the only thing that worked


[4/27/2023 1:24 AM] tux_linux
I remember it read "root\4"


[4/27/2023 1:24 AM] tux_linux
Like it skipped "ed"


[4/27/2023 1:24 AM] ninuje
Given the old code, it read random shit in your stack 😉


[4/27/2023 1:25 AM] tux_linux
But it still worked


[4/27/2023 1:25 AM] tux_linux
C o o l


[4/27/2023 1:25 AM] ninuje
Because it's a relatively small program, and the variable is global scope

{Reactions}
👍 

[4/27/2023 1:25 AM] ninuje
so you were more or less guaranteed to have a pointer-size of space (maybe)


[4/27/2023 1:26 AM] ninuje
root being 4 bytes would concur with that


[4/27/2023 1:27 AM] tux_linux
Ok, you are a wizard and I am probably somewhat dumb
If you have other patches please submit them...


[4/27/2023 1:31 AM] ninuje
I literally only looked at the warning ;o)


[4/27/2023 1:32 AM] tux_linux
Warnings are cryptic for me sometimes...


[4/27/2023 1:32 AM] tux_linux
Even with SO


[4/27/2023 4:01 AM] tux_linux
next-level user support

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230426-220052-7E4C2.png


[4/27/2023 4:14 AM] tux_linux
That made it segfault, I remember, probably because of the stack corruption thing I didn't really know about


[4/27/2023 4:14 AM] tux_linux
But it's usually what I would do for things like this


[4/27/2023 4:41 AM] tux_linux
THANKS IT WORKS


[4/27/2023 4:42 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-FB169.txt


[4/27/2023 4:43 AM] tux_linux
Root detection works as well

{Attachments}
/mnt/data/projects/git/conversations/media/message-8D11C.txt


[4/27/2023 4:51 AM] tux_linux
I will eventually get to handle what happens when snprintf says no...


[4/27/2023 5:13 AM] tux_linux
hey, only two things remaining in to-do list!

{Attachments}
/mnt/data/projects/git/conversations/media/image-CBD00.png


[4/27/2023 7:19 AM] ninuje
read_file is *still* not valid C


[4/27/2023 9:13 AM] szybet
If the sketch app can be a user gui app, then i can make it, and you can remove the code for the old one


[4/27/2023 10:06 AM] szybet
gutenberg?


[4/27/2023 10:06 AM] szybet
+ gutenberg cancel button


[4/27/2023 10:06 AM] szybet
or start button


[4/27/2023 12:43 PM] tux_linux
Ok


[4/27/2023 1:06 PM] tux_linux
You can make the user app but I'm not sure to remove the current one because kt won't like plato


[4/27/2023 1:19 PM] szybet
if(kt) {
show
}


[4/27/2023 1:19 PM] szybet
:D


[4/27/2023 1:20 PM] tux_linux
Well ok but what happens when user app isn't installed


[4/27/2023 1:21 PM] szybet
ok now here me out


[4/27/2023 1:21 PM] szybet
genius plan for that


[4/27/2023 1:21 PM] szybet
***we dont care***


[4/27/2023 1:21 PM] szybet
just bro install it


[4/27/2023 1:21 PM] tux_linux
How much will it weigh


[4/27/2023 1:22 PM] tux_linux
Maybe it could be a default user app
An example
Already installed
Idk


[4/27/2023 1:22 PM] szybet
IDK


[4/27/2023 1:23 PM] szybet
no because you are afraid of p4 size usage


[4/27/2023 1:23 PM] tux_linux
Ok


[4/27/2023 1:23 PM] tux_linux
Well
Idk


[4/27/2023 1:23 PM] tux_linux
Built-in sketch app is not *that* flawed


[4/27/2023 1:24 PM] tux_linux
It can do basic sketch


[4/27/2023 1:24 PM] tux_linux
Has an exit button


[4/27/2023 1:24 PM] szybet
i have spend 3 days gluing plato code together for that sketch app to prove you wrong with that :D


[4/27/2023 1:29 PM] tux_linux
well, ok
I will try it on the mini to see if your glue still holds
make the user app


[4/27/2023 1:29 PM] szybet
no i can


[4/27/2023 1:29 PM] szybet
i mean


[4/27/2023 1:29 PM] tux_linux
you.. don't have a mini


[4/27/2023 1:29 PM] szybet
i will do the user app


[4/27/2023 1:30 PM] tux_linux
yes, I said make the user app


[4/27/2023 1:30 PM] tux_linux
so you do it


[4/27/2023 1:30 PM] szybet
good


[4/27/2023 1:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/9c5b170249b3be19cbfb7c5438d989ec-C137F.png


[4/27/2023 1:30 PM] szybet
:D


[4/27/2023 1:30 PM] tux_linux
please, no unnecessary reqf


[4/27/2023 1:30 PM] tux_linux
it's a sketch app


[4/27/2023 1:30 PM] tux_linux
no keyboard


[4/27/2023 1:30 PM] tux_linux
thanks


[4/27/2023 1:30 PM] szybet
XDDDDD


[4/27/2023 1:30 PM] tux_linux
protect sysfs


[4/27/2023 1:31 PM] szybet
if you want to check the sketch **now** its integrated into feathernotes


[4/27/2023 1:37 PM] szybet
actually not, the script there supports only the nia


[4/27/2023 1:37 PM] tux_linux
n i c e


[4/27/2023 1:37 PM] szybet
i just need to add some more if else


[4/27/2023 1:37 PM] szybet
dont panic


[4/27/2023 1:38 PM] tux_linux
hmm hmm


[4/27/2023 1:38 PM] tux_linux
hmm mm


[4/27/2023 1:38 PM] szybet
hmhmhmhm


[4/27/2023 1:49 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230427_114933729-DFD92.jpg


[4/27/2023 1:50 PM] tux_linux
'burn-in' I was talking about for the mini


[4/27/2023 1:50 PM] tux_linux
disappears after a full refresh


[4/27/2023 1:50 PM] tux_linux
it's just kinda strange


[4/27/2023 1:50 PM] szybet
old eink display


[4/27/2023 1:50 PM] tux_linux
it's the only one that does it


[4/27/2023 1:51 PM] tux_linux
anyways it still works so good


[4/27/2023 1:51 PM] szybet
if you figure out how to communicate to platform plugin i can make it fully refresh after a delay


[4/27/2023 1:51 PM] tux_linux
@NiLuJe do you know what's causing it? i'm curious


[4/27/2023 1:51 PM] tux_linux
no


[4/27/2023 1:51 PM] tux_linux
not every mini will have this screen


[4/27/2023 2:02 PM] szybet
really no one has written a qt platform plugin for console? like console squares as pixels?


[4/27/2023 2:06 PM] tux_linux
no one needed it?


[4/27/2023 2:07 PM] szybet
wouldn't it be cool????


[4/27/2023 2:07 PM] tux_linux
it wouldn't have been useful at all


[4/27/2023 2:09 PM] szybet
it would be cool


[4/27/2023 2:56 PM] szybet
@tux-linux can i create a github user app repo


[4/27/2023 2:56 PM] szybet
description, download, source link etc


[4/27/2023 2:57 PM] szybet
the squashes in this repo


[4/27/2023 2:59 PM] szybet
in inkbox organisation


[4/27/2023 2:59 PM] szybet
( i have permissions, yay )


[4/27/2023 3:00 PM] tux_linux
Yes


[4/27/2023 3:01 PM] tux_linux
*zip


[4/27/2023 3:01 PM] szybet
yes


[4/27/2023 3:01 PM] tux_linux
Change it to user-applications


[4/27/2023 3:01 PM] tux_linux
Full name


[4/27/2023 3:01 PM] tux_linux
It's official


[4/27/2023 3:02 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[4/27/2023 3:02 PM] tux_linux
Do it please


[4/27/2023 3:02 PM] szybet
done done


[4/27/2023 3:02 PM] tux_linux
Thanks


[4/27/2023 3:02 PM] szybet
i will make the template for this repo


[4/27/2023 3:03 PM] szybet
also don't publish there anything until its tested on the latest inkbox binary


[4/27/2023 3:03 PM] szybet
conway had problems idk


[4/27/2023 3:17 PM] szybet
btw im working on finishing sanki, it now supports PC too
https://github.com/Szybet/sanki

{Embed}
https://github.com/Szybet/sanki
GitHub - Szybet/sanki: small anki rewritten for e-readers, with foc...
small anki rewritten for e-readers, with focus on inkbox support - GitHub - Szybet/sanki: small anki rewritten for e-readers, with focus on inkbox support


[4/27/2023 3:36 PM] szybet
https://github.com/baskerville/plato/pull/281

{Embed}
https://github.com/baskerville/plato/pull/281
Plato chess by bateast · Pull Request #281 · baskerville/plato
Chess application to be used with uci engine (like stockfish) as proposed here: https://github.com/bateast/plato/tree/binaries
See documentation https://github.com/bateast/plato/blob/plato_chess/do...
/mnt/data/projects/git/conversations/media/281-5160B


[4/27/2023 3:36 PM] szybet
wowwww


[4/27/2023 3:49 PM] szybet
and he doesnt care


[4/27/2023 3:49 PM] szybet
my god


[4/27/2023 4:24 PM] szybet
i hate shell scripts
i hate shell scripts
i hate shell scripts
i hate shell scripts
i hate shell scripts

gui_apps somehow remembers the values from the previous user app, so it gives all permissions from the previous one to the next one 

i hate shell scriptsi hate shell scriptsi hate shell scriptsi hate shell scriptsi hate shell scripts


[4/27/2023 4:34 PM] szybet
also security issue lol


[4/27/2023 4:45 PM] tux_linux
NO


[4/27/2023 4:46 PM] szybet
yes ;D


[4/27/2023 4:46 PM] szybet
i will submit a pull request soon


[4/27/2023 4:46 PM] szybet
also i discovered this by accident


[4/27/2023 4:46 PM] szybet
LUA LUA LUA LUA LUA :D


[4/27/2023 4:54 PM] szybet
also a small isue with usr, nevermind it i will fix it too


[4/27/2023 4:55 PM] tux_linux
You just need to initialize them at the beginning, you did that?


[4/27/2023 4:55 PM] szybet
i added that to fix it, yes


[4/27/2023 4:55 PM] tux_linux
Ok
And it works?


[4/27/2023 4:55 PM] szybet
yep

{Reactions}
👍 

[4/27/2023 4:55 PM] szybet
https://tenor.com/view/lua-bot-discord-gif-23459908

{Embed}
https://tenor.com/view/lua-bot-discord-gif-23459908
/mnt/data/projects/git/conversations/media/lua-bot-69DB0.png


[4/27/2023 4:55 PM] szybet
look at this


[4/27/2023 4:55 PM] szybet
beautiful


[4/27/2023 4:56 PM] tux_linux
Which one


[4/27/2023 4:56 PM] szybet
time zone also requires usr but the tmpfs was created inside keyboard support, i moved it above


[4/27/2023 4:56 PM] tux_linux
Learn it before doing anything with it


[4/27/2023 4:56 PM] tux_linux
Ok


[4/27/2023 4:57 PM] szybet
you think i learned rust, c++, qt and then started doing things?


[4/27/2023 4:57 PM] szybet
sanki? it was a battle field :D


[4/27/2023 4:57 PM] tux_linux
Well whatever


[4/27/2023 4:57 PM] tux_linux
It doesn't always result in good code


[4/27/2023 4:57 PM] tux_linux
Look at my own case: C init


[4/27/2023 4:58 PM] szybet
well i redesigned most sanki code lately


[4/27/2023 4:58 PM] szybet
inkbox also would need it


[4/27/2023 4:58 PM] tux_linux
Yes in some areas


[4/27/2023 4:58 PM] tux_linux
Home page and local library is pretty good


[4/27/2023 4:58 PM] szybet
no one is paying us for it


[4/27/2023 4:58 PM] szybet
wifi, user app


[4/27/2023 4:58 PM] tux_linux
Yes


[4/27/2023 4:59 PM] szybet
reader, and low level stuff, logging, global values, general dialog


[4/27/2023 4:59 PM] tux_linux
Settings would need redesign in 2.1


[4/27/2023 4:59 PM] tux_linux
Reader is good?


[4/27/2023 4:59 PM] tux_linux
Excuse me?


[4/27/2023 4:59 PM] szybet
not for me


[4/27/2023 4:59 PM] szybet
loads too long, and text cuts off


[4/27/2023 5:00 PM] szybet
i mean scrollbars


[4/27/2023 5:00 PM] tux_linux
Yea
But will we ever be able to fix this


[4/27/2023 5:00 PM] szybet
i already did?


[4/27/2023 5:00 PM] szybet
in the small demo


[4/27/2023 5:00 PM] tux_linux
It half worked


[4/27/2023 5:00 PM] tux_linux
No?


[4/27/2023 5:00 PM] szybet
no, it was perfect


[4/27/2023 5:00 PM] szybet
4s load


[4/27/2023 5:01 PM] szybet
text also perfect


[4/27/2023 5:01 PM] szybet
but all other features need to be implemented


[4/27/2023 5:22 PM] szybet
```
            "dragon" => Device {
                model: Model::AuraHD,
                proto: TouchProto::Single,
                dims: (1080, 1440),
                dpi: 265,
            },
            "phoenix" => Device {
                model: Model::Aura,
                proto: TouchProto::MultiA,
                dims: (758, 1024),
                dpi: 212,
            },
            "dahlia" => Device {
                model: Model::AuraH2O,
                proto: TouchProto::MultiA,
                dims: (1080, 1440),
                dpi: 265,
            },
```


[4/27/2023 5:22 PM] szybet
@tux-linux which aura is the one supported


[4/27/2023 5:22 PM] szybet
dahlia?


[4/27/2023 5:25 PM] szybet
please respond


[4/27/2023 5:25 PM] szybet
i want to finish this


[4/27/2023 5:27 PM] ninuje
The Mini is a piece of trash? ;D. Snark aside, I don't know the specs of the screen generation, but it's either working as intended or bad waveform blob


[4/27/2023 5:30 PM] ninuje
We generally drop the "Aura" part when referring to the H2O to avoid the braindead naming scheme pitfalls


[4/27/2023 5:31 PM] ninuje
The Aura was a very weird device with very specific quirks, so I'm not sure it's a good candidate (for... anything, really. burn it with fire)


[4/27/2023 5:31 PM] szybet
im getting one propably


[4/27/2023 5:31 PM] szybet
so nice you are mentioning this now :D


[4/27/2023 5:31 PM] szybet
XD


[4/27/2023 5:31 PM] ninuje
The AuraHD and H2O are very similar boards on the other hand


[4/27/2023 5:32 PM] ninuje
You'll get to experience the weirdest REAGL implementation on planet Earth


[4/27/2023 5:32 PM] ninuje
resulting in funky ass grey looking flashes


[4/27/2023 5:32 PM] ninuje
it's awful


[4/27/2023 5:33 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[4/27/2023 5:48 PM] szybet
14 Mb sketch app


[4/27/2023 5:48 PM] szybet
well


[4/27/2023 5:48 PM] szybet
well


[4/27/2023 5:48 PM] szybet
plato libraries and things


[4/27/2023 5:51 PM] szybet
https://github.com/Kobo-InkBox/rootfs/pull/7

{Embed}
https://github.com/Kobo-InkBox/rootfs/pull/7
gui apps fixes by Szybet · Pull Request #7 · Kobo-InkBox/rootfs
/mnt/data/projects/git/conversations/media/7-0BF5F


[4/27/2023 6:05 PM] szybet
https://github.com/Kobo-InkBox/user-applications/blob/main/README.md

{Embed}
https://github.com/Kobo-InkBox/user-applications/blob/main/README.md
user-applications/README.md at main · Kobo-InkBox/user-applications
user apps repo. Contribute to Kobo-InkBox/user-applications development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/user-applications-B5351


[4/27/2023 6:52 PM] szybet
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_user_apps
Index.php


[4/27/2023 6:52 PM] szybet
modified this


[4/27/2023 6:52 PM] szybet
a bit


[4/28/2023 3:31 AM] ninuje
You get one, and you get one, and you get one too!

{Attachments}
/mnt/data/projects/git/conversations/media/tidy-54415.diff


[4/28/2023 3:32 AM] ninuje
Down to a single warning


[4/28/2023 3:32 AM] ninuje
Because deprecated net API thatI can't be arsed to look into again ;p


[4/28/2023 3:32 AM] ninuje
There *will* be bugs, I basically did that on auto-pilot over a couple of hours


[4/28/2023 3:33 AM] ninuje
But there won't be a shitton of resource leaks anymore


[4/28/2023 4:10 AM] tux_linux
Whoa thanks a lot


[4/28/2023 4:11 AM] tux_linux
I will test it as soon as I can


[4/28/2023 11:42 AM] szybet
@andi 
i got a broken aura, it doesnt boot, here is the things i did:

usb port: if battery is connected or not, it takes about 20 mA
battery: 4V, seems good
serial: nothing
sd card - working, i have a copy of it
voltage given on serial port, the V pin: 0,26... this seems like a problem
And it doesnt respond to the power button in any way ( Edit: the serial adapter gived this voltage ( somehow, i didnt connected the V pin so there is 0V on the pin )

I'm thinking about a reflow, but i wonder from where does the voltage get from on the serial port, is the PMIC ( battery charging thing ) gives it? i doubt the cpu


[4/28/2023 11:43 AM] szybet
Maybe connecting there 3.3V External would work? or is it a bad idea?


[4/28/2023 12:06 PM] andi15701
so you had usb and battery disconnected at the same time?


[4/28/2023 12:06 PM] andi15701
if applying external voltages: first start through a resistor


[4/28/2023 12:08 PM] szybet
at what point do you ask?


[4/28/2023 12:08 PM] andi15701
maybe do that for some hour or so


[4/28/2023 12:08 PM] szybet
this small chip connects to the button and to the V in the serial pins

{Attachments}
/mnt/data/projects/git/conversations/media/PICT0001-3FB37.jpg
/mnt/data/projects/git/conversations/media/PICT0002-C0F48.jpg
/mnt/data/projects/git/conversations/media/PICT0003-CD384.jpg


[4/28/2023 12:09 PM] szybet
?


[4/28/2023 12:09 PM] szybet
is it a converter? turn on thing? i cant find a datasheet


[4/28/2023 12:10 PM] andi15701
reason: you can make the msp430 very upset by giving it wrong commands (from userspace), which may need battery disconnect


[4/28/2023 12:10 PM] szybet
i disconnected the battery


[4/28/2023 12:10 PM] andi15701
but it might also be in extreme powersaving


[4/28/2023 12:10 PM] szybet
for some time


[4/28/2023 12:11 PM] andi15701
yes, ok


[4/28/2023 12:11 PM] szybet
well, longer?


[4/28/2023 12:13 PM] andi15701
the small chip might just be a simple fet


[4/28/2023 12:13 PM] andi15701
usual the have some part of the part number on it or a totally independant code


[4/28/2023 12:14 PM] tux_linux
Please go in aura 2 thread


[4/28/2023 12:14 PM] tux_linux
We won't lose this bit of conversation


[4/28/2023 12:14 PM] szybet
it's not porting


[4/28/2023 12:14 PM] szybet
its repair


[4/28/2023 12:14 PM] andi15701
this is not aura2 i guess


[4/28/2023 12:14 PM] szybet
create a repair channel


[4/28/2023 12:14 PM] szybet
nope, its not


[4/28/2023 12:15 PM] tux_linux
N236?


[4/28/2023 12:15 PM] szybet
yep


[4/28/2023 12:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230428_121504-AE345.jpg


[4/28/2023 12:16 PM] andi15701
ah, then it is different


[4/28/2023 12:16 PM] andi15701
we have the rc5t619 as a pmic


[4/28/2023 12:16 PM] szybet
@andi could under voltage on the V ping do some damage?


[4/28/2023 12:17 PM] szybet
i could slowly turn it to 3.3 ( IS IT EVEN 3.3V THERE?...)


[4/28/2023 12:17 PM] andi15701
I have always seen 3v3V on these pins


[4/28/2023 12:18 PM] andi15701
I would just connect the 3v3 with a resistor to find out if that is the overcurrent protection


[4/28/2023 12:18 PM] andi15701
of the pmic


[4/28/2023 12:19 PM] szybet
i have a custom power supply that cuts of voltage when the power limit is reached


[4/28/2023 12:19 PM] szybet
i will use a resistor too


[4/28/2023 12:19 PM] szybet
well, then this before i try


[4/28/2023 12:19 PM] szybet
i doubt it - all repair videos do it from 1V to the goal


[4/28/2023 1:19 PM] szybet
500 mA at 3.3V


[4/28/2023 1:19 PM] szybet
ugh...


[4/28/2023 1:20 PM] andi15701
I would not have allowed that max current


[4/28/2023 1:20 PM] szybet
resistor


[4/28/2023 1:21 PM] szybet
+ no chip got hot


[4/28/2023 1:21 PM] szybet
i slowly turned it to that level and was checking everything


[4/28/2023 1:23 PM] andi15701
an IR cam would be nice...


[4/28/2023 1:23 PM] szybet
dont have one


[4/28/2023 1:24 PM] andi15701
just keep in mind ttha


[4/28/2023 1:24 PM] andi15701
that the power structure is that all those regulators are fed by vsys


[4/28/2023 1:24 PM] andi15701
of the rc5t619


[4/28/2023 1:25 PM] andi15701
the 1.something dcdc for the cpu is also directly behind it


[4/28/2023 1:26 PM] szybet
there is a short on this line


[4/28/2023 1:26 PM] szybet
600 mA at 1V


[4/28/2023 1:26 PM] szybet
overcurrent kicked in imidiatielly


[4/28/2023 2:01 PM] szybet
i cant really locate anything that gets hot


[4/28/2023 2:01 PM] szybet
with alcohol


[4/28/2023 2:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/PICT0003-65A7B.jpg
/mnt/data/projects/git/conversations/media/PICT0004-54F76.jpg


[4/28/2023 2:44 PM] szybet
PMIC is dead


[4/28/2023 2:45 PM] szybet
gets hot in on spot at 500mA


[4/28/2023 2:45 PM] szybet
well those were capacitors


[4/28/2023 2:45 PM] szybet
@andi any reason for that? maybe a reflow would fix it? maybe something other killed it? ( so if i replace it, if i'am able to it will not kill it again? )


[4/28/2023 2:48 PM] szybet
Ricoh RC5T619?


[4/28/2023 2:52 PM] andi15701
yes, correct, but it might just get hot because of the short circuit somewhere alse


[4/28/2023 2:52 PM] szybet
good point


[4/28/2023 2:52 PM] szybet
well


[4/28/2023 2:52 PM] szybet
i couldn't find anything else


[4/28/2023 2:52 PM] szybet
and i hit those 3.3V, and it was 500Ma


[4/28/2023 2:53 PM] szybet
usb, battery connected too


[4/28/2023 2:53 PM] szybet
nothing


[4/28/2023 2:55 PM] andi15701
but if it has to be replaced, then probably best from another dead (because of other reasons) kobo


[4/28/2023 2:55 PM] szybet
why...


[4/28/2023 2:55 PM] andi15701
because of OTP stuff burned in


[4/28/2023 2:55 PM] szybet
wouldn't there be default stuff?


[4/28/2023 2:56 PM] szybet
i dont really care about usb


[4/28/2023 2:56 PM] szybet
we have wifi


[4/28/2023 2:56 PM] szybet
i only want it to work


[4/28/2023 2:57 PM] andi15701
This PMU supports five channels of general purpose input/output.
GPIO0,1,2,3,4 pins have the function selected by OTP as shown below.


[4/28/2023 2:57 PM] andi15701
from datasheet


[4/28/2023 2:58 PM] andi15701
e.g.


[4/28/2023 2:58 PM] andi15701
9 Flexible power-on/off sequence by OTP
9 Flexible DCDCx and LDOx default-on/off control by OTP


[4/28/2023 2:58 PM] andi15701
OTP= one time programming


[4/28/2023 2:58 PM] szybet
oh, i thought otp asusb otg


[4/28/2023 2:59 PM] szybet
crap


[4/28/2023 3:08 PM] szybet
if a coil, capacitor, resistor would make a short, it makes sense that the pmic gets hot, not the place that shorted - its just a bare wire


[4/28/2023 3:09 PM] szybet
well then i need to measure things


[4/28/2023 3:38 PM] szybet
i have this datasheet, and i dont see anything related to the overcurrent protection, other that its mentioned

{Attachments}
/mnt/data/projects/git/conversations/media/RC5T619-xxxx_Richo-1F27A.pdf


[4/28/2023 4:43 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20230428_164242-9C09A.mp4


[4/28/2023 4:44 PM] szybet
this is how my dreams burn


[4/28/2023 4:45 PM] szybet
and this is not how over current protection works...


[4/28/2023 4:47 PM] szybet
at 1,3V takes 900 mA


[4/28/2023 4:48 PM] szybet
this is the worst outcome... i could even try to replace the cpu, ram or anything


[4/28/2023 4:49 PM] szybet
this? needs to be programmed because it has a ROM


[4/28/2023 4:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9CDCF.png


[4/28/2023 4:49 PM] szybet
In theory, outputs 2000-3000mA on some outputs


[4/28/2023 4:49 PM] szybet
so maybe it would survive but just be hot


[4/28/2023 4:50 PM] szybet
and maybe another part is damaged


[4/28/2023 4:51 PM] szybet
so now the question is ( Andi ), should i let it burn, it will survive and look for other things damaged?


[4/28/2023 4:52 PM] szybet
because it's weird: on one side the current is stable, stops at 900mA, on the other there should be short circuit detection


[4/28/2023 4:54 PM] szybet
@tux-linux question for you, which aura is it?...


[4/28/2023 4:54 PM] andi15701
not sure, maybe tux-linux should beep his aura2 for capacitors connected to that power line


[4/28/2023 4:55 PM] andi15701
so you could just try to resolder them


[4/28/2023 4:55 PM] szybet
i can resolder everything


[4/28/2023 4:56 PM] szybet
also, you dont know which power line is it


[4/28/2023 4:56 PM] szybet
answer to this is also not sure?


[4/28/2023 4:57 PM] szybet
fucking BGA, can't measure things... Also i can't measure the coils resistance, because they are smd....


[4/28/2023 4:57 PM] andi15701
well, I am looking for some regulator dump


[4/28/2023 4:58 PM] andi15701
does current increase just at 1V that much


[4/28/2023 4:59 PM] andi15701
or is it also a short at lower voltages


[4/28/2023 4:59 PM] szybet
i cant go lower


[4/28/2023 4:59 PM] szybet
🥴


[4/28/2023 4:59 PM] szybet
maybe i could


[4/28/2023 4:59 PM] andi15701
beeping with ohmmeter


[4/28/2023 4:59 PM] andi15701
with power disconnected


[4/28/2023 4:59 PM] szybet
you mean short on the entire 3.3V line?


[4/28/2023 5:00 PM] andi15701
yes


[4/28/2023 5:00 PM] szybet
what would it mean if i checked it?


[4/28/2023 5:00 PM] andi15701
the question is whether we have some diode between 3.3V and the short


[4/28/2023 5:01 PM] andi15701
whatever nature that diode is


[4/28/2023 5:01 PM] szybet
well


[4/28/2023 5:02 PM] szybet
i can go and unsolder every component from this piece and take measurements


[4/28/2023 5:04 PM] andi15701
well, if it is some kind of "main" supply, then I would guess, it is a DCDC


[4/28/2023 5:05 PM] andi15701
so it would be connected to some of the bigger caps around the pmic


[4/28/2023 5:05 PM] szybet
you think a cap / diode died?


[4/28/2023 5:06 PM] andi15701
I thought about whiskers


[4/28/2023 5:06 PM] andi15701
but they should burn at around 20mA


[4/28/2023 5:06 PM] szybet
I hope the pmic didn't died - the only part i cant replace


[4/28/2023 5:06 PM] szybet
whiskers?...


[4/28/2023 5:07 PM] andi15701
there are hairs growing out of lead-free tin


[4/28/2023 5:07 PM] andi15701
sometimes creating a mess


[4/28/2023 5:07 PM] szybet
oh yea, i knew about it but not on this name


[4/28/2023 7:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B497D.png


[4/28/2023 7:50 PM] szybet
@tux-linux please answer what model this is, if its the same please send detailed pictured of the pcb, especially pmic space thanks


[4/28/2023 7:51 PM] szybet
8.9 KR


[4/28/2023 7:52 PM] szybet
and this is why i didn't checked it - its turned off, likely nothing will be there


[4/28/2023 7:54 PM] szybet
sometimes its 2 kR


[4/28/2023 8:16 PM] szybet
i see no other debugging solution that let it run at those 900 mA, give it a heatsink thermal paste and look for other things that burn


[4/28/2023 8:17 PM] szybet
prove me wrong if im wrong, maybe passive components can change to short circuit when used


[4/28/2023 8:18 PM] szybet
if the pmic isin't dead, it should protect itself from it, if it is dead, well then fuck


[4/28/2023 8:41 PM] ninuje
r2 w/ run_command cleanups (macros \o/).

{Attachments}
/mnt/data/projects/git/conversations/media/InkboxInit-Cleanup-r2-B3EA8.diff


[4/28/2023 11:03 PM] andi15701
well, ok, so no direct connection between that 3v3 (we have multiple 3v3 regulaors) I think


[4/28/2023 11:03 PM] szybet
propably


[4/28/2023 11:03 PM] szybet
any ideas?


[4/28/2023 11:04 PM] andi15701
what about disconnecting touchscreen, backlight


[4/28/2023 11:04 PM] andi15701
and display


[4/28/2023 11:05 PM] szybet
my list of i will try:
1. reflow / resolder
2. connect by power supply as the battery and see what happens at diffrent voltages
3.  try to run it at 900 mA, maybe it will survive ( last option please no :c )


[4/28/2023 11:05 PM] szybet
disconnected from the beggining


[4/28/2023 11:05 PM] szybet
i disconnected everything i could


[4/28/2023 11:05 PM] szybet
even the indicator diode...


[4/28/2023 11:06 PM] andi15701
probably we have some diode between that 3v3 and gnd, and that diode might be just some esd protection circuit


[4/28/2023 11:06 PM] szybet
w h e r eeeee


[4/28/2023 11:06 PM] andi15701
but no I have no better idea


[4/28/2023 11:07 PM] szybet
could the diode get hot?


[4/28/2023 11:07 PM] szybet
or does it not because its a clear short


[4/28/2023 11:07 PM] szybet
youtube teached me yes


[4/28/2023 11:07 PM] andi15701
esd protection circuit = something in most chips at inputs


[4/28/2023 11:07 PM] szybet
i know i know


[4/28/2023 11:08 PM] szybet
i designed a usb hub once


[4/28/2023 11:08 PM] andi15701
so if some input is at those 3v3


[4/28/2023 11:09 PM] andi15701
and the chip has another power supply which is shorted, the esd diode would be between that input and gnd


[4/28/2023 11:10 PM] szybet
so i can locate it?


[4/28/2023 11:13 PM] andi15701
probably


[4/28/2023 11:15 PM] szybet
well i couldn't locate anything


[4/28/2023 11:17 PM] szybet
actually is suplying 3.3V there a good idea? it maybe tryies to make the 3.3V at its own, so it gets hot, idk converters are complicated


[4/28/2023 11:19 PM] andi15701
usually the output goes back into the input through an internal diode


[4/28/2023 11:19 PM] andi15701
the input is vsys


[4/28/2023 11:20 PM] andi15701
and what I do not understand is: it does not draw power from anything


[4/28/2023 11:20 PM] andi15701
the whole device


[4/28/2023 11:20 PM] andi15701
not from usb


[4/28/2023 11:21 PM] andi15701
so, maybe the real problem sits at vsys


[4/28/2023 11:21 PM] szybet
pmic behaviour is confusing


[4/28/2023 11:21 PM] szybet
half damaged like


[4/28/2023 11:22 PM] szybet
battery?


[4/28/2023 11:22 PM] szybet
does the battery go directly into the pmic, only an external capacitor? i cant find any connections


[4/28/2023 11:22 PM] szybet
ok, 3 capacitors


[4/28/2023 11:23 PM] andi15701
vsys is some interim thing


[4/28/2023 11:24 PM] szybet
internal?


[4/28/2023 11:24 PM] andi15701
but with external capacitors


[4/28/2023 11:24 PM] andi15701
page 4 of the datasheet


[4/28/2023 11:25 PM] andi15701
so usb and battery go in, and first step is to make vsys out of them


[4/28/2023 11:25 PM] szybet
if i had a board view... i could even hack the vsys and supply my own voltage


[4/28/2023 11:25 PM] andi15701
you have it


[4/28/2023 11:26 PM] szybet
edited the message


[4/28/2023 11:27 PM] andi15701
vsys equal to vbat if no usb


[4/28/2023 11:27 PM] andi15701
but I think 4.something with USB


[4/28/2023 11:28 PM] andi15701
so it should be easily identificable


[4/28/2023 11:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F16F7.png


[4/28/2023 11:28 PM] szybet
where here is vsys?


[4/28/2023 11:28 PM] szybet
example application


[4/28/2023 11:29 PM] andi15701
Rsen1


[4/28/2023 11:29 PM] andi15701
covered by red line


[4/28/2023 11:29 PM] szybet
yes there


[4/28/2023 11:30 PM] szybet
this layout is a bit similar to the actual one


[4/28/2023 11:51 PM] szybet
fuck


[4/28/2023 11:51 PM] szybet
fuck


[4/28/2023 11:51 PM] szybet
fuck


[4/28/2023 11:51 PM] szybet
fuck


[4/28/2023 11:51 PM] szybet
thats it


[4/28/2023 11:51 PM] szybet
im sure ( propably )


[4/28/2023 11:51 PM] szybet
it makes this short even on vbat


[4/28/2023 11:52 PM] szybet
just after giving it voltage, not even turning it on


[4/28/2023 11:52 PM] szybet
it wasn't visible because of battery overcurrent protection


[4/28/2023 11:52 PM] andi15701
and where is the best short?


[4/28/2023 11:52 PM] szybet
best?


[4/28/2023 11:53 PM] andi15701
lowest resistance


[4/28/2023 11:53 PM] szybet
actually let memeasure battery


[4/28/2023 11:53 PM] szybet
i havent


[4/28/2023 11:53 PM] szybet
only 3.3


[4/28/2023 11:55 PM] szybet
100 KR and going even further


[4/28/2023 11:55 PM] szybet
to mOhm


[4/28/2023 11:55 PM] szybet
once it was 1K


[4/28/2023 11:56 PM] szybet
dirty measuerements


[4/28/2023 11:56 PM] szybet
memeasuararements


[4/28/2023 11:56 PM] szybet
xD


[4/28/2023 11:58 PM] andi15701
Kobo Aura 2


[4/28/2023 11:59 PM] andi15701
not Kobo Aura


[4/28/2023 11:59 PM] szybet
well thanks


[4/29/2023 12:00 AM] szybet
how the hell could this IC die in such a way


[4/29/2023 12:18 AM] szybet
plan B


[4/29/2023 12:18 AM] szybet
how many voltages would i need for cpu to run and eink?


[4/29/2023 12:19 AM] szybet
also is it even possible without completly the pmic?


[4/29/2023 12:19 AM] szybet
i know that usb for example goes away


[4/29/2023 1:39 AM] ninuje
Err, there's no Aura 2?


[4/29/2023 1:39 AM] ninuje
There's an Aura, an Aura HD, and (two) Aura Second Edition


[4/29/2023 1:39 AM] ninuje
Pick your poison 😉


[4/29/2023 1:39 AM] ninuje
(they all suck, the HD sucks the least)


[4/29/2023 1:40 AM] ninuje
Oh, and an Aura ONE


[4/29/2023 1:40 AM] ninuje
*sigh*


[4/29/2023 1:40 AM] ninuje
I've mercifully elided the Aura H2O and Aura H2O Second Edition


[4/29/2023 1:40 AM] ninuje
Because that's just trolling at that point 😉

{Reactions}
😄 

[4/29/2023 4:37 AM] tux_linux
ok will do soon


[4/29/2023 4:39 AM] tux_linux
https://discord.com/channels/809205711778480158/935603767284469830/935610796367568976


[4/29/2023 4:39 AM] tux_linux
you have one there meanwhile


[4/29/2023 4:40 AM] tux_linux
thanks


[4/29/2023 4:40 AM] tux_linux
it's the same pmic


[4/29/2023 4:41 AM] tux_linux
ricoh rc5t619


[4/29/2023 9:04 AM] andi15701
the ic might died of overvoltage


[4/29/2023 9:05 AM] andi15701
because somebody attached a not well-behaving QC charger to it (or maybe with two outputs in parallel)


[4/29/2023 9:06 AM] andi15701
so if higher voltage is negotiated on one, the other might get that also


[4/29/2023 9:48 AM] szybet
Doubt it


[4/29/2023 9:48 AM] szybet
But well


[4/29/2023 9:48 AM] szybet
Crap


[4/30/2023 11:35 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E8047.png


[4/30/2023 11:36 AM] szybet
its like that until i kill inkbox


[4/30/2023 12:24 PM] tux_linux
libinput for loop ? Idk, doesn't do it here I think


[4/30/2023 12:27 PM] szybet
wifi i think


[4/30/2023 12:27 PM] szybet
or some /run thing


[4/30/2023 12:27 PM] szybet
i will get to the inkbox code at some point and repair this


[4/30/2023 12:27 PM] szybet
just i hope i wont forgot


[4/30/2023 12:27 PM] szybet
add top the todo list


[4/30/2023 12:42 PM] tux_linux
Did you update all things on your device ?


[4/30/2023 12:42 PM] szybet
nope


[4/30/2023 12:42 PM] tux_linux
W e l l


[4/30/2023 12:42 PM] szybet
nope


[4/30/2023 12:42 PM] tux_linux
D o  I t


[4/30/2023 12:42 PM] szybet
~~nope~~


[4/30/2023 12:42 PM] tux_linux
Then I can't be responsible for this


[4/30/2023 12:43 PM] szybet
when will you have time for 2.0? we are on the finish


[4/30/2023 12:43 PM] szybet
add it to the todo


[4/30/2023 12:43 PM] tux_linux
I don't even have this problem


[4/30/2023 12:43 PM] tux_linux
How can I solve it


[4/30/2023 1:00 PM] szybet
add it to the todo for me so i won't forget


[4/30/2023 1:00 PM] szybet
.?...


[4/30/2023 1:09 PM] tux_linux
Done


[4/30/2023 1:09 PM] tux_linux
Maybe today


[4/30/2023 1:09 PM] tux_linux
I need to proof test init


[4/30/2023 1:09 PM] szybet
i mean testing testing testing


[4/30/2023 1:10 PM] tux_linux
Yes?


[4/30/2023 1:11 PM] szybet
is there anything for me to do?


[4/30/2023 1:11 PM] szybet
apart from this fix for cpu usage


[4/30/2023 1:11 PM] tux_linux
Test update system


[4/30/2023 1:11 PM] szybet
and testing


[4/30/2023 1:11 PM] szybet
okay well how


[4/30/2023 1:11 PM] tux_linux
Read the script


[4/30/2023 1:11 PM] szybet
do i really need to go into re...


[4/30/2023 1:12 PM] szybet
🥴


[4/30/2023 1:12 PM] szybet
well


[4/30/2023 1:12 PM] tux_linux
I will send you an update package tree later


[4/30/2023 1:12 PM] tux_linux
That way it might be easier to understand


[4/30/2023 1:12 PM] szybet
maybe a wiki article?


[4/30/2023 1:12 PM] szybet
:D


[4/30/2023 1:12 PM] tux_linux
You still remember how basic update packages were?


[4/30/2023 1:12 PM] tux_linux
Yes


[4/30/2023 1:12 PM] tux_linux
Soon


[4/30/2023 1:13 PM] szybet
i never updated the system using the updater


[4/30/2023 1:13 PM] szybet
always bare replacing files


[4/30/2023 1:13 PM] szybet
XD


[4/30/2023 1:13 PM] tux_linux
Well, it's basically that but in a monolithic squashfs


[4/30/2023 1:13 PM] szybet
okay


[4/30/2023 1:13 PM] tux_linux
You have packages, e.g. update.isa


[4/30/2023 1:14 PM] szybet
do you have any plans where to write about this release?


[4/30/2023 1:14 PM] szybet
like, advertisements


[4/30/2023 1:14 PM] tux_linux
Most of them have signatures in the form rootfs.squashfs.dgst
update.isa doesn't have them for compatibility reasons but the packages inside it do


[4/30/2023 1:14 PM] tux_linux
r/linux


[4/30/2023 1:14 PM] szybet
okay


[4/30/2023 1:14 PM] szybet
thats it?


[4/30/2023 1:14 PM] tux_linux
Look through entire commit history for one year


[4/30/2023 1:15 PM] tux_linux
Write changelog


[4/30/2023 1:15 PM] tux_linux
YouTube video?


[4/30/2023 1:15 PM] szybet
yea changelog would be cool


[4/30/2023 1:15 PM] szybet
i can record a yt video


[4/30/2023 1:15 PM] tux_linux
Like for 1.5


[4/30/2023 1:15 PM] szybet
and present sanki, feathernotes


[4/30/2023 1:15 PM] szybet
etc


[4/30/2023 1:15 PM] tux_linux
Well ok, maybe we should get bugs fixed before


[4/30/2023 1:15 PM] tux_linux
And testing too
Keep fun for the end


[4/30/2023 1:16 PM] szybet
I even 3d printed a phone stand to a desk lamp to record it


[4/30/2023 1:16 PM] szybet
well good


[4/30/2023 1:16 PM] szybet
i just hope you have time for this


[4/30/2023 1:16 PM] szybet
as for adds: mobilereads and https://www.youtube.com/@TheLinuxEXP


[4/30/2023 1:16 PM] szybet
i think he would like to talk about it


[5/1/2023 6:59 PM] ninuje
@tux-linux : Had a random lightbulb moment, remembered that init's job is to collect any and all processes that get orphaned (and, as such, reparented to it)


[5/1/2023 7:00 PM] ninuje
TL;DR: The coda of its main should *always* be `while(true) { wait(NULL); }` (and not a simple sleep forever)


[5/1/2023 7:01 PM] ninuje
c.f., https://git.busybox.net/busybox/tree/init/init.c#n1190 for a more complex example (because it also tracks its inittab stuff)


[5/1/2023 7:40 PM] tux_linux
oh ok
I did not encounter problems with sleep(-1) though


[5/1/2023 7:40 PM] tux_linux
thanks for noticing


[5/1/2023 7:41 PM] ninuje
There's no issue with sleep per se, it's just not doing what it should

{Reactions}
👍 

[5/1/2023 7:42 PM] ninuje
Which is collect orphaned zombies ;o)


[5/1/2023 7:44 PM] ninuje
c.f., https://stackoverflow.com/a/24346273

{Embed}
https://stackoverflow.com/a/24346273
Where do Zombie processes go after their parent dies?
A Zombie process is a process that has completed execution, but still has an entry in the process table (the parent hasn't read its exit code, or in other words, it hasn't been "reaped").  

An Orp...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[5/1/2023 7:44 PM] tux_linux
purgatory for processes? ;p


[5/1/2023 7:44 PM] ninuje
AFAIK, the fact that they're re-parented to init is "automatic" (or at least handled by the kernel); but the collection *definitely* needs to be handled in code by init


[5/1/2023 7:45 PM] tux_linux
ok thanks


[5/5/2023 11:36 PM] szybet
@tux-linux 
in `valid-devkey.sqsh`
is a file named `valid-key` and in it "true"

whaaat?


[5/6/2023 1:30 PM] tux_linux
Mounted at /opt/developer


[5/6/2023 1:31 PM] tux_linux
Then scripts can know if developer key is valid


[5/6/2023 1:31 PM] tux_linux
Instead of doing DD every time


[5/6/2023 1:46 PM] szybet
??


[5/6/2023 1:46 PM] szybet
what


[5/6/2023 1:47 PM] szybet
it already says true


[5/6/2023 1:47 PM] tux_linux
it's only mounted if it is valid


[5/6/2023 1:47 PM] szybet
:|


[5/6/2023 1:47 PM] szybet
do i need to say anything?


[5/6/2023 1:48 PM] tux_linux
you shouldn't bother?


[5/6/2023 1:48 PM] szybet
um yea


[5/6/2023 1:48 PM] szybet
but


[5/6/2023 1:48 PM] szybet
https://tenor.com/view/whyyyy-why-gif-19236077

{Embed}
https://tenor.com/view/whyyyy-why-gif-19236077
/mnt/data/projects/git/conversations/media/whyyyy-why-CD5C1.png


[5/6/2023 1:48 PM] tux_linux
because doing dd every time is maybe not the greatest option?


[5/6/2023 1:49 PM] szybet
whyyyy are you squash'ing a file containint "true"


[5/6/2023 1:50 PM] tux_linux
so that it is read-only


[5/6/2023 1:50 PM] szybet
everything in init is read only?


[5/6/2023 1:50 PM] szybet
its not a partition?


[5/6/2023 1:51 PM] tux_linux
no


[5/6/2023 1:51 PM] tux_linux
initrd runs in a tmpfs


[5/6/2023 1:51 PM] tux_linux
tmpfs created by kernel at boot


[5/6/2023 1:51 PM] tux_linux
where the initrd archive contents are extracted


[5/6/2023 1:52 PM] szybet
i still see no reason to do that in a squashfs


[5/6/2023 1:52 PM] tux_linux
it works


[5/6/2023 1:52 PM] szybet
https://tenor.com/view/100-gif-25731094

{Embed}
https://tenor.com/view/100-gif-25731094
/mnt/data/projects/git/conversations/media/100-69948.png


[5/7/2023 9:16 PM] szybet
https://github.com/Librum-Reader/Librum

{Embed}
https://github.com/Librum-Reader/Librum
GitHub - Librum-Reader/Librum: The Librum client application
The Librum client application. Contribute to Librum-Reader/Librum development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/Librum-F0665


[5/7/2023 9:20 PM] szybet
https://github.com/EXL/coolreader

{Embed}
https://github.com/EXL/coolreader
GitHub - EXL/coolreader: A fork of the Cool Reader program with var...
A fork of the Cool Reader program with various useful patches. - GitHub - EXL/coolreader: A fork of the Cool Reader program with various useful patches.
/mnt/data/projects/git/conversations/media/coolreader-9A135


[5/7/2023 11:07 PM] szybet
was just looking through software mutool alternatives^


[5/7/2023 11:07 PM] szybet
anyway


[5/7/2023 11:07 PM] szybet
https://productz.com/en/kobo-aura-edition-2/p/yb2p

{Embed}
https://productz.com/en/kobo-aura-edition-2/p/yb2p
Kobo Aura Edition 2 | ▤ Full Specifications & Reviews
Kobo Aura Edition 2 | ▤ Full Specifications: Operating system: Proprietary OS, Qwerty keyboard (buttons) : no, Qwerty keyboard (screen) : yes, Lighting: yes, Supported book file formats: EPUB, HTML, PDF, RTF, TXT, Supported image formats: BMP, GIF, JPEG/JPG, PNG, TIFF, Built-in memory: yes, Memory card reader: no,
/mnt/data/projects/git/conversations/media/kobo-aura-edition-2-2-preview-C0986.jpg


[5/7/2023 11:07 PM] szybet
https://www.google.com/search?q=kobo+nia+screen+resolution


[5/7/2023 11:08 PM] szybet
the same PPI, resolution, size... is it the same? The screen from kobo aura 2 and kobo nia?


[5/7/2023 11:08 PM] szybet
i might have a spare screen then?


[5/7/2023 11:51 PM] ninuje
The SE should be running a much older screen tech


[5/7/2023 11:51 PM] ninuje
But given the budget positioning of the Nia... who knows ;o)


[5/8/2023 12:11 AM] szybet
Any way to check?


[5/8/2023 12:11 AM] szybet
Version code, anything?


[5/8/2023 10:35 PM] ninuje
The waveform version string might have the tech rev encoded


[5/8/2023 10:36 PM] ninuje
Something along the lines of V2x0


[5/8/2023 10:36 PM] ninuje
V220 should be pretty common for early reagl screens, IIRC


[5/8/2023 10:36 PM] ninuje
or pre-reagl, can't recall


[5/8/2023 10:41 PM] szybet
okay, will check it out


[5/8/2023 10:42 PM] szybet
has anyone yet written a program to extract the waveform, read from it data?


[5/8/2023 10:43 PM] ninuje
there's wome wbf thingy somewehere


[5/8/2023 10:43 PM] ninuje
inkread, maybe?


[5/8/2023 10:44 PM] szybet
google talks chinese when googling


[5/8/2023 10:45 PM] ninuje
got the name wrong then, but can't remember it rn ;D


[5/8/2023 10:46 PM] ninuje
https://github.com/fread-ink

{Embed}
https://github.com/fread-ink
fread.ink
A free as in freedom GNU/Linux operating system for e-book readers - fread.ink
/mnt/data/projects/git/conversations/media/7940261-13556


[5/8/2023 10:49 PM] ninuje
The V stands for "Vizplex", the codename of the OG mass produced iteration


[5/8/2023 10:50 PM] szybet
https://github.com/fread-ink/inkwave

{Embed}
https://github.com/fread-ink/inkwave
GitHub - fread-ink/inkwave: Convert electronic paper display wavefo...
Convert electronic paper display waveforms from .wbf to .wrf format - GitHub - fread-ink/inkwave: Convert electronic paper display waveforms from .wbf to .wrf format
/mnt/data/projects/git/conversations/media/inkwave-888C9


[5/8/2023 10:50 PM] szybet
thanks


[5/8/2023 10:50 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/eink/mxcfb-kindle.h#LL234C1-L243C31

{Embed}
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/eink/mxcfb-kindle.h
FBInk/mxcfb-kindle.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · ...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/mxcfb-kindle.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-E5A14


[5/8/2023 10:56 PM] szybet
?


[5/8/2023 10:56 PM] ninuje
v320 is reagl


[5/8/2023 10:57 PM] ninuje
v400 the latest gen


[5/8/2023 10:57 PM] ninuje
carta in between, with a couple of iterations iirc


[5/8/2023 10:57 PM] ninuje
v220 should be pearl or something


[5/11/2023 1:55 PM] tux_linux
@NiLuJe i'm a bit lost in your patches, could you provide a complete one I could simply `git apply` to the repo in its actual state? thanks


[5/11/2023 1:55 PM] tux_linux
you can also submit it in #patches if you want


[5/11/2023 1:59 PM] szybet
you didn't tested the sketch app btw

{Reactions}
👍 

[5/11/2023 4:42 PM] tux_linux
Ok I think I'm going to be fine


[5/11/2023 4:42 PM] tux_linux
I found the v2 patch


[5/11/2023 9:18 PM] szybet
Here are 2 linux wizards, maybe you can help


[5/11/2023 9:18 PM] szybet
https://bbs.archlinux.org/viewtopic.php?id=285666


[5/11/2023 10:32 PM] tux_linux
```
build@inkbox ~/i/inkbox-os-init (main)> armv7l-linux-musleabihf-gcc init.c -o init -static -Wall -Wextra
init.c: In function ‘main’:
init.c:100:9: warning: unused variable ‘splash_pid’ [-Wunused-variable]
  100 |   pid_t splash_pid = RUN("/etc/init.d/inkbox-splash", "display_debug"); // FIXME: Kill and collect?
      |         ^~~~~~~~~~
init.c:258:13: error: ‘PIPE_BUF’ undeclared (first use in this function)
  258 |    char buf[PIPE_BUF]; // stdin should be line-buffered if it's a terminal, that should be more than large enough
      |             ^~~~~~~~
init.c:258:13: note: each undeclared identifier is reported only once for each function it appears in
init.c:258:9: warning: unused variable ‘buf’ [-Wunused-variable]
  258 |    char buf[PIPE_BUF]; // stdin should be line-buffered if it's a terminal, that should be more than large enough
      |         ^~~
init.c:444:11: warning: unused variable ‘splash_pid’ [-Wunused-variable]
  444 |     pid_t splash_pid = RUN("/etc/init.d/inkbox-splash", "update_splash"); // FIXME: Kill & collect?
      |           ^~~~~~~~~~
init.c:452:11: warning: unused variable ‘splash_pid’ [-Wunused-variable]
  452 |     pid_t splash_pid = RUN("/etc/init.d/inkbox-splash", "progress_bar_init"); // FIXME: Kill & collect?
      |           ^~~~~~~~~~
init.c:580:10: warning: unused variable ‘splash_pid’ [-Wunused-variable]
  580 |    pid_t splash_pid = RUN("/etc/init.d/inkbox-splash", "developer_splash"); // FIXME: Kill & collect?
      |          ^~~~~~~~~~
init.c: In function ‘copy_file’:
init.c:771:14: error: ‘PIPE_BUF’ undeclared (first use in this function)
  771 |  char buffer[PIPE_BUF];
      |              ^~~~~~~~
init.c:771:7: warning: unused variable ‘buffer’ [-Wunused-variable]
  771 |  char buffer[PIPE_BUF];
      |       ^~~~~~
build@inkbox ~/i/inkbox-os-init (main) [1]>
```
I got this error when compiling
Fixed it with `#define PIPE_BUF 4096` but still strange


[5/11/2023 11:05 PM] ninuje
Different TC, I would assume


[5/11/2023 11:05 PM] ninuje
stick a `<linux/limits.h>` include in there, that ought to do it

{Reactions}
👍 

[5/12/2023 8:02 PM] ninuje
Oh, yeah, musl, duh'


[5/12/2023 8:02 PM] ninuje
Makes sense that it wouldn't be pulling linux/ stuff automatically like a glibc one


[5/14/2023 2:02 PM] tux_linux
```
EXT4-fs (mmcblk0p1): mounted filesystem with ordered data mode. Opts: . Quota mode: disabled.
ext4 filesystem being mounted at /mnt supports timestamps until 2038 (0x7fffffff)

Linux inkbox #1 SMP Sun May 14 11:59:27 UTC 202 GNU/Linux
InkBox OS, kernel build tnutB2ZP, commit a5809a4

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
Illegal instruction
The system is going down NOW!
Sent SIGTERM to all processes
Sent SIGKILL to all processes
Requesting system poweroff
```
welp


[5/14/2023 2:05 PM] szybet
https://tenor.com/view/wait-thats-illegal-halo-meme-gif-14048618

{Embed}
https://tenor.com/view/wait-thats-illegal-halo-meme-gif-14048618
/mnt/data/projects/git/conversations/media/wait-thats-illegal-halo-AE6BD.png


[5/14/2023 2:05 PM] tux_linux
yes


[5/14/2023 2:05 PM] tux_linux
will get an strace


[5/14/2023 2:13 PM] tux_linux
I didn't successfully get an strace on my emulator but I ran it on my arm64 machine, should be enough to debug this error

{Attachments}
/mnt/data/projects/git/conversations/media/message-CAA57.txt


[5/14/2023 2:13 PM] tux_linux
these things look suspect

{Attachments}
/mnt/data/projects/git/conversations/media/image-67F04.png


[5/14/2023 2:14 PM] tux_linux
(it's right after the last working code line)


[5/14/2023 2:20 PM] tux_linux
... @NiLuJe ?


[5/14/2023 2:22 PM] szybet
can you show a bigger code range from it?


[5/14/2023 2:22 PM] tux_linux
?


[5/14/2023 2:23 PM] szybet
more coede above and below


[5/14/2023 2:53 PM] ninuje
Check that all of these are actually heap allocs to begin wuth


[5/14/2023 2:53 PM] ninuje
I might have switched some of them to stack


[5/14/2023 3:00 PM] tux_linux
doesn't seem like it


[5/14/2023 3:01 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/commit/f5b4fd4cca13d74c48dfa09e5248328a5ec49235
here you can view my (slight) changes

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/commit/f5b4fd4cca13d74c48dfa09e5248328a5ec49235
Changes by @NiLuJe · Kobo-InkBox/inkbox-os-init@f5b4fd4
Huge thanks, again...
WARNING: Currently being tested. May not work out-of-the-box.
/mnt/data/projects/git/conversations/media/f5b4fd4cca13d74c48dfa09e5248328a5ec49235-91F9B


[5/14/2023 3:02 PM] tux_linux
In my local build I also disabled exit on mount failure to actually debug what happened next


[5/14/2023 4:14 PM] ninuje
okay, yeah, i'm an idiot


[5/14/2023 4:14 PM] ninuje
My hunch was correct


[5/14/2023 4:14 PM] ninuje
kernel_version is a stack alloc


[5/14/2023 4:15 PM] tux_linux
Ok


[5/14/2023 4:15 PM] tux_linux
So how to solve it


[5/14/2023 4:15 PM] ninuje
```diff
diff --git a/init.c b/init.c
index deabfcb..d426878 100644
--- a/init.c
+++ b/init.c
@@ -166,8 +166,6 @@ int main(void) {
        kernel_git_commit = NULL;
        free(kernel_build_id);
        kernel_build_id = NULL;
-       free(kernel_version);
-       kernel_version = NULL;
 
        // Checking filesystems
        info("Checking filesystems ...", INFO_OK);
@@ -646,7 +644,7 @@ int main(void) {
        REAP("/bin/busybox", "chroot", "/mnt", "/sbin/getty", "-L", tty, "115200", "linux");
 
        while (true) {
-               sleep(-1U);
+               wait(NULL);
        }
 }
 
@@ -1019,7 +1017,7 @@ void setup_shell(void) {
        REAP("/sbin/getty", "-L", tty, "115200", "linux");
 
        while (true) {
-               sleep(-1U);
+               wait(NULL);
        }
 }
```


[5/14/2023 4:16 PM] tux_linux
Thanks


[5/14/2023 4:16 PM] ninuje
FWIW, when the libc tells you `double free or corruption`, it's usually right ;o)

{Reactions}
👍 

[5/14/2023 4:17 PM] ninuje
(And usually points to an actual in-code dealloc, be it free or delete in C++)


[5/14/2023 4:25 PM] tux_linux
Thanks boots fine now

{Reactions}
🎉 

[5/15/2023 1:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-6DD13.png


[5/15/2023 6:34 PM] szybet
https://doc.qt.io/qt-5/qtvirtualkeyboard-index.html


[5/15/2023 6:34 PM] szybet
WHY we don't use this


[5/15/2023 9:26 PM] szybet
```
 * DocBookXML4 (required version >= 4.5), DocBook XML 4, <http://www.oasis-open.org/docbook/xml/4.5>
   Required by the KDE help system to process DocBook XML
```


[5/15/2023 9:27 PM] szybet
how do i compile... this


[5/16/2023 1:44 AM] tux_linux
...you don't ? 😉


[5/16/2023 5:03 AM] tux_linux
how can you get time to look at things like that...


[5/16/2023 7:14 AM] szybet
Lol


[5/16/2023 7:14 AM] szybet
How xan you not have time


[5/16/2023 2:48 PM] szybet
um any ideas with that anyone

{Attachments}
/mnt/data/projects/git/conversations/media/message-50820.txt


[5/16/2023 2:48 PM] szybet
i compiled 30 out of 44 kde libraries for okular


[5/16/2023 2:48 PM] szybet
i̴͛̓m̷͌͗ ̸͖̔a̸͒͐l̷̚͝m̷͑͘ǒ̵͌ś̶͌t̸̮͌ ̶̭̄t̶͎̋h̴͠͠ĕ̵̋r̷̀̑e̴̯͝


[5/16/2023 2:48 PM] szybet
this one is ugh something is wrong


[5/16/2023 6:41 PM] ninuje
That's a BSD function, how the hell are you inside a BSD ifdef?


[5/16/2023 6:41 PM] szybet
exactly!


[5/16/2023 6:42 PM] szybet
https://tenor.com/view/sonic-dance-dancing-no-idea-sonic-movie-gif-15563744

{Embed}
https://tenor.com/view/sonic-dance-dancing-no-idea-sonic-movie-gif-15563744
/mnt/data/projects/git/conversations/media/sonic-dance-19D64.png


[5/16/2023 7:40 PM] szybet
ye that was that


[5/16/2023 7:40 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9211E.png


[5/16/2023 7:41 PM] szybet
cursed cmake kde repairing


[5/16/2023 8:54 PM] szybet
https://github.com/KDE/kjs/tree/kf5/src/wtf

{Embed}
https://github.com/KDE/kjs/tree/kf5/src/wtf
kjs/src/wtf at kf5 · KDE/kjs
KJS. Contribute to KDE/kjs development by creating an account on GitHub.


[5/16/2023 8:54 PM] szybet
:D


[5/16/2023 10:37 PM] szybet
```
/mnt/HDD/Project/Public/okulartry/kpty/src/kpty.cpp:231: undefined reference to `openpty'

```


[5/16/2023 10:37 PM] szybet
another one


[5/16/2023 10:37 PM] szybet
ugh


[5/16/2023 10:56 PM] szybet
i have this file


[5/16/2023 10:56 PM] szybet
```
/* Functions for pseudo TTY handling.
   Copyright (C) 1996, 1997, 1999 Free Software Foundation, Inc.
   This file is part of the GNU C Library.

   The GNU C Library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   The GNU C Library is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public
   License along with the GNU C Library; if not, write to the Free
   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
   02111-1307 USA.  */

#ifndef _PTY_H
#define _PTY_H    1

#include <features.h>

#include <termios.h>
#include <sys/ioctl.h>


__BEGIN_DECLS

/* Create pseudo tty master slave pair with NAME and set terminal
   attributes according to TERMP and WINP and return handles for both
   ends in AMASTER and ASLAVE.  */
extern int openpty (int *__amaster, int *__aslave, char *__name,
            const struct termios *__termp,
            const struct winsize *__winp) __THROW;

/* Create child process and establish the slave pseudo terminal as the
   child's controlling terminal.  */
extern int forkpty (int *__amaster, char *__name,
            const struct termios *__termp,
            const struct winsize *__winp) __THROW;

__END_DECLS

#endif    /* pty.h */
```


[5/16/2023 10:57 PM] szybet
and thats all from pty*


[5/16/2023 10:57 PM] szybet
its extern, thats bad


[5/17/2023 12:12 AM] ninuje
man openpty


[5/17/2023 12:12 AM] ninuje
It's in libutil, not the libc


[5/17/2023 12:12 AM] ninuje
20$ says you're not linking against libutil because CMake


[5/17/2023 7:07 AM] szybet
Yeah cool where do i get libutil


[5/17/2023 7:09 AM] szybet
https://tenor.com/view/where-is-the-tip-stackchain-stackchaintip-pulp-fiction-lost-gif-26278086

{Embed}
https://tenor.com/view/where-is-the-tip-stackchain-stackchaintip-pulp-fiction-lost-gif-26278086
/mnt/data/projects/git/conversations/media/where-is-the-tip-stackchain-3B85C.png


[5/17/2023 8:39 AM] szybet
util-linux?


[5/17/2023 8:39 AM] szybet
```
% find . | grep libutil
find: ‘./etc/polkit-1/rules.d’: Permission denied
./usr/lib/libutil.a
./usr/lib/libutil.so
./lib/libutil-2.15.so
./lib/libutil.so.1
8:38 szybet@hyperbookszyb /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot
% 
```


[5/17/2023 8:39 AM] szybet
in theory i have it


[5/17/2023 8:39 AM] szybet
but no headers?


[5/17/2023 8:39 AM] szybet
```
% find . | grep util.h 
find: ‘./etc/polkit-1/rules.d’: Permission denied
./usr/include/zutil.h
./usr/include/libqalculate/util.h
./usr/include/QtWidgets/qdrawutil.h
./usr/include/unicode/locutil.h
./usr/include/unicode/putil.h
./usr/include/unicode/bytesinkutil.h
./usr/include/unicode/util.h
./usr/include/curl/tool_util.h
./usr/local/include/unicode/putil.h
./include/zutil.h
./include/pam_modutil.h
./include/security/pam_modutil.h
./include/libqalculate/util.h
./include/QtWidgets/qdrawutil.h
./include/unicode/locutil.h
./include/unicode/putil.h
./include/unicode/bytesinkutil.h
./include/unicode/util.h
./include/curl/tool_util.h
./include/include/zutil.h
./include/include/libqalculate/util.h
./include/include/QtWidgets/qdrawutil.h
./include/include/unicode/locutil.h
./include/include/unicode/putil.h
./include/include/unicode/bytesinkutil.h
./include/include/unicode/util.h
./include/include/curl/tool_util.h
./home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/include/pam_modutil.h
8:39 szybet@hyperbookszyb /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot
% 

```


[5/17/2023 2:09 PM] tux_linux
/include/include


[5/17/2023 2:09 PM] tux_linux
s t r a n g e


[5/17/2023 2:09 PM] tux_linux
hint: `C_INCLUDE_PATH` is your friend


[5/17/2023 2:09 PM] szybet
dont even freacking ask


[5/17/2023 2:09 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-CF66A.txt


[5/17/2023 2:09 PM] szybet
the last boss


[5/17/2023 2:09 PM] tux_linux
oh noo


[5/17/2023 2:09 PM] szybet
okular compiled up to 95%


[5/17/2023 2:10 PM] szybet
i can always shift versions


[5/17/2023 2:10 PM] szybet
but this is the latest release


[5/17/2023 2:10 PM] szybet
https://tenor.com/view/pokemon-no-nope-mad-pikachu-gif-17858170

{Embed}
https://tenor.com/view/pokemon-no-nope-mad-pikachu-gif-17858170
/mnt/data/projects/git/conversations/media/pokemon-no-2D29E.png


[5/17/2023 2:10 PM] tux_linux
@NiLuJe  please


[5/17/2023 2:10 PM] tux_linux
ok


[5/17/2023 2:10 PM] szybet
i simply cp -r those include dirs


[5/17/2023 2:11 PM] szybet
all to one place


[5/17/2023 2:11 PM] tux_linux
hmm


[5/17/2023 2:11 PM] szybet
one lib looks to /usr, one to / one to /usr/local/


[5/17/2023 2:11 PM] szybet
etc


[5/17/2023 2:11 PM] szybet
madness


[5/17/2023 2:17 PM] szybet
`-fPIC` doesnt make any diffrence


[5/17/2023 2:17 PM] szybet
at least when i try with `set( CMAKE_CXX_FLAGS " -pthread -fPIC " )`


[5/17/2023 2:19 PM] szybet
https://stackoverflow.com/questions/43487520/how-to-fix-a-local-symbol-can-not-be-used-when-making-a-shared-object-error

{Embed}
https://stackoverflow.com/questions/43487520/how-to-fix-a-local-symbol-can-not-be-used-when-making-a-shared-object-error
how to fix a local symbol' can not be used when making a shared obj...
My compilation of c source files  failed with the following error:
  libservices.a(protocol.o): relocation R_ARM_MOVW_ABS_NC against `a local symbol' can not be used when making a shared object;
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[5/17/2023 2:22 PM] szybet
maybe its because libmarkdown


[5/17/2023 2:34 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-AB9B4.png


[5/17/2023 2:35 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[5/17/2023 2:35 PM] szybet
~~with only jpeg support for now but hey~~


[5/17/2023 2:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-81DD8.txt


[5/17/2023 2:37 PM] szybet
this


[5/17/2023 2:37 PM] szybet
most important


[5/17/2023 2:38 PM] szybet
```
% ls /mnt/HDD/Project/Public/okulartry/                   
brotli        docbook.cat            htmltblx.mod    libexpat                   meson-kobo.txt
build         docbookx.dtd           ijg             libgcrypt                  okular
bzip2         dockbookshit           kconfigwidgets  libgpg-error-1.47          okular-things
calstblx.dtd  duck                   kcoreaddons     libgpg-error-1.47.tar.bz2  phonon
catalog.xml   ent                    kdesrc-build    libkexiv2                  polkit
ChangeLog     exiv2                  kdoctools       libpng                     README
dbcentx.mod   extra-cmake-modules    kinit           libsocket                  soextblx.dtd
dbgenent.mod  freetype               kio             libtirpc                   solid
dbhierx.mod   fuckingpam             kjs             libtirpc-1.3.3             util-linux
dbnotnx.mod   gif                    kobo.cmake      libtirpc-1.3.3.tar.bz2     zstd
dbpoolx.mod   glib                   kpty            libxslt
discount      gobject-introspection  kwindowsystem   linux-pam
```
and like apart from these, 40 other kde libraries... like arround 65~ i would say


[5/17/2023 2:39 PM] szybet
https://tenor.com/view/everythings-fine-im-fine-im-fine-not-really-its-fine-gif-14050669

{Embed}
https://tenor.com/view/everythings-fine-im-fine-im-fine-not-really-its-fine-gif-14050669
/mnt/data/projects/git/conversations/media/everythings-fine-im-fine-A89E0.png


[5/17/2023 7:26 PM] szybet
Okular libs are 600 Mv


[5/17/2023 7:26 PM] szybet
Mb


[5/17/2023 7:26 PM] szybet
debug build, not stripped, and some other crap but yea


[5/17/2023 7:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230517_195257-9D795.png


[5/17/2023 8:21 PM] ninuje
No, it's part of the glibc, it's just not in the libc library (much like libm, librt, libpthread...)


[5/17/2023 8:21 PM] szybet
i just tossed out the code related to this


[5/17/2023 8:22 PM] szybet
MAYBE in util-linux is something related to that


[5/17/2023 8:22 PM] ninuje
Nope.


[5/17/2023 8:22 PM] ninuje
Besides something using it, I mean ;o)


[5/17/2023 8:22 PM] szybet
well then


[5/17/2023 8:22 PM] szybet
i hope its not something important


[5/17/2023 8:22 PM] ninuje
I can't quite fathom wtf okular would do with a pty, yeah


[5/17/2023 8:23 PM] szybet
random libraries shit include go


[5/17/2023 9:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230517_211451-031AF.jpg


[5/17/2023 9:15 PM] szybet
okular works


[5/17/2023 9:15 PM] szybet
what now @tux-linux


[5/17/2023 10:22 PM] szybet
it segment faults on txt files, other file types make 100% cpu usage... help?

{Attachments}
/mnt/data/projects/git/conversations/media/strace_okular-6E217.txt


[5/17/2023 10:30 PM] szybet
```
openat(AT_FDCWD, "//kf5/purpose", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_CLOEXEC|O_DIRECTORY) = -1 ENOENT (No such file or directory)
openat(AT_FDCWD, "/plugins/kf5/purpose", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_CLOEXEC|O_DIRECTORY) = 10
```
oh fuck really


[5/17/2023 10:30 PM] szybet
@NiLuJe what now🥴


[5/17/2023 10:30 PM] szybet
is it related to `openpty`? sounds like it


[5/17/2023 10:49 PM] szybet
other file type, not so important because i maybe dont support all image types

{Attachments}
/mnt/data/projects/git/conversations/media/message-6FC26.txt


[5/17/2023 10:55 PM] szybet
+ this log: `Numeric mode unsupported in the posix collation implementation`


[5/17/2023 11:18 PM] ninuje
the final warning is from broken locales


[5/17/2023 11:19 PM] szybet
broken loccals = no file can be opened?


[5/17/2023 11:19 PM] szybet
the gui works


[5/17/2023 11:20 PM] ninuje
Get an actual gdb backtrace


[5/17/2023 11:22 PM] szybet
from where can i get the gdb binary


[5/17/2023 11:22 PM] ninuje
Depends on whether you're insane and want to do remote debugging or on-device debugging


[5/17/2023 11:23 PM] szybet
on device


[5/17/2023 11:23 PM] ninuje
Then alpine's gdb shgould do


[5/17/2023 11:23 PM] szybet
sounds easier?


[5/17/2023 11:23 PM] ninuje
(it is ;p)


[5/17/2023 11:23 PM] szybet
qt is in buildroot


[5/17/2023 11:23 PM] szybet
alpine is in musl


[5/17/2023 11:23 PM] szybet
idk if it will work


[5/17/2023 11:23 PM] ninuje
I don't even know if you can sanely build gdb against musl, but it should be mostly irrelevant


[5/17/2023 11:24 PM] ninuje
use BR's gdb if you feel better about that


[5/17/2023 11:24 PM] ninuje
(Plus, I can actually vouch for it not being completely broken)


[5/17/2023 11:24 PM] szybet
yes, from where do i get it :D


[5/17/2023 11:24 PM] ninuje
**build**root


[5/17/2023 11:24 PM] ninuje
;o)


[5/17/2023 11:24 PM] szybet
noooooooooo


[5/17/2023 11:25 PM] ninuje
Your TC might already have one built, depending on how it was built


[5/17/2023 11:25 PM] ninuje
So ct-ng is also an option, although I don't recall personally ever doing it that way; I tend to build gdb manually after the fact


[5/17/2023 11:26 PM] ninuje
You'll also need your full stack built with debug symbols and unstripped (or debug symbols stripped to dedicated files, like real distros)


[5/17/2023 11:26 PM] ninuje
Otherwise the backtrace won't be terribly helpful


[5/17/2023 11:27 PM] ninuje
(And downright completely useless on stripped binaries)


[5/17/2023 11:27 PM] szybet
i have done this because im stupid


[5/17/2023 11:27 PM] szybet
and didn't checked


[5/17/2023 11:27 PM] szybet
and thats the default for kde qt things at least


[5/17/2023 11:27 PM] ninuje
Yeah, CMake defaults to Debug, IIRC


[5/18/2023 12:44 AM] szybet
```
Reading symbols from /okular...Dwarf Error: wrong version in compilation unit header (is 5, should be 2, 3, or 4) [in module /okular]
(no debugging symbols found)...done.
(gdb) 
(gdb) run
Starting program: /okular 
Program received signal SIGILL, Illegal instruction.
0x76fe7a68 in ?? () from /lib/ld-linux-armhf.so.3

```
well... tommorow


[5/18/2023 12:55 AM] ninuje
gdb too old

{Reactions}
👍 

[5/18/2023 12:56 AM] ninuje
needs DWARF 5 support


[5/18/2023 12:56 AM] ninuje
Which is already old-ish


[5/18/2023 12:56 AM] ninuje
can't recall when it was implemented (in either gcc or gdb, for that matter :D)


[5/18/2023 12:57 AM] ninuje
gdb >= 10.1


[5/18/2023 1:00 AM] ninuje
Might even require 10.2, but at that point just jump to a current release ;p


[5/18/2023 1:14 AM] tux_linux
well ok


[5/18/2023 1:14 AM] tux_linux
can it read epubs


[5/18/2023 2:03 AM] ninuje
(it can, via mupdf, IIRC)

{Reactions}
👍 

[5/18/2023 7:31 AM] szybet
No yet


[5/18/2023 7:31 AM] szybet
Not


[5/18/2023 5:37 PM] szybet
```
kobo:/# LD_LIBRARY_PATH="/lib:/mnt/okular/okular_things/lib/" QT_QPA_PLATFORM=kobo QT_FONT_DPI=120 QT_LOGGING_RULES=qt.qpa.*=tr
ue LC_COLLATE=en_US.UTF-8 /gdb ./okular
GNU gdb (GDB) 14.0.50.20230518-git
Copyright (C) 2023 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "arm-linux-gnueabihf".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from ./okular...
(gdb) run
Starting program: /okular 
Killed
```


[5/18/2023 5:38 PM] szybet
its hard to compile working gdb...


[5/18/2023 5:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-99E78.png


[5/18/2023 5:44 PM] szybet
oh... it runs out of memory...


[5/18/2023 6:50 PM] szybet
```
bin/okular: ELF 32-bit LSB executable, ARM, EABI5 version 1 (GNU/Linux), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, for GNU/Linux 2.6.33, with debug_info, not stripped
```


[5/18/2023 6:54 PM] szybet
```
% arm-none-eabi-gdb                
GNU gdb (GDB) 13.1
Copyright (C) 2023 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "--host=x86_64-pc-linux-gnu --target=arm-none-eabi".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word".
(gdb) 
(gdb) target remote 10.42.0.28:4444
Remote debugging using 10.42.0.28:4444
Reading /mnt/okular/okular_things/bin/okular from remote target...
warning: File transfers from remote targets can be slow. Use "set sysroot" to access files locally instead.
warning: A handler for the OS ABI "GNU/Linux" is not built into this configuration
of GDB.  Attempting to continue with the default armv7 settings.

Reading /mnt/okular/okular_things/bin/okular from remote target...
warning: A handler for the OS ABI "GNU/Linux" is not built into this configuration
of GDB.  Attempting to continue with the default armv7 settings.

Reading symbols from target:/mnt/okular/okular_things/bin/okular...
0x76fd7b00 in ?? ()
(gdb) 
(gdb) continue
Continuing.
[Detaching after fork from child process 5219]
[Detaching after fork from child process 5222]
[New Thread 5218.5225]
[New Thread 5218.5226]
[New Thread 5218.5228]

Thread 1 "okular" received signal SIGSEGV, Segmentation fault.
0x758baf60 in ?? ()
(gdb) bt
#0  0x758baf60 in ?? ()
#1  0x758bb6e8 in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)
```


[5/18/2023 6:54 PM] szybet
i'm not able to...


[5/18/2023 7:35 PM] ninuje
Err, `target=arm-none-eabi`


[5/18/2023 7:35 PM] ninuje
This is a baremetal target, not a Linux one


[5/18/2023 8:02 PM] szybet
well aur to the rescue
```
0x758baf60 in QDBusAbstractInterface::callWithArgumentList(QDBus::CallMode, QString const&, QList<QVariant> const&) () from target:/mnt/okular/okular_things/lib/libQt5DBus.so.5
```


[5/18/2023 8:02 PM] szybet
https://tenor.com/view/oopsies-ohno-gif-25793283

{Embed}
https://tenor.com/view/oopsies-ohno-gif-25793283
/mnt/data/projects/git/conversations/media/oopsies-ohno-9C8DD.png


[5/18/2023 8:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-DA968.txt


[5/18/2023 11:42 PM] tux_linux
at this point a reader that takes more than 150m of RAM is probably not a good idea


[5/18/2023 11:43 PM] tux_linux
nice that you got it working anyway


[5/18/2023 11:46 PM] szybet
it was because of gdb


[5/18/2023 11:46 PM] tux_linux
oh


[5/18/2023 11:46 PM] tux_linux
ok


[5/18/2023 11:46 PM] tux_linux
well then good I guess


[5/18/2023 11:46 PM] szybet
but i will see, it open a small txt file now but not a big one


[5/18/2023 11:46 PM] szybet
i needed dbus btw


[5/18/2023 11:46 PM] tux_linux
n i c e


[5/18/2023 11:46 PM] szybet
how do i do that cmake sets release build?


[5/18/2023 11:47 PM] szybet
it never changes this:
```
bin/okular: ELF 32-bit LSB executable, ARM, EABI5 version 1 (GNU/Linux), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, for GNU/Linux 2.6.33, with debug_info, not stripped
```


[5/18/2023 11:47 PM] tux_linux
🥴


[5/18/2023 11:47 PM] tux_linux
well


[5/18/2023 11:47 PM] tux_linux
just strip it?


[5/18/2023 11:47 PM] szybet
but it will be not optimised


[5/18/2023 11:47 PM] szybet
i need speed


[5/18/2023 11:47 PM] tux_linux
it's better than nothing


[5/18/2023 11:47 PM] tux_linux
i guess


[5/18/2023 11:52 PM] tux_linux
gcc -Ox ?


[5/18/2023 11:52 PM] tux_linux
x -> 0,1,2,3?


[5/18/2023 11:53 PM] szybet
well `file` is dumb


[5/18/2023 11:53 PM] szybet
will it do anything


[5/18/2023 11:53 PM] szybet
for real


[5/18/2023 11:54 PM] tux_linux
read gentoo guide on it


[5/18/2023 11:54 PM] tux_linux
https://wiki.gentoo.org/wiki/GCC_optimization

{Embed}
https://wiki.gentoo.org/wiki/GCC_optimization
GCC optimization


[5/18/2023 11:54 PM] tux_linux
but then you should compile it on kobo


[5/18/2023 11:54 PM] szybet
i have spend 4 days compiling 70 libraries for this so please tell me if its worth it


[5/18/2023 11:54 PM] tux_linux
ideally


[5/18/2023 11:54 PM] szybet
XD


[5/18/2023 11:55 PM] tux_linux
`-march=native`


[5/18/2023 11:56 PM] tux_linux
did you compile it with glibc or musl


[5/18/2023 11:56 PM] szybet
a 300Kb text file won't open, cpu is at 100%


[5/18/2023 11:56 PM] szybet
glibc, im not that insane


[5/18/2023 11:56 PM] tux_linux
welp


[5/18/2023 11:56 PM] tux_linux
ok
which one


[5/18/2023 11:56 PM] tux_linux
recent glibc?


[5/18/2023 11:56 PM] szybet
compiled-binaries repo


[5/18/2023 11:56 PM] tux_linux
ok so should work with 2.6.35.3 kernels


[5/18/2023 11:56 PM] tux_linux
i wonder how you even got it to work


[5/18/2023 11:56 PM] szybet
its the latest okular release


[5/18/2023 11:56 PM] tux_linux
did you have to compile whole kde qt along with it?


[5/18/2023 11:57 PM] szybet
nope, just changes to the qt


[5/18/2023 11:57 PM] szybet
like print dialog and dbus


[5/18/2023 11:57 PM] tux_linux
interesting


[5/18/2023 11:57 PM] szybet
pain?


[5/18/2023 11:57 PM] tux_linux
well maybe make a userapp


[5/18/2023 11:57 PM] tux_linux
if it's usable with epubs


[5/18/2023 11:57 PM] tux_linux
and pdfs


[5/18/2023 11:57 PM] szybet
txt file won't open...


[5/18/2023 11:57 PM] tux_linux
how often do you read txt files on an ereader


[5/18/2023 11:58 PM] szybet
to test if epubs will even open


[5/18/2023 11:58 PM] tux_linux
oh ok well test it then


[5/18/2023 11:58 PM] tux_linux
pdf performance is good?


[5/18/2023 11:58 PM] szybet
dont have it included


[5/18/2023 11:58 PM] szybet
but still


[5/18/2023 11:58 PM] szybet
something is wrong


[5/18/2023 11:58 PM] tux_linux
you can't read pdfs?


[5/18/2023 11:58 PM] szybet
maybe it depends on xorg too much and i throwed it away


[5/18/2023 11:59 PM] szybet
qml / quick qt apps can work natively on kobo?


[5/18/2023 11:59 PM] tux_linux
they need some libs


[5/18/2023 11:59 PM] tux_linux
but I think I got one to run once


[5/18/2023 11:59 PM] tux_linux
it was missing some qml-specific libs
but it started fine and showed an error message with missing libs


[5/18/2023 11:59 PM] tux_linux
shouldn't be too hard to compile


[5/19/2023 12:00 AM] tux_linux
***hmmmmmmm***


[5/19/2023 12:00 AM] szybet
the mobile build of okular doesnt use x11 but uses qml


[5/19/2023 12:01 AM] szybet
maybe.


[5/19/2023 12:03 AM] tux_linux
ok so what left to do for 2.0


[5/19/2023 12:03 AM] tux_linux
init is almost done and working


[5/19/2023 12:03 AM] tux_linux
maybe some small fixes for developer key missing


[5/19/2023 12:04 AM] tux_linux
xorg keyboard has been fixed


[5/19/2023 12:04 AM] szybet
you


[5/19/2023 12:04 AM] szybet
the gui is so responsive in okular


[5/19/2023 12:04 AM] tux_linux
oh I need to test sketch app


[5/19/2023 12:04 AM] szybet
looking, zooming pngs works great


[5/19/2023 12:04 AM] tux_linux
good


[5/19/2023 12:04 AM] tux_linux
could use framework for 2.1


[5/19/2023 12:05 AM] szybet
just please start to work dumb txt files


[5/19/2023 12:05 AM] szybet
?


[5/19/2023 12:05 AM] tux_linux
could use okular framework


[5/19/2023 12:05 AM] tux_linux
maybe there's a way to integrate it in the existing gui


[5/19/2023 12:05 AM] szybet
either im writing my own either im using modified okular, nothing in between


[5/19/2023 12:05 AM] szybet
first time in my life i needed to use gdb


[5/19/2023 12:06 AM] szybet
libraries took 5 days to compile


[5/19/2023 12:06 AM] szybet
dsanfuneiuoawnfui


[5/19/2023 12:06 AM] tux_linux
last time I used it it was this summer for debugging local library
it hung so really wasn't very useful IIRC


[5/19/2023 12:06 AM] tux_linux
nice
like
literally


[5/19/2023 12:06 AM] tux_linux
or you did one library by one and it took 5 days


[5/19/2023 12:06 AM] tux_linux
do you have a repo with your changes/guide


[5/19/2023 12:07 AM] szybet
most of them, yes, niaudio there


[5/19/2023 12:07 AM] tux_linux
ok


[5/19/2023 12:07 AM] szybet
almost every one needed tweaking cmake, looking through source code to disable ifdefs, iterating through git versions


[5/19/2023 12:07 AM] tux_linux
ouch


[5/19/2023 12:08 AM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/11d55cb8dfa976c7460c91cc21ada66d20f261d2
reminds me of this

{Embed}
https://github.com/Kobo-InkBox/kernel/commit/11d55cb8dfa976c7460c91cc21ada66d20f261d2
KT: Implement ppoll syscall; initrd fixes · Kobo-InkBox/kernel@11d5...
The former was done following this commit: https://github.com/torvalds/linux/commit/369842658a36bcea28ecb643ba4bdb53919330dd
/mnt/data/projects/git/conversations/media/11d55cb8dfa976c7460c91cc21ada66d20f261d2-29695


[5/19/2023 12:08 AM] tux_linux
backporting ppoll syscall from newer kernel versions
github commits list scrolling mess


[5/19/2023 12:08 AM] szybet
¯\_(ツ)_/¯


[5/19/2023 12:09 AM] tux_linux
at least it works


[5/19/2023 12:09 AM] tux_linux
ok so tonight I test the sketch app


[5/19/2023 12:09 AM] tux_linux
tomorrow is init work
and fbdepth on ipd


[5/19/2023 12:10 AM] szybet
we forgot


[5/19/2023 12:10 AM] szybet
performance issue on the nia


[5/19/2023 12:10 AM] szybet
i will do it


[5/19/2023 12:10 AM] szybet
but


[5/19/2023 12:10 AM] szybet
we cant forget


[5/19/2023 12:10 AM] tux_linux
saturday is making all images
sunday is release day


[5/19/2023 12:10 AM] tux_linux
did you see if it was because of blank


[5/19/2023 12:10 AM] szybet
noooo


[5/19/2023 12:10 AM] szybet
it was way before


[5/19/2023 12:10 AM] szybet
something with /run or /var?


[5/19/2023 12:11 AM] tux_linux
1. did you clean your rootfs cache


[5/19/2023 12:11 AM] tux_linux
2. do you have a clean system


[5/19/2023 12:11 AM] tux_linux
does it still happen


[5/19/2023 12:11 AM] szybet
no no yes


[5/19/2023 12:11 AM] szybet
hehe


[5/19/2023 12:11 AM] tux_linux
answer yes to the first two questions and if the third one is still yes debug it


[5/19/2023 12:12 AM] tux_linux
will save you time probably


[5/19/2023 12:12 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/fucking_thinkg-EBB1F.txt


[5/19/2023 12:12 AM] szybet
strace of not loading file


[5/19/2023 12:13 AM] tux_linux
which file


[5/19/2023 12:14 AM] szybet
300 Kb


[5/19/2023 12:14 AM] tux_linux
memory leak?


[5/19/2023 12:14 AM] tux_linux
can you see if eats too much ram?


[5/19/2023 12:14 AM] szybet
it doesnt


[5/19/2023 12:14 AM] szybet
just cpu


[5/19/2023 12:14 AM] tux_linux
ok


[5/19/2023 12:14 AM] tux_linux
strange


[5/19/2023 12:14 AM] tux_linux
it works with 200kb file?


[5/19/2023 12:15 AM] szybet
140 Kb takes already 30s i dont test more

{Reactions}
🥴 

[5/19/2023 12:15 AM] szybet
will try less


[5/19/2023 12:16 AM] tux_linux
maybe ask the devs


[5/19/2023 12:16 AM] tux_linux
might be a problem they're unable to see with ultra-fast 5ghz 64-core cpus


[5/19/2023 12:16 AM] tux_linux
or just try to learn more about the backend


[5/19/2023 12:16 AM] szybet
im talking to myself on the matrix okular channel


[5/19/2023 12:16 AM] szybet
-_-


[5/19/2023 12:16 AM] tux_linux
oh...


[5/19/2023 12:16 AM] tux_linux
great


[5/19/2023 12:16 AM] tux_linux
maybe a mailing list?


[5/19/2023 12:17 AM] szybet
not really helpfull, gived some ideas, but ugh


[5/19/2023 12:17 AM] szybet
i will ask some more


[5/19/2023 12:17 AM] tux_linux
https://mail.kde.org/mailman/listinfo/okular-devel


[5/19/2023 12:17 AM] szybet
35Kb works


[5/19/2023 12:17 AM] tux_linux
in 10 sec?


[5/19/2023 12:18 AM] szybet
15~


[5/19/2023 12:18 AM] szybet
but it loads preview


[5/19/2023 12:18 AM] szybet
and it scrolls


[5/19/2023 12:18 AM] szybet
my god buetifull


[5/19/2023 12:18 AM] szybet
butifull


[5/19/2023 12:18 AM] szybet
works great


[5/19/2023 12:18 AM] szybet
even if the devs will hunt me down i will release the user apps for txt files under 35Kb


[5/19/2023 12:19 AM] szybet
zooming is great


[5/19/2023 12:19 AM] tux_linux
beautiful


[5/19/2023 12:19 AM] szybet
😍


[5/19/2023 12:19 AM] tux_linux
hmm


[5/19/2023 12:19 AM] tux_linux
did you compile it with eabi or eabihf


[5/19/2023 12:19 AM] szybet
hf?...


[5/19/2023 12:20 AM] tux_linux
ok


[5/19/2023 12:20 AM] tux_linux
with eabi it emulates floating-point calculations, so it's slower (so it's called soft-float)
probably wouldn't have made any difference but just wanted to check


[5/19/2023 12:22 AM] tux_linux
hf is hard-float


[5/19/2023 12:22 AM] tux_linux
maybe you know that already


[5/19/2023 12:23 AM] szybet
i forgot about it, i knew it before

{Reactions}
👍 

[5/19/2023 12:31 AM] tux_linux
sometimes bins are slower when unstripped


[5/19/2023 12:31 AM] tux_linux
i think


[5/19/2023 12:31 AM] tux_linux
maybe make a backup and strip libs and bins


[5/19/2023 12:31 AM] szybet
its not unstripped but weights 300Kb not 3.3Mb ( okular binary )


[5/19/2023 12:32 AM] tux_linux
sometimes the debug build also creates bugs (i.e. in inkbox)


[5/19/2023 12:32 AM] kuratius
this isn't related to stripping it's some other compiler option I think


[5/19/2023 12:32 AM] tux_linux
yea


[5/19/2023 12:33 AM] kuratius
like how zig has a ReleaseFast and and ReleaseSmall mode which produce fast and small binaries respectively


[5/19/2023 12:37 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230519_003624-F5F86.jpg


[5/19/2023 12:37 AM] szybet
can you post there?


[5/19/2023 12:37 AM] szybet
my english is butiful


[5/19/2023 12:37 AM] szybet
and im tired of this, slowly


[5/19/2023 12:47 AM] tux_linux
you can write a message and i will beautify it


[5/19/2023 12:47 AM] tux_linux
then you can send it


[5/19/2023 12:55 AM] tux_linux
looks good


[5/19/2023 12:55 AM] szybet
https://www.youtube.com/watch?v=nXpHf2Xu8ko&t=0

{Embed}
MR BESEL
https://www.youtube.com/watch?v=nXpHf2Xu8ko&start=0
YOU CALL ANONYMOUSLY! Breaking Bad s4 e11 crawl space
all rights reserved for amc

you call anonymously 
you call anonymously breaking bad meme
breaking bad meme
better call saul meme
saul goodman
/mnt/data/projects/git/conversations/media/maxresdefault-87747.jpg


[5/19/2023 12:57 AM] szybet
And works great


[5/19/2023 12:57 AM] szybet
Only if it would load bigger files☹️


[5/19/2023 12:57 AM] tux_linux
mailing list


[5/19/2023 12:58 AM] tux_linux
we should make an old webkit browser work to at least get browservice working in a fast way


[5/19/2023 12:58 AM] tux_linux
i think midori handled it fine but midori is slow in nature


[5/19/2023 12:59 AM] tux_linux
```
kobo:/data/onboard/.apps# unzip sketch.zip 
Archive:  sketch.zip
   creating: Downloads/user app/sketch/
  inflating: Downloads/user app/sketch/sketch.isa.dgst
  inflating: Downloads/user app/sketch/app.json
  inflating: Downloads/user app/sketch/sketch.isa
kobo:/data/onboard/.apps# ^C
kobo:/data/onboard/.apps# unzip -l QtFrotz.zip 
Archive:  QtFrotz.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  06-24-2022 20:53   QtFrotz/
      256  06-24-2022 20:53   QtFrotz/QtFrotz.isa.dgst
  2904064  06-24-2022 20:53   QtFrotz/QtFrotz.isa
      331  06-24-2022 00:32   QtFrotz/app.json
 --------                     -------
  2904651                     4 files
kobo:/data/onboard/.apps#
```
could you get the filesystem hierarchy right please?


[5/19/2023 1:02 AM] tux_linux
```
Sketch is running on a Kobo Mini.
```


[5/19/2023 1:02 AM] tux_linux
welp


[5/19/2023 1:03 AM] tux_linux
it's running on glo hd


[5/19/2023 1:03 AM] tux_linux
ui seems to display fine but of course it crashed when the gui wasn't started from ssh


[5/19/2023 1:03 AM] szybet
Turned on xorg makes the nia horribly slow, even basic gui clicking


[5/19/2023 1:04 AM] szybet
Propably no, already explained it, plato is complicated


[5/19/2023 1:04 AM] tux_linux
why


[5/19/2023 1:04 AM] szybet
Loooooogs


[5/19/2023 1:04 AM] tux_linux
Well, I can't access them


[5/19/2023 1:05 AM] tux_linux
it crashes when I'm not on console


[5/19/2023 1:05 AM] tux_linux
hehe


[5/19/2023 1:05 AM] szybet
Inkbox gui restart


[5/19/2023 1:05 AM] tux_linux
no no no


[5/19/2023 1:05 AM] tux_linux
it doesn't crash when I do `restart inkbox_gui`


[5/19/2023 1:06 AM] tux_linux
it only crashes when it's launched by init itself


[5/19/2023 1:06 AM] tux_linux
great uh?


[5/19/2023 1:07 AM] tux_linux
can you reproduce on your nia ?


[5/19/2023 1:53 AM] tux_linux
freedesktop was angry at github?

{Attachments}
/mnt/data/projects/git/conversations/media/image-AC681.png


[5/19/2023 7:56 AM] szybet
try to make init gather logs


[5/19/2023 7:57 AM] szybet
i will try but i doubt it


[5/19/2023 8:05 AM] szybet
i checked the mail thing


[5/19/2023 8:06 AM] szybet
for real can you send it? i hate this website and email based system


[5/19/2023 8:06 AM] szybet
;_;


[5/19/2023 8:21 AM] szybet
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/core/textdocumentgenerator.cpp#L417

{Embed}
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/core/textdocumentgenerator.cpp
okular/textdocumentgenerator.cpp at d3a8dda275497b013f75f78eff555d6...
KDE document viewer. Contribute to KDE/okular development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/okular-4B9A9


[5/19/2023 10:27 AM] szybet
note for me later: decrease font size to check if number of pages is the problem


[5/19/2023 11:43 AM] szybet
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/generators/dvi/fontpool.cpp#L31

{Embed}
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/generators/dvi/fontpool.cpp
okular/fontpool.cpp at d3a8dda275497b013f75f78eff555d638c1cf908 · K...
KDE document viewer. Contribute to KDE/okular development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/okular-4B9A9


[5/19/2023 11:43 AM] szybet
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/generators/txt/document.cpp#L22

{Embed}
https://github.com/KDE/okular/blob/d3a8dda275497b013f75f78eff555d638c1cf908/generators/txt/document.cpp
okular/document.cpp at d3a8dda275497b013f75f78eff555d638c1cf908 · K...
KDE document viewer. Contribute to KDE/okular development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/okular-4B9A9


[5/19/2023 11:50 AM] szybet
DEBUG_TEXTPAGE ON


[5/19/2023 11:51 AM] szybet
OKULAR_TEXTDOCUMENT_THREADED_RENDERING OFF


[5/19/2023 11:51 AM] szybet
WITH_KJS OFF


[5/19/2023 11:52 AM] szybet
PAGE_PROFILE ON


[5/19/2023 11:53 AM] szybet
DEBUG_FONT ON


[5/19/2023 11:53 AM] szybet
PERFORMANCE_MEASUREMENT ON


[5/19/2023 11:54 AM] szybet
TXT_DEBUG ON


[5/19/2023 11:54 AM] szybet
PAGEVIEW_DEBUG ON


[5/19/2023 11:54 AM] szybet
OKULAR_KEEP_FILE_OPEN OFF


[5/19/2023 1:30 PM] tux_linux
what was the boost library used for power daemon and how do you set it up?


[5/19/2023 1:31 PM] szybet
the normal one?


[5/19/2023 1:31 PM] szybet
um by importing it to cmake


[5/19/2023 1:31 PM] tux_linux
where do you put it


[5/19/2023 1:31 PM] szybet
?


[5/19/2023 1:31 PM] szybet
look at the repo?


[5/19/2023 1:31 PM] tux_linux
i didn't see docs related to that


[5/19/2023 1:32 PM] szybet
why should there be


[5/19/2023 1:32 PM] szybet
you download the file and extract


[5/19/2023 1:32 PM] szybet
and its working


[5/19/2023 1:32 PM] tux_linux
extract where


[5/19/2023 1:33 PM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/main/lib/instructions.txt

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/main/lib/instructions.txt
inkbox-power-daemon/instructions.txt at main · Kobo-InkBox/inkbox-p...
InkBox Power Daemon (IPD) source code. Contribute to Kobo-InkBox/inkbox-power-daemon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-daemon-C2D7A


[5/19/2023 1:33 PM] szybet
?... whats your problem


[5/19/2023 1:34 PM] tux_linux
ok it works
maybe it should be in `other` because I didn't find it


[5/19/2023 1:36 PM] szybet
btw couldn't you run blank from ipd?


[5/19/2023 1:36 PM] tux_linux
I don't know


[5/19/2023 1:36 PM] szybet
watchdog already exists and it loops like every 400Ms?


[5/19/2023 1:36 PM] tux_linux
service was the simplest way


[5/19/2023 1:36 PM] tux_linux
but maybe you can transfer it there


[5/19/2023 1:36 PM] tux_linux
then don't even run the binary but just the code in it


[5/19/2023 1:36 PM] szybet
you already opened the project, but sure i can do it but remind me


[5/19/2023 1:36 PM] szybet
thats the point


[5/19/2023 1:38 PM] tux_linux
source code here in the commit message
https://github.com/Kobo-InkBox/rootfs/commit/5f1ac438fff6014b6a6b9c40562f62896b7b1353

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/5f1ac438fff6014b6a6b9c40562f62896b7b1353
Add "EINK_BLANK" support · Kobo-InkBox/rootfs@5f1ac43
In some devices users can experience eInk &#39;freezes&#39; when X11 is running, for whatever reason out there. This little &#39;blank&#39; program sends the VESA_NO_BLANKING ioctl ...
/mnt/data/projects/git/conversations/media/5f1ac438fff6014b6a6b9c40562f62896b7b1353-8C2A3


[5/19/2023 1:38 PM] tux_linux
could you add it for tomorrow?


[5/19/2023 1:38 PM] tux_linux
i am debugging fbdepth currently


[5/19/2023 1:38 PM] szybet
FBIOBLANK is where defined


[5/19/2023 1:39 PM] szybet
and VESA_NO_BLANKING


[5/19/2023 1:39 PM] szybet
also, maybe i can run it only when xorg is enabled?


[5/19/2023 1:39 PM] tux_linux
oh git didn't include lines with # in commit

{Reactions}
😂 

[5/19/2023 1:39 PM] tux_linux
it already does that


[5/19/2023 1:39 PM] szybet
if you *remind* me if i forget, sure


[5/19/2023 1:40 PM] szybet
oh ok


[5/19/2023 1:40 PM] szybet
well


[5/19/2023 1:40 PM] tux_linux
can't find my source file right now
should be linux/types.h or something, look it up


[5/19/2023 1:40 PM] tux_linux
`linux/fb.h`


[5/19/2023 1:41 PM] szybet
sure


[5/19/2023 1:41 PM] tux_linux
yeah i think it's fb.h


[5/19/2023 1:41 PM] tux_linux
thanks


[5/19/2023 1:41 PM] tux_linux
might need fcntl and stdlib and stdio as well


[5/19/2023 1:42 PM] szybet
@NiLuJe what operation in okular would be the heaviest on cpu ( fonts maybe? ) any ways to speed things up? thanks


[5/19/2023 1:43 PM] tux_linux
what was your fbink compilation command for ipd?


[5/19/2023 1:43 PM] tux_linux
oh i have it


[5/19/2023 1:43 PM] szybet
?


[5/19/2023 1:43 PM] tux_linux
nvm


[5/19/2023 1:44 PM] tux_linux
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/fbink-library-musl.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/fbink-library-musl.md
niAudio/fbink-library-musl.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[5/19/2023 1:44 PM] szybet
everything is there


[5/19/2023 1:44 PM] tux_linux
didn't see it


[5/19/2023 1:44 PM] szybet
after okular the folder is a mess


[5/19/2023 1:44 PM] szybet
at least i document things


[5/19/2023 1:44 PM] szybet
~~libqualculate~~


[5/19/2023 1:44 PM] tux_linux
what does it have to do


[5/19/2023 1:44 PM] tux_linux
oh, yeah, didn't write docs for that


[5/19/2023 1:44 PM] tux_linux
i think it was icu


[5/19/2023 1:44 PM] tux_linux
compiling it was the worst nightmare i had had in a long time


[5/19/2023 1:45 PM] tux_linux
like you had to compile it for host first
then use this compiled version to build a cross compiled one
a mess


[5/19/2023 1:45 PM] szybet
~~my nightmare was more worst~~


[5/19/2023 1:45 PM] tux_linux
probably true


[5/19/2023 1:47 PM] tux_linux
to which file do i do that

{Attachments}
/mnt/data/projects/git/conversations/media/image-3D143.png


[5/19/2023 1:49 PM] szybet
||every second fucking kde library used some some dumb shit binaries that were compiled at runtime to do something with the source code ( mostly docks ) so i needed to hack into cmake and overwrite the paths & compile the binaries for 64 bits  and yes the crosscompiling things were not working, we support it in a not wrking state lol||


[5/19/2023 1:49 PM] szybet
what are you doing... cmakelist


[5/19/2023 1:49 PM] tux_linux
ok it's definitely worse


[5/19/2023 1:50 PM] tux_linux
well i compiled libevdev, seemed to go fine but then I want to compile ipd, it finds fbink but not libevdev


[5/19/2023 1:50 PM] tux_linux
```
[build@inkbox build]$ make
[  5%] Linking CXX executable ipd
/home/build/inkbox/compiled-binaries/armv7l-linux-musleabihf/bin/../lib/gcc/armv7l-linux-musleabihf/11.2.0/../../../../armv7l-linux-musleabihf/bin/ld: cannot find -levdev
collect2: error: ld returned 1 exit status
make[2]: *** [CMakeFiles/ipd.dir/build.make:337: ipd] Error 1
make[1]: *** [CMakeFiles/Makefile2:839: CMakeFiles/ipd.dir/all] Error 2
make: *** [Makefile:121: all] Error 2
[build@inkbox build]$ 
```


[5/19/2023 1:51 PM] szybet
try to copy evdev libs to other lib paths


[5/19/2023 1:51 PM] szybet
in sysroot


[5/19/2023 1:51 PM] szybet
/usr/lib /usr/local/lib


[5/19/2023 1:51 PM] tux_linux
oh, so install it


[5/19/2023 1:52 PM] szybet
yes, obviously make install first


[5/19/2023 1:52 PM] tux_linux
i didn't need to make install in fbink and it seemed to find it anyway


[5/19/2023 1:52 PM] szybet
it shouldn't


[5/19/2023 1:52 PM] tux_linux
well it works now thanks


[5/19/2023 1:56 PM] szybet (pinned)
https://wiki.manjaro.org/index.php/List_of_Qt_Applications

{Embed}
https://wiki.manjaro.org/index.php/List_of_Qt_Applications
List of Qt Applications
This page contains a list of Qt4 and Qt5 based applications/programs. 
This means all programs are non-GTK3, non-GTK2, and non-KDE based.

Please search for the application name in your Manjaro repository. If you cannot find it, try the Arch User Repository as well. Sometimes, packages need to be downloaded from github or the developer website a...
/mnt/data/projects/git/conversations/media/logo-80C24.png


[5/19/2023 1:56 PM] szybet
at this point


[5/19/2023 1:58 PM] szybet
i will add blank & depth setting too for nia at least


[5/19/2023 1:59 PM] tux_linux
ok


[5/19/2023 2:02 PM] szybet
the one helpfull guy on matrix didn't responded


[5/19/2023 2:02 PM] szybet
okular


[5/19/2023 2:03 PM] szybet
either you write this email or i figure out the speed, or thats it


[5/19/2023 2:03 PM] szybet
:(


[5/19/2023 2:05 PM] szybet
Pinned a message.


[5/19/2023 2:08 PM] szybet
https://github.com/mNantern/QTodoTxt
https://dooble.sourceforge.io/

{Embed}
https://github.com/mNantern/QTodoTxt
GitHub - QTodoTxt/QTodoTxt: Cross Platform todo.txt GUI
Cross Platform todo.txt GUI . Contribute to QTodoTxt/QTodoTxt development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/QTodoTxt-2A941


[5/19/2023 2:12 PM] szybet
https://github.com/textbrowser/dooble

{Embed}
https://github.com/textbrowser/dooble
GitHub - textbrowser/dooble: Dooble is a scientific browser. Minima...
Dooble is a scientific browser. Minimal, cute, unusually stable, and available almost everywhere. Completed. - GitHub - textbrowser/dooble: Dooble is a scientific browser. Minimal, cute, unusually ...
/mnt/data/projects/git/conversations/media/dooble-98A6D


[5/19/2023 2:12 PM] szybet
its freaking maintained


[5/19/2023 2:12 PM] szybet
wow


[5/19/2023 2:18 PM] tux_linux
I already wrote a full to-do app just for inkbox


[5/19/2023 2:19 PM] szybet
does it support todo.txt?


[5/19/2023 2:19 PM] tux_linux
No
JSON database


[5/19/2023 2:19 PM] szybet
is it simple so i can make an export for todo.txt


[5/19/2023 2:19 PM] szybet
also how simple is it


[5/19/2023 2:19 PM] szybet
like


[5/19/2023 2:19 PM] szybet
sorting


[5/19/2023 2:19 PM] szybet
dates


[5/19/2023 2:19 PM] szybet
etc


[5/19/2023 2:20 PM] tux_linux
Did you ever try the default to do app?


[5/19/2023 2:20 PM] szybet
no, i use feathernotes


[5/19/2023 2:20 PM] szybet
but outside of school todo.txt


[5/19/2023 2:21 PM] tux_linux
Well maybe you could try it


[5/19/2023 2:21 PM] szybet
porting would propably give a better experience


[5/19/2023 2:22 PM] tux_linux
Try it once


[5/19/2023 2:22 PM] tux_linux
I didn't write it for it to be replaced with something else one day


[5/19/2023 2:22 PM] szybet
i will

{Reactions}
👍 

[5/19/2023 2:22 PM] szybet
this app is good for default


[5/19/2023 2:22 PM] szybet
because it has good eink support


[5/19/2023 2:22 PM] szybet
but a user app of another one, why not


[5/19/2023 2:23 PM] tux_linux
Maybe


[5/19/2023 2:23 PM] szybet
well you can't stop me really :D


[5/19/2023 2:23 PM] tux_linux
Don't forget to see if you can reproduce sketch error


[5/19/2023 2:23 PM] szybet
90% it works for me


[5/19/2023 2:23 PM] tux_linux
But it won't be a default user app
User will have to install it
Not like sketch (if we get it to work)


[5/19/2023 2:24 PM] szybet
yea sure


[5/19/2023 2:24 PM] szybet
sketch is a user app already


[5/19/2023 2:24 PM] szybet
can be both


[5/19/2023 2:24 PM] szybet
¯\_(ツ)_/¯


[5/19/2023 2:24 PM] tux_linux
Does it launch after rebooting the kobo


[5/19/2023 2:24 PM] tux_linux
Without any ssh interaction


[5/19/2023 5:12 PM] ninuje
https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html


[5/19/2023 5:14 PM] ninuje
It'll depend on the format, mostly. I don't recall if it uses KatePart for TXT, but prooobaaably? In which case, it's probably fairly decent at what it's supposed to be doing already.


[5/19/2023 5:16 PM] ninuje
Re: https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/9f275cdcaf89261b593ba15ab311d0752e474882

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/9f275cdcaf89261b593ba15ab311d0752e474882
Check return value of `fbink_set_fb_info`; update libevdev submodul...
…repository linki
/mnt/data/projects/git/conversations/media/9f275cdcaf89261b593ba15ab311d0752e474882-88EFC


[5/19/2023 5:16 PM] ninuje
That's not how this works


[5/19/2023 5:17 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/fbink.h#L1333

{Embed}
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/fbink.h
FBInk/fbink.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-4089D


[5/19/2023 5:18 PM] ninuje
God dammit GH's new file viewer is dogshit for quotes


[5/19/2023 5:19 PM] ninuje
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/fbink.h#L904-L943

{Embed}
https://github.com/NiLuJe/FBInk/blob/d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a/fbink.h
FBInk/fbink.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at d814b9d560cfcdd4cb523d0940eb22f3ddda6a6a · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-4089D


[5/19/2023 5:19 PM] ninuje
TL;DR: < 0 means failure; > 0 means *success* and state *was* changed; 0 means state already matches the request


[5/19/2023 6:04 PM] szybet
already did


[5/19/2023 6:04 PM] szybet
nope lolololol


[5/19/2023 7:30 PM] szybet
no idea


[5/19/2023 7:30 PM] szybet
repaired it


[5/19/2023 7:31 PM] szybet
added logs and it started working


[5/19/2023 7:31 PM] szybet
if it will not work, at least you have logs in a tmpfs


[5/19/2023 9:01 PM] tux_linux
Thanks


[5/19/2023 9:02 PM] szybet
first check it

{Reactions}
👍 

[5/19/2023 9:03 PM] szybet
okular guys gived up, like they will answer some questions but no real help, tries


[5/19/2023 9:03 PM] szybet
i was able to make it open a 300 Kb txt file, but still takes too long


[5/19/2023 9:03 PM] szybet
will try other things


[5/19/2023 9:04 PM] szybet
~~we can always cut a file in pieces~~


[5/19/2023 9:14 PM] tux_linux
Ok thanks


[5/19/2023 10:14 PM] tux_linux
@Szybet did you modify sketch app input code or you left it as it was?


[5/19/2023 10:28 PM] tux_linux
did you know that in macos because of licensing issues they're not using nano but rather pico which is a clone?

{Attachments}
/mnt/data/projects/git/conversations/media/image-908CD.png


[5/19/2023 10:28 PM] tux_linux
(actually nano is the clone but yea)


[5/19/2023 10:28 PM] szybet
not touched


[5/19/2023 10:28 PM] tux_linux
good


[5/19/2023 10:29 PM] szybet
nano is gnu?


[5/19/2023 10:29 PM] tux_linux
yes


[5/19/2023 10:29 PM] szybet
how can there be a license issue


[5/19/2023 10:29 PM] tux_linux
because macos isn't using gpl license?


[5/19/2023 10:29 PM] szybet
and?


[5/19/2023 10:29 PM] tux_linux
well


[5/19/2023 10:29 PM] tux_linux
corporation


[5/19/2023 10:29 PM] tux_linux
lawsuits possibility


[5/19/2023 10:29 PM] tux_linux
i guess


[5/19/2023 10:30 PM] szybet
what would happen if they used it


[5/19/2023 10:30 PM] szybet
like


[5/19/2023 10:30 PM] szybet
share the source


[5/19/2023 10:30 PM] tux_linux
yes
idk


[5/19/2023 10:30 PM] szybet
and noone gives a ****


[5/19/2023 10:30 PM] szybet
bruh


[5/19/2023 10:33 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-298B5.png


[5/19/2023 10:33 PM] szybet
what the fuck


[5/19/2023 10:36 PM] szybet
if changing this to 2 will fix the issue i will murder someone


[5/19/2023 10:48 PM] szybet
its never used before generation of text


[5/19/2023 10:48 PM] szybet
only after


[5/19/2023 10:48 PM] szybet
...


[5/20/2023 12:14 AM] szybet
epub opened pretty quickly


[5/20/2023 12:14 AM] szybet
300 Kb one


[5/20/2023 12:14 AM] szybet
let me measure


[5/20/2023 12:17 AM] tux_linux
that means?


[5/20/2023 12:17 AM] szybet
17 seconds


[5/20/2023 12:17 AM] szybet
it only says that its a bug


[5/20/2023 12:18 AM] szybet
like, a txt file with similar size takes 15


[5/20/2023 12:18 AM] szybet
epub file is a zip file


[5/20/2023 12:18 AM] szybet
doesnt make sense


[5/20/2023 12:18 AM] tux_linux
slightly slower than inkbox for a similarly-sized epub


[5/20/2023 12:18 AM] szybet
supports images


[5/20/2023 12:18 AM] szybet
check mate


[5/20/2023 12:19 AM] tux_linux
yes


[5/20/2023 12:19 AM] tux_linux
but


[5/20/2023 12:19 AM] tux_linux
2.1


[5/20/2023 12:19 AM] szybet
sure whatever


[5/20/2023 12:22 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-349C2.png


[5/20/2023 12:22 AM] szybet
hangs after this


[5/20/2023 12:39 AM] tux_linux
oh no
```
kobo:/# /sbin/ipd
Error relocating /sbin/ipd: _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEE4dataEv: symbol not found
Error relocating /sbin/ipd: _ZSt28__throw_bad_array_new_lengthv: symbol not found
kobo:/#
```


[5/20/2023 12:41 AM] tux_linux
well, recent compiler's fault


[5/20/2023 12:55 AM] szybet
i will propably give up on okular


[5/20/2023 12:56 AM] tux_linux
sad


[5/20/2023 12:56 AM] szybet
i have only a fev things to check for an reasonably fix


[5/20/2023 12:56 AM] szybet
i will release a partial cross compile guide, a user app

{Reactions}
👍 

[5/20/2023 12:56 AM] szybet
but thats it


[5/20/2023 12:56 AM] szybet
its simply too slow


[5/20/2023 1:08 AM] tux_linux
ok, i fail to understand glo hd bitdepth tricks with x11


[5/20/2023 1:09 AM] tux_linux
like, at first it's fine with 8, then it needs to change to 16 first time you put it to sleep, then you put it to sleep again while xorg is running and suddenly it needs 32


[5/20/2023 1:10 AM] szybet
ping niluje


[5/20/2023 2:17 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230520_001734744-73B33.jpg


[5/20/2023 4:08 AM] tux_linux
i remind you


[5/20/2023 6:19 PM] tux_linux
so


[5/20/2023 6:19 PM] tux_linux
is everything i need to do


[5/20/2023 6:19 PM] tux_linux
done


[5/20/2023 6:43 PM] szybet
look at the to do list


[5/20/2023 6:43 PM] szybet
i'm on it soon

{Reactions}
👍 

[5/20/2023 6:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0DCD8.png


[5/20/2023 6:49 PM] szybet
imagine we would have such a approach to people


[5/20/2023 7:05 PM] szybet
um test encryption


[5/20/2023 7:06 PM] szybet
also i didn't checked updates, oops


[5/20/2023 7:06 PM] tux_linux
ouch


[5/20/2023 7:06 PM] tux_linux
that's... being helpful


[5/20/2023 7:07 PM] tux_linux
well i think it's done


[5/20/2023 7:07 PM] tux_linux
well, you can test them as well thanks


[5/20/2023 7:07 PM] szybet
maybe you can?


[5/20/2023 7:07 PM] szybet
i tried okular


[5/20/2023 7:07 PM] szybet
🥺


[5/20/2023 7:08 PM] tux_linux
yes
lots of studying to do though


[5/20/2023 7:08 PM] szybet
... i hope at least in summer holidays you will have time


[5/20/2023 7:09 PM] tux_linux
i hope
but at this point if 2.0 is not released
there's a problem


[5/20/2023 7:10 PM] szybet
nah


[5/20/2023 7:11 PM] tux_linux
at worst if it doesn't work with folders maybe we can just warn users in the release announcement


[5/20/2023 7:12 PM] szybet
how is encryption managed? can you describe it?


[5/20/2023 7:12 PM] szybet
then i can say if it will work or not


[5/20/2023 7:12 PM] tux_linux
not really?


[5/20/2023 7:12 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/master/src/encfs/encryptionmanager.cpp


[5/20/2023 7:12 PM] tux_linux
and
https://github.com/Kobo-InkBox/rootfs/blob/master/etc/init.d/encfs


[5/20/2023 7:17 PM] szybet
well then just try it


[5/20/2023 7:17 PM] tux_linux
basically
1. you drop books into a dropbox folder
2. gui prompts you asking if you want to integrate these new files in your encrypted storage
3. if you say yes it decrypts an existing (or not) squashfs archive containing encrypted files and adds new books in there
4. then it repacks the squashfs (data.encfs)
5. then it mounts it
or something like that


[5/20/2023 7:18 PM] tux_linux
it's been so long (2021) that I don't remember that much about it


[5/20/2023 7:18 PM] tux_linux
it was heavily tested when it came out


[5/20/2023 7:18 PM] szybet
how does /mnt/onboard/onboard/ look when its encrypted


[5/20/2023 7:18 PM] tux_linux
you can also, the setup is very straightforward and integrated in gui


[5/20/2023 7:19 PM] tux_linux
it's not onboard that is encrypted


[5/20/2023 7:19 PM] tux_linux
only a folder inside onboard


[5/20/2023 7:19 PM] tux_linux
actually, a squashfs


[5/20/2023 7:19 PM] tux_linux
it's very complicated


[5/20/2023 7:19 PM] tux_linux
so you can choose to have some books encrypted and some not encrypted


[5/20/2023 7:20 PM] szybet
are in this folder those encrypted books?


[5/20/2023 7:21 PM] tux_linux
yes, `data.encfs` is a squashfs containing a read-only copy of an EncFS folder
it is mounted by encfs service and decrypted if the user provides the correct password


[5/20/2023 7:21 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/7af545c596ec1f51bc4659b05bb6a2c1a58abd49/etc/init.d/encfs#L34-L48
these lines probably


[5/20/2023 7:22 PM] szybet
then it should work, but just you need to go inside the folder


[5/20/2023 7:22 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230520_192147-03ABC.jpg


[5/20/2023 7:22 PM] tux_linux
yes in theory


[5/20/2023 7:22 PM] szybet
wifi doesnt work


[5/20/2023 7:22 PM] tux_linux
what?!


[5/20/2023 7:22 PM] szybet
i smell a hardware issue, was working yestarday


[5/20/2023 7:23 PM] tux_linux
did you clear rootfs cache, every possible cache, updated kernel, everything?


[5/20/2023 7:23 PM] tux_linux
did you do recent hardware modifications


[5/20/2023 7:23 PM] szybet
worked yestarday


[5/20/2023 7:23 PM] szybet
nope, nothing


[5/20/2023 7:23 PM] tux_linux
did you reboot


[5/20/2023 7:23 PM] szybet
maybe something broke


[5/20/2023 7:23 PM] szybet
i did


[5/20/2023 7:23 PM] szybet
will connect to serial and try dmesg


[5/20/2023 7:23 PM] tux_linux
you can still develop with internet with an usb bridge


[5/20/2023 7:23 PM] tux_linux
usbnet is still your friend...


[5/20/2023 7:24 PM] szybet
nope


[5/20/2023 7:24 PM] szybet
throwed it away


[5/20/2023 7:24 PM] tux_linux
well according to only those messages it's just saying it has already loaded the kernel module


[5/20/2023 7:24 PM] szybet
i use my ereader in usb host mode most of the time


[5/20/2023 7:24 PM] tux_linux
ok


[5/20/2023 7:25 PM] szybet
poweroff / reboot script also doesnt work, needed button reboot


[5/20/2023 7:25 PM] tux_linux
what's your kernel version


[5/20/2023 7:25 PM] tux_linux
what's your rootfs version


[5/20/2023 7:25 PM] tux_linux
do update everything


[5/20/2023 7:25 PM] tux_linux
this is a sign either kernel or rootfs isn't updated properly


[5/20/2023 7:25 PM] szybet
worked yesterday


[5/20/2023 7:25 PM] tux_linux
oh


[5/20/2023 7:25 PM] tux_linux
then idk


[5/20/2023 7:26 PM] tux_linux
new init introduced the necessity to do reboot -f instead of reboot


[5/20/2023 7:26 PM] tux_linux
but if it worked yesterday


[5/20/2023 7:26 PM] tux_linux
you can go into settings>generate system report to get a complete dmesg via pdf file


[5/20/2023 7:26 PM] tux_linux
might be faster than connecting serial


[5/20/2023 7:26 PM] tux_linux
or you can go into kterm


[5/20/2023 7:27 PM] szybet
i have serial exposed via gold piny, which are hidden using a 3d printed modular part


[5/20/2023 7:27 PM] szybet
;p


[5/20/2023 7:27 PM] tux_linux
ok well good


[5/20/2023 7:33 PM] tux_linux
we forgot to design a way to update default userapps


[5/20/2023 7:33 PM] tux_linux
great


[5/20/2023 7:34 PM] szybet
https://tenor.com/view/pikachu-confused-what-huh-gif-15241541

{Embed}
https://tenor.com/view/pikachu-confused-what-huh-gif-15241541
/mnt/data/projects/git/conversations/media/pikachu-confused-5686F.png


[5/20/2023 7:34 PM] szybet
delete them


[5/20/2023 7:34 PM] szybet
and


[5/20/2023 7:34 PM] szybet
as user apps


[5/20/2023 7:34 PM] szybet
so users can delete them


[5/20/2023 7:34 PM] tux_linux
i'm talking about sketch


[5/20/2023 7:34 PM] szybet
me too


[5/20/2023 7:34 PM] szybet
just let everything be modular


[5/20/2023 7:34 PM] tux_linux
so no need to write that?


[5/20/2023 7:34 PM] tux_linux
actually I doubt we will be updating sketch anyway


[5/20/2023 7:35 PM] szybet
remove default user apps anc convert them to regular user apps


[5/20/2023 7:35 PM] szybet
😉


[5/20/2023 7:35 PM] tux_linux
so sketch doesn't come preinstalled in release images


[5/20/2023 7:36 PM] tux_linux
you really want that


[5/20/2023 7:36 PM] szybet
no apps came preinstalled


[5/20/2023 7:36 PM] szybet
we dont windows


[5/20/2023 7:36 PM] tux_linux
ok


[5/20/2023 7:36 PM] szybet
i dont care, installing them takes minutes


[5/20/2023 7:37 PM] tux_linux
i will leave scribble there, especially for kt, but maybe add a note somewhere in the wiki saying that there are options to improve some apps, such as installing sketch


[5/20/2023 7:37 PM] szybet
noooooooooooooooooooooooo


[5/20/2023 7:37 PM] szybet
i made plato sketch only because i hated the default one


[5/20/2023 7:37 PM] szybet
delete it


[5/20/2023 7:38 PM] tux_linux
i can't delete it for all devices


[5/20/2023 7:38 PM] tux_linux
kt won't run plato or this is crazy


[5/20/2023 7:38 PM] szybet
then make it a user app for kt only


[5/20/2023 7:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-AD56E.txt


[5/20/2023 7:42 PM] tux_linux
zombie wifi card?


[5/20/2023 7:46 PM] szybet
connected via cli just fine


[5/20/2023 7:46 PM] tux_linux
ok


[5/20/2023 7:47 PM] szybet
whatever, the performance bug was related to wifi, i might just fix those 2 issues in 1 run

{Reactions}
👍 

[5/20/2023 7:48 PM] tux_linux
but is the connecting issue related to gui or not?


[5/20/2023 7:48 PM] szybet
only to gui apparently


[5/20/2023 7:48 PM] szybet
¯\_(ツ)_/¯


[5/20/2023 7:48 PM] szybet
weird


[5/20/2023 7:48 PM] tux_linux
please update everything


[5/20/2023 7:48 PM] szybet
i will


[5/20/2023 7:48 PM] tux_linux
and clean cache


[5/20/2023 7:48 PM] szybet
i will finish okular


[5/20/2023 7:48 PM] szybet
i have some ideas


[5/20/2023 7:48 PM] tux_linux
if this goes into release it won't go well


[5/20/2023 7:49 PM] tux_linux
could we just focus on releasing 2.0 by monday?


[5/20/2023 7:49 PM] szybet
2 people project, expect nothing?


[5/20/2023 7:49 PM] szybet
whoa no rush


[5/20/2023 7:49 PM] tux_linux
i'm tired


[5/20/2023 7:49 PM] szybet
week for testing maybe?


[5/20/2023 7:50 PM] tux_linux
week will become a month


[5/20/2023 7:50 PM] tux_linux
month will become a year


[5/20/2023 7:50 PM] tux_linux
year will become 10 years


[5/20/2023 7:50 PM] szybet
calm down


[5/20/2023 7:50 PM] szybet
it will be fine


[5/20/2023 7:51 PM] szybet
i will do inkbox things for 2.0 in this weekend, finish sanki 2.0 ( yay )


[5/20/2023 7:51 PM] szybet
then we can record the changes

{Reactions}
👍 

[5/20/2023 7:52 PM] szybet
we can split it up


[5/20/2023 7:52 PM] tux_linux
yes
i will test update system


[5/20/2023 7:52 PM] tux_linux
and power up imgtool again to see if nothing has broken since 1.9


[5/20/2023 7:52 PM] szybet
aaaand encryption i hope


[5/20/2023 7:52 PM] tux_linux
you do blank in ipd
cpu bug fix
wi-fi connection gui test

{Reactions}
👍 

[5/20/2023 7:52 PM] tux_linux
yes


[5/20/2023 7:53 PM] tux_linux
you didn't put sanki in user apps repo, is that normal?


[5/20/2023 7:54 PM] szybet
its not finished


[5/20/2023 7:54 PM] szybet
and 1.0 is broken


[5/20/2023 7:54 PM] tux_linux
ok


[5/20/2023 7:54 PM] szybet
i did a complete rewrite soo


[5/20/2023 7:54 PM] tux_linux
well
it's an userapp
so you have time


[5/20/2023 8:26 PM] tux_linux
why do you save sketches in app-temp


[5/20/2023 8:26 PM] tux_linux
they should go in app-data


[5/20/2023 8:26 PM] tux_linux
so that user can actually access them?


[5/20/2023 8:26 PM] szybet
what are you talking about


[5/20/2023 8:26 PM] szybet
um oh no


[5/20/2023 8:26 PM] tux_linux
menu->save


[5/20/2023 8:27 PM] tux_linux
```
kobo:/data/onboard/.apps# ls Sketch/Sketch/app-temp
logs.txt                    sketch-20230520_142538.png
kobo:/data/onboard/.apps#
```


[5/20/2023 8:27 PM] tux_linux
just send me the bin when you're done


[5/20/2023 8:27 PM] tux_linux
i made some changes to the zip file


[5/20/2023 8:27 PM] tux_linux
thanks


[5/20/2023 8:28 PM] szybet
nah only the script needs to be modified


[5/20/2023 8:28 PM] tux_linux
oh ok


[5/20/2023 8:28 PM] szybet
which ones


[5/20/2023 8:28 PM] tux_linux
well, actually making it work with the glo hd? you mismatched almost half of the device names


[5/20/2023 8:28 PM] szybet
https://github.com/Szybet/sketch-inkbox/blob/master/latest-binary-sketch

{Embed}
https://github.com/Szybet/sketch-inkbox/blob/master/latest-binary-sketch
sketch-inkbox/latest-binary-sketch at master · Szybet/sketch-inkbox
Draw sketches on e-paper - fork for inkbox. Contribute to Szybet/sketch-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/sketch-inkbox-C4ABE


[5/20/2023 8:28 PM] szybet
lol


[5/20/2023 8:28 PM] szybet
i asked if its fine


[5/20/2023 8:28 PM] szybet
¯\_(ツ)_/¯


[5/20/2023 8:28 PM] szybet
grab this


[5/20/2023 8:28 PM] tux_linux
`/bin/kobo_config.sh`


[5/20/2023 8:29 PM] szybet
and you can update it


[5/20/2023 8:29 PM] tux_linux
you said it was only the script?


[5/20/2023 8:29 PM] szybet
well yep


[5/20/2023 8:29 PM] szybet
XD


[5/20/2023 8:29 PM] tux_linux
then why are you sending a binary


[5/20/2023 8:29 PM] szybet
brain segmentation fault


[5/20/2023 8:30 PM] tux_linux
lmao


[5/20/2023 8:30 PM] tux_linux
so just `./Sketch.bin /app-data` ?


[5/20/2023 8:30 PM] tux_linux
also I made sketch uppercase
because it looks nicer in gui


[5/20/2023 8:30 PM] szybet
yep


[5/20/2023 8:31 PM] szybet
no


[5/20/2023 8:31 PM] szybet
ipd might not like it


[5/20/2023 8:31 PM] szybet
its in the wiki


[5/20/2023 8:31 PM] tux_linux
i will change it


[5/20/2023 8:31 PM] szybet
change it in the gui only then


[5/20/2023 8:31 PM] szybet
or update ipd for it


[5/20/2023 8:31 PM] szybet
like an or ||


[5/20/2023 8:31 PM] tux_linux
but why does ipd need to know about an app named sketch


[5/20/2023 8:31 PM] tux_linux
isn't it supposed to adapt to any app?


[5/20/2023 8:32 PM] szybet
it checks a few file types for the executable binary


[5/20/2023 8:32 PM] szybet
if they are runnign


[5/20/2023 8:32 PM] szybet
based on the folders in .apps


[5/20/2023 8:38 PM] tux_linux
I also made the folder uppercase


[5/20/2023 8:40 PM] szybet
no...


[5/20/2023 8:40 PM] szybet
;/


[5/20/2023 8:40 PM] szybet
dont mess things up


[5/20/2023 8:43 PM] tux_linux
it doesn't seem to cause problems with already existing apps that have everything uppercase?


[5/20/2023 8:43 PM] tux_linux
e.g. Maps


[5/20/2023 8:44 PM] szybet
im not sure


[5/20/2023 8:44 PM] szybet
ipd


[5/20/2023 8:44 PM] tux_linux
it works


[5/20/2023 8:44 PM] tux_linux
put it to sleep and doesn't respond to touch


[5/20/2023 8:45 PM] szybet
does ipd report "putting x to sleep"?


[5/20/2023 8:45 PM] tux_linux
hang on


[5/20/2023 8:45 PM] tux_linux
waiting for it to reconnect to wifi


[5/20/2023 8:46 PM] tux_linux
works!
```
Sat May 20 14:44:31 2023 | functions: /kobo/tmp/currentlyRunningUserApplication is: Sketch
Sat May 20 14:44:31 2023 | appsFreeze: Looking for process matching 'Sketch.bin' string
Sat May 20 14:44:31 2023 | appsFreeze: Found PID of Sketch.bin: 21964 in line: /system-lib/lib/ld-linux-armhf.so.3./Sketch.bin/app-data
Sat May 20 14:44:31 2023 | appsFreeze: Found user application binary file, that's good
Sat May 20 14:44:31 2023 | appsFreeze: Freezing process with PID 21964
Sat May 20 14:44:31 2023 | appsFreeze: Killing process with PID 21964 with signal 19
```


[5/20/2023 8:46 PM] szybet
wow


[5/20/2023 8:46 PM] szybet
im suprised that my code works


[5/20/2023 8:46 PM] szybet
🥴


[5/20/2023 8:46 PM] tux_linux
it's good


[5/20/2023 8:46 PM] tux_linux
i don't understand half of ipd


[5/20/2023 8:46 PM] tux_linux
but it works


[5/20/2023 8:46 PM] tux_linux
so that's the important thing


[5/20/2023 8:46 PM] szybet
i do


[5/20/2023 8:47 PM] szybet
but boost library is its own thing


[5/20/2023 8:47 PM] tux_linux
initially i was surprised I could put it to sleep and wake it up in one second and then do the same a second after without messing things up


[5/20/2023 8:47 PM] tux_linux
because my scripts would not have liked that


[5/20/2023 8:48 PM] szybet
multi threading


[5/20/2023 8:48 PM] szybet
the set of bash script i made also behaved like that

{Reactions}
👍 

[5/20/2023 9:23 PM] tux_linux
https://youtu.be/WIvuMwSc7YU
First ever filmed inkbox video
We have come a long way...

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=WIvuMwSc7YU
InkBox demo
New OS that I developed for Kobo eReaders. Currently it only runs as an OS on the Kobo Mini.
Details here: https://www.mobileread.com/forums/showthread.php?t=337972
/mnt/data/projects/git/conversations/media/maxresdefault-178A1.jpg


[5/20/2023 9:25 PM] szybet
yep


[5/20/2023 10:31 PM] szybet
@tux-linux any way to make ssh run inside gui-rootfs


[5/20/2023 10:32 PM] szybet
i gived up on gdb, i will try qt creator gui for it, but it doesnt have any way for chroot and i need to call this executable directly and ugh...


[5/20/2023 10:39 PM] tux_linux
busybox-initrd telnetd


[5/20/2023 10:40 PM] tux_linux
Or compile static dropbear


[5/20/2023 10:40 PM] szybet
qt creator doesnt support it


[5/20/2023 10:40 PM] szybet
;/...


[5/20/2023 10:40 PM] tux_linux
Then that


[5/20/2023 10:40 PM] tux_linux
What do you want to use it for


[5/20/2023 10:40 PM] szybet
.


[5/20/2023 10:41 PM] tux_linux
Then maybe compile buildroot 2015.x and add openssh to the packages


[5/20/2023 10:41 PM] tux_linux
Then transplant these in the chroot


[5/20/2023 10:42 PM] tux_linux
Or compile openssh yourself
Because qt Creator might need scp which dropbear doesn't have it by default


[5/20/2023 10:42 PM] szybet
> Then maybe compile buildroot 2015
> 
AAAAAAA ;-;


[5/20/2023 11:13 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-F28E3.txt


[5/20/2023 11:13 PM] szybet
...


[5/20/2023 11:24 PM] szybet
LD_LIBRARY_PATH="/lib:/mnt/okular/okular_things/lib/" /dropbear -E -R -p
 0.0.0.0:22 -F -B


[5/21/2023 1:40 AM] szybet
i was not able to run gdbserver to track down okular


[5/21/2023 1:40 AM] szybet
i will try with code


[5/21/2023 1:40 AM] szybet
but yea, this sucks


[5/21/2023 1:40 AM] tux_linux
sad


[5/21/2023 1:40 AM] szybet
i was able to extract a backtrace when it was crashing


[5/21/2023 1:40 AM] szybet
but thats it


[5/21/2023 1:41 AM] tux_linux
maybe you can send that to the devs


[5/21/2023 1:41 AM] tux_linux
maybe


[5/21/2023 1:41 AM] tux_linux
maybe


[5/21/2023 1:41 AM] szybet
um propably:
- use the debuger
- doesnt work
- lmao


[5/21/2023 1:41 AM] tux_linux
yea


[5/21/2023 2:13 PM] szybet
```
pagesVector.resize(d->mDocument->pageCount());
QVector<QList<Okular::ObjectRect *>> objects(d->mDocument->pageCount());
```


[5/21/2023 2:13 PM] szybet
okular holds on these lines


[5/21/2023 2:14 PM] szybet
i dont know what `*>>` means


[5/21/2023 3:01 PM] szybet
```
    qDebug() << "Resize starting, size now:";

    int currentSize = pagesVector.size();

    qDebug() << "pageCount now:";

    int pageCount = d->mDocument->pageCount();

    qDebug() << "Now resizing";

    for (int i = currentSize + 1; i <= pageCount; ++i) {
        pagesVector.resize(i);
        qDebug() << "Resized. index" << i;
    }

    qDebug() << "resize finished";
```
i remade the code to this, now it holds after log: `pageCount now:`

what


[5/21/2023 3:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-76EE1.png


[5/21/2023 5:28 PM] tux_linux
did they reply anything


[5/21/2023 5:29 PM] szybet
i was able to compile latest poppler library


[5/21/2023 5:29 PM] szybet
not yet


[5/21/2023 5:29 PM] tux_linux
hmm


[5/21/2023 5:29 PM] szybet
https://www.mankier.com/package/poppler-utils

{Embed}
https://www.mankier.com/package/poppler-utils
Package poppler-utils - man pages | ManKier
Command line utilities for converting PDF files


[5/21/2023 5:29 PM] szybet
alternative to mupdf

{Reactions}
👍 

[5/21/2023 5:30 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230521_152937585-63A81.jpg


[5/21/2023 5:30 PM] tux_linux
well that seems to work at least


[5/21/2023 5:30 PM] szybet
well let it finish


[5/21/2023 5:30 PM] tux_linux
yes


[5/21/2023 5:30 PM] szybet
idk how the current pdf reader works, can you explore if this would be better?


[5/21/2023 5:31 PM] tux_linux
current pdf reader is basically just telling mutool to render a pdf page to png (resolution changes depending on device) and then it displays it in a viewer


[5/21/2023 5:31 PM] szybet
hmm


[5/21/2023 5:31 PM] szybet
what about trying to get it to html?


[5/21/2023 5:31 PM] tux_linux
w h a tt


[5/21/2023 5:31 PM] szybet
https://www.mankier.com/1/pdftohtml

{Embed}
https://www.mankier.com/1/pdftohtml
pdftohtml: program to convert PDF files into HTML, XML and PNG imag...
pdftohtml is a program that converts PDF documents into HTML. It generates its output in the current working directory.


[5/21/2023 5:31 PM] tux_linux
no


[5/21/2023 5:31 PM] tux_linux
what about fonts


[5/21/2023 5:31 PM] tux_linux
page layout


[5/21/2023 5:31 PM] tux_linux
everything


[5/21/2023 5:32 PM] szybet
maybe it manages it well


[5/21/2023 5:32 PM] szybet
layout is maybe html used


[5/21/2023 5:32 PM] szybet
idk


[5/21/2023 5:32 PM] szybet
i will explore it


[5/21/2023 5:32 PM] tux_linux
can you work on 2.0 things?


[5/21/2023 5:32 PM] tux_linux
please


[5/21/2023 5:32 PM] szybet
im finishing okular


[5/21/2023 5:33 PM] szybet
testing pdf, if not im packing things up on github with some notes and thats it

{Reactions}
👍 

[5/21/2023 5:33 PM] szybet
no user app, it would weight like 1 gb and be crappy anyway


[5/21/2023 5:33 PM] tux_linux
yea


[5/21/2023 5:36 PM] tux_linux
how do you put the kobo in landscape mode


[5/21/2023 5:36 PM] tux_linux
just write to `/sys/class/graphics/fb0/rotate`?


[5/21/2023 5:37 PM] szybet
yep


[5/21/2023 5:37 PM] tux_linux
i'm very confident about it


[5/21/2023 5:37 PM] szybet
i added support for it in platform plugin and user apps


[5/21/2023 5:37 PM] szybet
but launching inkbox, restarting it overwrites it because you didn't deleted it


[5/21/2023 5:38 PM] tux_linux
of course it doesn't work here


[5/21/2023 5:39 PM] szybet
update everything


[5/21/2023 5:39 PM] tux_linux
it isn't inverting touch


[5/21/2023 5:39 PM] tux_linux
i did


[5/21/2023 5:39 PM] szybet
+ latestr platform plugin


[5/21/2023 5:39 PM] tux_linux
i did


[5/21/2023 5:39 PM] szybet
on which device


[5/21/2023 5:39 PM] tux_linux
glo hd


[5/21/2023 5:39 PM] szybet
is it using the fbink one?...


[5/21/2023 5:39 PM] tux_linux
yes


[5/21/2023 5:40 PM] szybet
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/blob/96c2eac78911d07166b56b919f7bea5ba85dd2f6/src/koboplatformintegration.cpp#LL102C4-L109C77

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/blob/96c2eac78911d07166b56b919f7bea5ba85dd2f6/src/koboplatformintegration.cpp
qt5-kobo-platform-plugin/koboplatformintegration.cpp at 96c2eac7891...
A Qt5 platform backend plugin for Kobo and Kindle E-Ink devices. - qt5-kobo-platform-plugin/koboplatformintegration.cpp at 96c2eac78911d07166b56b919f7bea5ba85dd2f6 · Kobo-InkBox/qt5-kobo-platform-p...
/mnt/data/projects/git/conversations/media/qt5-kobo-platform-plugin-F2397


[5/21/2023 5:40 PM] szybet
try these


[5/21/2023 5:40 PM] szybet
shouldn't be needed tho


[5/21/2023 5:41 PM] tux_linux
is it supposed to work right away when you write to `rotate`?


[5/21/2023 5:41 PM] tux_linux
what do i input in there


[5/21/2023 5:42 PM] szybet
before launch?


[5/21/2023 5:42 PM] tux_linux
oh ok


[5/21/2023 5:42 PM] szybet
;o


[5/21/2023 5:42 PM] szybet
what did you expect


[5/21/2023 5:42 PM] szybet
i mean it could be propably done


[5/21/2023 5:43 PM] szybet
but lol no reason to


[5/21/2023 5:44 PM] tux_linux
ok it works


[5/21/2023 5:44 PM] tux_linux
but it also made the ereader hardware crash


[5/21/2023 5:44 PM] tux_linux
short on eink display


[5/21/2023 5:44 PM] tux_linux
i guess


[5/21/2023 5:44 PM] szybet
what


[5/21/2023 5:44 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230521_154416363-11C61.jpg


[5/21/2023 5:44 PM] tux_linux
it usually is fixed with a reboot


[5/21/2023 5:44 PM] szybet
um idk no idea


[5/21/2023 5:44 PM] tux_linux
it is fixed


[5/21/2023 5:45 PM] szybet
um


[5/21/2023 5:45 PM] szybet
okay?


[5/21/2023 5:45 PM] tux_linux
but the code works


[5/21/2023 5:45 PM] tux_linux
so i cannot say anything


[5/21/2023 5:45 PM] tux_linux
it received my touch input at the correct place


[5/21/2023 5:46 PM] tux_linux
it just freezes on this screen with very bad contrast and it's like it force-powered off and you need to power it on again


[5/21/2023 5:46 PM] tux_linux
ok


[5/21/2023 5:46 PM] tux_linux
what next


[5/21/2023 5:47 PM] szybet
um okay


[5/21/2023 5:47 PM] tux_linux
i don't know what to do with scribble


[5/21/2023 5:47 PM] tux_linux
if sketch isn't preinstalled
idk


[5/21/2023 5:47 PM] szybet
delete it for sure


[5/21/2023 5:47 PM] szybet
just pack it into a user app


[5/21/2023 5:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20230521_174835-5B66E.mp4


[5/21/2023 5:49 PM] szybet
damn...


[5/21/2023 5:50 PM] tux_linux
okular?


[5/21/2023 5:50 PM] szybet
okular


[5/21/2023 5:50 PM] tux_linux
makes you sad?


[5/21/2023 5:50 PM] szybet
small pdf


[5/21/2023 5:50 PM] szybet
that it doesnt work


[5/21/2023 5:50 PM] tux_linux
yes


[5/21/2023 5:51 PM] tux_linux
maybe there are other pdf readers


[5/21/2023 5:51 PM] szybet
page calculating takes the most time when opening


[5/21/2023 5:51 PM] szybet
well, give me a link to them


[5/21/2023 5:51 PM] szybet
rest of qt based use javascript and are unmaintained


[5/21/2023 5:52 PM] tux_linux
https://github.com/turgu1/uPDF2

{Embed}
https://github.com/turgu1/uPDF2
GitHub - turgu1/uPDF2: PDF Viewer built with Qt
PDF Viewer built with Qt. Contribute to turgu1/uPDF2 development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/uPDF2-2441F


[5/21/2023 5:52 PM] tux_linux
?


[5/21/2023 5:52 PM] tux_linux
oh but now it's qt 6


[5/21/2023 5:53 PM] szybet
The following package is required by Qt and may not be already installed:

    OpenGL (package libgl-dev)


[5/21/2023 5:54 PM] szybet
idk if you saw


[5/21/2023 5:54 PM] szybet
https://github.com/baskerville/plato/pull/281

{Embed}
https://github.com/baskerville/plato/pull/281
Plato chess by bateast · Pull Request #281 · baskerville/plato
Chess application to be used with uci engine (like stockfish) as proposed here: https://github.com/bateast/plato/tree/binaries
See documentation https://github.com/bateast/plato/blob/plato_chess/do...
/mnt/data/projects/git/conversations/media/281-F7542


[5/21/2023 5:54 PM] tux_linux
oh ok run away


[5/21/2023 6:05 PM] tux_linux
we have xboard


[5/21/2023 6:05 PM] tux_linux
http://23.163.0.39/bundles/kobox/extensions/xboard.isa
http://23.163.0.39/bundles/kobox/extensions/xboard.isa.dgst


[5/21/2023 6:05 PM] szybet
this is native


[5/21/2023 6:05 PM] szybet
create a github repo with these kobox things


[5/21/2023 6:05 PM] szybet
please


[5/21/2023 6:10 PM] szybet
does maps work?


[5/21/2023 6:11 PM] tux_linux
yes?!


[5/21/2023 6:11 PM] szybet
like did you tested with the latest inkbox binary


[5/21/2023 6:11 PM] tux_linux
yes?


[5/21/2023 6:11 PM] szybet
goood?


[5/21/2023 6:11 PM] tux_linux
i guess


[5/21/2023 6:14 PM] szybet
did you tested it too?


[5/21/2023 6:14 PM] tux_linux
yes


[5/21/2023 6:14 PM] szybet
i remember conway had some problems


[5/21/2023 6:14 PM] tux_linux
no?


[5/21/2023 6:14 PM] szybet
did you tested conway


[5/21/2023 6:14 PM] tux_linux
i will do that now


[5/21/2023 6:16 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230521_161634441-1C37E.jpg


[5/21/2023 6:17 PM] szybet
cool then


[5/21/2023 6:18 PM] szybet
wo


[5/21/2023 6:18 PM] tux_linux
?


[5/21/2023 6:19 PM] szybet
gutenerg


[5/21/2023 6:19 PM] szybet
start button


[5/21/2023 6:19 PM] szybet
at least


[5/21/2023 6:19 PM] tux_linux
start button?


[5/21/2023 6:19 PM] szybet
that it dosnt start when a missclick


[5/21/2023 6:20 PM] szybet
and cancel button


[5/21/2023 6:20 PM] szybet
and maybe timeout too?


[5/21/2023 6:20 PM] tux_linux
i tried programming it yesterday but it was a mess


[5/21/2023 6:20 PM] szybet
then just add the start button


[5/21/2023 6:20 PM] szybet
please


[5/21/2023 6:20 PM] tux_linux
i will add a dialog box before i think


[5/21/2023 6:20 PM] tux_linux
do you want to sync


[5/21/2023 6:20 PM] tux_linux
smth like that


[5/21/2023 6:21 PM] szybet
yea


[5/21/2023 6:21 PM] szybet
qreversi is broken?


[5/21/2023 6:21 PM] tux_linux
no


[5/21/2023 6:21 PM] szybet
how can you use it


[5/21/2023 6:21 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230521_162148481-4F97C.jpg


[5/21/2023 6:22 PM] tux_linux
game->start new game?


[5/21/2023 6:22 PM] szybet
you cant


[5/21/2023 6:22 PM] szybet
um


[5/21/2023 6:22 PM] szybet
okay


[5/21/2023 6:22 PM] tux_linux
?


[5/21/2023 6:22 PM] szybet
nia has problems with touch


[5/21/2023 6:22 PM] szybet
a bigger button would be cool i quess


[5/21/2023 6:22 PM] szybet
but whatever


[5/21/2023 6:22 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230521_162231869-49D89.mp4


[5/21/2023 6:23 PM] tux_linux
ok


[5/21/2023 6:23 PM] tux_linux
qalculate works on nia?


[5/21/2023 6:23 PM] szybet
yes it does


[5/21/2023 6:23 PM] tux_linux
good


[5/21/2023 6:25 PM] szybet
can you make a photo?


[5/21/2023 6:25 PM] szybet
keypad is broken maybe


[5/21/2023 6:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/qalc-4B3E1.png


[5/21/2023 6:26 PM] tux_linux
what does yours look like


[5/21/2023 6:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230521_182556-18D04.jpg


[5/21/2023 6:26 PM] szybet
oops


[5/21/2023 6:26 PM] tux_linux
oh no


[5/21/2023 6:26 PM] tux_linux
hang on


[5/21/2023 6:26 PM] szybet
make a guide then


[5/21/2023 6:27 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-7207B.png


[5/21/2023 6:27 PM] tux_linux
probably because we changed default nia dpi


[5/21/2023 6:27 PM] szybet
yea


[5/21/2023 6:28 PM] tux_linux
```
cp /kobo/mnt/onboard/.adds/inkbox/qalculate /tmp
mount --bind /tmp/qalculate /kobo/mnt/onboard/.adds/inkbox/qalculate
```
edit `/tmp/qalculate` and change `FACTOR` until you get the keypad very similar to the glo hd's


[5/21/2023 6:28 PM] tux_linux
you can just start/restart the app and it should update


[5/21/2023 6:29 PM] tux_linux
send me the factor value and i will update the script


[5/21/2023 6:31 PM] tux_linux
only one checkmark remaining in my list

{Attachments}
/mnt/data/projects/git/conversations/media/image-5438D.png


[5/21/2023 6:32 PM] tux_linux
+ gutenberg thing


[5/21/2023 6:33 PM] szybet
what


[5/21/2023 6:34 PM] szybet
um what


[5/21/2023 6:34 PM] szybet
doesnt work


[5/21/2023 6:35 PM] szybet
```
kobo:/tmp# ls -shal
total 9K     
     0 drwxrwxrwt    2 root     root          80 May 21 18:34 .
     1 drwxr-xr-x   26 root     root        1.0K May 20 22:35 ..
     4 -rw-r--r--    1 root     root           6 May 21 18:06 boot
     4 -rwxr-xr-x    1 root     root        1.3K May 21 18:34 qalculate
kobo:/tmp# find .
.
./qalculate
./boot
kobo:/tmp# 
```


[5/21/2023 6:35 PM] szybet
saved sketches can't be viewd until database library regeneration


[5/21/2023 6:35 PM] tux_linux
what doesn't work


[5/21/2023 6:35 PM] szybet
just a note, we shouldnt care


[5/21/2023 6:36 PM] tux_linux
well, maybe user would want to get them on his computer


[5/21/2023 6:36 PM] szybet
oh its a script


[5/21/2023 6:36 PM] szybet
okay


[5/21/2023 6:36 PM] tux_linux
they are saved at the right place i hope?


[5/21/2023 6:36 PM] tux_linux
at least


[5/21/2023 6:36 PM] szybet
ye


[5/21/2023 6:37 PM] tux_linux
good


[5/21/2023 6:43 PM] szybet
0.69 is fine


[5/21/2023 6:43 PM] szybet
for qualculate


[5/21/2023 6:43 PM] tux_linux
ok
picture?


[5/21/2023 6:43 PM] tux_linux
thanks


[5/21/2023 6:46 PM] .kitkat1.


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230521_184546-89BA2.jpg


[5/21/2023 6:46 PM] tux_linux
good


[5/21/2023 7:18 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/sync-4543C.png


[5/21/2023 7:50 PM] szybet
😄


[5/21/2023 8:09 PM] szybet
should i put feathernotes there or do we not care


[5/21/2023 8:22 PM] szybet
```
 * Failed to mount temporary filesystem at '/data/onboard/.apps/Conway/Conway/usr'.
 [ !! ]
mkdir: cannot create directory ‘/data/onboard/.apps/Conway/Conway/usr’: Function not implemented
 * Failed to create '/data/onboard/.apps/Conway/Conway/usr/share/zoneinfo/'
 [ !! ]
mount: mounting /kobo/usr/share/zoneinfo/ on /data/onboard/.apps/Conway/Conway/usr/share/zoneinfo/ failed: No such file or directory
 * Failed to bind mount path: '/kobo/usr/share/zoneinfo/' at '/data/onboard/.apps/Conway/Conway/usr/share/zoneinfo/'
 [ !! ]
 * Successfully set up application 'Conway'
mount: mounting tmpfs on /data/onboard/.apps/Maps/Maps/usr failed: No such file or directory
 * Failed to mount temporary filesystem at '/data/onboard/.apps/Maps/Maps/usr'.
 [ !! ]
mkdir: cannot create directory ‘/data/onboard/.apps/Maps/Maps/usr’: Function not implemented
 * Failed to create '/data/onboard/.apps/Maps/Maps/usr/share/zoneinfo/'
 [ !! ]
mount: mounting /kobo/usr/share/zoneinfo/ on /data/onboard/.apps/Maps/Maps/usr/share/zoneinfo/ failed: No such file or directory
 * Failed to bind mount path: '/kobo/usr/share/zoneinfo/' at '/data/onboard/.apps/Maps/Maps/usr/share/zoneinfo/'
 [ !! ]
 * Successfully set up application 'Maps'
mount: mounting tmpfs on /data/onboard/.apps/QtFrotz/QtFrotz/usr failed: No such file or directory
 * Failed to mount temporary filesystem at '/data/onboard/.apps/QtFrotz/QtFrotz/usr'.
 [ !! ]
mkdir: cannot create directory ‘/data/onboard/.apps/QtFrotz/QtFrotz/usr’: Function not implemented
 * Failed to create '/data/onboard/.apps/QtFrotz/QtFrotz/usr/share/zoneinfo/'
 [ !! ]
mount: mounting /kobo/usr/share/zoneinfo/ on /data/onboard/.apps/QtFrotz/QtFrotz/usr/share/zoneinfo/ failed: No such file or directory
 * Failed to bind mount path: '/kobo/usr/share/zoneinfo/' at '/data/onboard/.apps/QtFrotz/QtFrotz/usr/share/zoneinfo/'
 [ !! ]
```


[5/21/2023 8:22 PM] szybet
did you fixed this


[5/21/2023 8:22 PM] szybet
and im outdated


[5/21/2023 8:38 PM] tux_linux
This is normal


[5/21/2023 8:38 PM] szybet
🥴


[5/21/2023 8:38 PM] tux_linux
Old apps didn't have usr in their isa files


[5/21/2023 8:38 PM] tux_linux
It isn't harmful


[5/21/2023 8:38 PM] szybet
i know


[5/21/2023 8:58 PM] tux_linux
Maybe?


[5/21/2023 8:59 PM] szybet
only keyboard


[5/21/2023 8:59 PM] tux_linux
Yea


[5/21/2023 8:59 PM] tux_linux
Add a warning in the readme maybe


[5/21/2023 9:00 PM] szybet
you can create a category, second table saying like idk requires additional steps


[5/21/2023 9:00 PM] szybet
and link feathernotes


[5/21/2023 9:00 PM] tux_linux
Hmm


[5/21/2023 9:00 PM] szybet
would look cool that we have more of them


[5/21/2023 9:00 PM] szybet
proof of concept


[5/21/2023 9:00 PM] szybet
link to the repo & link to the video


[5/21/2023 9:06 PM] szybet
https://github.com/Szybet/niAudio/tree/main/apps-on-kobo/okular

{Embed}
https://github.com/Szybet/niAudio/tree/main/apps-on-kobo/okular
niAudio/apps-on-kobo/okular at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[5/21/2023 9:06 PM] szybet
preserved for the future


[5/21/2023 9:06 PM] szybet
https://github.com/Szybet/okular-crosscompilation-hell

{Embed}
https://github.com/Szybet/okular-crosscompilation-hell
GitHub - Szybet/okular-crosscompilation-hell: Okular running on Ink...
Okular running on InkBox OS. This is a trash bin of all the components, repos. Check https://github.com/Szybet/niAudio/tree/main/apps-on-kobo/okular for more info - GitHub - Szybet/okular-crosscomp...
/mnt/data/projects/git/conversations/media/okular-crosscompilation-hell-A6B7C


[5/21/2023 9:07 PM] ninuje
This will horribly break


[5/21/2023 9:07 PM] szybet
what


[5/21/2023 9:09 PM] ninuje
On most devices, the kernel "corrects" rotation behind your back (i.e., in the write/ioctl handler)


[5/21/2023 9:09 PM] ninuje
TL;DR: Use fbink_set_fb_info (or fbdepth)


[5/21/2023 9:09 PM] szybet
i have been using it for a month or more, works fine?


[5/21/2023 9:09 PM] szybet
well on the nia at least


[5/21/2023 9:10 PM] ninuje
Keyword being "on most devices"


[5/21/2023 9:10 PM] szybet
😄


[5/21/2023 9:10 PM] szybet
we dont use it much


[5/21/2023 9:10 PM] szybet
so no worries


[5/21/2023 9:10 PM] ninuje
I'm not entirely sure how the Nia is even *supposed* to behave on that front, FWIW


[5/21/2023 9:32 PM] szybet
https://github.com/Szybet/niAudio/tree/main/apps-on-kobo/inkbox-scripts/binaries

{Embed}
https://github.com/Szybet/niAudio/tree/main/apps-on-kobo/inkbox-scripts/binaries
niAudio/apps-on-kobo/inkbox-scripts/binaries at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[5/21/2023 9:32 PM] szybet
collected things


[5/21/2023 9:45 PM] szybet
what? what does it mean


[5/21/2023 9:56 PM] tux_linux
Your high cpu usage


[5/21/2023 9:56 PM] szybet
oh this


[5/21/2023 9:56 PM] szybet
yea


[5/21/2023 9:56 PM] szybet
on it


[5/21/2023 10:32 PM] tux_linux
?


[5/21/2023 10:48 PM] tux_linux
do you plan on debugging it soon?


[5/21/2023 10:49 PM] szybet
now


[5/21/2023 10:49 PM] tux_linux
good


[5/21/2023 10:50 PM] szybet
my disk speed is a problem with getting a fresh inkbox


[5/21/2023 11:07 PM] szybet
how do i use xorg-base-rootfs if there is no release file


[5/21/2023 11:07 PM] szybet
i want working keyboard


[5/21/2023 11:07 PM] tux_linux
its complicated


[5/21/2023 11:07 PM] szybet
;-;


[5/21/2023 11:08 PM] tux_linux
maybe the best idea is to tar up the xorg-base-rootfs repo, excluding git file


[5/21/2023 11:08 PM] szybet
because


[5/21/2023 11:11 PM] szybet
can you send me your xorg thing done so i can test the keyboard


[5/21/2023 11:11 PM] szybet
then describe the problem


[5/21/2023 11:11 PM] tux_linux
```
mount -o remount,rw /opt/X11/base
mount /opt/X11/base/xorg.img /mnt
rm -rf /mnt/**
tar -xvf xorg.tar.xz -C /mnt
sync
```


[5/21/2023 11:13 PM] tux_linux
edited command


[5/21/2023 11:15 PM] szybet
w h a t


[5/21/2023 11:18 PM] szybet
i dont understand


[5/21/2023 11:19 PM] szybet
if you send the file i will test keyboard


[5/21/2023 11:19 PM] szybet
and a script is needed tho


[5/21/2023 11:24 PM] tux_linux
it's complicated


[5/21/2023 11:25 PM] szybet
ok its xorg i dont care


[5/21/2023 11:25 PM] szybet
but send the package


[5/21/2023 11:25 PM] tux_linux
ill send you the file


[5/21/2023 11:25 PM] szybet
in what ammount of time


[5/21/2023 11:25 PM] tux_linux
15m


[5/21/2023 11:25 PM] szybet
um


[5/21/2023 11:25 PM] szybet
hmhm


[5/21/2023 11:26 PM] tux_linux
5m


[5/21/2023 11:26 PM] szybet
3


[5/21/2023 11:29 PM] tux_linux
im trying


[5/21/2023 11:30 PM] szybet
😐


[5/21/2023 11:32 PM] tux_linux
uploading

{Reactions}
👍 

[5/21/2023 11:32 PM] tux_linux
ready in 1m30


[5/21/2023 11:32 PM] tux_linux
nvm speed went down


[5/21/2023 11:33 PM] szybet
```
% ls X11 
base.img  extensions-base.img  extensions-user.img  rootfs
```


[5/21/2023 11:33 PM] szybet
where do i put it


[5/21/2023 11:33 PM] tux_linux
now up


[5/21/2023 11:33 PM] tux_linux
you will replace base.img


[5/21/2023 11:33 PM] tux_linux
(not ready yet)


[5/21/2023 11:33 PM] szybet
oke


[5/21/2023 11:34 PM] tux_linux
50%


[5/21/2023 11:35 PM] tux_linux
65%


[5/21/2023 11:36 PM] szybet
yeaaa no 2.0 until images are sent to the faster server


[5/21/2023 11:36 PM] szybet
just reminding


[5/21/2023 11:38 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/base.img


[5/21/2023 11:38 PM] tux_linux
it's been sent to the faster server

{Reactions}
👍 

[5/21/2023 11:39 PM] szybet
thanks


[5/21/2023 11:40 PM] szybet
i will test now if the clear system works, if there are still issues


[5/21/2023 11:40 PM] szybet
and tommorow the rest if it persist


[5/21/2023 11:40 PM] szybet
because sleep and stuff


[5/21/2023 11:43 PM] szybet
`c75c21f46dc0f2d8900a921e82cc2917  base.img`


[5/21/2023 11:48 PM] szybet
`/mnt/onboard/.adds/inkbox/inkbox-bin: error while loading shared libraries: libQt5Widgets.so.5: cannot open shared object file: No such file or directory`


[5/21/2023 11:49 PM] szybet
how

{Attachments}
/mnt/data/projects/git/conversations/media/message-CA11B.txt


[5/21/2023 11:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-9E287.txt


[5/21/2023 11:52 PM] szybet
script is borked


[5/22/2023 12:07 AM] tux_linux
did you update the gui bundle


[5/22/2023 12:07 AM] szybet
i did


[5/22/2023 12:07 AM] szybet
repaired this


[5/22/2023 12:07 AM] tux_linux
did you clear the rootfs cache


[5/22/2023 12:07 AM] szybet
will made a pull request


[5/22/2023 12:07 AM] szybet
yes i did


[5/22/2023 12:07 AM] tux_linux
it works for me


[5/22/2023 12:07 AM] tux_linux
its not normal


[5/22/2023 12:08 AM] szybet
this is the cleanest build of inkbox i ever had


[5/22/2023 12:08 AM] szybet
script path are broken, you can see it eassly


[5/22/2023 12:11 AM] szybet
and those 2 problems are still there, after cleaning


[5/22/2023 12:11 AM] szybet
well, tommorow the fix


[5/22/2023 12:11 AM] szybet
both wifi related


[5/22/2023 12:13 AM] szybet
https://github.com/Kobo-InkBox/gui-bundle/pull/2

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/pull/2
fix paths by Szybet · Pull Request #2 · Kobo-InkBox/gui-bundle
kobo:/# sh -x /mnt/onboard/.adds/inkbox/inkbox.sh
+ killall -q nickel sickel hindenburg
+ cd /mnt/onboard/.adds/inkbox
+ cat .config/09-dpi/config
+ DPI=212
+ cat /opt/inkbox_genuine
+ GENUINE_OS=t...
/mnt/data/projects/git/conversations/media/2-14A83


[5/22/2023 12:13 AM] szybet
oh we have the bot


[5/22/2023 12:13 AM] szybet
well


[5/22/2023 12:18 AM] szybet
Just try it, if it works for you and me then we are good

{Reactions}
👍 

[5/22/2023 12:37 AM] tux_linux
Does xorg work


[5/22/2023 12:09 PM] szybet
https://www.youtube.com/@TheLinuxEXP

{Embed}
https://www.youtube.com/@TheLinuxEXP
The Linux Experiment
Making Linux accessible: no techno babble, no super technical content. Just Linux desktop news, simple tutorials, application spotlights, and opinion pieces trying to stay positive, without gatekeeping.

👏 SUPPORT THE CHANNEL:
Get access to a weekly podcast, vote on the next topics I cover, and get your name in the credits:

YouTube: https://www...
/mnt/data/projects/git/conversations/media/AGIKgqM9_Fe55a_6wP8fpXXrjIV1IeIYAd_59MBmuT-59C92


[5/22/2023 12:09 PM] szybet
for 2.0, will you write to this guy?


[5/22/2023 12:09 PM] szybet
didn't tested, will today


[5/22/2023 6:50 PM] tux_linux
https://www.reddit.com/r/ProgrammerHumor/comments/13osiph/step_1_of_being_a_programmer_oh_that_should_be/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button
This

{Embed}
https://www.reddit.com/r/ProgrammerHumor/comments/13osiph/step_1_of_being_a_programmer_oh_that_should_be/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button
r/ProgrammerHumor - Step 1 of being a programmer: Oh that should be...
0 votes and 15 comments so far on Reddit
/mnt/data/projects/git/conversations/media/um7lud7opf1b1-C08D1.jpg


[5/22/2023 6:51 PM] tux_linux
Maybe


[5/22/2023 7:00 PM] szybet
those issues are related


[5/22/2023 7:00 PM] szybet
well easier fix then


[5/22/2023 8:33 PM] szybet
`(II) Server terminated successfully (0). Closing log file.`


[5/22/2023 8:33 PM] szybet
should this happen on xorg launch?


[5/22/2023 8:37 PM] tux_linux
yes


[5/22/2023 8:48 PM] szybet
it doesnt work


[5/22/2023 8:48 PM] szybet
i waited 15 minutes for kterm


[5/22/2023 8:51 PM] tux_linux
Logs


[5/22/2023 8:51 PM] szybet
where


[5/22/2023 8:51 PM] tux_linux
Restart inkbox Gui in terminal


[5/22/2023 8:51 PM] tux_linux
Then launch a kobox app


[5/22/2023 8:51 PM] szybet
good


[5/22/2023 8:52 PM] szybet
does reboot from gui work dor you?


[5/22/2023 8:57 PM] szybet
```
chroot: failed to run command ‘/usr/local/bin/wmctrl’: No such file or directory
```


[5/22/2023 8:57 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-4B40E.txt


[5/22/2023 9:01 PM] tux_linux
oh no what happened


[5/22/2023 9:02 PM] tux_linux
yes?!?


[5/22/2023 9:02 PM] tux_linux
`find /opt/X11/rootfs/write`


[5/22/2023 9:02 PM] szybet
```
 
Current version of pixman: 0.38.4
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: "/var/log/Xorg.0.log", Time: Mon May 22 18:52:01 2023
(==) Using config file: "/etc/X11/xorg.conf"
(==) Using system config directory "/usr/share/X11/xorg.conf.d"
The XKEYBOARD keymap compiler (xkbcomp) reports:
> Warning:          Unsupported high keycode 372 for name <I372> ignored
>                   X11 cannot support keycodes above 255.
>                   This warning only shows for the first high keycode.
> Internal error:   Could not resolve keysym XF86MonBrightnessCycle
> Internal error:   Could not resolve keysym XF86RotationLockToggle
Errors from xkbcomp are not fatal to the X server
X11 windowing system was successfully initialized.
```


[5/22/2023 9:03 PM] tux_linux
yes, this is completely normal


[5/22/2023 9:03 PM] tux_linux
does your screen turn to black


[5/22/2023 9:03 PM] tux_linux
what was the last time you launched xorg


[5/22/2023 9:03 PM] tux_linux
a year ago?


[5/22/2023 9:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-54A80.txt


[5/22/2023 9:03 PM] szybet
half


[5/22/2023 9:03 PM] szybet
yes


[5/22/2023 9:04 PM] szybet
the wgat


[5/22/2023 9:04 PM] tux_linux
ls /xorg/usr/local/bin


[5/22/2023 9:05 PM] szybet
ls /xorg/usr/local/bin
FBInk              kterm              matchbox-keyboard
fbink_xdamage      kterm.conf         xvkbd


[5/22/2023 9:05 PM] tux_linux
well maybe i added wmctrl only in my rootfs cache


[5/22/2023 9:05 PM] tux_linux
and forgot to update it


[5/22/2023 9:05 PM] szybet
can you share libevdev and fbink libraries like now?


[5/22/2023 9:06 PM] szybet
or do i need to compile


[5/22/2023 9:06 PM] tux_linux
https://github.com/Kobo-InkBox/xorg-base-rootfs/commit/a20548d6b819ff5f521f5bbc06031d0a72a03b9a
just apply those changes

{Embed}
https://github.com/Kobo-InkBox/xorg-base-rootfs/commit/a20548d6b819ff5f521f5bbc06031d0a72a03b9a
Add `wmctrl` for `matchbox-keyboard` · Kobo-InkBox/xorg-base-rootfs...
/mnt/data/projects/git/conversations/media/a20548d6b819ff5f521f5bbc06031d0a72a03b9a-0E3CF


[5/22/2023 9:06 PM] tux_linux
throw wmctrl at the right place and edit the script


[5/22/2023 9:06 PM] tux_linux
why do you need them


[5/22/2023 9:06 PM] szybet
ipd?


[5/22/2023 9:06 PM] tux_linux
good


[5/22/2023 9:06 PM] tux_linux
why do you need them recompiled?


[5/22/2023 9:07 PM] szybet
i *cleaned* my inkbox install, repos, everything


[5/22/2023 9:07 PM] szybet
we should have a set of compiled binaries in ipd


[5/22/2023 9:07 PM] tux_linux
they have been compiled on arm64, maybe it isn't compatible
i'm not sure


[5/22/2023 9:07 PM] szybet
they are


[5/22/2023 9:07 PM] tux_linux
oh i think i have my x86_64 ones


[5/22/2023 9:07 PM] szybet
they are compatible


[5/22/2023 9:07 PM] szybet
if you can, send them


[5/22/2023 9:07 PM] tux_linux
yeah but those were compiled with a newer musl version


[5/22/2023 9:07 PM] tux_linux
or idk


[5/22/2023 9:07 PM] tux_linux
it failed to launch


[5/22/2023 9:07 PM] szybet
okay nevermind


[5/22/2023 9:07 PM] szybet
i will compile


[5/22/2023 9:08 PM] tux_linux
i have older ones


[5/22/2023 9:08 PM] szybet
working ones?


[5/22/2023 9:08 PM] tux_linux
yes


[5/22/2023 9:09 PM] szybet
well send them


[5/22/2023 9:09 PM] tux_linux
compressing


[5/22/2023 9:10 PM] szybet
can i create a predefined folder for these thank you?


[5/22/2023 9:10 PM] tux_linux
?


[5/22/2023 9:12 PM] szybet
precompiled-libraries


[5/22/2023 9:12 PM] tux_linux
add them in compiled binaries


[5/22/2023 9:12 PM] tux_linux
they are binaries as well


[5/22/2023 9:12 PM] szybet
it doesnt, i will look into it


[5/22/2023 9:12 PM] szybet
its a diffrent toolchain


[5/22/2023 9:12 PM] tux_linux
might be reboot -f thing i was talking about


[5/22/2023 9:12 PM] tux_linux
wait


[5/22/2023 9:12 PM] szybet
i would need to add it


[5/22/2023 9:13 PM] tux_linux
which one


[5/22/2023 9:13 PM] szybet
it holds on the gui,doesnt even launch the script propably


[5/22/2023 9:13 PM] szybet
the screen doesnt change


[5/22/2023 9:13 PM] szybet
what


[5/22/2023 9:13 PM] tux_linux
it works here


[5/22/2023 9:13 PM] tux_linux
i just tested it


[5/22/2023 9:13 PM] tux_linux
which toolchain


[5/22/2023 9:14 PM] szybet
oops


[5/22/2023 9:14 PM] tux_linux
did you flash a new kernel


[5/22/2023 9:14 PM] szybet
its the musl one


[5/22/2023 9:14 PM] szybet
yes i did


[5/22/2023 9:14 PM] tux_linux
it is already available in kernel repo


[5/22/2023 9:14 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/tree/master/toolchain/armv7l-linux-musleabihf-cross


[5/22/2023 9:15 PM] szybet
yes, then we would need to copy it to compiled binaries


[5/22/2023 9:15 PM] tux_linux
can't you just make a link to it?


[5/22/2023 9:15 PM] tux_linux
cloning kernel repo is already really long, i wouldn't want compiled-binaries to become a >1G monster clone repo


[5/22/2023 9:16 PM] szybet
overcomplicating


[5/22/2023 9:16 PM] szybet
so will ytou send the libs? i will put them in the kernel repo for now, without any changes or commits with them


[5/22/2023 9:17 PM] tux_linux
still compressing


[5/22/2023 9:23 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/ipd.sqsh
whole git repo


[5/22/2023 9:23 PM] tux_linux
pick what you want


[5/22/2023 9:24 PM] szybet
thank you

{Reactions}
👍 

[5/22/2023 9:25 PM] szybet
```
kobo:~# chroot /kobo
kobo:/# /sbin/reboot
/bin/ash: /sbin/reboot: not found
```


[5/22/2023 9:25 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/22/2023 9:25 PM] tux_linux
hmm


[5/22/2023 9:25 PM] szybet
you didn'y updated gui-rootfs


[5/22/2023 9:25 PM] szybet
i msure


[5/22/2023 9:26 PM] tux_linux
i should have


[5/22/2023 9:26 PM] szybet
im surest


[5/22/2023 9:26 PM] szybet
XD


[5/22/2023 9:28 PM] tux_linux
it's there?!
https://github.com/Kobo-InkBox/gui-rootfs/blob/main/sbin/reboot


[5/22/2023 9:28 PM] szybet
h o w


[5/22/2023 9:28 PM] tux_linux
and it's been updated (normally)
```
kobo:~# cat /kobo/sbin/reboot 
#!/bin/sh

IBXD_PATH="/opt/ibxd"

echo "reboot ${@}" > "${IBXD_PATH}"
exit ${?}
kobo:~# ls -shal /opt/storage/gui_rootfs
gui_rootfs.isa       gui_rootfs.isa.dgst  gui_rootfs/
kobo:~# ls -shal /opt/storage/gui_rootfs.isa
 25884 -rw-r--r--    1 root     root       25.3M Apr 23 20:43 /opt/storage/gui_rootfs.isa
kobo:~#
```


[5/22/2023 9:28 PM] tux_linux
`find /opt/gui_rootfs/write`


[5/22/2023 9:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-E7AE4.txt


[5/22/2023 9:29 PM] szybet
clean


[5/22/2023 9:30 PM] szybet
its even in the cloned repo


[5/22/2023 9:30 PM] szybet
how


[5/22/2023 9:30 PM] tux_linux
`ls /kobo/sbin -shal`


[5/22/2023 9:30 PM] szybet
sbin is missing


[5/22/2023 9:30 PM] tux_linux
hehe


[5/22/2023 9:30 PM] szybet
what the fuck


[5/22/2023 9:30 PM] szybet
XD


[5/22/2023 9:31 PM] tux_linux
`ls -shal /opt/gui_rootfs/write`


[5/22/2023 9:31 PM] tux_linux
might get some dotfiles out


[5/22/2023 9:31 PM] szybet
```
kobo:~# ls -shal /opt/gui_rootfs/write
total 48K    
    12 drwxr-xr-x    9 root     root       12.0K May 22 19:36 .
     4 drwxr-xr-x    5 root     root        4.0K May 26  2021 ..
     4 drwxrwx---    4 root     root        4.0K May 20 23:21 .unionfs-fuse
     4 drwxr-xr-x    2 root     root        4.0K May 21 23:46 bin
     4 drwxr-xr-x    2 root     root        4.0K May 21 23:46 etc
     4 drwxr-xr-x    2 root     root        4.0K May 21 23:45 inkbox
     4 -rwxr-xr-x    1 root     root         165 May 22 19:36 launch_inkbox.sh
     4 dr-xr-xr-x    2 root     root        4.0K May 21 23:46 lib
     4 drwxr-xr-x    2 root     root        4.0K May 21 23:51 root
     4 drwxr-xr-x    4 root     root        4.0K May 21 23:46 usr
kobo:~# 
```


[5/22/2023 9:31 PM] tux_linux
go into .unionfs-fuse


[5/22/2023 9:32 PM] szybet
```
kobo:~# ls -shal /opt/gui_rootfs/write/.unionfs-fuse/
total 24K    
     4 drwxrwx---    4 root     root        4.0K May 20 23:21 .
    12 drwxr-xr-x    9 root     root       12.0K May 22 19:36 ..
     4 drwxrwx---    2 root     root        4.0K May 20 23:21 etc
     4 drwx------    2 root     root        4.0K May 19 21:41 sbin_HIDDEN~
kobo:~# 
```


[5/22/2023 9:32 PM] tux_linux
hehe


[5/22/2023 9:32 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/22/2023 9:32 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/22/2023 9:32 PM] szybet
what is going on


[5/22/2023 9:32 PM] tux_linux
no idea, strange that something made it disappear in the first place


[5/22/2023 9:32 PM] tux_linux
i hope it's you


[5/22/2023 9:32 PM] tux_linux
otherwise we have a problem


[5/22/2023 9:32 PM] szybet
noooo


[5/22/2023 9:32 PM] szybet
i dont even know what this is


[5/22/2023 9:32 PM] szybet
how do i reenable it


[5/22/2023 9:32 PM] tux_linux
well


[5/22/2023 9:32 PM] tux_linux
delete sbin_HIDDEN thing


[5/22/2023 9:33 PM] tux_linux
maybe reboot


[5/22/2023 9:33 PM] tux_linux
and it should be back


[5/22/2023 9:33 PM] tux_linux
it shows it's been there since may 19


[5/22/2023 9:33 PM] tux_linux
remember anything special?


[5/22/2023 9:34 PM] szybet
okular madness


[5/22/2023 9:34 PM] szybet
but i kept everything in another file


[5/22/2023 9:34 PM] szybet
dir


[5/22/2023 9:38 PM] szybet
repair the xorg base


[5/22/2023 9:38 PM] szybet
and send me it


[5/22/2023 9:39 PM] szybet
i know i could just put those files there, but thats not the point, i want to test the final image


[5/22/2023 9:41 PM] szybet
sbin repaired

{Reactions}
👍 

[5/22/2023 9:41 PM] szybet
;-;


[5/22/2023 9:42 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/x11-write.tar.xz
```
rm -rf /opt/X11/rootfs/write/**
# ensure no dotfiles remain behind
tar -xvf /tmp/x11-write.tar.xz -C /opt/X11/rootfs/write/
reboot
```


[5/22/2023 9:42 PM] szybet
https://github.com/Szybet/inkbox-power-deamon/tree/main/.vscode

{Embed}
https://github.com/Szybet/inkbox-power-deamon/tree/main/.vscode
inkbox-power-deamon/.vscode at main · Szybet/inkbox-power-deamon
further development at https://github.com/Kobo-InkBox/inkbox-power-daemon - inkbox-power-deamon/.vscode at main · Szybet/inkbox-power-deamon
/mnt/data/projects/git/conversations/media/inkbox-power-deamon-7D404


[5/22/2023 9:42 PM] tux_linux
it's pretty much that, it's just an overlay on top
it should work with the final image
besides it would take way too much time to upload


[5/22/2023 9:42 PM] szybet
you deleted this directory?


[5/22/2023 9:43 PM] tux_linux
maybe, idk?


[5/22/2023 9:43 PM] szybet
;/


[5/22/2023 9:43 PM] szybet
it took ages to figure out to make clangd work


[5/22/2023 9:43 PM] tux_linux
sorry


[5/22/2023 9:43 PM] szybet
ok, but i will not test again


[5/22/2023 9:43 PM] tux_linux
ok


[5/22/2023 10:02 PM] szybet
in todays episode of segmentation faults:
```cpp
bool readConfigBool(string path) {
  ifstream indata;
  string stringData;
  indata.open(path);
  if (!indata) {
    log("Couldn't read config file: " + path, emitter);
    return "none";
  }
  indata >> stringData;
  while (!indata.eof()) {
    indata >> stringData;
  }
  indata.close();

  // This approach doesn't care about special characters ('\n')
  if(normalContains(stringData, "true") == true) {
    log("Path: " + path + " contains a true boolean", emitter);\
    return true;
  } else {
    log("Path: " + path + " contains a false boolean", emitter);
    return false;
  }
}
```


[5/22/2023 10:03 PM] tux_linux
;\


[5/22/2023 10:03 PM] tux_linux
;\


[5/22/2023 10:03 PM] tux_linux
;\


[5/22/2023 10:03 PM] szybet
repaired it


[5/22/2023 10:03 PM] szybet
¯\_(ツ)_/¯


[5/22/2023 10:03 PM] tux_linux
oh actually it wouldn't have mattered?


[5/22/2023 10:04 PM] tux_linux
idk


[5/22/2023 10:04 PM] szybet
it would be a overflow for sure

{Reactions}
👍 

[5/22/2023 10:04 PM] szybet
not a big one


[5/22/2023 10:10 PM] szybet
um O_RDONLY?


[5/22/2023 10:10 PM] szybet
for blank


[5/22/2023 10:11 PM] tux_linux
yes


[5/22/2023 10:11 PM] tux_linux
it's strange


[5/22/2023 10:11 PM] tux_linux
it works


[5/22/2023 10:11 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/22/2023 10:11 PM] tux_linux
it's niluje quality code


[5/22/2023 10:11 PM] tux_linux
don't touch it


[5/22/2023 10:11 PM] tux_linux
ever


[5/22/2023 10:11 PM] szybet
ok i trust it then


[5/22/2023 10:11 PM] szybet
XD


[5/22/2023 10:17 PM] szybet
`    if ! grep -q "false" /boot/flags/EINK_BLANK 2>/dev/null; then`


[5/22/2023 10:17 PM] szybet
explain


[5/22/2023 10:17 PM] szybet
should i also check this file for true false


[5/22/2023 10:17 PM] szybet
or just check if xorg is running & device model


[5/22/2023 10:17 PM] tux_linux
It's just saying: if i don't grep false in this file, then


[5/22/2023 10:18 PM] tux_linux
yes


[5/22/2023 10:18 PM] szybet
for what purpuse


[5/22/2023 10:18 PM] szybet
exactly


[5/22/2023 10:18 PM] tux_linux
well, if the user finds out it's causing performance issues, idk?


[5/22/2023 10:18 PM] szybet
ok


[5/22/2023 10:18 PM] szybet
but blank shouldn't run at all if xorg is not running?


[5/22/2023 10:18 PM] tux_linux
no it shouldn't


[5/22/2023 10:19 PM] tux_linux
except for kt


[5/22/2023 10:19 PM] szybet
😐


[5/22/2023 10:19 PM] tux_linux
you can add
if(EINK_BLANK == true)
----if(kt)
------> run blank
---- else
-------- if(device) && if(runs_xorg)
-----------> run blank


[5/22/2023 10:20 PM] szybet
```
  // Blank checking for xorg
  if(model == "kt") {
    blankNeeded = true;
  }
  else {
    if(xorgRunning == true) {
      if (model == "n306" or model == "n873") {
        blankNeeded = true;
      }
      else {
        blankNeeded = false;
      }
    }
    else {
      blankNeeded = false;
    }
  }

  if(blankNeeded == true) {
    log("Blank will be used", "functions");
  }
```


[5/22/2023 10:21 PM] tux_linux
yeah basically that
and you can just define `blankNeeded = false` at the top to alleviate the need to define it the else block
you also need to check in /boot/flags/EINK_BLANK


[5/22/2023 10:22 PM] tux_linux
main condition before all others could be executed


[5/22/2023 10:22 PM] szybet
no because thats not how all configs work


[5/22/2023 10:22 PM] szybet
and its not efficient


[5/22/2023 10:22 PM] tux_linux
?


[5/22/2023 10:22 PM] tux_linux
?


[5/22/2023 10:22 PM] szybet
at the top thing


[5/22/2023 10:23 PM] tux_linux
why


[5/22/2023 10:23 PM] szybet
now i set the bool one time


[5/22/2023 10:23 PM] szybet
always


[5/22/2023 10:23 PM] szybet
in your way, it would sometimes be 2


[5/22/2023 10:23 PM] tux_linux
it's dangerous


[5/22/2023 10:23 PM] szybet
no


[5/22/2023 10:23 PM] szybet
else is not


[5/22/2023 10:23 PM] tux_linux
can cause segfaults if you forget to handle it


[5/22/2023 10:24 PM] szybet
i dont


[5/22/2023 10:24 PM] szybet
every if else is managed


[5/22/2023 10:24 PM] szybet
thats how the whole program works


[5/22/2023 10:36 PM] szybet
anything else left for me to do?


[5/22/2023 10:37 PM] tux_linux
test if encryption works on nia


[5/22/2023 10:37 PM] tux_linux
**with latest commits in gui**


[5/22/2023 10:37 PM] tux_linux
namely this one
https://github.com/Kobo-InkBox/inkbox/commit/c733dd23abfc0a5e21e8dc10cc66f3e69cc7e8e9


[5/22/2023 10:38 PM] szybet
i have it already then

{Reactions}
👍 

[5/22/2023 10:55 PM] szybet
```
kobo:/# find /opt/X11/rootfs/write/.unionfs/
/opt/X11/rootfs/write/.unionfs/
/opt/X11/rootfs/write/.unionfs/usr
/opt/X11/rootfs/write/.unionfs/usr/lib
/opt/X11/rootfs/write/.unionfs/usr/lib/gdk-pixbuf-2.0
/opt/X11/rootfs/write/.unionfs/usr/lib/gdk-pixbuf-2.0/2.10.0
/opt/X11/rootfs/write/.unionfs/usr/share
/opt/X11/rootfs/write/.unionfs/usr/share/glib-2.0
/opt/X11/rootfs/write/.unionfs/usr/share/glib-2.0/schemas
/opt/X11/rootfs/write/.unionfs/var
/opt/X11/rootfs/write/.unionfs/var/log_HIDDEN~
/opt/X11/rootfs/write/.unionfs/var/cache
/opt/X11/rootfs/write/.unionfs/var/cache/fontconfig
kobo:/# 
```


[5/22/2023 10:55 PM] szybet
help im scared


[5/22/2023 10:56 PM] tux_linux
it's normal


[5/22/2023 11:05 PM] szybet
and accept my pr's


[5/22/2023 11:19 PM] szybet
netsurf is suprisingly usable now


[5/22/2023 11:19 PM] tux_linux
good


[5/22/2023 11:20 PM] szybet
i have too big fingers for that keyboard


[5/22/2023 11:20 PM] szybet
¯\_(ツ)_/¯


[5/22/2023 11:21 PM] szybet
well now basically you can finish stuff & create image for the nia and one of your device and start testing


[5/22/2023 11:21 PM] szybet
then release


[5/22/2023 11:22 PM] tux_linux
ok good


[5/22/2023 11:22 PM] tux_linux
thanks


[5/22/2023 11:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230522_232402-D1A2E.jpg


[5/22/2023 11:24 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/22/2023 11:24 PM] szybet
kterm has a stroke


[5/22/2023 11:24 PM] tux_linux
fbdepth


[5/22/2023 11:24 PM] tux_linux
-d 8


[5/22/2023 11:24 PM] tux_linux
16


[5/22/2023 11:24 PM] tux_linux
32


[5/22/2023 11:24 PM] tux_linux
idk


[5/22/2023 11:24 PM] szybet
did you fixed it in ipd?


[5/22/2023 11:25 PM] tux_linux
no


[5/22/2023 11:25 PM] tux_linux
it doesn't seem to be fixable


[5/22/2023 11:25 PM] tux_linux
it just


[5/22/2023 11:25 PM] tux_linux
happens


[5/22/2023 11:25 PM] szybet
spamming it when blanking wouldn't work?


[5/22/2023 11:25 PM] szybet
or before launching xorg?


[5/22/2023 11:25 PM] tux_linux
no


[5/22/2023 11:25 PM] tux_linux
probably not


[5/22/2023 11:25 PM] szybet
did you asken niluje


[5/22/2023 11:25 PM] tux_linux
no


[5/22/2023 11:26 PM] szybet
ask then


[5/22/2023 11:26 PM] tux_linux
it's crazy, it works one or two times and then it requires a reboot to work (or a manual fbdepth change to whatever value you don't know beforehand)


[5/22/2023 11:26 PM] tux_linux
i don't think he would have any clue


[5/22/2023 11:27 PM] szybet
ask niluje


[5/22/2023 11:27 PM] szybet
then why we dont set it with blank


[5/22/2023 11:28 PM] tux_linux
it has nothing to do with blank


[5/22/2023 11:28 PM] tux_linux
it's not even related to watchdog


[5/22/2023 11:28 PM] tux_linux
it's just a mess


[5/22/2023 11:28 PM] szybet
i know


[5/22/2023 11:28 PM] szybet
but just


[5/22/2023 11:28 PM] szybet
spamming it


[5/22/2023 11:29 PM] szybet
also why is this issue now not one year ago


[5/22/2023 11:29 PM] tux_linux
i think on the glo hd you had to start the device with 8, then you launch xorg once, it works, then you close xorg and launch it again, it needs to be 16, then you put it to sleep, now it needs to be 32


[5/22/2023 11:29 PM] tux_linux
its


[5/22/2023 11:29 PM] tux_linux
a


[5/22/2023 11:29 PM] tux_linux
MESS


[5/22/2023 11:29 PM] tux_linux
because i thought i fixed it one year ago


[5/22/2023 11:30 PM] tux_linux
it seems i didn't


[5/22/2023 11:30 PM] szybet
well ok


[5/22/2023 11:31 PM] szybet
good that i dont care for xorg


[5/22/2023 11:31 PM] szybet
that much

{Reactions}
👍 

[5/22/2023 11:32 PM] tux_linux
i think it just affects two devices


[5/22/2023 11:34 PM] szybet
after i exit xorg and try to launch a xorg app it happens, always


[5/22/2023 11:34 PM] szybet
tested 2 times so always


[5/22/2023 11:34 PM] szybet
it works at first time


[5/22/2023 11:36 PM] tux_linux
it's different on the glo hd


[5/22/2023 11:36 PM] tux_linux
if it always happens on nia i think you can play with `/tmp/xorg_initial_launch_done`


[5/22/2023 11:36 PM] tux_linux
there is already code in ipd for that


[5/22/2023 11:36 PM] tux_linux
which doesn't work


[5/22/2023 11:36 PM] tux_linux
for the glo hd


[5/22/2023 11:36 PM] szybet
nah i will wait for a person with a nia that will care about this :D


[5/22/2023 11:36 PM] tux_linux
try with putting it to sleep as well


[5/22/2023 11:37 PM] szybet
just repair it for the glo


[5/22/2023 11:37 PM] szybet
and put a warning on the nia


[5/22/2023 11:37 PM] szybet
*Cursed Xorg, it's spoooky*


[5/22/2023 11:41 PM] tux_linux
i can't repair it for the glo hd


[5/22/2023 11:41 PM] tux_linux
i already tried


[5/22/2023 11:41 PM] szybet
wel lthen i won't start


[5/22/2023 11:41 PM] szybet
¯\_(ツ)_/¯


[5/23/2023 4:31 PM] tux_linux
well yes, but what if wifi is without internet

{Attachments}
/mnt/data/projects/git/conversations/media/image-5FB85.png


[5/23/2023 4:31 PM] tux_linux
like, lan wifi


[5/23/2023 4:57 PM] szybet
this handles the app


[5/23/2023 4:57 PM] szybet
inside


[5/23/2023 4:57 PM] szybet
sanki will for example


[5/23/2023 4:57 PM] szybet
¯\_(ツ)_/¯


[5/23/2023 5:32 PM] szybet
even pinging can't ensure connection


[5/23/2023 5:32 PM] szybet
its like 30% of the success


[5/23/2023 5:34 PM] szybet
the other is:
time, dns, wifi strength / speed


[5/23/2023 5:35 PM] szybet
so no reason to waste time on pinging every time an app launches with tifi, just check if address is there


[5/23/2023 5:35 PM] szybet


{Stickers}
/mnt/data/projects/git/conversations/media/813951067557462106-0ACDB.png


[5/23/2023 6:06 PM] tux_linux
ok


[5/23/2023 6:11 PM] tux_linux
????????


[5/23/2023 6:11 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-39F2F.png


[5/23/2023 6:11 PM] tux_linux
usbnet????


[5/23/2023 6:11 PM] szybet
yes, it will detect usbnet


[5/23/2023 6:11 PM] szybet
:D


[5/23/2023 6:11 PM] tux_linux
well then what do you do with it


[5/23/2023 6:11 PM] tux_linux
usbnet never has internet


[5/23/2023 6:12 PM] szybet
really? i routed internet to it


[5/23/2023 6:12 PM] tux_linux
well, by default, it doesn't


[5/23/2023 6:12 PM] szybet
its only for devs really


[5/23/2023 6:12 PM] tux_linux
also, wifi icon is broken


[5/23/2023 6:12 PM] tux_linux
wifi doesn't want to deactivate


[5/23/2023 6:13 PM] tux_linux
it just says
no networks found


[5/23/2023 6:13 PM] szybet
and this is a qt native thing


[5/23/2023 6:13 PM] szybet
on usbnet?


[5/23/2023 6:13 PM] tux_linux
yes


[5/23/2023 6:13 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-C4F86.txt


[5/23/2023 6:14 PM] szybet
well then its working


[5/23/2023 6:14 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/wifi-223E7.png


[5/23/2023 6:14 PM] tux_linux
no, I can't connect to wifi when on usbnet


[5/23/2023 6:14 PM] szybet
well you should be able to


[5/23/2023 6:14 PM] szybet
hmm


[5/23/2023 6:14 PM] tux_linux
i am not


[5/23/2023 6:15 PM] tux_linux
im on the glo hd


[5/23/2023 6:15 PM] tux_linux
cursed wifi model


[5/23/2023 6:15 PM] szybet
give me output when usbnet is on and qdebug << in this function i changed is enabled and its showing logs


[5/23/2023 6:15 PM] tux_linux
qdebug interface?


[5/23/2023 6:15 PM] szybet
yep


[5/23/2023 6:15 PM] szybet
i will give you the solution


[5/23/2023 6:15 PM] szybet
addiotional if, but i need data


[5/23/2023 6:16 PM] tux_linux
coming


[5/23/2023 6:17 PM] tux_linux
I don't mind my mac address

{Attachments}
/mnt/data/projects/git/conversations/media/message-250B3.txt


[5/23/2023 6:18 PM] szybet
um crap, can you also qdebug the .type()?


[5/23/2023 6:18 PM] szybet
it should be


[5/23/2023 6:18 PM] szybet
interface.type()


[5/23/2023 6:18 PM] szybet
i want to see it


[5/23/2023 6:18 PM] tux_linux
qDebug() << interface << interface.type();


[5/23/2023 6:18 PM] tux_linux
compiling


[5/23/2023 6:19 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-4DECE.txt


[5/23/2023 6:20 PM] szybet
its unkown for every one?


[5/23/2023 6:20 PM] tux_linux
idk?


[5/23/2023 6:20 PM] szybet
turn on wifi via cli


[5/23/2023 6:20 PM] tux_linux
and launch gui?


[5/23/2023 6:20 PM] tux_linux
after?


[5/23/2023 6:20 PM] szybet
yes


[5/23/2023 6:21 PM] szybet
just turn on the interface


[5/23/2023 6:21 PM] szybet
so its visible in ip a


[5/23/2023 6:21 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-3489B.txt


[5/23/2023 6:21 PM] tux_linux
it shows the networks
but it's only that


[5/23/2023 6:22 PM] szybet
is it in ip a?


[5/23/2023 6:22 PM] tux_linux
```
kobo:~# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
2: usb0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether a2:09:e3:f6:ef:21 brd ff:ff:ff:ff:ff:ff
    inet 192.168.3.2/24 brd 192.168.3.255 scope global usb0
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 1000
    link/ether 78:45:61:50:d0:5e brd ff:ff:ff:ff:ff:ff
kobo:~#
```


[5/23/2023 6:22 PM] szybet
relaunch gui


[5/23/2023 6:22 PM] tux_linux
i did?


[5/23/2023 6:22 PM] szybet
well


[5/23/2023 6:22 PM] szybet
one more time


[5/23/2023 6:22 PM] tux_linux
it stopped it->enabled wifi->launched it


[5/23/2023 6:23 PM] szybet
try one more time :(


[5/23/2023 6:23 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-58A4B.txt


[5/23/2023 6:23 PM] tux_linux
then it just repeats itself


[5/23/2023 6:23 PM] szybet
nothing


[5/23/2023 6:23 PM] szybet
fuck ;-;


[5/23/2023 6:23 PM] tux_linux
what do we do


[5/23/2023 6:24 PM] szybet
fuck the glo


[5/23/2023 6:24 PM] szybet
and


[5/23/2023 6:24 PM] tux_linux
no


[5/23/2023 6:24 PM] szybet
you can add a if(glo) -> old implementation


[5/23/2023 6:24 PM] szybet
only if glo


[5/23/2023 6:24 PM] szybet
and then check cpu usage


[5/23/2023 6:24 PM] tux_linux
what is telling you it will work with other devices?


[5/23/2023 6:24 PM] szybet
hope.


[5/23/2023 6:25 PM] tux_linux
;-;


[5/23/2023 6:25 PM] szybet
do it


[5/23/2023 6:25 PM] szybet
while wifi is on


[5/23/2023 6:25 PM] tux_linux
it's around 5.1%


[5/23/2023 6:25 PM] tux_linux
with your commit


[5/23/2023 6:25 PM] szybet
while wifi is on?


[5/23/2023 6:26 PM] tux_linux
yes


[5/23/2023 6:26 PM] tux_linux
i'm trying with the other commit


[5/23/2023 6:26 PM] szybet
but with the old implementation?


[5/23/2023 6:26 PM] szybet
well


[5/23/2023 6:27 PM] tux_linux
oh nevermind


[5/23/2023 6:27 PM] tux_linux
i tried htop without inkbox running


[5/23/2023 6:27 PM] tux_linux
ctrl c


[5/23/2023 6:27 PM] szybet
oof


[5/23/2023 6:27 PM] tux_linux
yeah old implementation is at 33.8%


[5/23/2023 6:27 PM] tux_linux
will try new


[5/23/2023 6:27 PM] szybet
new doesnt work


[5/23/2023 6:27 PM] szybet
so whats the point


[5/23/2023 6:27 PM] szybet
well


[5/23/2023 6:27 PM] tux_linux
well maybe there's something to do


[5/23/2023 6:27 PM] szybet
you need to write a /sys reading implementation


[5/23/2023 6:27 PM] tux_linux
oh no


[5/23/2023 6:27 PM] szybet
for devices that it doesnt work for


[5/23/2023 6:28 PM] szybet
yep


[5/23/2023 6:28 PM] szybet
shouldn't be painfull


[5/23/2023 6:28 PM] tux_linux
your implementation is at 6.4%


[5/23/2023 6:28 PM] tux_linux
yeah


[5/23/2023 6:28 PM] tux_linux
sad


[5/23/2023 6:28 PM] szybet
it doesnt work


[5/23/2023 6:28 PM] tux_linux
it tries to work


[5/23/2023 6:29 PM] tux_linux
it basically does what it's supposed to do but without the desired income


[5/23/2023 6:29 PM] tux_linux
to read where


[5/23/2023 6:29 PM] szybet
look up where


[5/23/2023 6:29 PM] tux_linux
configured file?


[5/23/2023 6:29 PM] tux_linux
iirc those are not reliable


[5/23/2023 6:29 PM] tux_linux
that is why i wrote testPing in the first place


[5/23/2023 6:30 PM] szybet
sys is not reliable?


[5/23/2023 6:30 PM] tux_linux
yes


[5/23/2023 6:30 PM] tux_linux
or configured isn't saying what we think it should say


[5/23/2023 6:30 PM] tux_linux
idk


[5/23/2023 6:30 PM] szybet
and from where do you think ip a gets the info?


[5/23/2023 6:30 PM] tux_linux
well, when an interface is configured doesn't mean it's connected to the internet


[5/23/2023 6:30 PM] tux_linux
or has any ip


[5/23/2023 6:30 PM] tux_linux
sometimes


[5/23/2023 6:30 PM] szybet
we already talked about it


[5/23/2023 6:30 PM] szybet
configured = has ip


[5/23/2023 6:31 PM] tux_linux
well ok


[5/23/2023 6:31 PM] tux_linux
maybe


[5/23/2023 6:31 PM] szybet
we dont care for more


[5/23/2023 6:31 PM] szybet
maybe google why qt can see it


[5/23/2023 6:31 PM] szybet
i cant find anything


[5/23/2023 6:31 PM] tux_linux
then why do you just not modify your implementation so it reads from sys directly instead of using Qt abstraction layers


[5/23/2023 6:31 PM] tux_linux
has a much higher change to work right out of the box with other devices


[5/23/2023 6:32 PM] tux_linux
glo hd is using wlan0 interface


[5/23/2023 6:32 PM] tux_linux
you have interfaces for each device in your wifi script


[5/23/2023 6:32 PM] tux_linux
most devices use eth0


[5/23/2023 6:32 PM] szybet
sys interfaces may be diffrent


[5/23/2023 6:32 PM] szybet
not really, i dont think so


[5/23/2023 6:33 PM] tux_linux
What does yours look like


[5/23/2023 6:33 PM] tux_linux
The path


[5/23/2023 6:34 PM] szybet
its a complete rewrite then, and i dont have the devices to test anyway


[5/23/2023 6:34 PM] tux_linux
Complete rewrite of 10 lines?


[5/23/2023 6:34 PM] szybet
um yes


[5/23/2023 6:34 PM] szybet
look


[5/23/2023 6:34 PM] szybet
or


[5/23/2023 6:34 PM] szybet
hear me out


[5/23/2023 6:35 PM] szybet
just write a if else of what device needs what path


[5/23/2023 6:35 PM] szybet
then using those 3 variables check if there is something there, like if the directory exist ( enabled ) and if ip is applied


[5/23/2023 6:35 PM] szybet
and leave the native implementation for devices that it works for


[5/23/2023 6:38 PM] szybet
calculate it once at start


[5/24/2023 12:02 AM] szybet
qtvirtual keyboard

{Attachments}
/mnt/data/projects/git/conversations/media/message-40A9F.txt


[5/24/2023 12:04 AM] szybet
this is interesting:
```

QFunctionPointer KoboPlatformIntegration::platformFunction(const QByteArray &function) const
{
    if (function == KoboPlatformFunctions::setFullScreenRefreshModeIdentifier())
        return QFunctionPointer(setFullScreenRefreshModeStatic);
    else if (function == KoboPlatformFunctions::clearScreenIdentifier())
        return QFunctionPointer(clearScreenStatic);
    else if (function == KoboPlatformFunctions::enableDitheringIdentifier())
        return QFunctionPointer(enableDitheringStatic);
    else if (function == KoboPlatformFunctions::doManualRefreshIdentifier())
        return QFunctionPointer(doManualRefreshStatic);
    else if (function == KoboPlatformFunctions::getKoboDeviceDescriptorIdentifier())
        return QFunctionPointer(getKoboDeviceDescriptorStatic);
    return 0;
}
```


[5/24/2023 2:47 PM] szybet
```
// Global variables representing the file paths
QString disabledFilePath = "/sys/net/interface_disabled";
QString enabledFilePath = "/sys/net/interface_enabled";
QString configuredFilePath = "/sys/net/interface_configured";

void checkNetworkInterfaceStatus()
{
    QFile disabledFile(disabledFilePath);
    QFile enabledFile(enabledFilePath);
    QFile configuredFile(configuredFilePath);

    // Check if the disabled file exists and read its content
    if (disabledFile.open(QIODevice::ReadOnly | QIODevice::Text)) {
        QString disabledStatus = QString::fromUtf8(disabledFile.readAll()).trimmed();
        disabledFile.close();
        qDebug() << "Disabled status: " << disabledStatus;
    } else {
        qDebug() << "Failed to open disabled file";
    }

    // Check if the enabled file exists and read its content
    if (enabledFile.open(QIODevice::ReadOnly | QIODevice::Text)) {
        QString enabledStatus = QString::fromUtf8(enabledFile.readAll()).trimmed();
        enabledFile.close();
        qDebug() << "Enabled status: " << enabledStatus;
    } else {
        qDebug() << "Failed to open enabled file";
    }

    // Check if the configured file exists and read its content
    if (configuredFile.open(QIODevice::ReadOnly | QIODevice::Text)) {
        QString configuredStatus = QString::fromUtf8(configuredFile.readAll()).trimmed();
        configuredFile.close();
        qDebug() << "Configured status: " << configuredStatus;
    } else {
        qDebug() << "Failed to open configured file";
    }
}`
```
something like that?


[5/24/2023 2:47 PM] szybet
of course more returns etc


[5/24/2023 2:49 PM] szybet
also @tux-linux does ifconfig show this weird interface?


[5/24/2023 2:59 PM] tux_linux
What interface


[5/24/2023 3:00 PM] tux_linux
Will try it thanks


[5/24/2023 3:00 PM] szybet
its just a code snippet, not working one


[5/24/2023 3:01 PM] tux_linux
Ok


[5/24/2023 3:01 PM] szybet
you need to add there setting global:: values, return ones, and set those pathes depending on device


[5/24/2023 3:01 PM] tux_linux
Well create a patch


[5/24/2023 3:01 PM] szybet
you set those pathes  in another function only once while starting inkbox


[5/24/2023 3:02 PM] szybet
no reason for me to do code that i can't test, don't even have values for that


[5/24/2023 3:02 PM] szybet
values -> pathes for sys


[5/24/2023 3:02 PM] szybet
the weird glo one


[5/24/2023 3:02 PM] tux_linux
wlan0?


[5/24/2023 3:02 PM] szybet
yep


[5/24/2023 3:03 PM] tux_linux
eth0 is weird
wlan0 makes sense


[5/24/2023 3:03 PM] tux_linux
eth is ethernet


[5/24/2023 3:03 PM] szybet
whatever


[5/24/2023 3:03 PM] szybet
does it show up


[5/24/2023 3:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-1540A.txt


[5/24/2023 10:58 PM] szybet
bad news: qtvirtual keyboard is crap and not working at all


[5/24/2023 10:58 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[5/24/2023 10:59 PM] szybet
good news: me not being crappy with qt anymore allowed me to create almost android experience with keyboard

{Reactions}
👍 (2) 

[5/25/2023 5:35 AM] tux_linux
When, where


[5/25/2023 7:01 AM] szybet
Wlan0 in ifconfig when itd turned on


[5/25/2023 11:26 AM] szybet
@tux-linux i will propably in this weekend or the next port kobo nia c variant to inkbox, so please write what is needed for uboot and kernel to make it work ( changes, what to add etc )


[5/25/2023 11:26 AM] szybet
a small guide


[5/25/2023 11:26 AM] szybet
please


[5/25/2023 12:47 PM] tux_linux
we can't release 2.0 before getting into this mess please?


[5/25/2023 12:48 PM] szybet
um i have done my things


[5/25/2023 12:48 PM] szybet
~~ok encfs not~~


[5/25/2023 12:49 PM] tux_linux
blank ipd?


[5/25/2023 12:49 PM] szybet
done?

{Reactions}
👍 

[5/25/2023 12:50 PM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/afe5a6fa22f6569e8a05a4735a395feec9b8d220

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/afe5a6fa22f6569e8a05a4735a395feec9b8d220
blank in ipd, some fixes · Kobo-InkBox/inkbox-power-daemon@afe5a6f
/mnt/data/projects/git/conversations/media/afe5a6fa22f6569e8a05a4735a395feec9b8d220-1950C


[5/25/2023 4:26 PM] tux_linux
it works on the nia?


[5/25/2023 6:32 PM] szybet
blank?


[5/25/2023 6:32 PM] szybet
propably?


[5/25/2023 6:33 PM] tux_linux
Check dmesg you should see a pattern repeating


[5/25/2023 6:33 PM] szybet
okay i will


[5/26/2023 10:11 AM] szybet
https://github.com/Eeems-Org/oxide
https://toltec-dev.org/stable/
https://github.com/LinusCDE/doomarkable
https://github.com/dixonary/fingerterm-reMarkable

they have a freaking package repo and doom played using rust


[5/26/2023 10:11 AM] szybet
how many people do this


[5/26/2023 10:11 AM] szybet
this project is a joke


[5/26/2023 6:19 PM] kuratius
the fuck is the point of a rust wrapper around doom

{Reactions}
😂 

[5/26/2023 6:20 PM] kuratius
it's not even written in rust, it's just a C project using a rust launcher


[5/26/2023 6:20 PM] szybet
XDDD


[5/26/2023 6:20 PM] szybet
well now you know


[5/26/2023 6:20 PM] szybet
btw those rust c wrappers are most of the time generated automatically


[5/26/2023 6:20 PM] szybet
like qt bindings to rust, the same story


[5/28/2023 2:13 AM] szybet
@tux-linux do you want sanki presentation on your yt channel?


[5/28/2023 2:13 AM] szybet
you have inkbox stuff there already


[5/28/2023 2:13 AM] szybet
¯\_(ツ)_/¯


[5/28/2023 2:59 PM] szybet
2.0 when?...


[5/29/2023 8:03 PM] .kitkat1.
This is my nia

{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230529_193701-D8C7B.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193706-DF174.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193718-31122.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193729-74505.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193742-F80B9.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193748-201A5.jpg
/mnt/data/projects/git/conversations/media/IMG_20230529_193811-E6196.jpg
/mnt/data/projects/git/conversations/media/PICT0001-D82AC.jpg
/mnt/data/projects/git/conversations/media/PICT0002-A36B6.jpg


[5/29/2023 8:03 PM] .kitkat1.


{Attachments}
/mnt/data/projects/git/conversations/media/PICT0005-EDE77.jpg
/mnt/data/projects/git/conversations/media/PICT0006-CFEFD.jpg
/mnt/data/projects/git/conversations/media/PICT0007-A2DB6.jpg


[5/29/2023 8:06 PM] .kitkat1.


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230529_193642-EC1A6.jpg


[5/29/2023 8:23 PM] ninuje
`ntx_hwconfig -s /dev/mmcblk0 2>/dev/null` will tell you the interesting bits without having to open it up 😉


[5/29/2023 8:24 PM] szybet
well i didn't thinked of it


[5/29/2023 8:24 PM] szybet
also - this is easier ;p


[5/29/2023 9:29 PM] .kitkat1.
I created a thread to port the model C to nia

{Reactions}
👍 

[6/1/2023 8:22 PM] szybet
https://doc.qt.io/qt-6/wasm.html

{Embed}
https://doc.qt.io/qt-6/wasm.html
Qt for WebAssembly | Qt 6.5
Runs Qt applications in a secure sandbox in the browser.


[6/1/2023 8:22 PM] szybet
if we make inkbox code remotely good enough to be soo modular


[6/1/2023 8:23 PM] szybet
and qt6 is not painfull to port from qt5


[6/1/2023 8:23 PM] szybet
imagine


[6/1/2023 8:23 PM] szybet
online inkbox demo


[6/3/2023 2:41 PM] tux_linux
If you do it


[6/3/2023 2:48 PM] szybet
i already posted it on my github


[6/3/2023 3:02 PM] tux_linux
done


[6/3/2023 3:02 PM] tux_linux
https://www.youtube.com/watch?v=UJcDsBB94ME

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=UJcDsBB94ME
InkBox OS user app : sanki demo
sanki is a completely re-written version of the popular Anki program (https://apps.ankiweb.net/), for eReaders. It allows you to work with flashcards to study better, right on your InkBox OS device.

sanki was written from scratch by Szybet, there on GitHub : https://github.com/Szybet/sanki
You can download it here : https://github.com/Kobo-InkB...
/mnt/data/projects/git/conversations/media/maxresdefault-07225.jpg


[6/3/2023 3:03 PM] szybet
um nice


[6/3/2023 3:03 PM] tux_linux
description is accurate?


[6/3/2023 3:04 PM] szybet
um maybe


[6/3/2023 3:04 PM] szybet
idk


[6/3/2023 3:04 PM] tux_linux
these look like they've gone on a roller coaster and didn't like their ride ;p

{Attachments}
/mnt/data/projects/git/conversations/media/image-C5BE7.png


[6/3/2023 3:05 PM] szybet
its a completly rewritten - small flash card, imitating anki and being compatible with it


[6/3/2023 3:05 PM] szybet
something like that


[6/3/2023 3:06 PM] tux_linux
`sanki is a completely re-written Anki-compatible program (https://apps.ankiweb.net), for eReaders. It allows you to work with flashcards to study better, right on your InkBox OS device.`


[6/3/2023 3:06 PM] szybet
welp lol yes

on the other hand, this chaos helps with clicking them - touch support


[6/3/2023 3:06 PM] szybet
flashcard app


[6/3/2023 3:06 PM] szybet
replace program with this


[6/3/2023 3:06 PM] tux_linux
well it says later it allows you to work with flashcards


[6/3/2023 3:07 PM] tux_linux
i replaced program with app


[6/3/2023 3:07 PM] szybet
whatever really


[6/9/2023 3:53 PM] tux_linux
```
kobo:~# cat /sys/class/net/wlan0/operstate 
up
kobo:~#
```
returns `up` when it has an ip address


[6/9/2023 3:53 PM] tux_linux
return `unknown` when it doesn't


[6/9/2023 3:53 PM] tux_linux
on nia it should be eth0


[6/9/2023 3:53 PM] tux_linux
that simple?


[6/9/2023 3:59 PM] szybet
Yep, propably


[6/9/2023 3:59 PM] tux_linux
well, no need to use qt


[6/9/2023 4:00 PM] szybet
What if module isint loaded?


[6/9/2023 4:00 PM] tux_linux
it doesn't exist


[6/9/2023 4:00 PM] szybet
Cool


[6/9/2023 4:00 PM] szybet
Sad


[6/9/2023 4:00 PM] szybet
But ok


[6/9/2023 4:01 PM] tux_linux
i will make a new commit soon and you can try it


[6/9/2023 4:19 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/fe0e62d672ea74fd30bb630b474bc152241420fb
this works here

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/fe0e62d672ea74fd30bb630b474bc152241420fb
Wi-Fi fix · Kobo-InkBox/inkbox@fe0e62d
/mnt/data/projects/git/conversations/media/fe0e62d672ea74fd30bb630b474bc152241420fb-DB718


[6/9/2023 4:28 PM] tux_linux
so
are we done after this

{Attachments}
/mnt/data/projects/git/conversations/media/image-83524.png


[6/9/2023 5:00 PM] szybet
If i check and it works , yep


[6/9/2023 5:01 PM] szybet
Those issues were related


[6/9/2023 5:01 PM] szybet
So, yes


[6/9/2023 7:40 PM] tux_linux
Well, good


[6/9/2023 7:40 PM] tux_linux
Now we need to package images


[6/9/2023 7:40 PM] szybet
https://tenor.com/view/three-finger-salute-good-luck-jennifer-lawrence-katniss-everdeen-hunger-games-gif-20383994

{Embed}
https://tenor.com/view/three-finger-salute-good-luck-jennifer-lawrence-katniss-everdeen-hunger-games-gif-20383994
/mnt/data/projects/git/conversations/media/three-finger-salute-good-luck-006B7.png


[6/9/2023 7:41 PM] szybet
i want to test the nia image before release


[6/9/2023 7:41 PM] szybet
+  pkgs-inkbox should be listed as the secondary faster mirror


[6/9/2023 7:44 PM] szybet
bruh you are fast


[6/9/2023 7:44 PM] szybet
let me check out the modified wifi code at least


[6/9/2023 7:44 PM] tux_linux
i was tired


[6/9/2023 7:44 PM] szybet
¯\_(ツ)_/¯


[6/9/2023 7:47 PM] tux_linux
ok, i will try to make one asap


[6/9/2023 7:47 PM] szybet
you should test other devices too


[6/9/2023 7:47 PM] tux_linux
yes


[6/9/2023 7:47 PM] szybet
when everything is done, will you reach out to this guy?
https://www.youtube.com/@TheLinuxEXP

{Embed}
https://www.youtube.com/@TheLinuxEXP
The Linux Experiment
Making Linux accessible: no techno babble, no super technical content. Just Linux desktop news, simple tutorials, application spotlights, and opinion pieces trying to stay positive, without gatekeeping.

👏 SUPPORT THE CHANNEL:
Get access to a weekly podcast, vote on the next topics I cover, and get your name in the credits:

YouTube: https://www...
/mnt/data/projects/git/conversations/media/AGIKgqM9_Fe55a_6wP8fpXXrjIV1IeIYAd_59MBmuT-59C92


[6/9/2023 7:48 PM] tux_linux
maybe


[6/9/2023 7:48 PM] szybet
i ask for the 3 time, don't igno... okay


[6/9/2023 7:48 PM] tux_linux
but i feel like someone else should do it


[6/9/2023 7:48 PM] tux_linux
don't really want to come bragging about my own software


[6/9/2023 7:48 PM] szybet
lol who


[6/9/2023 7:49 PM] szybet
why
not


[6/9/2023 7:49 PM] tux_linux
you? or @dill ?


[6/9/2023 7:49 PM] tux_linux
or whoever else who wants


[6/9/2023 7:50 PM] szybet
i'm the second developer, with your logic i can't too ;p


[6/9/2023 7:50 PM] szybet
fixed it

{Attachments}
/mnt/data/projects/git/conversations/media/image-15DEB.png


[6/9/2023 7:53 PM] szybet
this guy, mobile read, ~~hackaday, hacker forums something like that?~~, reddit r/linux


[6/9/2023 7:53 PM] szybet
i don't want more, at least that


[6/10/2023 12:09 AM] ninuje
Unfortunately, no


[6/10/2023 12:09 AM] ninuje
Operationally up doesn't mean what you think it does 😉


[6/10/2023 12:09 AM] tux_linux
Well what is it


[6/10/2023 12:09 AM] ninuje
https://github.com/koreader/koreader/pull/10098

{Embed}
https://github.com/koreader/koreader/pull/10098
NetworkMgr: Refine isConnected check by NiLuJe · Pull Request #1009...
Spent some time testing #10062 today, and there were a few shortcomings ;).

carrier is set to 1 as soon as the device is administratively up (in practice, as soon as we run ifconfig up). This is p...
/mnt/data/projects/git/conversations/media/10098-EDF65


[6/10/2023 12:10 AM] ninuje
Followed up w/ https://github.com/koreader/koreader/pull/10139

{Embed}
https://github.com/koreader/koreader/pull/10139
Device: Handle network info data gathering ourselves by NiLuJe · Pu...
i.e., we now query routes, interfaces, wireless extensions & ping ourselves, dropping the dependency on specific CLI tools altogether.
Depends on koreader/koreader-base#1584


This change is
/mnt/data/projects/git/conversations/media/10139-5A2E9


[6/10/2023 12:11 AM] ninuje
The gory details are in whatever actually documents operstate in the Linux docs (i.e., rg operstate /usr/src/linux/Docs ;))


[6/10/2023 12:12 AM] ninuje
I may have actually checked the code to confirm the behavior re: wifi, because that wasn't entirely clear


[6/10/2023 12:18 AM] the.mightydill
hey man


[6/10/2023 12:18 AM] the.mightydill
you need me to do anything for you? I'm here 🫡


[6/10/2023 4:03 PM] tux_linux
well now this should be fine, thanks
https://github.com/Kobo-InkBox/inkbox/commit/72322a7fe52fba97fb197d608d8f19605c5443a6

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/72322a7fe52fba97fb197d608d8f19605c5443a6
Wi-Fi fix again · Kobo-InkBox/inkbox@72322a7
/mnt/data/projects/git/conversations/media/72322a7fe52fba97fb197d608d8f19605c5443a6-6D037


[6/10/2023 5:21 PM] tux_linux
ok time to make changelog


[6/10/2023 5:38 PM] tux_linux
```
- Kindle Touch (KT) support
- Signed custom user applications ('user apps') support
- Improved virtual keyboard
- General UI design improvements
- Completely overhauled home page and library browser, with 'Recent books' and
'Pinned books'
- Highlighting support (experimental) and option to export highlights as JSON
file
- Fix for special characters sometimes not displaying properly
- Completely overhauled power daemon
- Completely overhauled Wi-Fi framework
- Better virtual keyboard in Xorg
- New 'Line spacing' and 'Margins' options in Reader
- 'To-Do' application for checklists
- 'Qalculate' application for complex mathematic calculations
- Improved lockscreen experience
- Improved Reader framework
- Update system improvements
- Fix for screen 'freezing' when X11 is enabled on some devices
- Kernel namespaces support
- Completely overhauled system initialization program
- Wi-Fi support for i.MX507 devices (N705, N905C, N613)
```


[6/10/2023 5:38 PM] tux_linux
anything missing?


[6/10/2023 6:01 PM] szybet
user apps, list them


[6/10/2023 6:01 PM] szybet
and maybe credit me where i did something


[6/10/2023 6:01 PM] szybet
because i cant remember what i did


[6/10/2023 6:02 PM] szybet
+ qt libinput support & udev ( usb devices, keyboard and mouse support... )


[6/10/2023 6:03 PM] szybet
gutenberg fix


[6/10/2023 6:03 PM] szybet
too


[6/10/2023 6:03 PM] szybet
support for custom 3d printed cases


[6/10/2023 6:04 PM] szybet
um idk time and date fix


[6/10/2023 6:04 PM] tux_linux
well at this point not that relevant


[6/10/2023 6:04 PM] tux_linux
most people don't have these


[6/10/2023 6:05 PM] szybet
at least mention it


[6/10/2023 6:05 PM] szybet
¯\_(ツ)_/¯


[6/10/2023 6:06 PM] tux_linux
```
- Kindle Touch (KT) support
- Signed custom user applications ('user apps') support (@Szybet)
- Improved virtual keyboard
- General UI design improvements
- Completely overhauled home page and library browser, with 'Recent books' and
'Pinned books'
- Highlighting support (experimental) and option to export highlights as JSON
file
- Fix for special characters sometimes not displaying properly (@Szybet)
- Completely overhauled power daemon (@Szybet)
- Completely overhauled Wi-Fi framework (@Szybet & @tux-linux)
- Better virtual keyboard in X11/KoBox
- New 'Line spacing' and 'Margins' options in Reader
- 'To-Do' application for checklists
- 'Qalculate' application for complex mathematic calculations
- Improved lockscreen experience (@Szybet & @tux-linux)
- Improved Reader framework
- Update system improvements
- Fix for screen 'freezing' when X11 is enabled on some devices
- Kernel namespaces support
- Completely overhauled system initialization program
- Wi-Fi support for i.MX507 devices (N705, N905C, N613)
- Gutenberg: prompt to ask whether or not to sync before doing so
- N306: Support for keyboard and mouse via USB OTG (@Szybet)
- N306: Support for custom device cases (@Szybet)
```
I will mention user apps in GH release


[6/10/2023 6:08 PM] szybet
oke


[6/10/2023 6:08 PM] szybet
let me test before you post the release


[6/10/2023 6:08 PM] tux_linux
```
build@inkbox ~/i/o/release (main)> ls -shal
total 6.8G
   0 drwxr-xr-x 1 build build  232 Jun 10 16:03 ./
   0 drwxr-xr-x 1 build build  260 Jun 10 16:03 ../
3.7G -rw-r--r-- 1 root  root  3.7G Jun 10 16:03 inkbox-2.0-n437.img
2.8G -rw-r--r-- 1 build build 2.8G Jun 10 16:03 inkbox-n437.img
 58M -rw-r--r-- 1 root  root   58M Jun 10 15:58 rootfs-partition.tar.xz
216K -rwxr-xr-x 1 build build 216K Jun 10 15:55 u-boot_inkbox.bin*
8.6M -rw-r--r-- 1 build build 8.6M Jun 10 15:57 uImage-root
8.6M -rw-r--r-- 1 build build 8.6M Jun 10 15:57 uImage-std
305M -rw-r--r-- 1 root  root  305M Jun 10 16:02 user-partition.tar.xz
build@inkbox ~/i/o/release (main)>
```
ok I have a first release image done
let's test it


[6/10/2023 6:08 PM] szybet
please


[6/10/2023 6:18 PM] tux_linux
will send you one in next 30m


[6/10/2023 6:45 PM] the.mightydill
@tux-linux did you want me to test something?


[6/10/2023 6:56 PM] tux_linux
nvm @#$$#%^@%$##$ ext4 tools have new features we haven't handled yet so whole partition layout is unusable


[6/10/2023 7:02 PM] szybet
idk how seriuous is the issue but if it very just use old version of this software


[6/10/2023 7:02 PM] tux_linux
that's what i was thinking about


[6/10/2023 7:08 PM] ninuje
You can just use isRunning for the operstate, that's what it tracks


[6/10/2023 7:08 PM] ninuje
https://code.qt.io/cgit/qt/qtbase.git/tree/src/network/kernel/qnetworkinterface_linux.cpp


[6/10/2023 7:09 PM] szybet
qt doesnt detect glo wifi, at all


[6/10/2023 7:09 PM] tux_linux
*glo hd


[6/10/2023 7:09 PM] ninuje
Broadcom?


[6/10/2023 7:10 PM] tux_linux
yes


[6/10/2023 7:10 PM] tux_linux
bcmdhd


[6/10/2023 7:10 PM] tux_linux
different version than imx507


[6/10/2023 7:10 PM] tux_linux
nightmare


[6/10/2023 7:10 PM] tux_linux
worst dreams


[6/10/2023 7:10 PM] tux_linux
whatever


[6/10/2023 7:10 PM] ninuje
Might be timing sensitive, the broadcom tool does some funky things, and doing it the other way around breaks in fun and interesting ways


[6/10/2023 7:10 PM] ninuje
wlarm_le or something


[6/10/2023 7:11 PM] tux_linux
yes, I know it


[6/10/2023 7:12 PM] ninuje
i.e., it might be as simple as it fails the isUp check, so Qt doesn't enumerate it or something


[6/10/2023 7:12 PM] tux_linux
the new commit I wrote seems to work


[6/10/2023 7:12 PM] ninuje
I distincly remember being able to confuse the hell out of ifconfig with those

{Reactions}
👍 

[6/10/2023 7:13 PM] tux_linux
```
build@inkbox ~/Development> sudo /home/build/Development/e2fsprogs-1.46.2/release/sbin/mkfs.ext4 -O "^metadata_csum" /dev/sda1
mke2fs 1.46.2 (28-Feb-2021)
/dev/sda1 contains a ext4 file system labelled 'boot'
    last mounted on /run/media/build/boot on Sat Jun 10 13:03:26 2023
Proceed anyway? (y,N) y
Invalid filesystem option set: has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize,orphan_file
```
why can't you just be normal
i hate when these things happen


[6/10/2023 8:06 PM] szybet
just use the older version


[6/10/2023 8:09 PM] tux_linux
it *is* the older version


[6/10/2023 8:09 PM] szybet
maybe you are missin a dependiency for those options


[6/11/2023 9:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20230611_210606-A9A13.mp4


[6/11/2023 9:07 PM] szybet
@tux-linux something to cheer you up


[6/11/2023 9:07 PM] szybet
:D


[6/11/2023 9:08 PM] szybet
RSS reader, with some minor tweaking it will be good, its usable now, just some weird flashing every 5s


[6/11/2023 9:08 PM] szybet
https://github.com/martinrotter/rssguard


[6/11/2023 9:08 PM] szybet
it is it


[6/11/2023 9:09 PM] szybet
only needed recompiling qt, some cmake hacking


[6/11/2023 10:02 PM] tux_linux
nice
user app


[6/11/2023 10:02 PM] tux_linux
ext4 story is a nightmare


[6/11/2023 10:02 PM] tux_linux
idk what to do
creating a filesystem with old tools compiled on new system doesn't work
everytime


[6/11/2023 10:03 PM] tux_linux
always throws this error


[6/11/2023 10:03 PM] szybet
hear me out

container

based on an old release


[6/11/2023 10:03 PM] tux_linux
tried 3 versions


[6/11/2023 10:03 PM] tux_linux
yes but it won't last forever


[6/11/2023 10:03 PM] szybet
or just explain to me why the newest version doesnt work


[6/11/2023 10:03 PM] tux_linux
using a container for solely this is ridiculous


[6/11/2023 10:03 PM] tux_linux
i don't know


[6/11/2023 10:03 PM] tux_linux
kernel issue


[6/11/2023 10:03 PM] tux_linux
too new


[6/11/2023 10:03 PM] tux_linux
it worked on a debian 10.4 vm aarch64


[6/11/2023 10:03 PM] tux_linux
with e2fs progs 1.44.5


[6/11/2023 10:03 PM] tux_linux
didn't work on modern arch aarch64


[6/11/2023 10:05 PM] szybet
is it a problem because you are on arm?


[6/11/2023 10:05 PM] szybet
as host


[6/11/2023 10:06 PM] tux_linux
try it on your system
compile e2fsprogs 1.44.5
then
```
qemu-img create -f qcow2 test.img 100M
/path/to/compiled/mkfs.ext4 -O "^metadata_csum" test.img
```


[6/11/2023 10:08 PM] szybet
the newest version


[6/11/2023 10:08 PM] szybet
why do i need to compile


[6/11/2023 10:24 PM] tux_linux
not the newest version


[6/11/2023 10:24 PM] tux_linux
try v 1.44.5


[6/11/2023 10:24 PM] szybet
why not?


[6/11/2023 10:24 PM] szybet
.


[6/11/2023 10:24 PM] tux_linux
i don't know


[6/11/2023 10:25 PM] szybet
what does not work


[6/11/2023 10:25 PM] tux_linux
well, in kernel dmesg it says unsupported features 2c0 and unsupported features 10000


[6/11/2023 10:25 PM] tux_linux
both of which seem to be undocumented or obfuscated somewhere in the code


[6/11/2023 10:26 PM] szybet
context?


[6/11/2023 10:26 PM] tux_linux
the glo hd fails to boot


[6/11/2023 10:26 PM] tux_linux
i had to connect it to serial to had it tell me that


[6/11/2023 10:27 PM] tux_linux
it can't mount any partitions


[6/11/2023 10:28 PM] szybet
why do we need ext4? lets just go with ext3 :)?


[6/11/2023 10:28 PM] tux_linux
n o


[6/11/2023 10:28 PM] szybet
because?


[6/11/2023 10:28 PM] tux_linux
n o


[6/11/2023 10:28 PM] szybet
we have compability problems


[6/11/2023 10:28 PM] szybet
so lets just go with something older


[6/11/2023 10:28 PM] tux_linux
it is supposed to work


[6/11/2023 10:29 PM] tux_linux
and with andi1 wanting to port newer kernel for each device it isn't relevant


[6/11/2023 10:29 PM] szybet
well maybe try on an older kernel


[6/11/2023 10:29 PM] szybet
to do it


[6/11/2023 10:29 PM] szybet
with the good version


[6/11/2023 10:29 PM] szybet
what are you on?


[6/11/2023 10:29 PM] tux_linux
latest


[6/11/2023 10:30 PM] tux_linux
6.2.10


[6/11/2023 10:30 PM] szybet
https://tenor.com/view/patrick-problems-gif-20611843

{Embed}
https://tenor.com/view/patrick-problems-gif-20611843
/mnt/data/projects/git/conversations/media/patrick-problems-9C27D.png


[6/11/2023 10:30 PM] tux_linux
well, almost latest


[6/11/2023 10:30 PM] szybet
try lts


[6/11/2023 10:30 PM] tux_linux
i'm on arch


[6/11/2023 10:30 PM] szybet
try linux-lts


[6/11/2023 10:30 PM] tux_linux
yea


[6/11/2023 10:30 PM] szybet
6.1.33-1-lts


[6/11/2023 10:31 PM] szybet
if not this, try a 5x kernel


[6/11/2023 10:31 PM] tux_linux
but no

{Attachments}
/mnt/data/projects/git/conversations/media/image-D176D.png


[6/11/2023 10:31 PM] szybet
```
22:31 szybet@hyperbookszyb /home/szybet
% sudo pacman -S linux-lts
[sudo] password for szybet: 
warning: linux-lts-6.1.33-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (1) linux-lts-6.1.33-1

Total Installed Size:  136.67 MiB
Net Upgrade Size:        0.00 MiB

:: Proceed with installation? [Y/n] 
```


[6/11/2023 10:31 PM] tux_linux
maybe this
https://aur.archlinux.org/packages/linux-aarch64-lts


[6/11/2023 10:31 PM] szybet
you are drunk my friend


[6/11/2023 10:31 PM] tux_linux
i'm on armv8


[6/11/2023 10:32 PM] tux_linux
no


[6/11/2023 10:32 PM] tux_linux
arch arm


[6/11/2023 10:32 PM] szybet
arch on arm 💀


[6/11/2023 10:32 PM] szybet
try it on an x86 machine


[6/11/2023 10:32 PM] szybet
pls


[6/11/2023 10:32 PM] szybet
launch virtualbox whatever


[6/11/2023 10:32 PM] tux_linux
try this and you will know


[6/11/2023 10:34 PM] szybet
```
% qemu-img create -f qcow2 test.img 100M        
Formatting 'test.img', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib size=104857600 lazy_refcounts=off refcount_bits=16
22:33 szybet@hyperbookszyb /tmp
% mkfs.ext4 -O "^metadata_csum" test.img
mke2fs 1.47.0 (5-Feb-2023)
test.img contains `QEMU QCOW Image (v3), 104857600 bytes, AES-encrypted (v3), 104857600 bytes' data
Proceed anyway? (y,N) y

Filesystem too small for a journal
Discarding device blocks: done                            
Creating filesystem with 192 1k blocks and 24 inodes

Allocating group tables: done                            
Writing inode tables: done                            
Writing superblocks and filesystem accounting information: done

22:33 szybet@hyperbookszyb /tmp
% 
```


[6/11/2023 10:34 PM] szybet
and?


[6/11/2023 10:34 PM] tux_linux
1.47


[6/11/2023 10:34 PM] tux_linux
use 1.44.5


[6/11/2023 10:34 PM] szybet
because?


[6/11/2023 10:34 PM] tux_linux
1.47 formats incompatible partitions


[6/11/2023 10:34 PM] tux_linux
even with the custom option


[6/11/2023 10:35 PM] szybet
um can you send link to the source


[6/11/2023 10:36 PM] tux_linux
well, tried it


[6/11/2023 10:36 PM] tux_linux
```
build@inkbox ~/D/e2fsprogs-1.44.5> sudo release/sbin/mkfs.ext4 -O "^metadata_csum" /dev/nbd0p1
mke2fs 1.44.5 (15-Dec-2018)
Invalid filesystem option set: has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize,orphan_file
build@inkbox ~/D/e2fsprogs-1.44.5 [1]> uname -a
Linux inkbox 6.3.6-arch1-1 #1 SMP PREEMPT_DYNAMIC Mon, 05 Jun 2023 15:12:57 +0000 x86_64 GNU/Linux
build@inkbox ~/D/e2fsprogs-1.44.5>
```
on x86


[6/11/2023 10:37 PM] tux_linux
https://github.com/tytso/e2fsprogs/archive/refs/tags/v1.44.5.tar.gz


[6/11/2023 10:47 PM] szybet
```
% ./mkfs.ext4 -O "^metadata_csum" ../../test.img 
mke2fs 1.44.5 (15-Dec-2018)
../../test.img contains a ext4 file system
    created on Sun Jun 11 22:33:49 2023
Proceed anyway? (y,N) y
Invalid filesystem option set: has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize,orphan_file
22:47 szybet@hyperbookszyb /tmp/e2fprogrs/sbin
% 

```?


[6/11/2023 11:10 PM] tux_linux
yes, this problem


[6/11/2023 11:19 PM] tux_linux
so the options are
trying to find out what in earth we have to disable more in the newest mkfs.ext4 options to make it work
and...
probably nothing else


[6/11/2023 11:23 PM] szybet
you know about ` /etc/mke2fs.conf.`?


[6/11/2023 11:23 PM] szybet
config for it


[6/11/2023 11:23 PM] szybet
https://forums.linuxmint.com/viewtopic.php?t=237954


[6/11/2023 11:24 PM] szybet
https://forums.gentoo.org/viewtopic-t-922086-start-0.html


[6/11/2023 11:24 PM] szybet
maybe


[6/11/2023 11:32 PM] tux_linux
this is so dumb
the whole build process is stopped by a partition formatting error


[6/11/2023 11:36 PM] szybet
```
23:36 szybet@hyperbookszyb /tmp/e2fprogrs/sbin
% ./mkfs.ext4 -O "^metadata_csum" ../../test.img
mke2fs 1.44.5 (15-Dec-2018)
../../test.img contains a ext2 file system
    created on Sun Jun 11 23:36:17 2023
Proceed anyway? (y,N) y
The metadata_csum_seed feature requires the metadata_csum feature.
23:36 szybet@hyperbookszyb /tmp/e2fprogrs/sbin
% 
```


[6/11/2023 11:37 PM] szybet
delete orphan_file from the config file


[6/11/2023 11:37 PM] szybet
it now is


[6/11/2023 11:37 PM] szybet
```
    ext4 = {
        features = has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize
    }
```


[6/11/2023 11:37 PM] szybet
did i solved the problem?


[6/12/2023 2:59 PM] tux_linux
Probably
I will try it


[6/12/2023 2:59 PM] tux_linux
Thanks


[6/12/2023 2:59 PM] szybet
🥴


[6/12/2023 3:08 PM] tux_linux
don't tell me you can't change the default config file location for mkfs.ext4...


[6/12/2023 3:12 PM] tux_linux
ok i found


[6/12/2023 3:12 PM] tux_linux
`MKE2FS_CONFIG` env var


[6/12/2023 3:12 PM] szybet
welp we could finally use a proper fakeroot


[6/12/2023 3:12 PM] tux_linux
we can't use fakeroot to format partitions


[6/12/2023 3:13 PM] szybet
because


[6/12/2023 3:13 PM] tux_linux
it needs access to kernel devices?


[6/12/2023 3:14 PM] szybet
https://superuser.com/questions/165116/mount-dev-proc-sys-in-a-chroot-environment

{Embed}
https://superuser.com/questions/165116/mount-dev-proc-sys-in-a-chroot-environment
mount dev, proc, sys in a chroot environment?
I'm trying to create a Linux image with custom picked packages.What I'm trying to do is to hand craft the packages I'm going to use on an XO laptop, because compiling packages takes really long tim...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-6EDE4.png


[6/12/2023 3:14 PM] tux_linux
https://unix.stackexchange.com/questions/9714/what-is-the-need-for-fakeroot-command-in-linux

{Embed}
https://unix.stackexchange.com/questions/9714/what-is-the-need-for-fakeroot-command-in-linux
What is the need for `fakeroot` command in linux
Why do we need fakeroot command at all? Can't we simply use the sudo or su commands?

The man page says:
  fakeroot - run a command in an environment faking root privileges for file manipulation
...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[6/12/2023 3:14 PM] szybet
cant find it, something like that


[6/12/2023 3:14 PM] szybet
yes and?


[6/12/2023 3:14 PM] tux_linux
fakeroot is probably not what you think


[6/12/2023 3:15 PM] szybet
i think thinking, i see no reason this wouldt work


[6/12/2023 3:15 PM] tux_linux
think more


[6/12/2023 3:16 PM] tux_linux
what in the earth would this mean if it was a working solution? it would be a 500 ft wide backdoor to hack any linux system !!


[6/12/2023 3:16 PM] szybet
https://tenor.com/view/over-your-shoulder-caveman-watch-back-starting-fire-look-around-gif-17065029

{Embed}
https://tenor.com/view/over-your-shoulder-caveman-watch-back-starting-fire-look-around-gif-17065029
/mnt/data/projects/git/conversations/media/over-your-shoulder-caveman-882FD.png


[6/12/2023 3:16 PM] tux_linux
```
nicolasmailloux@Nicolass-MacBook-Pro ~> ssh -p 10022 build@192.168.1.195
build@192.168.1.195's password: 
Last login: Mon Jun 12 13:02:24 2023 from 192.168.1.32
Welcome to fish, the friendly interactive shell
Type help for instructions on how to use fish
build@inkbox ~> fakeroot
Welcome to fish, the friendly interactive shell
Type help for instructions on how to use fish
root@inkbox ~# mount -t devtmpfs devtmpfs /tmp
ERROR: ld.so: object 'libfakeroot.so' from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
mount: /tmp: must be superuser to use mount.
       dmesg(1) may have more information after failed mount system call.
root@inkbox ~ [32]#
```


[6/12/2023 3:18 PM] szybet
okay then wel


[6/12/2023 3:18 PM] szybet
well


[6/12/2023 3:18 PM] szybet
just use chroot?


[6/12/2023 3:18 PM] szybet
a chroot env


[6/12/2023 3:18 PM] tux_linux
what's the point?


[6/12/2023 3:19 PM] szybet
/etc/configsfiles are unmodified on base system


[6/12/2023 3:19 PM] szybet
for example


[6/12/2023 3:19 PM] tux_linux
no but i found the env var that changes it


[6/12/2023 3:19 PM] szybet
you get a more generic - working on more distros setup


[6/12/2023 3:19 PM] szybet
yea cool but chroot is a way to do it properly in the future


[6/12/2023 3:20 PM] tux_linux
properly is probably better like this


[6/12/2023 3:20 PM] szybet
btw first check if this works at all


[6/12/2023 3:20 PM] tux_linux
setting up a chroot only for that is nonsense imo


[6/12/2023 3:20 PM] tux_linux
it works


[6/12/2023 3:20 PM] szybet
chroot or an entire container


[6/12/2023 3:20 PM] szybet
choose your poison


[6/12/2023 3:20 PM] tux_linux
idk


[6/12/2023 3:21 PM] szybet
not for @theguywhodidn'twantettheniaimageandwantertoselfcompileusingimgtool


[6/12/2023 3:22 PM] tux_linux
what was the error


[6/12/2023 3:22 PM] szybet
@Kuratius is the i think 20$ for making imgtool work for all distros still revelant? i dont think tux-linux will do it


[6/12/2023 3:23 PM] kuratius
reminder that I had to restart my entire pc between runs of imgtool


[6/12/2023 3:23 PM] tux_linux
i dont have to


[6/12/2023 3:23 PM] kuratius
would still pay it for a working container


[6/12/2023 3:23 PM] szybet
paypal?


[6/12/2023 3:23 PM] tux_linux
```
umount /tmp/inkbox-*/** -l -f
qemu-nbd --disconnect /dev/nbd0
rm -rf out
```
and you should be good to go


[6/12/2023 3:23 PM] kuratius
sure


[6/12/2023 3:23 PM] szybet
yea exactly


[6/12/2023 3:23 PM] szybet
cool, adding it to my todo list


[6/12/2023 3:24 PM] szybet
so @tux-linux imgtool in rust you are welcome


[6/12/2023 3:24 PM] tux_linux
no


[6/12/2023 3:24 PM] szybet
yes?


[6/12/2023 3:24 PM] szybet
;p


[6/12/2023 3:24 PM] tux_linux
we pay for a container


[6/12/2023 3:24 PM] szybet
you know i hate scripts


[6/12/2023 3:24 PM] tux_linux
bash is the way to go for these things


[6/12/2023 3:24 PM] szybet
nope


[6/12/2023 3:24 PM] kuratius
I think some people who dislike bash use python


[6/12/2023 3:24 PM] kuratius
I have never seen someone use rust for system scripting


[6/12/2023 3:25 PM] tux_linux
we are using so much system commands that using rust would be irrelevant


[6/12/2023 3:25 PM] kuratius
I have once or twice called system commands via python myself


[6/12/2023 3:25 PM] kuratius
but that was not a thing you'd use bash for


[6/12/2023 3:25 PM] szybet
propably only for the logic / command line parsing / config file things

still, bash syntax is horrible and i dislike python for being python


[6/12/2023 3:25 PM] kuratius
I can look up examples


[6/12/2023 3:25 PM] kuratius
sec


[6/12/2023 3:26 PM] tux_linux
yes, but the scripts calls git, mkfs, whatever, qemu-img, kernel build scripts, mount commands, unsquashfs commands, tar commands, wget, openssl, everything


[6/12/2023 3:26 PM] tux_linux
it isn't because you dislike the syntax that we shouldn't use it


[6/12/2023 3:27 PM] szybet
bruh


[6/12/2023 3:27 PM] szybet
hear me out now


[6/12/2023 3:27 PM] szybet
rust and error handling


[6/12/2023 3:27 PM] szybet
for this complicated process


[6/12/2023 3:27 PM] szybet
good now?


[6/12/2023 3:28 PM] szybet
+ config file for specifying links to forks of the repo, you won't made it it bash properly


[6/12/2023 3:28 PM] tux_linux
you want to switch to a language I don't know well, I probably won't have the time to learn, and when a problem comes I will not know how to fix it
at least with bash we can all understand roughly how it works


[6/12/2023 3:28 PM] tux_linux
?


[6/12/2023 3:28 PM] szybet
testing things i develop in my forks


[6/12/2023 3:29 PM] tux_linux
you can just supply env vars in bash? env var config file?


[6/12/2023 3:29 PM] tux_linux
literally the simplest config file ever?


[6/12/2023 3:29 PM] szybet
ok:
```
you want to switch to a language that i don't know well, won't learn because of the syntax and don't have the will to fix
at least with rust we can all audit the code, it won't be complicated after all?
```


[6/12/2023 3:30 PM] szybet
nooo ;/


[6/12/2023 3:30 PM] kuratius
https://stackoverflow.com/questions/89228/how-do-i-execute-a-program-or-call-a-system-command

{Embed}
https://stackoverflow.com/questions/89228/how-do-i-execute-a-program-or-call-a-system-command
How do I execute a program or call a system command?
How do I call an external command within Python as if I had typed it in a shell or command prompt?
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/12/2023 3:30 PM] tux_linux
you can all audit the code with bash


[6/12/2023 3:30 PM] szybet
i dont want to and i won't


[6/12/2023 3:31 PM] szybet
ugh... remember the bug in gui_apps service? because `sh` is stupid?


[6/12/2023 3:31 PM] tux_linux
sh is not stupid


[6/12/2023 3:31 PM] tux_linux
humans are stupid


[6/12/2023 3:31 PM] szybet
it is


[6/12/2023 3:31 PM] tux_linux
the bug was really evident and preventable


[6/12/2023 3:31 PM] tux_linux
it was not even a bug


[6/12/2023 3:31 PM] kuratius
result=subprocess.run(['python3', 'tably.py', 'subspace'+'.csv','-n' ,'-r', '-oo', 'texfiles/'], capture_output=True)
(this is the suyntax for command line arguments when doing bash via python)


[6/12/2023 3:32 PM] szybet
no, because only this programming language behaves like that


[6/12/2023 3:32 PM] kuratius
this would do python3 tably.py subspace.csv -n -r -oo textfiles/ I think


[6/12/2023 3:32 PM] kuratius
(tbh I think rust is harder to read than bash or python)


[6/12/2023 3:33 PM] kuratius
but I think bash isnt problematic if you dont use weird backticks


[6/12/2023 3:33 PM] tux_linux
we don't use any in it


[6/12/2023 3:33 PM] szybet
you didn't saw the old init written in sh?


[6/12/2023 3:33 PM] tux_linux
yes, this was horrible


[6/12/2023 3:33 PM] tux_linux
but it was an init program


[6/12/2023 3:33 PM] szybet
exactly lol


[6/12/2023 3:33 PM] tux_linux
this is not an init program


[6/12/2023 3:33 PM] tux_linux
it is a **script** which creates system images


[6/12/2023 3:34 PM] tux_linux
script->sh


[6/12/2023 3:34 PM] szybet
its a large script -> almost a program


[6/12/2023 3:34 PM] tux_linux
it's only 279 lines


[6/12/2023 3:34 PM] szybet
;-;


[6/12/2023 3:34 PM] szybet
ok, the second i have issues bash related i switch it to rust


[6/12/2023 3:35 PM] kuratius
how do you even call command line tools in rust?


[6/12/2023 3:35 PM] kuratius
Isnt that a hassle because string manipulation in rust sucks?


[6/12/2023 3:35 PM] szybet
with grace and harmony


[6/12/2023 3:36 PM] szybet
what... did you ever used `format!`?


[6/12/2023 3:36 PM] kuratius
I guess I'm wrong then


[6/12/2023 3:37 PM] kuratius
still think python would be nicer


[6/12/2023 3:37 PM] kuratius
if you hate bash


[6/12/2023 3:37 PM] szybet
https://tenor.com/view/cease-your-heresy-warhammer-heresy-astartes-gif-18053812

{Embed}
https://tenor.com/view/cease-your-heresy-warhammer-heresy-astartes-gif-18053812
/mnt/data/projects/git/conversations/media/cease-your-heresy-warhammer-F370A.png


[6/12/2023 3:38 PM] kuratius
can more easily test individual steps


[6/12/2023 3:38 PM] szybet
gdb and breakpoints?....


[6/12/2023 3:38 PM] kuratius
or do you want to install a rust repl just for this?


[6/12/2023 3:38 PM] tux_linux
i say let's just put it in a container first


[6/12/2023 3:38 PM] kuratius
not needed in python 🙂


[6/12/2023 3:38 PM] kuratius
👍


[6/12/2023 3:38 PM] szybet
At least I and @tux-linux agree pythong is horrible, won't use it


[6/12/2023 3:39 PM] tux_linux
but wait for some modification i need to make in the script regarding e2fsprogs
should be out in 5m


[6/12/2023 3:39 PM] tux_linux
normally


[6/12/2023 3:40 PM] szybet
for inkbox scripts like wifi, I would want them in lua, but imgtool is such a big program that a normal language could be used


[6/12/2023 3:41 PM] kuratius
also rust script would require people to download the rust compiler which is several GB


[6/12/2023 3:41 PM] kuratius
might not be ideal


[6/12/2023 3:41 PM] szybet
kernel repo is a fev GB


[6/12/2023 3:42 PM] szybet
and?


[6/12/2023 3:42 PM] tux_linux
1g


[6/12/2023 3:42 PM] szybet
cool, still


[6/12/2023 3:42 PM] szybet
also just the binary could be used


[6/12/2023 3:45 PM] tux_linux
ok found ext4 fix
just need to disable new option
orphan_file


[6/12/2023 3:45 PM] tux_linux
too much time wasted for this


[6/12/2023 3:45 PM] szybet
~~took me 30 minutes~~


[6/12/2023 3:46 PM] tux_linux
well, i was talking about me


[6/12/2023 3:46 PM] tux_linux
also cost me whole sd write to just conclude it wouldn't boot


[6/12/2023 3:57 PM] tux_linux
fix done


[6/12/2023 4:43 PM] tux_linux
look how much we are doomed
```
kobo:~# chroot /kobo /mnt/onboard/.adds/inkbox/inkbox-bin
qt.qpa.plugin: Could not find the Qt platform plugin "xcb" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
kobo:~# 
```
release image


[6/12/2023 4:46 PM] szybet
yes you launched it wrong?


[6/12/2023 4:46 PM] tux_linux
no


[6/12/2023 4:46 PM] szybet
yes?


[6/12/2023 4:47 PM] tux_linux
it does this in normal launch


[6/12/2023 4:47 PM] tux_linux
with libinput platform plugin and no-libinput platform plugin


[6/12/2023 4:47 PM] tux_linux
ohwell wait


[6/12/2023 4:47 PM] tux_linux
well it works with the no libinput one


[6/12/2023 4:49 PM] tux_linux
well, i was talking about this error
didn't read correctly the last time
```
Aborted
kobo:~# QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox/inkbox-bin
qt.qpa.plugin: Could not load the Qt platform plugin "kobo" in "" even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: kobo, vnc.

Aborted
kobo:~# 
```


[6/12/2023 4:49 PM] tux_linux
this is with the libinput one


[6/12/2023 4:49 PM] tux_linux
even though it worked ok before clean install


[6/12/2023 4:49 PM] szybet
missing libs


[6/12/2023 4:49 PM] szybet
wait


[6/12/2023 4:50 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-DA5E9.txt


[6/12/2023 4:50 PM] szybet
no no strace


[6/12/2023 4:50 PM] szybet
launch with QT_DEBUG_PLUGINS=1


[6/12/2023 4:50 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-CD6F3.txt


[6/12/2023 4:50 PM] tux_linux
why isn't it there


[6/12/2023 4:50 PM] tux_linux
it makes no sense


[6/12/2023 4:51 PM] szybet
add LD_LIBRARY_PATH with /lib and the path to qt?


[6/12/2023 4:51 PM] szybet
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/inkbox.sh

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/blob/main/content/inkbox/inkbox.sh
gui-bundle/inkbox.sh at main · Kobo-InkBox/gui-bundle
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[6/12/2023 4:51 PM] szybet
what even are you doing


[6/12/2023 4:51 PM] szybet
the script does that


[6/12/2023 4:51 PM] szybet
;_____;


[6/12/2023 4:51 PM] tux_linux
well, yeah, but inkbox.sh throwed this error even with this line


[6/12/2023 4:51 PM] tux_linux
with normal service launch


[6/12/2023 4:52 PM] tux_linux
that's why i'm trying to debug it


[6/12/2023 4:52 PM] szybet
then just launch it with it


[6/12/2023 4:52 PM] szybet
and show me proper logs


[6/12/2023 4:52 PM] szybet
dont introduce new problems


[6/12/2023 4:52 PM] szybet
thank you


[6/12/2023 4:53 PM] szybet
btw you panick too much


[6/12/2023 4:53 PM] szybet
or i'm too calm after okular & libinput trauma


[6/12/2023 4:54 PM] tux_linux
well, no, i misread that one
this should have been easy to fix, forgot the env var


[6/12/2023 4:54 PM] tux_linux
but problem still applies


[6/12/2023 4:54 PM] szybet
when will you show me the logs


[6/12/2023 4:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-A6472.txt


[6/12/2023 4:55 PM] tux_linux
oh i understand now


[6/12/2023 4:55 PM] szybet
wrong


[6/12/2023 4:55 PM] szybet
` LD_LIBRARY_PATH="${QTPATH}lib:lib"` do you see the problem


[6/12/2023 4:55 PM] tux_linux
look at qtpath and think about it a second time


[6/12/2023 4:55 PM] szybet
yea it is wrong too propably


[6/12/2023 4:56 PM] tux_linux
no


[6/12/2023 4:56 PM] tux_linux
this is the problem

{Attachments}
/mnt/data/projects/git/conversations/media/image-21498.png


[6/12/2023 4:56 PM] tux_linux
we didn't account in taking an up-to-date gui_rootfs


[6/12/2023 4:56 PM] tux_linux
mtdev is stored in gui_rootfs libs


[6/12/2023 4:57 PM] szybet
without checking things i see the problem `lib` is bad, should be `/lib`


[6/12/2023 4:57 PM] tux_linux
no


[6/12/2023 4:57 PM] szybet
i dont understand


[6/12/2023 4:57 PM] szybet
yes


[6/12/2023 4:57 PM] tux_linux
you even wrote this in inkbox.sh


[6/12/2023 4:57 PM] szybet
whatever then shouldn't work


[6/12/2023 4:57 PM] tux_linux
QTPATH=/some/folder/path/ LIBPATH=${QTPATH}lib


[6/12/2023 4:58 PM] tux_linux
QTPATH already contains /


[6/12/2023 4:58 PM] tux_linux
it just expands


[6/12/2023 4:58 PM] tux_linux
itself


[6/12/2023 4:58 PM] szybet
\

{Attachments}
/mnt/data/projects/git/conversations/media/image-8B125.png


[6/12/2023 4:58 PM] szybet
here


[6/12/2023 4:58 PM] szybet
;-;


[6/12/2023 4:58 PM] tux_linux
well, yeah, that one doesn't make sense


[6/12/2023 4:58 PM] szybet
fix it then


[6/12/2023 4:58 PM] tux_linux (pinned)
but probably not important


[6/12/2023 4:58 PM] szybet
¯\_(ツ)_/¯


[6/12/2023 4:58 PM] szybet
;-;


[6/12/2023 4:58 PM] tux_linux
will fix guirootfs


[6/12/2023 4:59 PM] szybet
Pinned a message.


[6/12/2023 4:59 PM] szybet
XD


[6/12/2023 4:59 PM] szybet
then you could explain the problem


[6/12/2023 4:59 PM] tux_linux
no since no one will care once it's fixed


[6/12/2023 4:59 PM] szybet
just describe it in the commit message


[6/12/2023 5:00 PM] szybet
with this attitude we will die in bugs


[6/12/2023 5:13 PM] tux_linux
i am compressing your nia image


[6/12/2023 5:20 PM] tux_linux
uploading


[6/12/2023 5:20 PM] szybet
good, i finish rss first tho


[6/12/2023 5:20 PM] tux_linux
no


[6/12/2023 5:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-45D8B.png


[6/12/2023 5:20 PM] szybet
what


[6/12/2023 5:21 PM] tux_linux
can't we release first


[6/12/2023 5:21 PM] tux_linux
please


[6/12/2023 5:21 PM] szybet
i would test it tommorow?


[6/12/2023 5:21 PM] szybet
also, please also test things


[6/12/2023 5:21 PM] tux_linux
i do


[6/12/2023 5:21 PM] szybet
open some books


[6/12/2023 5:21 PM] szybet
etc


[6/12/2023 5:21 PM] szybet
so yea till tommorow

{Reactions}
👍 

[6/12/2023 5:26 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230612_152622438-C3B89.jpg


[6/12/2023 5:26 PM] tux_linux
finally


[6/12/2023 5:31 PM] szybet
cool


[6/12/2023 5:31 PM] szybet
idk if there are in app credits, but can i be included?


[6/12/2023 5:31 PM] szybet
or am i


[6/12/2023 5:32 PM] szybet
idk, i like credits


[6/12/2023 5:32 PM] szybet
i got a higher note for sanki presentation in classroom

{Reactions}
👍 

[6/12/2023 5:32 PM] szybet
¯\_(ツ)_/¯


[6/12/2023 5:32 PM] tux_linux
show system info
it says 
Nicolas Mailloux and contributors


[6/12/2023 5:32 PM] tux_linux
maybe i could add your name


[6/12/2023 5:32 PM] szybet
list me


[6/12/2023 5:32 PM] szybet
andi


[6/12/2023 5:32 PM] szybet
and thats it


[6/12/2023 5:32 PM] szybet
niluje too


[6/12/2023 6:17 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/brightness-40E33.png


[6/12/2023 6:17 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/brightness-C9513.png


[6/12/2023 6:17 PM] tux_linux
scraped old brightness progress bar for good


[6/12/2023 6:18 PM] tux_linux
btw here is your image
http://pkgs-inkbox.duckdns.org:25560/misc/inkbox-2.0-n306.sqsh


[6/12/2023 6:18 PM] tux_linux
it doesn't include this latest fix but otherwise should be pretty good


[6/12/2023 6:29 PM] tux_linux
credits done

{Attachments}
/mnt/data/projects/git/conversations/media/brightness-420BF.png


[6/12/2023 7:53 PM] szybet
🥳


[6/12/2023 8:51 PM] tux_linux
Works on n905b and connects to wifi

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230612_184903585-77E93.jpg
/mnt/data/projects/git/conversations/media/PXL_20230612_185047724-C80B5.jpg


[6/12/2023 9:20 PM] tux_linux
```
kobo:/data/onboard# ls -a
.                  ._IMG_3325-r.PNG            .database
..                 ._IMG_3325-r.PNG            .fseventsd
.Spotlight-V100    .apps                       .inkbox
._IMG_3325-r.PNG   .thumbnails
kobo:/data/onboard# rm .Spotlight-V100/
rm: cannot remove '.Spotlight-V100/': Is a directory
kobo:/data/onboard# rm .Spotlight-V100/ -r
kobo:/data/onboard# rm ._IMG_3325-r.PNG 
kobo:/data/onboard# rm ._IMG_3325-r.PNG 
kobo:/data/onboard# rm ._IMG_3325-r.PNG 
kobo:/data/onboard# rm ._I^C
```
wtf how can this be even possible


[6/12/2023 9:23 PM] szybet
a tool / lib is doing it


[6/12/2023 9:23 PM] tux_linux
?


[6/12/2023 9:23 PM] szybet
there is a way to check what program accessed a path


[6/12/2023 9:23 PM] szybet
idk


[6/12/2023 9:23 PM] szybet
¯\_(ツ)_/¯


[6/12/2023 9:24 PM] tux_linux
why are three files named the same thing and they coexist together


[6/12/2023 9:24 PM] tux_linux
like


[6/12/2023 9:24 PM] tux_linux
WHAT


[6/12/2023 9:24 PM] szybet
oh


[6/12/2023 9:24 PM] szybet
um


[6/12/2023 9:24 PM] tux_linux
after the three rm commands no ._IMG* files were there


[6/12/2023 9:24 PM] tux_linux
I ran the same command three times


[6/12/2023 9:24 PM] tux_linux
to delete not the same but the same file


[6/12/2023 9:24 PM] szybet
https://unix.stackexchange.com/questions/150468/how-can-two-files-in-one-of-my-folders-have-the-same-name

{Embed}
https://unix.stackexchange.com/questions/150468/how-can-two-files-in-one-of-my-folders-have-the-same-name
How can two files in one of my folders have the same name?
I downloaded two files, they were both saved to the same filename and then I transferred them with scp to another computer.

Why didn't they become one when the second was saved?
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-317B7.png


[6/12/2023 9:24 PM] szybet
idk


[6/12/2023 9:25 PM] tux_linux
maybe


[6/12/2023 9:28 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230612_192816261-F0187.jpg


[6/12/2023 9:28 PM] tux_linux
well it works now


[6/12/2023 9:30 PM] tux_linux
we should put an easter egg photo for each major contributor


[6/12/2023 9:30 PM] tux_linux
and obfuscate a way for users to access it


[6/12/2023 9:30 PM] szybet
if you want


[6/12/2023 9:30 PM] szybet
sure


[6/12/2023 9:33 PM] tux_linux
well @andi , @Szybet , @NiLuJe  since you've been awarded the 'major contributor' status to project, you would be kind to abide to the following demand, that is, to provide a picture (representing whatever you want) to be used as an easter egg somewhere in the code. thank you


[6/12/2023 9:33 PM] tux_linux
mine can be seen above


[6/12/2023 9:35 PM] tux_linux
so now the question is
where will the easter egg be hidden


[6/12/2023 9:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/a49zqE57_700w_0-B63F4.png

{Reactions}
👍 

[6/12/2023 9:36 PM] szybet
i want this


[6/12/2023 9:36 PM] szybet
you can add a label szybet or smth


[6/12/2023 9:36 PM] tux_linux
yes, probably a simple widget with a slideshow of pictures (and names)


[6/12/2023 9:37 PM] tux_linux
but we have to know this first


[6/12/2023 9:37 PM] szybet
actually


[6/12/2023 9:37 PM] szybet
by typing sudo rm -rf / in the keyboard


[6/12/2023 9:37 PM] szybet
anywhere


[6/12/2023 9:37 PM] szybet
it would be funny


[6/12/2023 9:38 PM] szybet
and this for the first image


[6/12/2023 9:38 PM] tux_linux
oh that's good


[6/12/2023 9:38 PM] szybet
lets go with a another app


[6/12/2023 9:38 PM] tux_linux
just a widget


[6/12/2023 9:38 PM] tux_linux
doesn't have to be complicated


[6/12/2023 9:38 PM] szybet
another app


[6/12/2023 9:38 PM] szybet
easier to implement


[6/12/2023 9:38 PM] tux_linux
hidden app?


[6/12/2023 9:38 PM] szybet
i mean


[6/12/2023 9:39 PM] szybet
that it will be launched when this


[6/12/2023 9:39 PM] szybet
inkbox code will be cleanier


[6/12/2023 9:39 PM] tux_linux
yes, widget, app, what's the difference


[6/12/2023 9:39 PM] szybet
inkbox will compile faster


[6/12/2023 9:39 PM] szybet
this will be static code for most


[6/12/2023 9:39 PM] tux_linux
there will be unnecessary overhead from launching another binary


[6/12/2023 9:39 PM] tux_linux
and no way this widget can take more than 2 seconds to compile


[6/12/2023 9:39 PM] szybet
its an easter egg


[6/12/2023 9:40 PM] szybet
;-;


[6/12/2023 9:40 PM] tux_linux
yes, an easter egg is hidden, not showing itself off in another binary


[6/12/2023 9:40 PM] szybet
ugh


[6/12/2023 9:40 PM] szybet
just do it in a qdialog and full screen it


[6/12/2023 9:40 PM] szybet
pls


[6/12/2023 9:40 PM] tux_linux
well, maybe not a qdialog
just a widget or window
it will be fullscreen


[6/12/2023 9:41 PM] szybet
you can get into problem by full screening a widget


[6/12/2023 9:41 PM] szybet
because the lower widget is still active


[6/12/2023 9:41 PM] szybet
idk about window


[6/12/2023 9:41 PM] tux_linux
setModal...


[6/12/2023 9:41 PM] szybet
THEN YOU HAVE A QDIALOG XD


[6/12/2023 9:43 PM] tux_linux
do we have an higher res one or no?


[6/12/2023 9:44 PM] szybet
nope


[6/12/2023 9:44 PM] tux_linux
sad


[6/12/2023 9:44 PM] szybet
nah


[6/12/2023 9:45 PM] szybet
dont care


[6/12/2023 9:51 PM] szybet
seperate qrc file please


[6/12/2023 9:51 PM] szybet
or put them in a seperate folder


[6/12/2023 9:51 PM] tux_linux
it won't weigh very much


[6/12/2023 9:51 PM] szybet
i want order


[6/12/2023 9:51 PM] tux_linux
it is order


[6/12/2023 9:51 PM] tux_linux
class is in main program


[6/12/2023 9:51 PM] tux_linux
resources will be in main program


[6/12/2023 9:52 PM] szybet
i mean... those images dont need to be next to icons for example


[6/12/2023 9:54 PM] tux_linux
they will be in a separate folder


[6/12/2023 9:54 PM] tux_linux
yes


[6/12/2023 10:45 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230612_204407824-475E8.jpg


[6/12/2023 10:49 PM] tux_linux
https://photos.app.goo.gl/RZ1TPnCY2cxVUL137

{Embed}
https://photos.app.goo.gl/RZ1TPnCY2cxVUL137
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/AJFCJaV11H0vnyafEeEFfeO9uUVWod7VqEfEmHe6AO-19240


[6/12/2023 10:58 PM] tux_linux
i am waiting for niluje's and andi1's picture


[6/12/2023 10:59 PM] szybet
add a toast - some context maybe


[6/12/2023 11:06 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/people-D7491.png


[6/12/2023 11:10 PM] tux_linux
code is in this commit
https://github.com/Kobo-InkBox/inkbox/commit/73ff36502e65bdf7940be76c315d9f37b7fc616b

{Embed}
https://github.com/Kobo-InkBox/inkbox/commit/73ff36502e65bdf7940be76c315d9f37b7fc616b
`reader.cpp`: More fixes · Kobo-InkBox/inkbox@73ff365
/mnt/data/projects/git/conversations/media/73ff36502e65bdf7940be76c315d9f37b7fc616b-0A5CF


[6/12/2023 11:10 PM] szybet
god XD


[6/12/2023 11:11 PM] tux_linux
kinda strange feeling when you call `new egg()`


[6/12/2023 11:12 PM] tux_linux
it only works in todo app

{Attachments}
/mnt/data/projects/git/conversations/media/image-35131.png


[6/12/2023 11:12 PM] szybet
oh ok


[6/12/2023 11:12 PM] szybet
i though system wide


[6/12/2023 11:12 PM] tux_linux
well i thought too but then i realized it's only there that it has an enter button


[6/12/2023 11:12 PM] tux_linux
it's good
even harder to access it


[6/12/2023 11:25 PM] tux_linux
Don't forget to test the image tomorrow


[6/12/2023 11:25 PM] tux_linux
Please


[6/12/2023 11:26 PM] szybet
👍


[6/13/2023 2:41 AM] tux_linux
um, so @NiLuJe were you there in 2011?
interesting random find!

{Attachments}
/mnt/data/projects/git/conversations/media/image-0220B.png


[6/13/2023 3:02 AM] aryetis
qtcentre.... I don't get it. I don't understand that forum... I registered to it but never had """"the privileges"""" to respond or create my own thread.... How is this website is even still alive

{Attachments}
/mnt/data/projects/git/conversations/media/image-6997B.png


[6/13/2023 3:55 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230613_015503714-EA186.jpg


[6/13/2023 3:55 AM] tux_linux
Custom screensaver


[6/13/2023 4:00 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230613_020030011-631EC.jpg

{Reactions}
👍 

[6/13/2023 4:00 AM] tux_linux
better


[6/13/2023 4:36 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230613_023534696-77CF3.jpg


[6/13/2023 4:36 AM] tux_linux
improved design a bit


[6/13/2023 8:15 AM] ninuje
Not me 😉 (remember, it's an anagram for Julien, so fairly common).

{Reactions}
👍 

[6/13/2023 8:16 AM] ninuje
Re: file shenanigans, those were macOS resource forks


[6/13/2023 8:17 AM] ninuje
(think fallback for extended attributes on unsupported filesystems like fat32)


[6/13/2023 8:18 AM] ninuje
(The dot underscore stuff)

{Reactions}
👍 

[6/13/2023 12:19 PM] tux_linux
Ok thanks
Do you want to have an Easter egg picture in InkBox or you'd prefer not to?


[6/13/2023 5:42 PM] szybet
i cant boot a fresh inkbox install using my gui-bundle


[6/13/2023 5:42 PM] szybet
oobe doest start, i have compiled it


[6/13/2023 5:43 PM] szybet
idk, will check the fresh image, without my modyfications


[6/13/2023 5:49 PM] szybet
stock booted


[6/13/2023 6:02 PM] szybet
mine not


[6/13/2023 6:02 PM] szybet
later more debugging...


[6/13/2023 6:03 PM] tux_linux
Serial


[6/13/2023 6:34 PM] szybet
i think i got it without


[6/13/2023 6:34 PM] szybet
one sec


[6/13/2023 6:36 PM] szybet
```
% cat content/inkbox/oobe-inkbox 
#!/bin/sh

LD_PRELOAD=/lib/invert_screen.so /mnt/onboard/.adds/inkbox/oobe-inkbox-bin
```


[6/13/2023 6:37 PM] szybet
what even is this


[6/13/2023 6:40 PM] tux_linux
Night mode


[6/13/2023 6:40 PM] szybet
oh


[6/13/2023 6:54 PM] szybet
``startx`: Some fixes`` did you take a strace from this?


[6/13/2023 7:06 PM] szybet
xorg is on in default


[6/13/2023 7:06 PM] szybet
https://tenor.com/view/ew-no-michael-scott-steve-carrell-gif-14491970

{Embed}
https://tenor.com/view/ew-no-michael-scott-steve-carrell-gif-14491970
/mnt/data/projects/git/conversations/media/ew-no-81A9C.png


[6/13/2023 7:10 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-E1887.txt


[6/13/2023 7:11 PM] szybet
yeaaa who is the user user and why he is trying to hurt me


[6/13/2023 7:24 PM] szybet
IPD works even if SD card is  dissconected - while the device is on


[6/13/2023 7:24 PM] szybet
:D


[6/13/2023 7:29 PM] szybet
To be tested: txt files from gutenberg?...


[6/13/2023 7:40 PM] tux_linux
Yes


[6/13/2023 7:40 PM] szybet
cool if it wasn't


[6/13/2023 7:40 PM] tux_linux
You can disable it in oobe setup


[6/13/2023 7:41 PM] szybet
oh ok nice


[6/13/2023 7:41 PM] szybet
also, i fixed radio buttons look - you use them in oob and they are ugly


[6/13/2023 7:41 PM] szybet
look up sanki source if you want


[6/13/2023 7:43 PM] tux_linux
Ok thanks


[6/13/2023 7:43 PM] tux_linux
Doesn't make sense


[6/13/2023 7:43 PM] tux_linux
Did you modify some file?


[6/13/2023 7:43 PM] szybet
fixed it. permission hell.


[6/13/2023 7:43 PM] tux_linux
Ok... did you delete it before?


[6/13/2023 7:44 PM] szybet
i upload a fix. you won't touch or change it. pushd / popd  deleted executable permission to execute. no idea.


[6/13/2023 7:45 PM] tux_linux
no pushd in device scripts right? Only release.sh?


[6/13/2023 7:45 PM] szybet
in release in gui bundle


[6/13/2023 7:45 PM] tux_linux
Ok


[6/13/2023 7:45 PM] tux_linux
PR/patch?


[6/13/2023 7:46 PM] szybet
wifi works on the nia, even recconecting does


[6/13/2023 7:46 PM] tux_linux
It doesn't on n905b


[6/13/2023 7:46 PM] tux_linux
I disabled reconnection on it in default settings


[6/13/2023 7:46 PM] tux_linux
Don't want to become mentally ill with that again


[6/13/2023 7:47 PM] szybet
is it the cursed one?


[6/13/2023 7:47 PM] tux_linux
No


[6/13/2023 7:47 PM] tux_linux
It can still normally connect to networks


[6/13/2023 7:48 PM] tux_linux
That one


[6/13/2023 7:48 PM] szybet
hmm


[6/13/2023 7:48 PM] tux_linux
No apparent logs on wake up


[6/13/2023 7:48 PM] szybet
if you would provide me a bash -x of the script that is recconecting, i could propably tell whats wrong


[6/13/2023 7:48 PM] tux_linux
And power daemon sometimes just stops to work on it


[6/13/2023 7:49 PM] szybet
?


[6/13/2023 7:49 PM] tux_linux
It doesn't want to go to sleep


[6/13/2023 7:49 PM] szybet
because it tries to recconect?


[6/13/2023 7:49 PM] tux_linux
No activity


[6/13/2023 7:49 PM] tux_linux
Maybe


[6/13/2023 7:49 PM] szybet
it doesnt make sense


[6/13/2023 7:50 PM] tux_linux
r e c c o n e c t


[6/13/2023 7:50 PM] szybet
only when it tries to recconect?


[6/13/2023 7:50 PM] tux_linux
I don't know


[6/13/2023 7:50 PM] szybet
racconect? :D


[6/13/2023 7:50 PM] tux_linux
No


[6/13/2023 7:50 PM] szybet
well test it more then


[6/13/2023 7:50 PM] tux_linux
.


[6/13/2023 7:50 PM] szybet
test the ipd


[6/13/2023 7:50 PM] szybet
at least


[6/13/2023 7:50 PM] tux_linux
Yes


[6/13/2023 7:52 PM] szybet
i think gutenberg crashed


[6/13/2023 7:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D22B9.txt


[6/13/2023 7:53 PM] szybet
the first line is concerning


[6/13/2023 7:53 PM] szybet
like a memory leak


[6/13/2023 7:55 PM] tux_linux
First line is not a memory leak


[6/13/2023 7:55 PM] tux_linux
It's just a qt thing


[6/13/2023 7:55 PM] szybet
;-;


[6/13/2023 7:55 PM] szybet
i dont think so


[6/13/2023 7:56 PM] tux_linux
It's saying "this platform plugin doesn't support the property 'setParent' which is probably for normal windowing systems"


[6/13/2023 7:56 PM] szybet
maybe


[6/13/2023 7:56 PM] tux_linux
Gutenberg sometimes hangs and sometimes doesn't
Can't do anything about it


[6/13/2023 7:57 PM] szybet
where does it hang


[6/13/2023 7:57 PM] szybet
script or qt


[6/13/2023 7:57 PM] tux_linux
Maybe it will start working when you add a log somewhere in the code


[6/13/2023 7:57 PM] szybet
not funny


[6/13/2023 7:57 PM] tux_linux
Qt
gutenbergSyncDone


[6/13/2023 7:57 PM] tux_linux
No, for real


[6/13/2023 7:57 PM] szybet
i will have a look at it


[6/13/2023 7:58 PM] tux_linux
Anyways, those things are very badly written like half of the project so got nothing else to do but hope


[6/13/2023 7:58 PM] szybet
give me access to https://github.com/Kobo-InkBox/gui-bundle/

{Embed}
https://github.com/Kobo-InkBox/gui-bundle/
GitHub - Kobo-InkBox/gui-bundle: InkBox GUI bundle contents and gen...
InkBox GUI bundle contents and generation script. Contribute to Kobo-InkBox/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-0613A


[6/13/2023 7:58 PM] tux_linux
Pr


[6/13/2023 7:58 PM] szybet
nooo


[6/13/2023 7:58 PM] tux_linux
I'm in bus now


[6/13/2023 7:58 PM] szybet
welp okay


[6/13/2023 7:58 PM] tux_linux
Submit a patch
Whatever


[6/13/2023 7:59 PM] tux_linux
But please don't do a redesign before 2.1
Fix what you can


[6/13/2023 7:59 PM] szybet
syncCatalog


[6/13/2023 7:59 PM] szybet
?


[6/13/2023 8:00 PM] tux_linux
Yes


[6/13/2023 8:00 PM] tux_linux
Funny thing is, if you restart inkbox once it's finished (script) and go into online library it works fine


[6/13/2023 8:01 PM] szybet
ugh


[6/13/2023 8:02 PM] szybet
for 90% i found the solution


[6/13/2023 8:02 PM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/20b6f7231a2432234fd5b8c785d0c693b48d3fea/src/functions.h#L258

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/20b6f7231a2432234fd5b8c785d0c693b48d3fea/src/functions.h
inkbox/src/functions.h at 20b6f7231a2432234fd5b8c785d0c693b48d3fea ...
An open-source, Qt-based eBook reader for Kobos (and other devices). - inkbox/src/functions.h at 20b6f7231a2432234fd5b8c785d0c693b48d3fea · Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-AA2A2


[6/13/2023 8:02 PM] szybet
you need to remember to close things


[6/13/2023 8:02 PM] szybet
especially if you do it every 500 ms


[6/13/2023 8:02 PM] tux_linux
Well ok


[6/13/2023 8:02 PM] tux_linux
Thanks


[6/13/2023 8:02 PM] szybet
+ i have already showed you this issue


[6/13/2023 8:02 PM] tux_linux
It works now?


[6/13/2023 8:02 PM] szybet
why isin't it fixed


[6/13/2023 8:02 PM] szybet
nope, didn't testes


[6/13/2023 8:02 PM] tux_linux
It was in init


[6/13/2023 8:02 PM] szybet
just looking at the code


[6/13/2023 8:03 PM] szybet
oh well


[6/13/2023 8:03 PM] tux_linux
Didn't light up for this one


[6/13/2023 8:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/350352968_6496013460437996_745789824729567-83D27.mp4


[6/13/2023 8:04 PM] szybet
yea so please, *please* look in functions.h for every open and check if it is closed in a good way


[6/13/2023 8:04 PM] szybet
+ test ipd


[6/13/2023 8:04 PM] tux_linux
Ok


[6/13/2023 8:04 PM] szybet
i'm going to test more things

{Reactions}
👍 

[6/13/2023 8:05 PM] tux_linux
Test if lockscreen spawns itself twice if you go to sleep without unlocking


[6/13/2023 8:05 PM] szybet
for 2.1 i want you to make the code more quality then


[6/13/2023 8:06 PM] tux_linux
Will probably scrap half of it


[6/13/2023 8:06 PM] szybet
https://tenor.com/view/oh-no-homer-simpsons-hide-disappear-gif-16799752

{Embed}
https://tenor.com/view/oh-no-homer-simpsons-hide-disappear-gif-16799752
/mnt/data/projects/git/conversations/media/oh-no-homer-178DF.png


[6/13/2023 8:06 PM] szybet
yea


[6/13/2023 8:06 PM] szybet
sanki is rewritten in 70% or more than it was a year ago


[6/13/2023 8:06 PM] szybet
/shr


[6/13/2023 8:06 PM] szybet
¯\_(ツ)_/¯


[6/13/2023 8:07 PM] tux_linux
It's smaller


[6/13/2023 8:07 PM] tux_linux
Plus it doesn't manage back-end that much


[6/13/2023 8:07 PM] tux_linux
At least init is rewritten, one step forward


[6/13/2023 8:08 PM] szybet
i know


[6/13/2023 8:08 PM] tux_linux
Wifi can be rewritten in Lua or rust but has to be more or equally reliable


[6/13/2023 8:08 PM] szybet
txt files work suprisingly well


[6/13/2023 8:08 PM] tux_linux
Hmm ok


[6/13/2023 8:08 PM] tux_linux
Doesn't sound good


[6/13/2023 8:08 PM] szybet
wifi is a good example of cursed bash error managing


[6/13/2023 8:08 PM] tux_linux
A problem is waiting to happen


[6/13/2023 8:09 PM] szybet
nah, as good as epubs

{Reactions}
👍 

[6/13/2023 8:09 PM] tux_linux
Yes
For this use case
Imgtool is fine in bash


[6/13/2023 8:09 PM] tux_linux
What if you open Epub file after? Blank? 1 page? Crash?


[6/13/2023 8:10 PM] szybet
database generation needs to be rust ;o


[6/13/2023 8:10 PM] tux_linux
explore_local_library, yes


[6/13/2023 8:10 PM] tux_linux
Or qt


[6/13/2023 8:10 PM] tux_linux
Maybe more c++


[6/13/2023 8:11 PM] szybet
RUST


[6/13/2023 8:11 PM] szybet
ERROR HANDLING


[6/13/2023 8:11 PM] szybet
https://tenor.com/view/elmo-fire-flames-hell-dying-gif-4796519

{Embed}
https://tenor.com/view/elmo-fire-flames-hell-dying-gif-4796519
/mnt/data/projects/git/conversations/media/elmo-fire-7724B.png


[6/13/2023 8:12 PM] szybet
create a channel testing


[6/13/2023 8:12 PM] szybet
i will report everything there


[6/13/2023 8:12 PM] szybet
testing 2.0 or smth


[6/13/2023 8:13 PM] tux_linux
(#bugs)


[6/13/2023 8:13 PM] szybet
working != not bug


[6/13/2023 8:14 PM] tux_linux
Well then create a thread


[6/13/2023 8:14 PM] tux_linux
Idk?


[6/13/2023 8:14 PM] szybet
i hope you will find time in holidays.


[6/13/2023 8:14 PM] szybet
i dont like them


[6/13/2023 8:14 PM] szybet
but sure


[6/13/2023 8:14 PM] tux_linux
Started a thread.


[6/13/2023 8:27 PM] tux_linux
... don't forget


[6/13/2023 10:59 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230613_205853404-72F27.jpg
/mnt/data/projects/git/conversations/media/PXL_20230613_205758466-BAD9C.jpg


[6/13/2023 10:59 PM] tux_linux
🥴


[6/13/2023 11:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F215E.png


[6/13/2023 11:04 PM] tux_linux
this is too awesome i can watch the screen and serial console at the same time


[6/13/2023 11:05 PM] tux_linux
it's always facing the table usually


[6/13/2023 11:05 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/350352968_6496013460437996_745789824729567-50065.mp4


[6/13/2023 11:06 PM] tux_linux
we played this with my school orchestra last month


[6/13/2023 11:06 PM] szybet
cool


[6/13/2023 11:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F0C05.png


[6/13/2023 11:07 PM] szybet
lockscreen launches many times, somehow


[6/13/2023 11:07 PM] tux_linux
great


[6/13/2023 11:07 PM] tux_linux
well


[6/13/2023 11:07 PM] tux_linux
you know what to do


[6/13/2023 11:07 PM] tux_linux
thanks


[6/13/2023 11:07 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[6/13/2023 11:07 PM] tux_linux
race condition?


[6/13/2023 11:11 PM] tux_linux
i tried with `-all-root`


[6/13/2023 11:11 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-1F4BF.txt


[6/13/2023 11:11 PM] tux_linux
it works


[6/13/2023 11:12 PM] szybet
should it all be root?


[6/13/2023 11:12 PM] kuratius
ayy pi400

{Reactions}
👍 

[6/13/2023 11:14 PM] tux_linux
yes


[6/13/2023 11:14 PM] tux_linux
i think


[6/13/2023 11:14 PM] tux_linux
also diags don't boot with power button on glo hd either


[6/13/2023 11:14 PM] tux_linux
must be some fix by niluje that didn't quite work out


[6/13/2023 11:18 PM] tux_linux
@NiLuJe your code for the power button switch doesn't seem to work, it's always booting in the default mode and never registering any input... anything you would see now that would seem wrong right away?
thanks
this code https://github.com/Kobo-InkBox/inkbox-os-init/blob/a68291efa93184e2b326d9b1836d76c2985ae2bd/init.c#L321-L365

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/a68291efa93184e2b326d9b1836d76c2985ae2bd/init.c
inkbox-os-init/init.c at a68291efa93184e2b326d9b1836d76c2985ae2bd ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-F168F


[6/13/2023 11:28 PM] szybet
are you sure power_button_pressed and the other bool arent setted?


[6/13/2023 11:31 PM] tux_linux
they are set to false


[6/13/2023 11:43 PM] tux_linux
ok i fixed online library
the problem were qtimers, most probably
I wasn't getting any logs anywhere with them


[6/13/2023 11:44 PM] szybet
did you fixed close()?


[6/13/2023 11:44 PM] szybet
and open


[6/13/2023 11:44 PM] szybet
things


[6/13/2023 11:44 PM] tux_linux
yes


[6/13/2023 11:44 PM] szybet
nice then


[6/13/2023 11:44 PM] tux_linux
but it was not the cause of the problem


[6/13/2023 11:44 PM] szybet
okay


[6/13/2023 11:44 PM] szybet
do you have logs of ipd when it stopped responding?


[6/13/2023 11:44 PM] tux_linux
no


[6/13/2023 11:44 PM] tux_linux
it didn't stop responding


[6/13/2023 11:44 PM] tux_linux
not today


[6/14/2023 1:40 AM] ninuje
Dump the input_event struct and/or select and/or read


[6/14/2023 3:36 AM] tux_linux
```
Interface 'lo': flags set to 0001.

Linux inkbox #1 PREEMPT Tue Jun 13 21:30:22 EDT 202 GNU/Linux
InkBox OS, kernel build qv40bLWw, commit ec0a0ad

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 22/6144 files, 2978/24576 blocks
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 494225/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
rootfs: recovering journal
rootfs: clean, 20/32768 files, 72863/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 179/192768 files, 583374/769894 blocks

[    4.123976] [PROGRESS_BAR-3065] No progess ...
0+1 records in
0+1 records out
256 bytes (256B) copied, 0.001087 seconds, 230.0KB/s
(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
 * Boot mode: Standard
Verifying root filesystem's digital signature ...
Done.
 * Mounted root filesystem
 * Mounted core SquashFS archives
 * Mounted essential filesystems
```


[6/14/2023 3:36 AM] tux_linux
with
```
diff --git a/init.c b/init.c
index 548f29f..947cd38 100644
--- a/init.c
+++ b/init.c
@@ -354,7 +354,9 @@ int main(void) {
                                else if((ev.code == KEY_HOME || ev.code == KEY_KATAKANA) && ev.value == 1) {
                                        other_button_pressed = true;
                                }
+                               printf("Read\n");
                        }
+                       printf("else if(rv)\n");
                }
                else {
                        // Timeout
```


[6/14/2023 3:37 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-43606.png


[6/14/2023 3:37 AM] tux_linux
I don't get anything on the serial console (and I hit the power button)


[6/14/2023 3:37 AM] tux_linux
looks like it isn't even getting to the else if


[6/14/2023 10:24 AM] szybet
what is the size of read


[6/14/2023 10:24 AM] szybet
the code makes sense but yea


[6/14/2023 2:32 PM] tux_linux
why did you remove one of the two unwrap calls while it was added (seemingly after a bug) in 2022?

{Attachments}
/mnt/data/projects/git/conversations/media/image-B1676.png


[6/14/2023 2:35 PM] szybet
rust guidelines changes, the code does the same thing but in one if line


[6/14/2023 2:35 PM] szybet
https://doc.rust-lang.org/rust-by-example/flow_control/if_let.html

{Embed}
https://doc.rust-lang.org/rust-by-example/flow_control/if_let.html
if let - Rust By Example
Rust by Example (RBE) is a collection of runnable examples that illustrate various Rust concepts and standard libraries.


[6/14/2023 2:35 PM] tux_linux
ok


[6/14/2023 2:39 PM] tux_linux
in `explore_local_library.sh`
```
#### ePUB thumbnails ####
cd /mnt/onboard/onboard/.thumbnails
for cover in *; do
    if [ "${cover}" != "*" ]; then
        (echo "/mnt/onboard/onboard/.thumbnails/${cover}" | tail -c 3 | grep -q ".t") && chroot /external_root /usr/bin/convert "/data/onboard/.thumbnails/${cover}" -resize "${coverSize}" "/data/onboard/.thumbnails/${cover::-2}" && rm -f "/mnt/onboard/onboard/.thumbnails/${cover}"
    fi
done
cd - &>/dev/null
```
the `.t` files represent some which haven't been converted yet to the prescribed size for specific device
by completely overriding them, it means none is converted


[6/14/2023 2:40 PM] szybet
it didn't worked


[6/14/2023 2:40 PM] tux_linux
for what book


[6/14/2023 2:40 PM] szybet
can't you just iterate over all pngs? whats the problem with that...


[6/14/2023 2:40 PM] szybet
every one


[6/14/2023 2:40 PM] szybet
now it does work


[6/14/2023 2:40 PM] tux_linux
wdym?


[6/14/2023 2:40 PM] szybet
but well


[6/14/2023 2:41 PM] szybet
iterate over all of them, no .t nonsense


[6/14/2023 2:44 PM] szybet
in other words, you are over complicating things


[6/14/2023 2:46 PM] tux_linux
let's see if imagemagick likes in-place converting


[6/14/2023 2:47 PM] szybet
no reason it shouldn't


[6/14/2023 2:47 PM] szybet
https://imagemagick.org/Usage/basics/


[6/14/2023 2:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-6A546.png


[6/14/2023 2:48 PM] szybet
¯\_(ツ)_/¯


[6/14/2023 2:49 PM] tux_linux
can't you just use convert and export to the same file?


[6/14/2023 2:50 PM] szybet
idk? mabe?


[6/14/2023 2:50 PM] szybet
maybe


[6/14/2023 2:50 PM] tux_linux
at first glance it doesn't work


[6/14/2023 2:52 PM] tux_linux
hm ok how did we get there
```
 USER_HZ=100
+ penFGColor=0
+ penBGColor=255
+ deviceName='Unknown!'
+ deviceId=40
+ deviceCodename=
+ devicePlatform=
+ isKoboNonMT=0
+ ntxBootRota=2
+ ntxRotaQuirk=0
+ isNTX16bLandscape=0
+ currentRota=3
+ canRotate=0
+ calculate 1072/
+ awk 'BEGIN { print 1072/ }'
awk: cmd. line:1: Unexpected token
+ result=
+ printf '%.0f\n'
+ calculate 1448/
+ awk 'BEGIN { print 1448/ }'
awk: cmd. line:1: Unexpected token
+ result=
+ printf '%.0f\n'
+ coverSize='0x0!'
+ cd /mnt/onboard/onboard/.thumbnails
+ '[' 5831c9dbcebd67d37a6e1541eb851fb0c9702cb364050e492f47e9beae0dec33 '!=' '*' ]
+ chroot /external_root /usr/bin/convert /data/onboard/.thumbnails/5831c9dbcebd67d37a6e1541eb851fb0c9702cb364050e492f47e9beae0dec33 -resize '0x0!' /data/onboard/.thumbnails/5831c9dbcebd67d37a6e1541eb851fb0c9702cb364050e492f47e9beae0dec33
convert: negative or zero image size `/data/onboard/.thumbnails/5831c9dbcebd67d37a6e1541eb851fb0c9702cb364050e492f47e9beae0dec33' @ error/resize.c/ResizeImage/3736.
```


[6/14/2023 2:54 PM] tux_linux
oh ok, icon_height_divider is provided by gui


[6/14/2023 2:56 PM] tux_linux
yea of course i was stupid

{Attachments}
/mnt/data/projects/git/conversations/media/image-29863.png


[6/14/2023 2:59 PM] tux_linux
ok works here


[6/14/2023 3:01 PM] szybet
:D


[6/14/2023 3:01 PM] szybet
prepare the nia image


[6/14/2023 3:01 PM] tux_linux
power button does not work at boot


[6/14/2023 3:01 PM] szybet
we could finalize testing today maybe


[6/14/2023 3:01 PM] tux_linux
still need to fix that


[6/14/2023 3:01 PM] szybet
i asked a question there


[6/14/2023 3:01 PM] szybet
niluje too


[6/14/2023 3:01 PM] szybet
we wait 4you


[6/14/2023 3:01 PM] tux_linux
well, it isn't even reading anything


[6/14/2023 3:01 PM] szybet
also @Kitkat / Szybet ( sometimes ) maybe you want to test 2.0 too?


[6/14/2023 3:01 PM] tux_linux
can't see the read size


[6/14/2023 3:02 PM] szybet
literally show me sizeof(ev), the int from it


[6/14/2023 3:02 PM] tux_linux
it doesn't get to this code block


[6/14/2023 3:02 PM] szybet
also do this @tux-linux


[6/14/2023 3:03 PM] tux_linux
...


[6/14/2023 3:03 PM] tux_linux
i put printf statements but nothing is printed


[6/14/2023 3:03 PM] tux_linux
so it means it broke down earlier


[6/14/2023 3:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-DD700.png


[6/14/2023 3:03 PM] szybet
it doesnt get here?


[6/14/2023 3:03 PM] tux_linux
it doesn't


[6/14/2023 3:03 PM] tux_linux
look at my log


[6/14/2023 3:03 PM] tux_linux
nothing


[6/14/2023 3:04 PM] szybet
nope


[6/14/2023 3:04 PM] szybet
so it should exit?


[6/14/2023 3:04 PM] tux_linux
well it should at least print that it has read something from the input device


[6/14/2023 3:04 PM] tux_linux
that way we know it's getting there


[6/14/2023 3:04 PM] tux_linux
but it isn't


[6/14/2023 3:04 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0362F.png


[6/14/2023 3:04 PM] szybet
does it do this?


[6/14/2023 3:05 PM] szybet
also what is rv


[6/14/2023 3:05 PM] szybet
show me the whole code snippet of this problem


[6/14/2023 3:05 PM] tux_linux
probably not because it doesn't print any error


[6/14/2023 3:05 PM] szybet
.


[6/14/2023 3:07 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/blob/a68291efa93184e2b326d9b1836d76c2985ae2bd/init.c#L321-L365

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/a68291efa93184e2b326d9b1836d76c2985ae2bd/init.c
inkbox-os-init/init.c at a68291efa93184e2b326d9b1836d76c2985ae2bd ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-F168F


[6/14/2023 3:07 PM] tux_linux
also, that one is a bit more funny, it prints only three digits of the year
```
Linux inkbox #1 PREEMPT Tue Jun 13 21:30:22 EDT 202 GNU/Linux
```


[6/14/2023 3:08 PM] szybet
leave it ;p


[6/14/2023 3:08 PM] tux_linux
no


[6/14/2023 3:16 PM] tux_linux
`Linux inkbox #1 PREEMPT Wed Jun 14 09:13:17 EDT 2023 GNU/Linux`
yay


[6/14/2023 3:17 PM] tux_linux
but we still have the other problem


[6/14/2023 3:26 PM] szybet
chat gpt bullshit:
```
There are a few potential problems with the given code:

    The value of BUTTON_INPUT_DEVICE is not defined or provided in the code snippet. It should be defined as a string containing the path to the input device file corresponding to the button.

    The select function call is incorrect. The first argument should be fd + 1 instead of 1 to indicate the highest file descriptor number in the set.

    The file descriptor fd is not updated in the file descriptor set rfds after each iteration of the loop. This can cause issues because select may not wait for input on the correct file descriptor.
```


[6/14/2023 3:26 PM] szybet
```c
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/select.h>
#include <linux/input.h>

#define BUTTON_INPUT_DEVICE "/dev/input/event0" // Replace with the correct input device path

int main() {
    bool power_button_pressed = false;
    bool other_button_pressed = false;
    // Allow 3 seconds for power button input (boot mode & DFL mode)
    int fd = open(BUTTON_INPUT_DEVICE, O_RDONLY | O_NONBLOCK);
    if (fd == -1) {
        perror("open");
        exit(EXIT_FAILURE);
    }

    fd_set rfds;
    FD_ZERO(&rfds);
    FD_SET(fd, &rfds);
    struct timeval tv;
    tv.tv_sec = 3;
    tv.tv_usec = 0;

    while (true) {
        int rv = select(fd + 1, &rfds, NULL, NULL, &tv);

        if (rv == -1 && errno != EINTR) {
            perror("select");
            exit(EXIT_FAILURE);
        } else if (rv) {
            struct input_event ev;
            if (read(fd, &ev, sizeof(ev)) == sizeof(ev)) {
                if (ev.code == KEY_POWER && ev.value == 1) {
                    power_button_pressed = true;
                }
                // KEY_KATAKANA represents the brightness button on the Glo (N613)
                else if ((ev.code == KEY_HOME || ev.code == KEY_KATAKANA) && ev.value == 1) {
                    other_button_pressed = true;
                }
            }
        } else {
            // Timeout
            break;
        }
    }

    close(fd);

    return 0;
}
```


[6/14/2023 3:26 PM] szybet
also i dislike c


[6/14/2023 3:26 PM] tux_linux
```
Starting kernel ...

[    2.425871] drivers/misc/ntx-misc.c(msp430_i2c_probe): Can't allocate irq 395
[    2.446146] [zForce_ir_touch_recv_data-277] command BootComplete (0)...
[    2.453916] PMU: ricoh61x_battery_probe : version is RICOH61x_BATTERY_VERSION: 2014.02.21 V3.1.0.0-Solution1 2015/02/09
Interface 'lo': flags set to 0001.

Linux inkbox #1 PREEMPT Wed Jun 14 09:20:10 EDT 2023 GNU/Linux
InkBox OS, kernel build ZH1GeU3s, commit ec0a0ad

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 22/6144 files, 2978/24576 blocks
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 494225/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
[    4.125916] [PROGRESS_BAR-3065] No progess ...
rootfs: recovering journal
rootfs: clean, 20/32768 files, 72863/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 180/192768 files, 583375/769894 blocks

0+1 records in
0+1 records out
256 bytes (256B) copied, 0.001082 seconds, 231.1KB/s
(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
We get to break
 * Boot mode: Standard
```


[6/14/2023 3:27 PM] szybet
aaaaand?


[6/14/2023 3:27 PM] tux_linux
it gets to break everytime

{Attachments}
/mnt/data/projects/git/conversations/media/image-5B624.png


[6/14/2023 3:27 PM] tux_linux
even when I press the power button


[6/14/2023 3:27 PM] szybet
yea i know that


[6/14/2023 3:27 PM] tux_linux
it also only goes through the while loop once


[6/14/2023 3:28 PM] tux_linux
normal?


[6/14/2023 3:30 PM] szybet
No idea


[6/14/2023 3:30 PM] szybet
No propably


[6/14/2023 3:30 PM] szybet
Actually yes, it says break


[6/14/2023 3:30 PM] szybet
So break


[6/14/2023 3:31 PM] szybet
Print out rv


[6/14/2023 3:31 PM] szybet
What is it


[6/14/2023 3:31 PM] szybet
As an int


[6/14/2023 3:31 PM] tux_linux
it will be null


[6/14/2023 3:31 PM] tux_linux
i will try chatgpt "fix"


[6/14/2023 3:33 PM] szybet
Check it


[6/14/2023 3:33 PM] szybet
If its null, then you know where is the problem


[6/14/2023 3:33 PM] tux_linux
```

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 22/6144 files, 2978/24576 blocks
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 494225/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
rootfs: recovering journal[    4.124025] [PROGRESS_BAR-3065] No progess ...

rootfs: clean, 20/32768 files, 72863/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 180/192768 files, 583375/769894 blocks

0+1 records in
0+1 records out
256 bytes (256B) copied, 0.001094 seconds, 228.5KB/s
(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
Read
else if(rv)
We get to break
 * Power button input detected
 * Boot mode: Diagnostics
Verifying recovery filesystem's digital signature ...
```


[6/14/2023 3:33 PM] tux_linux
well chatgpt fix worked


[6/14/2023 3:33 PM] szybet
What the fuck


[6/14/2023 3:33 PM] szybet
Credit it then


[6/14/2023 3:33 PM] tux_linux
**yes**


[6/14/2023 3:34 PM] szybet
https://tenor.com/view/lol-emote-gif-24165461

{Embed}
https://tenor.com/view/lol-emote-gif-24165461
/mnt/data/projects/git/conversations/media/lol-emote-DED70.png


[6/14/2023 4:00 PM] szybet
what now


[6/14/2023 4:01 PM] tux_linux
i will fix some fbink thing in recoveryfs and it should work


[6/14/2023 4:01 PM] tux_linux
will send you another image after that


[6/14/2023 4:02 PM] tux_linux
well you can make feathernotes video


[6/14/2023 4:02 PM] tux_linux
or maybe wait until i send you the new image


[6/14/2023 4:02 PM] tux_linux
idk


[6/14/2023 4:03 PM] szybet
okay


[6/14/2023 4:05 PM] tux_linux
i know what you can do


[6/14/2023 4:06 PM] tux_linux
make me a list of things to record for 2.0 official video


[6/14/2023 4:15 PM] szybet
```md
- cool if you record inkbox booting on all your devices - and then select one for the rest things
- wifi - connect to a network, show all the fancy debug info
- ereader - changing sizes, margins, etc - opening pdfs, epubs, downloading files from gutenberg and opening them, zooming into pdfs - change some pages too
- local library - just iterate over books, show info, buttons, change to folder view and show once more
- home page - show it after ereader, also pin a book
- xorg - show the keyboard - idk if there are new xorg apps
- user apps - did you recorded your apps? conway? there is a video of maps on github btw - also new apps - you can skip sketch because it will be shown in feathernotes video - but qualculate for sure, idk about 2048 - you need to know whats new from these +++ show all of them installed
- IPD - just turn it off, on and show the speeeeed
- lockscreen working great
- did you showed diagnostics yet? if not do it
```
idk what more


[6/14/2023 4:16 PM] tux_linux
ok good thanks


[6/14/2023 4:31 PM] tux_linux
this doesn't fail even if signature is wrong

{Attachments}
/mnt/data/projects/git/conversations/media/image-A7E97.png


[6/14/2023 4:32 PM] szybet
what is REAP


[6/14/2023 4:32 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-7F3B0.png


[6/14/2023 4:32 PM] szybet
cant you do it normal and declare it as a function?


[6/14/2023 4:32 PM] tux_linux
it's niluje code


[6/14/2023 4:32 PM] szybet
do it normal


[6/14/2023 4:33 PM] tux_linux
how would you do that


[6/14/2023 4:34 PM] szybet
void function


[6/14/2023 4:34 PM] tux_linux
yes, but how do you pass args to it


[6/14/2023 4:34 PM] szybet
as a single string


[6/14/2023 4:34 PM] tux_linux
and how do you convert them to a list


[6/14/2023 4:36 PM] szybet
my god


[6/14/2023 4:36 PM] szybet
just use an array


[6/14/2023 4:36 PM] szybet
;_;


[6/14/2023 4:37 PM] tux_linux
@NiLuJe ...?


[6/14/2023 4:37 PM] tux_linux
how do you pass an array of this condition in a function


[6/14/2023 4:37 PM] tux_linux
i tried it once and it was a nightmare, didn't work, problems everywhere
this is why it never made it to a function


[6/14/2023 4:37 PM] tux_linux
a macro is good but then it needs to work


[6/14/2023 4:41 PM] szybet
pointer to it and size of the array


[6/14/2023 4:41 PM] szybet
or struct with both of those info


[6/14/2023 4:42 PM] szybet
maybe you have a dev key? what is rc? null? one? debug it


[6/14/2023 4:42 PM] tux_linux
no i don't


[6/14/2023 4:42 PM] szybet
then debug it


[6/14/2023 4:43 PM] szybet
what is the value


[6/14/2023 4:43 PM] tux_linux
well it's returning an int while the function is defined as long int


[6/14/2023 4:43 PM] tux_linux
maybe that's the problem?


[6/14/2023 4:44 PM] szybet
not really but why is it - it should be a uint8_t - error codes have a limit at 255 anyway


[6/14/2023 4:44 PM] tux_linux
the function can also return pids


[6/14/2023 4:45 PM] szybet
where does this return anything lol


[6/14/2023 4:45 PM] tux_linux
it returns exit codes if you wait for program termination


[6/14/2023 4:45 PM] tux_linux
otherwise it returns pid


[6/14/2023 4:45 PM] szybet
oh ;-;


[6/14/2023 4:45 PM] tux_linux
in the actual run_command function


[6/14/2023 4:45 PM] szybet
change to int then


[6/14/2023 4:45 PM] tux_linux
well, max value for pid is 32768


[6/14/2023 4:46 PM] tux_linux
max value for int is like 5 digits bigger


[6/14/2023 4:46 PM] szybet
so no reason to use long


[6/14/2023 4:47 PM] szybet
freaking heresy i dont like this


[6/14/2023 4:47 PM] szybet
ask niluje and chatgpt


[6/14/2023 4:48 PM] tux_linux
i compiled a version without long ints


[6/14/2023 4:48 PM] tux_linux
will try it


[6/14/2023 4:54 PM] tux_linux
doesn't work


[6/14/2023 4:54 PM] tux_linux
```
Linux inkbox #1 PREEMPT Wed Jun 14 10:52:21 EDT 2023 GNU/Linux
InkBox OS, kernel build L3JwJHjj, commit ec0a0ad

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 22/6144 files, 2978/24576 blocks
Program terminated and exit code is 0
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 494225/512000 blocks
Program terminated and exit code is 0
e2fsck 1.46.2 (28-Feb-2021)
rootfs: recovering journal
[    4.143920] [PROGRESS_BAR-3065] No progess ...
rootfs: clean, 20/32768 files, 72863/131072 blocks
Program terminated and exit code is 0
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 180/192768 files, 583375/769894 blocks
Program terminated and exit code is 0

0+1 records in
0+1 records out
256 bytes (256B) copied, 0.000512 seconds, 488.3KB/s
Program terminated and exit code is 0
(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
 * Boot mode: Standard
Program terminated and exit code is 0
Verifying root filesystem's digital signature ...
Done.
Program terminated and exit code is 0
 * Mounted root filesystem
Program terminated and exit code is 0
Program terminated and exit code is 0
Program terminated and exit code is 0
 * Mounted core SquashFS archives
 * Mounted essential filesystems
Program terminated and exit code is 0
Program terminated and exit code is 127
Verification Failure
Program terminated and exit code is 1
Program terminated and exit code is 0
Program terminated and exit code is 0
```


[6/14/2023 4:54 PM] tux_linux
although it registers bad exit codes


[6/14/2023 5:00 PM] tux_linux
...ok

{Attachments}
/mnt/data/projects/git/conversations/media/image-84C27.png


[6/14/2023 5:01 PM] szybet
um no


[6/14/2023 5:01 PM] szybet
but maybe


[6/14/2023 5:01 PM] szybet
IDK :D


[6/14/2023 5:02 PM] tux_linux
it compiles


[6/14/2023 5:04 PM] tux_linux
it doesn't work


[6/14/2023 5:04 PM] szybet
that's not a suprice


[6/14/2023 5:04 PM] szybet
you can start to work on a less heresy type function then


[6/14/2023 5:16 PM] tux_linux
WHAT


[6/14/2023 5:16 PM] tux_linux
```
 * Mounted root filesystem
 * Mounted core SquashFS archives
 * Mounted essential filesystems
Verification Failure
rc is 1
```


[6/14/2023 5:16 PM] tux_linux
problem is NOT_MATCH then?


[6/14/2023 5:17 PM] szybet
yea what is this heresy then


[6/14/2023 5:18 PM] tux_linux
`#define NOT_MATCH(s1, s2) (s1 && strcmp(s1, s2) != 0)`


[6/14/2023 5:18 PM] szybet
what the fuck


[6/14/2023 5:18 PM] szybet
why


[6/14/2023 5:18 PM] szybet
why


[6/14/2023 5:18 PM] szybet
why


[6/14/2023 5:19 PM] szybet
you can use `==`...


[6/14/2023 5:19 PM] tux_linux
```
The code snippet you provided defines a macro called NOT_MATCH. Let's break down its meaning:

c

#define NOT_MATCH(s1, s2) (s1 && strcmp(s1, s2) != 0)

This macro takes two string arguments, s1 and s2. It is used to check if the two strings do not match. Here's what each part of the macro does:

    s1: This is the first string argument to be compared.
    s2: This is the second string argument to be compared.

The macro uses the strcmp function to compare the two strings. The strcmp function returns 0 if the strings are identical.

The macro NOT_MATCH returns true if s1 is not a null pointer (s1 &&) and if the comparison strcmp(s1, s2) != 0 is true. In other words, it returns true if the strings do not match.

Here's an example usage of the NOT_MATCH macro:

c

const char *str1 = "Hello";
const char *str2 = "World";

if (NOT_MATCH(str1, str2)) {
    printf("The strings do not match.\n");
} else {
    printf("The strings match.\n");
}

In this example, if str1 and str2 do not match (i.e., they are not identical), the message "The strings do not match." will be printed. Otherwise, if they match, the message "The strings match." will be printed.
```


[6/14/2023 5:21 PM] szybet
make developer key a bool


[6/14/2023 5:21 PM] tux_linux
but it doesn't make sense
it should work


[6/14/2023 5:21 PM] tux_linux
this can just create problems elsewhere


[6/14/2023 5:21 PM] szybet
ok, dump developer key then


[6/14/2023 5:21 PM] szybet
the whole sring


[6/14/2023 5:24 PM] tux_linux
rc is 1 and developer_key is (null)


[6/14/2023 5:25 PM] tux_linux
why doesn't it work


[6/14/2023 5:25 PM] tux_linux
oh i think i know


[6/14/2023 5:25 PM] tux_linux
it will return false because s1 is null


[6/14/2023 5:26 PM] szybet
🥴


[6/14/2023 5:30 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-8321D.png


[6/14/2023 5:31 PM] szybet
maybe


[6/14/2023 5:36 PM] tux_linux
Nice


[6/14/2023 5:36 PM] tux_linux
```
Linux inkbox #1 PREEMPT Wed Jun 14 11:34:33 EDT 2023 GNU/Linux
InkBox OS, kernel build FpDIddYH, commit ec0a0ad

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 22/6144 files, 2978/24576 blocks
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 494225/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
rootfs: recovering journal[    4.143802] [PROGRESS_BAR-3065] No progess ...

rootfs: clean, 20/32768 files, 72863/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 180/192768 files, 583375/769894 blocks

0+1 records in
0+1 records out
256 bytes (256B) copied, 0.001099 seconds, 227.5KB/s
(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
 * Boot mode: Standard
Verifying root filesystem's digital signature ...
Done.
 * Mounted root filesystem
 * '(null)' is not a valid login shell; falling back to default
 * Mounted core SquashFS archives
 * Mounted essential filesystems
Verification Failure
 * GUI root filesystem's digital signature is invalid!
 * Aborting boot and powering off
Segmentation fault
The system is going down NOW!
Sent SIGTERM to all processes
Sent SIGKILL to all processes
Requesting system poweroff
```
new problems


[6/14/2023 5:36 PM] szybet
well you modified the function


[6/14/2023 5:37 PM] tux_linux
yes but now it segment faults instead of displaying QR code splash


[6/14/2023 5:37 PM] szybet
i dont think checking on a null in an if in your way is correct


[6/14/2023 5:38 PM] szybet
https://www.tutorialspoint.com/how-to-check-if-a-variable-is-null-in-c-cplusplus

{Embed}
https://www.tutorialspoint.com/how-to-check-if-a-variable-is-null-in-c-cplusplus
How to check if a variable is NULL in C C
How to check if a variable is NULL in C C  - In C or C++, there is no special method for comparing NULL values. We can use if statements to check whether a variable is null or not.Here we will see one program. We will try to open a file in read mode, that is not present in the system. So the function will return null value. We can check it usi
/mnt/data/projects/git/conversations/media/tp_bottom_logo-491C1.png


[6/14/2023 5:38 PM] szybet
https://stackoverflow.com/questions/3825668/checking-for-null-pointer-in-c-c

{Embed}
https://stackoverflow.com/questions/3825668/checking-for-null-pointer-in-c-c
Checking for NULL pointer in C/C++
In a recent code review, a contributor is trying to enforce that all NULL checks on pointers be performed in the following manner:

int * some_ptr;
// ...
if (some_ptr == NULL)
{
    // Handle null-
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/14/2023 5:38 PM] szybet
maybe


[6/14/2023 5:38 PM] szybet
idk


[6/14/2023 5:39 PM] tux_linux
I think I will just do this

{Attachments}
/mnt/data/projects/git/conversations/media/image-5F9A1.png


[6/14/2023 5:39 PM] szybet
wtf...


[6/14/2023 5:40 PM] szybet
no


[6/14/2023 5:40 PM] szybet
thats simply bad code


[6/14/2023 5:40 PM] tux_linux
why


[6/14/2023 5:40 PM] szybet
you check for null 3 times


[6/14/2023 5:40 PM] tux_linux
i want it to show the warning only if user wrote something in `LOGIN_SHELL` flag


[6/14/2023 5:40 PM] szybet
something is broken


[6/14/2023 5:42 PM] tux_linux
more like this?

{Attachments}
/mnt/data/projects/git/conversations/media/image-A7468.png


[6/14/2023 5:44 PM] szybet
what is even this


[6/14/2023 5:44 PM] szybet
this even this what


[6/14/2023 5:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-FF998.png


[6/14/2023 5:45 PM] szybet
this will execute when login shell is "" and ash at the same time


[6/14/2023 5:45 PM] tux_linux
I think I could remove the first


[6/14/2023 5:45 PM] szybet
;-;


[6/14/2023 5:45 PM] tux_linux
is **not**


[6/14/2023 5:45 PM] szybet
c hurts my brain


[6/14/2023 5:47 PM] szybet
this returns true if it's a null


[6/14/2023 5:48 PM] szybet
and it returns true if  the strings are the same


[6/14/2023 5:48 PM] szybet
do you see an issue with this?


[6/14/2023 5:49 PM] tux_linux
returns true if strings are not the same


[6/14/2023 5:49 PM] tux_linux
returns true if one or both strings are null


[6/14/2023 5:49 PM] tux_linux
meaning they don't match


[6/14/2023 5:51 PM] szybet
so this code works


[6/14/2023 5:51 PM] szybet
it shows the log that the shell is bad


[6/14/2023 5:51 PM] szybet
the issue is somewhere else, that it is null


[6/14/2023 5:51 PM] tux_linux
only if there's something other than 4 accepted shells in file


[6/14/2023 5:51 PM] tux_linux
it can be null


[6/14/2023 5:51 PM] tux_linux
if the file doesn't exist


[6/14/2023 5:51 PM] tux_linux
which is the case


[6/14/2023 5:52 PM] szybet
show me the whole code


[6/14/2023 5:53 PM] szybet
copy it


[6/14/2023 5:53 PM] szybet
i will modify it


[6/14/2023 5:53 PM] tux_linux
why


[6/14/2023 5:53 PM] szybet
copy it


[6/14/2023 5:53 PM] szybet
you will see


[6/14/2023 5:54 PM] tux_linux
```
    // Handling LOGIN_SHELL
        if(root) {
            if(MATCH(login_shell, "bash")) {
                REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/bin/bash#", "/opt/passwd_root");
                REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/bin/bash#", "/opt/passwd_root");
            }
            else if(MATCH(login_shell, "zsh")) {
                REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/usr/local/bin/zsh#", "/opt/passwd_root");
                REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/usr/local/bin/zsh#", "/opt/passwd_root");
            }
            else if(MATCH(login_shell, "fish")) {
                REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/usr/bin/fish#", "/opt/passwd_root");
                REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/usr/bin/fish#", "/opt/passwd_root");
                mkpath("/mnt/root/.config", 0755);
                mkpath("/mnt/root/.config/fish", 0755);
                write_file("/mnt/root/.config/fish/fish_variables", "# This file contains fish universal variable definitions.\n# VERSION: 3.0\nSETUVAR __fish_init_2_3_0:\\x1d\nSETUVAR __fish_init_3_x:\\x1d\nSETUVAR --export fish_user_paths:/usr/local/bin");
            }
            else {
                if(login_shell != NULL) {
                    if(NOT_MATCH(login_shell, "") && NOT_MATCH(login_shell, "ash")) {
                        char message_buff[256] = { 0 };
                        snprintf(message_buff, sizeof(message_buff), "'%s' is not a valid login shell; falling back to default", login_shell);
                        info(message_buff, INFO_WARNING);
                    }
                }
            }
        }
        free(login_shell);
        login_shell = NULL;
```
relevant part


[6/14/2023 5:57 PM] szybet
```
// Handling LOGIN_SHELL
    if(root) {
        if(MATCH(login_shell, "bash")) {
            REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/bin/bash#", "/opt/passwd_root");
            REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/bin/bash#", "/opt/passwd_root");
        }
        else if(MATCH(login_shell, "zsh")) {
            REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/usr/local/bin/zsh#", "/opt/passwd_root");
            REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/usr/local/bin/zsh#", "/opt/passwd_root");
        }
        else if(MATCH(login_shell, "fish")) {
            REAP("/bin/sed", "-i", "1s#.*#root:x:0:0:root:/root:/usr/bin/fish#", "/opt/passwd_root");
            REAP("/bin/sed", "-i", "30s#.*#user:x:1000:1000:Linux User,,,:/:/usr/bin/fish#", "/opt/passwd_root");
            mkpath("/mnt/root/.config", 0755);
            mkpath("/mnt/root/.config/fish", 0755);
            write_file("/mnt/root/.config/fish/fish_variables", "# This file contains fish universal variable definitions.\n# VERSION: 3.0\nSETUVAR __fish_init_2_3_0:\\x1d\nSETUVAR __fish_init_3_x:\\x1d\nSETUVAR --export fish_user_paths:/usr/local/bin");
        }
        else {
                if(!MATCH(login_shell, "") && !MATCH(login_shell, "ash")) {
                    char message_buff[256] = { 0 };
                    snprintf(message_buff, sizeof(message_buff), "'%s' is not a valid login shell; falling back to default", login_shell);
                    info(message_buff, INFO_WARNING);
                }
        }
    }
    free(login_shell);
    login_shell = NULL;
```?


[6/14/2023 5:57 PM] szybet
why overcomplicate things


[6/14/2023 5:58 PM] tux_linux
what happens when it is null


[6/14/2023 5:58 PM] szybet
show match funtion


[6/14/2023 5:58 PM] szybet
macro


[6/14/2023 5:58 PM] tux_linux
`#define MATCH(s1, s2) ((s1 != NULL && s2 != NULL) && strcmp(s1, s2) == 0)`


[6/14/2023 5:59 PM] szybet
it doesnt execute the code


[6/14/2023 5:59 PM] szybet
which is good?


[6/14/2023 5:59 PM] tux_linux
i guess


[6/14/2023 5:59 PM] szybet
NOT_MATCH is heresy


[6/14/2023 6:00 PM] tux_linux
oh not this now


[6/14/2023 6:00 PM] tux_linux
`kill_process` causes sigsegv


[6/14/2023 6:01 PM] szybet
code


[6/14/2023 6:02 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-522E7.png


[6/14/2023 6:04 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-88DA0.png


[6/14/2023 6:07 PM] tux_linux
the problem is `get_pid_by_name`


[6/14/2023 6:08 PM] tux_linux
i put a test printf after it and it doesn't print


[6/14/2023 6:08 PM] tux_linux
also your fix doesn't work
```
 * '(null)' is not a valid login shell; falling back to default
```


[6/14/2023 6:20 PM] szybet
is this string null or what


[6/14/2023 6:20 PM] szybet
check if i modified it in ipd lately


[6/14/2023 6:23 PM] szybet
show me read file


[6/14/2023 6:24 PM] tux_linux
gdb says it's segfaulting at strstr


[6/14/2023 6:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-39D6B.txt


[6/14/2023 6:25 PM] tux_linux
i put the function into a separate program


[6/14/2023 6:25 PM] tux_linux
to reproduce it


[6/14/2023 6:26 PM] tux_linux
`proc./cmdline` where's that dot coming from


[6/14/2023 6:27 PM] szybet
entry d name is an int


[6/14/2023 6:28 PM] szybet
for 90%


[6/14/2023 6:28 PM] tux_linux
and for 10%?


[6/14/2023 6:29 PM] tux_linux
here are the two files you can use to debug it locally

{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-0C2A8.c
/mnt/data/projects/git/conversations/media/kill_process-14CA1.h


[6/14/2023 6:32 PM] szybet
its not int


[6/14/2023 6:32 PM] tux_linux
then what is it


[6/14/2023 6:32 PM] szybet
string


[6/14/2023 6:33 PM] tux_linux
then what to change


[6/14/2023 6:33 PM] tux_linux
and why did it work in c++


[6/14/2023 6:35 PM] szybet
dump entry - d name


[6/14/2023 6:35 PM] szybet
show what it is


[6/14/2023 6:35 PM] szybet
inside it, as a string


[6/14/2023 6:37 PM] tux_linux
`.`


[6/14/2023 6:38 PM] szybet
in every iteration?


[6/14/2023 6:38 PM] tux_linux
the program is supposed to kill busybox


[6/14/2023 6:38 PM] tux_linux
wait


[6/14/2023 6:39 PM] tux_linux
well, it doesn't work


[6/14/2023 6:39 PM] tux_linux
```
nicolas@gentoo-ryzen /tmp [SIGINT]> busybox cat &
nicolas@gentoo-ryzen /tmp [SIGINT]> fish: Job 1, 'busybox cat &' has stopped
nicolas@gentoo-ryzen /tmp [SIGINT]> bg
Send job 1 'busybox cat &' to background
nicolas@gentoo-ryzen /tmp> fish: Job 1, 'busybox cat &' has stopped
nicolas@gentoo-ryzen /tmp> ./kill_process
.
fish: Job 2, './kill_process' terminated by signal SIGSEGV (Address boundary error)
nicolas@gentoo-ryzen /tmp [SIGSEGV]> 
```


[6/14/2023 6:39 PM] szybet
1. it can say "." because its the current file
2. look up proc, there are files too, not only dirs


[6/14/2023 6:40 PM] tux_linux
well, yes

{Attachments}
/mnt/data/projects/git/conversations/media/message-D6EDE.txt


[6/14/2023 6:40 PM] szybet
why it works? c++ is propably more error resistand - c just refuses


[6/14/2023 6:40 PM] szybet
so check if entry->d_name is a valid int


[6/14/2023 6:40 PM] szybet
thats it


[6/14/2023 6:41 PM] tux_linux
it's not


[6/14/2023 6:41 PM] tux_linux
```
kill_process.c: In function ‘get_pid_by_name’:
kill_process.c:28:26: warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘char *’ [-Wformat=]
   28 |                 printf("%d\n", entry->d_name);
      |                         ~^     ~~~~~~~~~~~~~
      |                          |          |
      |                          int        char *
      |                         %s
nicolas@gentoo-ryzen /tmp>
```


[6/14/2023 6:44 PM] szybet
...


[6/14/2023 6:44 PM] szybet
convert it


[6/14/2023 6:44 PM] szybet
try to


[6/14/2023 6:44 PM] szybet
if it converts then its an int


[6/14/2023 6:44 PM] szybet
then continue


[6/14/2023 6:44 PM] tux_linux
how


[6/14/2023 6:44 PM] tux_linux
can't you try it yourself?


[6/14/2023 6:45 PM] szybet
https://stackoverflow.com/questions/9753346/determine-if-a-c-string-is-a-valid-int-in-c

{Embed}
https://stackoverflow.com/questions/9753346/determine-if-a-c-string-is-a-valid-int-in-c
Determine if a C string is a valid int in C
I need to check if a  C string is a valid integer.

I tried both

int num=atoi(str);
and 

int res=sscanf(str, "%d", &num);
But sending the string "8 -9  10" in both of the lines returned sim...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/14/2023 6:45 PM] szybet
i prefer not to touch more c than needed


[6/14/2023 6:48 PM] tux_linux
it's just a dot


[6/14/2023 6:52 PM] szybet
you iterate


[6/14/2023 6:52 PM] szybet
its a while


[6/14/2023 6:52 PM] szybet
is it all dots?


[6/14/2023 7:02 PM] tux_linux
read_file can't read proc files


[6/14/2023 7:03 PM] szybet
those are directiories?


[6/14/2023 7:04 PM] szybet
maybe first answer if they iterate correctly


[6/14/2023 7:04 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-5D64E.c
/mnt/data/projects/git/conversations/media/kill_process-AFBAD.h


[6/14/2023 7:04 PM] tux_linux
current code


[6/14/2023 7:04 PM] tux_linux
current output

{Attachments}
/mnt/data/projects/git/conversations/media/message-45C95.txt


[6/14/2023 7:05 PM] szybet
to who am i talking...


[6/14/2023 7:05 PM] szybet
first resolve one issue then go to the next one


[6/14/2023 7:05 PM] tux_linux
it hasn't anything to do with that


[6/14/2023 7:05 PM] szybet
it has


[6/14/2023 7:06 PM] szybet
i won't help you further until you repair those bugs that we have found


[6/14/2023 7:06 PM] tux_linux
it works


[6/14/2023 7:06 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-B5DEF.txt


[6/14/2023 7:06 PM] tux_linux
it's not a bug


[6/14/2023 7:06 PM] tux_linux
it finds the files


[6/14/2023 7:06 PM] tux_linux
it can't read from them


[6/14/2023 7:10 PM] szybet
ok then why we are debugging this code for 2 hours -_-


[6/14/2023 7:10 PM] tux_linux
no, it doesn't work


[6/14/2023 7:10 PM] szybet
***r e p a i r i t***


[6/14/2023 7:11 PM] tux_linux
only the part that it finds files works


[6/14/2023 7:11 PM] tux_linux
it can't read any `cmdline` file


[6/14/2023 7:12 PM] tux_linux
https://stackoverflow.com/a/8992872

{Embed}
https://stackoverflow.com/a/8992872
Any Idea Why My C Code Can't Read from /proc?
I have been able to write a program that can read any text files... except the ones found in /proc. Any file that I try to read from /proc shows up empty.

But whenever I type

cat /proc/cpuinfo
on
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/14/2023 7:13 PM] szybet
```
        char cmdline_file[1024] = { 0 };
```
every file you read needs to be 1024 or less otherwise buffer overflow. nice


[6/14/2023 7:13 PM] szybet
just use this
```
FILE *f = fopen("/proc/cpuinfo", "r");
size_t sz = 0;
char * lin = 0;
do {
   ssize_t lsz = getline (&lin, &sz, f);
   if (lsz<0) break;
   handle_line_of_size (lin, lsz);
} while (!feof (f));
fclose (f);
```


[6/14/2023 7:14 PM] tux_linux
what is handle_line_of_size


[6/14/2023 7:14 PM] tux_linux
kernel probably prohibits >1024 char process names


[6/14/2023 7:15 PM] szybet
heresy once more


[6/14/2023 7:17 PM] szybet
dont use it then


[6/14/2023 7:18 PM] szybet
check manually those cmdlines


[6/14/2023 7:18 PM] szybet
what is in them


[6/14/2023 7:18 PM] tux_linux
and how


[6/14/2023 7:18 PM] szybet
cat


[6/14/2023 7:18 PM] szybet
from


[6/14/2023 7:18 PM] szybet
shelll


[6/14/2023 7:18 PM] tux_linux
no


[6/14/2023 7:25 PM] szybet
```
% gcc kill_process.cpp 
kill_process.cpp: In function ‘char* read_file(const char*, bool)’:
kill_process.cpp:66:24: error: invalid conversion from ‘void*’ to ‘char*’ [-fpermissive]
   66 |         buffer = calloc(sizeof(*buffer), (size_t) bytes + 1U);
      |                  ~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                        |
      |                        void*
19:24 szybet@hyperbookszyb /tmp/fuck
% 
```


[6/14/2023 7:25 PM] szybet
yea


[6/14/2023 7:25 PM] szybet
https://cpp0x.pl/dokumentacja/standard-C/calloc/104

{Embed}
https://cpp0x.pl/dokumentacja/standard-C/calloc/104
calloc - standard C | funkcja • C++ « PDC
Alokuje pamięć i wypełnia ją zerami. (funkcja)


[6/14/2023 7:25 PM] szybet
yea what are you doing


[6/14/2023 7:41 PM] tux_linux
```
int get_pid_by_name(const char * name) {
    struct dirent * entry = NULL;
    DIR * dp = NULL;

    const char proc[] = "/proc/";
    dp = opendir(proc);
    while((entry = readdir(dp))) {
        // cmdline is more accurate, sometimes status may be buggy
        char cmdline_file[1024] = { 0 };
        sprintf(cmdline_file, "%s%s/cmdline", proc, entry->d_name);
        printf("File to read is %s\n", cmdline_file);

        if(access(cmdline_file, F_OK) != 0) {
            continue;
        }

        FILE* ptr;
        char ch;
        char cmdline[4096] = { 0 };

        // Opening file in reading mode
        ptr = fopen(cmdline_file, "r");

        if (NULL == ptr) {
            printf("file can't be opened \n");
        }

        // Printing what is written in file
        // character by character using loop.
        do {
            ch = fgetc(ptr);
            strncat(cmdline, &ch, 1);

            // Checking if character is not EOF.
            // If it is EOF stop reading.
        } while (ch != EOF);

        // Closing the file
        fclose(ptr);

        printf("%s\n", cmdline);
        // https://stackoverflow.com/questions/2340281/check-if-a-string-contains-a-string-in-c
        if(cmdline && strstr(cmdline, name)) {
            printf("%s, %s\n", cmdline, name);
            // After closing directory, it's impossible to call entry->d_name
            int return_pid = atoi(entry->d_name);
            closedir(dp);
            return return_pid;
        }
    }
    // If we get here, we haven't found any PID
    closedir(dp);
    return -1;
}
```


[6/14/2023 7:42 PM] tux_linux
It works now


[6/14/2023 7:42 PM] tux_linux
I spent 1h42m debugging this


[6/14/2023 7:42 PM] tux_linux
enough


[6/14/2023 8:19 PM] tux_linux
ok, this is nonsense


[6/14/2023 8:19 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-FCB50.txt


[6/14/2023 8:20 PM] tux_linux
The first `kill_process` was compiled with native gcc (x86_64), and it works.
The second `kill_process`, which still has the same code, was compiled with musl toolchain and run via binfmt on x86_64. It also segfaults on native arm. Using a glibc instead of a musl toolchain doesn't change anything.


[6/14/2023 8:21 PM] tux_linux
```
if(access(cmdline_file, F_OK) != 0)
```
it seems this function doesn't work on arm


[6/14/2023 8:21 PM] tux_linux
for some reason
in this specific case


[6/14/2023 8:22 PM] tux_linux
for reference

{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-EB125.c
/mnt/data/projects/git/conversations/media/kill_process-7BE93.h


[6/14/2023 8:22 PM] tux_linux
I give up


[6/14/2023 8:38 PM] szybet
so it doesnt work on kobo?


[6/14/2023 8:38 PM] tux_linux
no


[6/14/2023 8:39 PM] szybet
https://stackoverflow.com/questions/230062/whats-the-best-way-to-check-if-a-file-exists-in-c

{Embed}
https://stackoverflow.com/questions/230062/whats-the-best-way-to-check-if-a-file-exists-in-c
What's the best way to check if a file exists in C?
Is there a better way than simply trying to open the file?

int exists(const char *fname)
{
    FILE *file;
    if ((file = fopen(fname, "r")))
    {
        fclose(file);
        return 1;
    }
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/14/2023 8:39 PM] szybet
just use stat then


[6/14/2023 8:39 PM] tux_linux
it didn't work


[6/14/2023 8:39 PM] tux_linux
either


[6/14/2023 8:39 PM] szybet
because?


[6/14/2023 8:39 PM] tux_linux
it didn't work


[6/14/2023 8:40 PM] szybet
explain


[6/14/2023 8:41 PM] tux_linux
proc files are not standard files


[6/14/2023 8:41 PM] tux_linux
probably


[6/14/2023 8:41 PM] szybet
`        if(strcmp(cmdline_file, "/proc/./cmdline") == 0 || strcmp(cmdline_file, "/proc/self/cmdline") == 0 || strcmp(cmdline_file, "/proc/thread-self/cmdline") == 0) {` my god what are you doing


[6/14/2023 8:41 PM] tux_linux
this was not the right commit


[6/14/2023 8:42 PM] tux_linux
on x86_64 /proc/./cmdline wasn't a file for `access`
on arm, it was


[6/14/2023 8:42 PM] szybet
cant you check if `entry->d_name` can be converted to int? how many times do i need to say


[6/14/2023 8:43 PM] szybet
also what about this


[6/14/2023 8:43 PM] szybet
also dont do stat and access just try ```
    if ((file = fopen(fname, "r")))
    {
        fclose(file);
        return 1;
    }
```


[6/14/2023 8:43 PM] szybet
easiest


[6/14/2023 8:44 PM] szybet
i stop helping you with this, you dont even listen


[6/14/2023 9:15 PM] tux_linux
it doesn't work


[6/14/2023 9:15 PM] tux_linux
```
/proc/547336/cmdline
/proc/548478/cmdline
/proc/548624/cmdline
548624
fish: Job 1, “busybox cat &” terminated by signal SIGKILL (Forced quit)
```
on x86_64 binary


[6/14/2023 9:15 PM] tux_linux
(works)


[6/14/2023 9:15 PM] tux_linux
on arm binary
```
build@inkbox /tmp> armv7l-linux-musleabihf-gcc kill_process.c -o kill_process -g -static
build@inkbox /tmp> busybox cat &
build@inkbox /tmp> bg
Send job 1 “busybox cat &” to background
Job 1, 'busybox cat &' has stopped
build@inkbox /tmp> ./kill_process
/proc/./cmdline
/proc/../cmdline
/proc/fb/cmdline
/proc/fs/cmdline
/proc/bus/cmdline
/proc/dma/cmdline
/proc/irq/cmdline
/proc/net/cmdline
/proc/sys/cmdline
/proc/tty/cmdline
/proc/xen/cmdline
/proc/acpi/cmdline
/proc/keys/cmdline
/proc/kmsg/cmdline
/proc/misc/cmdline
/proc/mtrr/cmdline
/proc/stat/cmdline
/proc/iomem/cmdline
/proc/kcore/cmdline
/proc/locks/cmdline
/proc/swaps/cmdline
/proc/crypto/cmdline
/proc/driver/cmdline
/proc/mounts/cmdline
/proc/uptime/cmdline
/proc/vmstat/cmdline
/proc/cgroups/cmdline
/proc/cmdline/cmdline
/proc/cpuinfo/cmdline
/proc/devices/cmdline
/proc/ioports/cmdline
/proc/loadavg/cmdline
/proc/meminfo/cmdline
/proc/modules/cmdline
/proc/sysvipc/cmdline
/proc/version/cmdline
/proc/consoles/cmdline
/proc/kallsyms/cmdline
/proc/pressure/cmdline
/proc/slabinfo/cmdline
/proc/softirqs/cmdline
/proc/zoneinfo/cmdline
/proc/buddyinfo/cmdline
/proc/diskstats/cmdline
/proc/key-users/cmdline
/proc/schedstat/cmdline
/proc/interrupts/cmdline
/proc/kpagecount/cmdline
/proc/kpageflags/cmdline
/proc/partitions/cmdline
/proc/timer_list/cmdline
/proc/execdomains/cmdline
/proc/filesystems/cmdline
/proc/kpagecgroup/cmdline
/proc/sched_debug/cmdline
/proc/vmallocinfo/cmdline
/proc/pagetypeinfo/cmdline
/proc/dynamic_debug/cmdline
/proc/sysrq-trigger/cmdline
/proc/self/cmdline
/proc/thread-self/cmdline
/proc/1/cmdline
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
fish: Job 2, “./kill_process” terminated by signal SIGSEGV (Address boundary error)
```


[6/14/2023 9:15 PM] tux_linux
same code


[6/14/2023 9:16 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-7E92B.c
/mnt/data/projects/git/conversations/media/kill_process-77CE7.h


[6/14/2023 9:16 PM] tux_linux
i'm fed up


[6/14/2023 9:23 PM] szybet
you updated the binary


[6/14/2023 9:23 PM] szybet
does it work or not then


[6/14/2023 9:23 PM] tux_linux
I updated it to the commit using pkill


[6/14/2023 9:24 PM] szybet
what now does not work


[6/14/2023 9:24 PM] tux_linux
segfault


[6/14/2023 9:24 PM] tux_linux
on arm, and not x86_64


[6/14/2023 9:24 PM] szybet
i didn't asked what error it gives


[6/14/2023 9:25 PM] tux_linux
gdb on rpi doesn't work


[6/14/2023 9:25 PM] tux_linux
so i don't know


[6/14/2023 9:25 PM] tux_linux
just hangs on `start`


[6/14/2023 9:26 PM] tux_linux
and segfaults when ran without


[6/14/2023 9:27 PM] szybet
where is start


[6/14/2023 9:27 PM] tux_linux
`gdb start`


[6/14/2023 9:28 PM] szybet
dont use gdb


[6/14/2023 9:28 PM] szybet
only gdb server


[6/14/2023 9:29 PM] szybet
i have been talking about that


[6/14/2023 9:29 PM] szybet
gdb takes all the ram


[6/14/2023 9:29 PM] tux_linux
i'm on rpi


[6/14/2023 9:29 PM] szybet
also dont use gdb at all


[6/14/2023 9:29 PM] tux_linux
i have 4g of ram


[6/14/2023 9:29 PM] szybet
stupid piece of software, never worked good


[6/14/2023 9:29 PM] tux_linux
you serious!!!!


[6/14/2023 9:29 PM] szybet
does getline work?


[6/14/2023 9:30 PM] tux_linux
i don't know


[6/14/2023 9:30 PM] tux_linux
it's now been 3h30m


[6/14/2023 9:30 PM] tux_linux
i don't want to do this anymore


[6/14/2023 9:30 PM] szybet
you didnt tested a stack overflow link i send but launched gdb? lol


[6/14/2023 9:30 PM] szybet
then take a break


[6/14/2023 9:30 PM] tux_linux
i said it didn't work


[6/14/2023 9:31 PM] szybet
open does not work?


[6/14/2023 9:31 PM] szybet
`open`


[6/14/2023 9:31 PM] szybet
did you tried ifstream


[6/14/2023 9:35 PM] tux_linux
again, it hangs on arm but works on x86

{Attachments}
/mnt/data/projects/git/conversations/media/message-1D62A.txt


[6/14/2023 9:35 PM] szybet
with what changes


[6/14/2023 9:36 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-108A4.c
/mnt/data/projects/git/conversations/media/kill_process-A6D65.h


[6/14/2023 9:38 PM] tux_linux
i am compressing new nia image


[6/14/2023 9:38 PM] szybet
whats the point if this doesnt work


[6/14/2023 9:38 PM] tux_linux
i use pkill


[6/14/2023 9:38 PM] szybet
who needs logs to know what is going on inside, nice...


[6/14/2023 9:39 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-os-init/blob/815782d25854b4469bcbc8b8ef9002e7aeb10d68/init.c#L1070-L1073C2

{Embed}
https://github.com/Kobo-InkBox/inkbox-os-init/blob/815782d25854b4469bcbc8b8ef9002e7aeb10d68/init.c
inkbox-os-init/init.c at 815782d25854b4469bcbc8b8ef9002e7aeb10d68 ·...
InkBox OS' initialization program source. Contribute to Kobo-InkBox/inkbox-os-init development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-os-init-F168F


[6/14/2023 9:39 PM] szybet
work arround?


[6/14/2023 9:40 PM] ninuje
The guard is in place because you can't pass a NULL pointer to string functions (pretty much *any* of them, it'll crash)


[6/14/2023 9:40 PM] ninuje
The intended use case being s1 = stack (where to look), s2 = needle (what to look for), s2 is most likely going to be a string literal, so no need to guard it


[6/14/2023 9:42 PM] ninuje
(that /proc walk code was ugly as hell, FWIW, I'm like 80% sure there was a string and/or buffer and/or read mishap in there)


[6/14/2023 9:43 PM] tux_linux
```
build@inkbox /tmp> ./kill_process
/proc/./cmdline
file exists
out of file verification clause
reading file
reading file
reading file
reading file
reading file
reading file
reading file
reading file
reading file
reading file
```
this gives that with arm/binfmt
hangs on reading
(it doesn't do that on x86)

{Attachments}
/mnt/data/projects/git/conversations/media/kill_process-FF37F.c
/mnt/data/projects/git/conversations/media/kill_process-672F9.h


[6/14/2023 9:43 PM] ninuje
The select branches look wild, and the code formatting is breaking my brain; I'm not on my usual machine to do a pass over it, though


[6/14/2023 9:43 PM] tux_linux
any particular idea why it works on two different x86_64 computers but not on any arm system?


[6/14/2023 9:44 PM] ninuje
But, basically, keep handling rv == -1 first (error), *then* handle rv == 0 for timeout; then a final else for the actual stuff, possibly behind an FD_ISSET macro


[6/14/2023 9:44 PM] ninuje
64-bit


[6/14/2023 9:44 PM] ninuje
different system, different entries


[6/14/2023 9:44 PM] tux_linux
and this affects basic functions like `access`, to check if a file exists?


[6/14/2023 9:44 PM] ninuje
no, memory corruption elsewhere that breaks the stack pointer


[6/14/2023 9:45 PM] tux_linux
everytime?


[6/14/2023 9:45 PM] tux_linux
with different methods, swapped-over functions et. al


[6/14/2023 9:45 PM] ninuje
as long as the entries don't change, yeah, that would be pretty reproducible


[6/14/2023 9:45 PM] tux_linux
here it just hangs on a while loop


[6/14/2023 9:46 PM] ninuje
fgetc is terrible for what you're doing, also


[6/14/2023 9:46 PM] tux_linux
i have tried pretty much everything


[6/14/2023 9:46 PM] ninuje
I think I saw a mention of getline while skimming, that was a good idea


[6/14/2023 9:47 PM] ninuje
but a plain read or fread would do, too, since there really isn't much to read anyway


[6/14/2023 9:47 PM] ninuje
you're just left with doing atoint "right", which takes a considerable amount of effort (strtoul is pain)


[6/14/2023 9:48 PM] tux_linux
everything is pain
it's been almost 4h
time to stop thinking about it for a moment for me at least


[6/14/2023 9:48 PM] ninuje
c.f., https://github.com/NiLuJe/FBInk/blob/0e3ef13149b4f6de7ce60256dfa5d2c6541e95ad/fbink_cmd.h#L135-L249 for much too fancy generic imps of that

{Embed}
https://github.com/NiLuJe/FBInk/blob/0e3ef13149b4f6de7ce60256dfa5d2c6541e95ad/fbink_cmd.h
FBInk/fbink_cmd.h at 0e3ef13149b4f6de7ce60256dfa5d2c6541e95ad · NiL...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink_cmd.h at 0e3ef13149b4f6de7ce60256dfa5d2c6541e95ad · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-AC252

{Reactions}
👍 

[6/14/2023 9:49 PM] ninuje
The kfmon ones might be more readable (as I *think* they're not generic)


[6/14/2023 9:50 PM] ninuje
https://github.com/NiLuJe/kfmon/blob/b88b40f7840dc49b13ea0059e9b7e35c32ccafd0/kfmon.c#L240-L294

{Embed}
https://github.com/NiLuJe/kfmon/blob/b88b40f7840dc49b13ea0059e9b7e35c32ccafd0/kfmon.c
kfmon/kfmon.c at b88b40f7840dc49b13ea0059e9b7e35c32ccafd0 · NiLuJe/...
Kute File Monitor, an inotify-based Launcher for Kobo devices - kfmon/kfmon.c at b88b40f7840dc49b13ea0059e9b7e35c32ccafd0 · NiLuJe/kfmon
/mnt/data/projects/git/conversations/media/kfmon-007BA


[6/14/2023 9:50 PM] ninuje
wrong type and signedness for you, though (pid_t is a long int, IIRC)


[6/14/2023 9:50 PM] tux_linux
yes we should eventually switch to pid_t


[6/14/2023 9:51 PM] ninuje
on the upside, strtol is *slightly* less pain than strtoul because you don't have to deal with signedness

{Reactions}
👍 

[6/14/2023 9:51 PM] tux_linux
@Szybet image will have finished uploading in about 15m


[6/14/2023 10:03 PM] szybet
what do i test with it


[6/14/2023 10:03 PM] szybet
apart from diagnostics


[6/14/2023 10:04 PM] tux_linux
User apps


[6/14/2023 10:04 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/inkbox-2.0-n306.sqsh


[6/14/2023 10:04 PM] tux_linux
Thanks


[6/14/2023 10:05 PM] szybet
i also forgot: i recorded feathernotes - i will upload it soon

{Reactions}
👍 

[6/14/2023 10:22 PM] szybet
Uloaded feathernotes

{Reactions}
👍 

[6/14/2023 10:32 PM] tux_linux
https://www.youtube.com/watch?v=Uz1CcqDgtQU

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=Uz1CcqDgtQU
InkBox OS user app: FeatherNotes demo
FeatherNotes is a (forked) note-taking app for eReaders running InkBox OS. It can be installed as an user app and work with a standalone keyboard connected via USB OTG. It currently only has been tested on Kobo Nia.

FeatherNotes was ported by Szybet, there on GitHub : https://github.com/Szybet/FeatherNotes-inkbox
You can download it there : htt...
/mnt/data/projects/git/conversations/media/maxresdefault-7700B.jpg


[6/14/2023 10:32 PM] tux_linux
you need to upload it to github


[6/14/2023 10:33 PM] szybet
why


[6/14/2023 10:33 PM] tux_linux
it isn't there?


[6/14/2023 10:33 PM] szybet
https://github.com/Szybet/niAudio/tree/main/keyboard

{Embed}
https://github.com/Szybet/niAudio/tree/main/keyboard
niAudio/keyboard at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[6/14/2023 10:34 PM] szybet
there is an old vid


[6/14/2023 10:34 PM] tux_linux
no, I mean, upload user app to gh


[6/14/2023 10:34 PM] szybet
i will add your link to yt


[6/14/2023 10:34 PM] szybet
oh


[6/14/2023 10:34 PM] szybet
we talked about it - its very special but in the end okay?


[6/14/2023 10:34 PM] tux_linux
the yt video says that it's downloadable there


[6/14/2023 10:35 PM] szybet
oh


[6/14/2023 10:35 PM] szybet
okay


[6/14/2023 10:35 PM] szybet
well it needs charger manager which needs to be put manually


[6/14/2023 10:35 PM] szybet
also it can burn someone ereader if its not the nia **a**


[6/14/2023 10:36 PM] szybet
welp welp


[6/14/2023 10:36 PM] tux_linux
put a warning


[6/14/2023 10:36 PM] tux_linux
we are not responsible


[6/14/2023 10:36 PM] tux_linux
the end


[6/14/2023 10:36 PM] szybet
someone needs to put charger manager first


[6/14/2023 10:36 PM] szybet
and root the device


[6/14/2023 10:37 PM] tux_linux
put a warning...


[6/14/2023 10:37 PM] szybet
and enable config


[6/14/2023 10:37 PM] szybet
ok ;-;


[6/14/2023 10:37 PM] tux_linux
no i have a better idea


[6/14/2023 10:37 PM] tux_linux
write 'contact szybet on discord so that he can explain to you how to not to set your device on fire'


[6/14/2023 10:38 PM] szybet
nice


[6/14/2023 10:38 PM] tux_linux
and then you can share the file


[6/14/2023 10:42 PM] tux_linux
oh and test xorg too


[6/14/2023 10:42 PM] szybet
no its cursed on the nia


[6/14/2023 10:42 PM] szybet
but sure


[6/14/2023 10:42 PM] szybet
;-;


[6/14/2023 10:42 PM] tux_linux
thanks


[6/14/2023 10:43 PM] szybet
i will go to school tommorow with it, and that there are basically no lessons now i will test it whole day

{Reactions}
👍 

[6/14/2023 10:43 PM] szybet
maybe even read a book

{Reactions}
👍 

[6/14/2023 10:43 PM] tux_linux
https://www.youtube.com/playlist?list=PLlY9LVp779ideq-gG6vYkZIR352UMeAet

{Embed}
https://www.youtube.com/playlist?list=PLlY9LVp779ideq-gG6vYkZIR352UMeAet
InkBox OS
/mnt/data/projects/git/conversations/media/hqdefault-CF858.jpg


[6/14/2023 10:43 PM] tux_linux
I made a playlist


[6/14/2023 10:43 PM] szybet
i have been reading for the past month on my phone because fo inkbox


[6/14/2023 10:43 PM] szybet
cool


[6/14/2023 10:43 PM] szybet
cant you make it in order?


[6/14/2023 10:44 PM] tux_linux
well, i put the most recent video of the gui first


[6/14/2023 10:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-38E91.png


[6/14/2023 10:45 PM] szybet
chronological maybe


[6/14/2023 11:01 PM] kuratius
remember how we talked about the pine note thingy? I found this https://forum.pine64.org/showthread.php?tid=17515&pid=116177#pid116177
```The PineNote isn't produced until the software state of an OS which the factory can pre-flash matured. From the Q&A:

"Due to very low and slow PineNote sales, the PineNote will only consider to produce again after stable and end user ready Linux OS build that can be used as PineNote default OS build becomes available.``` if inkbox 2.0 is impressive enough...


[6/14/2023 11:01 PM] tux_linux
well, you can talk about it


[6/14/2023 11:02 PM] kuratius
(I was wondering why it was out of stock and was looking for an answer)


[6/14/2023 11:02 PM] szybet
inkbox 2.0 isin't, 2.1 will. My problem is the reader for now. ~~code quality sometimes in some places sucks~~


[6/14/2023 11:03 PM] tux_linux
if we get help from pinenote team it would be huge boost


[6/14/2023 11:03 PM] szybet
also we would need fbink ported to this device


[6/14/2023 11:03 PM] tux_linux
well, we can talk to them about it


[6/14/2023 11:03 PM] szybet
ANYONE COULD HELP AAAAAAAAAAAAAAAAAAAAA


[6/14/2023 11:03 PM] tux_linux
imagine having 5 more people working full time on inkbox


[6/14/2023 11:03 PM] tux_linux
"full-time"


[6/14/2023 11:03 PM] tux_linux
but yea


[6/14/2023 11:03 PM] szybet
i'm half time for sure


[6/14/2023 11:04 PM] tux_linux
well, is there a place to write to them?


[6/14/2023 11:04 PM] szybet
after 2.0 please


[6/14/2023 11:04 PM] szybet
only after


[6/14/2023 11:04 PM] tux_linux
no, we can talk about it now


[6/14/2023 11:04 PM] szybet
+ alpine os basically


[6/14/2023 11:04 PM] szybet
we are not so low level to do that


[6/14/2023 11:05 PM] tux_linux
andi1 is


[6/14/2023 11:05 PM] szybet
we are freaking 18 year old students


[6/14/2023 11:05 PM] tux_linux
*17


[6/14/2023 11:05 PM] tux_linux
i'm sure andi1 would really like porting inkbox to the pinenote


[6/14/2023 11:05 PM] tux_linux
or anything linux-related


[6/14/2023 11:05 PM] szybet
yes, we have 2 wizards on board but they are half of the time invisible


[6/14/2023 11:05 PM] szybet
without a doubt


[6/14/2023 11:05 PM] tux_linux
not on postmarketos thread...


[6/14/2023 11:06 PM] szybet
we talk about inkbox


[6/14/2023 11:06 PM] tux_linux
i mean, andi1 is more often on postmarketos thread than here


[6/14/2023 11:06 PM] szybet
kuratious could help, like why not


[6/14/2023 11:06 PM] kuratius
inb4 postmarketOS on pineNote


[6/14/2023 11:06 PM] szybet
yep, another inkbox alternative


[6/14/2023 11:06 PM] szybet
you do it, and mention me


[6/14/2023 11:07 PM] tux_linux
well, to whom do i write


[6/14/2023 11:08 PM] tux_linux
also we need to make a video of 2.0 because otherwise they will lose interest quick


[6/14/2023 11:08 PM] tux_linux
so better wait until that at least


[6/14/2023 11:08 PM] kuratius
depends on what kind of help you need, I'm working through rustlings atm and am taking a low level assembly+C high performance computing lecture, but I wouldn't say either of those has gotten very far yet


[6/14/2023 11:08 PM] kuratius
I'm more experienced with math stuff


[6/14/2023 11:09 PM] szybet
tux-linux is strugling with his c init


[6/14/2023 11:09 PM] tux_linux
write a reading statistics/prediction program for 2.1 release


[6/14/2023 11:10 PM] szybet
what no


[6/14/2023 11:10 PM] szybet
but actually yes


[6/14/2023 11:10 PM] szybet
yes yes


[6/14/2023 11:10 PM] szybet
i dont want to do that actually XD


[6/14/2023 11:10 PM] tux_linux
graphs on reading, progress, predictions of nb of pages read, time left, etc.


[6/14/2023 11:10 PM] kuratius
if you know what kind of statistics you want, sure shouldnt be difficult


[6/14/2023 11:10 PM] tux_linux
evaluate user behavior and predict how much time he has till the end of the book


[6/14/2023 11:10 PM] tux_linux
or chapter, if we finally get to know where they are


[6/14/2023 11:10 PM] szybet
well first @Kuratius you need to specifically set what data do you want to have


[6/14/2023 11:13 PM] szybet
https://wiki.pine64.org/wiki/PineNote#Unresolved_issues

{Embed}
https://wiki.pine64.org/wiki/PineNote
PineNote


[6/14/2023 11:14 PM] szybet
they are not on this level to... even run linux propably


[6/14/2023 11:14 PM] tux_linux
well they got u-boot to work


[6/14/2023 11:14 PM] tux_linux
half the way done


[6/14/2023 11:15 PM] szybet
https://devzone.pine64.org/signup.php


[6/14/2023 11:15 PM] kuratius
first guess would be:
set some limits to exclude when someone is flipping through a book or leaving the device unattended, then within those limits track average time between page turns, maybe with some starting estimate based on most people's reading speed that gets closer to the personal one over time


[6/14/2023 11:15 PM] szybet
devzone link doesnt work XD


[6/14/2023 11:15 PM] tux_linux
well, yes, something we probably would have done in three years from now but since you are there you can start working on it 😉


[6/14/2023 11:15 PM] kuratius
maybe I can just look up the algortihm kindles use


[6/14/2023 11:16 PM] szybet
https://www.pine64.org/contact/ @tux-linux

{Embed}
PINE64
https://www.pine64.org/contact/
Contact | PINE64
For all enquirers regarding sales, shipping, warranty and returns please contact the relevant Pine Store ltd. email or use the online support system. For all other inquiries…
/mnt/data/projects/git/conversations/media/pine64-56894.png


[6/14/2023 11:16 PM] szybet
as for 3 years the project is not advanced


[6/14/2023 11:16 PM] tux_linux
i suggest you wait until we release 2.0 at github and then you have a clean working tree


[6/14/2023 11:16 PM] tux_linux
should be done in one or two days


[6/14/2023 11:16 PM] szybet
only you worked on it, not a suprice


[6/14/2023 11:16 PM] tux_linux
i was one
you came
we are two


[6/14/2023 11:16 PM] tux_linux
of course it can't move fast


[6/14/2023 11:17 PM] szybet
also you have a crazy school for some reason


[6/14/2023 11:17 PM] tux_linux
thanks, will write to them once i/we get a video out


[6/14/2023 11:17 PM] tux_linux
yes


[6/14/2023 11:18 PM] szybet
pleaase say that we are 2 students and we can't into linux kernel hacking too much


[6/14/2023 11:18 PM] tux_linux
of course


[6/14/2023 11:19 PM] tux_linux
i will warn that code quality has evolved while we actually learnt how to code


[6/14/2023 11:19 PM] tux_linux
some parts of the system are still badly written but overall it's much better than in 1.9


[6/14/2023 11:20 PM] tux_linux
i will also warn that we didn't go to university of any kind and don't have any degree of this level


[6/14/2023 11:21 PM] kuratius
Is it worth mentioning andi in that context?


[6/14/2023 11:22 PM] tux_linux
@andi if partnering with Pine64 for pinenote development of InkBox would be surprising enough to work out, would you be wiling to help us on the hardware/linux/u-boot/epdc side of things? thanks


[6/14/2023 11:22 PM] szybet
@andi


[6/14/2023 11:28 PM] kuratius
probably this was the source https://www.youtube.com/watch?v=8yzfyjIz5g0

{Embed}
PINE64
https://www.youtube.com/watch?v=8yzfyjIz5g0
Quarterly Community Q&A [Live Stream]
Unedited live stream of quarterly PINE64 Q&A
/mnt/data/projects/git/conversations/media/maxresdefault-EB73D.jpg


[6/14/2023 11:28 PM] kuratius
~6 months ago, so not too old


[6/14/2023 11:30 PM] kuratius
pine64 probably doesnt care too much if it's inkbox or postmarketOS


[6/14/2023 11:30 PM] kuratius
but I assume they would prefer a modern kernel


[6/14/2023 11:31 PM] szybet
+ device drivers


[6/14/2023 11:31 PM] szybet
linux ones


[6/14/2023 11:31 PM] szybet
so, idk if you are wasting time on this, nicolas


[6/14/2023 11:32 PM] tux_linux
with andi everything is (probably) possible


[6/14/2023 11:32 PM] tux_linux
+ we can learn on the way


[6/14/2023 11:32 PM] szybet
https://tenor.com/view/magic-pusheen-sparkle-food-gif-17473284

{Embed}
https://tenor.com/view/magic-pusheen-sparkle-food-gif-17473284
/mnt/data/projects/git/conversations/media/magic-pusheen-C0564.png


[6/14/2023 11:33 PM] kuratius
since andi has credentials, the chance of them paying him is also somewhat high imo


[6/14/2023 11:34 PM] tux_linux
who said we would be paid?


[6/14/2023 11:34 PM] kuratius
*shrugs*


[6/14/2023 11:34 PM] szybet
~~i would not say no to that~~


[6/14/2023 11:34 PM] szybet
but i won't pay for a pinenote


[6/14/2023 11:35 PM] tux_linux
if they can send us the hardware i think it's enough


[6/14/2023 11:35 PM] tux_linux
if i had a degree i suppose it would be justified


[6/14/2023 11:35 PM] tux_linux
but i know that there will be things i won't know anything about


[6/14/2023 11:36 PM] tux_linux
if they can give us a dividend of the sales or anything *after* we port it, then maybe, why not


[6/14/2023 11:36 PM] szybet
the reason i'm with inkbox / done feathernotes is because nia was cheap and it is hackable so i can develop my things instead of paying for noox and remarkable

{Reactions}
👍 

[6/14/2023 11:37 PM] kuratius
iirc andis reason for porting pmOS to the nia was basically that he wants to have options in case his clara breaks and that he wants people who might want to develop for ereaders to have a good starting base


[6/14/2023 11:38 PM] kuratius
the former probably would apply to the pine64 too, but it probably depends on how andi feels about it and how much time a port would be


[6/14/2023 11:38 PM] kuratius
probably also depends on the state of documentation


[6/14/2023 11:39 PM] kuratius
nia was easier because it could build on clara work


[6/14/2023 11:39 PM] szybet
its almost 00:00 in europe so andi won't answer


[6/14/2023 11:39 PM] szybet
now


[6/14/2023 11:42 PM] kuratius
apparently they had problems porting the mainline linux kernel for the pineNote


[6/14/2023 11:42 PM] kuratius
they talk about it at ~20:00


[6/14/2023 11:43 PM] kuratius
youtube->open transcript->ctrl+f "note"


[6/14/2023 11:45 PM] kuratius
I think they are saying there is already a working android build


[6/14/2023 11:45 PM] kuratius
but it's not what they want to use


[6/14/2023 11:46 PM] kuratius
if lenovo smart paper was really the same hardware that'd make sense I guess (the part about an android build existing)


[6/14/2023 11:48 PM] kuratius
```Flash: 128GB eMMC ``` this may be why the pine note devs had issues with bricks lol


[6/15/2023 7:00 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230615_045947213-79F08.jpg


[6/15/2023 7:01 AM] tux_linux
it says 'a teenager must get to school as fast as possible so that she won't be late.'
it seems that person has got superpowers
nobody able to run at 216 km/h here?


[6/15/2023 8:00 AM] szybet
She can


[6/15/2023 10:49 AM] szybet (pinned)
```
- cool if you record inkbox booting on all your devices - and then select one for the rest things
- wifi - connect to a network, show all the fancy debug info
- ereader - changing sizes, margins, etc - opening pdfs, epubs, downloading files from gutenberg and opening them, zooming into pdfs - change some pages too
- local library - just iterate over books, show info, buttons, change to folder view and show once more
- home page - show it after ereader, also pin a book
- xorg - show the keyboard - idk if there are new xorg apps
- user apps - did you recorded your apps? conway? there is a video of maps on github btw - also new apps - you can skip sketch because it will be shown in feathernotes video - but qualculate for sure, idk about 2048 - you need to know whats new from these +++ show all of them installed
- IPD - just turn it off, on and show the speeeeed
- lockscreen working great
- did you showed diagnostics yet? if not do it

added:
export highliting, show todo app
```


[6/15/2023 11:16 AM] kuratius
```1/2*(30*50+100*50-50*30+150*60-100*50)+50*60+(-1/2*30/50*(50)**2+60*50)+(-1/2*10/50*50**2+30*50)+(-1/2*20/50*50**2+20*50)```


11.5 km?


[6/15/2023 11:22 AM] kuratius
Or 0 if you take Parcouré literally


[6/15/2023 11:23 AM] kuratius
Well, maybe some of the first few and last few seconds could be doable by a human


[6/15/2023 11:24 AM] kuratius
I think sprinters can do like 10 m/s

{Reactions}
👍 

[6/15/2023 12:57 PM] tux_linux
Yes I think it was the answer
I just found some of the speeds funny


[6/15/2023 1:42 PM] szybet
read this conversation @Deleted User


[6/15/2023 1:43 PM] szybet
basically you need a proxy


[6/15/2023 1:43 PM] szybet
idk if  netsurf / midori will be fine for you to use, you can try to port firefox or a an old webkit browser


[6/15/2023 1:44 PM] Deleted User
I see, I see


[6/15/2023 1:44 PM] szybet
or just vnc


[6/15/2023 1:44 PM] szybet
¯\_(ツ)_/¯


[6/15/2023 1:45 PM] Deleted User
Hmm.. so there isn't a way to get it running stand-alone without help from "outside".


[6/15/2023 1:46 PM] szybet
propably not - you need to try


[6/15/2023 1:46 PM] szybet
firefox could maybe handle it


[6/15/2023 1:46 PM] szybet
maaaaybe


[6/15/2023 1:46 PM] szybet
or use a cli discord client, or a qt discord client if it exists


[6/15/2023 1:49 PM] tux_linux
Browservice could work if you find a browser that can run it


[6/15/2023 1:50 PM] tux_linux
Midori doesn't run on the mini


[6/15/2023 1:50 PM] tux_linux
No Palemoon either


[6/15/2023 1:51 PM] szybet
palemoon whaaat


[6/15/2023 1:51 PM] szybet
does it work?


[6/15/2023 1:51 PM] tux_linux
And netsurf won't run browservice


[6/15/2023 1:51 PM] tux_linux
Slow


[6/15/2023 1:51 PM] tux_linux
4.1.15+ kernels


[6/15/2023 1:51 PM] szybet
slower than netsurf?


[6/15/2023 1:51 PM] szybet
also how much


[6/15/2023 1:51 PM] szybet
also how is the gui


[6/15/2023 1:51 PM] tux_linux
Much slower


[6/15/2023 1:52 PM] tux_linux
A bit like 2000s Firefox


[6/15/2023 1:52 PM] szybet
ok then no sense then


[6/15/2023 1:52 PM] tux_linux
Midori+browservice if it works would be fine


[6/15/2023 1:52 PM] tux_linux
Not on mini
Kernel too old for that


[6/15/2023 1:54 PM] tux_linux
What is left to do


[6/15/2023 1:55 PM] szybet
um scroll the chats


[6/15/2023 1:55 PM] szybet
something for sure


[6/15/2023 1:55 PM] szybet
i need to test some things


[6/15/2023 1:55 PM] tux_linux
Only video?


[6/15/2023 1:55 PM] szybet
holy fuck


[6/15/2023 1:55 PM] tux_linux
Maybe try update system?


[6/15/2023 1:56 PM] tux_linux
?


[6/15/2023 1:56 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230615_135604-24781.jpg


[6/15/2023 1:56 PM] tux_linux
Did you update rootfs


[6/15/2023 1:56 PM] szybet
fucking how i didn't modified it from yestarday


[6/15/2023 1:56 PM] szybet
there is only the working ipd modified


[6/15/2023 1:57 PM] tux_linux
Maybe Nia needs special treatment


[6/15/2023 1:57 PM] tux_linux
Now


[6/15/2023 1:57 PM] tux_linux
Run fbdepth -g


[6/15/2023 1:57 PM] tux_linux
Now


[6/15/2023 1:57 PM] szybet
what changed


[6/15/2023 1:57 PM] tux_linux
Almost nothing?


[6/15/2023 1:57 PM] tux_linux
For nia at least


[6/15/2023 1:57 PM] szybet
i will try to connect to wifi


[6/15/2023 1:57 PM] tux_linux
.


[6/15/2023 1:58 PM] szybet
are you sure init doesnt changed anything?


[6/15/2023 1:58 PM] tux_linux
Pretty sure yes


[6/15/2023 1:58 PM] tux_linux
Didn't touch graphics on rootfs


[6/15/2023 1:59 PM] tux_linux
My fix for Glo HD worked well yesterday


[6/15/2023 1:59 PM] tux_linux
It's just a matter of adding Nia in the if?


[6/15/2023 1:59 PM] szybet
says 16...


[6/15/2023 1:59 PM] tux_linux
Ok


[6/15/2023 1:59 PM] tux_linux
Now try fbdepth -d 8


[6/15/2023 2:00 PM] tux_linux
And touch the screen


[6/15/2023 2:00 PM] Deleted User
To wrap it up, I guess an *e-reader* is not suited for this kind of stuff. O well.


[6/15/2023 2:00 PM] tux_linux
Vnc is


[6/15/2023 2:00 PM] szybet
```
kobo:~# fbdepth -d 8
[FBInk] Couldn't find a Kobo version tag (onboard unmounted or not running on a Kobo?)!
[FBInk] Detected a Kobo Nia (382 => Luna @ Mark 7)
[FBInk] Enabled Kobo Mark 7 quirks
[FBInk] Clock tick frequency appears to be 100 Hz
[FBInk] Screen density set to 212 dpi
[FBInk] Variable fb info: 758x1024, 16bpp @ rotation: 3 (Counter Clockwise, 270°)
[FBInk] Fixed fb info: ID is "mxc_epdc_fb", length of fb mem: 3145728 bytes & line length: 1536 bytes
[FBInk] Canonical rotation: 0 (Upright, 0°)
[FBInk] Fontsize set to 16x16 (IBM (Default) base glyph size: 8x8)
[FBInk] Line length: 47 cols, Page size: 64 rows
[FBDepth] Screen is 758x1024 (768x2048 addressable, fb says 768x2048)
[FBDepth] Buffer is mapped for 3145728 bytes with a scanline stride of 1536 bytes
[FBDepth] Switching fb to 8bpp . . .
Updating bitdepth from 16bpp to 8bpp
Sanitizing grayscale flag for 8bpp
Keeping current rotation: 3 (Counter Clockwise, 270°)
Bitdepth is now 8bpp (grayscale: 1) @ rotate: 3 (Counter Clockwise, 270°)
[FBInk] Detected a change in framebuffer bitdepth (16 -> 8)
[FBInk] Reinitializing...
[FBInk] Variable fb info: 758x1024, 8bpp @ rotation: 3 (Counter Clockwise, 270°)
[FBInk] Fixed fb info: ID is "mxc_epdc_fb", length of fb mem: 3145728 bytes & line length: 768 bytes
[FBInk] Canonical rotation: 0 (Upright, 0°)
[FBInk] Fontsize set to 16x16 (IBM (Default) base glyph size: 8x8)
[FBInk] Line length: 47 cols, Page size: 64 rows
[FBDepth] Screen is 758x1024 (768x4096 addressable, fb says 768x2048)
[FBDepth] Buffer is mapped for 3145728 bytes with a scanline stride of 768 bytes
kobo:~# 
```


[6/15/2023 2:00 PM] tux_linux
You can also find a cli Discord client
But you may get banned


[6/15/2023 2:00 PM] szybet
repaired itself


[6/15/2023 2:00 PM] szybet
so i quess


[6/15/2023 2:00 PM] tux_linux
Ok so needs same fix


[6/15/2023 2:01 PM] szybet
it needs to be added to the if


[6/15/2023 2:01 PM] tux_linux
Add it


[6/15/2023 2:01 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[6/15/2023 2:01 PM] tux_linux
Also I just went with checking inkbox Gui service status, much simpler


[6/15/2023 2:01 PM] szybet
in a minute i will

{Reactions}
👍 

[6/15/2023 2:01 PM] szybet
?


[6/15/2023 2:02 PM] tux_linux
Look at the if you will understand


[6/15/2023 2:02 PM] szybet
scroll the chat to know + test your devices please


[6/15/2023 2:02 PM] szybet
what where


[6/15/2023 2:03 PM] tux_linux
In ipd


[6/15/2023 2:03 PM] tux_linux
Last commit


[6/15/2023 3:44 PM] szybet
https://inkbox.ddns.net/wiki/index.php?title=Special:AllPages

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Special:AllPages
Index.php


[6/15/2023 3:45 PM] szybet
clean the laundry...


[6/15/2023 6:19 PM] szybet
```cpp
bool normalContains(string stringToCheck, string stringToLookFor)
{
  if(stringToCheck.find(stringToLookFor) != std::string::npos) {
    return true;
  } else {
    // No idea but it is needed, there is nothing on the internet about it...
    if(stringToCheck.compare(stringToLookFor) == 0) {
      return true;
    }
    return false;
  }
}
```
```cpp
vector<int> getPidsByNameAll(string taskName) {
  log("Looking for processes matching '" + taskName + "' string", emitter + ":getPidsByNameAll");

  struct dirent *entry = nullptr;
  DIR *dp = nullptr;

  string proc = "/proc/";
  dp = opendir(proc.c_str());

  vector<int> pidsRet;
  while((entry = readdir(dp))) {
    // cmdline is more accurate, status is sometimes buggy
    ifstream file(proc + entry->d_name + "/cmdline");
    if(file.good() == false) {
      continue;
    }
    string firstLine;
    getline(file, firstLine);
    normalReplace(firstLine, "\n", "");
    // https://stackoverflow.com/questions/2340281/check-if-a-string-contains-a-string-in-c
    if(normalContains(firstLine, taskName) == true) {
      log("Found PID of " + taskName + " : " + entry->d_name + " In line: " + firstLine, emitter + ":getPidsByNameAll");
      int appPid = stoi(entry->d_name);
      pidsRet.push_back(appPid);
    } else {
      log("firstLine:" + firstLine);
      log("taskName:" + taskName);
    }
  }
  closedir(dp);
  return pidsRet;
}
```
log in image

{Attachments}
/mnt/data/projects/git/conversations/media/image-1C9BF.png


[6/15/2023 6:19 PM] szybet
what the fuck...


[6/15/2023 6:19 PM] szybet
its equal...


[6/15/2023 6:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-009CE.txt


[6/15/2023 6:55 PM] szybet
index 20


[6/15/2023 6:55 PM] szybet
empty char?


[6/15/2023 7:01 PM] szybet
i'm dumb but cpp is fucking stupid


[6/15/2023 7:45 PM] tux_linux
Good


[6/15/2023 7:45 PM] szybet
it doesnt work


[6/15/2023 7:45 PM] szybet
with any solution on the internet


[6/15/2023 7:45 PM] tux_linux
Oh


[6/15/2023 7:46 PM] szybet
it doesnt delete the space, it just replaces it with nothing and the char has a diffrent length


[6/15/2023 7:46 PM] szybet
evry solution does that


[6/15/2023 7:46 PM] szybet
i will just go with a for loop...

{Reactions}
👍 

[6/15/2023 7:55 PM] szybet
for loop doesnt work


[6/15/2023 7:55 PM] szybet
https://tenor.com/view/shrek-shrek-mad-mad-mad-shrek-shrek-frustrated-gif-26568639

{Embed}
https://tenor.com/view/shrek-shrek-mad-mad-mad-shrek-shrek-frustrated-gif-26568639
/mnt/data/projects/git/conversations/media/shrek-shrek-mad-79D7A.png


[6/15/2023 8:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0E053.png


[6/15/2023 8:01 PM] szybet
how the fuck


[6/15/2023 8:07 PM] tux_linux
Curse


[6/15/2023 8:14 PM] szybet
```
// While reading file, xorg process in proc, do not ask.
string repairString(string word) {
    string newWord;
    for (int i = 0; i < word.length(); i++) {
        if (word[i] != '') {
          string fcuk;
          fcuk = fcuk + word[i];
          log("this char is not a space: '" + fcuk + "'");
          newWord += word[i];
        }
    }

  return newWord;
}
```


[6/15/2023 8:14 PM] szybet
how do i check if a char is... empty?


[6/15/2023 8:14 PM] szybet
```
/home/build/inkbox/inkbox-power-daemon/src/functions.cpp:450:24: error: empty character constant
  450 |         if (word[i] != '') {
```


[6/15/2023 8:17 PM] tux_linux
nullptr?


[6/15/2023 8:17 PM] tux_linux
Or NULL?


[6/15/2023 8:18 PM] szybet
they fucking allow char to be `''` and dont allow me to check it eassly


[6/15/2023 8:18 PM] szybet
i need a break


[6/15/2023 8:26 PM] tux_linux
I think you are looking for \0


[6/15/2023 8:27 PM] tux_linux
Aren't you?


[6/15/2023 8:34 PM] szybet
Segmentation fault


[6/15/2023 8:34 PM] szybet
Segmentation fault


[6/15/2023 8:34 PM] szybet
Segmentation fault


[6/15/2023 8:34 PM] szybet
Segmentation faultSegmentation faultSegmentation faultSegmentation faultSegmentation faultSegmentation faultSegmentation faultSegmentation fault


[6/15/2023 8:35 PM] tux_linux
How surprising


[6/15/2023 8:43 PM] szybet
@tux-linux


[6/15/2023 8:43 PM] tux_linux
It's fbdepth


[6/15/2023 8:43 PM] tux_linux
You need to add Nia to xorg.sh script


[6/15/2023 8:43 PM] szybet
what do i do


[6/15/2023 8:43 PM] szybet
okay


[6/15/2023 8:43 PM] tux_linux
There are already if clauses


[6/15/2023 8:44 PM] tux_linux
Make it behave like it was n437


[6/15/2023 9:33 PM] szybet
fuck


[6/15/2023 9:33 PM] szybet
after i put to sleep


[6/15/2023 9:33 PM] szybet
i3


[6/15/2023 9:34 PM] szybet
both vnc xorg processes


[6/15/2023 9:34 PM] szybet
X process


[6/15/2023 9:34 PM] szybet
```
    log("Trying suspend", emitter);
    std::this_thread::sleep_for(std::chrono::milliseconds(100));
    int fd2 = open("/sys/power/state", O_RDWR);
    int status = write(fd2, "mem", 3);
    close(fd2);
```


[6/15/2023 9:34 PM] szybet
the thread holts on this line, write one


[6/15/2023 9:34 PM] szybet
it should either suspend the device or continue executing


[6/15/2023 9:34 PM] szybet
it freezes


[6/15/2023 9:35 PM] szybet
any ideas


[6/15/2023 9:35 PM] szybet
?


[6/15/2023 9:35 PM] szybet
@tux-linux


[6/15/2023 9:35 PM] tux_linux
freeze only X process, it should be fine?


[6/15/2023 9:35 PM] tux_linux
no need to freeze anything else
maybe will it solve the problem


[6/15/2023 9:35 PM] szybet
i need to freeze kterm for sure


[6/15/2023 9:35 PM] tux_linux
don't freeze X


[6/15/2023 9:36 PM] szybet
+ if i dont freeze anything else, idk whats responsible but the screen flashes grey on write to state


[6/15/2023 9:38 PM] tux_linux
kernel mess


[6/15/2023 9:39 PM] szybet
what is fbinbk-xdamage btyw


[6/15/2023 9:39 PM] tux_linux
prints x11 graphics to screen


[6/15/2023 9:40 PM] szybet
can i just freeze it? :)


[6/15/2023 9:40 PM] tux_linux
yes, but you need to un-freeze it on wake up


[6/15/2023 9:41 PM] szybet
i unfreeze everything


[6/15/2023 9:41 PM] tux_linux
ok


[6/15/2023 9:46 PM] tux_linux
anything for me to do? start filming?


[6/15/2023 9:46 PM] szybet
you can create the google sheet


[6/15/2023 9:46 PM] szybet
i dont have time currently


[6/15/2023 9:47 PM] szybet
i'm fighting with ipd


[6/15/2023 9:47 PM] szybet
just look through #dev and #deleted-channel and write things down that needed to be tested, added and checkmark those that were 4you


[6/15/2023 9:49 PM] andi15701
did some outdoor office today, so I was a bit longer out


[6/15/2023 9:49 PM] andi15701
outdoor office = sitting in a hut with a solar panel next to it

{Reactions}
👍 

[6/15/2023 9:49 PM] szybet
woah very cool


[6/15/2023 9:50 PM] andi15701
sometimes I do this if no video conferences in sight


[6/15/2023 9:50 PM] szybet
you can work until there are no clouds ;D


[6/15/2023 9:51 PM] andi15701
for private projects I would probably prefer some Ebookreader setup like you


[6/15/2023 9:52 PM] andi15701
about the pine: I will look into it

{Reactions}
👍 

[6/15/2023 9:52 PM] andi15701
and think about options


[6/15/2023 9:53 PM] szybet
the screen is too small to be comfy to use - but it's good enough


[6/15/2023 9:53 PM] tux_linux
libra would probably be better


[6/15/2023 9:53 PM] tux_linux
or sage


[6/15/2023 9:53 PM] tux_linux
elipsa


[6/15/2023 9:53 PM] tux_linux
idk


[6/15/2023 9:53 PM] tux_linux
but we need to port them first


[6/15/2023 9:53 PM] tux_linux
and have the money


[6/15/2023 9:53 PM] andi15701
libra? your libra is dead?


[6/15/2023 9:53 PM] tux_linux
no


[6/15/2023 9:54 PM] tux_linux
I mean, if you want a setup like szybet


[6/15/2023 9:54 PM] tux_linux
a screen size like the libra could be better


[6/15/2023 9:55 PM] andi15701
Well, I did the devicetree for the vision5 on the clara with a bt dongle + bt keyboard

{Reactions}
👍 

[6/15/2023 9:56 PM] andi15701
and probably for exactly those tasks, the pinenote would be interesting


[6/15/2023 9:57 PM] andi15701
about the libra: I have an idea about that funny pattern we have seen with drm driver


[6/15/2023 10:45 PM] tux_linux
.


[6/15/2023 10:45 PM] szybet
i remember that

{Reactions}
👍 

[6/15/2023 10:50 PM] tux_linux
Pinned a message.


[6/15/2023 11:14 PM] szybet
also, make 2.0 a cry for help


[6/15/2023 11:14 PM] szybet
if you know what i mean


[6/15/2023 11:14 PM] tux_linux
yes


[6/15/2023 11:18 PM] szybet
xorg fix works


[6/15/2023 11:18 PM] szybet
;o


[6/15/2023 11:19 PM] tux_linux
hmm


[6/15/2023 11:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/xorg-70654.sh


[6/15/2023 11:19 PM] szybet
can you commit it?


[6/15/2023 11:19 PM] tux_linux
i just add n306 to the fbdepth area?


[6/15/2023 11:19 PM] szybet
i dont have energy to do that


[6/15/2023 11:19 PM] szybet
yea, copy this


[6/15/2023 11:19 PM] tux_linux
ok


[6/15/2023 11:23 PM] tux_linux
why


[6/15/2023 11:23 PM] tux_linux
wont


[6/15/2023 11:23 PM] tux_linux
you


[6/15/2023 11:23 PM] tux_linux
work


[6/15/2023 11:24 PM] tux_linux
i'm about to cry now


[6/15/2023 11:24 PM] szybet
take a break


[6/15/2023 11:24 PM] szybet
ask the wizards


[6/15/2023 11:24 PM] tux_linux
i have enough to cry about in my life


[6/15/2023 11:24 PM] szybet
um


[6/15/2023 11:24 PM] szybet
take a longer break


[6/15/2023 11:24 PM] tux_linux
inkbox is supposed to be something that makes me forget things i dont like


[6/15/2023 11:25 PM] szybet
just... Relax


[6/15/2023 11:25 PM] szybet
calm down


[6/15/2023 11:25 PM] tux_linux
it's usbms


[6/15/2023 11:25 PM] tux_linux
u s b m s


[6/15/2023 11:25 PM] szybet
don't force yourself


[6/15/2023 11:25 PM] tux_linux
most basic thing we need to get working


[6/15/2023 11:25 PM] szybet
aaand your mental health


[6/15/2023 11:25 PM] szybet
niluje could know something, koreaders supports it


[6/15/2023 11:26 PM] tux_linux
maybe everything can be solved with a reboot


[6/15/2023 11:26 PM] tux_linux
magic


[6/15/2023 11:27 PM] tux_linux
i think we should consider MTP some day


[6/15/2023 11:29 PM] szybet
maybe


[6/15/2023 11:29 PM] tux_linux
it is even better security-wise


[6/15/2023 11:29 PM] szybet
how


[6/15/2023 11:30 PM] tux_linux
from what I understood, it only sends a list of files to the receiver (PC) and PC sends a file which is then handled by the server/daemon on the device


[6/15/2023 11:30 PM] tux_linux
so there is no filesystem


[6/15/2023 11:30 PM] tux_linux
only transfers


[6/15/2023 11:30 PM] tux_linux
a bit like ftp i guess


[6/15/2023 11:30 PM] szybet
cool


[6/15/2023 11:31 PM] szybet
how hard is it to use? maybe ditch usbms all together


[6/15/2023 11:31 PM] tux_linux
android phones use it (i think)
awful support on linux
pita for devs i think


[6/15/2023 11:31 PM] tux_linux
so, really a better thing for end users and not ourselves


[6/15/2023 11:31 PM] szybet
sad


[6/15/2023 11:32 PM] tux_linux
probably needs newer kernels too


[6/16/2023 7:14 PM] szybet
If you want - make inkbox cinematic brightness start from the value based in sys device, not something else - otherwise sometimes it will flash


[6/16/2023 7:17 PM] tux_linux
Not all Kobo's have a sys with current brightness level


[6/16/2023 7:18 PM] szybet
Where you write


[6/16/2023 7:19 PM] szybet
Oh we use ioctl?


[6/16/2023 7:19 PM] tux_linux
Yes


[6/16/2023 7:19 PM] szybet
Hm... Try to replicate flickering while reading


[6/16/2023 7:19 PM] szybet
Or going to sleep


[6/16/2023 7:19 PM] szybet
Anything


[6/16/2023 7:19 PM] tux_linux
Wdym


[6/16/2023 7:19 PM] tux_linux
Flickering


[6/16/2023 7:20 PM] szybet
Sudden not cinematic change in brightness


[6/16/2023 7:20 PM] tux_linux
Hmm


[6/16/2023 7:20 PM] tux_linux
It happens sometimes


[6/16/2023 7:20 PM] tux_linux
Todo list for 2.1


[6/16/2023 7:20 PM] tux_linux
Nobody will die from it


[6/16/2023 7:20 PM] tux_linux
But


[6/16/2023 7:20 PM] tux_linux
Where does ipd read brightness config


[6/16/2023 7:21 PM] tux_linux
/data/config ?


[6/16/2023 8:05 PM] szybet
maybe not


[6/16/2023 8:05 PM] szybet
maybe yes


[6/16/2023 8:05 PM] szybet
propably not


[6/16/2023 8:06 PM] szybet
sure


[6/16/2023 8:18 PM] tux_linux
for books, if you change brightness while in reader, it will save specific brightness level in specific config folder for book
that means ipd should probably check it in `/kobo/mnt/onboard/inkbox/.config` instead of `/data/onboard/.config`


[6/16/2023 8:20 PM] tux_linux
because the book's config folder is bind-mounted at `/kobo/mnt/onboard/inkbox/.config`


[6/16/2023 8:23 PM] szybet
this explains it


[6/16/2023 8:23 PM] szybet
i will try it

{Reactions}
👍 

[6/16/2023 8:24 PM] ninuje
PSA: Newer devices do smooth frontlight setting from a single value on the kernel/hardware side


[6/16/2023 8:24 PM] ninuje
Which actually interferes with userland smooth ramps


[6/16/2023 8:24 PM] ninuje
fun times.


[6/16/2023 8:25 PM] ninuje
(And older oldr devices cannot do a smooth >=1 -> 0 step anyway, it'll always stick on the last value before turning off)


[6/16/2023 8:58 PM] tux_linux
Well not on InkBox devices for now thankfully, thanks for the heads up


[6/16/2023 9:10 PM] tux_linux
but I think on the Glo you can't access the current brightness value, right?
because... kernel


[6/16/2023 9:11 PM] tux_linux
yea

{Attachments}
/mnt/data/projects/git/conversations/media/image-4363D.png


[6/16/2023 9:25 PM] tux_linux
so apart from ipd


[6/16/2023 9:26 PM] tux_linux
nothing else?


[6/16/2023 9:26 PM] tux_linux
we can change radio buttons in 2.1


[6/16/2023 9:26 PM] tux_linux
they're not *that* bad


[6/16/2023 9:56 PM] szybet
So?


[6/16/2023 9:57 PM] szybet
Var run is bad?


[6/16/2023 9:57 PM] szybet
Nothing i think, i need to test usb


[6/16/2023 9:57 PM] szybet
How do i do that


[6/16/2023 9:57 PM] szybet
Update rootfs and gui bundle? Nothing else?


[6/16/2023 9:58 PM] tux_linux
it's fine for other devices


[6/16/2023 9:58 PM] tux_linux
probably


[6/16/2023 10:00 PM] szybet
So?


[6/16/2023 10:01 PM] tux_linux
change the config dir for ipd to `/kobo/mnt/onboard/.adds/inkbox/.config` _only_ if you need to restore brightness _and_ inkbox gui is running


[6/16/2023 10:01 PM] tux_linux
you know how to check if inkbox gui is running


[6/16/2023 10:01 PM] szybet
Why to check it?


[6/16/2023 10:01 PM] szybet
Oh i get it


[6/16/2023 10:51 PM] tux_linux
Bug


[6/16/2023 10:51 PM] tux_linux
Ipd doesn't launch lockscreen if you just enabled it from settings


[6/16/2023 10:51 PM] tux_linux
It works when you return to settings a second time and click "ok"


[6/16/2023 10:52 PM] tux_linux
Normal?


[6/16/2023 10:52 PM] szybet
what? it should be enabled already>


[6/16/2023 10:52 PM] szybet
in the settings


[6/16/2023 10:59 PM] tux_linux
Try it?


[6/16/2023 11:00 PM] tux_linux
Maybe just bad luck on my side?


[6/16/2023 11:02 PM] szybet
i will look into it

{Reactions}
👍 

[6/16/2023 11:05 PM] tux_linux
I will start filming when I get home


[6/16/2023 11:05 PM] szybet
okay, but dont release it, we have a few things to do


[6/16/2023 11:06 PM] tux_linux
Yes


[6/16/2023 11:06 PM] tux_linux
I will wait


[6/16/2023 11:06 PM] tux_linux
What things exactly


[6/16/2023 11:06 PM] szybet
ipd


[6/16/2023 11:06 PM] szybet
lockscreen


[6/16/2023 11:06 PM] szybet
usb ms test


[6/16/2023 11:06 PM] tux_linux
Ok


[6/16/2023 11:09 PM] szybet
no, you changed something


[6/16/2023 11:10 PM] szybet
got it, fix soon


[6/16/2023 11:14 PM] tux_linux
Good
Did you find what?


[6/16/2023 11:16 PM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/39dc99a2bc71919e2056ba870939d46a298fa16f/src/settings/settings.cpp#L792-L800

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/39dc99a2bc71919e2056ba870939d46a298fa16f/src/settings/settings.cpp
inkbox/src/settings/settings.cpp at 39dc99a2bc71919e2056ba870939d46...
An open-source, Qt-based eBook reader for Kobos (and other devices). - inkbox/src/settings/settings.cpp at 39dc99a2bc71919e2056ba870939d46a298fa16f · Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-AA2A2


[6/16/2023 11:17 PM] szybet
here: make it hold inkbox until lockscreen didn't finished, and then continue from settings to make the ok button be clicked


[6/16/2023 11:17 PM] szybet
this happens because of this, it isn't launched after lockscreen finished
https://github.com/Kobo-InkBox/inkbox/blob/39dc99a2bc71919e2056ba870939d46a298fa16f/src/settings/settings.cpp#L444

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/39dc99a2bc71919e2056ba870939d46a298fa16f/src/settings/settings.cpp
inkbox/src/settings/settings.cpp at 39dc99a2bc71919e2056ba870939d46...
An open-source, Qt-based eBook reader for Kobos (and other devices). - inkbox/src/settings/settings.cpp at 39dc99a2bc71919e2056ba870939d46a298fa16f · Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-AA2A2


[6/16/2023 11:18 PM] szybet
can you do it or do i? i can do ipd instead in that time


[6/16/2023 11:18 PM] tux_linux
Do ipd

{Reactions}
👍 

[6/16/2023 11:26 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-FD1EF.png


[6/16/2023 11:26 PM] szybet
nice


[6/16/2023 11:26 PM] szybet
XD


[6/16/2023 11:27 PM] tux_linux
Well, yes, change config path


[6/16/2023 11:27 PM] szybet
i'm not n613


[6/16/2023 11:27 PM] tux_linux
Yes


[6/16/2023 11:27 PM] tux_linux
So idk


[6/17/2023 12:17 AM] szybet
well idk about brightness


[6/17/2023 12:17 AM] szybet
maybe im too focused on the book and didn't notice like... the sun


[6/17/2023 12:17 AM] tux_linux
it's bad?


[6/17/2023 12:18 AM] szybet
but i improved lockscreen handling,code quality, potential bugs


[6/17/2023 12:18 AM] tux_linux
you modified settings?


[6/17/2023 12:18 AM] tux_linux
i just did it


[6/17/2023 12:18 AM] szybet
what? i'm saying im the error, not the ereader


[6/17/2023 12:18 AM] szybet
only ipd, launching lockscreen


[6/17/2023 12:18 AM] tux_linux
oh ok


[6/17/2023 12:18 AM] tux_linux
ok, so i can push changes in gui


[6/17/2023 12:19 AM] szybet
yep

{Reactions}
👍 

[6/17/2023 12:19 AM] tux_linux
did you test usbms?


[6/17/2023 12:19 AM] szybet
you can modify interal user app lists for ipd


[6/17/2023 12:19 AM] szybet
you forgot i think


[6/17/2023 12:19 AM] tux_linux
to what


[6/17/2023 12:19 AM] szybet
i will - i worked on ipd

{Reactions}
👍 

[6/17/2023 12:19 AM] szybet
well add and remove things


[6/17/2023 12:19 AM] tux_linux
what is to remove


[6/17/2023 12:20 AM] szybet
old sketch?


[6/17/2023 12:20 AM] tux_linux
oh ok


[6/17/2023 12:20 AM] szybet
and to add the new calculator


[6/17/2023 12:20 AM] szybet
and remove the old one


[6/17/2023 12:20 AM] szybet
etc


[6/17/2023 12:20 AM] tux_linux
yes


[6/17/2023 12:20 AM] szybet
look into it


[6/17/2023 12:20 AM] szybet
i cant remember


[6/17/2023 12:20 AM] tux_linux
ok


[6/17/2023 12:26 AM] tux_linux
done


[6/17/2023 12:26 AM] tux_linux
i think


[6/17/2023 12:27 AM] szybet
isint there a default one in config places?


[6/17/2023 12:27 AM] szybet
or does only ipd create it


[6/17/2023 12:28 AM] tux_linux
i think it creates it


[6/17/2023 12:28 AM] szybet
we need a way to force update it


[6/17/2023 12:28 AM] szybet
todo 2.1


[6/17/2023 12:28 AM] szybet
:)


[6/17/2023 12:28 AM] tux_linux
?


[6/17/2023 12:28 AM] tux_linux
oh ok


[6/17/2023 12:28 AM] szybet
if it is created, but the lists changes with upda... yea


[6/17/2023 12:28 AM] tux_linux
not todo 2.1


[6/17/2023 12:28 AM] tux_linux
todo now


[6/17/2023 12:28 AM] szybet
why


[6/17/2023 12:29 AM] tux_linux
maybe not


[6/17/2023 12:29 AM] tux_linux
actually no


[6/17/2023 12:29 AM] tux_linux
nvm


[6/17/2023 12:29 AM] szybet
its just adding one line to the updater about removing this file


[6/17/2023 12:29 AM] szybet
but yea


[6/17/2023 12:29 AM] tux_linux
then we do it now


[6/17/2023 12:29 AM] tux_linux
updater only runs once


[6/17/2023 12:30 AM] tux_linux
remember when i told you about how the 1.5 updater script didn't copy the rootfs signature and i had to make a double update package with a separate kernel only to mount a script that did it?


[6/17/2023 12:31 AM] tux_linux
if you do it in ipd, then maybe it's fine for 2.1


[6/17/2023 12:33 AM] szybet
we can just compare the content


[6/17/2023 12:33 AM] szybet
dont panick


[6/17/2023 12:33 AM] tux_linux
ok


[6/17/2023 12:33 AM] tux_linux
then everything fine?


[6/17/2023 12:34 AM] szybet
yep


[6/17/2023 12:34 AM] szybet
we just need to remember


[6/17/2023 12:34 AM] tux_linux
yay, i guess?


[6/17/2023 12:34 AM] tux_linux
what


[6/17/2023 12:34 AM] tux_linux
oh ipd


[6/17/2023 12:34 AM] tux_linux
will add to todo


[6/17/2023 12:35 AM] szybet
i will make the todo today


[6/17/2023 12:35 AM] szybet
in the next 2h


[6/17/2023 12:35 AM] szybet
docs


[6/17/2023 12:35 AM] szybet
like i said


[6/17/2023 12:35 AM] tux_linux
i added it


[6/17/2023 12:35 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/discussions/38

{Embed}
https://github.com/Kobo-InkBox/inkbox/discussions/38
Future To-Do's and possible feature requests · Kobo-InkBox inkbox ·...
Turning off the interface using ioctl on the nia and other devices: in toggle.sh and ipd ( propably not needed? ) faster database generating [-] Easter eggs, replacing icons in specified dates wifi...
/mnt/data/projects/git/conversations/media/38-3B24D


[6/17/2023 12:37 AM] tux_linux
ok
I will start filming


[6/17/2023 12:37 AM] szybet
👍


[6/17/2023 12:38 AM] tux_linux
do you want a release image?


[6/17/2023 12:41 AM] szybet
well yes, but if there are problems you will need to create another one


[6/17/2023 12:41 AM] tux_linux
i think we tested enough?


[6/17/2023 12:41 AM] szybet
but this would speed things up, as im finishing ipd and wouldn't need to compile myself


[6/17/2023 12:41 AM] szybet
usbms


[6/17/2023 12:41 AM] andi15701
what devices you use have a ektf2212 touchscreen?


[6/17/2023 12:41 AM] tux_linux
did you push new commits?


[6/17/2023 12:42 AM] szybet
not yet, testing final touches

{Reactions}
👍 

[6/17/2023 12:42 AM] tux_linux
i don't know?


[6/17/2023 12:42 AM] szybet
not the nia


[6/17/2023 12:42 AM] andi15701
the Kobo Aura 2, also the newer Nia?


[6/17/2023 12:42 AM] tux_linux
aura se?


[6/17/2023 12:42 AM] szybet
maybe? i could check tommorow if the newer nia uses it if you really need that info


[6/17/2023 12:42 AM] andi15701
ektf2232


[6/17/2023 12:42 AM] andi15701
sorry


[6/17/2023 12:43 AM] tux_linux
is it major changes?


[6/17/2023 12:43 AM] szybet
only lockscreen, but yes, but lockscreen is not device dependent and i test it so it should be fine


[6/17/2023 12:44 AM] tux_linux
ok


[6/17/2023 12:45 AM] szybet
reddit died


[6/17/2023 12:45 AM] tux_linux
false?


[6/17/2023 12:45 AM] szybet
so maybe hackaday?


[6/17/2023 12:46 AM] tux_linux
ok


[6/17/2023 12:46 AM] tux_linux
oh ok


[6/17/2023 12:46 AM] tux_linux
i thought you said it was down


[6/17/2023 12:46 AM] szybet
r linux did

and reddit too


[6/17/2023 12:46 AM] tux_linux
yea


[6/17/2023 12:46 AM] szybet
mobile read - new thread


[6/17/2023 12:46 AM] tux_linux
well, yes, i will submit to hackaday


[6/17/2023 12:46 AM] tux_linux
no, mods will not like it


[6/17/2023 12:46 AM] tux_linux
i think


[6/17/2023 12:46 AM] szybet
and the linux experiment guy please


[6/17/2023 12:47 AM] szybet
because lol?


[6/17/2023 12:47 AM] szybet
i have 4 other apps to post on mobileread


[6/17/2023 12:47 AM] szybet
3 maybe


[6/17/2023 12:47 AM] szybet
idk


[6/17/2023 12:47 AM] szybet
still, sepeate threads ;p


[6/17/2023 12:47 AM] tux_linux
well, inkbox os has stayed inkbox os


[6/17/2023 12:47 AM] tux_linux
not the same thing


[6/17/2023 12:47 AM] szybet
2.0 is usable if you like scroll bars ;p


[6/17/2023 12:47 AM] szybet
the rest - not


[6/17/2023 12:47 AM] tux_linux
?


[6/17/2023 12:48 AM] szybet
i want a clean thread okay


[6/17/2023 12:48 AM] tux_linux
oh ok


[6/17/2023 12:48 AM] szybet
new chapter in inkbox


[6/17/2023 12:48 AM] szybet
we finally have usbms working XD


[6/17/2023 12:48 AM] tux_linux
it stopped working between 1.9 and 2.0


[6/17/2023 12:48 AM] tux_linux
so no difference


[6/17/2023 12:48 AM] szybet
😂


[6/17/2023 12:48 AM] tux_linux
koreader always had the same thread?


[6/17/2023 12:49 AM] szybet
god i hate this forum


[6/17/2023 12:49 AM] tux_linux
it's a forum


[6/17/2023 12:49 AM] szybet
.


[6/17/2023 12:49 AM] tux_linux
get used to it


[6/17/2023 12:49 AM] tux_linux
yes


[6/17/2023 12:49 AM] szybet
ITS NOT A REASON TO MAKE THREADS LONG FOR 99999 PAGESSSSSSSS


[6/17/2023 12:49 AM] szybet
and there isint even a date of posted responses


[6/17/2023 12:49 AM] szybet
dmnlwaksndfjasnfjk


[6/17/2023 12:50 AM] tux_linux
?


[6/17/2023 12:50 AM] tux_linux
there is?


[6/17/2023 12:50 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-2BA3F.png


[6/17/2023 12:50 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5CD43.png


[6/17/2023 12:50 AM] szybet
haha XD


[6/17/2023 12:50 AM] tux_linux
you are in dark mode


[6/17/2023 12:50 AM] tux_linux
it's there


[6/17/2023 12:50 AM] szybet
what do you expect


[6/17/2023 12:51 AM] tux_linux
still holds true


[6/17/2023 12:51 AM] tux_linux
sad


[6/17/2023 12:52 AM] szybet
well whatever stay to the old thread

{Reactions}
👍 

[6/17/2023 12:52 AM] tux_linux
will you push soon?


[6/17/2023 12:52 AM] szybet
but inform me if someone there writes something interesting, because i wont follow it


[6/17/2023 12:53 AM] tux_linux
good


[6/17/2023 12:53 AM] szybet
now


[6/17/2023 12:53 AM] szybet
you will create the nia image?


[6/17/2023 12:53 AM] szybet
also did you tested adding user apps via usb?


[6/17/2023 12:53 AM] tux_linux
i will test on glo hd first


[6/17/2023 12:53 AM] tux_linux
compiling now


[6/17/2023 12:53 AM] tux_linux
i will


[6/17/2023 12:53 AM] szybet
good


[6/17/2023 12:53 AM] tux_linux
but the thing not unmounting itself was probably causing all of the issues


[6/17/2023 12:54 AM] szybet
in 2.0 description write that its not perfect but usable something like that


[6/17/2023 12:54 AM] szybet
on those posts too


[6/17/2023 12:55 AM] szybet
maybe /r/ereader with cross post to /r/kobo?


[6/17/2023 12:55 AM] szybet
i'm quite active at /r/kobo

{Reactions}
👍 

[6/17/2023 12:55 AM] tux_linux
what am i supposed to read

{Attachments}
/mnt/data/projects/git/conversations/media/image-B5B77.png


[6/17/2023 12:55 AM] szybet
ok well its 1 in the night here have some heart


[6/17/2023 12:55 AM] szybet
i forgot the g in exiting


[6/17/2023 12:56 AM] tux_linux
oh ok


[6/17/2023 12:56 AM] tux_linux
np


[6/17/2023 12:56 AM] tux_linux
i didn't understand


[6/17/2023 12:56 AM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[6/17/2023 12:57 AM] tux_linux
i will ask @dill for that


[6/17/2023 12:57 AM] tux_linux
he will at last be able to do something


[6/17/2023 12:57 AM] szybet
cool


[6/17/2023 12:57 AM] szybet
dill, the social media manager


[6/17/2023 12:57 AM] tux_linux
probably a good thing for him


[6/17/2023 12:57 AM] szybet
HE DIDN'T EVEN TESTED SANKI YET 😂


[6/17/2023 12:58 AM] tux_linux
does usbnet restart fine after sleep?


[6/17/2023 12:58 AM] szybet
i dont use it


[6/17/2023 12:58 AM] tux_linux
something to test then


[6/17/2023 12:58 AM] szybet
no reason it wouldnt


[6/17/2023 12:58 AM] tux_linux
you changed the code a bit?


[6/17/2023 12:59 AM] szybet
nope


[6/17/2023 1:00 AM] szybet
add tags to github


[6/17/2023 1:00 AM] szybet
repo


[6/17/2023 1:00 AM] szybet
inkbox


[6/17/2023 1:00 AM] tux_linux
now?


[6/17/2023 1:00 AM] tux_linux
release?


[6/17/2023 1:00 AM] szybet
no, not release


[6/17/2023 1:00 AM] szybet
to the repo


[6/17/2023 1:00 AM] szybet
there is such option


[6/17/2023 1:00 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5541C.png


[6/17/2023 1:01 AM] tux_linux
oh THAT tag


[6/17/2023 1:01 AM] tux_linux
i thought you were speaking about git tags


[6/17/2023 1:01 AM] szybet
https://www.youtube.com/@TunnellVision

{Embed}
https://www.youtube.com/@TunnellVision
Michael Tunnell
Michael provides Linux related how-tos, tutorials, tips, tricks, reviews and more to help people Use, Learn and Enjoy Linux.

This channel is a part of the TuxDigital network. TuxDigital is a media network powered by Linux & Open Source designed to bring passionate creators together to spread our love of open-source, technology, and Linux.​
/mnt/data/projects/git/conversations/media/QJe4bfnQdzgKZIO_5j_NTwDSdD7zC0gYWtW4_F1Urn-81E22


[6/17/2023 1:02 AM] szybet
this guy will be happy to share it


[6/17/2023 1:02 AM] szybet
i like his channel too


[6/17/2023 1:02 AM] tux_linux
dill has work to do


[6/17/2023 1:02 AM] tux_linux
if he wants


[6/17/2023 1:02 AM] szybet
if not then you


[6/17/2023 1:04 AM] tux_linux
so what do i need to test in ipd


[6/17/2023 1:04 AM] szybet
lockscreen wakeup and regular wake up


[6/17/2023 1:04 AM] szybet
thats it


[6/17/2023 1:05 AM] tux_linux
ok


[6/17/2023 1:15 AM] szybet
i;m waiting for the image and starting to make the todo list


[6/17/2023 1:15 AM] tux_linux
i'm testing ipd


[6/17/2023 1:16 AM] tux_linux
well i can start image making

{Reactions}
👍 

[6/17/2023 1:18 AM] tux_linux
what happens if ipd makes the device go to sleep and the device has just booted and it's showing lockscreen for first unlock?


[6/17/2023 1:19 AM] tux_linux
i know i'm not making you happy


[6/17/2023 1:19 AM] tux_linux
i think


[6/17/2023 1:19 AM] tux_linux
or maybe the code already handles it?


[6/17/2023 1:20 AM] tux_linux
i will try it


[6/17/2023 1:20 AM] szybet
nope wait


[6/17/2023 1:21 AM] tux_linux
well, if it checks for already existing lockscreen processes


[6/17/2023 1:21 AM] tux_linux
it should handle it


[6/17/2023 1:22 AM] szybet
how to i check if `extern FBInkDump dump;` is valid?


[6/17/2023 1:22 AM] tux_linux
it handles it


[6/17/2023 1:22 AM] szybet
yes, but possible segmentation fault


[6/17/2023 1:23 AM] szybet
or memory corruption


[6/17/2023 1:23 AM] szybet
answer this


[6/17/2023 1:23 AM] szybet
or spawn niluje here


[6/17/2023 1:23 AM] szybet
we need testers to ask more such questions


[6/17/2023 1:23 AM] tux_linux
well, now it spams this each .5s
```
Fri Jun 16 19:23:24 2023 | afterSleep: Waiting for launch_lockscreen.sh to finish
Fri Jun 16 19:23:24 2023 | appsFreeze: Looking for process matching 'lockscreen' string
Fri Jun 16 19:23:24 2023 | appsFreeze: Found PID of lockscreen: 2626 in line: /bin/sh/usr/local/bin/launch_lockscreen.sh
```


[6/17/2023 1:24 AM] tux_linux
lockscreen is running


[6/17/2023 1:24 AM] tux_linux
it is normal?


[6/17/2023 1:24 AM] szybet
yep


[6/17/2023 1:24 AM] szybet
just logs


[6/17/2023 1:24 AM] tux_linux
will you not make log overflow ram space at some point?


[6/17/2023 1:24 AM] szybet
its DEBUG


[6/17/2023 1:24 AM] tux_linux
true


[6/17/2023 1:24 AM] tux_linux
nvm


[6/17/2023 1:24 AM] szybet
obviously yes, even without it


[6/17/2023 1:24 AM] tux_linux
well I spawn @NiLuJe


[6/17/2023 1:24 AM] szybet
propably in an if() ?


[6/17/2023 1:24 AM] szybet
if null


[6/17/2023 1:25 AM] tux_linux
you're still working on ipd?


[6/17/2023 1:25 AM] szybet
this one fix


[6/17/2023 1:25 AM] tux_linux
so making an image is useless currently?


[6/17/2023 1:25 AM] szybet
memory corruption


[6/17/2023 1:25 AM] szybet
minute max


[6/17/2023 1:25 AM] tux_linux
?


[6/17/2023 1:25 AM] szybet
new comit

{Reactions}
👍 

[6/17/2023 1:25 AM] tux_linux
nvm the use case doesn't work


[6/17/2023 1:26 AM] tux_linux
ipd starts lockscreen fine


[6/17/2023 1:26 AM] tux_linux
but then it thinks inkbox gui is already running


[6/17/2023 1:26 AM] tux_linux
so user is left with blank screen


[6/17/2023 1:26 AM] tux_linux
this is valid behavior for every other time but not this one


[6/17/2023 1:26 AM] szybet
what?


[6/17/2023 1:27 AM] tux_linux
well it thinks inkbox-bin has started


[6/17/2023 1:27 AM] szybet
and?


[6/17/2023 1:27 AM] tux_linux
but the first binary to start on boot is lockscreen-bin


[6/17/2023 1:27 AM] szybet
and?


[6/17/2023 1:27 AM] tux_linux
inkbox-bin is never launched


[6/17/2023 1:27 AM] tux_linux
even by lockscreen itself


[6/17/2023 1:27 AM] tux_linux
it needs to know when to launch it


[6/17/2023 1:27 AM] szybet
because?


[6/17/2023 1:27 AM] tux_linux
and when not to launch it


[6/17/2023 1:27 AM] tux_linux
`inkbox.sh` script, at boot, starts only lockscreen


[6/17/2023 1:27 AM] szybet
ipd doesnt manage launching inkbox-bin???


[6/17/2023 1:27 AM] tux_linux
not after lockscreen


[6/17/2023 1:28 AM] tux_linux
it wouldn't normally need to do that


[6/17/2023 1:28 AM] szybet
the only problem is that the screen gets blank?


[6/17/2023 1:28 AM] tux_linux
let me explain sequence of events


[6/17/2023 1:28 AM] szybet
.


[6/17/2023 1:29 AM] tux_linux
1. kobo boots
2. goes to lockscreen
3. user puts it to sleep/idle sleep does it
4. user wakes it up
5. new lockscreen launches, killing the other one (I think)
6. new lockscreen thinks that inkbox-bin is already running so it just tries to unfreeze it, but it doesn't work because it hasn't been launched


[6/17/2023 1:29 AM] tux_linux
well, it is a big problem


[6/17/2023 1:29 AM] szybet
oh


[6/17/2023 1:30 AM] szybet
let me think


[6/17/2023 1:30 AM] tux_linux
before killing old lockscreen, check if inkbox-bin is running *and* inkbox_gui service is started


[6/17/2023 1:31 AM] tux_linux
because it can't start it when in x11


[6/17/2023 1:31 AM] szybet
nope, its more complicated than that


[6/17/2023 1:31 AM] szybet
i have a solution


[6/17/2023 1:31 AM] tux_linux
ok


[6/17/2023 1:31 AM] szybet
wait


[6/17/2023 1:33 AM] szybet
while you wait you can test user apps on clean image uploaded via usb


[6/17/2023 1:34 AM] tux_linux
i will on the system i have currently


[6/17/2023 1:34 AM] tux_linux
latest commits


[6/17/2023 1:37 AM] szybet
inkbox.sh is run only at boot?


[6/17/2023 1:37 AM] tux_linux
no


[6/17/2023 1:37 AM] tux_linux
when `inkbox_gui` starts


[6/17/2023 1:37 AM] szybet
when does inkbox_gui sstar?..


[6/17/2023 1:37 AM] tux_linux
at boot


[6/17/2023 1:37 AM] tux_linux
when x11 quits


[6/17/2023 1:37 AM] tux_linux
user apps adding via usb works


[6/17/2023 1:38 AM] tux_linux
tried sketch


[6/17/2023 1:38 AM] szybet
then it shouldnt be an issue that i wont kill lockscreen if it already exists, and inkbox.sh is launched?...


[6/17/2023 1:38 AM] tux_linux
well i can try again


[6/17/2023 1:38 AM] szybet
what


[6/17/2023 1:38 AM] tux_linux
i can see if it was just bad luck


[6/17/2023 1:38 AM] szybet
it wasn't


[6/17/2023 1:39 AM] tux_linux
ok


[6/17/2023 1:39 AM] tux_linux
wdym then


[6/17/2023 1:39 AM] tux_linux
well, if you don't kill it if it already exists


[6/17/2023 1:39 AM] tux_linux
it *should* work


[6/17/2023 1:42 AM] szybet
went, test it


[6/17/2023 1:44 AM] tux_linux
testing


[6/17/2023 1:44 AM] szybet
fuck


[6/17/2023 1:44 AM] szybet
wont work


[6/17/2023 1:44 AM] tux_linux
because


[6/17/2023 1:44 AM] szybet
or


[6/17/2023 1:45 AM] szybet
test


[6/17/2023 1:45 AM] szybet
i will check smth


[6/17/2023 1:45 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-FACF1.png


[6/17/2023 1:45 AM] szybet
https://tenor.com/view/cats-wow-omg-oh-ohwow-gif-11552768

{Embed}
https://tenor.com/view/cats-wow-omg-oh-ohwow-gif-11552768
/mnt/data/projects/git/conversations/media/cats-wow-2DE44.png


[6/17/2023 1:45 AM] szybet
its fine should work

{Reactions}
👍 

[6/17/2023 1:54 AM] tux_linux
it spams this


[6/17/2023 1:54 AM] tux_linux
```
Fri Jun 16 19:54:38 2023 | appsFreeze: Found PID of lockscreen: 2756 in line: /bin/sh./lockscreen
Fri Jun 16 19:54:38 2023 | afterSleep: Waiting for launch_lockscreen.sh to finish
Fri Jun 16 19:54:38 2023 | appsFreeze: Looking for process matching 'lockscreen' string
Fri Jun 16 19:54:38 2023 | appsFreeze: Found PID of lockscreen: 2756 in line: /bin/sh./lockscreen
```


[6/17/2023 1:54 AM] tux_linux
stays on sleeping screen


[6/17/2023 1:55 AM] tux_linux
but is woke up on serial


[6/17/2023 1:55 AM] szybet
what is this


[6/17/2023 1:55 AM] szybet
also, then


[6/17/2023 1:55 AM] szybet
context


[6/17/2023 1:56 AM] tux_linux
1. Boot
2. Goes to lockscreen
3. Sleep
4. Wake-up
There it wakes up serial console and led but screen stays on 'sleeping'


[6/17/2023 1:57 AM] szybet
full log please


[6/17/2023 1:57 AM] tux_linux
Putting it back to sleep and trying to wake it up gives same result


[6/17/2023 1:58 AM] szybet
log


[6/17/2023 1:58 AM] tux_linux
also usbnet doesn't start


[6/17/2023 1:59 AM] szybet
did you enabled it before going to sleep?


[6/17/2023 1:59 AM] tux_linux
nvm wasnt plugged in


[6/17/2023 1:59 AM] szybet
;o


[6/17/2023 2:01 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/ipd-F8CF4.log


[6/17/2023 2:03 AM] szybet
once more what is /bin/sh./lockscreen


[6/17/2023 2:03 AM] tux_linux
I d k


[6/17/2023 2:03 AM] tux_linux
Try it on Nia if you want


[6/17/2023 2:04 AM] szybet
its weird but not critical...


[6/17/2023 2:05 AM] szybet
well good that you added lockscreen to the list there


[6/17/2023 2:05 AM] szybet
i didn't knowed that


[6/17/2023 2:05 AM] tux_linux
Todo list?


[6/17/2023 2:05 AM] tux_linux
It's weird enough it should be fixed


[6/17/2023 2:06 AM] szybet
internal apps list


[6/17/2023 2:06 AM] tux_linux
Oh ok


[6/17/2023 2:10 AM] szybet
try this


[6/17/2023 2:10 AM] szybet
it's 2:10 and it maybe will work


[6/17/2023 2:11 AM] tux_linux
I'm eating but will try in 10m


[6/17/2023 2:11 AM] tux_linux
Thanks


[6/17/2023 2:33 AM] szybet
i will test the nia image tommorow


[6/17/2023 2:33 AM] szybet
gn


[6/17/2023 2:34 AM] tux_linux
good night


[6/17/2023 4:11 AM] tux_linux
ipd doesn't work
please try to fix it
thanks a lot


[6/17/2023 4:12 AM] tux_linux
btw it is actually the thing stripping out spaces like last time
entry in `ps`:
```
2739 root      0:00 {lockscreen} /bin/sh ./lockscreen
```


[6/17/2023 4:13 AM] tux_linux
`/bin/sh ./lockscreen` -> `/bin/sh./lockscreen`


[6/17/2023 4:14 AM] the.mightydill
I did 😭😭😭 didn't I tell you


[6/17/2023 4:14 AM] the.mightydill
it was a while ago sorry


[6/17/2023 4:14 AM] the.mightydill
thank you 🙏

{Reactions}
👍 

[6/17/2023 4:15 AM] the.mightydill
so what do I post on reddit?


[6/17/2023 4:15 AM] tux_linux
well you wait for 2.0 release

{Reactions}
👍 

[6/17/2023 4:15 AM] tux_linux
the more we say it's closer to releasing the more we find bugs


[6/17/2023 4:16 AM] the.mightydill
that's life 😔


[6/17/2023 4:16 AM] tux_linux
i think we found 10 bugs in like 5 days


[6/17/2023 4:16 AM] tux_linux
yea


[6/17/2023 4:16 AM] the.mightydill
it's really impressive that you're still working on this


[6/17/2023 4:16 AM] the.mightydill
I applaud you

{Reactions}
👍 

[6/17/2023 5:44 AM] tux_linux
@Szybet I fixed it partially. It can't restore FBInk to the screen for some reason but at least it can unfreeze it. The problem for unfreeze was probably that it was not unfreezing `lockscreen-bin` but only `lockscreen`. To see that it works you have to touch somewhere on the screen where lockscreen would be and the buttons will start to appear. Normal lockscreen sleep/wakeup seems to work ok


[6/17/2023 5:45 AM] tux_linux
I pushed half working commits, please fix them as soon as you can if you find the problem


[6/17/2023 5:45 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230617_034442921-58027.jpg


[6/17/2023 5:48 AM] tux_linux
here are logs but please test ipd on your device, things will go faster that way
thanks

{Attachments}
/mnt/data/projects/git/conversations/media/message-9F83E.txt


[6/17/2023 10:29 AM] szybet
Ok i will


[6/17/2023 11:00 AM] szybet
i'm not sure if i'm able in english politely to say to not touch my code until you are sure what you are doing


[6/17/2023 11:00 AM] szybet
but you get the message


[6/17/2023 11:51 AM] szybet
done


[6/17/2023 11:51 AM] szybet
programming at 2 in the night is bad ;p


[6/17/2023 11:51 AM] szybet
i fixed some formating - if its wrong then leave it, i will make the formatter if its wrong but for 2.1


[6/17/2023 11:54 AM] tux_linux
I tried


[6/17/2023 11:54 AM] tux_linux
I even warned you


[6/17/2023 11:54 AM] szybet
i know i know, but then make pull requests


[6/17/2023 11:54 AM] tux_linux
Ok


[6/17/2023 11:54 AM] tux_linux
Thanks


[6/17/2023 11:54 AM] szybet
for things that i wrote and i manage in 100%


[6/17/2023 11:55 AM] szybet
like epubtool, ipd


[6/17/2023 11:55 AM] szybet
and those are breaking changes, not formatting


[6/17/2023 11:55 AM] szybet
in the perfect world you wouldnt need to touch my software


[6/17/2023 11:55 AM] szybet
but well i need to sleep sometimes


[6/17/2023 11:55 AM] szybet
🥴


[6/17/2023 11:56 AM] tux_linux
In a perfect world you wouldn't need to touch my software


[6/17/2023 11:56 AM] tux_linux
Is that what you want to hear?


[6/17/2023 11:56 AM] tux_linux
Is that what you did?


[6/17/2023 11:56 AM] tux_linux
No


[6/17/2023 11:57 AM] tux_linux
Collaboration is a good development practice
Always work together


[6/17/2023 11:57 AM] szybet
yes i do prefer not to touch xorg for example, init


[6/17/2023 11:58 AM] szybet
there are parts that we do together, like inkbox qt, lockscreen wifi etc etc


[6/17/2023 11:58 AM] szybet
not efficient


[6/17/2023 11:58 AM] szybet
at least in our example


[6/17/2023 11:59 AM] szybet
i would need hours to understand usbms, and you would need hours to understand IPD watchdog


[6/17/2023 11:59 AM] tux_linux
I tried because you were sleeping
Otherwise I'd have asked you to fix it
I couldn't stand this bug


[6/17/2023 11:59 AM] tux_linux
Yes


[6/17/2023 11:59 AM] szybet
yes sure its fine


[6/17/2023 12:00 PM] szybet
you also wouldnt like me making some weird init changes directly you would prefer a pull request


[6/17/2023 12:00 PM] szybet
i'm against pull requests in the parts together, or for small changes


[6/17/2023 12:00 PM] tux_linux
But it's good that we experiment with things, even if they don't work
Maybe someday I will understand how ipd works


[6/17/2023 12:01 PM] tux_linux
The existing code didn't work already
So I thought it wasn't necessary to make a pull request
Just work in the tree


[6/17/2023 12:01 PM] szybet
yes, obviously but i would simply prefer reject those experiments with one click, and not looking at git diff


[6/17/2023 12:01 PM] tux_linux
Well you can?


[6/17/2023 12:01 PM] szybet
yes, but your changes didn't helped


[6/17/2023 12:02 PM] szybet
remove a commit completly? deleting history is bad


[6/17/2023 12:02 PM] tux_linux
Revert to an old commit


[6/17/2023 12:02 PM] tux_linux
Same thing


[6/17/2023 12:02 PM] szybet
dirty a bit


[6/17/2023 12:02 PM] tux_linux
Deleting commit is dirtier


[6/17/2023 12:04 PM] tux_linux
Well you can't say that my discovery that we need to use lockscreen-**bin** didn't help


[6/17/2023 12:04 PM] tux_linux
Anyway
Let's move on


[6/17/2023 12:04 PM] tux_linux
What next


[6/17/2023 12:05 PM] szybet
pretty obvious after reading the log but yea


[6/17/2023 12:06 PM] szybet
nia image for me to test things


[6/17/2023 12:06 PM] szybet
and wake up dill ;p


[6/17/2023 12:06 PM] tux_linux
Dill answered?


[6/17/2023 12:06 PM] tux_linux
Ok


[6/17/2023 12:06 PM] szybet
also make sure you did the things Before 2.0 release in the todo on google docs


[6/17/2023 12:07 PM] szybet
~~crazy~~

{Reactions}
👍 (2) 

[6/17/2023 12:07 PM] szybet
oh ok


[6/17/2023 12:08 PM] tux_linux
Did you test usbms on Nia?


[6/17/2023 12:15 PM] szybet
waiting for your image


[6/17/2023 12:15 PM] szybet
i think we settled for this


[6/17/2023 12:15 PM] tux_linux
oh ok


[6/17/2023 12:15 PM] tux_linux
well i will test new ipd now


[6/17/2023 12:15 PM] tux_linux
then package it


[6/17/2023 12:18 PM] tux_linux
also inkbox gui systematically segfaults when connecting to a network on glo hd


[6/17/2023 12:18 PM] tux_linux
```
kobo:~# [  781.105046] Alignment trap: not handling instruction e8523f00 at [<000f4558>]
[  781.112188] Unhandled fault: alignment exception (0x011) at 0x00370036
```
I get this on kernel log


[6/17/2023 12:18 PM] szybet
only on glo hd?


[6/17/2023 12:18 PM] tux_linux
let me try another device


[6/17/2023 12:19 PM] tux_linux
it segfaults right after syncing time


[6/17/2023 12:19 PM] tux_linux
and it segfaulted again now when launching wifi dialog box


[6/17/2023 12:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-DAAA2.txt


[6/17/2023 12:20 PM] szybet
works on the nia...


[6/17/2023 12:20 PM] szybet
try to spawn more networks maybe


[6/17/2023 12:20 PM] tux_linux
how many networks in your list


[6/17/2023 12:20 PM] szybet
try on another device


[6/17/2023 12:20 PM] szybet
3


[6/17/2023 12:20 PM] tux_linux
2 on mine


[6/17/2023 12:22 PM] tux_linux
it doesn't segfault on aura se


[6/17/2023 12:23 PM] tux_linux
doesn't segfault this time on glo hd


[6/17/2023 12:23 PM] tux_linux
whatever


[6/17/2023 12:23 PM] tux_linux
let's just pretend it didn't happen


[6/17/2023 12:28 PM] szybet
add it to todo


[6/17/2023 12:28 PM] szybet
its a glo hd thing, you need to debug it


[6/17/2023 12:29 PM] szybet
gdb server would be helpfull propably


[6/17/2023 12:29 PM] szybet
added ut


[6/17/2023 12:29 PM] szybet
im waiting for the image


[6/17/2023 12:39 PM] tux_linux
ipd works


[6/17/2023 12:39 PM] tux_linux
making image


[6/17/2023 12:44 PM] szybet
also make sure you did the things Before 2.0 release in the todo on google docs


[6/17/2023 12:44 PM] szybet
also make sure you did the things Before 2.0 release in the todo on google docs


[6/17/2023 12:44 PM] szybet
also make sure you did the things Before 2.0 release in the todo on google docs


[6/17/2023 12:45 PM] szybet
and check them if yes


[6/17/2023 12:46 PM] tux_linux
i did


[6/17/2023 12:52 PM] szybet
not on all of them


[6/17/2023 1:15 PM] tux_linux
i have some usbnet fixes to do


[6/17/2023 1:15 PM] tux_linux
should not be too long


[6/17/2023 1:20 PM] szybet
its only dev things


[6/17/2023 1:20 PM] szybet
you could not care


[6/17/2023 1:21 PM] tux_linux
i care


[6/17/2023 1:21 PM] tux_linux
macos

{Attachments}
/mnt/data/projects/git/conversations/media/image-59AF6.png


[6/17/2023 1:21 PM] tux_linux
it spawned almost 20 of them this morning


[6/17/2023 1:27 PM] szybet
https://tenor.com/view/patrick-problems-gif-20611843

{Embed}
https://tenor.com/view/patrick-problems-gif-20611843
/mnt/data/projects/git/conversations/media/patrick-problems-9C27D.png


[6/17/2023 1:37 PM] tux_linux
ok starting your image build


[6/17/2023 1:47 PM] tux_linux
uploading


[6/17/2023 1:51 PM] tux_linux
can we check nia brightness in reader?


[6/17/2023 1:51 PM] szybet
i wll i will


[6/17/2023 1:51 PM] tux_linux
ok


[6/17/2023 1:52 PM] szybet
also, smth for  you to do - download page with 2 alternative downloads, with inf othe one os faster in  europe but can be down sometimes


[6/17/2023 1:52 PM] tux_linux
maybe


[6/17/2023 1:52 PM] tux_linux
well here the 23.163.0.39 one is faster


[6/17/2023 1:59 PM] tux_linux
upload done


[6/17/2023 1:59 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/inkbox-2.0-n306.sqsh


[6/17/2023 2:06 PM] szybet
not maybe


[6/17/2023 2:06 PM] tux_linux
I think i won't make the kt image
only if someone requests it


[6/17/2023 2:06 PM] tux_linux
i will add a note in the release announcement


[6/17/2023 2:06 PM] szybet
make the kt image a file


[6/17/2023 2:06 PM] szybet
"request the image bro"


[6/17/2023 2:07 PM] szybet
just to be sure if someone looks only at downloads


[6/17/2023 2:07 PM] tux_linux
well maybe not a file but i will add it to the list


[6/17/2023 2:07 PM] tux_linux
it's a bit more complicated
further work on imgtool would be needed


[6/17/2023 2:09 PM] szybet
what


[6/17/2023 2:09 PM] szybet
just on the download server


[6/17/2023 2:09 PM] szybet
or on the list on the download server


[6/17/2023 2:09 PM] tux_linux
no, i mean, to make an image for kt, further work on imgtool is needed
if someone has a kt and wants the image I can do it


[6/17/2023 2:10 PM] tux_linux
but nobody asked or seemed interested in it AFAIK


[6/17/2023 2:11 PM] szybet
ok but on the download server make a file labeled kt file and write there a request is needed


[6/17/2023 2:11 PM] tux_linux
yea


[6/17/2023 2:18 PM] tux_linux
I think I will start the video with KT booting to show how much of a leap has been done between 1.5 and 2.0


[6/17/2023 2:18 PM] tux_linux
Then this will also allow us to see if there's real interest in the device


[6/17/2023 2:19 PM] szybet
okay


[6/17/2023 2:19 PM] szybet
dont sqsh the image


[6/17/2023 2:19 PM] szybet
final one


[6/17/2023 2:19 PM] tux_linux
no, they will be in xz format


[6/17/2023 2:19 PM] szybet
good


[6/17/2023 2:19 PM] szybet
but no sqsh


[6/17/2023 2:19 PM] szybet
because its only linux


[6/17/2023 2:19 PM] szybet
thing


[6/17/2023 2:19 PM] tux_linux
7-zip can uncompress it


[6/17/2023 2:19 PM] tux_linux
but anyway


[6/17/2023 2:36 PM] szybet
idle sleep while "content thing" after usbms


[6/17/2023 2:37 PM] szybet
local library thumbnail sizes are not identical for all books


[6/17/2023 2:37 PM] tux_linux
its that long?


[6/17/2023 2:38 PM] tux_linux
we probably can't do anything about it


[6/17/2023 2:38 PM] szybet
IT WAS WORKING


[6/17/2023 2:38 PM] szybet
i'm gonna fix it


[6/17/2023 2:38 PM] tux_linux
well what changed


[6/17/2023 2:38 PM] szybet
you redesigned it


[6/17/2023 2:38 PM] tux_linux
oh it's the .t thing


[6/17/2023 2:38 PM] szybet
i once make a pull request fixing it


[6/17/2023 2:39 PM] szybet
look into that if it still applies


[6/17/2023 2:39 PM] tux_linux
the solution was to put `!` at the end of size string


[6/17/2023 2:39 PM] tux_linux
it doesn't work


[6/17/2023 2:39 PM] tux_linux
then


[6/17/2023 2:39 PM] szybet
check it


[6/17/2023 2:39 PM] szybet
usb ms works btw


[6/17/2023 2:41 PM] szybet
usr bin convert is image magick?


[6/17/2023 2:41 PM] tux_linux
yes


[6/17/2023 2:41 PM] tux_linux
cover sizes are the same on mine


[6/17/2023 2:41 PM] tux_linux
i deleted everything


[6/17/2023 2:41 PM] szybet
---


[6/17/2023 2:41 PM] szybet
-_-


[6/17/2023 2:42 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/kindle-4E9AE.png


[6/17/2023 2:42 PM] tux_linux
can you send me a screenshot?


[6/17/2023 2:43 PM] tux_linux
`handle idle sleep when loading x11 app`
I added this in 2.1 todo list


[6/17/2023 2:44 PM] szybet
i uploaded fun-fun.7z, there are my books which i uploaded


[6/17/2023 2:44 PM] tux_linux
because it probably is a problem too


[6/17/2023 2:44 PM] szybet
try them


[6/17/2023 2:44 PM] tux_linux
ok


[6/17/2023 2:44 PM] szybet
and delete the file after downloading


[6/17/2023 2:45 PM] tux_linux
why 7z


[6/17/2023 2:45 PM] szybet
why not


[6/17/2023 2:45 PM] szybet
better than squash


[6/17/2023 2:45 PM] tux_linux
tar?


[6/17/2023 2:45 PM] tux_linux
no?


[6/17/2023 2:47 PM] szybet
https://legacy.imagemagick.org/Usage/resize/#noaspect


[6/17/2023 2:47 PM] tux_linux
well it is already enabled


[6/17/2023 2:47 PM] szybet
add a `\` before `!` so `\!`


[6/17/2023 2:47 PM] tux_linux
why did this work before


[6/17/2023 2:47 PM] szybet
updated version maybe?


[6/17/2023 2:47 PM] szybet
idk


[6/17/2023 2:47 PM] szybet
or i have new books


[6/17/2023 2:47 PM] tux_linux
i didn't update anything


[6/17/2023 2:47 PM] szybet
try it


[6/17/2023 2:47 PM] tux_linux
ok


[6/17/2023 2:47 PM] szybet
try it anyway


[6/17/2023 2:47 PM] szybet
i will do something with idle

{Reactions}
👍 

[6/17/2023 2:48 PM] tux_linux
eta for solving? will we be done by 12pm? at last?


[6/17/2023 2:48 PM] szybet
eta?


[6/17/2023 2:48 PM] szybet
5 minuts if i'm lucky


[6/17/2023 2:48 PM] szybet
its 15 pm :D


[6/17/2023 2:48 PM] tux_linux
estimated time of arrival
also means eastimated time to finish


[6/17/2023 2:49 PM] tux_linux
oh yes true


[6/17/2023 2:49 PM] tux_linux
well, 8:49 am here


[6/17/2023 2:49 PM] szybet
brightness does work


[6/17/2023 2:49 PM] tux_linux
good


[6/17/2023 2:49 PM] tux_linux
tick it


[6/17/2023 2:50 PM] tux_linux
` 8936 root      0:00 /usr/bin/convert /data/onboard/Inne ebooki/Peter V. Brett - cykl Demoniczny tom 1-12 [ebook PL]/Screenshot_20230607-103749_NusantaraLauncher.png -resize 75x100! /data/onboard/.[...]`
it does provide the !


[6/17/2023 2:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2BD9B.png
/mnt/data/projects/git/conversations/media/image-3D1FC.png


[6/17/2023 2:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-825B7.png


[6/17/2023 2:50 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-6E3B3.png


[6/17/2023 2:51 PM] szybet
read it all


[6/17/2023 2:51 PM] tux_linux
it's in ps


[6/17/2023 2:51 PM] tux_linux
if it got there it means the shell hasn't used it for special purposes


[6/17/2023 2:51 PM] szybet
if you dont have a better idea then try adding it


[6/17/2023 2:52 PM] szybet
idle sleep will have a longer delay after detecting usbms


[6/17/2023 2:52 PM] tux_linux
ok


[6/17/2023 2:52 PM] tux_linux
for how much time


[6/17/2023 2:52 PM] szybet
+ 5 minutes


[6/17/2023 2:52 PM] tux_linux
then it resets to normal time?


[6/17/2023 2:53 PM] szybet
yep


[6/17/2023 2:53 PM] tux_linux
good


[6/17/2023 2:54 PM] tux_linux
now it provided \ to the command line too
`9071 root      0:00 /usr/bin/convert /data/onboard/.thumbnails/01339503eb4c7166eaf802fada450a278df131863f3fd18b60d0acf681cc858c -resize 75x100\! /dat[...]`


[6/17/2023 2:54 PM] szybet
does it work?


[6/17/2023 2:54 PM] tux_linux
still generating


[6/17/2023 2:55 PM] tux_linux
no it's worse
even my books are not sized correctly now


[6/17/2023 2:55 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/kindle-65296.png


[6/17/2023 2:55 PM] tux_linux
and your books are still differently-sized


[6/17/2023 2:56 PM] tux_linux
it isn't *that* bad, i think we can leave it


[6/17/2023 2:56 PM] tux_linux
just do nothing


[6/17/2023 2:56 PM] szybet
fuck no


[6/17/2023 2:56 PM] tux_linux
well what do you want


[6/17/2023 2:56 PM] szybet
the bottom buttons go out of the screen sometimes


[6/17/2023 2:56 PM] tux_linux
that bad?


[6/17/2023 2:56 PM] szybet
a solution


[6/17/2023 2:56 PM] szybet
that bad


[6/17/2023 2:58 PM] szybet
try mogrify maybe


[6/17/2023 2:58 PM] szybet
by hand i think for first


[6/17/2023 3:00 PM] szybet
will not help propably but still


[6/17/2023 3:00 PM] szybet
also to try:  
convert folder.jpg -resize "160x160!" folder2.jpg


[6/17/2023 3:01 PM] tux_linux
"?


[6/17/2023 3:01 PM] szybet
ye


[6/17/2023 3:04 PM] tux_linux
well mogrify seems to work


[6/17/2023 3:04 PM] szybet
are you sure 100% for all books


[6/17/2023 3:06 PM] tux_linux
but convert works too when ran manually


[6/17/2023 3:06 PM] tux_linux
so it's the same problem


[6/17/2023 3:06 PM] szybet
by replacing the books?


[6/17/2023 3:06 PM] szybet
you replace them


[6/17/2023 3:06 PM] szybet
manually running too?


[6/17/2023 3:06 PM] tux_linux
no i just tried with thumbnails


[6/17/2023 3:06 PM] tux_linux
i will try putting it in the script maybe


[6/17/2023 3:07 PM] szybet
do you replace the image while runnign manually


[6/17/2023 3:07 PM] szybet
i mean just not creating a new file


[6/17/2023 3:07 PM] szybet
just like the script


[6/17/2023 3:07 PM] tux_linux
also coversize is already in ""


[6/17/2023 3:08 PM] szybet
not here


[6/17/2023 3:08 PM] tux_linux
it's a command line


[6/17/2023 3:08 PM] tux_linux
" " disappear there


[6/17/2023 3:08 PM] szybet
whatever


[6/17/2023 3:08 PM] szybet
answer


[6/17/2023 3:08 PM] tux_linux
i didn't understand your question


[6/17/2023 3:09 PM] szybet
while running the convert manually, do you create a new image or replace the old one


[6/17/2023 3:09 PM] tux_linux
replace the old one


[6/17/2023 3:09 PM] szybet
good


[6/17/2023 3:12 PM] szybet
run the script with -x also


[6/17/2023 3:12 PM] tux_linux
mogrify doesn't work at all


[6/17/2023 3:13 PM] szybet
?


[6/17/2023 3:13 PM] tux_linux
**manually**


[6/17/2023 3:15 PM] szybet
.


[6/17/2023 3:16 PM] tux_linux
with convert or mogrify?


[6/17/2023 3:17 PM] szybet
convert


[6/17/2023 3:17 PM] szybet
i think


[6/17/2023 3:27 PM] szybet
try for adding ! before x


[6/17/2023 3:27 PM] szybet
it may make sense


[6/17/2023 3:27 PM] szybet
100!x100!


[6/17/2023 3:32 PM] tux_linux
it seems to accept it


[6/17/2023 3:36 PM] tux_linux
it works


[6/17/2023 3:36 PM] tux_linux
cursed docs


[6/17/2023 3:36 PM] szybet
wait a minute...


[6/17/2023 3:38 PM] tux_linux
actually you can have a better implementation for ipd


[6/17/2023 3:38 PM] szybet
i do remember trying this, maybe you applied only one of them


[6/17/2023 3:38 PM] szybet
wahtever


[6/17/2023 3:38 PM] szybet
yea i know rust


[6/17/2023 3:38 PM] tux_linux
inkbox gui writes true to `/tmp/in_usbms` while in usbms


[6/17/2023 3:38 PM] szybet
nah its good


[6/17/2023 3:39 PM] szybet
add to todo 2.1


[6/17/2023 3:39 PM] szybet
also you dont know if user apps will like to use usbms in the future


[6/17/2023 3:39 PM] tux_linux
so start idle sleep delay once it's finished, 5 minutes for database generation max


[6/17/2023 3:39 PM] szybet
ipd is designed to be independant


[6/17/2023 3:39 PM] tux_linux
n
o
t

n
o
w


[6/17/2023 3:39 PM] szybet
it works exactly like that


[6/17/2023 3:40 PM] tux_linux
no


[6/17/2023 3:40 PM] tux_linux
it starts when usbms starts


[6/17/2023 3:40 PM] tux_linux
if it takes user 10 minutes to put books in well it's not good


[6/17/2023 3:40 PM] tux_linux
if you add the delay only once it's finished it would be better


[6/17/2023 3:41 PM] szybet
so only the path needs to be changed to this magical one?


[6/17/2023 3:41 PM] szybet
in rootfs?


[6/17/2023 3:41 PM] tux_linux
well actually no
in /kobo/tmp


[6/17/2023 3:43 PM] tux_linux
1. you watch for this file, with file.good() in some loop maybe
2. if it starts existing you watch it until it is removed - during that time you freeze idle sleep delay
3. when the file disappears it means we got out of usbms, you can set a temporary delay of 5 minutes to allow for very large database generation
4. you reset this delay to the normal one


[6/17/2023 3:44 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/f2f945609df22fde9e8f36c13b781b98d2a2ddc1/src/splash/usbmsSplash.cpp#L203


[6/17/2023 3:45 PM] szybet
ok, fix soon


[6/17/2023 3:45 PM] tux_linux
thanks


[6/17/2023 3:47 PM] tux_linux
actually, it doesn't disappear
it only is written "false"


[6/17/2023 3:47 PM] tux_linux
maybe it would be better if it disappeared? i can change it


[6/17/2023 3:47 PM] szybet
yes do it


[6/17/2023 3:47 PM] tux_linux
ok


[6/17/2023 3:47 PM] szybet
```
    while(fileExists("/kobo/tmp/in_usbms")) {
      log("USB mass storage session is active. Delaying idle sleep for additionall 5 minutes");
      countIdle = -300; // to be sure
      this_thread::sleep_for(timespan);
    }
```


[6/17/2023 3:47 PM] szybet
literally this


[6/17/2023 3:48 PM] tux_linux
additional


[6/17/2023 3:48 PM] tux_linux
you can't just wait like 1 second at each loop? then set 5 minutes?


[6/17/2023 3:49 PM] szybet
setting one int to a value is better than making a bool, checking that bool, ifint that bool and the setting the int once


[6/17/2023 3:49 PM] tux_linux
i'm lost


[6/17/2023 3:50 PM] szybet
look


[6/17/2023 3:51 PM] tux_linux
```
while(fileExists("/kobo/tmp/in_usbms")) {
      log("USB mass storage session is active. Temporarily disabling idle sleep service");
      this_thread::sleep_for(1000);
    }

--- when file doesn't exist ---
countIdle -> 5 minutes
then, reset countIdle
```


[6/17/2023 3:51 PM] tux_linux
can't it be that?


[6/17/2023 3:51 PM] szybet
```
    bool niceBool = fileExists("/kobo/tmp/in_usbms");
    while(niceBool) {
    niceBool = fileExists("/kobo/tmp/in_usbms")
      log("USB mass storage session is active. Delaying idle sleep for additionall 5 minutes");
      this_thread::sleep_for(timespan);
    }
    if(niceBool = false) {
        idleSleep = -300;
    }
```


[6/17/2023 3:51 PM] szybet
it would look like this


[6/17/2023 3:51 PM] szybet
for... what


[6/17/2023 3:51 PM] szybet
setting an int every second?


[6/17/2023 3:51 PM] tux_linux
while the device is in usbms, idle sleep should be frozen


[6/17/2023 3:51 PM] szybet
it is


[6/17/2023 3:51 PM] szybet
in a while loop


[6/17/2023 3:51 PM] szybet
;-


[6/17/2023 3:52 PM] tux_linux
ok...
but what happens if you take 1 m to put files in


[6/17/2023 3:52 PM] szybet
after 1 minute the while loop exists and idle sleep now waits the delay that is set + 5 minutes


[6/17/2023 3:53 PM] tux_linux
timespan is what exactly?


[6/17/2023 3:53 PM] szybet
1s


[6/17/2023 3:53 PM] tux_linux
ok


[6/17/2023 3:53 PM] szybet
in chrono miliseconds


[6/17/2023 3:53 PM] tux_linux
oh i understand now


[6/17/2023 3:54 PM] tux_linux
this is good but remove one `l` from `additionall`


[6/17/2023 3:54 PM] tux_linux
then you can push it


[6/17/2023 3:54 PM] tux_linux
and maybe test it if you want, i pushed the changes for gui


[6/17/2023 3:54 PM] tux_linux
but i can do it too


[6/17/2023 3:55 PM] szybet
you test, i need to go for some small ammount of time\


[6/17/2023 3:55 PM] tux_linux
ok


[6/17/2023 3:55 PM] tux_linux
can you push it?


[6/17/2023 3:55 PM] tux_linux
thanks


[6/17/2023 3:56 PM] szybet
you can prepare another nia image


[6/17/2023 3:56 PM] szybet
i think this one will be the final


[6/17/2023 3:56 PM] szybet
i only need to test epubtool


[6/17/2023 3:57 PM] tux_linux
well ok
test epubtool then i will make the image


[6/17/2023 3:57 PM] szybet
you have my books


[6/17/2023 3:57 PM] tux_linux
current epubtool seems to work fine with them


[6/17/2023 3:58 PM] szybet
then its good

{Reactions}
👍 

[6/17/2023 4:15 PM] tux_linux
` 2714 root      0:00 [launch_lockscre]`
still running after lockscreen has quit


[6/17/2023 4:15 PM] tux_linux
zombie?


[6/17/2023 4:15 PM] tux_linux
anyway not harmful that much


[6/17/2023 4:34 PM] szybet
zombies are collected before the next sleep


[6/17/2023 4:34 PM] tux_linux
oh ok


[6/17/2023 4:34 PM] szybet
not harmful, so only done when performance is not important


[6/17/2023 4:35 PM] szybet
i saw you tinkering with vnc - record it with a camera on a real device you know?


[6/17/2023 4:35 PM] tux_linux
yes


[6/17/2023 4:36 PM] tux_linux
well emulator could be showcased in some part of the video as well


[6/17/2023 4:36 PM] tux_linux
so you want a new image?


[6/17/2023 4:37 PM] szybet
propably the final one


[6/17/2023 4:37 PM] tux_linux
ok


[6/17/2023 4:37 PM] szybet
i dont see any reason to do it


[6/17/2023 4:37 PM] tux_linux
why


[6/17/2023 4:37 PM] szybet
yea, why


[6/17/2023 4:37 PM] szybet
why on emulator


[6/17/2023 4:37 PM] szybet
lets show how it behaves irl


[6/17/2023 4:37 PM] tux_linux
well, maybe some people don't have a kobo and want to test it


[6/17/2023 4:37 PM] tux_linux
without buying one


[6/17/2023 4:38 PM] szybet
and you think they will launch qemu for this :D


[6/17/2023 4:38 PM] tux_linux
why not


[6/17/2023 4:38 PM] tux_linux
you did that yourself


[6/17/2023 4:38 PM] szybet
welp, okay but just show it exists


[6/17/2023 4:38 PM] szybet
and i gived up because it was shit, i only wanted to have a possibility to work on inkbox without my kobo on hand


[6/17/2023 4:39 PM] tux_linux
i still use it from time to time


[6/17/2023 4:39 PM] the.mightydill
szybet it was 4 in the morning 😃


[6/17/2023 4:39 PM] szybet
so nicolas stays awake till 4 in the morning?


[6/17/2023 4:39 PM] tux_linux
no


[6/17/2023 4:39 PM] tux_linux
he's in a different timezone


[6/17/2023 4:40 PM] szybet
whaaat


[6/17/2023 4:40 PM] szybet
asia?


[6/17/2023 4:40 PM] tux_linux
3 hours earlier i think


[6/17/2023 4:40 PM] tux_linux
no


[6/17/2023 4:40 PM] tux_linux
west of canada


[6/17/2023 4:40 PM] szybet
oh ok


[6/17/2023 4:40 PM] szybet
okaaay


[6/17/2023 4:41 PM] szybet
do we want a codename for 2.0


[6/17/2023 4:41 PM] tux_linux
yes


[6/17/2023 4:41 PM] tux_linux
flying saucer


[6/17/2023 4:41 PM] tux_linux
just a joke


[6/17/2023 4:41 PM] szybet
w h a t


[6/17/2023 4:41 PM] szybet
XD


[6/17/2023 4:41 PM] szybet
well seriously


[6/17/2023 4:41 PM] tux_linux
it would not be so bad


[6/17/2023 4:41 PM] szybet
"cry for help"? :)


[6/17/2023 4:42 PM] tux_linux
maybe not *that*


[6/17/2023 4:42 PM] szybet
"usable"


[6/17/2023 4:42 PM] tux_linux
no


[6/17/2023 4:42 PM] szybet
"Usable? $


[6/17/2023 4:42 PM] szybet
"


[6/17/2023 4:43 PM] szybet
"Forgotten"


[6/17/2023 4:44 PM] tux_linux
"already forgotten"


[6/17/2023 4:44 PM] tux_linux
we need a release logo for 2.0
like koreader's


[6/17/2023 4:44 PM] tux_linux
https://github.com/koreader/koreader/releases

{Embed}
https://github.com/koreader/koreader/releases
Releases · koreader/koreader
An ebook reader application supporting PDF, DjVu, EPUB, FB2 and many more formats, running on Cervantes, Kindle, Kobo, PocketBook and Android devices - koreader/koreader
/mnt/data/projects/git/conversations/media/koreader-C2851


[6/17/2023 4:46 PM] tux_linux
no but seriously maybe a proper name


[6/17/2023 4:46 PM] tux_linux
@dill you once said you were the idea man
so...
what do you have in mind


[6/17/2023 4:47 PM] szybet
lol like we have an artist here


[6/17/2023 4:47 PM] tux_linux
i can ask my sister


[6/17/2023 4:48 PM] szybet
well then, maybe


[6/17/2023 4:49 PM] tux_linux
if we were a company we could have people for designing a logo, social networks, replying to issues, aaahhh
i'm dreaming too much


[6/17/2023 4:50 PM] szybet
if here were 20 people instead of... 5 then yes


[6/17/2023 4:50 PM] tux_linux
impossible dream?


[6/17/2023 4:50 PM] szybet
we will see after 2.0


[6/17/2023 4:50 PM] szybet
i'm more motivated to work for 2.1, so at least for that


[6/17/2023 4:50 PM] tux_linux
good


[6/17/2023 4:51 PM] tux_linux
i already see the PRs coming


[6/17/2023 4:51 PM] tux_linux
i remember last year when you first submitted ipd


[6/17/2023 4:51 PM] tux_linux
i... did not like reviewing this one


[6/17/2023 4:52 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/450ab92bd58fcc1e69045530d9e88ffac333ac6e
well, speaks for itself

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/commit/450ab92bd58fcc1e69045530d9e88ffac333ac6e
Cleanup · Kobo-InkBox/inkbox-power-daemon@450ab92
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
/mnt/data/projects/git/conversations/media/450ab92bd58fcc1e69045530d9e88ffac333ac6e-A3C22


[6/17/2023 4:52 PM] szybet
linux kernel has the same issue


[6/17/2023 4:52 PM] tux_linux
yes


[6/17/2023 4:52 PM] szybet
more coders than reviewers


[6/17/2023 4:52 PM] szybet
also, it was my first c++ app


[6/17/2023 4:52 PM] szybet
pure c++


[6/17/2023 4:52 PM] tux_linux
yes, you did well


[6/17/2023 4:52 PM] tux_linux
only not on code standards


[6/17/2023 4:53 PM] szybet
¯\_(ツ)_/¯


[6/17/2023 4:53 PM] tux_linux
anyways it is better now

{Reactions}
👍 

[6/17/2023 4:54 PM] tux_linux
image will be done making in 5m


[6/17/2023 4:54 PM] tux_linux
then uploading


[6/17/2023 4:54 PM] szybet
I will test it in a hour or less

{Reactions}
👍 

[6/17/2023 4:54 PM] tux_linux
I think you could film a part of the video on Nia since I don't have one


[6/17/2023 4:55 PM] tux_linux
which one do you want


[6/17/2023 4:55 PM] tux_linux
.


[6/17/2023 4:55 PM] szybet
Well you decide


[6/17/2023 4:55 PM] szybet
My nia is... Not looking like a nia


[6/17/2023 4:55 PM] szybet
So it doesnt really matter


[6/17/2023 4:56 PM] tux_linux
you should present feathernotes
maybe in a slightly better quality (and with better focus) video


[6/17/2023 4:56 PM] tux_linux
it can be short, maybe just a little demo, 1.5-2min?


[6/17/2023 4:56 PM] tux_linux
you can also show maps


[6/17/2023 4:56 PM] tux_linux
tldr; record some user apps


[6/17/2023 4:57 PM] szybet
But i think its already good


[6/17/2023 4:57 PM] tux_linux
feathernotes video?


[6/17/2023 4:57 PM] szybet
Yes


[6/17/2023 4:57 PM] szybet
Wont be better really


[6/17/2023 4:57 PM] tux_linux
it has focus problems


[6/17/2023 4:57 PM] szybet
Cut it out


[6/17/2023 4:57 PM] tux_linux
no, like, everywhere


[6/17/2023 4:58 PM] tux_linux
at around 2:23-2:25 you can see it can be better


[6/17/2023 4:58 PM] tux_linux
but maybe it's not that important


[6/17/2023 4:58 PM] tux_linux
i can keep it


[6/17/2023 4:59 PM] tux_linux
which ones do you want to record


[6/17/2023 4:59 PM] szybet
Donations for a better camera are welcome


[6/17/2023 4:59 PM] tux_linux
hehe


[6/17/2023 4:59 PM] szybet
;p


[6/17/2023 5:00 PM] tux_linux
you can't set manual focus?


[6/17/2023 5:00 PM] szybet
You decide


[6/17/2023 5:00 PM] szybet
Maybe


[6/17/2023 5:00 PM] tux_linux
it would help


[6/17/2023 5:01 PM] szybet
I will try but i wont rerecord


[6/17/2023 5:01 PM] tux_linux
well,
1. maps
2. conway
3. 2048


[6/17/2023 5:01 PM] szybet
There is already a video of maps


[6/17/2023 5:01 PM] tux_linux
no it's fine i will keep the previous video


[6/17/2023 5:01 PM] tux_linux
it's old and i think the ui wasn't fixed yet?


[6/17/2023 5:02 PM] szybet
I will check it


[6/17/2023 5:02 PM] tux_linux
well it wasn't i just did


[6/17/2023 5:02 PM] tux_linux
also you set the camera to be static and not move


[6/17/2023 5:03 PM] tux_linux
thanks


[6/17/2023 5:03 PM] tux_linux
i will record on my side qalculate and todo maybe


[6/17/2023 5:03 PM] szybet
Camera didnt move, everything else did


[6/17/2023 5:03 PM] tux_linux
oh


[6/17/2023 5:03 PM] tux_linux
i guess we could show sanki but maybe it could benefit from some UI fixes before?


[6/17/2023 5:04 PM] tux_linux
anyway it's an user app so in the end maybe we don't care


[6/17/2023 5:04 PM] tux_linux
but the 3 i gave you will probably be easier and faster to record than sanki


[6/17/2023 5:04 PM] tux_linux
actually i have a sanki video


[6/17/2023 5:04 PM] tux_linux
well


[6/17/2023 5:04 PM] tux_linux
idk?


[6/17/2023 5:05 PM] szybet
Not now... I will go back to sanki soon ( nickel ) then i will ask you for ui changes


[6/17/2023 5:05 PM] tux_linux
ok


[6/17/2023 5:05 PM] tux_linux
then we can showcase it later


[6/17/2023 5:05 PM] szybet
Its good


[6/17/2023 5:05 PM] tux_linux
do you want that i show it or not


[6/17/2023 5:05 PM] szybet
Nah, the one now is fine


[6/17/2023 5:05 PM] tux_linux
ok


[6/17/2023 5:05 PM] tux_linux
well, then your list is
1. maps
2. conway


[6/17/2023 5:06 PM] tux_linux
i might showcase 2048 but it will last like 30s


[6/17/2023 5:06 PM] tux_linux
try to make 2-2.5m/app


[6/17/2023 5:06 PM] tux_linux
because all user apps will be around 12min alone?


[6/17/2023 5:08 PM] tux_linux
i am compressing the image


[6/17/2023 5:09 PM] tux_linux
it's uploading


[6/17/2023 5:12 PM] tux_linux
nvm i forgot to push things


[6/17/2023 5:39 PM] tux_linux
uploading again


[6/17/2023 5:46 PM] tux_linux
done, it's uploaded


[6/17/2023 5:47 PM] szybet
👍


[6/17/2023 5:56 PM] kuratius
@andi What did you mean by this?
https://discord.com/channels/809205711778480158/958419944243089479/1118992329081098311

I don't see how bt keyboard + pinenote relate.


[6/17/2023 5:58 PM] szybet
added to todo: Info about kobo nia c and a - a wiki page


[6/17/2023 6:00 PM] tux_linux
ok


[6/17/2023 6:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230617_181744-19CB6.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_181730-7DAD0.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_181722-C27C4.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_181716-43723.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_181659-06A5C.jpg


[6/17/2023 6:18 PM] szybet
how did you tested it?


[6/17/2023 6:19 PM] tux_linux
well some don't display


[6/17/2023 6:19 PM] tux_linux
corrupted maybe?


[6/17/2023 6:19 PM] szybet
only images dont display


[6/17/2023 6:20 PM] szybet
if cover is not available, then it isint


[6/17/2023 6:20 PM] szybet
but still


[6/17/2023 6:20 PM] szybet
sizes differ


[6/17/2023 6:20 PM] tux_linux
no, i have seen some images display


[6/17/2023 6:20 PM] tux_linux
well i don't know what to do and we have done everything we could


[6/17/2023 6:21 PM] szybet
also the margins between books is too big, it pushes the buttons on the bottom a bit


[6/17/2023 6:21 PM] tux_linux
can you take a full picture of the screen?


[6/17/2023 6:21 PM] tux_linux
this is because we changed dpi for nia recently and didn't adjust book cover size


[6/17/2023 6:22 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D0E9E.png


[6/17/2023 6:22 PM] szybet
doesnt work at all


[6/17/2023 6:22 PM] szybet
look at it


[6/17/2023 6:23 PM] tux_linux
hm we should have stuck with .t


[6/17/2023 6:23 PM] tux_linux
i will try mogrify


[6/17/2023 6:23 PM] tux_linux
%$#^W#%E


[6/17/2023 6:23 PM] szybet
it didn't worked at all


[6/17/2023 6:24 PM] tux_linux
try my commit


[6/17/2023 6:25 PM] szybet
i have to root the device first


[6/17/2023 6:25 PM] szybet
maybe you will be faster


[6/17/2023 6:25 PM] tux_linux
?!


[6/17/2023 6:25 PM] tux_linux
i sent you a root image


[6/17/2023 6:26 PM] szybet
OH


[6/17/2023 6:26 PM] szybet
xd


[6/17/2023 6:27 PM] szybet
can you also look into the margins or smth? you see its too much


[6/17/2023 6:28 PM] tux_linux
the margins are fine


[6/17/2023 6:28 PM] tux_linux
also I asked for a complete screenshot


[6/17/2023 6:28 PM] tux_linux
the problem is probably the cover size


[6/17/2023 6:28 PM] tux_linux
it needs to be changed


[6/17/2023 6:28 PM] tux_linux
because the nia dpi is not the same as other 768x1024 devices


[6/17/2023 6:29 PM] szybet
https://lib.rs/crates/image-tool

{Embed}
https://lib.rs/crates/image-tool
image-tool — Rust application
A simple mass image manipulation commandline tool for resizing and converting format. This tool is specifically designed to for performing conversion on large amount of images with different formats efficienctly.
/mnt/data/projects/git/conversations/media/crates-logo-D1F96.png


[6/17/2023 6:29 PM] szybet
fucking go


[6/17/2023 6:29 PM] szybet
do you want that?


[6/17/2023 6:29 PM] tux_linux
can you try my commit before?


[6/17/2023 6:30 PM] szybet
you can change it before i try the commit maybe


[6/17/2023 6:31 PM] tux_linux
i am already dealing with other problems


[6/17/2023 6:31 PM] szybet
but it propably needs inkbox bin modify?


[6/17/2023 6:31 PM] tux_linux
i forgot to hide night mode checkbox for kt and libra in oobe


[6/17/2023 6:31 PM] szybet
okay, sounds easy


[6/17/2023 6:31 PM] tux_linux
not the mogrify one


[6/17/2023 6:31 PM] tux_linux
yes but it needs to be done


[6/17/2023 6:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230617_183522-4173C.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_183512-0967E.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_183506-A06A6.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_183500-98885.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_183453-A14E1.jpg


[6/17/2023 6:36 PM] tux_linux
ok it is the cover size


[6/17/2023 6:36 PM] tux_linux
did you try the commit?


[6/17/2023 6:36 PM] szybet
i;m now


[6/17/2023 6:36 PM] tux_linux
ok


[6/17/2023 6:39 PM] tux_linux
in locallibrarywidget.cpp, **create a new else if clause for nia** and change the selected variables to a higher value, maybe 9. If it works try to get as close as possible to the minimum value you can put, while comparing the bottom of the screen:
1) restart inkbox, home page, check the bottom of the screen
2) click on library, **if anything moves there** it means the value is too low

{Attachments}
/mnt/data/projects/git/conversations/media/image-FD727.png


[6/17/2023 6:40 PM] szybet
okay


[6/17/2023 6:40 PM] tux_linux
but maybe it is better to do that once you have the same cover sizes


[6/17/2023 6:40 PM] tux_linux
both vertically and horizontally


[6/17/2023 6:40 PM] szybet
ye...


[6/17/2023 6:40 PM] tux_linux
did it work?


[6/17/2023 6:43 PM] szybet
nope


[6/17/2023 6:44 PM] tux_linux
good
switch to image-tool thing
try to... get it done fast?
if possible


[6/17/2023 6:45 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[6/17/2023 6:48 PM] the.mightydill
so you want a release name for 2.0?


[6/17/2023 6:48 PM] the.mightydill
or a logo


[6/17/2023 6:48 PM] szybet
both


[6/17/2023 6:49 PM] tux_linux
release name
logo may be made by my sister


[6/17/2023 6:49 PM] the.mightydill
idk about a logo i could ask craiyon but that would be cheating


[6/17/2023 6:49 PM] the.mightydill
oh thats nice


[6/17/2023 6:49 PM] the.mightydill
okay


[6/17/2023 6:49 PM] the.mightydill
so what are all the features or changes in 2.0?


[6/17/2023 7:00 PM] tux_linux
@dill

{Reactions}
👍 

[6/17/2023 7:01 PM] szybet
rust tool doesnt work


[6/17/2023 7:01 PM] szybet
;-;


[6/17/2023 7:01 PM] tux_linux
nice


[6/17/2023 7:01 PM] szybet
it makes the files byte 0


[6/17/2023 7:02 PM] tux_linux
what if you revert to old commit with only one !


[6/17/2023 7:02 PM] szybet
it will be the same


[6/17/2023 7:02 PM] tux_linux
are the thumbnails at least resized


[6/17/2023 7:03 PM] tux_linux
um sorry


[6/17/2023 7:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-92E82.png


[6/17/2023 7:04 PM] szybet
what is your command to check it


[6/17/2023 7:04 PM] tux_linux
same one?


[6/17/2023 7:04 PM] tux_linux
what does fbink -e yield for you


[6/17/2023 7:05 PM] szybet
```
kobo:~# fbink -e
FBINK_VERSION='v1.23.1-34-g3577ce7 for Kobo';viewWidth=758;viewHeight=1024;screenWidth=758;screenHeight=1024;viewHoriOrigin=0;viewVertOrigin=0;viewVertOffset=0;DPI=212;BPP=8;lineLength=768;F 
```


[6/17/2023 7:05 PM] tux_linux
well ok seems fine


[6/17/2023 7:09 PM] szybet
what books


[6/17/2023 7:09 PM] tux_linux
your books


[6/17/2023 7:09 PM] tux_linux
this was with convert


[6/17/2023 7:09 PM] tux_linux
i am trying with mogrify now


[6/17/2023 7:09 PM] tux_linux
such a strange name


[6/17/2023 7:10 PM] tux_linux
mogrify doesn't work *at all*


[6/17/2023 7:10 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-FCC32.png


[6/17/2023 7:10 PM] tux_linux
so convert is the way


[6/17/2023 7:10 PM] szybet
yep


[6/17/2023 7:10 PM] tux_linux
at least for now


[6/17/2023 7:10 PM] szybet
i will rever too


[6/17/2023 7:10 PM] tux_linux
i will push the older commit


[6/17/2023 7:13 PM] szybet
19:12 szybet@hyperbookszyb /mnt/kobo/data/onboard/.thumbnails
% identify -format "%wx%h\n" *
108x146
109x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146
108x146


[6/17/2023 7:13 PM] tux_linux
done


[6/17/2023 7:13 PM] szybet
it does work


[6/17/2023 7:13 PM] szybet
but


[6/17/2023 7:13 PM] szybet
dnskajndkjsandkjsanfdshjfgbnvadsiufjnuio!


[6/17/2023 7:13 PM] tux_linux
yes
whatever


[6/17/2023 7:13 PM] tux_linux
did you look into scaling factors?


[6/17/2023 7:13 PM] tux_linux
/dividers


[6/17/2023 7:14 PM] szybet
no yet


[6/17/2023 7:14 PM] szybet
not whatevwer


[6/17/2023 7:14 PM] tux_linux
ok
submit patch or pr when done


[6/17/2023 7:14 PM] tux_linux
thanks


[6/17/2023 7:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5B31C.png


[6/17/2023 7:15 PM] tux_linux
yes?


[6/17/2023 7:15 PM] tux_linux
it adds a white border?


[6/17/2023 7:17 PM] szybet
its only this one book


[6/17/2023 7:17 PM] szybet
i think its in the inside


[6/17/2023 7:17 PM] szybet
of the book


[6/17/2023 7:17 PM] szybet
like that..


[6/17/2023 7:17 PM] tux_linux
well at least it's the right size


[6/17/2023 7:17 PM] szybet
i hate it


[6/17/2023 7:17 PM] szybet
the book


[6/17/2023 7:21 PM] tux_linux
did you know that ipd treats oobe the same way as inkbox-bin?
```
Sun Feb 22 15:43:46 1970 | appsFreeze: Looking for process matching 'inkbox-bin' string
Sun Feb 22 15:43:46 1970 | appsFreeze: Found PID of inkbox-bin: 2704 in line: /mnt/onboard/.adds/inkbox/oobe-inkbox-bin
```


[6/17/2023 7:21 PM] tux_linux
because of string match


[6/17/2023 7:22 PM] szybet
it doesnt matter and its bad


[6/17/2023 7:22 PM] tux_linux
yes exactly


[6/17/2023 7:22 PM] szybet
and we dont care


[6/17/2023 7:22 PM] tux_linux
add to 2.1 todo


[6/17/2023 7:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-DCFC5.png


[6/17/2023 7:29 PM] szybet
nope


[6/17/2023 7:30 PM] tux_linux
nope for what


[6/17/2023 7:30 PM] szybet
aspect ratio


[6/17/2023 7:30 PM] tux_linux
hm


[6/17/2023 7:30 PM] szybet
deleted


[6/17/2023 7:31 PM] tux_linux
does it still work


[6/17/2023 7:41 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230617_194013-24AF8.jpg
/mnt/data/projects/git/conversations/media/IMG_20230617_194019-AED83.jpg


[6/17/2023 7:41 PM] szybet
is good


[6/17/2023 7:42 PM] tux_linux
no


[6/17/2023 7:42 PM] tux_linux
it went down a little bit


[6/17/2023 7:42 PM] tux_linux
look closely


[6/17/2023 7:42 PM] tux_linux
you're a few decimals away from the perfect divider


[6/17/2023 7:43 PM] szybet
i got a caliper to measure it


[6/17/2023 7:43 PM] tux_linux
well do that


[6/17/2023 7:43 PM] szybet
at launch the margin is 1.9 mm ( too much btw but i dont care)


[6/17/2023 7:44 PM] szybet
1.20


[6/17/2023 7:44 PM] szybet
mm


[6/17/2023 7:44 PM] szybet
can i dont care?


[6/17/2023 7:44 PM] szybet
its less than a mm


[6/17/2023 7:45 PM] tux_linux
no


[6/17/2023 7:45 PM] tux_linux
just try a slightly higher value
maybe .2 or .3 more


[6/17/2023 7:45 PM] tux_linux
and it should be fine


[6/17/2023 7:45 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[6/17/2023 7:45 PM] tux_linux
thanks


[6/17/2023 7:46 PM] szybet
do i need to unmount a mount bind when replacing file


[6/17/2023 7:46 PM] tux_linux
no


[6/17/2023 7:46 PM] tux_linux
thankfully


[6/17/2023 7:46 PM] szybet
very good


[6/17/2023 7:46 PM] tux_linux
i think


[6/17/2023 7:47 PM] tux_linux
do i start the video with reading a book or getting a book on gutenberg?


[6/17/2023 7:47 PM] szybet
as you want really


[6/17/2023 7:48 PM] tux_linux
ill get a book


[6/17/2023 7:49 PM] szybet
./inkbox: line 6: /mnt/onboard/.adds/inkbox/inkbox-bin: not found


[6/17/2023 7:49 PM] szybet
welp


[6/17/2023 7:49 PM] tux_linux
hm


[6/17/2023 7:49 PM] tux_linux
`rm /tmp/inkbox; wget 192.168.64.2:8000/inkbox -O /tmp/inkbox; chmod +x /tmp/inkbox; umount -l -f /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; mount --bind /tmp/inkbox /kobo/mnt/onboard/.adds/inkbox/inkbox-bin; killall inkbox-bin inkbox inkbox.sh; env QT_QPA_PLATFORM=kobo chroot /kobo /mnt/onboard/.adds/inkbox/inkbox.sh`
start a python http server in your build folder and run this


[6/17/2023 7:49 PM] tux_linux
from rootfs


[6/17/2023 7:50 PM] szybet
it removed the file in gui bundle


[6/17/2023 7:50 PM] tux_linux
wh
what


[6/17/2023 7:50 PM] szybet
```
kobo:/# ls /mnt/onboard/.adds/inkbox/
ls: /mnt/onboard/.adds/inkbox/inkbox-bin: No such file or directory
2048                           eink.qss                       inkbox.sh                      oobe-inkbox                    qreversi                       split-txt.py
2048-bin                       epub.sh                        install_developer-key.sh       oobe-inkbox-bin                qreversi-bin                   split.sh
AUTHORS                        explore_local_library.sh       launch_user_application.sh     pdf_get_total_pages_number.sh  remount_tmpfs_launch.sh        system
LICENSE                        find_epub_metadata.sh          lockscreen                     qalculate                      reset-config.sh                test_ping.sh
dictionary                     inkbox                         lockscreen-bin                 qalculate-bin                  splash.sh                      wake.sh

```


[6/17/2023 7:50 PM] tux_linux
strange


[6/17/2023 7:51 PM] tux_linux
`restart inkbox_gui` and run my fireproof command


[6/17/2023 7:51 PM] szybet
umount it


[6/17/2023 7:51 PM] szybet
and its fine


[6/17/2023 7:51 PM] tux_linux
aura se started doing this too
will fix it once you push your changes
take your time


[6/17/2023 7:52 PM] szybet
doing what


[6/17/2023 7:52 PM] tux_linux
screen overflow


[6/17/2023 7:52 PM] tux_linux
also it likes to segfault with wifi too


[6/17/2023 7:52 PM] szybet
well now that we have proper sizes of thumbnails


[6/17/2023 7:52 PM] szybet
wifi works for me...


[6/17/2023 7:52 PM] tux_linux
but only sometimes


[6/17/2023 7:52 PM] tux_linux
thankfully inkbox-bin restarts itself so it's not that bad


[6/17/2023 7:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230617_195149-FFFB5.jpg


[6/17/2023 7:53 PM] szybet
did it now move?


[6/17/2023 7:54 PM] tux_linux
it's fine


[6/17/2023 7:54 PM] tux_linux
push it


[6/17/2023 7:54 PM] tux_linux
well, patch


[6/17/2023 7:54 PM] tux_linux
or pr


[6/17/2023 7:54 PM] tux_linux
maybe a patch
i will apply it with my fixes for aura se


[6/17/2023 7:54 PM] tux_linux
maybe aura se and nia have the same values


[6/17/2023 7:56 PM] szybet
folders dont have a limit on size text at all


[6/17/2023 7:56 PM] szybet
will fix it


[6/17/2023 7:56 PM] tux_linux
oh no


[6/17/2023 7:57 PM] tux_linux
please take the existing values


[6/17/2023 7:57 PM] szybet
otherwise they work


[6/17/2023 7:57 PM] szybet
yep


[6/17/2023 7:57 PM] tux_linux
`bookTitleTruncateThreshold`


[6/17/2023 7:57 PM] szybet
i know i modified it for the nia


[6/17/2023 7:57 PM] tux_linux
good


[6/17/2023 7:58 PM] tux_linux
what dividers did you set for nia?


[6/17/2023 7:58 PM] szybet
?


[6/17/2023 7:58 PM] tux_linux
stdIconWidthDivider


[6/17/2023 7:58 PM] tux_linux
stdIconHeightDivider


[6/17/2023 7:59 PM] tux_linux
what are those


[6/17/2023 7:59 PM] szybet
9.1


[6/17/2023 7:59 PM] tux_linux
ok


[6/17/2023 7:59 PM] tux_linux
will try them on aura se


[6/17/2023 8:00 PM] szybet
oh fuck.......


[6/17/2023 8:00 PM] szybet
the open folder relies of full name in the text


[6/17/2023 8:01 PM] tux_linux
well don't mind it


[6/17/2023 8:01 PM] szybet
i do


[6/17/2023 8:01 PM] szybet
my library won't work


[6/17/2023 8:01 PM] tux_linux
folder with long names are not a good idea in general life


[6/17/2023 8:01 PM] szybet
just the series


[6/17/2023 8:01 PM] tux_linux
do like i did with book buttons then?


[6/17/2023 8:01 PM] szybet
of the book


[6/17/2023 8:02 PM] szybet
book id


[6/17/2023 8:02 PM] tux_linux
yes this thing


[6/17/2023 8:02 PM] szybet
it would need modification in the database


[6/17/2023 8:02 PM] szybet
hell no


[6/17/2023 8:02 PM] tux_linux
then what


[6/17/2023 8:02 PM] tux_linux
you can't set a property for a button?


[6/17/2023 8:02 PM] szybet
im thinking of that


[6/17/2023 8:02 PM] szybet
or hidden html code


[6/17/2023 8:03 PM] tux_linux
i know


[6/17/2023 8:03 PM] tux_linux
look in qtooltiplabel


[6/17/2023 8:03 PM] tux_linux
set the button's object name to the full folder name


[6/17/2023 8:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-D2A45.png


[6/17/2023 8:04 PM] szybet
https://youtu.be/dfHrXsGJ8mo

{Embed}
Shaun's Shitposts
https://www.youtube.com/watch?v=dfHrXsGJ8mo
Team Fortress 2 - Dear God
THERE'S MORE
/mnt/data/projects/git/conversations/media/maxresdefault-70B4B.jpg


[6/17/2023 8:04 PM] tux_linux
then you retrieve it


[6/17/2023 8:04 PM] szybet
brilliant exactly that


[6/17/2023 8:04 PM] tux_linux
well, good


[6/17/2023 8:05 PM] tux_linux
you can move n236 to your if clause in dividers


[6/17/2023 8:05 PM] tux_linux
it can have the same values


[6/17/2023 8:05 PM] tux_linux
thanks


[6/17/2023 8:06 PM] szybet
okay


[6/17/2023 8:23 PM] szybet
something doesnt work


[6/17/2023 8:23 PM] szybet
it will take more time


[6/17/2023 8:23 PM] tux_linux
Ok


[6/17/2023 8:24 PM] szybet
https://inkbox.ddns.net/wiki/index.php?title=Special:AllPages

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Special:AllPages
Index.php


[6/17/2023 8:24 PM] szybet
really


[6/17/2023 8:25 PM] tux_linux
i dont have time for everything


[6/17/2023 8:25 PM] szybet
i added it for todo


[6/17/2023 8:26 PM] tux_linux
good


[6/17/2023 8:26 PM] tux_linux
what doesn't work


[6/17/2023 8:54 PM] szybet
i changed almost nothing and nothing works


[6/17/2023 8:54 PM] tux_linux
good luck


[6/17/2023 9:26 PM] szybet
done...


[6/17/2023 9:26 PM] szybet
object name fucked over the whole library


[6/17/2023 9:26 PM] szybet
like really, i'm not swearing without a reason here


[6/17/2023 9:27 PM] szybet
it looked like half the code was not executed, and the screen didn't matched the logs


[6/17/2023 9:33 PM] kuratius
https://wiki.postmarketos.org/wiki/PINE64_PineNote_(pine64-pinenote)

@andi Apparently there is already a pmOS port for the pinenote

{Embed}
https://wiki.postmarketos.org/wiki/PINE64_PineNote_(pine64-pinenote)
PINE64 PineNote (pine64-pinenote)


[6/17/2023 9:33 PM] szybet
um then


[6/17/2023 9:33 PM] szybet
no problem doing inkbox on it propably


[6/18/2023 12:30 AM] kuratius
I was looking at the inkbox repo and noticed it doesnt have a makefile


[6/18/2023 12:30 AM] kuratius
or a cmakelists.txt


[6/18/2023 12:30 AM] kuratius
what build system do you use?


[6/18/2023 12:33 AM] tux_linux
qmake


[6/18/2023 12:33 AM] tux_linux
It creates a makefile when run


[6/18/2023 12:33 AM] szybet
qmake is cool for small projects


[6/18/2023 12:33 AM] szybet
easiest to use


[6/18/2023 12:33 AM] szybet
qt creator manages everything


[6/18/2023 12:34 AM] tux_linux
So um... we're finished with code now?


[6/18/2023 12:35 AM] szybet
yes


[6/18/2023 12:35 AM] tux_linux
Great?


[6/18/2023 12:35 AM] szybet
yes


[6/18/2023 12:35 AM] tux_linux
Did you record a bit or not?


[6/18/2023 12:35 AM] szybet
i will now


[6/18/2023 12:35 AM] szybet
i was watching top gear - they had a tour in poland

{Reactions}
👍 

[6/18/2023 12:36 AM] tux_linux
Ok no pressure
I went to a church in Montreal to play for a mass


[6/18/2023 12:36 AM] tux_linux
So did pretty much nothing InkBox related in last two hours


[6/18/2023 12:36 AM] szybet
good


[6/18/2023 12:36 AM] szybet
breaks are important


[6/18/2023 12:37 AM] tux_linux
Yes


[6/18/2023 12:37 AM] tux_linux
Can you look at the changelog and see again if anything needs to be added?


[6/18/2023 12:38 AM] tux_linux
Here


[6/18/2023 12:38 AM] szybet
4 days of bug fixes and edge cases handling


[6/18/2023 12:38 AM] tux_linux
...yes


[6/18/2023 12:38 AM] szybet
really just add this line


[6/18/2023 12:39 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5FBE9.png


[6/18/2023 12:39 AM] szybet
you can prepare the FINAL kobo nia image


[6/18/2023 12:40 AM] szybet
also this, low effort


[6/18/2023 12:44 AM] tux_linux
Ok I will do


[6/18/2023 12:44 AM] szybet
i mean in the downloads page or smth


[6/18/2023 12:45 AM] tux_linux
I need to check if Glo is affected by screen overflow thing
If not I will release


[6/18/2023 12:45 AM] kuratius
is this correct?
```
Building:
sudo apt install qtcreator
sudo apt install qtbase5-dev
sudo apt install qt5-qmake
(insert appropriate compiler toolchain?)
mkdir build 
cd build
qmake ..
make
```
? probably add compile options so that the cross toolchain gets used? or does qmake handle that?


[6/18/2023 12:45 AM] tux_linux
y e s


[6/18/2023 12:45 AM] kuratius
also probably add something like it to the readme


[6/18/2023 12:45 AM] tux_linux
Pretty much yes


[6/18/2023 12:45 AM] szybet
use the toolchains qmake


[6/18/2023 12:45 AM] tux_linux
But qmake is from a toolchain


[6/18/2023 12:46 AM] tux_linux
You compile it yourself


[6/18/2023 12:46 AM] szybet
its not okular that needs 70 libraries, also people could just ask. they won't figure out how to run inkbox anyways


[6/18/2023 12:46 AM] tux_linux
Szybet has instructions for that


[6/18/2023 12:46 AM] kuratius
if all else fails I have a pi4 and an sd card with 32 bit ubuntu so I can do native compiles


[6/18/2023 12:47 AM] szybet
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/qt-setup.md


[6/18/2023 12:47 AM] kuratius
I will make a pull request


[6/18/2023 12:47 AM] szybet
https://github.com/Szybet/niAudio/tree/main/apps-on-kobo


[6/18/2023 12:47 AM] kuratius
this is a threat


[6/18/2023 12:47 AM] tux_linux
Yes, I sometimes use native hardware when cross compiling is too much of a pita


[6/18/2023 12:48 AM] tux_linux
Or qemu w/ binfmt-misc


[6/18/2023 12:48 AM] szybet
you won't be able to figure out how to run inkbox on inkbox os at least by yourself anyway...


[6/18/2023 12:48 AM] szybet
guides, docs could be made


[6/18/2023 12:48 AM] szybet
but for who


[6/18/2023 12:48 AM] szybet
@developers


[6/18/2023 12:48 AM] szybet
kek


[6/18/2023 12:49 AM] kuratius
right now I'm thinking it compiles->usable binary-> could run on pmOS


[6/18/2023 12:49 AM] kuratius
possibly


[6/18/2023 12:49 AM] tux_linux
Nooooo


[6/18/2023 12:49 AM] szybet
i promise you nothing will work


[6/18/2023 12:49 AM] szybet
:D


[6/18/2023 12:49 AM] tux_linux
It will fail in horrible ways


[6/18/2023 12:49 AM] kuratius
lol


[6/18/2023 12:49 AM] tux_linux
You could try a chroot it would already be better
But LOTS of work to make an hybrid kernel/initrd for the two OSes at once


[6/18/2023 12:50 AM] tux_linux
InkBox depends on InkBox OS
Everything is connected


[6/18/2023 12:50 AM] kuratius
sir


[6/18/2023 12:50 AM] kuratius
I just ran inkbox on my laptop


[6/18/2023 12:50 AM] tux_linux
It's like if I were to cut the head of someone


[6/18/2023 12:50 AM] tux_linux
Yes, it's called an emulator?


[6/18/2023 12:50 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-0B793.png


[6/18/2023 12:51 AM] kuratius
does it default to an emulator if you compile it?


[6/18/2023 12:51 AM] szybet
try anything


[6/18/2023 12:51 AM] szybet
those quotes are still a thing?


[6/18/2023 12:51 AM] tux_linux
Also even if you compile it on desktop problems start to appear very fast


[6/18/2023 12:51 AM] tux_linux
Yes
They work


[6/18/2023 12:51 AM] szybet
i ever used them


[6/18/2023 12:51 AM] kuratius
so... some buttons work and I can enter some menus


[6/18/2023 12:51 AM] kuratius
and then it crashed


[6/18/2023 12:51 AM] kuratius
xD


[6/18/2023 12:51 AM] szybet
redesign for 2.1


[6/18/2023 12:52 AM] tux_linux
Yes, maybe a small one
More quotes


[6/18/2023 12:52 AM] szybet
no


[6/18/2023 12:52 AM] szybet
modular quotes


[6/18/2023 12:52 AM] tux_linux
Yes too


[6/18/2023 12:52 AM] tux_linux
Can you see if it overflows the screen on Nia?


[6/18/2023 12:52 AM] tux_linux
Just enable it quick in settings


[6/18/2023 12:53 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-6AA7C.png


[6/18/2023 12:53 AM] tux_linux
If it does it is just a matter of changing some ints


[6/18/2023 12:53 AM] tux_linux
Yes, now try to read a book


[6/18/2023 12:54 AM] szybet
where is the list of what i needed to record


[6/18/2023 12:54 AM] tux_linux
.


[6/18/2023 12:54 AM] szybet
yep, like ipd was running


[6/18/2023 12:54 AM] tux_linux
Please


[6/18/2023 12:54 AM] szybet
so only conway?


[6/18/2023 12:54 AM] tux_linux
And maps


[6/18/2023 12:55 AM] tux_linux
Because new ui


[6/18/2023 12:55 AM] szybet
oh ok


[6/18/2023 12:56 AM] szybet
also about pm os: apart from tinkering, `why`


[6/18/2023 12:56 AM] szybet
inkbox is half usable, and the second system is emerging


[6/18/2023 12:56 AM] szybet
eink compatible apps wont spawn from nothing


[6/18/2023 12:56 AM] tux_linux
3/4 usable


[6/18/2023 12:57 AM] szybet
i dont see any sense for splitting the work here


[6/18/2023 12:58 AM] szybet
does work


[6/18/2023 12:58 AM] szybet
is good


[6/18/2023 12:58 AM] tux_linux
Thanks


[6/18/2023 12:58 AM] szybet
won't use it

{Reactions}
👍 

[6/18/2023 1:01 AM] szybet
so tommorow ( for me today ) 2.0 is released?


[6/18/2023 1:03 AM] tux_linux
Yes
But not video


[6/18/2023 1:03 AM] szybet
nooo


[6/18/2023 1:03 AM] szybet
with video


[6/18/2023 1:03 AM] tux_linux
Well, late tomorrow


[6/18/2023 1:03 AM] szybet
dont post it on social media without the video


[6/18/2023 1:03 AM] szybet
pointless otherwise


[6/18/2023 1:03 AM] szybet
only on github


[6/18/2023 1:03 AM] tux_linux
No I would have waited anyway


[6/18/2023 1:03 AM] szybet
what


[6/18/2023 1:04 AM] tux_linux
For announcing it


[6/18/2023 1:04 AM] kuratius
I have nothing to do and wanted to see how far I'd get


[6/18/2023 1:05 AM] kuratius
this is farther than I expected already


[6/18/2023 1:05 AM] kuratius
I didnt expect it to launch correctly either


[6/18/2023 1:05 AM] kuratius
the fact that it's not functional for most things may be primarily an environment issue


[6/18/2023 1:06 AM] szybet
yes, everything is missing


[6/18/2023 1:06 AM] szybet
ipd, tools, paths, services


[6/18/2023 1:07 AM] kuratius
also do you use fbink internally?


[6/18/2023 1:07 AM] szybet
qt uses it


[6/18/2023 1:07 AM] szybet
we sometimes for other things


[6/18/2023 1:07 AM] szybet
its almost everywhere


[6/18/2023 1:08 AM] kuratius
might be cool to make a list of paths and services that are expected


[6/18/2023 1:09 AM] kuratius
then fixing that would just be doing a checklist


[6/18/2023 1:09 AM] tux_linux
Too much is missing


[6/18/2023 1:09 AM] szybet
we could do many things


[6/18/2023 1:09 AM] tux_linux
Study the code


[6/18/2023 1:09 AM] szybet
but for who? why?


[6/18/2023 1:09 AM] tux_linux
You will understand


[6/18/2023 1:09 AM] szybet
everything in inkbox os


[6/18/2023 1:10 AM] szybet
pointless i think


[6/18/2023 1:10 AM] kuratius
eventually you'd get to the point where the reader can be used as a standalone application


[6/18/2023 1:10 AM] szybet
why would you do that


[6/18/2023 1:11 AM] tux_linux
Also our reader is terrible atm so I doubt anyone would want that compared to other better readers


[6/18/2023 1:11 AM] szybet
we won't be as good as koreader ever


[6/18/2023 1:11 AM] szybet
for 99%


[6/18/2023 1:11 AM] kuratius
robust, reusable software isnt a bad thing


[6/18/2023 1:12 AM] szybet
the point of inkbox is not the app, its the open source operating system, hackability, dev envirovement


[6/18/2023 1:13 AM] szybet
i dont want to be harsh but you are trying in methafore to compile arch pacman for debian - it will work but whats the point? just install arch


[6/18/2023 1:17 AM] kuratius
The idea I had was to see if I could get any graphical software on the pmOS install to run while avoiding the ~120MB bloat that is xfce because that only leaves like 10 MB for user applications on the nia after the kernel is factored in
inkbox was a good candidate as it would provide a graphical user interface and a way to launch applications, i.e. an xfce replacement
I havent tried on the nia itself yet, but I imagine inkbox is probably more efficient than xfce


[6/18/2023 1:17 AM] kuratius
I guess technically I could try to see if plato or any other reader will work, but this was the closest at hand


[6/18/2023 1:18 AM] kuratius
anyway, sorry for derailing


[6/18/2023 1:18 AM] tux_linux
InkBox alone is probably more than 200m?


[6/18/2023 1:18 AM] tux_linux
But I understand


[6/18/2023 1:19 AM] tux_linux
Plato is probably better at this point


[6/18/2023 1:19 AM] kuratius
szybte said it's ~40MB


[6/18/2023 1:19 AM] kuratius
I think


[6/18/2023 1:19 AM] szybet
@tux-linux knows it - i'm bad in english to being polite while arguing - to much reddit i quess


[6/18/2023 1:19 AM] kuratius
at least in ram usage


[6/18/2023 1:19 AM] tux_linux
Well..
That's without mupdf, everything behind


[6/18/2023 1:19 AM] szybet
what hell no


[6/18/2023 1:19 AM] szybet
what hell no


[6/18/2023 1:20 AM] tux_linux
o k


[6/18/2023 1:20 AM] szybet
i forgot to answer you


[6/18/2023 1:21 AM] kuratius
https://discord.com/channels/809205711778480158/809205711778480162/1116751031422943363


[6/18/2023 1:21 AM] szybet
its only for inkbox


[6/18/2023 1:21 AM] szybet
not rest of the system


[6/18/2023 1:21 AM] tux_linux
Mupdf is 30mb


[6/18/2023 1:21 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-39325.png


[6/18/2023 1:21 AM] tux_linux
Alone


[6/18/2023 1:21 AM] szybet
ram usage


[6/18/2023 1:21 AM] tux_linux
Too much


[6/18/2023 1:21 AM] szybet
mupdf run for 20 secons and is gone


[6/18/2023 1:21 AM] tux_linux
Yes


[6/18/2023 1:22 AM] szybet
so dont count it?


[6/18/2023 1:22 AM] szybet
```
kobo:~# free -h
              total        used        free      shared  buff/cache   available
Mem:         244.5M      105.8M       13.0M      288.0K      125.8M      118.6M
Swap:             0           0           0
```


[6/18/2023 1:22 AM] tux_linux
It still weighs a lot


[6/18/2023 1:22 AM] tux_linux
Not in ram


[6/18/2023 1:24 AM] kuratius
```kobo-nia:~$ free -h
               total        used        free      shared  buff/cache   available
Mem:           239Mi        57Mi        74Mi       5.0Mi       120Mi       182Mi
Swap:             0B          0B          0B
kobo-nia:~$ ```

this is without any graphical interface, subtract ~120-160MB from the available space if running xfce


[6/18/2023 1:25 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0BA98.png


[6/18/2023 1:25 AM] kuratius
so probably inkbox is better than xfce


[6/18/2023 1:25 AM] szybet
inkbox is very baddly written imo, could do 20 Mb for sure, even less


[6/18/2023 1:25 AM] szybet
also inkbox exits when launching an app


[6/18/2023 1:25 AM] kuratius
that makes it preferable to xfce too


[6/18/2023 1:26 AM] kuratius
anyway, I dont know where this is supposed to go, ty for answering my questions

{Reactions}
👍 

[6/18/2023 1:26 AM] szybet
+ user apps take a bit of ram, it could be done that only at launch they are loaded - even less ram usage


[6/18/2023 1:27 AM] szybet
+ my system is rooted, so rootfs is writable, could use a bit of ram


[6/18/2023 1:27 AM] szybet
+ i have wifi on so wpa supplicant and all that stuff


[6/18/2023 1:27 AM] szybet
so yea lot of space for improvements


[6/18/2023 4:19 AM] tux_linux
is this a joke


[6/18/2023 4:19 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/ipd-B6961.log


[6/18/2023 4:19 AM] tux_linux
on mini


[6/18/2023 4:19 AM] tux_linux
waking up from sleep launches lockscreen but also unfreezes inkbox bin at the same time


[6/18/2023 4:20 AM] tux_linux
horrible


[6/18/2023 4:20 AM] tux_linux
😭


[6/18/2023 4:27 AM] tux_linux
```
Sat Jun 17 22:16:57 2023 | functions: Posix spawning /usr/local/bin/launch_lockscreen.sh
Sat Jun 17 22:16:57 2023 | functions: Spawning without errors
Sat Jun 17 22:16:57 2023 | functions: Spawned with PID: 1795
Sat Jun 17 22:16:57 2023 | functions: /tmp/savedBrightness is: 0
Sat Jun 17 22:16:57 2023 | appsFreeze: Looking for process matching 'lockscreen-bin' string
Sat Jun 17 22:16:57 2023 | appsFreeze: Couldn't find PID of lockscreen-bin
Sat Jun 17 22:16:57 2023 | afterSleep: Exiting; waiting for lockscreen
Sat Jun 17 22:16:57 2023 | fbinkFunctions: FBInk: Full screen refresh
Sat Jun 17 22:16:59 2023 | appsFreeze: Unfreezing process with PID 1741
```


[6/18/2023 4:27 AM] tux_linux
2 seconds
2 seconds


[6/18/2023 4:52 AM] tux_linux
i fixed it


[6/18/2023 4:53 AM] tux_linux
on older devices lockscreen is probably too slow to launch for ipd
maybe because of the overhead created by `/bin/sh` launch in the script
so I added an instruction for it to wait until it was started before continuing the `afterSleep` process


[6/18/2023 7:20 AM] tux_linux
done with this mess
let's hope nothing explodes
released on gh
will continue recording video tomorrow


[6/18/2023 7:22 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/releases/tag/2.0

{Embed}
https://github.com/Kobo-InkBox/inkbox/releases/tag/2.0
Release InkBox 2.0 · Kobo-InkBox/inkbox
Biggest release of InkBox OS ever. Yes, the time gap between 1.9 and 2.0 is huge, but we hope you will find that it was worth it.
Thanks to @Szybet for greatly contributing to the project, now for ...
/mnt/data/projects/git/conversations/media/2-2BFA1.0


[6/18/2023 7:31 AM] tux_linux
something has already exploded (thankfully not in gui)


[6/18/2023 7:32 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-4F649.png


[6/18/2023 7:32 AM] tux_linux
blank doesn't work on libra, despite `X11_START`, `X11_STARTED` and `EINK_BLANK` being true


[6/18/2023 7:32 AM] tux_linux
`Blank will be used` is never printed


[6/18/2023 7:33 AM] tux_linux
and `blankFlag` should be `EINK_BLANK`, not `X11_START` (typo?)


[6/18/2023 7:33 AM] tux_linux
and why if xorgFlag reads false you need to enable blank? it's the opposite


[6/18/2023 7:34 AM] tux_linux
i'm tired
no further debugging of ipd for me
good night


[6/18/2023 10:30 AM] szybet
i will fix blank


[6/18/2023 10:31 AM] szybet
yes, i know launching a qt app can take time, but here was the problem that chrooting into gui took more than 2 seconds


[6/18/2023 10:31 AM] szybet
lol


[6/18/2023 11:43 AM] szybet
I uploaded conway and maps video


[6/18/2023 11:43 AM] szybet
also, download those videos and remove them from the server


[6/18/2023 11:44 AM] szybet
also added to the todo, very important: download page and on github release - md5sums of the images to check


[6/18/2023 12:58 PM] szybet
i captured IPD freezing

{Attachments}
/mnt/data/projects/git/conversations/media/message-9CC72.txt


[6/18/2023 12:58 PM] szybet
seems like a rare mutex fault


[6/18/2023 12:58 PM] szybet
added more logs, hoping catching it one more time


[6/18/2023 2:09 PM] szybet
i think i found at least partially the reason IPD sometimes died


[6/18/2023 2:09 PM] szybet
it happens only on rooted devices with ssh active


[6/18/2023 2:10 PM] szybet
right? maybe?


[6/18/2023 2:11 PM] tux_linux
maybe
it died yesterday on libra
couldn't reproduce it


[6/18/2023 2:11 PM] szybet
was wifi on?


[6/18/2023 2:11 PM] tux_linux
yes


[6/18/2023 2:11 PM] szybet
ssh session?


[6/18/2023 2:12 PM] tux_linux
well, not an active one because it was not connected because of wakeup, but before sleep there were ssh sessions


[6/18/2023 2:12 PM] tux_linux
also had lockscreen enabled


[6/18/2023 2:12 PM] szybet
if there was at all - then thats it


[6/18/2023 2:12 PM] tux_linux
then what's the fix


[6/18/2023 2:14 PM] szybet
pushed it


[6/18/2023 2:14 PM] szybet
unclosed mutex


[6/18/2023 2:14 PM] szybet
but it would trigger only if ssh was active


[6/18/2023 2:14 PM] tux_linux
well, blank works
is it really necessary to print a log for it each 2s?


[6/18/2023 2:14 PM] tux_linux
i can see it in kernel buffer anyway


[6/18/2023 2:14 PM] szybet
for what


[6/18/2023 2:15 PM] szybet
blank?


[6/18/2023 2:15 PM] tux_linux
`[ 1778.406425] cyttsp5_i2c_adapter 1-0024: fb_notifier_callback: UNBLANK!`


[6/18/2023 2:15 PM] szybet
logs are for debugging, and it's my program mostly and i debug it mostly so... yes?


[6/18/2023 2:15 PM] szybet
i like logs


[6/18/2023 2:15 PM] szybet
debugger < logs


[6/18/2023 2:15 PM] tux_linux
yes but at this point it is a bit too much
impedes readability


[6/18/2023 2:16 PM] tux_linux
+ I (and probably you) can check if blank is activated by checking dmesg


[6/18/2023 2:16 PM] szybet
because of blank spamming i realised watchdog was freezed


[6/18/2023 2:16 PM] szybet
it helped


[6/18/2023 2:16 PM] szybet
nope, ipd clears dmesg when going to sleep


[6/18/2023 2:16 PM] szybet
also that


[6/18/2023 2:17 PM] szybet
idk if you remember but dmesg is not reliable for data between sleeps


[6/18/2023 2:17 PM] tux_linux
well ok, but it prints the blank line every time you ioctl it


[6/18/2023 2:17 PM] szybet
i know cool


[6/18/2023 2:17 PM] szybet
still my point


[6/18/2023 2:17 PM] tux_linux
well can i comment it and leave it there?


[6/18/2023 2:18 PM] szybet
sure


[6/18/2023 2:19 PM] szybet
so now


[6/18/2023 2:19 PM] szybet
i'm waiting for the final nia image


[6/18/2023 2:20 PM] szybet
is there anythign for me to do?


[6/18/2023 2:20 PM] szybet
maybe the wiki page, but that can wait really after 2.0


[6/18/2023 2:20 PM] tux_linux
idk


[6/18/2023 2:23 PM] tux_linux
record more videos?
I have three masses today and most likely won't have time until 12pm-3pm and then 7pm-12am


[6/18/2023 2:23 PM] szybet
which ones


[6/18/2023 2:23 PM] szybet
i may record 2 more maybe


[6/18/2023 2:23 PM] tux_linux
wifi


[6/18/2023 2:24 PM] szybet
also wifi crashed once for me too


[6/18/2023 2:24 PM] tux_linux
ok


[6/18/2023 2:24 PM] szybet
propably wifi scan gives some bad results for some very specific results


[6/18/2023 2:26 PM] tux_linux
on imx507 devices almost always the first wifi scan says 'failed to get networks list'


[6/18/2023 2:26 PM] tux_linux
then you press refresh button and it works


[6/18/2023 2:26 PM] tux_linux
i didn't try to understand


[6/18/2023 2:27 PM] szybet
it also happens sometimes for the nia


[6/18/2023 2:27 PM] szybet
propably a bigger delay is needed because of wifi now not slowing down the whole system 😂

{Reactions}
👍 

[6/18/2023 2:27 PM] szybet
well, 2.1


[6/18/2023 2:57 PM] tux_linux
You can also record power daemon/sleep/lockscreen


[6/18/2023 2:57 PM] tux_linux
Thanks


[6/18/2023 4:01 PM] tux_linux
you want a final nia image?


[6/18/2023 4:36 PM] szybet
i want i want


[6/18/2023 4:36 PM] szybet
but i dont think i will be able to test it very much today


[6/18/2023 4:37 PM] tux_linux
ok


[6/18/2023 4:37 PM] tux_linux
np


[6/18/2023 4:37 PM] tux_linux
compressing it


[6/18/2023 4:37 PM] tux_linux
i added the wiki page


[6/18/2023 4:38 PM] szybet
ok, remember to link it next  to the nia install image


[6/18/2023 4:39 PM] tux_linux
install image?


[6/18/2023 4:39 PM] tux_linux
i linked to the github issue


[6/18/2023 4:40 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Kobo_Nia_models

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Kobo_Nia_models
Index.php


[6/18/2023 4:40 PM] szybet
next to the kobo nia image in download page


[6/18/2023 4:40 PM] szybet
add text "What is my kobo nia" or smth


[6/18/2023 4:40 PM] szybet
just somewhere


[6/18/2023 4:41 PM] tux_linux
oh ok


[6/18/2023 4:52 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/bundles/inkbox/native/n306/inkbox-2.0-n306.xz


[6/18/2023 4:52 PM] tux_linux
hopefully the last


[6/18/2023 5:08 PM] tux_linux
Do you think you will be able to make the videos today?


[6/18/2023 5:12 PM] szybet
i uploaded maps and conway a;ready


[6/18/2023 5:13 PM] szybet
i dont think i will be able more, but maybe


[6/18/2023 5:13 PM] szybet
*dont wait for me, just do it*


[6/18/2023 5:13 PM] szybet
also i'm dissapearing for at least 2 hours


[6/18/2023 5:13 PM] szybet
https://tenor.com/view/smoking-clouds-gif-15489070

{Embed}
https://tenor.com/view/smoking-clouds-gif-15489070
/mnt/data/projects/git/conversations/media/smoking-clouds-3C627.png


[6/18/2023 5:34 PM] tux_linux
Ok


[6/18/2023 6:26 PM] tux_linux
im dumb


[6/18/2023 6:26 PM] tux_linux
i uploaded the root image for nia


[6/18/2023 6:26 PM] tux_linux
well, do you want to download it or i can remove it and you test the std image after?


[6/18/2023 6:57 PM] tux_linux
I know remember what the 't' was for in epub thumbnails


[6/18/2023 6:58 PM] tux_linux
it permitted faster database generation when new books were added because it wouldn't convert the old thumbnails once again, which were not marked `.t`
^$%#@


[6/18/2023 7:08 PM] tux_linux
i will settle on a time-based approach which will check for recently added thumbnails just after epubtool has run and then convert them


[6/18/2023 7:10 PM] szybet
Sure

{Reactions}
👍 

[6/18/2023 7:10 PM] szybet
Image magick doesnt take that long


[6/18/2023 7:10 PM] tux_linux
yes


[6/18/2023 7:10 PM] szybet
I would prefer the normal one


[6/18/2023 7:11 PM] tux_linux
and a lot of unnecessary steps


[6/18/2023 7:11 PM] tux_linux
ok


[6/18/2023 7:17 PM] szybet
what filesystem is onboard


[6/18/2023 7:17 PM] szybet
not all support that


[6/18/2023 7:17 PM] tux_linux
fat


[6/18/2023 7:17 PM] szybet
um


[6/18/2023 7:17 PM] tux_linux
it supports it


[6/18/2023 7:17 PM] szybet
check it


[6/18/2023 7:17 PM] szybet
gogle


[6/18/2023 7:17 PM] szybet
okay


[6/18/2023 7:17 PM] tux_linux
i checked


[6/18/2023 7:17 PM] tux_linux
ls -l


[6/18/2023 7:37 PM] szybet
only wifi?


[6/18/2023 7:37 PM] tux_linux
well, with sleep and ipd
i was going to do them but if you want to you can


[6/18/2023 7:37 PM] szybet
wifi with sleep?


[6/18/2023 7:37 PM] tux_linux
maybe yes?


[6/18/2023 7:38 PM] szybet
okay


[6/18/2023 7:38 PM] tux_linux
but also wifi gui?


[6/18/2023 7:38 PM] tux_linux
also, your videos are a bit dim
it's fine but maybe for these ones you could ramp up the brightness of the screen a bit


[6/18/2023 7:38 PM] tux_linux
thanks


[6/18/2023 7:39 PM] szybet
um okay


[6/18/2023 7:40 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230618_174007999-D8448.jpg


[6/18/2023 7:40 PM] tux_linux
i made a giant todo list for myself


[6/18/2023 7:41 PM] szybet
cool


[6/18/2023 7:41 PM] tux_linux
well of course if you do sleep and wifi i wont do them


[6/18/2023 7:45 PM] szybet
i will do it


[6/18/2023 7:46 PM] tux_linux
thanks


[6/18/2023 7:59 PM] tux_linux
don't forget to show lockscreen when filming


[6/18/2023 8:01 PM] szybet
Can it be on seperate film?


[6/18/2023 8:01 PM] szybet
🥴


[6/18/2023 8:02 PM] tux_linux
wifi reconnection doesn't work on aura se either


[6/18/2023 8:02 PM] tux_linux
well ok


[6/18/2023 8:02 PM] szybet
Wifi and recconection on nia worked perfectly on the video


[6/18/2023 8:02 PM] tux_linux
and no logs to show you because i am on a device with a broken usb port


[6/18/2023 8:02 PM] tux_linux
?


[6/18/2023 8:02 PM] tux_linux
just said reconnection successful


[6/18/2023 8:02 PM] szybet
Wifi has logs in gui 🥴


[6/18/2023 8:02 PM] tux_linux
well nvm


[6/18/2023 8:02 PM] szybet
Hehe


[6/18/2023 8:02 PM] tux_linux
yes, but it wasn't doing anything
it seems


[6/18/2023 8:02 PM] tux_linux
idk


[6/18/2023 8:02 PM] tux_linux
well good that it works


[6/18/2023 8:03 PM] szybet
even my younger brother learned to repair micro usb ports


[6/18/2023 8:03 PM] szybet
So can you


[6/18/2023 8:07 PM] tux_linux
```
build@inkbox ~/D/i/rootfs (master)> git add -p
diff --git a/usr/local/bin/gutenberg/get_latest_books.sh b/usr/local/bin/gutenberg/get_latest_books.sh
index 83b9f2a..ac0d53e 100755
--- a/usr/local/bin/gutenberg/get_latest_books.sh
+++ b/usr/local/bin/gutenberg/get_latest_books.sh
@@ -6,7 +6,7 @@ calculate() {
 }
 
 eval $(fbink -e)
-coverSize="$(calculate ${viewWidth}/4)x$(calculate ${viewHeight}/4)"
+coverSize="$(calculate ${viewWidth}/4)!x$(calculate ${viewHeight}/4)!"
 
 mkdir -p /data/onboard/.inkbox/gutenberg-data && cd /data/onboard/.inkbox/gutenberg-data
 rm -rf /data/onboard/.inkbox/gutenberg-data/latest-books
(1/1) Stage this hunk [y,n,q,a,d,e,?]? y

build@inkbox ~/D/i/rootfs (master)> 
```
***yes***


[6/18/2023 8:07 PM] szybet
what


[6/18/2023 8:08 PM] tux_linux
i will add ! for thumbnails in gutenberg home page


[6/18/2023 8:08 PM] szybet
i didn't noticed they were out of order


[6/18/2023 8:08 PM] szybet
but i was there 3 times


[6/18/2023 8:08 PM] tux_linux
me neither


[6/18/2023 8:08 PM] tux_linux
safety measure


[6/18/2023 8:08 PM] szybet
once when i first ported inkbox
then on accident
and on saturday now


[6/18/2023 8:08 PM] szybet
XD


[6/18/2023 8:13 PM] tux_linux
do i show encrypted storage?


[6/18/2023 8:19 PM] szybet
no one tested it


[6/18/2023 8:19 PM] szybet
leave it


[6/18/2023 8:19 PM] szybet
please


[6/18/2023 8:19 PM] szybet
;3


[6/18/2023 8:30 PM] tux_linux
I did


[6/18/2023 8:30 PM] tux_linux
It Works


[6/18/2023 8:31 PM] szybet
woah


[6/18/2023 8:31 PM] szybet
incredible


[6/18/2023 8:31 PM] tux_linux
Used it yesterday


[6/18/2023 8:32 PM] szybet
then show it


[6/18/2023 8:32 PM] tux_linux
Ok


[6/18/2023 8:32 PM] szybet
i will upload wifi ipd lockscreen videos soon

{Reactions}
👍 

[6/18/2023 8:32 PM] szybet
im waiting for nia image


[6/18/2023 8:32 PM] szybet
also look at todo


[6/18/2023 8:33 PM] tux_linux
You did lockscreen?


[6/18/2023 8:33 PM] tux_linux
I thought I had to do it


[6/18/2023 8:33 PM] tux_linux
Well I didn't do it yet


[6/18/2023 8:33 PM] tux_linux
So good


[6/18/2023 8:34 PM] szybet
you said so i did

{Reactions}
👍 

[6/18/2023 8:35 PM] tux_linux
I am done with kobox


[6/18/2023 8:35 PM] tux_linux
And apps


[6/18/2023 8:35 PM] szybet
cool


[6/18/2023 8:36 PM] tux_linux
I just hope nothing is going to break when you test the std kernel


[6/18/2023 8:36 PM] szybet
we can just release the root images


[6/18/2023 8:36 PM] szybet
but yes


[6/18/2023 8:36 PM] szybet
idk what could break


[6/18/2023 8:36 PM] tux_linux
Things


[6/18/2023 8:36 PM] szybet
i neved, ever runned a non root kernel on the nia


[6/18/2023 8:37 PM] szybet
@testers :(


[6/18/2023 8:37 PM] tux_linux
The worst is that you can't debug it


[6/18/2023 8:37 PM] tux_linux
Because... std kernel


[6/18/2023 8:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/goldfish_headphone-C1DA7.mp4

{Reactions}
🥴 

[6/18/2023 8:42 PM] szybet
i uploaded the videos


[6/18/2023 8:42 PM] tux_linux
Thanks


[6/18/2023 9:34 PM] tux_linux
i will generate n306 std image now


[6/18/2023 9:37 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[6/18/2023 10:56 PM] szybet
https://tenor.com/view/xd-horses-gif-19635108

{Embed}
https://tenor.com/view/xd-horses-gif-19635108
/mnt/data/projects/git/conversations/media/xd-horses-481B5.png


[6/18/2023 10:57 PM] szybet
and what


[6/18/2023 11:06 PM] tux_linux
i got some issues


[6/18/2023 11:06 PM] tux_linux
restarting it now


[6/18/2023 11:18 PM] tux_linux
almost done making


[6/18/2023 11:18 PM] szybet
👍


[6/18/2023 11:21 PM] tux_linux
uploading


[6/18/2023 11:37 PM] tux_linux
done


[6/18/2023 11:37 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/bundles/inkbox/native/n306/inkbox-2.0-n306.xz


[6/19/2023 12:04 AM] tux_linux
... You still there?


[6/19/2023 12:04 AM] szybet
i was testing a bit


[6/19/2023 12:04 AM] tux_linux
Ok


[6/19/2023 12:04 AM] szybet
library launches the wrong book


[6/19/2023 12:04 AM] tux_linux
No


[6/19/2023 12:04 AM] tux_linux
No


[6/19/2023 12:04 AM] tux_linux
No


[6/19/2023 12:04 AM] tux_linux
No no


[6/19/2023 12:04 AM] tux_linux
When


[6/19/2023 12:04 AM] szybet
every time


[6/19/2023 12:04 AM] szybet
even book info shows the wrong one


[6/19/2023 12:04 AM] szybet
its shifted


[6/19/2023 12:05 AM] tux_linux
I tested it this morning


[6/19/2023 12:05 AM] tux_linux
It worked


[6/19/2023 12:06 AM] tux_linux
Which commit are you on


[6/19/2023 12:06 AM] szybet
your image???


[6/19/2023 12:06 AM] tux_linux
Then why is it working for me


[6/19/2023 12:07 AM] tux_linux
And you can't provide logs
Yea


[6/19/2023 12:07 AM] szybet
are you sure? try only my books


[6/19/2023 12:07 AM] tux_linux
Do you have folders enabled?


[6/19/2023 12:07 AM] szybet
no


[6/19/2023 12:08 AM] tux_linux
If you delete your books and put only 4 Gutenberg books
Does it still do it


[6/19/2023 12:09 AM] tux_linux
I will update Glo HD to latest commits possible


[6/19/2023 12:09 AM] szybet
i dont have time to test it


[6/19/2023 12:09 AM] tux_linux
Ok


[6/19/2023 12:09 AM] tux_linux
I Hate This


[6/19/2023 12:10 AM] szybet
i wont have tommorow too much time


[6/19/2023 12:10 AM] tux_linux
Ok


[6/19/2023 12:10 AM] tux_linux
Can you root it and at least provide logs if it still does it?


[6/19/2023 12:11 AM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/1c7fb23d0d171459fa0fe1640bd01f71c81d33aa/src/localLibrary/locallibrarywidget.cpp#L327

{Embed}
https://github.com/Kobo-InkBox/inkbox/blob/1c7fb23d0d171459fa0fe1640bd01f71c81d33aa/src/localLibrary/locallibrarywidget.cpp
inkbox/src/localLibrary/locallibrarywidget.cpp at 1c7fb23d0d171459f...
An open-source, Qt-based eBook reader for Kobos (and other devices). - inkbox/src/localLibrary/locallibrarywidget.cpp at 1c7fb23d0d171459fa0fe1640bd01f71c81d33aa · Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-3A415


[6/19/2023 12:11 AM] szybet
try here -2


[6/19/2023 12:11 AM] szybet
but propably wont work


[6/19/2023 12:11 AM] szybet
also you can delete the 2.0 tag, propably


[6/19/2023 12:11 AM] tux_linux
Yes


[6/19/2023 12:11 AM] tux_linux
I will update Glo HD first


[6/19/2023 12:12 AM] tux_linux
At least the rest of the system works?


[6/19/2023 12:12 AM] szybet
i uploaded books via usbms, thumbnails were good size


[6/19/2023 12:13 AM] tux_linux
Ok


[6/19/2023 12:13 AM] szybet
also this will be a easy fix: add in reboot and poweroff scripts to kill ipd


[6/19/2023 12:13 AM] tux_linux
It already does that


[6/19/2023 12:13 AM] szybet
i will, but nothing more


[6/19/2023 12:13 AM] tux_linux
Thanks


[6/19/2023 12:13 AM] szybet
oh okay


[6/19/2023 12:13 AM] szybet
¯\_(ツ)_/¯


[6/19/2023 12:17 AM] szybet
if we are able to fix this


[6/19/2023 12:17 AM] szybet
in less than an hour


[6/19/2023 12:17 AM] szybet
and you prepare a nia image


[6/19/2023 12:17 AM] szybet
i will be able to use the ereader tommorow, while on a trip


[6/19/2023 12:18 AM] szybet
and test it more


[6/19/2023 12:18 AM] szybet
now the nia is restorin


[6/19/2023 12:18 AM] szybet
i will be back in 15 minutes


[6/19/2023 12:21 AM] tux_linux
I must first find the problem


[6/19/2023 12:23 AM] tux_linux
It works for me 😶


[6/19/2023 12:23 AM] tux_linux
Show settings -> system info please


[6/19/2023 12:25 AM] tux_linux
You should also try with not a lot of books
I will try to put in your library on Glo HD


[6/19/2023 12:27 AM] tux_linux
I can reproduce it


[6/19/2023 12:27 AM] tux_linux
Your library is the problem


[6/19/2023 12:30 AM] tux_linux
But I don't know why


[6/19/2023 12:36 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230619_003526-A2ABB.jpg


[6/19/2023 12:36 AM] szybet
tried to root


[6/19/2023 12:36 AM] szybet
remove 2.0 tag


[6/19/2023 12:36 AM] tux_linux
Did you reflash kernel


[6/19/2023 12:36 AM] szybet
i did nothing


[6/19/2023 12:36 AM] szybet
only diagnostics


[6/19/2023 12:37 AM] tux_linux
Shit


[6/19/2023 12:37 AM] tux_linux
The problem is one of your books


[6/19/2023 12:37 AM] szybet
hmmm...


[6/19/2023 12:37 AM] szybet
are you dependent of books names?


[6/19/2023 12:37 AM] szybet
there are duplicated possible


[6/19/2023 12:38 AM] tux_linux
Maybe it's that


[6/19/2023 12:38 AM] szybet
for whatever reason they look like that


[6/19/2023 12:38 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-C447D.png


[6/19/2023 12:38 AM] szybet
a dot is missing, a duplicate with often a diffrent cover image


[6/19/2023 12:39 AM] tux_linux
Error code 1 means the DONT_BOOT flag is set


[6/19/2023 12:39 AM] tux_linux
Well should we worry about it?


[6/19/2023 12:40 AM] szybet
Yes?


[6/19/2023 12:40 AM] szybet
Its now a brick my device buttob


[6/19/2023 12:40 AM] szybet
Its a pretty important thing, inkbox is meant to be hackable


[6/19/2023 12:41 AM] tux_linux
I'm speaking of the library


[6/19/2023 12:41 AM] szybet
Yes


[6/19/2023 12:41 AM] tux_linux
Of course diags need to be fixed


[6/19/2023 12:41 AM] szybet
My library wont work


[6/19/2023 12:41 AM] tux_linux
Well can you try to delete duplicates first?


[6/19/2023 12:41 AM] szybet
No


[6/19/2023 12:42 AM] szybet
Imagine books with only one number change


[6/19/2023 12:42 AM] szybet
The fish 1


[6/19/2023 12:42 AM] szybet
The fish 2


[6/19/2023 12:42 AM] tux_linux
Why does this happen now


[6/19/2023 12:43 AM] szybet
Try to revert to a previous commit


[6/19/2023 12:43 AM] szybet
Also pngs didnt have a thumbnail


[6/19/2023 12:43 AM] szybet
Propably related


[6/19/2023 12:43 AM] szybet
check that


[6/19/2023 12:44 AM] tux_linux
Did your change in folders affect it?


[6/19/2023 12:44 AM] szybet
I was able to entry the root folder in onboard, but after that 2 mor folders and one book - it stopped working


[6/19/2023 12:44 AM] kuratius
@Szybet have you seen this before? https://github.com/ewpratten/kobo-rs/tree/master

{Embed}
https://github.com/ewpratten/kobo-rs/tree/master
GitHub - ewpratten/kobo-rs: A library for interacting with Kobo dev...
A library for interacting with Kobo devices. Contribute to ewpratten/kobo-rs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-rs-0BCB1


[6/19/2023 12:46 AM] szybet
Fbink rewritten in rust?


[6/19/2023 12:46 AM] tux_linux
?


[6/19/2023 12:47 AM] kuratius
+gui I think


[6/19/2023 12:47 AM] szybet
Structure:
Fun fun

Inside fun fun folder

Another folder
Folder
Cyberpunk book

After clicking folder, cyberpunk launched. I was able to access the  root fun fun folder


[6/19/2023 12:48 AM] szybet
Basic one

Well i dont see sense in this. Fbink is great?


[6/19/2023 12:49 AM] tux_linux
I don't know how your folder framework works


[6/19/2023 12:49 AM] tux_linux
So you fix that one


[6/19/2023 12:49 AM] tux_linux
I will take care of the duplicate issue


[6/19/2023 12:49 AM] kuratius
I'm just mentioning it as something you might be interested in


[6/19/2023 12:50 AM] kuratius
Also probably provides a good base for non qt user apps


[6/19/2023 12:50 AM] kuratius
So good to at least know of


[6/19/2023 12:50 AM] szybet
Its the same issue?


[6/19/2023 12:51 AM] szybet
What


[6/19/2023 12:51 AM] tux_linux
How do you know it's the same issue


[6/19/2023 12:51 AM] szybet
Thats what im trying to explain


[6/19/2023 12:51 AM] szybet
After entering a folder with more items than 1 it started behaving just like without any folders


[6/19/2023 12:52 AM] tux_linux
Ok


[6/19/2023 12:52 AM] tux_linux
And that means


[6/19/2023 12:54 AM] kuratius
Read through the code, it uses fbink internally for some things xD


[6/19/2023 12:54 AM] szybet
We already have koreader that has a bad gui, everything is tree menu and plato where its better but still, hard to implement

Qt is good, we have pre existing tools to create beautiful guis eassly, not unlike plato


[6/19/2023 12:55 AM] szybet
Also learning qt is easier than a custom library


[6/19/2023 12:56 AM] szybet
Good example is how inkbox reader look

And a bad where things get overcomplicated are settings


[6/19/2023 12:57 AM] tux_linux
I found the problematic book
I'm uploading a screenshot on a super slow connection so it should get there eventually


[6/19/2023 12:57 AM] szybet
I cant help you till 17:00 in my timezone tommor, only read logs and code and suggesr someting


[6/19/2023 12:57 AM] szybet
How can a book do that


[6/19/2023 12:58 AM] tux_linux
It's evil


[6/19/2023 12:58 AM] szybet
Um


[6/19/2023 12:58 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-5EE02.png


[6/19/2023 12:58 AM] tux_linux
ok
when i do this (the screenshot) it starts working again


[6/19/2023 12:59 AM] szybet
Um, this book is the entry to the "demonic series"


[6/19/2023 12:59 AM] szybet
🥴


[6/19/2023 12:59 AM] tux_linux
yes, appropriate thing there


[6/19/2023 12:59 AM] szybet
Its the name, litterally


[6/19/2023 1:00 AM] kuratius
Is ritual interesting? It's rust bindings for qt


[6/19/2023 1:00 AM] szybet
Is it the name or what, how did you get to that


[6/19/2023 1:00 AM] tux_linux
i looked at the first book of the list


[6/19/2023 1:00 AM] tux_linux
and poked around the library


[6/19/2023 1:02 AM] szybet
Qt power are ui files, whoch can create 90% of all guis eassly, using a gui - or just predefine qactions

Rust bindings wont have that

Also all qt values, qstring which the gui components accept wont work without conversion soo

No point in this. None


[6/19/2023 1:02 AM] tux_linux
c++ is great for qt imo


[6/19/2023 1:02 AM] tux_linux
but interesting to see options


[6/19/2023 1:02 AM] szybet
What if you changed the name


[6/19/2023 1:02 AM] szybet
Change


[6/19/2023 1:02 AM] tux_linux
i can try


[6/19/2023 1:02 AM] szybet
Try


[6/19/2023 1:02 AM] szybet
It is a bit buggy


[6/19/2023 1:03 AM] tux_linux
why


[6/19/2023 1:03 AM] szybet
It should be ksiega not ksi?ga


[6/19/2023 1:04 AM] szybet
Corfuption? Maybe


[6/19/2023 1:04 AM] tux_linux
well, 7z


[6/19/2023 1:04 AM] tux_linux
macos uncompressed them like that


[6/19/2023 1:04 AM] tux_linux
and they're listed like that with ls


[6/19/2023 1:04 AM] szybet
No... Its for me lime that too


[6/19/2023 1:04 AM] tux_linux
well ok


[6/19/2023 1:04 AM] tux_linux
not my fault


[6/19/2023 1:04 AM] tux_linux
hehe


[6/19/2023 1:04 AM] szybet
Not my too...


[6/19/2023 1:04 AM] szybet
How can that do that


[6/19/2023 1:04 AM] tux_linux
i think its 7z


[6/19/2023 1:05 AM] szybet
Im talking about shifting


[6/19/2023 1:05 AM] tux_linux
no idea


[6/19/2023 1:05 AM] tux_linux
magic


[6/19/2023 1:05 AM] tux_linux
black magic


[6/19/2023 1:05 AM] szybet
Try to replace the book with your one


[6/19/2023 1:05 AM] tux_linux
demonic magic


[6/19/2023 1:05 AM] szybet
Maybe its the number of books


[6/19/2023 1:05 AM] tux_linux
what 'your one'?


[6/19/2023 1:05 AM] szybet
Working one


[6/19/2023 1:05 AM] szybet
Gutenberg


[6/19/2023 1:05 AM] szybet
whatever


[6/19/2023 1:06 AM] tux_linux
in this folder?


[6/19/2023 1:06 AM] szybet
Also do you have thumbnails for the 2 pngs that are in my books


[6/19/2023 1:06 AM] szybet
Yes


[6/19/2023 1:06 AM] tux_linux
no


[6/19/2023 1:06 AM] szybet
And regenerate library


[6/19/2023 1:06 AM] szybet
So we have a bigger propblem


[6/19/2023 1:06 AM] tux_linux
file corruption?


[6/19/2023 1:07 AM] szybet
Check md5sums


[6/19/2023 1:07 AM] szybet
But propably no


[6/19/2023 1:07 AM] szybet
File corruptions wont be the same for us?


[6/19/2023 1:07 AM] tux_linux
you want it to have the same name?


[6/19/2023 1:07 AM] tux_linux
ok


[6/19/2023 1:07 AM] szybet
Well yes try


[6/19/2023 1:08 AM] tux_linux
ok


[6/19/2023 1:08 AM] szybet
Try to resolve those 2 issues, good luck, good night


[6/19/2023 1:09 AM] tux_linux
it's not 7z


[6/19/2023 1:09 AM] tux_linux
i think it's fat32


[6/19/2023 1:09 AM] tux_linux
good night


[6/19/2023 1:10 AM] szybet
Last last idea: your change in explore library, the one with time regeneration - try to go back in commit...


[6/19/2023 1:10 AM] szybet
This is the only thing that changed


[6/19/2023 1:10 AM] tux_linux
yes but it's about thumbnails


[6/19/2023 1:10 AM] tux_linux
epub thumbnails


[6/19/2023 1:10 AM] tux_linux
only


[6/19/2023 1:11 AM] tux_linux
anyways good night


[6/19/2023 1:11 AM] tux_linux
let's attack this mess


[6/19/2023 1:12 AM] tux_linux
now it corrupts epubtool


[6/19/2023 1:12 AM] tux_linux
great


[6/19/2023 1:13 AM] tux_linux
oh nvm mount problem


[6/19/2023 1:17 AM] kuratius
This doesn't follow from how ritual is supposed to work so there is probably some misunderstanding here


[6/19/2023 1:18 AM] kuratius
But anyway need to sleep


[6/19/2023 1:18 AM] tux_linux
good night


[6/19/2023 1:18 AM] kuratius
Let's discuss it later


[6/19/2023 1:23 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screen_Recording_2023-06-18_at_7.23.14_PM-24C96.mov


[6/19/2023 1:24 AM] tux_linux
that must be a problem


[6/19/2023 1:24 AM] tux_linux
when it erases itself i am pressing tab


[6/19/2023 1:24 AM] tux_linux
like to complete it


[6/19/2023 2:14 AM] tux_linux
This Sucks™️


[6/19/2023 3:56 AM] tux_linux
look! this bug!

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230619_015633706-50A3B.jpg


[6/19/2023 3:58 AM] tux_linux
```
Biggest release of InkBox OS *ever*. Yes, the time gap between 1.9 and 2.0 is huge, but we hope you will find that it was worth it.
Thanks to @Szybet for greatly contributing to the project, now for over one year and counting.

Changelog:
- Kindle Touch (KT) support (installation guide on request ; no release image available at the moment)
- Signed custom user applications ('user apps') support (@Szybet)
- Improved virtual keyboard
- General UI design improvements
- Completely overhauled home page and library browser, with 'Recent books' and 'Pinned books'
- Folders support in local library browser
- Highlighting support (experimental) and option to export highlights as JSON file
- Fix for special characters sometimes not displaying properly (@Szybet)
- Completely overhauled power daemon (@Szybet)
- Completely overhauled Wi-Fi framework (@Szybet & @tux-linux)
- Wi-Fi support for i.MX507 devices (N705, N905C, N613)
- Better virtual keyboard in X11/KoBox
- New 'Line spacing' and 'Margins' options in Reader
- 'To-Do' application for checklists
- 'Qalculate' application for complex mathematic calculations
- Improved lockscreen experience (@Szybet & @tux-linux)
- Improved Reader framework
- Update system improvements
- Fix for screen 'freezing' when X11 is enabled on some devices
- Kernel namespaces support
- Completely overhauled system initialization program
- Gutenberg: prompt to ask whether or not to sync before doing so
- N306: Support for keyboard and mouse via USB OTG (@Szybet)
- N306: Support for custom device cases (@Szybet)
- 5 days of excruciating pain discovering and fixing bugs that just seemed to have come from nowhere specifically to bother us
```
saving this for later


[6/19/2023 4:39 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230619_023837464-CC87E.jpg


[6/19/2023 4:39 AM] tux_linux
x11 i hate you


[6/19/2023 4:39 AM] tux_linux
boot -> launch geany on std kernel -> witness the mess


[6/19/2023 4:41 AM] tux_linux
😭


[6/19/2023 4:42 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230619_024202526-6FC60.jpg


[6/19/2023 4:42 AM] tux_linux
NOOOO


[6/19/2023 5:41 AM] tux_linux
restoring from std->root in diags worked no problem for me


[6/19/2023 6:21 AM] tux_linux
hmm hmm

{Attachments}
/mnt/data/projects/git/conversations/media/image-0E4AE.png


[6/19/2023 6:22 AM] tux_linux
https://github.com/Kobo-InkBox/inkbox/commit/24509307035e383790c80f793d33085bcac77d3a
fixed it


[6/19/2023 6:33 AM] tux_linux
fixed this too in the usual nonsensical way
but ipd wake up still doesn't work properly in std kernels with x11 enabled
i don't know if i should care


[6/19/2023 7:58 AM] szybet
What about the library


[6/19/2023 8:00 AM] szybet
Okay i see


[6/19/2023 8:01 AM] szybet
What doesnt work


[6/19/2023 8:09 AM] szybet
Maybe the image you prepared is broken


[6/19/2023 8:20 AM] szybet
What are the changes to std kernel that many problems are there


[6/19/2023 8:43 AM] szybet
It could shift id's in the database? Please just try


[6/19/2023 9:04 AM] szybet
If something works in root kernel and not in std, then not ipd, xorg is the problem but std kernel


[6/19/2023 1:50 PM] tux_linux
None that I am aware of


[6/19/2023 1:52 PM] szybet
What are they at all


[6/19/2023 1:52 PM] szybet
post the code


[6/19/2023 1:58 PM] tux_linux
There aren't
It just works differently
I didn't try to understand


[6/19/2023 1:58 PM] tux_linux
What do you want that I post


[6/19/2023 2:02 PM] szybet
An if else what is changing


[6/19/2023 2:02 PM] szybet
Well now its time to undetstanf


[6/19/2023 2:03 PM] tux_linux
if else where


[6/19/2023 2:04 PM] szybet
Init? Idk


[6/19/2023 2:04 PM] szybet
If rotted

Else

Here


[6/19/2023 2:04 PM] tux_linux
`if(root)`


[6/19/2023 2:04 PM] szybet
Jo


[6/19/2023 2:04 PM] szybet
Exactly


[6/19/2023 2:04 PM] tux_linux
nothing I saw relevant


[6/19/2023 2:04 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-7971D.png


[6/19/2023 2:04 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-73084.png


[6/19/2023 2:05 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-62432.png


[6/19/2023 2:05 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-5944A.png


[6/19/2023 2:06 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-D10EF.png


[6/19/2023 2:06 PM] tux_linux
that's pretty much it for init


[6/19/2023 2:10 PM] szybet
What is root sqsh


[6/19/2023 2:10 PM] tux_linux
it mounts the file at `/opt/root/rooted`


[6/19/2023 2:10 PM] szybet
Whayt is it


[6/19/2023 2:10 PM] tux_linux
a file


[6/19/2023 2:10 PM] tux_linux
everything in rootfs uses it to check if device is rooted


[6/19/2023 2:11 PM] szybet
Ok


[6/19/2023 2:11 PM] szybet
Answer me on pv


[6/19/2023 2:11 PM] tux_linux
```
build@inkbox ~/D/i/rootfs (master)> rg rooted
etc/init.d/xorg.sh
110:    if grep -q "true" /opt/root/rooted && ! grep -q "true" /tmp/kobox_initial_launch_done; then

etc/init.d/update.sh
30:ROOT=$(cat /opt/root/rooted 2>/dev/null)
56:if grep -q "true" /opt/root/rooted &>/dev/null; then

etc/init.d/usbnet
11:    ROOTED="$(cat /opt/root/rooted)"
53:        # Device is not rooted; enforcing security policy.

etc/init.d/gui_apps
81:                        # Needs rooted kernel

usr/bin/inkbox.sh
4:ROOTED=$(cat /opt/root/rooted)
44:    echo "Not starting SSHd, device is not rooted."

usr/local/bin/generate_system_report.sh
26:echo "<b>Kernel type: <code>$(if grep -q "true" /opt/root/rooted 2>/dev/null; then echo "Root"; else echo "Standard"; fi)</code></b>" >> "${SF}"
78:if grep -q "true" /opt/root/rooted 2>/dev/null; then
```

{Reactions}
👍 

[6/19/2023 2:11 PM] tux_linux
that is what it is in rootfs
the first one is the change i made yesterday


[6/19/2023 2:12 PM] szybet
Why xorg


[6/19/2023 2:12 PM] tux_linux
Because xorg


[6/19/2023 2:12 PM] szybet
Ok


[6/19/2023 2:18 PM] tux_linux
maaaybe it's because of usbnet modules? everything is nonsense at this point


[6/19/2023 2:25 PM] szybet
Test more, If you fix everything once again, you can prepare root and std image for the nia


[6/19/2023 2:39 PM] tux_linux
well, only std image


[6/19/2023 2:46 PM] tux_linux
i will create the release tag only once the video is out


[6/19/2023 2:57 PM] szybet
And we stop testing


[6/19/2023 2:57 PM] tux_linux
yes!!!!


[6/19/2023 3:49 PM] tux_linux
png in library fixed


[6/19/2023 3:55 PM] tux_linux
maybe because of identical checksums


[6/19/2023 4:12 PM] szybet
HM HM HM


[6/19/2023 4:13 PM] tux_linux
i stop testing


[6/19/2023 4:14 PM] szybet
If all books will be in this library, none deleted just duplicates then im fine with it


[6/19/2023 4:14 PM] tux_linux
a lot of books had the same covers


[6/19/2023 4:15 PM] tux_linux
so i deleted one out of the two


[6/19/2023 4:15 PM] tux_linux
i tested folders it worked as well


[6/19/2023 4:15 PM] szybet
Those books were part one and two


[6/19/2023 4:15 PM] szybet
Sooo uhm


[6/19/2023 4:16 PM] tux_linux
part one and two of the same book?


[6/19/2023 4:16 PM] szybet
Yep


[6/19/2023 4:16 PM] szybet
The same cover


[6/19/2023 4:16 PM] tux_linux
oh no


[6/19/2023 4:17 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-9BE18.png


[6/19/2023 4:17 PM] tux_linux
so that's two different books and the second part is missing?


[6/19/2023 4:19 PM] tux_linux
well at worst, maybe you can just put the entire library in `/data/storage/<create a folder here>` and move specific books to `/data/onboard/` when you are reading them


[6/19/2023 4:19 PM] tux_linux
it will probably panic less


[6/19/2023 4:24 PM] szybet
No?


[6/19/2023 4:24 PM] szybet
Not acceptable


[6/19/2023 4:24 PM] tux_linux
well so i don't make the image?


[6/19/2023 4:24 PM] szybet
Ita there?


[6/19/2023 4:24 PM] tux_linux
?


[6/19/2023 4:25 PM] szybet
Try to debug more


[6/19/2023 4:25 PM] szybet
Ezport the json


[6/19/2023 4:25 PM] szybet
I will be back soon, i will try to debug this too


[6/19/2023 4:26 PM] szybet
Of the db


[6/19/2023 4:26 PM] szybet
Lets make at least or books work


[6/19/2023 4:27 PM] szybet
Our*


[6/19/2023 4:36 PM] tux_linux
i will copy the books in batch and see which one is causing the problem


[6/19/2023 4:50 PM] tux_linux
it doesn't like this folder
```
Peter V. Brett - Pustynna Włócznia
```


[6/19/2023 4:50 PM] szybet
its normal


[6/19/2023 4:50 PM] tux_linux
why


[6/19/2023 4:50 PM] szybet
author - book name?


[6/19/2023 4:51 PM] szybet
its a boring part of the story in the book but common


[6/19/2023 4:51 PM] tux_linux
well why does this one work then
```
Peter V. Brett - Otchłań
```


[6/19/2023 4:51 PM] tux_linux
this is probably what is causing the disruption in the database


[6/19/2023 4:51 PM] tux_linux
i will continue adding folders


[6/19/2023 4:51 PM] tux_linux
for now it just doesn't show up anywhere but bookids are not affected


[6/19/2023 4:51 PM] szybet
maybe locales & special characters?


[6/19/2023 4:52 PM] tux_linux
this has enough special characters...


[6/19/2023 4:52 PM] szybet
2


[6/19/2023 4:52 PM] szybet
welp


[6/19/2023 4:52 PM] szybet
yea


[6/19/2023 4:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-4FE51.png


[6/19/2023 4:54 PM] szybet
in this folder are those duplicaters


[6/19/2023 4:55 PM] tux_linux
ok


[6/19/2023 4:55 PM] szybet
i will send you a cleaned structure


[6/19/2023 4:55 PM] szybet
of my books


[6/19/2023 4:55 PM] tux_linux
but adding new books doesn't break the library


[6/19/2023 4:56 PM] tux_linux
i will continue until it does


[6/19/2023 4:56 PM] szybet
this will help anyways


[6/19/2023 4:56 PM] tux_linux
yes


[6/19/2023 4:57 PM] tux_linux
yay i broke it


[6/19/2023 4:57 PM] tux_linux
`Peter V. Brett - Wielki Bazar. Złoto Brayana`


[6/19/2023 4:57 PM] tux_linux
adding this broke it


[6/19/2023 4:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-3722F.png


[6/19/2023 4:58 PM] szybet
it is broken


[6/19/2023 4:58 PM] tux_linux
well so i delete it?


[6/19/2023 4:58 PM] szybet
but i added error handling


[6/19/2023 4:58 PM] szybet
to explore library


[6/19/2023 4:58 PM] tux_linux
it doesn't always work


[6/19/2023 4:58 PM] szybet
well epubtool is bullet proof by this point


[6/19/2023 4:58 PM] tux_linux
no


[6/19/2023 4:58 PM] szybet
check what fails with it


[6/19/2023 4:58 PM] szybet
rust.


[6/19/2023 4:58 PM] tux_linux
no


[6/19/2023 4:58 PM] tux_linux
i will try this folder alone


[6/19/2023 4:59 PM] szybet
if only with this folder it fails, try to bash -x explore library to know whats wrong


[6/19/2023 4:59 PM] tux_linux
with certain gutenberg books it failed and gui said there were no books in library


[6/19/2023 5:00 PM] szybet
gutenberg is only txt?


[6/19/2023 5:00 PM] szybet
or is it


[6/19/2023 5:00 PM] tux_linux
no???


[6/19/2023 5:00 PM] szybet
also send me those books then


[6/19/2023 5:02 PM] tux_linux
it breaks it


[6/19/2023 5:02 PM] szybet
this folder


[6/19/2023 5:02 PM] szybet
this book?


[6/19/2023 5:02 PM] tux_linux
yes


[6/19/2023 5:02 PM] tux_linux
these books


[6/19/2023 5:02 PM] szybet
pin down the issue


[6/19/2023 5:03 PM] tux_linux
it only shows one book on local library


[6/19/2023 5:03 PM] tux_linux
and when trying to show book options it segfaults


[6/19/2023 5:03 PM] tux_linux
well you say one is corrupted


[6/19/2023 5:03 PM] szybet
because there is the second one broken and invidible


[6/19/2023 5:03 PM] szybet
invisible


[6/19/2023 5:03 PM] tux_linux
i will remove it


[6/19/2023 5:03 PM] szybet
show me now the database


[6/19/2023 5:03 PM] szybet
dont you want to debug it more?


[6/19/2023 5:07 PM] tux_linux
```
QJsonDocument({"database":[{"Author":"Wielki Bazar. Złoto Brayana","BookID":"2","BookPath":"/mnt/onboard/onboard/Peter V. Brett - Wielki Bazar. Z?oto Brayana/Peter V. Brett - Wielki Bazar. Z?oto Brayana.epub","CoverPath":"/mnt/onboard/onboard/.thumbnails/14bc35cee1d42854cc50955a54d5dc01e75ee44dcd81fb8575213f14df1b8d87","PublicationDate":"0101-01-01T00:00:00+00:00","Title":"Peter V. Brett"}]})
```


[6/19/2023 5:07 PM] tux_linux
bookid 1 is missing


[6/19/2023 5:08 PM] szybet
propably when an error accours, you need to go back in the ID int


[6/19/2023 5:08 PM] szybet
thats it


[6/19/2023 5:08 PM] szybet
99%


[6/19/2023 5:08 PM] tux_linux
well change it


[6/19/2023 5:09 PM] tux_linux
i will send you problematic gutenberg book


[6/19/2023 5:11 PM] szybet
what about rooting the device?


[6/19/2023 5:11 PM] tux_linux
its already rooted


[6/19/2023 5:11 PM] szybet
my


[6/19/2023 5:11 PM] szybet
error from yestardayu


[6/19/2023 5:11 PM] tux_linux
yes, it happens on root too


[6/19/2023 5:12 PM] szybet
rooting the device in diagnostics


[6/19/2023 5:12 PM] tux_linux
yes


[6/19/2023 5:12 PM] szybet
didnt worked


[6/19/2023 5:12 PM] szybet
and


[6/19/2023 5:12 PM] tux_linux
now?


[6/19/2023 5:12 PM] tux_linux
i did it and it worked


[6/19/2023 5:12 PM] szybet
.


[6/19/2023 5:12 PM] szybet
not for me


[6/19/2023 5:12 PM] tux_linux
you will be able to try with new image


[6/19/2023 5:12 PM] szybet
maybe prepare another nia image? maybe you dismanaged the keys?


[6/19/2023 5:12 PM] tux_linux
later


[6/19/2023 5:13 PM] tux_linux
we fix this now


[6/19/2023 5:15 PM] tux_linux
monstrous
```
kobo:~# mount | wc -l
287
kobo:~#
```


[6/19/2023 5:15 PM] szybet
?


[6/19/2023 5:15 PM] szybet
oh ok


[6/19/2023 5:15 PM] szybet
yea


[6/19/2023 5:16 PM] szybet
this is epubtool fault?


[6/19/2023 5:16 PM] tux_linux
probably


[6/19/2023 5:16 PM] szybet
from what i can see in the code


[6/19/2023 5:16 PM] szybet
whoooops


[6/19/2023 5:18 PM] tux_linux
problematic book

{Attachments}
/mnt/data/projects/git/conversations/media/The_book_of_The_Cheese.70991-CD5FE.epub


[6/19/2023 5:18 PM] szybet
can you send me those 2 books? from zloto brayana folder


[6/19/2023 5:18 PM] szybet
i already cleaned my books


[6/19/2023 5:18 PM] tux_linux
you dont have them?


[6/19/2023 5:18 PM] tux_linux
oh


[6/19/2023 5:18 PM] szybet
i can reach to my backup


[6/19/2023 5:18 PM] szybet
but no point that


[6/19/2023 5:20 PM] tux_linux
remember we also have this problem


[6/19/2023 5:21 PM] szybet
can you debug it, point the issue? while i fix the other epubs


[6/19/2023 5:21 PM] tux_linux
i can try


[6/19/2023 5:23 PM] tux_linux
```
kobo:/data/onboard/Peter V. Brett - Pustynna W??cznia# ls
Peter V. Brett - Pustynna W??cznia Ksi?ga II.epub   Peter V. Brett - Pustynna W??cznia Ksiega I.epub    Peter V. Brett - Pustynna W??cznia. Ksi?ga I.epub   Peter V. Brett - Pustynna W??cznia. Ksi?ga II.epub
kobo:/data/onboard/Peter V. Brett - Pustynna W??cznia#
```
which ones are duplicates?


[6/19/2023 5:23 PM] szybet
wait


[6/19/2023 5:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2330C.png


[6/19/2023 5:24 PM] tux_linux
gui doesn't show anything, db is empty


[6/19/2023 5:24 PM] tux_linux
ok


[6/19/2023 5:24 PM] szybet
this is the cleaned folder


[6/19/2023 5:26 PM] tux_linux
it still doesn't work


[6/19/2023 5:32 PM] szybet
those books work


[6/19/2023 5:32 PM] tux_linux
?


[6/19/2023 5:32 PM] szybet
in fact, i have already read*? them


[6/19/2023 5:32 PM] szybet
readed


[6/19/2023 5:32 PM] tux_linux
read


[6/19/2023 5:32 PM] szybet
well


[6/19/2023 5:32 PM] szybet
logs then


[6/19/2023 5:32 PM] tux_linux
yes


[6/19/2023 5:32 PM] szybet
database export


[6/19/2023 5:33 PM] tux_linux
`QJsonDocument({"database":[]})`


[6/19/2023 5:33 PM] szybet
very cool


[6/19/2023 5:34 PM] tux_linux
let me check something


[6/19/2023 5:34 PM] szybet
also check: add to explore local library a call to stderr with a message


[6/19/2023 5:34 PM] szybet
and check if it shows in ther gui


[6/19/2023 5:36 PM] tux_linux
the problem is the filename


[6/19/2023 5:37 PM] tux_linux
i renamed them


[6/19/2023 5:37 PM] tux_linux
```
kobo:/data/onboard# ls -R pustynna/
pustynna/:
i.epub   ii.epub
kobo:/data/onboard#
```


[6/19/2023 5:37 PM] tux_linux
and it works


[6/19/2023 5:37 PM] tux_linux
watch this


[6/19/2023 5:37 PM] tux_linux
it contains some characters sh can't even handle


[6/19/2023 5:38 PM] tux_linux
and sh is, well, `explore_local_library.sh`


[6/19/2023 5:38 PM] szybet
i dont have any issues?...


[6/19/2023 5:38 PM] tux_linux
with these books?


[6/19/2023 5:38 PM] szybet
with entering this dir


[6/19/2023 5:38 PM] szybet
in sh


[6/19/2023 5:39 PM] tux_linux
on kobo?


[6/19/2023 5:39 PM] szybet
um my pc


[6/19/2023 5:39 PM] tux_linux
hmm


[6/19/2023 5:39 PM] tux_linux
hmm


[6/19/2023 5:39 PM] tux_linux
hmm


[6/19/2023 5:39 PM] tux_linux
also it probably is real sh and not busybox sh you are using


[6/19/2023 5:40 PM] tux_linux
did you find the problem in epubtool?


[6/19/2023 5:40 PM] szybet
its an easy fix at least for those 2 books


[6/19/2023 5:40 PM] szybet
your gutenberg, idk yet


[6/19/2023 5:40 PM] tux_linux
ok


[6/19/2023 5:40 PM] szybet
.


[6/19/2023 5:45 PM] szybet
what do i do if any of these is empty


[6/19/2023 5:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8A365.png


[6/19/2023 5:45 PM] szybet
in title i can use the filename


[6/19/2023 5:45 PM] szybet
author? idk


[6/19/2023 5:45 PM] szybet
well reply


[6/19/2023 5:45 PM] szybet
this is the issue with gutenberg


[6/19/2023 5:45 PM] tux_linux
Unknown


[6/19/2023 5:45 PM] szybet
good


[6/19/2023 5:46 PM] szybet
what in publication date?


[6/19/2023 5:46 PM] tux_linux
same


[6/19/2023 5:46 PM] szybet
it won't bork anything?


[6/19/2023 5:46 PM] tux_linux
why would it?


[6/19/2023 5:46 PM] tux_linux
author and publication date are strings?


[6/19/2023 5:46 PM] szybet
you are asking this question after 5 days :D?


[6/19/2023 5:46 PM] tux_linux
well, i don't see a problem


[6/19/2023 5:46 PM] tux_linux
of course they could appear


[6/19/2023 5:50 PM] tux_linux
it isn't provided book titles

{Attachments}
/mnt/data/projects/git/conversations/media/message-D07B6.txt


[6/19/2023 5:50 PM] tux_linux
or it can't recognize them


[6/19/2023 5:50 PM] tux_linux
file name error


[6/19/2023 5:50 PM] tux_linux
do we really need to debug this?


[6/19/2023 5:51 PM] tux_linux
we can just put a note 'if your books don't show up, try to rename them with ascii characters'


[6/19/2023 5:52 PM] szybet
no wait


[6/19/2023 5:52 PM] szybet
i will give yo ua fix for that in 5 minutes


[6/19/2023 5:52 PM] szybet
propably fux


[6/19/2023 5:52 PM] tux_linux
o k


[6/19/2023 5:53 PM] szybet
where


[6/19/2023 5:53 PM] szybet
btw nope


[6/19/2023 5:54 PM] tux_linux
https://stackoverflow.com/a/11229505
i put this in the script

{Embed}
https://stackoverflow.com/a/11229505
redirect all output in a bash script when using set -x
I have a bash script that has set -x in it. Is it possible to redirect the debug prints of this script and all its output to a file? Ideally I would like to do something like this:

#!/bin/bash
set...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[6/19/2023 5:54 PM] tux_linux
that is the output in the file


[6/19/2023 5:54 PM] tux_linux
either qt doesn't provide them or sh is unable to recognize them


[6/19/2023 5:54 PM] szybet
dump the arguments at the beginning


[6/19/2023 5:55 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-D9970.txt


[6/19/2023 5:55 PM] tux_linux
there are none


[6/19/2023 5:55 PM] tux_linux
i added `echo "${@}"`


[6/19/2023 5:56 PM] tux_linux
that's the first line


[6/19/2023 5:57 PM] szybet
qt fault?


[6/19/2023 5:59 PM] szybet
epub tool fix dropped

{Reactions}
👍 

[6/19/2023 6:00 PM] szybet
https://github.com/Kobo-InkBox/inkbox/blob/7e4b3b5d0254cee65c1321262cc0beb6a752873d/src/localLibrary/locallibrarywidget.cpp#L120-L129


[6/19/2023 6:00 PM] szybet
also here add a parent
https://github.com/Kobo-InkBox/inkbox/blob/7e4b3b5d0254cee65c1321262cc0beb6a752873d/src/localLibrary/locallibrarywidget.cpp#L142


[6/19/2023 6:00 PM] szybet
to the qprocess


[6/19/2023 6:01 PM] szybet
try collecting logs while this loop goes


[6/19/2023 6:01 PM] tux_linux
what


[6/19/2023 6:02 PM] szybet
`QProcess *proc = new QProcess(this);`


[6/19/2023 6:02 PM] szybet
otherwise small memory leak


[6/19/2023 6:02 PM] szybet
you know about this?


[6/19/2023 6:06 PM] tux_linux
i call deleteLater


[6/19/2023 6:06 PM] szybet
okay


[6/19/2023 6:09 PM] szybet
i'm waiting for this


[6/19/2023 6:09 PM] szybet
if qt freaks out completly then i'm okay with just renaming the files


[6/19/2023 6:10 PM] tux_linux
`qDebug() << booksList;`


[6/19/2023 6:11 PM] tux_linux
leads to


[6/19/2023 6:11 PM] tux_linux
`()`


[6/19/2023 6:11 PM] tux_linux
it's not even an sh problem


[6/19/2023 6:11 PM] tux_linux
(yet)


[6/19/2023 6:11 PM] tux_linux
i suggest we don't care about it


[6/19/2023 6:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-440C6.png


[6/19/2023 6:12 PM] szybet
qDebug() << dirIt


[6/19/2023 6:12 PM] tux_linux
booksList is booksList?


[6/19/2023 6:12 PM] szybet
qDebug() << suffix


[6/19/2023 6:12 PM] szybet
qDebug() << dirIt.filePath()


[6/19/2023 6:12 PM] szybet
add those logs in those places


[6/19/2023 6:12 PM] szybet
last try


[6/19/2023 6:12 PM] szybet
if this leads to nothing i give up too


[6/19/2023 6:13 PM] tux_linux
```
dirIt.filePath: ""
dirIt.filePath(): "/mnt/onboard/onboard/."
dirIt.filePath(): "/mnt/onboard/onboard/.."
()
19/06/2023 @ 16:13:38 | localLibraryWidget: Reading database
QJsonDocument({"database":[]})
```


[6/19/2023 6:14 PM] szybet
did you added only one log?


[6/19/2023 6:14 PM] szybet
not those 3?


[6/19/2023 6:14 PM] tux_linux
does not even get to the files


[6/19/2023 6:14 PM] szybet
also maybe launch /mnt/onboard/onboard


[6/19/2023 6:14 PM] tux_linux
stops at folder boundary


[6/19/2023 6:14 PM] tux_linux
because can't read folder filename


[6/19/2023 6:14 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-9E40B.png


[6/19/2023 6:15 PM] szybet
what


[6/19/2023 6:15 PM] szybet
no


[6/19/2023 6:15 PM] szybet
my god


[6/19/2023 6:15 PM] szybet
this will not work for sure


[6/19/2023 6:15 PM] tux_linux
i can rename folder to confirm the theory


[6/19/2023 6:15 PM] szybet
no


[6/19/2023 6:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A6C3D.png


[6/19/2023 6:15 PM] szybet
try this


[6/19/2023 6:15 PM] szybet
better?


[6/19/2023 6:15 PM] szybet
literally copy the text


[6/19/2023 6:16 PM] szybet
where the lines go


[6/19/2023 6:16 PM] tux_linux
see, now it enters the folder and can't read the files
```
19/06/2023 @ 16:15:47 | localLibraryWidget: Generating database
dirIt.filePath: ""
dirIt.filePath(): "/mnt/onboard/onboard/."
dirIt.filePath(): "/mnt/onboard/onboard/.."
dirIt.filePath(): "/mnt/onboard/onboard/pustynna"
dirIt.filePath(): "/mnt/onboard/onboard/pustynna/."
dirIt.filePath(): "/mnt/onboard/onboard/pustynna/.."
()
19/06/2023 @ 16:15:48 | localLibraryWidget: Reading database
QJsonDocument({"database":[]})
```


[6/19/2023 6:16 PM] szybet
because you didnt called next() so filepath is a memory corruption or just ignores the call, propably


[6/19/2023 6:16 PM] tux_linux
yes i did


[6/19/2023 6:16 PM] szybet
please just do this


[6/19/2023 6:16 PM] tux_linux
why would this thing work otherwise


[6/19/2023 6:17 PM] szybet
those logs wont work


[6/19/2023 6:17 PM] szybet
try mine


[6/19/2023 6:18 PM] tux_linux
you can't qdebug a dirIt


[6/19/2023 6:19 PM] szybet
ok then without it


[6/19/2023 6:19 PM] szybet
tiwhout the one log


[6/19/2023 6:19 PM] tux_linux
it doesn't show anything


[6/19/2023 6:19 PM] szybet
show me also `find /mnt/onboard/onboard`


[6/19/2023 6:19 PM] tux_linux
```
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
19/06/2023 @ 16:19:16 | toast: Displaying message 'Generating database'
19/06/2023 @ 16:19:16 | MainWindow: Showing USB Mass Storage dialog
19/06/2023 @ 16:19:16 | localLibraryWidget: Generating database
19/06/2023 @ 16:19:16 | localLibraryWidget: Reading database
QJsonDocument({"database":[]})
```


[6/19/2023 6:20 PM] szybet
.


[6/19/2023 6:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-4FCD1.txt


[6/19/2023 6:20 PM] tux_linux
```
/mnt/onboard/onboard/pustynna
/mnt/onboard/onboard/pustynna/Peter V. Brett - Pustynna W??cznia Ksiega I.epub
/mnt/onboard/onboard/pustynna/Peter V. Brett - Pustynna W??cznia. Ksi?ga I.epub
/mnt/onboard/onboard/pustynna/Peter V. Brett - Pustynna W??cznia. Ksi?ga II.epub
/mnt/onboard/onboard/pustynna/Peter V. Brett - Pustynna W??cznia Ksi?ga II.epub
```


[6/19/2023 6:21 PM] szybet
okay, copy those books to /mnt/onboard


[6/19/2023 6:21 PM] szybet
and rename them


[6/19/2023 6:21 PM] szybet
then show logs


[6/19/2023 6:21 PM] tux_linux
?


[6/19/2023 6:22 PM] tux_linux
mnt onboard is not referenced by any library tools


[6/19/2023 6:22 PM] szybet
what would the logs look like with repaired names


[6/19/2023 6:22 PM] szybet
i know


[6/19/2023 6:22 PM] szybet
just remove thos books there


[6/19/2023 6:22 PM] szybet
but you will move them back after getting the log, one more idea


[6/19/2023 6:22 PM] tux_linux
you just want me to leave the pustynna folder?


[6/19/2023 6:22 PM] szybet
no


[6/19/2023 6:23 PM] szybet
books in pustynna, rename them to a normal name


[6/19/2023 6:23 PM] szybet
so it will work


[6/19/2023 6:23 PM] tux_linux
ok


[6/19/2023 6:23 PM] szybet
and gather the log


[6/19/2023 6:23 PM] szybet
after gathering the log, copy the books once more with bad names and run fsck on mnt onboard onboard after unmounting everything


[6/19/2023 6:23 PM] szybet
maybe fat fsck will repair those names


[6/19/2023 6:25 PM] tux_linux
```
19/06/2023 @ 16:23:59 | localLibraryWidget: Generating database
suffix: "epub"
dirIt.filePath: "/mnt/onboard/onboard/pustynna/i-i.epub"
suffix: "epub"
dirIt.filePath: "/mnt/onboard/onboard/pustynna/ii-ii.epub"
suffix: "epub"
dirIt.filePath: "/mnt/onboard/onboard/pustynna/ii.epub"
suffix: "epub"
dirIt.filePath: "/mnt/onboard/onboard/pustynna/i.epub"
```


[6/19/2023 6:25 PM] szybet
okayyyy


[6/19/2023 6:25 PM] szybet
great


[6/19/2023 6:25 PM] szybet
at least


[6/19/2023 6:25 PM] szybet
this, and this will be the end


[6/19/2023 6:25 PM] tux_linux
or not


[6/19/2023 6:26 PM] szybet
it will


[6/19/2023 6:26 PM] szybet
it will not work, i just rename them


[6/19/2023 6:26 PM] szybet
if it will work, there is a fix


[6/19/2023 6:26 PM] szybet
¯\_(ツ)_/¯


[6/19/2023 6:27 PM] tux_linux
```
kobo:/data# fsck.fat /opt/storage/onboard -y
fsck.fat 4.2+git (2021-01-31)
Volume label 'InkBox\000\000\000\000\000' stored in root directory is not valid.
  Auto-removing label.

*** Filesystem was changed ***
Writing changes.
/opt/storage/onboard: 390 files, 29242/516216 clusters
kobo:/data#
```


[6/19/2023 6:28 PM] szybet
run find now


[6/19/2023 6:28 PM] szybet
`find`


[6/19/2023 6:28 PM] szybet
there


[6/19/2023 6:29 PM] tux_linux
it doesn't work


[6/19/2023 6:29 PM] szybet
the same?


[6/19/2023 6:29 PM] tux_linux
```
/mnt/onboard/onboard/Peter V. Brett - Pustynna W??cznia
/mnt/onboard/onboard/Peter V. Brett - Pustynna W??cznia/Peter V. Brett - Pustynna W??cznia Ksiega I.epub
/mnt/onboard/onboard/Peter V. Brett - Pustynna W??cznia/Peter V. Brett - Pustynna W??cznia. Ksi?ga I.epub
/mnt/onboard/onboard/Peter V. Brett - Pustynna W??cznia/Peter V. Brett - Pustynna W??cznia. Ksi?ga II.epub
/mnt/onboard/onboard/Peter V. Brett - Pustynna W??cznia/Peter V. Brett - Pustynna W??cznia Ksi?ga II.epub
```


[6/19/2023 6:29 PM] tux_linux
same as this


[6/19/2023 6:29 PM] szybet
logs the same?


[6/19/2023 6:29 PM] tux_linux
i just said yes


[6/19/2023 6:30 PM] szybet
yes, our messages were sent at the same time


[6/19/2023 6:30 PM] tux_linux
then we give up


[6/19/2023 6:30 PM] tux_linux
good riddance


[6/19/2023 6:31 PM] tux_linux
i will try epubtool


[6/19/2023 6:31 PM] szybet
not our fault really


[6/19/2023 6:31 PM] szybet
maybe


[6/19/2023 6:31 PM] szybet
locales are missing?


[6/19/2023 6:31 PM] tux_linux
i read on that a bit yesterday and it seems it wouldn't be a cause of the problem


[6/19/2023 6:32 PM] tux_linux
also the fact that even sh doesn't recognize the chars is probably a good sign that the filename should be changed 🥴


[6/19/2023 6:32 PM] szybet
it works on arch :(


[6/19/2023 6:33 PM] tux_linux
try on kobo


[6/19/2023 6:34 PM] szybet
i will send you the repaired library


[6/19/2023 6:34 PM] tux_linux
ok


[6/19/2023 6:34 PM] szybet
i fixed the names


[6/19/2023 6:35 PM] szybet
if this works - we are good

{Reactions}
👍 

[6/19/2023 6:35 PM] szybet
what is lw.zip


[6/19/2023 6:36 PM] szybet
uploaded `fun-fun.tar.xz`


[6/19/2023 6:36 PM] tux_linux
library-working.zip


[6/19/2023 6:36 PM] szybet
if those are my books filtered by you to make it wo

ok remove it


[6/19/2023 6:36 PM] tux_linux
from yesterday...


[6/19/2023 6:37 PM] szybet
remove it too after downloading


[6/19/2023 6:38 PM] szybet
if it will work - add a note to locallibrary.cpp about this


[6/19/2023 6:38 PM] szybet
first thing to check if something doesnt work - if sh on kobo recognises the files


[6/19/2023 6:39 PM] tux_linux
ok


[6/19/2023 6:42 PM] tux_linux
trying it


[6/19/2023 6:44 PM] tux_linux
it works


[6/19/2023 6:44 PM] tux_linux
png thumbnails too


[6/19/2023 6:44 PM] .kitkat1.
there are still special characters but no extra dots mid filenames, maybe its related?


[6/19/2023 6:44 PM] .kitkat1.
ignore the account switch


[6/19/2023 6:45 PM] tux_linux
idk


[6/19/2023 6:45 PM] tux_linux
i don't care now


[6/19/2023 6:45 PM] .kitkat1.
ok good


[6/19/2023 6:45 PM] .kitkat1.
so now only diagnostics mode?


[6/19/2023 6:46 PM] .kitkat1.
if yes, you can prepare a new nia image


[6/19/2023 6:46 PM] tux_linux
well, i will prepare it
it is supposed to work


[6/19/2023 6:46 PM] .kitkat1.
be sure of all keys


[6/19/2023 6:47 PM] tux_linux
the error you encountered isn't even key related


[6/19/2023 6:47 PM] tux_linux
also it wouldn't have worked on my glo hd


[6/19/2023 7:18 PM] tux_linux
i am uploading the image

{Reactions}
👍 

[6/19/2023 7:31 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/bundles/inkbox/native/n306/inkbox-2.0-n306.xz
it's up


[6/19/2023 7:32 PM] szybet
downloading it

{Reactions}
👍 

[6/19/2023 7:48 PM] tux_linux
If restore to root doesn't work, please post serial output or enable DISPLAY_DEBUG in diags flags


[6/19/2023 8:02 PM] szybet
added to todo: warning against waveform damaging the eink


[6/19/2023 8:21 PM] szybet
it should reboot after restoring or the screen goes black and it shuts down?


[6/19/2023 8:58 PM] tux_linux
Yes


[6/19/2023 8:58 PM] tux_linux
No reboot


[6/19/2023 9:00 PM] szybet
why btw


[6/19/2023 9:00 PM] szybet
it doesnt work


[6/19/2023 9:00 PM] szybet
still error 1


[6/19/2023 9:01 PM] szybet
serial output is enabled?


[6/19/2023 9:01 PM] szybet
also, serial output of what


[6/19/2023 9:04 PM] szybet
after attemptef fail, do i need to flash the whole image or just remove the dont boot flag


[6/19/2023 9:11 PM] tux_linux
Well post a boot log


[6/19/2023 9:12 PM] tux_linux
When it errors


[6/19/2023 9:12 PM] .kitkat1.
so what?


[6/19/2023 9:33 PM] szybet
removing flag wasnt enough, it writes somewhere with dd


[6/19/2023 9:33 PM] szybet
i will just reflash the image them...


[6/19/2023 9:43 PM] tux_linux
echo rooted | dd of=/dev/mmcblk0 bs=512 seek=79872


[6/19/2023 9:44 PM] tux_linux
Provide a boot log with error code 1


[6/19/2023 9:53 PM] szybet
```
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
read
else if(rv)
 * Power button input detected
 * Boot mode: Diagnostics
```


[6/19/2023 9:53 PM] szybet
cool logs


[6/19/2023 9:53 PM] szybet
you mean when i root the device or when i boot into error code 1?


[6/19/2023 9:53 PM] szybet
because the second, there is nothing there


[6/19/2023 10:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-3FB63.txt


[6/19/2023 10:15 PM] szybet
i see the poblem


[6/19/2023 10:45 PM] tux_linux
Ok I see it too


[6/19/2023 10:45 PM] tux_linux
Imgtool thing


[6/19/2023 10:52 PM] tux_linux
the nia uses zImage right?


[6/19/2023 10:59 PM] tux_linux
do you want another image to test it?


[6/19/2023 11:00 PM] tux_linux
well i got to make one anyways


[6/19/2023 11:07 PM] szybet
idk


[6/19/2023 11:07 PM] szybet
propably


[6/19/2023 11:07 PM] szybet
look inkbox.md in niaudio


[6/19/2023 11:07 PM] szybet
yes i want to


[6/19/2023 11:07 PM] szybet
library works


[6/19/2023 11:07 PM] szybet
books too


[6/19/2023 11:07 PM] szybet
with std kernel


[6/19/2023 11:08 PM] szybet
but xorg not


[6/19/2023 11:08 PM] szybet
fbdepth


[6/19/2023 11:08 PM] tux_linux
probably because of my change


[6/19/2023 11:08 PM] tux_linux
did it work with the other image?


[6/19/2023 11:08 PM] szybet
um?...


[6/19/2023 11:08 PM] szybet
which one


[6/19/2023 11:08 PM] tux_linux
yesterday


[6/19/2023 11:08 PM] szybet
i didnt tested


[6/19/2023 11:08 PM] tux_linux
ok


[6/19/2023 11:08 PM] szybet
this test doesnt make sense


[6/19/2023 11:08 PM] szybet
remove it


[6/19/2023 11:09 PM] szybet
and make a new image


[6/19/2023 11:09 PM] szybet
i'm available for the next hour


[6/19/2023 11:09 PM] tux_linux
well, does the first app you launch display correctly


[6/19/2023 11:09 PM] tux_linux
yes or no


[6/19/2023 11:09 PM] tux_linux
if no we need to fix it


[6/19/2023 11:10 PM] szybet
i dont think so


[6/19/2023 11:10 PM] tux_linux
ok


[6/19/2023 11:10 PM] szybet
ipd sleep doesnt helped


[6/19/2023 11:10 PM] tux_linux
without sleep before


[6/19/2023 11:10 PM] tux_linux
try it


[6/19/2023 11:10 PM] tux_linux
(reboot)


[6/19/2023 11:10 PM] szybet
it propably didn't helped


[6/19/2023 11:10 PM] tux_linux
i just care about the first launch
if it doesn't work it's unusable


[6/19/2023 11:10 PM] szybet
99% but i will try


[6/19/2023 11:10 PM] tux_linux
thanks


[6/19/2023 11:15 PM] szybet
its doubled on the top of the screen


[6/19/2023 11:16 PM] szybet
you know what i mean?


[6/19/2023 11:16 PM] tux_linux
no


[6/19/2023 11:16 PM] tux_linux
oh ok


[6/19/2023 11:16 PM] tux_linux
in x11?


[6/19/2023 11:16 PM] tux_linux
if so it doesn't work


[6/19/2023 11:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-04C2A.png


[6/19/2023 11:16 PM] szybet
in x11


[6/19/2023 11:16 PM] tux_linux
yea


[6/19/2023 11:17 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/d601a834122aa64cd2737c52cf7eba98a836ba85/etc/init.d/xorg.sh#LL108C1-L117C3

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/d601a834122aa64cd2737c52cf7eba98a836ba85/etc/init.d/xorg.sh
rootfs/etc/init.d/xorg.sh at d601a834122aa64cd2737c52cf7eba98a836ba...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-B0475


[6/19/2023 11:17 PM] szybet
?


[6/19/2023 11:17 PM] szybet
the root thing doesnt make sense


[6/19/2023 11:17 PM] szybet
also maybe you need to wait for /tmp/kobox_initial_launch_done? idk


[6/19/2023 11:18 PM] tux_linux
Provided it works for root, you can add an if clause for nia in there: https://github.com/Kobo-InkBox/rootfs/blob/d601a834122aa64cd2737c52cf7eba98a836ba85/etc/init.d/xorg.sh#L111
and change the fbdepth value until it works (8, 16 or 32)

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/d601a834122aa64cd2737c52cf7eba98a836ba85/etc/init.d/xorg.sh
rootfs/etc/init.d/xorg.sh at d601a834122aa64cd2737c52cf7eba98a836ba...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-B0475


[6/19/2023 11:18 PM] tux_linux
no, that just means the user has launched one app before launching the one currently executing
like, if you start an x11 app after boot, this will be false and set to true when it terminates
so the next kobox app switches fbdepth accordingly for it to work


[6/19/2023 11:19 PM] tux_linux
nothing here makes sense, so let's just accept it


[6/19/2023 11:19 PM] szybet
what


[6/19/2023 11:19 PM] tux_linux
i will make you an example


[6/19/2023 11:21 PM] tux_linux
```
if [ "${DEVICE}" == "n437" ] || [ "${DEVICE}" == "n306" ]; then
    # Don't even try to understand this
    # This runs when the device IS rooted - AND - it is the first launch of an X11 app since boot
        if grep -q "true" /opt/root/rooted && ! grep -q "true" /tmp/kobox_initial_launch_done; then
            if [ "${DEVICE}" == "n306" ]; then
                /opt/bin/fbink/fbdepth -d 16
            else
                /opt/bin/fbink/fbdepth -d <change the value here until it works, maybe the most likely to work is 8, maybe 32>
            fi
        fi
    else
        /opt/bin/fbink/fbdepth -d 32
    fi
elif [ "${DEVICE}" == "kt" ]; then
    /opt/bin/fbink/fbdepth -d 32
fi
```


[6/19/2023 11:22 PM] szybet
okay


[6/19/2023 11:22 PM] szybet
can you send the rooted kernel


[6/19/2023 11:22 PM] tux_linux
you have it in recoveryfs


[6/19/2023 11:22 PM] szybet
i will just flash it to have access to this


[6/19/2023 11:22 PM] tux_linux
no, false


[6/19/2023 11:22 PM] tux_linux
ok


[6/19/2023 11:22 PM] szybet
:D


[6/19/2023 11:22 PM] tux_linux
don't forget the flag


[6/19/2023 11:22 PM] tux_linux
well, i fixed it, but imgtool was only copying std kernel to recoveryfs


[6/19/2023 11:22 PM] tux_linux
so you don't have it


[6/19/2023 11:23 PM] tux_linux
hang on


[6/19/2023 11:23 PM] szybet
yep i know


[6/19/2023 11:23 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/misc/zImage-root


[6/19/2023 11:24 PM] tux_linux
?!!!!!


[6/19/2023 11:24 PM] tux_linux
what happened


[6/19/2023 11:24 PM] szybet
you forgot to remove debugiing logs


[6/19/2023 11:25 PM] szybet
i mean leave them but change the names


[6/19/2023 11:25 PM] szybet
i mean info


[6/19/2023 11:25 PM] tux_linux
no


[6/19/2023 11:25 PM] tux_linux
my glo hd doesn't print them


[6/19/2023 11:25 PM] tux_linux
it's on latest


[6/19/2023 11:25 PM] szybet
just look at the code


[6/19/2023 11:25 PM] tux_linux
i flashed image this morning


[6/19/2023 11:25 PM] szybet
also into diagnostics


[6/19/2023 11:27 PM] szybet
```
23:26 szybet@hyperbookszyb /home/szybet/Downloads
% sudo dd if=zImage-root of=/dev/mmcblk0 bs=512 seek=81920
0+0 records in
0+0 records out
0 bytes copied, 0.000128209 s, 0.0 kB/s
23:27 szybet@hyperbookszyb /home/szybet/Downloads
% 
```


[6/19/2023 11:27 PM] szybet
should it be like that


[6/19/2023 11:29 PM] tux_linux
no


[6/19/2023 11:29 PM] tux_linux
huh


[6/19/2023 11:29 PM] tux_linux
ls -shal zImage-root


[6/19/2023 11:30 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-EF57E.png


[6/19/2023 11:30 PM] szybet
thanks firefox


[6/19/2023 11:30 PM] szybet
what is your md5 of this file


[6/19/2023 11:31 PM] tux_linux
🥴


[6/19/2023 11:31 PM] tux_linux
wait


[6/19/2023 11:31 PM] tux_linux
```
build@inkbox ~/i/o/release (main)> sha256sum zImage-root 
36ace8b39304df781fd4ee655e229984a9aebd58a611a114a0fcdd24a06e2d24  zImage-root
build@inkbox ~/i/o/release (main)>
```
sha256


[6/19/2023 11:38 PM] szybet
you know why rooted works? because you added a if else containing it


[6/19/2023 11:38 PM] tux_linux
where


[6/19/2023 11:39 PM] tux_linux
for glo hd, the code that was there before didn't work
I had to add this


[6/19/2023 11:39 PM] tux_linux
it's probably normal that it does not behave the same on nia


[6/19/2023 11:39 PM] szybet
it works for the glo?


[6/19/2023 11:39 PM] tux_linux
so you just need to tell it to change it to another value


[6/19/2023 11:39 PM] tux_linux
well, by doing this i got the first x11 app after boot to launch on std kernel


[6/19/2023 11:40 PM] szybet
how do i debug this...


[6/19/2023 11:40 PM] tux_linux
rooted kernel still needs the other code


[6/19/2023 11:40 PM] szybet
im on rooted kernel now


[6/19/2023 11:40 PM] tux_linux
well, test two rootfs


[6/19/2023 11:40 PM] tux_linux
for one, set the value to 8


[6/19/2023 11:40 PM] tux_linux
the second, set the value to 32


[6/19/2023 11:40 PM] tux_linux
we already know that 16 doesn't work


[6/19/2023 11:40 PM] tux_linux
but this will not work for you


[6/19/2023 11:40 PM] tux_linux
because you are on rooted kernel


[6/19/2023 11:41 PM] tux_linux
why didn't i think of it before


[6/19/2023 11:41 PM] tux_linux
I will make a brief explanation


[6/19/2023 11:42 PM] tux_linux
1. On Glo HD, when I initially tested x11 on std kernel, it didn't work and lead to the garbled screen on first app launch after boot. So I changed the code in rootfs to account for this specific case with std kernels so that it could show up properly.
2. Rooted kernel on Glo HD still works with the other block of code executed
3. On Nia, it may work with the same value in root and in std kernel or it may need a different value for std kernel


[6/19/2023 11:42 PM] szybet
look post market thread


[6/19/2023 11:43 PM] szybet
this doesnt make sense


[6/19/2023 11:43 PM] szybet
why


[6/19/2023 11:43 PM] szybet
what is the diffrence


[6/19/2023 11:43 PM] szybet
maybe ask niluje?


[6/19/2023 11:44 PM] tux_linux
this *never* made any sense


[6/19/2023 11:44 PM] tux_linux
just try another value with rootfs on std kernel


[6/19/2023 11:44 PM] tux_linux
or just switch to the older file on an older commit


[6/19/2023 11:44 PM] tux_linux
wait


[6/19/2023 11:44 PM] szybet
what,,,


[6/19/2023 11:46 PM] tux_linux
1. pull latest rootfs repo
2. replace the entire xorg.sh file with this one https://raw.githubusercontent.com/Kobo-InkBox/rootfs/ce04c4854ee294739f1b6054db8900d5da2719b9/etc/init.d/xorg.sh
3. compress rootfs, sign it
4. revert to std kernel on nia
5. throw new rootfs in there
6. fresh boot and launch any x11 app


[6/19/2023 11:46 PM] tux_linux
the xorg.sh file is the one from when you fixed x11 on your nia


[6/19/2023 11:47 PM] tux_linux
theoretically, if rooted kernel behaves the same as std kernel, it should work on std kernel as well


[6/19/2023 11:47 PM] tux_linux
knowing this, I can add an if for nia to set the same value no matter if it is rooted or not


[6/19/2023 11:47 PM] tux_linux
is it more clear now?


[6/19/2023 11:48 PM] szybet
https://tenor.com/view/yes-gif-26077231

{Embed}
https://tenor.com/view/yes-gif-26077231
/mnt/data/projects/git/conversations/media/yes-66562.png

{Reactions}
👍 

[6/19/2023 11:57 PM] szybet
how do i take back rooted from the dd write


[6/19/2023 11:57 PM] szybet
write garbage there or what


[6/19/2023 11:57 PM] szybet
or should i not care


[6/19/2023 11:59 PM] tux_linux
`dd if=/dev/zero of=/dev/mmcblk0 bs=512 seek=79872 count=1`


[6/20/2023 12:08 AM] szybet
first boot worked


[6/20/2023 12:08 AM] szybet
i mean launch


[6/20/2023 12:08 AM] tux_linux
n i c e


[6/20/2023 12:09 AM] tux_linux
ok, so in theory depth is set to 16?


[6/20/2023 12:09 AM] tux_linux
yes


[6/20/2023 12:09 AM] tux_linux
we don't care about subsequent launches


[6/20/2023 12:09 AM] szybet
ipd wake up works, at least for the first app


[6/20/2023 12:09 AM] tux_linux
i will commit the change and you can test it with clean rootfs


[6/20/2023 12:09 AM] tux_linux
nice


[6/20/2023 12:09 AM] tux_linux
then we are d o n e


[6/20/2023 12:10 AM] szybet
image you mean :)?


[6/20/2023 12:10 AM] szybet
also dont celebrate


[6/20/2023 12:10 AM] tux_linux
well, first rootfs


[6/20/2023 12:10 AM] szybet
let me launch the second time


[6/20/2023 12:10 AM] tux_linux
then image


[6/20/2023 12:10 AM] tux_linux
i don't care about second time


[6/20/2023 12:10 AM] tux_linux
i will write that it is experimental


[6/20/2023 12:11 AM] tux_linux
user can at least one app for each device start, so it's not so bad


[6/20/2023 12:11 AM] tux_linux
the thing i wanted not to happen was for it to be unable to set the correct bitdepth for the first launch


[6/20/2023 12:11 AM] szybet
it workes...


[6/20/2023 12:12 AM] szybet
on root kernel


[6/20/2023 12:12 AM] tux_linux
?!


[6/20/2023 12:12 AM] tux_linux
std kernel?


[6/20/2023 12:12 AM] tux_linux
i said std


[6/20/2023 12:12 AM] tux_linux
of course it works on root kernel


[6/20/2023 12:12 AM] tux_linux
did you switch to std or not?


[6/20/2023 12:12 AM] szybet
second launch works


[6/20/2023 12:12 AM] szybet
https://tenor.com/view/thor-ragnarok-yes-thor-thor3-happy-excited-gif-15710556

{Embed}
https://tenor.com/view/thor-ragnarok-yes-thor-thor3-happy-excited-gif-15710556
/mnt/data/projects/git/conversations/media/thor-ragnarok-yes-thor-363F1.png


[6/20/2023 12:12 AM] tux_linux
.


[6/20/2023 12:12 AM] szybet
yep, std


[6/20/2023 12:12 AM] tux_linux
ok


[6/20/2023 12:12 AM] tux_linux
then, good


[6/20/2023 12:13 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-187B3.txt


[6/20/2023 12:13 AM] szybet
here is the log


[6/20/2023 12:13 AM] szybet
second ipd wake up doesnt work


[6/20/2023 12:13 AM] tux_linux
ok, expected


[6/20/2023 12:13 AM] tux_linux
...


[6/20/2023 12:13 AM] szybet
what the fuck


[6/20/2023 12:13 AM] szybet
NOOO :(


[6/20/2023 12:14 AM] tux_linux
you're on std kernel


[6/20/2023 12:14 AM] tux_linux
something changed


[6/20/2023 12:14 AM] tux_linux
we don't know what


[6/20/2023 12:14 AM] tux_linux
but something changed


[6/20/2023 12:14 AM] tux_linux
it probably works on rooted one


[6/20/2023 12:14 AM] szybet
on low level


[6/20/2023 12:14 AM] szybet
your init


[6/20/2023 12:14 AM] tux_linux
well, find it because i can't


[6/20/2023 12:15 AM] szybet
whatever


[6/20/2023 12:15 AM] szybet
i think IPD just needs to do the same as xorg.sh?


[6/20/2023 12:15 AM] tux_linux
i'm not sure


[6/20/2023 12:18 AM] szybet
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/adc6f2be52e35e0ca046e716ee3756f27f19696a/src/fbinkFunctions.cpp#LL159C1-L164C8

{Embed}
https://github.com/Kobo-InkBox/inkbox-power-daemon/blob/adc6f2be52e35e0ca046e716ee3756f27f19696a/src/fbinkFunctions.cpp
inkbox-power-daemon/src/fbinkFunctions.cpp at adc6f2be52e35e0ca046e...
InkBox Power Daemon (IPD) source code. Contribute to Kobo-InkBox/inkbox-power-daemon development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-power-daemon-C2D7A


[6/20/2023 12:18 AM] szybet
here adding the if for 32 bit?


[6/20/2023 12:18 AM] tux_linux
it works with 32 for you?


[6/20/2023 12:18 AM] tux_linux
oh the second launch is 32


[6/20/2023 12:18 AM] tux_linux
well, maybe


[6/20/2023 12:18 AM] tux_linux
for nia


[6/20/2023 12:19 AM] szybet
😒


[6/20/2023 12:19 AM] szybet
should i be able to login via serial?


[6/20/2023 12:19 AM] tux_linux
no


[6/20/2023 12:19 AM] tux_linux
i know


[6/20/2023 12:19 AM] tux_linux
it's pain


[6/20/2023 12:20 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-574CF.txt


[6/20/2023 12:20 AM] szybet
i just did


[6/20/2023 12:20 AM] tux_linux
WHAT


[6/20/2023 12:20 AM] tux_linux
show me /etc/passwd


[6/20/2023 12:20 AM] tux_linux
^$%@%^$E bugs


[6/20/2023 12:21 AM] szybet
```
* Warning *
Root filesystem is mounted read-only.
Invoke `ifsctl mnt rootfs rw' to make it read-write.
kobo:~# cat /etc/passwd
root:x:0:0:root:/root:/bin/ash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
news:x:9:13:news:/usr/lib/news:/sbin/nologin
uucp:x:10:14:uucp:/var/spool/uucppublic:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
man:x:13:15:man:/usr/man:/sbin/nologin
postmaster:x:14:12:postmaster:/var/spool/mail:/sbin/nologin
cron:x:16:16:cron:/var/spool/cron:/sbin/nologin
ftp:x:21:21::/var/lib/ftp:/sbin/nologin
sshd:x:22:22:sshd:/dev/null:/sbin/nologin
at:x:25:25:at:/var/spool/cron/atjobs:/sbin/nologin
squid:x:31:31:Squid:/var/cache/squid:/sbin/nologin
xfs:x:33:33:X Font Server:/etc/X11/fs:/sbin/nologin
games:x:35:35:games:/usr/games:/sbin/nologin
postgres:x:70:70::/var/lib/postgresql:/bin/sh
cyrus:x:85:12::/usr/cyrus:/sbin/nologin
vpopmail:x:89:89::/var/vpopmail:/sbin/nologin
ntp:x:123:123:NTP:/var/empty:/sbin/nologin
smmsp:x:209:209:smmsp:/var/spool/mqueue:/sbin/nologin
guest:x:405:100:guest:/dev/null:/sbin/nologin
nobody:x:65534:65534:nobody:/:/sbin/nologin
chrony:x:100:101:chrony:/var/log/chrony:/sbin/nologin
user:x:1000:1000:Linux Us
```


[6/20/2023 12:21 AM] tux_linux
I'm THAT dumb?!

{Attachments}
/mnt/data/projects/git/conversations/media/image-B68F5.png


[6/20/2023 12:21 AM] tux_linux
well, ok, thanks for finding this thing


[6/20/2023 12:21 AM] tux_linux
now you can debug... i guess


[6/20/2023 12:23 AM] szybet
hmm do i add and `and` if xorg app is running too?


[6/20/2023 12:23 AM] tux_linux
i don't know... try it?


[6/20/2023 12:24 AM] szybet
😞


[6/20/2023 12:25 AM] tux_linux
`user:x:1000:1000:Linux Us` is it really the end of the file?


[6/20/2023 12:25 AM] tux_linux
it's supposed to say `Linux User` and something else


[6/20/2023 12:26 AM] szybet
```
user:x:1000:1000:Linux User,,,:/:/bin/ash
```


[6/20/2023 12:27 AM] tux_linux
ok good


[6/20/2023 12:27 AM] tux_linux
please read this when you can and tell me if it makes sense because I'm not even sure of what I wrote; thanks

{Attachments}
/mnt/data/projects/git/conversations/media/image-36B36.png


[6/20/2023 12:29 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-1164E.png


[6/20/2023 12:29 AM] szybet
what


[6/20/2023 12:29 AM] szybet
16 and 16


[6/20/2023 12:30 AM] tux_linux
this is better, probably

{Attachments}
/mnt/data/projects/git/conversations/media/image-3AC18.png


[6/20/2023 12:30 AM] tux_linux
read it five times


[6/20/2023 12:31 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-F98D6.png


[6/20/2023 12:31 AM] szybet
doesnt make sense


[6/20/2023 12:31 AM] tux_linux
explain


[6/20/2023 12:31 AM] szybet
i fucking hate shell


[6/20/2023 12:31 AM] szybet
piece of shit every line is a diffrent command


[6/20/2023 12:31 AM] tux_linux
even in cpp it would not be understandable


[6/20/2023 12:32 AM] szybet
look at ipd


[6/20/2023 12:32 AM] tux_linux
i will try to translate it for you


[6/20/2023 12:33 AM] szybet
doesnt make sense


[6/20/2023 12:33 AM] szybet
you execute 2 times the same thing in diffrent if elses


[6/20/2023 12:33 AM] tux_linux
```
echo $FB_UR > /sys/class/graphics/fb0/rotate
if [ "${DEVICE}" == "n437" ] || [ "${DEVICE}" == "n306" ]; then
    ## Don't even try to understand this
    # This runs when the device IS rooted * AND * it's the FIRST launch of an X11 app since boot * AND * we are NOT running on a Kobo Nia
    if (the device is rooted) && (x11 has not started an app yet) && (we are not on nia); then
        /opt/bin/fbink/fbdepth -d 16
    # This runs when either the device is NOT rooted * OR * it's the FIRST launch of an X11 app since boot * OR * (we are running on a Kobo Nia * AND * it's the first time we launch an X11 app)
    else if (x11 has not started an app yet); then
        /opt/bin/fbink/fbdepth -d 16
    # This runs when the device ALREADY launched an X11 app since boot * OR * when it's on a standard kernel
    else
        /opt/bin/fbink/fbdepth -d 32
    fi
elif [ "${DEVICE}" == "kt" ]; then
    /opt/bin/fbink/fbdepth -d 32
fi
```


[6/20/2023 12:33 AM] tux_linux
well, this is the point: they're different


[6/20/2023 12:34 AM] tux_linux
because if the two conditions of the first if are true but we are on nia, it will execute the else if below, provided it's the first launch


[6/20/2023 12:34 AM] tux_linux
and this, regardless of whether or not the device is rooted


[6/20/2023 12:34 AM] szybet
will this work?


[6/20/2023 12:34 AM] tux_linux
i know this can cause brain damage


[6/20/2023 12:35 AM] tux_linux
well, i was hoping you could try it


[6/20/2023 12:35 AM] szybet
i will then


[6/20/2023 12:35 AM] szybet
im trying ipd


[6/20/2023 12:35 AM] szybet
arent you realying on sshd in xorg to do smth?


[6/20/2023 12:35 AM] tux_linux
?


[6/20/2023 12:35 AM] szybet
idk, kterm support?


[6/20/2023 12:35 AM] szybet
something like that


[6/20/2023 12:36 AM] szybet
im trying to make sense


[6/20/2023 12:36 AM] tux_linux
well i don't think so?


[6/20/2023 12:36 AM] tux_linux
idk


[6/20/2023 12:39 AM] tux_linux
i pushed the commits, you can simply git pull and overwrite the previous xorg.sh


[6/20/2023 12:46 AM] szybet
after first xorg app launch, qt apps are affected too


[6/20/2023 12:47 AM] tux_linux
wdym


[6/20/2023 12:47 AM] tux_linux
why did it work


[6/20/2023 12:48 AM] tux_linux
it doesn't anymore?


[6/20/2023 12:49 AM] szybet
what did


[6/20/2023 12:50 AM] szybet
im talking about sleep


[6/20/2023 12:50 AM] tux_linux
oh gui is affected on wake up?


[6/20/2023 12:51 AM] tux_linux
i had an idea earlier
what if you try, before sleep, to get the current bitdepth and then you restore it after sleep, ***ignoring*** any other nonsensical if's?


[6/20/2023 12:51 AM] tux_linux
and this, **everytime**


[6/20/2023 12:51 AM] tux_linux
i doubt it will work but well... if it can be that simple


[6/20/2023 12:53 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-65F7D.png


[6/20/2023 12:53 AM] szybet
what do i even do here..


[6/20/2023 12:53 AM] tux_linux
why no matching function


[6/20/2023 12:53 AM] szybet
what


[6/20/2023 12:54 AM] tux_linux
try this maybe? simplest


[6/20/2023 1:00 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-89BAC.png


[6/20/2023 1:00 AM] szybet
what is this


[6/20/2023 1:01 AM] tux_linux
https://github.com/NiLuJe/FBInk/blob/master/fbink.h

{Embed}
https://github.com/NiLuJe/FBInk/blob/master/fbink.h
FBInk/fbink.h at master · NiLuJe/FBInk
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at master · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-AC252


[6/20/2023 1:01 AM] szybet
i see it


[6/20/2023 1:01 AM] szybet
and?


[6/20/2023 1:02 AM] tux_linux
should use `fbink_get_state` instead


[6/20/2023 1:02 AM] tux_linux
you can just initialize FBInk config as { 0 }


[6/20/2023 1:03 AM] tux_linux
will get you this
https://github.com/NiLuJe/FBInk/blob/d4c5d670fe1123744370c9a0d20dc77a327f8501/fbink.h#L477-L519

{Embed}
https://github.com/NiLuJe/FBInk/blob/d4c5d670fe1123744370c9a0d20dc77a327f8501/fbink.h
FBInk/fbink.h at d4c5d670fe1123744370c9a0d20dc77a327f8501 · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/fbink.h at d4c5d670fe1123744370c9a0d20dc77a327f8501 · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-AC252


[6/20/2023 1:04 AM] tux_linux
i don't know what is `restrict` doing


[6/20/2023 1:04 AM] tux_linux
if you just want to check if it will work or not, just check the output of `fbdepth -g` for now


[6/20/2023 1:05 AM] szybet
FBINK_API


[6/20/2023 1:05 AM] szybet
what is this


[6/20/2023 1:06 AM] tux_linux
@NiLuJe how would you do to check the current bitdepth of a screen with fbink functions? we are a bit lost. thanks
edit: we will try to learn from fbdepth.c


[6/20/2023 1:06 AM] szybet
where is the source code of fbdepth


[6/20/2023 1:06 AM] tux_linux
hidden somewhere


[6/20/2023 1:06 AM] tux_linux
not on github


[6/20/2023 1:06 AM] tux_linux
wait i will try to find it


[6/20/2023 1:06 AM] szybet
im tired


[6/20/2023 1:06 AM] tux_linux
it's a good idea to check it


[6/20/2023 1:06 AM] szybet
i will just call fbdepth


[6/20/2023 1:06 AM] tux_linux
yes, do that for now, if it works i can write the C++ part


[6/20/2023 1:13 AM] tux_linux
oh, it exists


[6/20/2023 1:13 AM] tux_linux
https://github.com/NiLuJe/FBInk/blob/d4c5d670fe1123744370c9a0d20dc77a327f8501/utils/fbdepth.c


[6/20/2023 1:13 AM] tux_linux
I was confusing it with fbgrab


[6/20/2023 1:15 AM] tux_linux
https://github.com/NiLuJe/FBInk/blob/d4c5d670fe1123744370c9a0d20dc77a327f8501/utils/fbdepth.c#L485


[6/20/2023 1:18 AM] ninuje
Yup, only available on Mk. 7+, possibly Mk. 6+


[6/20/2023 1:25 AM] tux_linux
Any news?


[6/20/2023 1:26 AM] tux_linux
You can on mk5 or I am horribly wrong


[6/20/2023 1:26 AM] tux_linux
Oh nvm


[6/20/2023 1:26 AM] tux_linux
Mk5 don't have frontlights


[6/20/2023 1:26 AM] tux_linux
...


[6/20/2023 1:33 AM] ninuje
Not available on an H2O, FWIW (which is Mk. 5 ;p).


[6/20/2023 1:34 AM] tux_linux
oh ok


[6/20/2023 1:34 AM] tux_linux
well I don't have that one


[6/20/2023 1:34 AM] ninuje
https://github.com/NiLuJe/FBInk/blob/master/utils/fbdepth.c

{Embed}
https://github.com/NiLuJe/FBInk/blob/master/utils/fbdepth.c
FBInk/utils/fbdepth.c at master · NiLuJe/FBInk
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - FBInk/utils/fbdepth.c at master · NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-AC252


[6/20/2023 1:34 AM] tux_linux
yes, i will check it


[6/20/2023 1:34 AM] ninuje
You may have better luck actually reading the API doc instead


[6/20/2023 1:35 AM] ninuje
The stucture is a bit wonky, because this was initially implemented *inside* fbdepth


[6/20/2023 1:35 AM] ninuje
And it was later retrofitted to use the API when it moved to the API


[6/20/2023 1:35 AM] tux_linux
well, i'm null (yes, pun in french) in C, so i was a bit lost with `restrict`


[6/20/2023 1:35 AM] ninuje
So there are some clunky constructs


[6/20/2023 1:36 AM] ninuje
restrict basically means the developer provides a guarantee to the compiler (and, well, the user ;p) that that pointer should not point to data shared with another pointer in that same scope

{Reactions}
👍 

[6/20/2023 1:36 AM] ninuje
Mainly for optimizer purposes


[6/20/2023 1:36 AM] ninuje
But a basic example is memcpy


[6/20/2023 1:36 AM] tux_linux
ok, I understand it a bit better now


[6/20/2023 1:37 AM] ninuje
making sure src & dst have no overlap allows the compiler to forgo a whole lot of costly safety checks

{Reactions}
👍 

[6/20/2023 1:39 AM] ninuje
fbgrab is at http://svn.ak-team.com/svn/Configs/trunk/Kindle/Misc/FBGrab/ FWIW


[6/20/2023 1:40 AM] ninuje
(Although upstream moved to github, so there's one there now, and it may be slightly less awful for our usecases than what I was working on at the time)

{Reactions}
👍 

[6/20/2023 1:41 AM] tux_linux
The one in inkbox works great for now, if a problem arises I will know where to check, thanks


[6/20/2023 1:46 AM] ninuje
basically, if white isn't actually pure white when you grab a 16bpp fb, it's not fixed ;p


[6/20/2023 5:01 AM] tux_linux
new bugs dropped


[6/20/2023 5:02 AM] tux_linux
happens on mini when only one network is detected *and* we are connected to a network


[6/20/2023 5:02 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-B2BC7.txt


[6/20/2023 5:49 AM] tux_linux
fixed


[6/20/2023 5:51 AM] tux_linux
after that i tested it with 1, 2 and 3 networks


[6/20/2023 5:51 AM] tux_linux
so it works


[6/20/2023 5:51 AM] tux_linux
probably


[6/20/2023 6:23 AM] tux_linux
i will take care of x11 tomorrow
now it's too much


[6/20/2023 11:02 AM] szybet
cool


[6/20/2023 11:02 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-193A9.png

{Reactions}
🥴 

[6/20/2023 11:03 AM] szybet
bugfixes make brrr


[6/20/2023 6:35 PM] szybet
and?


[6/20/2023 7:16 PM] tux_linux
Got out of 3h chemistry exam


[6/20/2023 7:16 PM] tux_linux
Getting back to it when I'm home


[6/20/2023 7:18 PM] szybet
Is every school in canada crazy


[6/20/2023 7:18 PM] szybet
?


[6/20/2023 7:19 PM] tux_linux
Probably?


[6/20/2023 7:19 PM] tux_linux
We are used to it anyway


[6/20/2023 7:19 PM] szybet
Well


[6/20/2023 7:19 PM] szybet
Does a school degree mean anything in canada at work?


[6/20/2023 7:20 PM] tux_linux
Yes


[6/20/2023 7:20 PM] szybet
For real?


[6/20/2023 7:20 PM] tux_linux
Look up "DES diploma quebec"


[6/20/2023 7:20 PM] szybet
Well good to know


[6/20/2023 7:20 PM] tux_linux
Yes


[6/20/2023 7:21 PM] szybet
In poland its worthless


[6/20/2023 7:21 PM] tux_linux
Sad


[6/20/2023 7:21 PM] szybet
Skill is important


[6/20/2023 7:21 PM] szybet
Which makes sense

{Reactions}
👍 

[6/20/2023 8:06 PM] tux_linux
ok getting back to it


[6/20/2023 8:10 PM] szybet
anything for me to do?


[6/20/2023 8:10 PM] szybet
or can i go back to the rss app


[6/20/2023 8:10 PM] tux_linux
for now you can


[6/20/2023 8:10 PM] tux_linux
as soon as i upload the image
please test it


[6/20/2023 8:10 PM] szybet
im available till 00:00 GMT+2


[6/20/2023 8:10 PM] tux_linux
yes


[6/20/2023 8:11 PM] tux_linux
i hope we will be done with the code part at that point


[6/20/2023 8:11 PM] szybet
we said that 3 times already


[6/20/2023 8:11 PM] szybet
but yes


[6/20/2023 8:11 PM] tux_linux
yes


[6/20/2023 8:12 PM] tux_linux
i recorded a bit more yesterday


[6/20/2023 8:12 PM] tux_linux
now only encrypted storage, library widget and home page is missing


[6/20/2023 8:12 PM] tux_linux
and maybe diags


[6/20/2023 8:12 PM] szybet
okay


[6/20/2023 8:12 PM] szybet
will you just upload those videos combined in montage on youtube or yolo it and seperate


[6/20/2023 8:13 PM] tux_linux
i will make an unique video


[6/20/2023 8:13 PM] szybet
i hope it wont take long to make


[6/20/2023 8:13 PM] tux_linux
me too


[6/20/2023 8:13 PM] tux_linux
i already have it started


[6/20/2023 8:13 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-105DB.png


[6/20/2023 8:14 PM] tux_linux
at least having a mac for this is a good idea


[6/20/2023 8:14 PM] szybet
ffmpeg hehe


[6/20/2023 8:15 PM] tux_linux
well, rendering speed is much better than on any other computer i have


[6/20/2023 8:15 PM] tux_linux
i usually use kdenlive on linux but on macos it doesn't have the native arm version


[6/20/2023 8:17 PM] tux_linux
ok so i crash test x11?


[6/20/2023 8:17 PM] tux_linux
suspend in every situation possible, every possible time?


[6/20/2023 8:22 PM] szybet
depends what ` every situation possible, every possible time` is ;)


[6/20/2023 8:22 PM] tux_linux
well i will see


[6/20/2023 8:22 PM] tux_linux
is kobox suspend still experimental?


[6/20/2023 8:23 PM] szybet
it always will be


[6/20/2023 8:23 PM] tux_linux
ok


[6/20/2023 8:23 PM] tux_linux
passed the first test


[6/20/2023 8:23 PM] tux_linux
suspend while running first x11 app


[6/20/2023 8:24 PM] tux_linux
oh i also need to find how to use fbdepth


[6/20/2023 8:24 PM] szybet
no you dont


[6/20/2023 8:24 PM] szybet
todo 2.1


[6/20/2023 8:24 PM] tux_linux
passed the second test


[6/20/2023 8:24 PM] szybet
please


[6/20/2023 8:24 PM] tux_linux
ok, sold


[6/20/2023 8:26 PM] tux_linux
passed the third test; launching 2nd x11 app


[6/20/2023 8:26 PM] tux_linux
passed fourth test; waking from 2nd x11 app


[6/20/2023 8:27 PM] szybet
thats enough ;p


[6/20/2023 8:27 PM] tux_linux
also we didn't add an exception for when lockscreen is enabled but it's on x11?


[6/20/2023 8:27 PM] tux_linux
it just hangs the screen


[6/20/2023 8:27 PM] szybet
what exception


[6/20/2023 8:27 PM] tux_linux
which is probably good anyway


[6/20/2023 8:27 PM] tux_linux
Qt lives on another planet


[6/20/2023 8:27 PM] szybet
what


[6/20/2023 8:27 PM] tux_linux
and the other planet isn't available at that time


[6/20/2023 8:27 PM] szybet
what


[6/20/2023 8:27 PM] tux_linux
i.e. qt libs and inkbox_gui isn't running while x11 is


[6/20/2023 8:28 PM] tux_linux
it's probably a good thing anyway


[6/20/2023 8:28 PM] szybet
todo 2.1


[6/20/2023 8:28 PM] tux_linux
also, we wrote that kobox support was experimental


[6/20/2023 8:28 PM] tux_linux
so, no worries


[6/20/2023 8:28 PM] tux_linux
i added it


[6/20/2023 8:29 PM] tux_linux
ok, passed every test
*on root kernel*
now trying with std one


[6/20/2023 8:44 PM] tux_linux
yay! it doesn't work on std kernel


[6/20/2023 8:44 PM] szybet
at all or what


[6/20/2023 8:44 PM] szybet
also, is it latest ipd?


[6/20/2023 8:45 PM] tux_linux
it's xorg.sh's fault


[6/20/2023 8:45 PM] tux_linux
i will try with an older script


[6/20/2023 8:46 PM] szybet
good


[6/20/2023 8:46 PM] szybet
and bad


[6/20/2023 8:46 PM] tux_linux
ye


[6/20/2023 8:49 PM] tux_linux
nice we have 110 stars now


[6/20/2023 8:54 PM] szybet
nice


[6/20/2023 8:54 PM] szybet
for such an ambitious project its laughably low


[6/20/2023 8:56 PM] tux_linux
yes i know


[6/20/2023 8:57 PM] tux_linux
maybe 2.0 will help


[6/20/2023 8:57 PM] tux_linux
or not at all


[6/20/2023 8:57 PM] tux_linux
maybe we shouldn't expect anything


[6/20/2023 8:58 PM] tux_linux
x11 you suck


[6/20/2023 8:59 PM] szybet
really anything is needed


[6/20/2023 8:59 PM] szybet
who added tags lately? :D


[6/20/2023 8:59 PM] tux_linux
older script didn't work


[6/20/2023 8:59 PM] tux_linux
it did yesterday


[6/20/2023 9:00 PM] szybet
um maybe reboot


[6/20/2023 9:00 PM] szybet
what device


[6/20/2023 9:00 PM] tux_linux
glohd


[6/20/2023 9:00 PM] tux_linux
i will debug it
*sigh*


[6/20/2023 9:01 PM] szybet
can you prepare the nia image


[6/20/2023 9:01 PM] szybet
so i will see if it works with bare std


[6/20/2023 9:01 PM] tux_linux
not until I get xorg.sh to behave


[6/20/2023 9:03 PM] tux_linux
it's sad
i would like to be doing an exam or some homework
at least if you don't understand it you know there's an answer somewhere
i can't figure out how to answer why x11 behaves differently on std/root


[6/20/2023 9:04 PM] szybet
if you want to spend more time on it try to slowly modify std kernel to behave like root


[6/20/2023 9:05 PM] tux_linux
maybe it's a compiler issue


[6/20/2023 9:05 PM] tux_linux
anyway, now both root and std kernels were compiled with the same machine and compiler


[6/20/2023 9:05 PM] szybet
you say that now


[6/20/2023 9:05 PM] szybet
;-;


[6/20/2023 9:05 PM] tux_linux
well, i thought of it now?


[6/20/2023 9:05 PM] szybet
oh ok


[6/20/2023 9:05 PM] szybet
well try


[6/20/2023 9:05 PM] tux_linux
yes... its booting


[6/20/2023 9:07 PM] tux_linux
the only part where it executes fbdepth in kernel is after x11 launch
and this is done on both root and non-root kernels

{Attachments}
/mnt/data/projects/git/conversations/media/image-9EFBC.png


[6/20/2023 9:07 PM] tux_linux
so... let's hope it doesn't work now


[6/20/2023 9:08 PM] tux_linux
well, maybe this block of code should not even run
idk


[6/20/2023 9:08 PM] tux_linux
yea.
of course.
you work on root kernel.


[6/20/2023 9:08 PM] szybet
i dont understand


[6/20/2023 9:09 PM] tux_linux
with the same rootfs, kernel compiled on same machine, it works with root kernel


[6/20/2023 9:09 PM] tux_linux
i think i will add a backdoor in some script before switching to std


[6/20/2023 9:09 PM] szybet
maybe there is a problem when building the kernel


[6/20/2023 9:10 PM] tux_linux
idk


[6/20/2023 9:10 PM] szybet
like the script


[6/20/2023 9:13 PM] szybet
what is dfl


[6/20/2023 9:14 PM] tux_linux
direct firmware loader


[6/20/2023 9:14 PM] tux_linux
exports mmc over usb


[6/20/2023 9:14 PM] tux_linux
whole mmc


[6/20/2023 9:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-95BB4.png


[6/20/2023 9:15 PM] tux_linux
well, it's a login shell


[6/20/2023 9:15 PM] szybet
what if xorg requires a login shell


[6/20/2023 9:15 PM] tux_linux
on my glo hd i don't even have that flag set


[6/20/2023 9:16 PM] tux_linux
so this goes directly to the else clause


[6/20/2023 9:16 PM] szybet
what is the default shell for root


[6/20/2023 9:16 PM] szybet
on std


[6/20/2023 9:16 PM] szybet
is there any?


[6/20/2023 9:16 PM] tux_linux
ash


[6/20/2023 9:16 PM] tux_linux
but it goes to nologin


[6/20/2023 9:17 PM] szybet
so its nologin?


[6/20/2023 9:17 PM] tux_linux
also, it didn't work yesterday before we changed it


[6/20/2023 9:17 PM] tux_linux
the init bug


[6/20/2023 9:17 PM] tux_linux
where it was always mounting passwd_root


[6/20/2023 9:17 PM] tux_linux
that's why you were able to login via serial


[6/20/2023 9:17 PM] tux_linux
so probably not the issue


[6/20/2023 9:18 PM] szybet
add a long delay in init in std kernel and try


[6/20/2023 9:19 PM] szybet
root kernel may boot longer


[6/20/2023 9:19 PM] szybet
its really my only quess


[6/20/2023 9:19 PM] szybet
i have go through the whole init source code


[6/20/2023 9:19 PM] tux_linux
delay for what


[6/20/2023 9:20 PM] szybet
just delay


[6/20/2023 9:22 PM] szybet
what is rcS


[6/20/2023 9:23 PM] tux_linux
first boot script


[6/20/2023 9:23 PM] tux_linux
runs almost nothing


[6/20/2023 9:25 PM] szybet
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/checksum-verify
kernel/initrd/common/checksum-verify at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[6/20/2023 9:25 PM] szybet
heresy


[6/20/2023 9:25 PM] tux_linux
well, i will remove it in 2.1


[6/20/2023 9:25 PM] tux_linux
but for now let's not create more problems


[6/20/2023 9:26 PM] szybet
i just say, nothing more


[6/20/2023 9:26 PM] szybet
i hope you dont use
https://github.com/Kobo-InkBox/kernel/blob/master/scripts/build_all.sh

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/scripts/build_all.sh
kernel/scripts/build_all.sh at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-07C4C


[6/20/2023 9:27 PM] tux_linux
no


[6/20/2023 9:35 PM] szybet
i went through all sources - kernel, init, imgtool - found nothing


[6/20/2023 9:35 PM] szybet
maybe compile init in a more safer way with gcc? idk if there is such options


[6/20/2023 9:36 PM] tux_linux
even my backdoor doesn't work


[6/20/2023 9:36 PM] tux_linux
;-;


[6/20/2023 9:36 PM] szybet
what


[6/20/2023 9:36 PM] tux_linux
i wrote to usbnet service script so that it wouldn't care about root


[6/20/2023 9:36 PM] tux_linux
but it just ignores me?!


[6/20/2023 9:37 PM] szybet
it isint started?


[6/20/2023 9:37 PM] szybet
https://blogs.oracle.com/linux/post/making-code-more-secure-with-gcc-part-1


[6/20/2023 9:37 PM] szybet
add all the options maybe


[6/20/2023 9:37 PM] tux_linux
it won't compile


[6/20/2023 9:37 PM] tux_linux
kobo kernel is too much flawed


[6/20/2023 9:37 PM] tux_linux
also if i do that we will spend one more month before releasing inkbox 2.0


[6/20/2023 9:38 PM] tux_linux
well ok, at least wifi backdoor works


[6/20/2023 9:38 PM] szybet
well okay


[6/20/2023 9:38 PM] szybet
then just... good luck


[6/20/2023 9:38 PM] tux_linux
yea


[6/20/2023 9:38 PM] tux_linux
initial depth is 8


[6/20/2023 9:38 PM] tux_linux
then script switches it to 32


[6/20/2023 9:39 PM] tux_linux
hmmmmm


[6/20/2023 9:39 PM] tux_linux
```
if ! grep -q "true" /tmp/kobox_initial_launch_done; then
        /opt/bin/fbink/fbdepth -d 16
    else
```


[6/20/2023 9:39 PM] tux_linux
if xorg hasn't been started yet


[6/20/2023 9:39 PM] tux_linux
run depth 16


[6/20/2023 9:39 PM] szybet
hmmm?'


[6/20/2023 9:39 PM] tux_linux
right?


[6/20/2023 9:40 PM] szybet
does shell `not` work like that?


[6/20/2023 9:40 PM] tux_linux
if i do not see true in a file that tells me that an app has already been launched


[6/20/2023 9:40 PM] tux_linux
then i run fbdepth -d 16


[6/20/2023 9:40 PM] tux_linux
std kernel goes directly to fbdepth -d 32


[6/20/2023 9:40 PM] tux_linux
wtf


[6/20/2023 9:40 PM] szybet
maybe spped is the issye


[6/20/2023 9:41 PM] tux_linux
no


[6/20/2023 9:41 PM] tux_linux
it just


[6/20/2023 9:41 PM] tux_linux
reads from a file


[6/20/2023 9:41 PM] szybet
you need to wait for smth


[6/20/2023 9:41 PM] tux_linux
that doesn't exist


[6/20/2023 9:41 PM] szybet
check for it then idk


[6/20/2023 9:41 PM] tux_linux
this file doesn't exist unless you launch a second x application in the same uptime


[6/20/2023 9:41 PM] tux_linux
yeah i will debug


[6/20/2023 9:42 PM] tux_linux
for more security we should add an `ss` check on ipd to check if there are active ssh sessions while on std kernel
then make the device poweroff if it finds one


[6/20/2023 9:42 PM] tux_linux
i know you won't like it


[6/20/2023 9:42 PM] szybet
About my bad writing: im slowly loosing keycaps

{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230620_214143-8A6D6.jpg


[6/20/2023 9:42 PM] tux_linux
nice


[6/20/2023 9:43 PM] szybet
2.1 please


[6/20/2023 9:43 PM] szybet
thank you


[6/20/2023 9:43 PM] szybet
add it to todo


[6/20/2023 9:43 PM] tux_linux
yes


[6/20/2023 9:43 PM] tux_linux
done


[6/20/2023 9:48 PM] szybet
maybe talk to dill to prepare emails / messages for the yt guys


[6/20/2023 9:50 PM] kuratius
Less evil: disable password ssh, only allow ssh keys, generate key on first install or replace if older than x days


[6/20/2023 9:50 PM] kuratius
There might be legitimate reasons to ssh into a device


[6/20/2023 9:50 PM] szybet
std kernel doesnt allow logins at all


[6/20/2023 9:50 PM] kuratius
Then why does it have ssh working?


[6/20/2023 9:51 PM] szybet
you know what? there is a fancy button in diagnostics of inkbox that transforms the device to rooted


[6/20/2023 9:51 PM] kuratius
Oh neat


[6/20/2023 9:51 PM] szybet
rooted mode for inkbox - ssh, serial, telnet, xorg terminal - we got you

std mode - even root has the nologin shell you wont get in


[6/20/2023 9:52 PM] tux_linux
well i put a backdoor in it


[6/20/2023 9:52 PM] tux_linux
it would be too easy for users to do the same thing


[6/20/2023 9:52 PM] tux_linux
you just throw some files in the rootfs cache folder


[6/20/2023 9:52 PM] szybet
only for testing?


[6/20/2023 9:52 PM] tux_linux
yes


[6/20/2023 9:52 PM] tux_linux
but still


[6/20/2023 9:52 PM] szybet
ummmm todo 2.1


[6/20/2023 9:53 PM] tux_linux
encrypted rootfs cache?


[6/20/2023 9:53 PM] tux_linux
🥴


[6/20/2023 9:53 PM] tux_linux
no, i think we will die from it


[6/20/2023 9:53 PM] szybet
maybe


[6/20/2023 9:53 PM] szybet
maybe


[6/20/2023 9:53 PM] szybet
we will see


[6/20/2023 9:53 PM] tux_linux
yes


[6/20/2023 9:53 PM] tux_linux
bad news, x11 doesn't work on 16bpp with std kernel, and of course when i ran the xorg.sh script on ssh it did switch to 16bpp


[6/20/2023 9:55 PM] szybet
maybe the only option


[6/20/2023 9:55 PM] szybet
add delays everywhere please


[6/20/2023 9:55 PM] tux_linux
i will try one last thing, if it works i will reboot the device five times and do the same tests to ensure it doesn't break


[6/20/2023 9:56 PM] szybet
which is?


[6/20/2023 9:56 PM] tux_linux
well, i would have shown you the script but the device is booting now


[6/20/2023 9:56 PM] szybet
do you validate the write to the sd card with balena etcher?


[6/20/2023 9:56 PM] szybet
the image


[6/20/2023 9:56 PM] szybet
idk...


[6/20/2023 9:57 PM] tux_linux
balena etcher does it


[6/20/2023 9:57 PM] tux_linux
but i use dd


[6/20/2023 9:59 PM] szybet
maybe use balena


[6/20/2023 9:59 PM] tux_linux
i write only the kernel


[6/20/2023 9:59 PM] tux_linux
not the entire image...


[6/20/2023 10:00 PM] tux_linux
it would take forever


[6/20/2023 10:00 PM] szybet
welp


[6/20/2023 10:05 PM] tux_linux
ok, it passed the test


[6/20/2023 10:05 PM] tux_linux
but it will cause problems on the nia


[6/20/2023 10:05 PM] tux_linux
i will add an if for nia for it to stay on 16bpp


[6/20/2023 10:07 PM] szybet
please dont break it


[6/20/2023 10:07 PM] szybet
please


[6/20/2023 10:07 PM] tux_linux
i hope


[6/20/2023 10:13 PM] tux_linux
i will now see if nothing broke in root kernel


[6/20/2023 10:29 PM] tux_linux
ok it works

{Reactions}
🥳 

[6/20/2023 10:30 PM] tux_linux
are
we
done
now?


[6/20/2023 10:30 PM] .kitkat1.
let me test first


[6/20/2023 10:30 PM] .kitkat1.
then celebrate


[6/20/2023 10:30 PM] tux_linux
yea


[6/20/2023 10:36 PM] tux_linux
i am making the image


[6/20/2023 10:49 PM] tux_linux
compressing


[6/20/2023 10:51 PM] tux_linux
uploading


[6/20/2023 10:58 PM] szybet
waiting


[6/20/2023 10:58 PM] tux_linux
50%


[6/20/2023 11:05 PM] tux_linux
it's up


[6/20/2023 11:06 PM] tux_linux
http://pkgs-inkbox.duckdns.org:25560/bundles/inkbox/native/n306/inkbox-2.0-n306.xz


[6/20/2023 11:06 PM] tux_linux
usual location


[6/20/2023 11:11 PM] szybet
battery issues on the nia are no more


[6/20/2023 11:11 PM] szybet
i really had issues noticing them since implementing ipd


[6/20/2023 11:12 PM] szybet
```
[ 1474.836015] reboot: Power down
[ 1474.839576] ricoh619 3-0032: failed writing 0x01 to 0xef
[ 1474.844940] ricoh619 3-0032: Error in writing CC_CTRL_REG
[ 1474.850390] ricoh619 3-0032: failed writings to 0xf3
[ 1474.855399] ricoh619 3-0032: Error in writing CC_SUM_REG
[ 1474.860760] ricoh619 3-0032: failed writing 0x00 to 0xef
[ 1474.866116] ricoh619 3-0032: Error in writing CC_CTRL_REG
[ 1474.871565] ricoh619 3-0032: failed writing 0x64 to 0x07
[ 1474.876922] ricoh619 3-0032: Error in writing PSWR_REG
[ 1474.882110] ricoh619 3-0032: failed reading at 0xe0
[ 1474.887032] ricoh619 3-0032: Error in writing FG_CTRL
[ 1474.892133] ricoh619 3-0032: failed reading at 0xb9
[ 1474.897061] ricoh619 3-0032: failed writing 0x67 to 0xb9
[ 1474.902418] ricoh619 3-0032: Error in writing the TIMSET_Reg
[ 1474.908127] ricoh619 3-0032: failed writing 0x00 to 0x9d
[ 1474.913486] ricoh619 3-0032: failed reading at 0xae
[ 1474.918414] ricoh619 3-0032: failed writing 0x27 to 0xae
[ 1474.923776] ricoh619 3-0032: failed writing 0x00 to 0x0f
[ 1474.929138] ricoh619 3-0032: failed writing 0x01 to 0x0e
```


[6/20/2023 11:12 PM] tux_linux
You already flashed it?


[6/20/2023 11:12 PM] szybet
@andi pmic is acting weird?


[6/20/2023 11:12 PM] szybet
no, i will

{Reactions}
👍 

[6/20/2023 11:19 PM] tux_linux
Please don't test more than factory reset and xorg+ipd thanks


[6/20/2023 11:21 PM] andi15701
is that nia2?


[6/20/2023 11:21 PM] andi15701
nia c


[6/20/2023 11:21 PM] szybet
nope


[6/20/2023 11:21 PM] szybet
my nia


[6/20/2023 11:21 PM] szybet
i dont plan to :)

{Reactions}
👍 

[6/20/2023 11:21 PM] szybet
nia a


[6/20/2023 11:22 PM] andi15701
so pmic worked before


[6/20/2023 11:22 PM] andi15701
so probably irqs are turned off


[6/20/2023 11:22 PM] andi15701
and i2c writes fail due to that


[6/20/2023 11:24 PM] szybet
anything to worry about?


[6/20/2023 11:30 PM] szybet
```
kobo login: root
Password: 
Welcome to InkBox OS!
login[1834]: root login on 'ttymxc0'

* Warning *
Root filesystem is mounted read-only.
Invoke `ifsctl mnt rootfs rw' to make it read-write.
This account is not available

```


[6/20/2023 11:30 PM] szybet
no login to serial


[6/20/2023 11:30 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[6/20/2023 11:30 PM] tux_linux
Yes


[6/20/2023 11:30 PM] tux_linux
Good


[6/20/2023 11:31 PM] tux_linux
When you will restore with root, please check if you can login after


[6/20/2023 11:33 PM] szybet
first launch - check


[6/20/2023 11:34 PM] tux_linux
*nervously waits*


[6/20/2023 11:34 PM] szybet
1 wake up in 1 app launch - check


[6/20/2023 11:36 PM] szybet
sometimes it shows "vnc connection closed" when exiting geanny and i need to reboot - WE DONT CARE 2.1


[6/20/2023 11:36 PM] tux_linux
Add to Todo
Suspend Idle sleep while x11 is launching


[6/20/2023 11:36 PM] szybet
I ALSO THOUGHt about this


[6/20/2023 11:36 PM] szybet
but yea


[6/20/2023 11:37 PM] tux_linux
Use ctrl-q
It doesn't like gtk3


[6/20/2023 11:37 PM] szybet
well add all of this to todo


[6/20/2023 11:37 PM] tux_linux
There is a way to know if a window spawned
wmctrl
Like in xorg.sh


[6/20/2023 11:38 PM] tux_linux
You can try kterm
Shouldn't crash vnc


[6/20/2023 11:39 PM] szybet
its not in std


[6/20/2023 11:39 PM] tux_linux
Oh you don't have it


[6/20/2023 11:39 PM] tux_linux
Yea


[6/20/2023 11:39 PM] szybet
its rare


[6/20/2023 11:39 PM] szybet
i dont care

{Reactions}
👍 

[6/20/2023 11:39 PM] tux_linux
Netsurf can also make it crash


[6/20/2023 11:39 PM] szybet
never happened


[6/20/2023 11:40 PM] tux_linux
Sometimes when you go into the menu to quit
It's a bit random


[6/20/2023 11:47 PM] szybet
SECOND LAUNCH WORKED


[6/20/2023 11:47 PM] szybet
I WAS SO STRESSED BECAUSE OF SOME GHOSTING


[6/20/2023 11:47 PM] szybet
aaaaaaaaaaaaa


[6/20/2023 11:48 PM] tux_linux
I understand


[6/20/2023 11:48 PM] tux_linux
Reset now?


[6/20/2023 11:48 PM] szybet
third launch


[6/20/2023 11:48 PM] szybet
let me do it


[6/20/2023 11:49 PM] tux_linux
Im scared


[6/20/2023 11:50 PM] szybet
qt wakeup now worked


[6/20/2023 11:51 PM] tux_linux
Great


[6/20/2023 11:53 PM] szybet
it works


[6/20/2023 11:54 PM] szybet
f i n a l l y


[6/20/2023 11:54 PM] tux_linux
Reset?


[6/20/2023 11:54 PM] szybet
let me root it now


[6/20/2023 11:54 PM] szybet
yep


[6/20/2023 11:54 PM] tux_linux
I am at peace now


[6/20/2023 11:55 PM] szybet
dont celebrate too early


[6/20/2023 11:58 PM] szybet
try on your device 3 times launching xorg and return to gui


[6/20/2023 11:58 PM] szybet
at least 3


[6/20/2023 11:59 PM] tux_linux
Ok


[6/21/2023 12:13 AM] szybet
once happened that it wouldnt return to gui


[6/21/2023 12:13 AM] szybet
maybe it was thinking longer


[6/21/2023 12:13 AM] szybet
but it is rarer than the nvc error bug


[6/21/2023 12:13 AM] szybet
so whatever


[6/21/2023 12:14 AM] szybet
im trying reset


[6/21/2023 12:14 AM] tux_linux
ok


[6/21/2023 12:26 AM] szybet
did you updated inkbox-bin with the latest wifi fix?


[6/21/2023 12:26 AM] szybet
for my image


[6/21/2023 12:26 AM] tux_linux
yes


[6/21/2023 12:26 AM] tux_linux
let me guess


[6/21/2023 12:27 AM] tux_linux
it doesn't work


[6/21/2023 12:27 AM] szybet
idk


[6/21/2023 12:27 AM] szybet
i will try then


[6/21/2023 12:27 AM] szybet
on rooted tho


[6/21/2023 12:27 AM] tux_linux
so restore worked?


[6/21/2023 12:29 AM] szybet
yep


[6/21/2023 12:29 AM] szybet
serial works


[6/21/2023 12:29 AM] szybet
i will try ssh too


[6/21/2023 12:29 AM] tux_linux
n ice


[6/21/2023 12:29 AM] tux_linux
ok


[6/21/2023 12:34 AM] szybet
everything works


[6/21/2023 12:35 AM] szybet
even usbms, library, reader


[6/21/2023 12:35 AM] szybet
is... that it?


[6/21/2023 12:35 AM] tux_linux
miracle?


[6/21/2023 12:35 AM] szybet
2.0 finally?


[6/21/2023 12:35 AM] tux_linux
usbnet?


[6/21/2023 12:35 AM] szybet
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659

{Embed}
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659
/mnt/data/projects/git/conversations/media/spongebob-rainbow-D9E9B.png


[6/21/2023 12:35 AM] tux_linux
`echo true > /boot/flags/USBNET_ENABLE`


[6/21/2023 12:35 AM] tux_linux
i care for other users


[6/21/2023 12:36 AM] szybet
wifi exists


[6/21/2023 12:36 AM] tux_linux
still


[6/21/2023 12:36 AM] tux_linux
just check if it exports a network interface on your pc
thanks


[6/21/2023 12:41 AM] szybet
```
[41530.452625] usb 1-5: new high-speed USB device number 16 using xhci_hcd
[41530.597983] usb 1-5: New USB device found, idVendor=0525, idProduct=a4a2, bcdDevice= 4.01
[41530.597992] usb 1-5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[41530.597997] usb 1-5: Product: RNDIS/Ethernet Gadget
[41530.598000] usb 1-5: Manufacturer: Linux 4.1.15 with 2184000.usb
[41530.726957] cdc_subset: probe of 1-5:1.0 failed with error -22
[41530.729036] cdc_subset 1-5:1.1 usb0: register 'cdc_subset' at usb-0000:00:14.0-5, Linux Device, 3a:75:7c:3c:02:9e
[41530.729093] usbcore: registered new interface driver cdc_subset
[41530.729170] cdc_ether: probe of 1-5:1.0 failed with error -16
[41530.729815] usbcore: registered new interface driver cdc_ether
[41530.753171] cdc_subset 1-5:1.1 enp0s20f0u5i1: renamed from usb
```


[6/21/2023 12:41 AM] szybet
```
6: enp0s20f0u5i1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 1000
    link/ether 1a:64:c1:c7:83:9d brd ff:ff:ff:ff:ff:ff
    inet6 fe80::2827:ee3f:7d82:df2c/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
```


[6/21/2023 12:41 AM] szybet
works


[6/21/2023 12:41 AM] tux_linux
good


[6/21/2023 12:41 AM] szybet
is that it?


[6/21/2023 12:41 AM] szybet
did we finish


[6/21/2023 12:41 AM] tux_linux
i think


[6/21/2023 12:41 AM] szybet
you need to be sure


[6/21/2023 12:41 AM] tux_linux
i'm trying it on n905c


[6/21/2023 12:42 AM] tux_linux
never used it since like a year


[6/21/2023 12:42 AM] tux_linux
it should work


[6/21/2023 12:42 AM] tux_linux
similar h/w to mini


[6/21/2023 12:42 AM] tux_linux
i tried every other device


[6/21/2023 12:42 AM] szybet
good


[6/21/2023 12:42 AM] szybet
so it is the final nia image?


[6/21/2023 12:42 AM] szybet
nia a - remember this


[6/21/2023 12:42 AM] tux_linux
i think


[6/21/2023 12:42 AM] tux_linux
yea


[6/21/2023 12:42 AM] szybet
you think or you are sure


[6/21/2023 12:43 AM] tux_linux
we can never be sure given what has happened before


[6/21/2023 12:43 AM] tux_linux
im trying 3rd time x11 app on glo hd


[6/21/2023 12:43 AM] tux_linux
it works


[6/21/2023 12:43 AM] szybet
good


[6/21/2023 12:44 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-46945.png


[6/21/2023 12:44 AM] tux_linux
day one: "released"


[6/21/2023 12:44 AM] tux_linux
day four: "released"


[6/21/2023 12:44 AM] tux_linux
day ?: "released"


[6/21/2023 12:45 AM] tux_linux
well its making the image for n905c


[6/21/2023 12:45 AM] tux_linux
i think you can go to sleep


[6/21/2023 12:45 AM] tux_linux
you will know if everything is good if you see a release on gh or a video on youtube


[6/21/2023 12:45 AM] szybet
even if something breaks - dont create another nia image

{Reactions}
👍 

[6/21/2023 12:45 AM] tux_linux
thanks for your help
i'm not sure others would have survived this

{Reactions}
👍 

[6/21/2023 12:47 AM] szybet
i cant believe we are the only 2 persons on this rock planet thinking "An open source ereader distro should exist", thats why i hope 2.0 will change something

{Reactions}
👍 😭 (2) 

[6/21/2023 12:47 AM] szybet
thanks, good night

{Reactions}
👍 

[6/21/2023 1:50 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230620_234943449-E4C5D.jpg


[6/21/2023 1:50 AM] tux_linux
So far so good


[6/21/2023 1:59 AM] tux_linux
only browsable news website for an e-reader

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230620_235858491.MP-A91EF.jpg


[6/21/2023 2:30 AM] kuratius
https://en.m.wikipedia.org/wiki/Lynx_(web_browser)
Might make some others more usable if not image heavy

{Embed}
https://en.m.wikipedia.org/wiki/Lynx_(web_browser)
Lynx (web browser)
Lynx is a customizable text-based web browser for use on cursor-addressable character cell terminals. As of 2023, it is the oldest web browser still being maintained, having started in 1992.
/mnt/data/projects/git/conversations/media/Lynx-wikipedia-17B7D.png

{Reactions}
👍 

[6/21/2023 3:31 AM] tux_linux
also I broke my glo hd's usb port
no data line anymore


[6/21/2023 3:31 AM] tux_linux
i guess I was plugging/unplugging it too often?


[6/21/2023 3:32 AM] tux_linux
```
[ 4879.693706] otg udc vbus falling wakeup
[ 4879.697396] try_wake_up_udc: udc out low power mode
```


[6/21/2023 3:34 AM] tux_linux
it started working again
not for a long time i guess


[6/21/2023 4:39 AM] tux_linux
also, i realized gui-bundle still contains changelog from 1.9 version


[6/21/2023 4:40 AM] tux_linux
i'm not sure we care about it
since if users update they will update to 2.1 anyway, with a different changelog


[6/21/2023 5:23 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230621_172243-A4DA6.jpg


[6/21/2023 5:23 PM] szybet
any idea what this seperator name is in qstylesheet


[6/21/2023 5:23 PM] szybet
the black thing


[6/21/2023 10:07 PM] kuratius
what version of qt do you use atm?


[6/21/2023 10:07 PM] szybet
lts 5.12


[6/21/2023 10:07 PM] szybet
qt 6 is unstable + doesnt run on older kernels


[6/21/2023 10:08 PM] kuratius
https://www.qt.io/blog/2018/11/16/qt-quick-performance-improvements-qt-5-12-lts
if it had been lower than 5.12  this would have been relevant

{Embed}
https://www.qt.io/blog/2018/11/16/qt-quick-performance-improvements-qt-5-12-lts
Qt Quick Performance Improvements with Qt 5.12 LTS
Qt Quick Performance Improvements with Qt 5.12 LTS


[6/21/2023 10:08 PM] kuratius
```For the example application we can see that Qt 5.6.3 uses 36.3 MB, Qt 5.9.7 uses 18.5 MB and Qt 5.12 Beta uses 13.0 MB RAM (using pre-compiled QML). This means that memory usage with Qt 5.12 is 30% lower than Qt 5.9 and 64% lower than Qt 5.6 with the example application. ``` extreme difference


[6/21/2023 10:08 PM] szybet
we dont use qml / qt quick


[6/21/2023 10:09 PM] szybet
as for optimizing - i already mentioned ways it can be done


[6/21/2023 10:15 PM] tux_linux
5.15.2?


[6/21/2023 10:15 PM] szybet
¯\_(ツ)_/¯


[6/21/2023 10:15 PM] tux_linux
huge difference...


[6/21/2023 10:15 PM] szybet
only by 2


[6/21/2023 10:15 PM] tux_linux
3


[6/21/2023 10:16 PM] szybet
actually 15


[6/21/2023 10:16 PM] tux_linux
15-3=12


[6/21/2023 10:16 PM] tux_linux
prove me wrong


[6/21/2023 10:17 PM] szybet
actually 32


[6/21/2023 10:17 PM] tux_linux
?


[6/21/2023 10:17 PM] szybet
5.12.1


[6/21/2023 10:17 PM] szybet
5.12.2


[6/21/2023 10:17 PM] szybet
5.12.3


[6/21/2023 10:17 PM] szybet
...


[6/21/2023 10:17 PM] szybet
5.13.0


[6/21/2023 10:17 PM] szybet
etc


[6/21/2023 10:17 PM] szybet
actually more


[6/21/2023 10:18 PM] tux_linux
i mean major versions


[6/21/2023 10:18 PM] tux_linux
whatever


[6/21/2023 10:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-55F96.png


[6/21/2023 10:18 PM] tux_linux
good


[6/21/2023 10:26 PM] tux_linux
what no


[6/21/2023 10:27 PM] szybet
?


[6/21/2023 10:27 PM] tux_linux
tag commit


[6/21/2023 10:27 PM] szybet
you didnt included sha sums


[6/21/2023 10:27 PM] szybet
what


[6/21/2023 10:28 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-C0E4B.png


[6/21/2023 10:28 PM] tux_linux
still says this


[6/21/2023 10:28 PM] tux_linux
nonsense


[6/21/2023 10:29 PM] szybet
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659

{Embed}
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659
/mnt/data/projects/git/conversations/media/spongebob-rainbow-D9E9B.png


[6/21/2023 10:29 PM] szybet
leave it


[6/21/2023 10:29 PM] szybet
include sha sums if you have time


[6/21/2023 10:30 PM] tux_linux
it's fine now


[6/21/2023 10:30 PM] tux_linux
i dont have time


[6/21/2023 10:30 PM] szybet
ok ok


[6/22/2023 12:04 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-60A12.png


[6/22/2023 12:04 AM] szybet
oh no...


[6/22/2023 12:04 AM] szybet
:/


[6/22/2023 1:22 AM] szybet
Disable the option of adding new accounts


[6/22/2023 1:22 AM] szybet
Simply


[6/22/2023 8:06 AM] tux_linux
yes


[6/22/2023 8:06 AM] tux_linux
i will do it


[6/22/2023 8:41 AM] tux_linux
it's done


[6/22/2023 9:53 AM] szybet
Maybe link the videos on gh when you are done with them


[6/22/2023 5:13 PM] tux_linux
I finished the video


[6/22/2023 5:13 PM] tux_linux
I will upload it to youtube soon


[6/22/2023 5:14 PM] szybet
Cool


[6/22/2023 5:14 PM] tux_linux
totals out to 35:47


[6/22/2023 5:14 PM] szybet
Good


[6/22/2023 5:14 PM] tux_linux
I put encrypted storage demo in it


[6/22/2023 5:15 PM] szybet
Well okay


[6/22/2023 5:17 PM] tux_linux
will probably take an hour to upload though


[6/22/2023 5:17 PM] tux_linux
not even finished rendering and it's at like 2.8g


[6/22/2023 5:18 PM] tux_linux
4g
ouch


[6/22/2023 5:44 PM] tux_linux
@dill we will need you soon


[6/22/2023 6:47 PM] kuratius
Add timestamps


[6/22/2023 6:47 PM] kuratius
Are you uploading 4k?


[6/22/2023 6:48 PM] kuratius
Or not encoding?


[6/22/2023 6:48 PM] tux_linux
4k


[6/22/2023 6:49 PM] tux_linux
https://www.youtube.com/watch?v=cyWu_pHwqNg
it's still processing it to hd

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=cyWu_pHwqNg
InkBox OS 2.0
InkBox OS 2.0 is an open-source, fully-functional operating system for eReaders. It primarily runs on Kobo, but has been ported to other devices such as the Kindle Touch.

00:00 Boot on Kindle Touch
01:39 ePUB reading
05:24 PDF reading
06:48 Pictures display
07:10 Local library widget
08:24 Home page widget
09:30 Online library widget (Gutenberg...
/mnt/data/projects/git/conversations/media/sddefault-4C5D7.jpg


[6/22/2023 6:49 PM] kuratius
I see, I was surprised because 35 min of Video footage is like 400-500MB at 1080p I think


[6/22/2023 6:49 PM] kuratius
Less if you are encoding something with little movement


[6/22/2023 6:50 PM] tux_linux
well, i used davinci resolve on mac and exported it to mov


[6/22/2023 6:50 PM] kuratius
Probably davinci resolve tries to keep close to original native quality and Bitrate


[6/22/2023 6:50 PM] kuratius
Instead of reencoding


[6/22/2023 6:51 PM] kuratius
But yt will reencode later anyway so besides upload time it doesnt matter much

{Reactions}
👍 

[6/22/2023 6:52 PM] kuratius
I've actually uploaded videos to yt that got bigger after yt was done processing


[6/22/2023 6:52 PM] kuratius
Really stupid of them to waste other people's encoding time and their own bandwidth +storage


[6/22/2023 7:29 PM] szybet
cool video

{Reactions}
👍 

[6/22/2023 7:29 PM] szybet
so now, social media posts?


[6/22/2023 7:30 PM] tux_linux
yes i am doing that


[6/22/2023 7:30 PM] tux_linux
r/linux has reopened


[6/22/2023 7:30 PM] tux_linux
so


[6/22/2023 7:30 PM] szybet
on hackaday too


[6/22/2023 7:32 PM] szybet
and others


[6/22/2023 7:32 PM] szybet
also post them here, i will watch the comments


[6/22/2023 7:34 PM] tux_linux
https://www.reddit.com/r/linux/comments/14g9jvf/inkbox_os_20_custom_operating_system_for_ereaders/

{Embed}
https://www.reddit.com/r/linux/comments/14g9jvf/inkbox_os_20_custom_operating_system_for_ereaders/
r/linux - InkBox OS 2.0 (custom operating system for eReaders) has ...
0 votes and 0 comments so far on Reddit
/mnt/data/projects/git/conversations/media/mGoo9stgGvIVIC6DUIdRJ2rYMLO0HENBgtSQ6WNgHN-60811.jpg


[6/22/2023 7:34 PM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-C190A.png


[6/22/2023 7:35 PM] tux_linux
already?


[6/22/2023 7:35 PM] kuratius
seems like it


[6/22/2023 7:35 PM] szybet
what


[6/22/2023 7:35 PM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-B28D9.png


[6/22/2023 7:36 PM] szybet
what


[6/22/2023 7:37 PM] szybet
im confused, and there is no link


[6/22/2023 7:43 PM] tux_linux
well, i sent a message to the mods


[6/22/2023 8:03 PM] tux_linux
i posted here
https://www.reddit.com/r/kobo/comments/14gaann/inkbox_os_20_custom_opensource_os_is_out/

{Embed}
https://www.reddit.com/r/kobo/comments/14gaann/inkbox_os_20_custom_opensource_os_is_out/
r/kobo - InkBox OS 2.0 (custom open-source OS) is out!
0 votes and 0 comments so far on Reddit
/mnt/data/projects/git/conversations/media/mGoo9stgGvIVIC6DUIdRJ2rYMLO0HENBgtSQ6WNgHN-60811.jpg


[6/22/2023 8:03 PM] szybet
very cool


[6/22/2023 8:09 PM] szybet
there is no cry for help in github release


[6/22/2023 8:09 PM] szybet
also you didnt reposted the shasums on github


[6/22/2023 8:09 PM] szybet
pretty important


[6/22/2023 8:16 PM] the.mightydill
👍 I'll be home in a few hours

{Reactions}
👍 

[6/22/2023 8:19 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-E369D.png


[6/22/2023 8:19 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-EF58E.png


[6/22/2023 8:20 PM] szybet
you dont seem to understand the sense of checksums


[6/22/2023 8:20 PM] szybet
its to check if those are genuine images from us


[6/22/2023 8:20 PM] tux_linux
no, that's called signing


[6/22/2023 8:20 PM] szybet
whats the point of them, if a hacker can replace them


[6/22/2023 8:20 PM] tux_linux
checksum is to check the integrity of a download


[6/22/2023 8:20 PM] szybet
it can be used also for that


[6/22/2023 8:20 PM] szybet
so post them on github too


[6/22/2023 8:21 PM] tux_linux
done


[6/22/2023 8:22 PM] szybet
where


[6/22/2023 8:22 PM] tux_linux
release


[6/22/2023 8:22 PM] szybet
very good


[6/22/2023 8:22 PM] szybet
hm


[6/22/2023 8:25 PM] tux_linux
done


[6/22/2023 8:26 PM] szybet
very good explained

{Reactions}
👍 

[6/22/2023 8:33 PM] szybet
will you post on other social media as well?


[6/22/2023 8:33 PM] tux_linux
im not sure


[6/22/2023 8:33 PM] tux_linux
which ones


[6/22/2023 8:33 PM] szybet
i listed


[6/22/2023 8:33 PM] szybet
in todo


[6/22/2023 8:33 PM] tux_linux
this is dill's job


[6/22/2023 8:34 PM] szybet
mobilereads, hackster?


[6/22/2023 8:34 PM] tux_linux
i already posted on mobileread


[6/22/2023 8:34 PM] szybet
well link it


[6/22/2023 8:34 PM] tux_linux
i don't expect a reply


[6/22/2023 8:34 PM] szybet
me too


[6/22/2023 8:34 PM] tux_linux
https://www.mobileread.com/forums/showpost.php?p=4333579&postcount=95

{Embed}
https://www.mobileread.com/forums/showpost.php?p=4333579&postcount=95
MobileRead Forums - View Single Post -  InkBox: a new open-source O...
MobileRead - the resource for mobile geeks seeking information and advice for keeping their gadgets happy.


[6/22/2023 8:49 PM] tux_linux
https://www.reddit.com/r/ereader/comments/14gbglg/inkbox_os_20_opensource_os_for_some_kobo_kindle/

{Embed}
https://www.reddit.com/r/ereader/comments/14gbglg/inkbox_os_20_opensource_os_for_some_kobo_kindle/
r/ereader - InkBox OS 2.0 (open-source OS for some Kobo & Kindle de...
0 votes and 1 comment so far on Reddit
/mnt/data/projects/git/conversations/media/mGoo9stgGvIVIC6DUIdRJ2rYMLO0HENBgtSQ6WNgHN-60811.jpg


[6/22/2023 8:59 PM] szybet
hood


[6/22/2023 8:59 PM] szybet
hackaday?


[6/22/2023 8:59 PM] szybet
i wont want more


[6/22/2023 11:47 PM] szybet
So what about the r linux post?


[6/22/2023 11:50 PM] tux_linux
nothing


[6/22/2023 11:52 PM] szybet
Mods didnt replied?


[6/22/2023 11:56 PM] kuratius
Is there a waveform extra+overwrite tutorial yet? It should just be two commands, possibly device specific but still easy


[6/22/2023 11:56 PM] kuratius
Would be good if added to wiki or readme


[6/22/2023 11:58 PM] szybet
Literally one or 2 dd commands


[6/22/2023 11:58 PM] szybet
No one asked yet


[6/22/2023 11:58 PM] szybet
It could be automated


[6/22/2023 11:58 PM] kuratius
Waveform tool?


[6/22/2023 11:59 PM] kuratius
Something like that?


[6/22/2023 11:59 PM] szybet
I thought about inkbox installer, if it ever will exist could do that

{Reactions}
👍 

[6/23/2023 12:02 AM] tux_linux
No


[6/23/2023 12:10 AM] szybet
Because of polish i have sometimes problems with answers yes or no

Its very often in polish you say for example

Didn't they replied?
Yes, they did
No, they did

Also:
yes, they didnt

Is possible
It depends of if yes or no answers the question, or the "negative" ( didnt in this example ). Without the second sentence, its hard to tell

Soo they didnt replied, we are still waiting?🥴


[6/23/2023 12:12 AM] szybet
Also, i demand:

Hackaday
Those youtube channels

@the.mightydill#0 wake up, you have a mission


[6/23/2023 12:17 AM] tux_linux
I will take care of the pinenote


[6/23/2023 12:17 AM] tux_linux
They didn't reply
did not implies past, remember


[6/23/2023 12:22 AM] szybet
Oh
I even remember my teacher saying that on the latest lesson when i made an error


[6/23/2023 12:22 AM] szybet
😬


[6/23/2023 3:14 AM] kuratius
Update websites so checksums are transmitted via https


[6/23/2023 3:14 AM] kuratius
Or just don't hide them behind a link


[6/23/2023 3:14 AM] tux_linux
They are on gh


[6/23/2023 3:15 AM] kuratius
Yes but this is friction you don't  want as a user


[6/23/2023 3:15 AM] kuratius
Or just link the github


[6/23/2023 3:16 AM] kuratius
You already have a https certificate for the main site


[6/23/2023 6:17 AM] tux_linux
Did we forget about this?


[6/23/2023 6:59 AM] szybet
Yes, my ereader is propably broken and sometimes brightness flickers


[6/23/2023 6:59 AM] szybet
Well most propably


[6/23/2023 8:27 AM] szybet
One reply on mobileread😯


[6/23/2023 3:03 PM] szybet
did you arrived :D?


[6/23/2023 3:03 PM] szybet
@tux-linux any updates from /r/linux?


[6/23/2023 3:04 PM] tux_linux
no


[6/23/2023 3:04 PM] tux_linux
arrive


[6/23/2023 3:04 PM] szybet
well then, thats it for this sub sadly


[6/23/2023 3:05 PM] szybet
ok then:

did you arrived yet:D?


[6/23/2023 3:05 PM] tux_linux
did you arrive yet


[6/23/2023 3:05 PM] szybet
🥴


[6/23/2023 3:12 PM] szybet
did pine note reply?


[6/23/2023 3:13 PM] tux_linux
i did not even send anything yet


[6/23/2023 3:13 PM] tux_linux
I don't really know what to ask


[6/23/2023 3:28 PM] szybet
`Heyyyy we develop an ereader focused distro, any partnership could be possible :)`


[6/23/2023 3:28 PM] kuratius
or let chatGPT write a template


[6/23/2023 3:31 PM] tux_linux
1. we are two people working on a random ereader distro that seems to attract a lot of people but then they just seem to vanish away
2. we are mentally taxed by its development
3. we would like some help for rewriting quite a lot of things
4. in exchange, we could also provide help for porting this os to the pinenote
5. we hope this is something you will like
6. idk what more


[6/23/2023 3:33 PM] szybet
1. write in that way thats int not popular, not that in details
2. nah, i enjoy it
3. those details can come later, toss them out for now


[6/23/2023 3:34 PM] szybet
also i dont think dill will ever post this to the youtubers & hackaday, look at the sanki situation


[6/23/2023 3:34 PM] szybet
you write to them, and i post on hackaday ( all today ) is it fine?


[6/23/2023 3:34 PM] tux_linux
you can post yourself on hackaday?


[6/23/2023 3:34 PM] szybet
why not


[6/23/2023 3:43 PM] szybet
actually nod hackaday


[6/23/2023 3:43 PM] szybet
hacker news


[6/23/2023 3:44 PM] szybet
hackaday is hardware focused


[6/23/2023 3:44 PM] szybet
https://news.ycombinator.com/


[6/23/2023 3:44 PM] szybet
so is this fine 4you?


[6/23/2023 4:20 PM] szybet
https://news.ycombinator.com/item?id=36447158

{Embed}
Szybet
https://news.ycombinator.com/item?id=36447158
Hacker News


[6/23/2023 4:23 PM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-3D133.png


[6/23/2023 4:25 PM] szybet
maybe it waits for veryfication


[6/23/2023 4:25 PM] szybet
i can only see it from my account too


[6/23/2023 4:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8157F.png


[6/23/2023 4:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9EFF2.png


[6/23/2023 4:28 PM] szybet
yea...


[6/23/2023 7:45 PM] tux_linux
i doubt its going to change


[6/23/2023 7:45 PM] szybet
whatever really


[6/23/2023 7:45 PM] szybet
try to make it to /r/linux and thats it


[6/23/2023 7:45 PM] tux_linux
what do you want that i do


[6/23/2023 7:45 PM] szybet
nothing


[6/23/2023 7:45 PM] szybet
wait


[6/23/2023 8:13 PM] tux_linux
we need to write to youtube channels
otherwise we are just hitting a dead-end


[6/23/2023 9:03 PM] tux_linux
um so I wrote this
I am awaiting your approval to send it


[6/23/2023 9:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-AE265.txt


[6/23/2023 9:03 PM] tux_linux
Ouch discord displays it bad


[6/23/2023 9:03 PM] tux_linux
let's send separate messages


[6/23/2023 9:03 PM] tux_linux
-- BEGIN --
Hello,

I don't know if I am writing to the appropriate e-mail address or if I should have sent this to someone else, so feel free to forward it to anyone you think would be the best person to answer this message.

My name is Nicolas Mailloux, and I am usually known in the dev community as tux-linux. For more than two years now, I have been building a custom open-source OS for Kobo and Kindle devices called InkBox OS. We now officially support 8 devices with others in the process of being ported or with basic CLI working (EPDs are a lot of trouble when you don't have the drivers for them). I have heard about the PIneNote development team seeking an OS for their device, and would like to submit mine for this purpose.

We just recently released version 2.0, which took more than a year to complete. You can check out how it looks here: https://youtu.be/cyWu_pHwqNg
Website: https://inkbox.ddns.net
As for the source code itself, we have an organization on GitHub at https://github.com/Kobo-InkBox


[6/23/2023 9:04 PM] tux_linux
I will try to be brief and describe the fundamentals on which InkBox OS has been conceived, but as you can see, my e-mail is getting pretty long...
If it had to, I think the main goal of the OS could be named with one word: security.
Throughout this summary, I will add timestamps referring to the video if you want to follow my explanations better.
We are using an Alpine Linux base system (rootfs), which has to date a little bit (2019) because of the vendor kernel versions some of the older devices we support have (such as the Kobo Mini (2.6.35.3)); newer versions of musl or glibc don't seem to like it. We have patched some kernels to adapt them to the OS, depending on the device (kernel). Of course, if this was built for the PineNote, we could certainly manage some updating.
When I said 'base system' though, it might not have been that much true ; the structure of the OS is as follows: the kernel boots, it loads an init ramdisk embedded in its image and starts it. This initrd then runs an init program which was written from scratch in C (inkbox-os-init) and that does most of the basic system initialization.
This initrd then chroots into the 'base' system, which is Alpine Linux, and runs openrc to complete the remainder of the startup tasks. Our GUI is written in C++ and uses Qt 5.15.2 with custom platform plugins to interact with the various EPDs of the devices we support. An important thing to note is that it also runs in a chroot for further environment isolation. So at this point, we are at the second level of chrooting.


[6/23/2023 9:04 PM] tux_linux
Our Reader app, which probably needs a massive rewrite but works for now, can display ePUBs, PDFs, pictures and text files (1:39) We also have a 'local library' display widget that uses JSON databases to organize its content (7:10), as well as an home page which uses a similar system to display recent books. There is also an 'online library' feature which can fetch books from Gutenberg (9:30).

Complementary to the basic reading functions we offer, there are also a lot of built-in apps (16:47) as well as a complete and usable X11 framework which is named KoBox (27:08). We also support user apps (19:56), which are self-contained and isolated applications running in an unprivileged chroot environment with a separate PID namespace. Those applications can be installed by the users themselves.

Consider the main goal I was talking about earlier: every software package in InkBox OS, once the kernel has booted, has to be digitally signed by us, the main developers of the project, before the device can run it. Updates, rootfs, GUI package, everything. Also note that our rootfs is actually a compressed SquashFS file mounted by the initrd at boot and that it is read-only, albeit with the possibility of making it read-write with the help of UnionFS and copy-on-write. This makes updating much simpler and minimizes MMC wear and the size it takes on the card. It also makes factory reset much more straightforward, as, provided we are talking about the rootfs, we just have to delete a "write" folder outside of the mounted volume. Other software packages work in a similar way.


[6/23/2023 9:04 PM] tux_linux
I am sharing this with you today, even if I don't know who I am talking to, because we would benefit from some help for continuing the development of the project.
Currently, we are only two people actively working on it and are both students (I am 17 and the other, which has been contributing for more than a year now, is almost 19), which sometimes makes developing hard, provided that we don't really have any university background for the moment (and it also means we sometimes write bad code without even knowing it!) and work with a huge program which regularly needs bug fixes, and so we were thinking of partnering with Pine64 to help port it to the PineNote, and while we would offer free help for the team to actually understand how the internals of the OS works, we could also expect some help in rewriting some parts of it by the members of the team.
I do not know if this project passes quality standards for your company, but we figured out it was worth a try to share it with you.

I wish you the best,
Nicolas Mailloux (tux-linux)


[6/23/2023 9:04 PM] tux_linux
-- END --


[6/23/2023 9:04 PM] tux_linux
every timestamp is actually a link in the email, as well as the git repos, so makes accessing them easier


[6/23/2023 9:07 PM] szybet
https://tenor.com/view/clapping-hands-leonardo-dicaprio-gif-24240473

{Embed}
https://tenor.com/view/clapping-hands-leonardo-dicaprio-gif-24240473
/mnt/data/projects/git/conversations/media/clapping-hands-FA028.png


[6/23/2023 9:08 PM] tux_linux
did you read it in full? already?


[6/23/2023 9:08 PM] szybet
yep


[6/23/2023 9:08 PM] tux_linux
well ok


[6/23/2023 9:08 PM] tux_linux
anything to add?


[6/23/2023 9:08 PM] szybet
a wiki page containing the description


[6/23/2023 9:08 PM] tux_linux
good idea


[6/23/2023 9:08 PM] tux_linux
i will only share the link to the wiki


[6/23/2023 9:08 PM] szybet
that's a very good description


[6/23/2023 9:08 PM] szybet
the wiki is sometimes down


[6/23/2023 9:08 PM] szybet
and fludded with ads


[6/23/2023 9:08 PM] szybet
bad idea


[6/23/2023 9:09 PM] tux_linux
well, i prevented user account creation now


[6/23/2023 9:09 PM] tux_linux
it's very recognizable that it's spam


[6/23/2023 9:09 PM] szybet
still, just write it in the email


[6/23/2023 9:09 PM] tux_linux
the whole description?


[6/23/2023 9:09 PM] szybet
yep, leave it like that


[6/23/2023 9:09 PM] tux_linux
this is gonna take 10 paper sheets


[6/23/2023 9:09 PM] tux_linux
it's already too long


[6/23/2023 9:10 PM] szybet
opening links in emails to an weird domain is sus, some company's avoid it


[6/23/2023 9:10 PM] tux_linux
well i will add the general information wiki page as an html attachment


[6/23/2023 9:10 PM] tux_linux
which is probably worse


[6/23/2023 9:10 PM] szybet
no


[6/23/2023 9:10 PM] tux_linux
but it can't be longer than what it already is


[6/23/2023 9:10 PM] szybet
leave it as it is


[6/23/2023 9:11 PM] szybet
and make a note that its the description from the wiki


[6/23/2023 9:11 PM] tux_linux
it's already 915 words


[6/23/2023 9:11 PM] tux_linux
the email alone


[6/23/2023 9:12 PM] szybet
+ 10 won't make a diffrence


[6/23/2023 9:12 PM] tux_linux
what description are you talking about


[6/23/2023 9:12 PM] szybet
of the system


[6/23/2023 9:13 PM] szybet
just add "The below description is coppied from the wiki of the project"


[6/23/2023 9:13 PM] tux_linux
this?
```
InkBox is an open-source, fully-functional standalone operating system for Rakuten Kobo eReaders
```


[6/23/2023 9:13 PM] tux_linux
it's already outdated


[6/23/2023 9:13 PM] szybet
i mean how the system works


[6/23/2023 9:13 PM] szybet
that its from the wiki


[6/23/2023 9:14 PM] tux_linux
well, i didn't look at the wiki while writing it


[6/23/2023 9:14 PM] szybet
you dont understand


[6/23/2023 9:14 PM] tux_linux
no


[6/23/2023 9:14 PM] szybet
but whatever, do what you like


[6/23/2023 9:15 PM] szybet
its just like with the videos: even if they will be separate, if someone wants to watch them they will.


[6/23/2023 9:17 PM] szybet
also, as you found so much will to write emails, you can write to linux-experiment


[6/23/2023 9:17 PM] szybet
also note, i already said: first write to linux-experiment, if he doesnt reply then to the second one


[6/23/2023 9:17 PM] szybet
if both post it, it would show us too much attention wanting


[6/23/2023 9:20 PM] tux_linux
i doubt this will happen


[6/23/2023 9:20 PM] tux_linux
i will start with pinenote


[6/23/2023 9:20 PM] tux_linux
maybe dill will reappear somehow


[6/23/2023 9:21 PM] tux_linux
do you want that I share your gh profile in the email as well?


[6/23/2023 9:21 PM] szybet
yep


[6/23/2023 9:21 PM] tux_linux
done


[6/23/2023 9:21 PM] tux_linux
so i send it?


[6/23/2023 9:21 PM] szybet
youtube? more likely then pinenote...


[6/23/2023 9:21 PM] szybet
yep


[6/23/2023 9:21 PM] tux_linux
idk


[6/23/2023 9:22 PM] tux_linux
if pine64 reply that's already a good thing


[6/23/2023 9:22 PM] szybet
in reality we are the only OS in existance


[6/23/2023 9:22 PM] szybet
for ereaders


[6/23/2023 9:22 PM] tux_linux
it's sent


[6/23/2023 9:22 PM] tux_linux
the last one was what, openinkpot?


[6/23/2023 9:23 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-0D395.png


[6/23/2023 9:23 PM] tux_linux
hm


[6/23/2023 9:24 PM] szybet
this is old? what?


[6/23/2023 9:24 PM] szybet
no idea


[6/23/2023 9:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-3684D.png


[6/23/2023 9:25 PM] tux_linux
im not sure what he meant

{Attachments}
/mnt/data/projects/git/conversations/media/image-5D2C8.png


[6/23/2023 9:26 PM] szybet
for me it's a joke

{Reactions}
👍 

[6/23/2023 9:26 PM] szybet
funny one


[6/23/2023 9:27 PM] szybet
~~i wouldnt count on him~~, will you do it please?


[6/23/2023 9:38 PM] szybet
off topic: does inkbox qt work on nickel?


[6/23/2023 9:39 PM] tux_linux
well, if you are talking about this version http://23.163.0.39/bundles/inkbox/nickel/base/inkbox-base-1.3.tar.xz
then yes


[6/23/2023 9:39 PM] szybet
i talk only about qt


[6/23/2023 9:39 PM] tux_linux
those were ancient times


[6/23/2023 9:39 PM] tux_linux
well, UMR works on nickel, so it should?


[6/23/2023 9:39 PM] szybet
well okay, thanks

{Reactions}
👍 

[6/23/2023 10:49 PM] tux_linux
in networking, is a port open when it is transferring data e.g. from a website or not?
like, are those ports in the same 'category' as SSH or telnet ports?
I know it's probably a dumb question but I am equally dumb


[6/23/2023 10:50 PM] szybet
port open where, on PC or on router?


[6/23/2023 10:51 PM] tux_linux
on kobo


[6/23/2023 10:51 PM] tux_linux
/device


[6/23/2023 10:52 PM] szybet
yep


[6/23/2023 10:52 PM] szybet
look at netstat command


[6/23/2023 10:52 PM] szybet
it lists the open ports


[6/23/2023 10:52 PM] tux_linux
so we can't just shut down the device in std kernel with that


[6/23/2023 10:53 PM] szybet
what are you talking about


[6/23/2023 10:53 PM] tux_linux
todo item


[6/23/2023 10:53 PM] szybet
which one


[6/23/2023 10:53 PM] tux_linux
shut down device on std kernel if it finds any active telnet or ssh sessions


[6/23/2023 10:57 PM] szybet
there are ways to detect it


[6/23/2023 10:57 PM] szybet
and ways to obey it


[6/23/2023 10:58 PM] szybet
we could maybe use the `who` command


[6/23/2023 11:09 PM] tux_linux
not ss?


[6/23/2023 11:10 PM] szybet
ss, netstat could detect ssh only because a path ( pid one, binary ) has name ssh in it. Someone could rename it / recompile to use a diffrent name soo...


[6/23/2023 11:10 PM] szybet
i dont know if there is any way to trick the who command


[6/23/2023 11:10 PM] szybet
there is propably a /proc/ place that shows the users maybe


[6/23/2023 11:11 PM] szybet
we need a way for the `write` dirs to dissallow weird edits

{Reactions}
👍 

[6/23/2023 11:26 PM] tux_linux
well, users need root access to make rootfs rw


[6/23/2023 11:26 PM] tux_linux
but maybe for external sd access


[6/23/2023 11:26 PM] tux_linux
idk


[6/23/2023 11:27 PM] tux_linux
but then if you have access to the external card
you can root it
so is it really worth it?


[6/23/2023 11:30 PM] szybet
Maybe


[6/23/2023 11:32 PM] tux_linux
maybe meaning


[6/23/2023 11:38 PM] szybet
We have more important things to do


[6/23/2023 11:39 PM] tux_linux
yes
not if pinenote kicks in


[6/23/2023 11:39 PM] tux_linux
well, apart from updating the system


[6/23/2023 11:39 PM] tux_linux
we will have to build a rootfs ourselves


[6/23/2023 11:40 PM] tux_linux
modern alpine probably won't support old kernels
self compiled musl does last time I checked


[6/23/2023 11:45 PM] szybet
Dont be so ambitious... This is completly unneceserry if pinenote doesnt reply


[6/23/2023 11:45 PM] szybet
Self compiled modern musl works?


[6/23/2023 11:46 PM] tux_linux
it worked in 2021


[6/23/2023 11:47 PM] tux_linux
while alpine didn't


[6/23/2023 11:47 PM] tux_linux
so i guess


[6/23/2023 11:48 PM] szybet
What didnt worked with alpinr


[6/23/2023 11:51 PM] szybet
Also whats the point of a new rootfs if newer software wont work on such an old kernel anyway, even if it compiles


[6/24/2023 12:00 AM] tux_linux
No issues with CVEs


[6/24/2023 12:07 AM] szybet
It wont work


[6/24/2023 12:10 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230624-001004_NusantaraLaunch-7EAAD.png


[6/24/2023 12:10 AM] szybet
Hard brick how


[6/24/2023 12:12 AM] tux_linux
https://discord.com/channels/809205711778480158/969796678678876280/970107434209280070


[6/24/2023 2:00 AM] the.mightydill
I'm sorry man I'm having final exams right now


[6/24/2023 2:06 AM] tux_linux
No worries

{Reactions}
👍 

[6/24/2023 9:03 AM] szybet
Oh this one...


[6/24/2023 9:07 AM] szybet
What is the tolino clone for kobo aura 2? The one that pmic was broken


[6/24/2023 9:07 AM] szybet
There are soo many broken tolinos in germany, i could get one and replace the screen


[6/24/2023 12:14 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230624-121401_NusantaraLaunch-77979.png


[6/24/2023 12:14 PM] szybet
Last question


[6/24/2023 12:14 PM] szybet
I dont even know what inflection is


[6/24/2023 12:15 PM] kuratius
Grammar conjugations I think


[6/24/2023 12:16 PM] kuratius
https://www.collinsdictionary.com/dictionary/english/inflection

{Embed}
https://www.collinsdictionary.com/dictionary/english/inflection
Inflection definition and meaning | Collins English Dictionary
Inflection definition: An inflection in someone's voice is a change in its tone or pitch as they are speaking . | Meaning, pronunciation, translations and examples
/mnt/data/projects/git/conversations/media/logo-ENGLISH-5EBA5.png


[6/24/2023 12:17 PM] kuratius
It's useful for Japanese because words aren't always in their dictionary form


[6/24/2023 12:17 PM] kuratius
Possibly also useful for German/French


[6/24/2023 12:17 PM] kuratius
Much less useful for English


[6/24/2023 12:19 PM] kuratius
For example when tapping walked it should recognize it as walk and search that in the dictionary


[6/24/2023 12:19 PM] kuratius
With Japanese you don't have spaces so without a grammar parser lookups can be very painful on ereaders


[6/24/2023 12:20 PM] kuratius
Koreader has a Japanese plugin because of that


[6/24/2023 12:25 PM] szybet
Sooo not supported


[6/24/2023 12:26 PM] szybet
I never used dictonaries so @tux-linux answer him


[6/24/2023 12:26 PM] kuratius
Fastest way to solve this would probably be to have koreader as a user app


[6/24/2023 12:27 PM] szybet
This is not the point of inkbox 🥴


[6/24/2023 12:28 PM] kuratius
I thought the point of inkbox was the custom OS+ui and not the reader app


[6/24/2023 12:28 PM] kuratius
This is kind of two projects in one


[6/24/2023 12:28 PM] kuratius
It's confusing


[6/24/2023 12:29 PM] szybet
Obviously we need an ereader that is integrated into the os


[6/24/2023 12:29 PM] kuratius
CustomOS is especially useful for devices kobo doesn't support officially anymore


[6/24/2023 12:30 PM] kuratius
Do you specifically need that to be something you made or is that lower priority than the os?


[6/24/2023 12:32 PM] szybet
It needs to be made with qt


[6/24/2023 12:33 PM] szybet
other technologies are simply worse


[6/24/2023 12:33 PM] szybet
Okular was a good candidate, but it wend bad


[6/24/2023 12:33 PM] szybet
Went*


[6/24/2023 12:34 PM] szybet
Plato & koreader pdf support is hard to use / bad in other terms


[6/24/2023 12:37 PM] szybet
The point of me contributing to inkbox and not plato ( i use rust more than cpp ) is that:

- plato developer hates contributors
- its ui is simple, works great but too simplr. Adding new features wpuld be painfull, as in qt adding charts for example is just a few clicks


[6/24/2023 12:41 PM] kuratius
There is a guy who forked plato because he couldn't get his commits accepted 

https://github.com/baskerville/plato/compare/master...thataboy:plato:master

{Embed}
https://github.com/baskerville/plato/compare/master...thataboy:plato:master
Comparing baskerville:master...thataboy:master · baskerville/plato
Document reader. Contribute to baskerville/plato development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/plato-CC6B8


[6/24/2023 12:43 PM] szybet
Lol its that bad


[6/24/2023 12:45 PM] kuratius
This has a qt fork btw

https://github.com/buggins/coolreader

{Embed}
https://github.com/buggins/coolreader
GitHub - buggins/coolreader: Official site of CoolReader project. S...
Official site of CoolReader project. Sourceforge repository is obsolete. - GitHub - buggins/coolreader: Official site of CoolReader project. Sourceforge repository is obsolete.
/mnt/data/projects/git/conversations/media/coolreader-B3C05


[6/24/2023 12:46 PM] kuratius
And koreadrr seems to have a project that integrstes it (?)
https://github.com/koreader/crengine

Don't understand what it's supposed to be

{Embed}
https://github.com/koreader/crengine
GitHub - koreader/crengine: This is the KOReader CREngine fork. It ...
This is the KOReader CREngine fork. It cross-pollinates with the official CoolReader repository at https://github.com/buggins/coolreader, in case you were looking for that one. - GitHub - koreader/...
/mnt/data/projects/git/conversations/media/crengine-0107A


[6/24/2023 12:48 PM] szybet
This is magic


[6/24/2023 12:49 PM] kuratius
?


[6/24/2023 12:51 PM] tux_linux
It *is* magic


[6/24/2023 12:52 PM] tux_linux
It renders a picture
Yes, a picture
And koreader has to work with it


[6/24/2023 12:53 PM] tux_linux
Dictionary is a relic of ancient InkBox OS
It never stopped working so never changed it


[6/24/2023 12:53 PM] kuratius
So is that good or bad?


[6/24/2023 12:53 PM] tux_linux
That bad I would guess


[6/24/2023 12:53 PM] kuratius
And this?


[6/24/2023 12:53 PM] tux_linux
Imagine having to work with pixel points instead of text zones


[6/24/2023 12:53 PM] tux_linux
For highlighting for example


[6/24/2023 12:54 PM] szybet
Magic 🥴


[6/24/2023 5:30 PM] ninuje
Fun fact: that's how the extremely fast YJ renderer on Kindle works, too 😉


[6/24/2023 5:51 PM] szybet
Cursed


[6/24/2023 5:51 PM] szybet
Pdfs for 100% give out where is this text, whats the point transforming it to image


[6/24/2023 11:23 PM] tux_linux
Good idea?

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230624-172255-43A60.png


[6/24/2023 11:40 PM] tux_linux
Well, I republished it https://www.reddit.com/r/linux/comments/14i4e29/inkbox_os_20_opensource_os_for_ereaders_is_out/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button

{Embed}
https://www.reddit.com/r/linux/comments/14i4e29/inkbox_os_20_opensource_os_for_ereaders_is_out/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button
r/linux - InkBox OS 2.0 (open-source OS for eReaders) is out!
0 votes and 0 comments so far on Reddit
/mnt/data/projects/git/conversations/media/mGoo9stgGvIVIC6DUIdRJ2rYMLO0HENBgtSQ6WNgHN-60811.jpg


[6/25/2023 12:39 AM] kuratius
surprisingly wikipedia has a category for something related https://en.wikipedia.org/wiki/Category:Email_clients_that_use_Qt

{Embed}
https://en.wikipedia.org/wiki/Category:Email_clients_that_use_Qt
Category:Email clients that use Qt
Email clients that use Qt


[6/25/2023 12:40 AM] kuratius
https://invent.kde.org/pim/trojita

{Embed}
https://invent.kde.org/pim/trojita
PIM / Trojitá · GitLab
Fast, lightweight and standard-compliant IMAP e-mail client
/mnt/data/projects/git/conversations/media/avatar-34DC1


[6/25/2023 12:41 AM] kuratius
could this be made to run with minimal effort?


[6/25/2023 12:42 AM] kuratius
or just make your own using some library I guess


[6/25/2023 3:35 AM] szybet
Could be done - i have no interest of doing it soo

{Reactions}
👍 

[6/25/2023 3:35 AM] szybet
¯\_(ツ)_/¯


[6/25/2023 3:35 AM] tux_linux
why are you up
it's 3:35


[6/25/2023 3:35 AM] tux_linux
you alright??


[6/25/2023 3:36 AM] szybet
I had a long day and went to sleep for an hour at 20:00 and waked up now


[6/25/2023 3:37 AM] szybet
¯\_(ツ)_/¯


[6/25/2023 3:37 AM] tux_linux
i understand


[6/25/2023 3:37 AM] tux_linux
i spotted the phone user there


[6/25/2023 3:37 AM] tux_linux
you never write sentences with capital letters


[6/25/2023 3:37 AM] tux_linux
neither do i
unless i'm on my phone 😉


[6/25/2023 3:38 AM] tux_linux
i made it to r/linux but apparently with even less success than other communities


[6/25/2023 3:39 AM] szybet
Mr detective


[6/25/2023 3:39 AM] szybet
Only 3 hours, maybe will get better


[6/25/2023 3:40 AM] tux_linux
yea


[6/25/2023 3:40 AM] szybet
You can write to linux experiment 😉


[6/25/2023 3:40 AM] tux_linux
it didn't get approved on hackernews i suppose?


[6/25/2023 3:40 AM] tux_linux
because ... reasons?


[6/25/2023 3:40 AM] szybet
New account


[6/25/2023 3:40 AM] tux_linux
it didn't


[6/25/2023 3:40 AM] tux_linux
well will it ever get reviewed


[6/25/2023 3:41 AM] szybet
And rules are so flexible they can suspend you for everything


[6/25/2023 3:41 AM] tux_linux
nice


[6/25/2023 3:41 AM] szybet
Nope, whatever rrally


[6/25/2023 3:41 AM] tux_linux
i did not get a reply from pine64


[6/25/2023 3:41 AM] tux_linux
yet?


[6/25/2023 3:41 AM] tux_linux
i am probably too optimistic


[6/25/2023 3:41 AM] szybet
Its weekend?


[6/25/2023 3:41 AM] tux_linux
true


[6/25/2023 3:41 AM] tux_linux
i'm on vacation


[6/25/2023 3:42 AM] tux_linux
so weekend == week basically


[6/25/2023 3:42 AM] tux_linux
well ok, i will write to linux experiment


[6/25/2023 3:42 AM] tux_linux
there was also this other guy - louis rossmann


[6/25/2023 3:43 AM] tux_linux
do you think it's worth trying?


[6/25/2023 3:43 AM] szybet
We alrrady tried


[6/25/2023 3:43 AM] szybet
🥴


[6/25/2023 3:43 AM] szybet
With futo


[6/25/2023 3:43 AM] tux_linux
you?


[6/25/2023 3:43 AM] tux_linux
that was him?


[6/25/2023 3:43 AM] szybet
Yep, dont you remember?


[6/25/2023 3:43 AM] szybet
He is related there


[6/25/2023 3:43 AM] tux_linux
well yes, but didn't make the link


[6/25/2023 3:43 AM] tux_linux
maybe he could just talk about it


[6/25/2023 3:43 AM] tux_linux
idk


[6/25/2023 3:44 AM] szybet
I send it on pv long before 2.0


[6/25/2023 3:44 AM] tux_linux
ok
then nvm


[6/25/2023 3:44 AM] tux_linux
there was another one


[6/25/2023 3:44 AM] tux_linux
no?


[6/25/2023 3:44 AM] szybet
If linux experiment doesnt reply, yes


[6/25/2023 3:44 AM] szybet
Its in todo


[6/25/2023 3:44 AM] tux_linux
ok


[6/25/2023 5:14 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230624-231358-7F938.png


[6/25/2023 7:05 AM] szybet
Niceee


[6/25/2023 7:05 AM] szybet
Reply them


[6/25/2023 8:33 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-DD75E.png


[6/25/2023 8:33 AM] szybet
https://tenor.com/view/oh-god-breaking-bad-shookt-gif-4703363

{Embed}
https://tenor.com/view/oh-god-breaking-bad-shookt-gif-4703363
Oh God
/mnt/data/projects/git/conversations/media/oh-god-breaking-bad-54E6E.png


[6/25/2023 8:40 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-934D3.png


[6/25/2023 8:40 AM] szybet
tux-linux, you need to answer the rest about the kindles


[6/25/2023 1:36 PM] tux_linux
Not true for every device


[6/25/2023 1:36 PM] szybet
i explained it


[6/25/2023 1:36 PM] szybet
still i hate this comment


[6/25/2023 1:38 PM] tux_linux
Well, some people like trolling that much


[6/25/2023 3:00 PM] szybet
have you written to linux experiment?


[6/25/2023 3:00 PM] tux_linux
no


[6/25/2023 3:00 PM] szybet
when will you


[6/25/2023 3:11 PM] tux_linux
what do i say to him


[6/25/2023 3:17 PM] szybet
1. hello
2. description of the project
3. the state of the project ( 2 developers kek )
4. the second developer is a fan and thought that maybe you would like to talk about it on your news show
5. we dont want to look attention seeking, but we want the project to be alive
6. sorry if you dont like if someone wants to "advertise" their open source software

in better words, something like that


[6/25/2023 3:18 PM] tux_linux
ok


[6/25/2023 3:18 PM] szybet
7. also mention that we posted the release on reddit subs and mobilereads, but because reddit is dead we dont have a way to show our software to the world or smth


[6/25/2023 3:58 PM] tux_linux
```
Hello,

My name is Nicolas Mailloux and I am the main developer of InkBox OS, a Linux-based, open-source, fully-featured eReader operating system that currently runs on eight different devices. We are only two people actively working on it and I initially published it in March 2021. The other one joined me in February 2022 and is a fan of your channel. He suggested that I write to you since we are currently considering halting or suspending development since no one really seems interested in the project, and even if someone is, they don't have the skills or the will to contribute to it.
So we thought that contacting you could maybe help in gathering more people around if you talk about it on your channel, as well as encouraging existing eReader users to use open-source software if their device is supported. We did post something on Reddit and other social media platforms, but as you probably know, the former is kind of dying right now, so we haven't received as much feedback as we did for earlier releases.

We have recently released InkBox OS 2.0 after more than a year of work : https://www.youtube.com/watch?v=cyWu_pHwqNg
You can also check out our website: https://inkbox.ddns.net
As well as our GitHub organization : https://github.com/Kobo-InkBox/

I hope that this is of interest to you and that you will enjoy looking into it.

Best regards,
Nicolas Mailloux
```


[6/25/2023 4:00 PM] szybet
a bit of "blackmail" ( idk english )


[6/25/2023 4:00 PM] szybet
i like it


[6/25/2023 4:00 PM] tux_linux
what? where


[6/25/2023 4:01 PM] szybet
nah, just joking


[6/25/2023 4:01 PM] tux_linux
oh ok


[6/25/2023 4:01 PM] szybet
looks good


[6/25/2023 4:01 PM] szybet
otherwise


[6/25/2023 4:01 PM] szybet
you can send it


[6/25/2023 4:01 PM] szybet
uhm


[6/25/2023 4:01 PM] tux_linux
i didn't put my gh profile nor yours


[6/25/2023 4:01 PM] tux_linux
do you want that i do that


[6/25/2023 4:01 PM] tux_linux
or maybe its not necessary


[6/25/2023 4:01 PM] tux_linux
idk


[6/25/2023 4:02 PM] szybet
add both
the email is
t.linuxexperiment@gmail.com

i found it at
https://www.youtube.com/@TheLinuxEXP/about

{Embed}
https://www.youtube.com/@TheLinuxEXP/about
The Linux Experiment
Making Linux accessible: no techno babble, no super technical content. Just Linux desktop news, simple tutorials, application spotlights, and opinion pieces trying to stay positive, without gatekeeping.

👏 SUPPORT THE CHANNEL:
Get access to a weekly podcast, vote on the next topics I cover, and get your name in the credits:

YouTube: https://www...
/mnt/data/projects/git/conversations/media/AGIKgqNGLy645LbRXqj20JAnbfQd2Lj1dwHk893_WR-00F23


[6/25/2023 4:02 PM] tux_linux
i know

{Reactions}
👍 

[6/25/2023 4:03 PM] szybet
as im writing ereader lib, how do it name those 3 names of naming things:

n306

kobo nia

luna


[6/25/2023 4:04 PM] szybet
i will support all of them


[6/25/2023 4:04 PM] szybet
but how do i name them in code


[6/25/2023 4:04 PM] tux_linux
n306


[6/25/2023 4:04 PM] szybet
what


[6/25/2023 4:04 PM] tux_linux
what is ereader lib


[6/25/2023 4:04 PM] tux_linux
oh


[6/25/2023 4:04 PM] szybet
i talked about it half a year ago


[6/25/2023 4:04 PM] tux_linux
1. device model
2. device name
3. device codeame


[6/25/2023 4:04 PM] szybet
good


[6/25/2023 4:04 PM] tux_linux
i forgot for sure


[6/25/2023 4:05 PM] szybet
make it handle hardware things, and contain general functions


[6/25/2023 4:05 PM] szybet
because we tossed out the part from qplatform plugin


[6/25/2023 4:05 PM] szybet
because if a rust app will want to use it, it will be messy


[6/25/2023 4:05 PM] szybet
for example


[6/25/2023 4:06 PM] tux_linux
in what language are you doing that


[6/25/2023 4:06 PM] szybet
cpp / qt


[6/25/2023 4:06 PM] szybet
qt only inside


[6/25/2023 4:06 PM] tux_linux
ok


[6/25/2023 4:06 PM] szybet
and maybe some specific functions


[6/25/2023 4:06 PM] tux_linux
will it directly affect inkbox


[6/25/2023 4:06 PM] szybet
yes, i hope you will implement it


[6/25/2023 4:06 PM] tux_linux
in what way


[6/25/2023 4:07 PM] szybet
replace all if (n306) in the way i provide


[6/25/2023 4:07 PM] szybet
to make the code better


[6/25/2023 4:07 PM] szybet
actually if("n306\n")... :D


[6/25/2023 4:09 PM] szybet
and backlight things


[6/25/2023 4:09 PM] szybet
and actually all of functions.h


[6/25/2023 4:09 PM] szybet
but in the future


[6/25/2023 4:12 PM] tux_linux
ok
after clara hd port


[6/25/2023 4:12 PM] tux_linux
but you can start working on it


[6/25/2023 4:12 PM] szybet
i need it for sanki


[6/25/2023 4:13 PM] szybet
it will be nickel compatible btw


[6/25/2023 4:13 PM] szybet
because why not


[6/25/2023 4:13 PM] tux_linux
we won't run inkbox on nickel


[6/25/2023 4:13 PM] tux_linux
no way


[6/25/2023 4:13 PM] szybet
an app developer would want to run on both systems


[6/25/2023 4:13 PM] szybet
for example: me


[6/25/2023 4:13 PM] tux_linux
then what purpose does our os serve


[6/25/2023 4:13 PM] tux_linux
what *real* purpose


[6/25/2023 4:14 PM] szybet
we cant force developers into one platform?


[6/25/2023 4:14 PM] szybet
you are so pesymistic


[6/25/2023 4:14 PM] tux_linux
everyone already writes app for one platform
*you're* being forced to write for one platform


[6/25/2023 4:14 PM] tux_linux
so why not be different


[6/25/2023 4:14 PM] tux_linux
sanki is already so unique people could want to install inkbox os for it


[6/25/2023 4:14 PM] szybet
better app framework


[6/25/2023 4:15 PM] tux_linux
if we port any other app to nickel, then what's the point, people will say


[6/25/2023 4:15 PM] szybet
xorg? open source? tinker friendly? written in a normal ui language? no adds? no breaking of nickel menu after every update? loool


[6/25/2023 4:16 PM] szybet
i dont want to? i got paid to do so


[6/25/2023 4:16 PM] tux_linux
well ok


[6/25/2023 4:16 PM] szybet
i will not implement sleep support in sanki for nickel


[6/25/2023 4:16 PM] szybet
never


[6/25/2023 4:16 PM] szybet
its such a pain


[6/25/2023 4:16 PM] tux_linux
i don't think you would be alive afterwards


[6/25/2023 4:16 PM] szybet
imagine i would need to do it for all apps


[6/25/2023 4:16 PM] tux_linux
neither would i


[6/25/2023 4:17 PM] szybet
you are really pesymistic...


[6/25/2023 4:17 PM] tux_linux
also, nickel kernel sources for nia are not the same as for inkbox right?


[6/25/2023 4:17 PM] tux_linux
so even more problems


[6/25/2023 4:18 PM] szybet
i got sanki working on nickel in 30 minutes


[6/25/2023 4:18 PM] szybet
by copying inkbox sources


[6/25/2023 4:18 PM] szybet
i mean binaries


[6/25/2023 4:18 PM] tux_linux
yes, because I spent the last two and almost a half years developing this project with no one but you wanting to get in it


[6/25/2023 4:19 PM] tux_linux
and saying hello to ghosts on discord, losing interest of people (you have experienced that too), getting no replies or almost no replies on mobileread, getting almost no PRs on GH, just doing this for nothing


[6/25/2023 4:20 PM] tux_linux
what frustrates me is that we are being coerced into porting our apps for nickel because more people will install them (and none will install our os)
that's not good


[6/25/2023 4:20 PM] tux_linux
I did not realize it before this morning


[6/25/2023 4:20 PM] tux_linux
sorry for the rant


[6/25/2023 4:21 PM] szybet
i do understand you


[6/25/2023 4:21 PM] szybet
i port sanki do nickel only for the money, which allowed me to work on inkbox more, i already explained

{Reactions}
👍 

[6/25/2023 4:22 PM] szybet
you saw people talking on reddit that this project is interesting, and they hoped it would support their device


[6/25/2023 4:22 PM] szybet
some even said they will buy one that is compatible


[6/25/2023 4:22 PM] szybet
even kuratius did this but as for now he is doing pm os stuff


[6/25/2023 4:23 PM] szybet
its not that bad


[6/25/2023 4:23 PM] tux_linux
Everyone says that


[6/25/2023 4:24 PM] tux_linux
I can't buy every device in the world


[6/25/2023 4:24 PM] tux_linux
I think with the Clara I will have like 11 eReaders at home


[6/25/2023 4:24 PM] szybet
i checked downloads for my mirror: there were a few downloads on the nia image

{Reactions}
👍 

[6/25/2023 4:25 PM] szybet
if every 2 years someone like me gets into the project, you wont have to then


[6/25/2023 4:26 PM] szybet
even in this pesymistic thinking the project will live


[6/25/2023 4:27 PM] tux_linux
i hope clara hd support will get it going


[6/25/2023 4:27 PM] szybet
dont expect much, but it will help for sure


[6/25/2023 5:01 PM] szybet
so you sended the email?


[6/25/2023 5:06 PM] tux_linux
yes


[6/25/2023 5:06 PM] szybet
thanks

{Reactions}
👍 

[6/25/2023 5:41 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E7CBF.png


[6/25/2023 5:41 PM] szybet
@Kuratius


[6/25/2023 5:41 PM] szybet
from andi description of how to do that, its just like making a ps1 mod


[6/25/2023 5:41 PM] szybet
a bit of soldering and cutting things ^_^


[6/25/2023 5:44 PM] kuratius
Paperwhite 5 teardown

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230625-174338_YouTube-4BE26.png


[6/25/2023 5:44 PM] szybet
holy crap ok


[6/25/2023 5:44 PM] szybet
those metal thingis would be painfull to unsolder


[6/25/2023 5:45 PM] szybet
why did they do that?


[6/25/2023 5:45 PM] kuratius
I imagine cause they are assholes


[6/25/2023 5:45 PM] szybet
understandable


[6/25/2023 5:47 PM] kuratius
Around 14 min he mentions that there may be a way to put the port into a jtag mode or similar
https://youtu.be/BTJdqxAj6f8

{Embed}
Bryan Fields
https://www.youtube.com/watch?v=BTJdqxAj6f8
How to Open the Kindle PaperWhite 5 Signature Edition (2021)
In this video I'm showing how to open and disassemble the Kindle PaperWhite 5 Signature Edition (2021) (PW5SE) and what's on the board.  This may be useful for replacing the battery too.   The last 15 min of the video is just me probing around with a scope, and you can skip that unless it's of interest.  Hell you can skip any part of this if it'...
/mnt/data/projects/git/conversations/media/maxresdefault-87EC1.jpg


[6/25/2023 5:48 PM] szybet
the case dissasembly looks normal


[6/25/2023 5:49 PM] kuratius
But if that worked for consumers it'd be used for jailbreak, so it's either locked down or disabled


[6/25/2023 5:49 PM] szybet
from what i know the problem with kindles is the locked down cpu


[6/25/2023 5:49 PM] kuratius
I had the same reaction when I saw that they put their chips into literal cages


[6/25/2023 5:50 PM] szybet
for phones it makes sense - they use many diffrent wireless connections and heat


[6/25/2023 5:50 PM] szybet
but this? lol


[6/25/2023 5:54 PM] tux_linux
Download mode: exists


[6/25/2023 5:54 PM] szybet
its more complicated than that


[6/25/2023 5:55 PM] tux_linux
Yes but there is probably a way to trigger it without any soldering


[6/25/2023 5:55 PM] tux_linux
or minimal amount of soldering


[6/25/2023 5:55 PM] tux_linux
maybe just by shorting the mmc


[6/25/2023 5:55 PM] szybet
cut down the power to the mmc


[6/25/2023 5:55 PM] szybet
and then soldering it back


[6/25/2023 5:55 PM] szybet
https://tenor.com/view/going-insane-cat-insane-gif-21711418

{Embed}
https://tenor.com/view/going-insane-cat-insane-gif-21711418
/mnt/data/projects/git/conversations/media/going-insane-cat-7A8E5.png


[6/25/2023 5:55 PM] tux_linux
andi would probably know more about it


[6/25/2023 5:55 PM] szybet
i talked about it with him


[6/25/2023 5:57 PM] tux_linux
it's like that even on kindle touch original
"heatsinks"


[6/25/2023 5:57 PM] kuratius
Uuuh


[6/25/2023 5:57 PM] kuratius
Lies


[6/25/2023 5:57 PM] tux_linux
welp


[6/25/2023 6:03 PM] tux_linux
where were we with audio on inkbox tree? did you lose the commits szybet?


[6/25/2023 6:03 PM] tux_linux
i remembered i need to port audio to kt for 2.1


[6/25/2023 6:03 PM] szybet
i have them i hope


[6/25/2023 6:03 PM] szybet
i dont have it fully ported for nia yet


[6/25/2023 6:03 PM] tux_linux
ok


[6/25/2023 6:03 PM] szybet
i will soon

{Reactions}
👍 

[6/25/2023 6:03 PM] szybet
just after sanki & ereaderdev lib


[6/25/2023 6:03 PM] tux_linux
2 months?


[6/25/2023 6:04 PM] szybet
with this?


[6/25/2023 6:04 PM] tux_linux
well, i don't know what to do


[6/25/2023 6:04 PM] tux_linux
i was looking for options


[6/25/2023 6:04 PM] tux_linux
kt audio popped up


[6/25/2023 6:04 PM] szybet
I will finish today


[6/25/2023 6:04 PM] szybet
well do other things


[6/25/2023 6:04 PM] tux_linux
you will finish the lib today?


[6/25/2023 6:05 PM] szybet
no, the main part of it


[6/25/2023 6:05 PM] tux_linux
hm ok


[6/25/2023 6:05 PM] szybet
brightness & descriptor


[6/25/2023 6:05 PM] tux_linux
ok


[6/25/2023 6:05 PM] tux_linux
also, while you're at it, convert n306\n to n306


[6/25/2023 6:05 PM] tux_linux
i hope we will be able to do that in inkbox tree as well for 2.1


[6/25/2023 6:05 PM] szybet
i dont touch inkbox


[6/25/2023 6:05 PM] tux_linux
yes, i mean in your lib


[6/25/2023 6:06 PM] szybet
i use 3 types of enums


[6/25/2023 6:06 PM] szybet
and all the functions that will need to know which device will just grab the structure via pointer


[6/25/2023 6:06 PM] szybet
you can grab whatever one you like


[6/25/2023 6:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8F422.png


[6/25/2023 6:07 PM] szybet
and i will need to you att the models, you know them better


[6/25/2023 6:07 PM] tux_linux
KoboNia_a


[6/25/2023 6:07 PM] szybet
well yes


[6/25/2023 6:08 PM] tux_linux
also in inkbox gui rootfs n905 b and c are grouped to simply n905


[6/25/2023 6:08 PM] tux_linux
in gui rootfs only


[6/25/2023 6:08 PM] tux_linux
idk if you want to do that for nia as well


[6/25/2023 6:08 PM] tux_linux
that's a bit less low-level


[6/25/2023 6:08 PM] tux_linux
in rootfs `/opt/inkbox_device` reads n905b or n905c


[6/25/2023 6:10 PM] szybet
I will add kobo nia, kobo nia a and kobo nia c, you will have the a or c but can opt out to use the main class in the gui


[6/25/2023 6:10 PM] tux_linux
ok


[6/25/2023 6:10 PM] tux_linux
we haven't found b yet?


[6/25/2023 6:10 PM] szybet
nope


[6/25/2023 6:10 PM] tux_linux
ok


[6/25/2023 6:10 PM] szybet
maybe doesnt exist


[6/25/2023 6:10 PM] szybet
or asian market


[6/25/2023 6:10 PM] szybet
idk


[6/25/2023 6:11 PM] szybet
note: as for now the lib will just give the main class, because we dont know how the diffrencee in c and a yet


[6/25/2023 6:13 PM] tux_linux
ok


[6/25/2023 8:58 PM] szybet
```
Warning: "QIODevice::read (QFile, "/sys/class/backlight/mxc_msp430.0/brightness"): WriteOnly device" (:0, )
```
weird changes on nickel


[6/26/2023 3:17 AM] tux_linux
@dill here is (probably) your new job once you will have time 😉

{Attachments}
/mnt/data/projects/git/conversations/media/image-DDFE3.png


[6/26/2023 8:04 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230626-020405-1BB51.png


[6/26/2023 8:04 AM] tux_linux
They replied...


[6/26/2023 8:05 AM] szybet
😂 😭


[6/26/2023 8:05 AM] szybet
Micolas


[6/26/2023 8:05 AM] szybet
my god


[6/26/2023 8:06 AM] szybet
well you can try the chat rooms


[6/26/2023 8:10 AM] tux_linux
It's 2am now so we go together at the same time later in the day


[6/26/2023 8:11 AM] szybet
so pine is in europe


[6/26/2023 8:11 AM] szybet
cool


[6/26/2023 8:11 AM] szybet
okay, good night

{Reactions}
👍 

[6/26/2023 8:11 AM] tux_linux
Unless there people are as crazy as us


[6/26/2023 8:13 AM] szybet
i dont think so, work started  13 minutes ago in europe


[6/26/2023 8:13 AM] szybet
at 8 in the morning


[6/26/2023 8:14 AM] tux_linux
Hmm
They wrote at 7:40 then


[6/26/2023 8:15 AM] tux_linux
Russia or something?


[6/26/2023 8:15 AM] szybet
maybe they start earlier


[6/26/2023 8:15 AM] szybet
please no :<


[6/26/2023 8:15 AM] tux_linux
Well, timezone would match


[6/26/2023 8:16 AM] tux_linux
Or maybe some random Australian location with really strange timezone


[6/26/2023 8:16 AM] szybet
¯\_(ツ)_/¯


[6/26/2023 10:23 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230626-102342_Firefox-B7545.png


[6/26/2023 10:24 AM] kuratius
They shipped  my order from China for what it's worth


[6/26/2023 11:04 AM] szybet
kobo nia battery performance on nickel when sleeping is horrible


[6/26/2023 11:04 AM] szybet
compared to inkbox


[6/26/2023 11:04 AM] szybet
dropped 50% over night when inkbox drops nothing


[6/26/2023 11:06 AM] kuratius
I had mine sleeping for a day or two in koreader, was nearly full, will check state when i get home


[6/26/2023 11:12 AM] szybet
it doesnt even enter sometimes sleep


[6/26/2023 11:12 AM] szybet
i can see that based on the serial diodes


[6/26/2023 11:12 AM] szybet
if the cpu goes to sleep, it shorts the data lines to gnd


[6/26/2023 11:12 AM] szybet
¯\_(ツ)_/¯


[6/26/2023 12:16 PM] alexanderi96
Hi everyone 🙂 so, where should I start testing things for the Clara HD? As I mentioned yesterday, do I need a serial console hookup?


[6/26/2023 12:16 PM] szybet
yep you need


[6/26/2023 12:16 PM] szybet
#deleted-channel as i mentioned


[6/26/2023 12:16 PM] szybet
there is everything you need


[6/26/2023 12:17 PM] szybet
once you read it all & make some notes it will be clear what to do

{Reactions}
❤️ 

[6/26/2023 12:34 PM] alexanderi96
Thanks


[6/26/2023 2:12 PM] kuratius
Mine is st 89% after 2-3 days of sleep in koreader


[6/26/2023 2:12 PM] kuratius
I think something is wrong with your nickel install or ereader


[6/26/2023 2:12 PM] szybet
koreader does put it more often to sleep


[6/26/2023 2:13 PM] szybet
ereader? maybe - its modified a bit


[6/26/2023 2:13 PM] szybet
still, it was like that after i bought it


[6/26/2023 2:14 PM] kuratius
Will test normal nickel


[6/26/2023 2:14 PM] szybet
normal nickel is the problem


[6/26/2023 2:14 PM] szybet
koreader - sometimes


[6/26/2023 2:15 PM] kuratius
Could serial connection prevent sleep?


[6/26/2023 2:15 PM] szybet
i developed IPD using a serial connection


[6/26/2023 2:15 PM] szybet
the answer is *no*


[6/26/2023 2:16 PM] tux_linux
Hehe


[6/26/2023 2:16 PM] szybet
@tux-linux when do you want to go to the pine people


[6/26/2023 2:18 PM] tux_linux
I will tell you
Maybe an hour


[6/26/2023 2:18 PM] tux_linux
It's a bit sad we have to reexplain everything probably


[6/26/2023 2:18 PM] tux_linux
Maybe better to just share the video first


[6/26/2023 2:18 PM] szybet
just copy the email


[6/26/2023 2:18 PM] szybet
lol


[6/26/2023 2:19 PM] tux_linux
Hmm who will read it


[6/26/2023 2:19 PM] tux_linux
It's a chat room


[6/26/2023 2:19 PM] szybet
¯\_(ツ)_/¯


[6/26/2023 2:19 PM] szybet
then make the wiki page


[6/26/2023 2:19 PM] spagettio
i was thinking the pine ereader may be an interesting target when i first heard about this project


[6/26/2023 2:19 PM] szybet
exactly


[6/26/2023 2:19 PM] szybet
and now we try to contact pine for this


[6/26/2023 2:19 PM] tux_linux
.


[6/26/2023 2:20 PM] tux_linux
.


[6/26/2023 2:20 PM] spagettio
ive made a small project for pine, just a small graphical frontend for some flashing tools for the pinecil

{Reactions}
👍 

[6/26/2023 2:21 PM] tux_linux
Which one to take🥴

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230626-082135-09496.png


[6/26/2023 2:22 PM] spagettio
i think an important thing to remember is that pine64 doesnt really touch the software, its mostly community driven

{Reactions}
👍 

[6/26/2023 2:22 PM] spagettio
they are all bridged together with a bridge bot so id just join the discord server

{Reactions}
👍 

[6/26/2023 2:22 PM] tux_linux
Well matrix is probably better


[6/26/2023 2:22 PM] szybet
there is the pine note


[6/26/2023 2:23 PM] tux_linux
They were seeking an os for the pine note
So here we are I guess


[6/26/2023 2:23 PM] szybet
join the pine note channel


[6/26/2023 2:23 PM] szybet
and share the link here maybe


[6/26/2023 2:23 PM] spagettio
yeah


[6/26/2023 2:23 PM] tux_linux
I will


[6/26/2023 2:23 PM] tux_linux
But we go at the same time


[6/26/2023 2:23 PM] spagettio
some of the existing developers for the pinenotes current os will probably be quite interested i imagine


[6/26/2023 2:24 PM] kuratius
https://forum.pine64.org/showthread.php?tid=17515&pid=116177#pid116177
```The PineNote isn't produced until the software state of an OS which the factory can pre-flash matured. From the Q&A:

"Due to very low and slow PineNote sales, the PineNote will only consider to produce again after stable and end user ready Linux OS build that can be used as PineNote default OS build becomes available.```


[6/26/2023 2:24 PM] kuratius
(Posted this previously) @Spagett


[6/26/2023 2:25 PM] spagettio
gotcha


[6/26/2023 4:16 PM] the.mightydill
will do after final exams and Eid 😃


[6/26/2023 7:13 PM] tux_linux
Why not do that in inkbox-1 @Szybet


[6/26/2023 7:13 PM] tux_linux
Just make a new branch and pull from upstream


[6/26/2023 7:16 PM] szybet
what


[6/26/2023 7:16 PM] szybet
inkbox-audio?


[6/26/2023 7:16 PM] tux_linux
Yes


[6/26/2023 7:16 PM] szybet
its a seperate service running in rootfs


[6/26/2023 7:16 PM] tux_linux
Ok


[6/26/2023 8:27 PM] kuratius
what's less hassle to call on page turn for the current inkbox, a function in C or a function in Rust?


[6/26/2023 8:28 PM] tux_linux
?


[6/26/2023 8:28 PM] tux_linux
a trigger function?


[6/26/2023 8:28 PM] kuratius
Am writing a template for the statistics thing


[6/26/2023 8:29 PM] tux_linux
obviously do it with c++/c if you want it linked with the software


[6/26/2023 8:29 PM] tux_linux
there is the `on_nextBtn_pressed` slot in `reader.cpp`


[6/26/2023 8:32 PM] kuratius
callMeOnBootOrWake()
callMeOnBookOpen()
callMeOnBookClose()
callMeOnShutDown()
calculateStatistics()
displayStatistics()
that's kind of what I was thinking of as a rough idea
then define conditions on when it should add the time between page turns and words per page to a running average or add it to a list of past page turn times and words per page


[6/26/2023 8:32 PM] tux_linux
use camelCase


[6/26/2023 8:32 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[6/26/2023 8:32 PM] tux_linux
Well, these are good ideas


[6/26/2023 8:34 PM] tux_linux
for the time, you can do a simple comparison with `QDateTime::currentSecsSinceEpoch()`


[6/26/2023 8:51 PM] szybet
exactly something like that


[6/26/2023 8:55 PM] tux_linux
i will try to debug sff again


[6/26/2023 8:56 PM] szybet
dont waste a lot of time on it


[6/26/2023 8:56 PM] tux_linux
i will


[6/26/2023 9:20 PM] tux_linux
chatgpt wrote code that compiles


[6/26/2023 9:21 PM] szybet
this means nothing


[6/26/2023 9:22 PM] tux_linux
but it doesn'twork


[6/26/2023 9:22 PM] tux_linux
of course


[6/26/2023 9:22 PM] szybet
did you tried fixed size


[6/26/2023 9:22 PM] szybet
or move


[6/26/2023 9:23 PM] tux_linux
i am trying stretch


[6/26/2023 9:23 PM] szybet
function on qwidget


[6/26/2023 9:23 PM] szybet
propably not


[6/26/2023 9:23 PM] szybet
you need to look at the code below, something is unforcing things


[6/26/2023 9:23 PM] szybet
maybe check if its in fullscreen


[6/26/2023 9:23 PM] szybet
or launch a qdialog above it to check


[6/26/2023 9:24 PM] tux_linux
well, chatgpt got *somewhere*


[6/26/2023 9:24 PM] szybet
what did it try


[6/26/2023 9:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/sff-55B2A.png


[6/26/2023 9:25 PM] szybet
um try to launch all those things i said after a delay


[6/26/2023 9:25 PM] szybet
its almost working


[6/26/2023 9:25 PM] szybet
show me the code


[6/26/2023 9:25 PM] tux_linux
yes


[6/26/2023 9:25 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-9C532.txt


[6/26/2023 9:25 PM] tux_linux
i will ask it to move it to the bottom


[6/26/2023 9:26 PM] szybet
t think a simple resize would workj


[6/26/2023 9:26 PM] szybet
but this is good too


[6/26/2023 9:27 PM] tux_linux
ok chatgpt, you are useful sometimes


[6/26/2023 9:27 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/sff-AE899.png


[6/26/2023 9:27 PM] szybet
it is usefull until anythinh more complicated appears


[6/26/2023 9:28 PM] tux_linux
like inputting text hehe


[6/26/2023 9:28 PM] szybet
it doesnt helped with mouse in platfoprm pl;ugin at all


[6/26/2023 9:28 PM] szybet
actually


[6/26/2023 9:28 PM] szybet
please implement sankiu keyboard in it


[6/26/2023 9:28 PM] szybet
please


[6/26/2023 9:28 PM] szybet
easy and looking great already


[6/26/2023 9:28 PM] tux_linux
i will put inkbox's todo keyboard


[6/26/2023 9:28 PM] tux_linux
embedded


[6/26/2023 9:29 PM] szybet
welp


[6/26/2023 9:29 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-BF356.png


[6/26/2023 9:29 PM] tux_linux
well, probably without the text input bar


[6/26/2023 9:30 PM] szybet
ye


[6/26/2023 10:45 PM] tux_linux
well, I put the example code with working button layout to github


[6/26/2023 10:45 PM] tux_linux
but can't figure out how to input text in the terminal


[6/26/2023 10:46 PM] szybet
look at feathernotes code


[6/26/2023 10:46 PM] szybet
you can literally send pressed keys to a widget


[6/26/2023 10:46 PM] szybet
or look at rss commits


[6/26/2023 10:46 PM] szybet
¯\_(ツ)_/¯


[6/26/2023 10:47 PM] tux_linux
i tried that


[6/26/2023 10:47 PM] tux_linux
of course it didn't work


[6/26/2023 10:47 PM] szybet
it must have worked


[6/26/2023 10:47 PM] szybet
impossible


[6/26/2023 10:47 PM] szybet
https://tenor.com/view/thanos-impossible-marvel-shocked-gif-15104180

{Embed}
https://tenor.com/view/thanos-impossible-marvel-shocked-gif-15104180
/mnt/data/projects/git/conversations/media/thanos-impossible-79952.png


[6/26/2023 10:47 PM] tux_linux
yes, possible, because libqvterm


[6/27/2023 2:25 AM] tux_linux
my glo hd's usb port broke completely


[6/27/2023 2:26 AM] tux_linux
thankfully I still had the main board of the older one (that had a broken screen)


[6/27/2023 2:27 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230627_002647628.MP-7F1A1.jpg
/mnt/data/projects/git/conversations/media/PXL_20230627_002638608-C3B81.jpg
/mnt/data/projects/git/conversations/media/PXL_20230627_001727878-A0A87.jpg


[6/27/2023 2:27 AM] tux_linux
so here is the first frankenstein kobo running inkbox


[6/27/2023 2:27 AM] tux_linux
(probably)


[6/27/2023 2:29 AM] tux_linux
It seems there were two revisions of the Glo HD at least
But doesn't seem to make a difference for sw


[6/27/2023 3:25 AM] Deleted User
Screen frozen after trying to sync Gutenberg

{Attachments}
/mnt/data/projects/git/conversations/media/20230626_211929-A2A88.mp4


[6/27/2023 3:25 AM] Deleted User
I will take video of keyboard tomorrow


[6/27/2023 3:35 AM] tux_linux
Hmm ok that one's not normal


[6/27/2023 3:35 AM] tux_linux
May I see the main PCB on the inside of the device ? Thanks


[6/27/2023 4:40 AM] tux_linux
well @Szybet I am once again asking for your help on sff
please try to figure out an input method if you want


[6/27/2023 4:40 AM] tux_linux
This is my launch command
```
QT_QPA_PLATFORM=kobo LD_LIBRARY_PATH=/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib
:/tmp QT_QPA_FONTDIR=. QT_FONT_DPI=275 SHELL=/bin/sh ./sff
```


[6/27/2023 4:43 AM] tux_linux
the build.sh script in the repo should get you going, it even worked oob on arm64


[6/27/2023 4:50 AM] tux_linux
basically, I would appreciate if you could find a way to input text into the terminal with a qt button
then with that method I could implement the whole virtual keyboard on it


[6/27/2023 4:50 AM] tux_linux
thanks


[6/27/2023 4:50 AM] tux_linux
I tried to trigger `keyPressEvent` when a mouse click was done but no dice apparently


[6/27/2023 5:18 AM] tux_linux
even this, on mouseMoveEvent, doesn't work
```
void QVTerm::mouseMoveEvent(QMouseEvent *event)
{
    event->accept();

    QKeyEvent * keyEvent = new QKeyEvent(QKeyEvent::KeyPress, Qt::Key_A, Qt::NoModifier);
    VTermKey key = vtermKey(keyEvent->key(), false);
    VTermModifier mod = vtermModifier(keyEvent->modifiers());
    vterm_keyboard_key(m_vterm, key, mod);
    flushToPty();

    if (!QRect(QPoint(), size()).contains(event->pos()))
        return;

    m_highlight->update(
            event->pos().x() / m_cellSize.width(),
            (event->pos().y() / m_cellSize.height()) - static_cast<int>(m_scrollback->offset()));
    viewport()->update();
}
```
(qvterm.cpp)


[6/27/2023 5:18 AM] tux_linux
I added these
```
QKeyEvent * keyEvent = new QKeyEvent(QKeyEvent::KeyPress, Qt::Key_A, Qt::NoModifier);
    VTermKey key = vtermKey(keyEvent->key(), false);
    VTermModifier mod = vtermModifier(keyEvent->modifiers());
```


[6/27/2023 6:14 AM] szybet
Where do you send the key to the widget


[6/27/2023 6:46 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230627-064601_NusantaraLaunch-F4082.png


[6/27/2023 6:46 AM] szybet
Try something like that


[6/27/2023 6:46 AM] szybet
If doesnt work, try to send the event to the widget directly


[6/27/2023 6:46 AM] szybet
If it doesnt work, try the above but make focus on the terminal before sending


[6/27/2023 7:03 AM] szybet
A repair shop should require less than 40$ bucks for such a repair, even less


[6/27/2023 7:03 AM] szybet
I have done such repairs for a bar of chocolate


[6/27/2023 7:03 AM] szybet
Because it costs nothing, cents for the usb port


[6/27/2023 7:04 AM] szybet
20, 15, 10 would be reasonable


[6/27/2023 7:52 AM] rs_matr1x
swap in a USB-C


[6/27/2023 8:36 AM] rs_matr1x
that's why I use those magnetic chargers where you don't have to remove the tip from the micro-usb


[6/27/2023 10:06 AM] szybet
the case would be a problem


[6/27/2023 10:10 AM] rs_matr1x
true


[6/27/2023 1:45 PM] mmathias_official
Hey everybody! I know this has probably been asked 1000 times, but how do I boot the rooted kernel? There does not seem to be much information in the Wiki about it - except that a rooted kernel exists. I'd gladly write a wiki page about it if anybody here could explain. Can the rooted kernel be found in the recoveryfs partition? And if so - how do I boot it? And what about the "echo rooted | dd of=/dev/mmcblk0 bs=512 seek=79872" command? Is this necessary? Thanks so much for your help!


[6/27/2023 1:46 PM] spagettio
i believe i just rooted mine (havnt confirmed yet) but i went into the diagnostic mode


[6/27/2023 1:47 PM] spagettio
you can enter it by flicking the power button a few times while booting


[6/27/2023 1:47 PM] spagettio
i found the info in the newest video


[6/27/2023 1:47 PM] mmathias_official
Btw, I am asking because I would like to access my Kobo using ssh over wifi? Is that possible at all? It would be nice to be able to access the file system using sftp in order to upload books to the device.


[6/27/2023 1:47 PM] szybet
exactly, do what spagett doers


[6/27/2023 1:48 PM] mmathias_official
Ok, thanks, I'll try. 🙂


[6/27/2023 1:48 PM] szybet
yes, after you root you have ssh


[6/27/2023 1:48 PM] szybet
even sshfs


[6/27/2023 1:48 PM] szybet
but yuu need to remove the LocaLibrary database to refresh it, so new books can appear


[6/27/2023 1:49 PM] mmathias_official
Awesome, I'll try that, thank you!


[6/27/2023 1:49 PM] szybet
You are welcome to write a wiki page for it, request a wiki account from @tux-linux

{Reactions}
👍 

[6/27/2023 1:50 PM] mmathias_official
Something else: I tried to expand the USB storage partition file using the qemu-img command and I found out that the file is actually just a fat32 file system. Is that true? I allocated a new larger file and used mkfs.fat on it. Is that supposed to work as well?


[6/27/2023 1:51 PM] szybet
it is true


[6/27/2023 1:51 PM] mmathias_official
Thanks! 🙂


[6/27/2023 1:51 PM] szybet
if you have done it just like on the wiki, then yes

{Reactions}
👍 

[6/27/2023 2:21 PM] tux_linux
I tried that and it didn't work
I think I tried what was in your screenshot as well but it didn't work either


[6/27/2023 2:21 PM] tux_linux
Well, I had a spare board, so why not


[6/27/2023 2:21 PM] szybet
i will look at it after imgtool

{Reactions}
👍 

[6/27/2023 2:24 PM] tux_linux
you should make the user clone the kernel repository first in your readme
if the build process fails, it will try to clone it once again in the script
because everything will be in the out/ folder


[6/27/2023 2:24 PM] tux_linux
provide the KERNELDIR env


[6/27/2023 2:24 PM] szybet
what


[6/27/2023 2:25 PM] tux_linux
https://github.com/Szybet/imgtool/blob/f12ec2240dc4084526d1a57787578cd608794e71/release.bash#L62-L68

{Embed}
https://github.com/Szybet/imgtool/blob/f12ec2240dc4084526d1a57787578cd608794e71/release.bash
imgtool/release.bash at f12ec2240dc4084526d1a57787578cd608794e71 · ...
Reproducible image builder for InkBox OS. Contribute to Szybet/imgtool development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/imgtool-633A6


[6/27/2023 2:25 PM] szybet
um weird but ok


[6/27/2023 2:26 PM] szybet
thanks

{Reactions}
👍 

[6/27/2023 2:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A15E7.png


[6/27/2023 2:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B30D1.png


[6/27/2023 2:47 PM] szybet
how is this supposed to work


[6/27/2023 2:48 PM] tux_linux
which thing exactly


[6/27/2023 2:48 PM] szybet
/dev/nbd0p1


[6/27/2023 2:48 PM] szybet
doesnt exist


[6/27/2023 2:48 PM] szybet
at all


[6/27/2023 2:48 PM] tux_linux
did you modprobe nbd


[6/27/2023 2:49 PM] szybet
root@83130cac73ed /h/b/i/imgtool# ls /dev | grep nbd
nbd0
nbd1
nbd10
nbd11
nbd12
nbd13
nbd14
nbd15
nbd2
nbd3
nbd4
nbd5
nbd6
nbd7
nbd8
nbd9


[6/27/2023 2:49 PM] tux_linux
what


[6/27/2023 2:49 PM] szybet
what


[6/27/2023 2:49 PM] tux_linux
well, if you do it without a container it usually works


[6/27/2023 2:49 PM] tux_linux
idk why it doesn't there


[6/27/2023 2:50 PM] szybet
usually


[6/27/2023 2:55 PM] szybet
+ sudo mkfs.ext4 -O '^metadata_csum,^orphan_file' /dev/nbd0p1
mke2fs 1.46.2 (28-Feb-2021)
Invalid filesystem option set: ^metadata_csum,^orphan_file


[6/27/2023 2:55 PM] szybet
you didn't make it to imgtool


[6/27/2023 2:55 PM] szybet
you just made it system wide for you?...


[6/27/2023 2:57 PM] tux_linux
yes


[6/27/2023 2:57 PM] tux_linux
just remove the option in /etc/mkfs.conf i think


[6/27/2023 2:57 PM] szybet
...


[6/27/2023 2:57 PM] szybet
ok ok


[6/27/2023 2:58 PM] tux_linux
i will send mine


[6/27/2023 2:58 PM] szybet
good


[6/27/2023 2:58 PM] tux_linux
```
[defaults]
    base_features = sparse_super,large_file,filetype,resize_inode,dir_index,ext_attr
    default_mntopts = acl,user_xattr
    enable_periodic_fsck = 0
    blocksize = 4096
    inode_size = 256
    inode_ratio = 16384

[fs_types]
    ext3 = {
        features = has_journal
    }
    ext4 = {
        features = has_journal,extent,huge_file,flex_bg,metadata_csum,metadata_csum_seed,64bit,dir_nlink,extra_isize,orphan_file
    }
    small = {
        blocksize = 1024
        inode_ratio = 4096
    }
    floppy = {
        blocksize = 1024
        inode_ratio = 8192
    }
    big = {
        inode_ratio = 32768
    }
    huge = {
        inode_ratio = 65536
    }
    news = {
        inode_ratio = 4096
    }
    largefile = {
        inode_ratio = 1048576
        blocksize = -1
    }
    largefile4 = {
        inode_ratio = 4194304
        blocksize = -1
    }
    hurd = {
         blocksize = 4096
         inode_size = 128
         warn_y2038_dates = 0
    }
```
/etc/mke2fs.conf


[6/27/2023 3:02 PM] szybet
qemu-nbd cant be killed


[6/27/2023 3:02 PM] szybet
thats why curatius complained about reboots


[6/27/2023 3:04 PM] tux_linux
`qemu-nbd --disconnect /dev/nbd0`?


[6/27/2023 3:04 PM] szybet
its still there


[6/27/2023 3:06 PM] szybet
but it only eats ram now


[6/27/2023 3:06 PM] szybet
nothing more, i can use nbd


[6/27/2023 3:06 PM] szybet
so thats good


[6/27/2023 3:06 PM] szybet
i think


[6/27/2023 3:06 PM] szybet
also: you add here orphan file and remove it in config


[6/27/2023 3:06 PM] szybet
ugh


[6/27/2023 3:07 PM] tux_linux
safety


[6/27/2023 3:07 PM] szybet
no


[6/27/2023 3:07 PM] szybet
it doesnt work


[6/27/2023 3:07 PM] szybet
lol


[6/27/2023 3:09 PM] tux_linux
what does it say


[6/27/2023 3:09 PM] szybet
the same thing


[6/27/2023 3:10 PM] szybet
think about it


[6/27/2023 3:10 PM] szybet
those are defaults arguments and those in cli what you added


[6/27/2023 3:10 PM] szybet
it wasn't working when it was in config


[6/27/2023 3:10 PM] szybet
why would it work in cli


[6/27/2023 3:10 PM] tux_linux
too old mkfs version?


[6/27/2023 3:11 PM] tux_linux
what debian are you using


[6/27/2023 3:11 PM] szybet
it works without it in cli


[6/27/2023 3:11 PM] szybet
https://tenor.com/view/think-mark-invincible-omniman-bhondamous-gif-22025607

{Embed}
https://tenor.com/view/think-mark-invincible-omniman-bhondamous-gif-22025607
/mnt/data/projects/git/conversations/media/think-mark-invincible-481CE.png


[6/27/2023 3:11 PM] tux_linux
ok
and you removed it from the file


[6/27/2023 3:11 PM] tux_linux
why does it work here


[6/27/2023 3:12 PM] szybet
oh it is in the file


[6/27/2023 3:12 PM] szybet
well i remember removing it solved the issue


[6/27/2023 3:12 PM] szybet
¯\_(ツ)_/¯


[6/27/2023 3:12 PM] tux_linux
for your nia


[6/27/2023 3:12 PM] tux_linux
probably not for 2.6 kernel devices


[6/27/2023 3:13 PM] szybet
so we need an older mkfs anyway?


[6/27/2023 3:13 PM] tux_linux
no


[6/27/2023 3:13 PM] szybet
so what


[6/27/2023 3:13 PM] tux_linux
well, on my machine I have this mke2fs.conf and i use the ^orphan_file in the command too and it makes working images


[6/27/2023 3:13 PM] tux_linux
i am using arch


[6/27/2023 3:14 PM] tux_linux
your debian may be too old for that option


[6/27/2023 3:14 PM] szybet
its still in config


[6/27/2023 3:14 PM] szybet
whatever, i will send you later a mini image to test


[6/27/2023 3:14 PM] tux_linux
ok


[6/27/2023 3:24 PM] szybet
```
root@974a29e2e7b0 /h/b/i/imgtool# sudo partprobe -d /dev/nbd0
Error: Can't have a partition outside the disk!
```


[6/27/2023 3:24 PM] szybet
https://superuser.com/questions/1329362/qemu-nbd-not-creating-partions

{Embed}
https://superuser.com/questions/1329362/qemu-nbd-not-creating-partions
qemu-nbd not creating partions
I was using qemu-nbd to mount .vdi virtual machine harddrives. However, qemu-nbd suddenly* stopped working.

My usual workflow was

# modprobe --verbose nbd
insmod /lib/modules/4.4.0-127-generic/ke...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-6EDE4.png


[6/27/2023 3:24 PM] szybet
common


[6/27/2023 3:24 PM] tux_linux
hm ok


[6/27/2023 3:24 PM] tux_linux
?


[6/27/2023 3:24 PM] szybet
doesnt work


[6/27/2023 3:25 PM] Deleted User
@tux-linux here's a photo of my PCB

{Attachments}
/mnt/data/projects/git/conversations/media/20230627_081905-A73D9.jpg


[6/27/2023 3:26 PM] Deleted User
Did more testing and keyboard works now, idk what was going on at first but no more issues


[6/27/2023 3:26 PM] tux_linux
ok
nice


[6/27/2023 3:26 PM] tux_linux
sometimes on the glo I had issues with the touch screen not responding because the back cover was not put on


[6/27/2023 3:27 PM] szybet
the back cover maybe pushes on the flex cables in a "good" way


[6/27/2023 3:27 PM] Deleted User
Gotcha. This seems like it's running out of steam after opening the Gutenberg sync dialog or the USB connect to computer dialog


[6/27/2023 3:27 PM] Deleted User
It needs a reboot after that happens


[6/27/2023 3:28 PM] Deleted User
I can still put it to sleep but after waking up it's the same issues


[6/27/2023 3:28 PM] tux_linux
it only hangs on the dialog?


[6/27/2023 3:28 PM] Deleted User
Yes can't get anything to happen after it opens


[6/27/2023 3:28 PM] Deleted User
Doesn't seem to hang anywhere else


[6/27/2023 3:28 PM] tux_linux
ok, then that's strange


[6/27/2023 3:28 PM] szybet
@tux-linux can you try it on your mini?


[6/27/2023 3:28 PM] tux_linux
yes i will


[6/27/2023 3:28 PM] tux_linux
shortly


[6/27/2023 3:29 PM] szybet
cool


[6/27/2023 3:29 PM] Deleted User
cool


[6/27/2023 3:30 PM] tux_linux
https://photos.app.goo.gl/9J7bJYrduza7J5ct6

{Embed}
https://photos.app.goo.gl/9J7bJYrduza7J5ct6
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/ryTpDYQbDZwv8adoirkuxqhME8nkOHNJwYxUFi1TA9-99F1D


[6/27/2023 3:30 PM] tux_linux
finally got it to work


[6/27/2023 3:31 PM] szybet
cool


[6/27/2023 3:31 PM] szybet
is there an easy way to increase the font size?


[6/27/2023 3:32 PM] tux_linux
Qt_font_dpi


[6/27/2023 3:32 PM] szybet
relaunch needed?


[6/27/2023 3:32 PM] tux_linux
well yes


[6/27/2023 3:33 PM] szybet
if you want to be fancy you can make it editable in the app and get it from a file in /app-data/


[6/27/2023 3:33 PM] szybet
i did this for feathernotes & keyboard layout


[6/27/2023 3:33 PM] tux_linux
Yes


[6/27/2023 3:35 PM] szybet
you can also check if user apps rooted check works


[6/27/2023 3:35 PM] szybet
we didn't tested this


[6/27/2023 3:35 PM] szybet
¯\_(ツ)_/¯


[6/27/2023 3:38 PM] Deleted User
Just checked again-USB connect to pc does NOT hang. It works gooooood


[6/27/2023 3:38 PM] tux_linux
suspect


[6/27/2023 3:41 PM] szybet
```
root@26628ee713dc /h/b/i/imgtool [1]# sudo partx -a /dev/nbd0
partx: /dev/nbd0: error adding partitions 1-4```


[6/27/2023 3:41 PM] szybet
https://tenor.com/view/whyyyy-why-gif-19236077

{Embed}
https://tenor.com/view/whyyyy-why-gif-19236077
/mnt/data/projects/git/conversations/media/whyyyy-why-CD5C1.png


[6/27/2023 3:41 PM] tux_linux
docker


[6/27/2023 3:43 PM] szybet
```
root@7f0653b611cd /h/b/i/imgtool [1]# partx -s /dev/nbd0 
NR   START      END  SECTORS  SIZE NAME UUID
 1   49152    79871    30720   15M      c9dd5cc0-01
 2  104448  1128447  1024000  500M      c9dd5cc0-02
 3 1128448  1390591   262144  128M      c9dd5cc0-03
 4 1390592 31116287 29725696 14.2G      c9dd5cc0-04
```


[6/27/2023 3:43 PM] tux_linux
looks good?


[6/27/2023 3:43 PM] tux_linux
except the last one


[6/27/2023 3:44 PM] szybet
why


[6/27/2023 3:44 PM] tux_linux
well, its non-standard


[6/27/2023 3:44 PM] tux_linux
fine if you want to increase size


[6/27/2023 3:44 PM] szybet
what


[6/27/2023 3:44 PM] tux_linux
factory inkbox images are 4g images


[6/27/2023 3:44 PM] tux_linux
+/-


[6/27/2023 3:44 PM] szybet
i didn't touched this


[6/27/2023 3:45 PM] tux_linux
then why does it show 14.2g


[6/27/2023 3:45 PM] szybet
ask yourself


[6/27/2023 3:45 PM] tux_linux
hm ok


[6/27/2023 3:46 PM] tux_linux
do we put device somewhere in user apps?


[6/27/2023 3:46 PM] szybet
its always like that


[6/27/2023 3:46 PM] szybet
what


[6/27/2023 3:46 PM] tux_linux
file


[6/27/2023 3:46 PM] tux_linux
like /opt/inkbox_device


[6/27/2023 3:46 PM] szybet
yes


[6/27/2023 3:46 PM] tux_linux
oh, it's provided in env?


[6/27/2023 3:46 PM] szybet
i think?


[6/27/2023 3:46 PM] szybet
yes


[6/27/2023 3:46 PM] szybet
yes


[6/27/2023 3:46 PM] tux_linux
ok


[6/27/2023 3:46 PM] tux_linux
thanks


[6/27/2023 4:45 PM] szybet
`+ wget 'https://github.com/Kobo-InkBox/emu/blob/main/sd/user.sqsh.a?raw=true' -O user.sqsh.a`


[6/27/2023 4:45 PM] szybet
what is this file


[6/27/2023 4:45 PM] tux_linux
user partition


[6/27/2023 4:45 PM] tux_linux
xorg image


[6/27/2023 4:45 PM] tux_linux
etc


[6/27/2023 4:45 PM] szybet
you know you should use the repos from now on?


[6/27/2023 4:46 PM] tux_linux
well, i use them but i build it manually


[6/27/2023 4:46 PM] tux_linux
because it always seems to fail for some reason


[6/27/2023 4:46 PM] tux_linux
on devices


[6/27/2023 4:46 PM] tux_linux
(x11)


[6/27/2023 4:46 PM] szybet
because?


[6/27/2023 4:46 PM] tux_linux
if you don't make the x11 image on the device it complains about a mount error, corrupt filesystem or whatever


[6/27/2023 4:46 PM] szybet
whats the error? anything?


[6/27/2023 4:46 PM] szybet
it cant be like that you know it


[6/27/2023 4:46 PM] szybet
what


[6/27/2023 4:47 PM] tux_linux
I have to first transplant the newest commits into the device, into its x11 base filesystem
then I scp this base filesystem back to my computer


[6/27/2023 4:48 PM] szybet
permission problem?


[6/27/2023 4:48 PM] tux_linux
no
corrupt filesystem


[6/27/2023 4:48 PM] tux_linux
doesnt want to mount


[6/27/2023 4:48 PM] szybet
todo 2.1


[6/27/2023 4:50 PM] szybet
does it mount on PC after you do it?


[6/27/2023 4:50 PM] szybet
on pc


[6/27/2023 4:50 PM] tux_linux
i dont remember


[6/27/2023 4:56 PM] szybet
what level of xz compression do you use


[6/27/2023 4:56 PM] tux_linux
wdym


[6/27/2023 4:56 PM] tux_linux
https://photos.app.goo.gl/nCCJ9PhZdogQCgEo8

{Embed}
https://photos.app.goo.gl/nCCJ9PhZdogQCgEo8
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/x3AuqIscZtuoTUc5sDkAgrIqJb8XWBkx1TqxqywiE2-A7F8B


[6/27/2023 4:56 PM] tux_linux
we are getting somewhere


[6/27/2023 4:56 PM] szybet
you dont define it


[6/27/2023 4:56 PM] szybet
so its 6


[6/27/2023 4:56 PM] szybet
could be 9


[6/27/2023 4:56 PM] tux_linux
where


[6/27/2023 4:57 PM] szybet
imgtool


[6/27/2023 4:57 PM] szybet
in tar cJvf command


[6/27/2023 4:57 PM] szybet
comands


[6/27/2023 4:57 PM] szybet
i hope for special characters?...


[6/27/2023 4:57 PM] tux_linux
oh ok
well you can set it to 9


[6/27/2023 4:57 PM] tux_linux
yes, its coming


[6/27/2023 4:57 PM] tux_linux
i only wired numbers for now


[6/27/2023 5:04 PM] szybet
for the keyboard


[6/27/2023 5:04 PM] szybet
remove borders, margins, spacing, anything


[6/27/2023 5:05 PM] tux_linux
well, yes, it's the last step


[6/27/2023 5:05 PM] tux_linux
i'm not there


[6/27/2023 5:05 PM] tux_linux
yet


[6/27/2023 5:05 PM] szybet
just saying


[6/27/2023 5:05 PM] tux_linux
first make it work


[6/27/2023 5:05 PM] tux_linux
yea


[6/27/2023 5:07 PM] szybet
+ _user
./release.bash: line 285: _user: command not found


[6/27/2023 5:07 PM] szybet
what


[6/27/2023 5:07 PM] tux_linux
idk


[6/27/2023 5:34 PM] tux_linux
first time in my life when i use caps lock and it's actually useful

{Attachments}
/mnt/data/projects/git/conversations/media/image-E22F4.png


[6/27/2023 5:36 PM] szybet
where do you use it


[6/27/2023 5:36 PM] tux_linux
to replace


[6/27/2023 5:36 PM] tux_linux
if i used shift+down arrow it would select things


[6/27/2023 5:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8F331.png


[6/27/2023 5:36 PM] szybet
;o


[6/27/2023 5:37 PM] tux_linux
great


[6/27/2023 5:38 PM] szybet
linux experiment replied?


[6/27/2023 5:39 PM] tux_linux
of course not


[6/27/2023 5:39 PM] szybet
its rude to ignore


[6/27/2023 5:40 PM] szybet
lets wait 5 days more


[6/27/2023 6:19 PM] szybet
@tux-linux


[6/27/2023 6:19 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/249212392-5b97dc6a-c616-4ff4-8e0b-3cdee898-B610E.png


[6/27/2023 6:19 PM] szybet
clara 2E and sanki


[6/27/2023 6:20 PM] szybet
you had concerns about apps on nickel vs on inkbox


[6/27/2023 6:20 PM] szybet
this is nickel after sanki exit, im not sure i can do anything about it


[6/27/2023 6:23 PM] tux_linux
I don't care!!!!


[6/27/2023 6:24 PM] tux_linux
But without joking, maybe it is some env var thing


[6/27/2023 6:24 PM] tux_linux
try to preserve the env


[6/27/2023 6:24 PM] tux_linux
@pgaskin could probably help you


[6/27/2023 6:24 PM] szybet
what i'm trying to say, nickel will be always shittier for apps


[6/27/2023 6:24 PM] szybet
doubt it, nickel.sh that i coppied from nickel does it already


[6/27/2023 6:25 PM] tux_linux
given it's missing fonts, probably an env var thing
look at koreader start/stop scripts maybe


[6/27/2023 6:25 PM] szybet
i coppied it from plato


[6/27/2023 6:25 PM] tux_linux
or UMR's for simpler


[6/27/2023 6:26 PM] szybet
what


[6/27/2023 6:26 PM] tux_linux
so it's not nia?


[6/27/2023 6:27 PM] szybet
clara 2e


[6/27/2023 6:27 PM] szybet
another device and issues like with xorg


[6/27/2023 6:28 PM] tux_linux
who sent you that


[6/27/2023 6:28 PM] szybet
https://github.com/Szybet/sanki/issues/2

{Embed}
https://github.com/Szybet/sanki/issues/2
Build sanki for Kobo Clara 2E · Issue #2 · Szybet/sanki
Hi Szybet I struggle to get sanki running on my Kobo Clara 2E. Gerneral question, can your project run without inkbox?
/mnt/data/projects/git/conversations/media/2-B6A19


[6/27/2023 6:29 PM] tux_linux
launch is probably slow because it loads 76 mb of qt bins


[6/27/2023 6:29 PM] tux_linux
probably


[6/27/2023 6:29 PM] szybet
it uses inkbox qt & my commit in our platform plugin that adds clara 2e to test the device in the future


[6/27/2023 6:30 PM] szybet
DOESNT HAPPEN ON THE NIA


[6/27/2023 6:30 PM] szybet
ITS INSTANT


[6/27/2023 6:30 PM] szybet
:(


[6/27/2023 6:30 PM] tux_linux
well ok


[6/27/2023 6:32 PM] szybet
imgtool in edocker works for the nia


[6/27/2023 6:32 PM] szybet
what is the code number for the mini?


[6/27/2023 6:32 PM] tux_linux
n705


[6/27/2023 6:32 PM] tux_linux
but you don't have the keys


[6/27/2023 6:32 PM] tux_linux
well, create a sample pair


[6/27/2023 6:32 PM] szybet
arent they the same?


[6/27/2023 6:32 PM] tux_linux
NO


[6/27/2023 6:32 PM] szybet
w h a t


[6/27/2023 6:33 PM] szybet
o h m y g o d


[6/27/2023 6:33 PM] tux_linux
```
nicolasmailloux@Nicolass-MacBook-Pro ~/keys [1]> find .
.
./inkbox
./inkbox/n437
./inkbox/n437/public.pem
./inkbox/n437/private.pem
./inkbox/kobox
./inkbox/kobox/nographic
./inkbox/kobox/nographic/public.pem
./inkbox/kobox/nographic/private.pem
./inkbox/kobox/graphic
./inkbox/kobox/graphic/public.pem
./inkbox/kobox/graphic/private.pem
./inkbox/emu
./inkbox/emu/public.pem
./inkbox/emu/private.pem
./inkbox/mini
./inkbox/mini/public.pem
./inkbox/mini/private.pem
./inkbox/touch
./inkbox/touch/public.pem
./inkbox/touch/private.pem
./inkbox/n306
./inkbox/n306/public.pem
./inkbox/n306/private.pem
./inkbox/n905c
./inkbox/n873
./inkbox/glo
./inkbox/glo/public.pem
./inkbox/glo/private.pem
./inkbox/n905b
./inkbox/n236
./inkbox/n236/public.pem
./inkbox/n236/private.pem
./inkbox/applications
./inkbox/applications/public.pem
./inkbox/applications/private.pem
./inkbox/kt
./inkbox/kt/public.pem
./inkbox/kt/private.pem
./inkbox/libra
./inkbox/libra/public.pem
./inkbox/libra/private.pem
./inkbox/n705
./inkbox/touch-b
./inkbox/touch-b/public.pem
./inkbox/touch-b/private.pem
./inkbox/n613
./inkbox/bpi
./inkbox/bpi/public.pem
./inkbox/bpi/private.pem
./inkbox/n249
./inkbox/n249/public.pem
./inkbox/n249/private.pem
nicolasmailloux@Nicolass-MacBook-Pro ~/keys>
```


[6/27/2023 6:33 PM] szybet
1,5 year in this project and you say that now


[6/27/2023 6:33 PM] tux_linux
well, what difference


[6/27/2023 6:33 PM] szybet
XD


[6/27/2023 6:33 PM] szybet
can you just share it


[6/27/2023 6:34 PM] szybet
nia and the mini, i dont want more


[6/27/2023 6:38 PM] szybet
```
+ env TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/gcc-4.8 THREADS=16 TARGET=arm-linux-gnueabihf scripts/build_u-boot.sh n705
```


[6/27/2023 6:38 PM] szybet
this cant work


[6/27/2023 6:38 PM] szybet
and it doesnt


[6/27/2023 6:38 PM] tux_linux
why


[6/27/2023 6:39 PM] szybet
`/bin/bash: line 1: /home/build/inkbox/kernel/toolchain/gcc-4.8/bin/arm-linux-gnueabihf-gcc: cannot execute: required file not found`


[6/27/2023 6:39 PM] szybet
reasons


[6/27/2023 6:39 PM] tux_linux
install 32 bit libs


[6/27/2023 6:39 PM] tux_linux
because we are stuck in 2011


[6/27/2023 6:39 PM] tux_linux
*2013


[6/27/2023 6:39 PM] szybet
😐


[6/27/2023 7:04 PM] tux_linux
https://photos.app.goo.gl/EbFaD29XQXwHUQuu6

{Embed}
https://photos.app.goo.gl/EbFaD29XQXwHUQuu6
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/AszBCc1QdDquM2Ya9NIgKZBN5roE346n2K_CYIFfu0-EC6CF


[6/27/2023 7:04 PM] tux_linux
yea... quality will improve... just not now


[6/27/2023 7:05 PM] szybet
look great


[6/27/2023 7:05 PM] szybet
i mean


[6/27/2023 7:05 PM] szybet
works


[6/27/2023 7:05 PM] tux_linux
i need your help for layouts


[6/27/2023 7:06 PM] szybet
?


[6/27/2023 7:06 PM] tux_linux
it won't shrink


[6/27/2023 7:06 PM] tux_linux
the kb


[6/27/2023 7:06 PM] szybet
what


[6/27/2023 7:06 PM] tux_linux
the keyboard doesn't want to shrink to leave more space for the terminal


[6/27/2023 7:06 PM] szybet
why should it shrink


[6/27/2023 7:06 PM] tux_linux
it's too big


[6/27/2023 7:06 PM] tux_linux
you don't see it?


[6/27/2023 7:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-7EBE9.png


[6/27/2023 7:07 PM] szybet
you talk about the margin?


[6/27/2023 7:07 PM] tux_linux
check the video when i run top
it only takes half of the screen


[6/27/2023 7:07 PM] tux_linux
yes


[6/27/2023 7:07 PM] szybet
its a margin / size thing


[6/27/2023 7:07 PM] szybet
not layout


[6/27/2023 7:08 PM] tux_linux
i don't have margins


[6/27/2023 7:08 PM] tux_linux
i pushed the most recent tree


[6/27/2023 7:08 PM] szybet
there are defaults


[6/27/2023 7:08 PM] szybet
check size() of both widgets


[6/27/2023 7:09 PM] szybet
and check summed they use the whole screen


[6/27/2023 7:09 PM] szybet
if summed


[6/27/2023 7:20 PM] szybet
do the things i suggest for the terminal, it will be time saving if i solve this without creating the env


[6/27/2023 7:20 PM] szybet
also the mini image is upladed to /misc, yuo can try it out


[6/27/2023 7:48 PM] tux_linux
%$#@^&#^%&~@

{Attachments}
/mnt/data/projects/git/conversations/media/image-046C6.png


[6/27/2023 7:55 PM] tux_linux
of course you work now

{Attachments}
/mnt/data/projects/git/conversations/media/sff-F8CC5.png


[6/27/2023 8:01 PM] szybet
Really?... Adjust?...


[6/27/2023 8:03 PM] szybet
Idk if you know but i learned


[6/27/2023 8:03 PM] tux_linux
height * 50 / 100
this was the problem
it was my fault


[6/27/2023 8:04 PM] szybet
Everything with size related in qt needs to be donr after showing it on screen, so just after creating and showing the widget


[6/27/2023 8:04 PM] szybet
Even kde has this problem lol


[6/27/2023 8:32 PM] szybet
Please test mini image


[6/27/2023 8:34 PM] tux_linux
i will finish sff first


[6/27/2023 8:55 PM] szybet
also accept all my pull requests


[6/27/2023 8:58 PM] szybet
@Kuratius imgtool in docker container is done, you can test it


[6/27/2023 9:32 PM] tux_linux
https://photos.app.goo.gl/4Gqqm46Sj1itboT9A

{Embed}
https://photos.app.goo.gl/4Gqqm46Sj1itboT9A
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/AJFCJaURxCaYNZDPwrcPt5I4YGhkOMtCURdtdwTSBK-395F6


[6/27/2023 9:32 PM] tux_linux
better wait a few minutes


[6/27/2023 9:34 PM] tux_linux
now it's a bit better


[6/27/2023 9:35 PM] tux_linux
clean screenshot

{Attachments}
/mnt/data/projects/git/conversations/media/sff-C285A.png


[6/27/2023 9:36 PM] tux_linux
For some reason the keyboard is gray


[6/27/2023 9:36 PM] tux_linux
well, or only some part


[6/27/2023 9:36 PM] tux_linux
idk


[6/27/2023 9:36 PM] tux_linux
it's strange


[6/27/2023 9:39 PM] szybet
what


[6/27/2023 9:39 PM] szybet
where


[6/27/2023 9:40 PM] tux_linux
well, look at the screenshot


[6/27/2023 9:40 PM] szybet
is this a grid layout?


[6/27/2023 9:40 PM] tux_linux
the keyboard, yes


[6/27/2023 9:40 PM] szybet
try to apply stylesheet


[6/27/2023 9:40 PM] szybet
background white


[6/27/2023 9:40 PM] szybet
idk


[6/27/2023 9:40 PM] tux_linux
i tried


[6/27/2023 9:41 PM] szybet
well idk


[6/27/2023 9:41 PM] szybet
you shouldnt carer


[6/27/2023 10:01 PM] tux_linux
we have to find a name for it


[6/27/2023 10:01 PM] szybet
Inkbox/SFF terminal


[6/27/2023 10:01 PM] tux_linux
inkbox terminal?


[6/27/2023 10:02 PM] tux_linux
sff doesn't really mean anything


[6/27/2023 10:02 PM] tux_linux
I will credit it


[6/27/2023 10:02 PM] szybet
ok


[6/27/2023 10:02 PM] szybet
yea credit the guy

{Reactions}
👍 

[6/27/2023 10:25 PM] kuratius
will give it a try
DM me your paypal btw


[6/27/2023 10:25 PM] szybet
try it and be satisfied first


[6/27/2023 10:40 PM] kuratius
what's the debian equivalent of nbd?


[6/27/2023 10:41 PM] kuratius
one of these? https://packages.debian.org/search?searchon=sourcenames&keywords=nbd


[6/27/2023 10:42 PM] szybet
your host is debian?


[6/27/2023 10:42 PM] kuratius
xubuntu is debian based


[6/27/2023 10:42 PM] szybet
good


[6/27/2023 10:42 PM] szybet
yes one of these


[6/27/2023 10:42 PM] szybet
client propably


[6/27/2023 10:42 PM] tux_linux
isn't it supposed to be a docker container?


[6/27/2023 10:43 PM] kuratius
it doesnt matter too much to me if everything or only some of it is dockerized as long as the annoying parts that fuck up your system are


[6/27/2023 10:43 PM] szybet
l̶o̴a̵d̵i̷n̵g̴ ̵m̵o̸d̶u̶l̵e̷s̶ ̶f̸r̸o̴m̴ docker ̵r̶e̶q̴u̴i̸r̵e̶s̶ ̸t̶h̴e̸ ̴s̴a̷m̶e kern̶e̷l v̵er̴s̴i̴o̵n̴ ̶o̴n̶ ̶d̴o̶c̵k̴e̶r and ̵o̷n̶ ̵the ̶h̵os̴t̶,̶ ̵d̶o̸n̷'̵t̷ ̵ask ho̵w̴ ̸m̸a̷n̵y̶ ho̸u̴r̴s i̸ ̵s̵p̸e̸n̸d tryi̴n̵g̷


[6/27/2023 10:43 PM] tux_linux
ok


[6/27/2023 10:43 PM] kuratius
and as long as the setup is relatively painless


[6/27/2023 10:44 PM] szybet
just follow the instructions


[6/27/2023 10:44 PM] kuratius
I dont intend to use this for myself anymore, just I dont want this project to die because people couldnt use it without you


[6/27/2023 10:44 PM] szybet
as i said, you can make inkbox manually without the automated tool


[6/27/2023 10:44 PM] szybet
I did it


[6/27/2023 10:45 PM] szybet
and one other guy


[6/27/2023 10:45 PM] kuratius
friction is important

{Reactions}
💯 

[6/27/2023 10:45 PM] kuratius
less friction = more chance someone picks it up instead of doing their own thing


[6/27/2023 10:45 PM] szybet
maybe


[6/27/2023 10:49 PM] kuratius
I cant figure out which package gives the nbd command
I installed nbd-client and nbd-server for now


[6/27/2023 10:49 PM] szybet
oh


[6/27/2023 10:49 PM] szybet
im stupid


[6/27/2023 10:49 PM] szybet
nbd-modules


[6/27/2023 10:49 PM] szybet
try that


[6/27/2023 10:49 PM] szybet
i will adfd it to the readme after you finish


[6/27/2023 10:49 PM] szybet
maybe something more


[6/27/2023 10:49 PM] szybet
you need docker too


[6/27/2023 10:49 PM] kuratius
have docker


[6/27/2023 10:50 PM] kuratius
probably the name is different on ubuntu


[6/27/2023 10:50 PM] szybet
no idea then


[6/27/2023 10:50 PM] szybet
google it


[6/27/2023 10:55 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230627_205532729.MP-C1F69.jpg


[6/27/2023 10:59 PM] szybet
sooo... very good?


[6/27/2023 10:59 PM] tux_linux
can you try it on your nia?

{Attachments}
/mnt/data/projects/git/conversations/media/ITerm-07535.zip


[6/27/2023 10:59 PM] tux_linux
thanks


[6/27/2023 11:00 PM] szybet
one sec


[6/27/2023 11:00 PM] szybet
you can try the image of the mini then :D


[6/27/2023 11:00 PM] tux_linux
well that will probably take a lot more time


[6/27/2023 11:00 PM] tux_linux
just to flash it


[6/27/2023 11:05 PM] tux_linux
I think I could put dropbear in the base image


[6/27/2023 11:05 PM] szybet
what


[6/27/2023 11:05 PM] tux_linux
*app


[6/27/2023 11:05 PM] szybet
what


[6/27/2023 11:06 PM] tux_linux
i could put dropbear alongside the user app


[6/27/2023 11:17 PM] szybet
trying it

{Reactions}
👍 

[6/27/2023 11:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230627_232001-23BE3.jpg


[6/27/2023 11:20 PM] szybet
Awesome

{Reactions}
👍 

[6/27/2023 11:20 PM] szybet
Um yea add ssh to the app

{Reactions}
👍 

[6/27/2023 11:20 PM] tux_linux
https://photos.app.goo.gl/hkENmmRNr3aFkVdE6

{Embed}
https://photos.app.goo.gl/hkENmmRNr3aFkVdE6
New video by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/4xzClZpVVBtAiVQyq3vLX7ivhvMBGWkzUAeP_r0YRa-618E5


[6/27/2023 11:21 PM] szybet
cant see what is this


[6/27/2023 11:21 PM] tux_linux
elinks


[6/27/2023 11:21 PM] szybet
maybe add telnet too if you want


[6/27/2023 11:21 PM] tux_linux
telnet is already there


[6/27/2023 11:21 PM] tux_linux
busybox


[6/27/2023 11:21 PM] szybet
okay


[6/27/2023 11:21 PM] szybet
woah


[6/27/2023 11:21 PM] tux_linux
+tmux


[6/27/2023 11:21 PM] tux_linux
via telnet


[6/27/2023 11:22 PM] tux_linux
so you can write things


[6/27/2023 11:22 PM] szybet
cool


[6/27/2023 11:22 PM] szybet
add it to the description


[6/27/2023 11:22 PM] tux_linux
elinks could probably be compiled


[6/27/2023 11:22 PM] tux_linux
but at this point the user should add it in app-data


[6/27/2023 11:22 PM] tux_linux
um actually no
we can't execute anything from app-data


[6/27/2023 11:22 PM] tux_linux
right?


[6/27/2023 11:22 PM] szybet
yep


[6/27/2023 11:22 PM] szybet
you did it


[6/27/2023 11:23 PM] tux_linux
probably a good idea anyway


[6/27/2023 11:23 PM] szybet
actually maybe copy things from app-data to tmp?


[6/27/2023 11:23 PM] szybet
app tmp


[6/27/2023 11:23 PM] szybet
or smth


[6/27/2023 11:23 PM] tux_linux
wasn't it mounted noexec too?


[6/27/2023 11:23 PM] szybet
idk just a thought


[6/27/2023 11:24 PM] tux_linux
oh no


[6/27/2023 11:24 PM] tux_linux
it wasn't


[6/27/2023 11:24 PM] tux_linux
well, i will add it everywhere


[6/27/2023 11:24 PM] szybet
did you just admitted you wont use inkbox at all


[6/27/2023 11:24 PM] szybet
not in those that are mounted and read only


[6/27/2023 11:24 PM] szybet
leave app-misc at least


[6/27/2023 11:24 PM] tux_linux
temp is not ro


[6/27/2023 11:24 PM] szybet
app-bin


[6/27/2023 11:24 PM] tux_linux
yes, because those are ro


[6/27/2023 11:24 PM] szybet
i know just saying


[6/27/2023 11:25 PM] szybet
what


[6/27/2023 11:25 PM] szybet
so dont change them?


[6/27/2023 11:25 PM] tux_linux
read-only


[6/27/2023 11:25 PM] tux_linux
i won't


[6/27/2023 11:25 PM] szybet
good


[6/27/2023 11:25 PM] szybet
so add a bit of binaries there


[6/27/2023 11:25 PM] szybet
htop maybe


[6/27/2023 11:25 PM] tux_linux
make a list


[6/27/2023 11:25 PM] tux_linux
top


[6/27/2023 11:25 PM] szybet
htop


[6/27/2023 11:25 PM] tux_linux
busybox


[6/27/2023 11:25 PM] szybet
a browser


[6/27/2023 11:25 PM] szybet
ssh


[6/27/2023 11:26 PM] tux_linux
thats it?


[6/27/2023 11:27 PM] szybet
is sys there and read only or its not there at all?


[6/27/2023 11:27 PM] szybet
cant remember


[6/27/2023 11:27 PM] tux_linux
sys is always read only


[6/27/2023 11:27 PM] szybet
is it there


[6/27/2023 11:27 PM] tux_linux
it doesn't exist


[6/27/2023 11:27 PM] szybet
so inxi doesnt make sense


[6/27/2023 11:27 PM] tux_linux
well actually it isn't there


[6/27/2023 11:27 PM] tux_linux
not in this app


[6/27/2023 11:28 PM] szybet
so yea as i said


[6/27/2023 11:28 PM] tux_linux
probably because we don't need it


[6/27/2023 11:28 PM] tux_linux
inxi?


[6/27/2023 11:28 PM] szybet
hardware thing


[6/27/2023 11:28 PM] tux_linux
it also says "Failed to find tty" or smth on launch but still works so


[6/27/2023 11:28 PM] szybet
¯\_(ツ)_/¯


[6/27/2023 11:29 PM] szybet
snake


[6/27/2023 11:29 PM] szybet
snake


[6/27/2023 11:29 PM] szybet
snake


[6/27/2023 11:29 PM] szybet
idk thats it


[6/27/2023 11:30 PM] szybet
cmatrix would be funny


[6/27/2023 11:31 PM] szybet
depends how much do you want do tinker


[6/27/2023 11:31 PM] tux_linux
snake is a good idea


[6/27/2023 11:32 PM] tux_linux
but at that point the user can probably just ssh to its computer if he needs things


[6/27/2023 11:32 PM] szybet
yes


[6/27/2023 11:33 PM] szybet
is there a scroll bar?


[6/27/2023 11:33 PM] szybet
in terminal


[6/27/2023 11:33 PM] tux_linux
there can be


[6/27/2023 11:33 PM] tux_linux
its set to always off


[6/27/2023 11:33 PM] tux_linux
you can pipe to less


[6/27/2023 11:33 PM] szybet
REALLY


[6/27/2023 11:34 PM] szybet
well at this point i will use the base of this app to make syncthing


[6/27/2023 11:34 PM] tux_linux
wdym


[6/27/2023 11:34 PM] szybet
otherwise i would use text browser


[6/27/2023 11:34 PM] tux_linux
this app is a nightmare


[6/27/2023 11:34 PM] szybet
to show syncthing terminal output


[6/27/2023 11:34 PM] tux_linux
this app is a nightmare


[6/27/2023 11:34 PM] tux_linux
trust me


[6/27/2023 11:35 PM] tux_linux
unless you literally launch it separately it will probably not like you


[6/27/2023 11:36 PM] szybet
nah


[6/28/2023 12:25 AM] kuratius
running the bash scripts now


[6/28/2023 12:26 AM] kuratius
apparently didnt need to install nbd


[6/28/2023 12:26 AM] kuratius
the modprobe worked


[6/28/2023 12:30 AM] kuratius
the script says it's building a standard kernel for some reason


[6/28/2023 12:30 AM] szybet
It builds both for recovery


[6/28/2023 12:31 AM] szybet
Then flashes the choosen one


[6/28/2023 12:31 AM] kuratius
I see


[6/28/2023 12:31 AM] kuratius
anyway, so far no errors


[6/28/2023 12:31 AM] kuratius
works now


[6/28/2023 12:31 AM] kuratius
just takes a while


[6/28/2023 12:59 AM] kuratius
dk@dk-ThinkPad-E560:/home/build/inkbox/imgtool/out/release$ ls
inkbox-2.0-n306.img  rootfs-partition.tar.xz  user-partition.tar.xz  zImage-std
inkbox-n306.img      u-boot_inkbox.bin        zImage-root
dk@dk-ThinkPad-E560:/home/build/inkbox/imgtool/out/release$


[6/28/2023 12:59 AM] kuratius
what's the second image?


[6/28/2023 1:00 AM] tux_linux
You take the one with a version number in it


[6/28/2023 1:04 AM] tux_linux
Did you generate your own keys?


[6/28/2023 1:04 AM] tux_linux
It will not work unless I am mistaken


[6/28/2023 1:19 AM] kuratius
Yes I did


[6/28/2023 1:21 AM] tux_linux
Did you put that key into `${KERNELDIR}/initrd/common/n306/opt/key.sqsh`?


[6/28/2023 1:22 AM] kuratius
I followed the instructions given on szyvets inkbox repo


[6/28/2023 1:22 AM] kuratius
I did not put the key into a special location


[6/28/2023 1:22 AM] tux_linux
Well you need to


[6/28/2023 1:23 AM] kuratius
I think it's just in the imgtool directory


[6/28/2023 1:23 AM] tux_linux
```
unsquashfs -d key key.sqsh && cd key
cp /path/to/public.pem ./public.pem
rm ../key.sqsh
mksquashfs . ../key.sqsh -b 1048576 -comp gzip -always-use-fragments
```


[6/28/2023 1:23 AM] tux_linux
Also, the image won't boot because of a step that isn't yet handled by imgtool


[6/28/2023 1:24 AM] kuratius
I cant test the image today  anyway


[6/28/2023 1:24 AM] tux_linux
You need to sign the packages of the gui bundle yourself if you have your own key


[6/28/2023 1:24 AM] tux_linux
Szybet can take care of it if he wants


[6/28/2023 1:24 AM] tux_linux
that should also be scripted I guess


[6/28/2023 1:25 AM] kuratius
Szybet can hopefully fix that not booting and automatically putting the key in the right placd if he hasn't yet,
If not I'll take a stab at it, likely trivial to automate the latter

{Reactions}
👍 

[6/28/2023 1:25 AM] kuratius
Sorry didn't see your message

{Reactions}
👍 

[6/28/2023 1:52 AM] tux_linux
I think I actually shouldn't put noexec anywhere
if there's already nosuid, then there's probably no point in putting noexec
unless users find a way to exploit the system
which probably exists


[6/28/2023 4:45 AM] tux_linux
I have uploaded the user app
It contains dbclient/ssh
I didn't bother for snake
I also shared it with the original author, I am eager to see what his reaction will be like hehe
https://github.com/jsbronder/sff/issues/4

{Embed}
https://github.com/jsbronder/sff/issues/4
Successfully running on an eReader! · Issue #4 · jsbronder/sff
Hello, Just to let you know... we have ported your software to InkBox OS as an 'user app' and it works quite well ;) Thanks for making the only, or one of the only terminal emulators that u...
/mnt/data/projects/git/conversations/media/4-9F9FC


[6/28/2023 4:55 AM] kuratius
if you want a really silly app, I can show you a fluid sim that can run with ~300 kB of RAM, but it's not interactive so it basically looks like an animation for the most part


[6/28/2023 4:56 AM] tux_linux
why not


[6/28/2023 4:57 AM] kuratius
version in C and rust

{Attachments}
/mnt/data/projects/git/conversations/media/C-79D48.7z
/mnt/data/projects/git/conversations/media/main-CA7A6.rs


[6/28/2023 4:57 AM] kuratius
C version doesnt have framebuffer implemented


[6/28/2023 4:58 AM] kuratius
rust executable

{Attachments}
/mnt/data/projects/git/conversations/media/rust-947CF


[6/28/2023 4:58 AM] kuratius
(x86)


[6/28/2023 4:58 AM] kuratius
https://www.youtube.com/watch?v=iKAVRgIrUOU based on this

{Embed}
Ten Minute Physics
https://www.youtube.com/watch?v=iKAVRgIrUOU
17 - How to write an Eulerian fluid simulator with 200 lines of code.
For the source html code, demo and all other tutorials see https://matthias-research.github.io/pages/tenMinutePhysics/index.html
There is also a discord server to discuss all videos here: https://discord.gg/TvqBcyfHJN

In this tutorial I explain the basics of Eulerian, grid-based fluid simulation and  show how to write a simulation engine based ...
/mnt/data/projects/git/conversations/media/maxresdefault-D53BA.jpg

{Reactions}
👍 

[6/28/2023 4:59 AM] tux_linux
how am i supposed to run the c program


[6/28/2023 4:59 AM] kuratius
probably dont run it


[6/28/2023 4:59 AM] kuratius
it doesnt do anything useful


[6/28/2023 4:59 AM] tux_linux
i'm on macos so pretty sure the rust one won't work


[6/28/2023 4:59 AM] kuratius
I will remove the build artifacts and zip the cargo project


[6/28/2023 4:59 AM] tux_linux
still


[6/28/2023 5:00 AM] kuratius
cant rust target macOS?


[6/28/2023 5:00 AM] kuratius
ah well


[6/28/2023 5:00 AM] tux_linux
well, maybe


[6/28/2023 5:00 AM] tux_linux
I don't have the tools here rn


[6/28/2023 5:00 AM] kuratius
np


[6/28/2023 5:00 AM] tux_linux
maybe you can take a video capture


[6/28/2023 5:00 AM] tux_linux
i will take a look at it


[6/28/2023 5:00 AM] kuratius
sec


[6/28/2023 5:00 AM] tux_linux
not sure how well it would display on eink though


[6/28/2023 5:03 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/simplescreenrecorder-2023-06-28_05.02.58-0BCC2.mp4


[6/28/2023 5:05 AM] kuratius
(the code is almost a direct port of the javascript code, it has some unused variables in some places...)


[6/28/2023 5:09 AM] tux_linux
nice


[6/28/2023 7:59 AM] szybet
why is it like that


[6/28/2023 9:13 AM] szybet
its in there, but anyway i will automate it


[6/28/2023 10:19 AM] szybet
o h m y g o d


[6/28/2023 10:19 AM] szybet
```
./initrd/busybox-1.32.1/_install-emu/opt/key.sqsh
./initrd/busybox-1.32.1/_install-emu/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-n249/opt/key.sqsh
./initrd/busybox-1.32.1/_install-n249/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-touch/opt/key.sqsh
./initrd/busybox-1.32.1/_install-touch/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-touch-b/opt/key.sqsh
./initrd/busybox-1.32.1/_install-touch-b/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-n306/opt/key.sqsh
./initrd/busybox-1.32.1/_install-n306/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-glo/opt/key.sqsh
./initrd/busybox-1.32.1/_install-glo/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-n437/opt/key.sqsh
./initrd/busybox-1.32.1/_install-n437/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-libra/opt/key.sqsh
./initrd/busybox-1.32.1/_install-libra/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-spt1/opt/key.sqsh
./initrd/busybox-1.32.1/_install-spt1/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-n236/opt/key.sqsh
./initrd/busybox-1.32.1/_install-n236/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-mini/opt/key.sqsh
./initrd/busybox-1.32.1/_install-mini/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-kt/opt/key.sqsh
./initrd/busybox-1.32.1/_install-kt/opt/valid-devkey.sqsh
./initrd/busybox-1.32.1/_install-bpi/opt/key.sqsh
./initrd/busybox-1.32.1/_install-bpi/opt/valid-devkey.sqsh
```


[6/28/2023 10:19 AM] szybet
i know the reason for it


[6/28/2023 10:19 AM] szybet
but its horrible


[6/28/2023 10:23 AM] szybet
as it seems, this a spider web of symlinks


[6/28/2023 11:03 AM] szybet
if x11 needed some changes i would have given up


[6/28/2023 11:07 AM] szybet
@Kuratius done, regenerate the image


[6/28/2023 2:19 PM] tux_linux
X11 uses uniform key across devices


[6/28/2023 2:19 PM] szybet
thanks god i know this now

{Reactions}
👍 

[6/28/2023 2:19 PM] szybet
did you tested mini image


[6/28/2023 2:19 PM] tux_linux
No I was still in sff before going to bed

{Reactions}
👍 

[6/28/2023 2:40 PM] tux_linux
btw, we also need to handle ipd idle sleep when gutenberg is syncing


[6/28/2023 2:40 PM] tux_linux
maybe make a unified way to do it?
a new named pipe entry?
sidle
ridle


[6/28/2023 2:40 PM] tux_linux
suspend idle sleep
resume idle sleep


[6/28/2023 2:43 PM] tux_linux
you didn't touch valid-devkey right? you shouldn't


[6/28/2023 2:44 PM] szybet
i didnt


[6/28/2023 2:44 PM] tux_linux
`inkbox-update-2.0.upd.isa` -> `update.isa` -> `{inkbox.isa, inkbox.isa.dgst, qt.isa, qt.isa.dgst}`


[6/28/2023 2:44 PM] tux_linux
No need to sign `update.isa` but rather the two files in it


[6/28/2023 2:45 PM] szybet
if(file in tmp or another file or tmp or another file in tmpo) {
sleep +5 min
}


[6/28/2023 2:45 PM] tux_linux
named pipe is too complicated?


[6/28/2023 2:45 PM] szybet
ye i did it


[6/28/2023 2:45 PM] szybet
as i said another thread is needed


[6/28/2023 2:45 PM] szybet
with another pipe


[6/28/2023 2:45 PM] szybet
not a good thing


[6/28/2023 2:45 PM] szybet
idle sleep is alraedy going


[6/28/2023 2:45 PM] tux_linux
hm ok


[6/28/2023 2:45 PM] szybet
btw add it to todo


[6/28/2023 2:46 PM] tux_linux
I know
you can make a list of apps
check for pid
if pid is there you suspend it
in the case of gutenberg you look for `get_latest_books.sh`


[6/28/2023 2:46 PM] szybet
ok cool


[6/28/2023 2:46 PM] szybet
but document it on the wiki


[6/28/2023 2:46 PM] tux_linux
for x11 im still wondering what


[6/28/2023 2:47 PM] szybet
actually in the repo and the wiki


[6/28/2023 2:47 PM] szybet
xdamage


[6/28/2023 2:48 PM] tux_linux
yes, but how do you know when to start the suspend idle sleep


[6/28/2023 2:48 PM] tux_linux
its already there


[6/28/2023 2:49 PM] szybet
what lol


[6/28/2023 2:49 PM] tux_linux
well, maybe it's better to use a file in tmp
even if I'm not sure i like this method


[6/28/2023 2:49 PM] tux_linux
or use dbus


[6/28/2023 2:49 PM] tux_linux
i know you hate dbus


[6/28/2023 2:50 PM] szybet
if kobo & nickel use a script with dd in it to identify the device then we cas use files in tmp


[6/28/2023 2:50 PM] szybet
i wont write any code related to it


[6/28/2023 2:50 PM] tux_linux
so in the wiki what do i write


[6/28/2023 2:50 PM] szybet
the files or the process names that ipd watches for


[6/28/2023 2:50 PM] tux_linux
ok


[6/28/2023 2:52 PM] szybet
can i create the matrix discord bridge finally


[6/28/2023 2:53 PM] tux_linux
yes
what permissions do you want


[6/28/2023 2:54 PM] szybet
od matrix, all of them


[6/28/2023 2:54 PM] tux_linux
you have them on discord already?


[6/28/2023 2:54 PM] szybet
nope


[6/28/2023 2:55 PM] tux_linux
I know


[6/28/2023 2:55 PM] tux_linux
when we will have this


[6/28/2023 2:55 PM] tux_linux
we port a matrix client for sff


[6/28/2023 2:55 PM] szybet
on discord i need... access to invite bots


[6/28/2023 2:55 PM] szybet
i will look today into porting a matrix client


[6/28/2023 2:56 PM] szybet
if i wont find any, you will port a cli one


[6/28/2023 2:56 PM] tux_linux
porting a gui client is probably cursed


[6/28/2023 2:57 PM] tux_linux
how do i grant you that


[6/28/2023 2:57 PM] tux_linux
can you provide a link instead and I invite the bot myself?


[6/28/2023 3:00 PM] tux_linux
https://github.com/8go/matrix-commander

{Embed}
https://github.com/8go/matrix-commander
GitHub - 8go/matrix-commander: simple but convenient CLI-based Matr...
simple but convenient CLI-based Matrix client app for sending and receiving - GitHub - 8go/matrix-commander: simple but convenient CLI-based Matrix client app for sending and receiving
/mnt/data/projects/git/conversations/media/matrix-commander-FA15A


[6/28/2023 3:00 PM] tux_linux
hm ok nvm its in python


[6/28/2023 3:00 PM] szybet
its more complicated than that


[6/28/2023 3:00 PM] szybet
i will let you know later, maybe its possible


[6/28/2023 3:00 PM] tux_linux
you will like this more
https://github.com/ulyssa/iamb

{Embed}
https://github.com/ulyssa/iamb
GitHub - ulyssa/iamb: A Matrix client for Vim addicts
A Matrix client for Vim addicts. Contribute to ulyssa/iamb development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/iamb-D142C


[6/28/2023 3:01 PM] szybet
for now create a announcements channel on discord


[6/28/2023 3:01 PM] szybet
maybe google it, there is a special way to do it


[6/28/2023 3:01 PM] szybet
vim fu


[6/28/2023 3:01 PM] tux_linux
you don't like it?


[6/28/2023 3:02 PM] szybet
i dont use vim


[6/28/2023 3:02 PM] szybet
yea rust and everything but no no no


[6/28/2023 3:02 PM] tux_linux
it's not hard


[6/28/2023 3:02 PM] tux_linux
Esc+I can get you in insert mode pretty much all the time


[6/28/2023 3:04 PM] szybet
not worth my time


[6/28/2023 3:04 PM] tux_linux
well that one then
https://github.com/tulir/gomuks

{Embed}
https://github.com/tulir/gomuks
GitHub - tulir/gomuks: A terminal based Matrix client written in Go.
A terminal based Matrix client written in Go. Contribute to tulir/gomuks development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gomuks-5FBE0


[6/28/2023 3:05 PM] tux_linux
we will need sherm_p's help to compile go for arm


[6/28/2023 3:05 PM] tux_linux
probably


[6/28/2023 3:06 PM] tux_linux
oh.


[6/28/2023 3:06 PM] szybet
maybe find a qt one first


[6/28/2023 3:06 PM] tux_linux
a linux arm binary already exists


[6/28/2023 3:06 PM] szybet
go is freaking better at crosscompiling than rust


[6/28/2023 3:06 PM] szybet
remember syncthing?


[6/28/2023 3:06 PM] szybet
it runned oob


[6/28/2023 3:06 PM] szybet
i just need to pack it and small qt wrapper


[6/28/2023 3:06 PM] tux_linux
from what I have seen it is more complicated because it needs encryption libraries which are written in C


[6/28/2023 3:07 PM] szybet
fuck encryption


[6/28/2023 3:07 PM] szybet
seriously


[6/28/2023 3:07 PM] szybet
it breaks every friday and wendsday even on android


[6/28/2023 3:07 PM] tux_linux
well idk if this particular program can compile without it


[6/28/2023 3:07 PM] szybet
i hope


[6/28/2023 3:07 PM] szybet
find a qt one


[6/28/2023 3:08 PM] tux_linux
we already went through the list of qt ones


[6/28/2023 3:08 PM] tux_linux
they were either uncompilable or uncompilable


[6/28/2023 3:09 PM] szybet
like one year ago?


[6/28/2023 3:09 PM] tux_linux
half


[6/28/2023 3:09 PM] tux_linux
i think


[6/28/2023 3:09 PM] szybet
still


[6/28/2023 3:09 PM] szybet
i was able to compile okular


[6/28/2023 3:09 PM] szybet
remember?


[6/28/2023 3:09 PM] tux_linux
most use qml


[6/28/2023 3:09 PM] tux_linux
did okular use qml?


[6/28/2023 3:10 PM] szybet
RSS readers uses qml


[6/28/2023 3:10 PM] szybet
no


[6/28/2023 3:10 PM] tux_linux
hm


[6/28/2023 3:10 PM] tux_linux
https://github.com/quotient-im/Quaternion
well try this

{Embed}
https://github.com/quotient-im/Quaternion
GitHub - quotient-im/Quaternion: A Qt5-based IM client for Matrix
A Qt5-based IM client for Matrix. Contribute to quotient-im/Quaternion development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/Quaternion-33A10


[6/28/2023 3:10 PM] szybet
find them i will try them soon


[6/28/2023 3:10 PM] tux_linux
i won't try to compile it myself


[6/28/2023 3:10 PM] tux_linux
probably


[6/28/2023 3:26 PM] szybet
https://github.com/Nheko-Reborn/nheko
https://invent.kde.org/network/neochat

{Embed}
https://github.com/Nheko-Reborn/nheko
GitHub - Nheko-Reborn/nheko: Desktop client for Matrix using Qt and...
Desktop client for Matrix using Qt and C++20. Contribute to Nheko-Reborn/nheko development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/nheko-50FB8

{Embed}
https://invent.kde.org/network/neochat
Network / NeoChat · GitLab
A client for matrix, the decentralized communication protocol
/mnt/data/projects/git/conversations/media/avatar-3C461


[6/28/2023 3:26 PM] szybet
biggest hopes


[6/28/2023 3:26 PM] tux_linux
well ok but you do the virtual keyboard


[6/28/2023 3:26 PM] szybet
"USB keyboard needed" :D


[6/28/2023 3:27 PM] tux_linux
then i will also port a cli client


[6/28/2023 3:27 PM] szybet
we will see


[6/28/2023 3:31 PM] szybet
tewst thje mini imahge


[6/28/2023 3:31 PM] tux_linux
shurew


[6/28/2023 4:50 PM] tux_linux
where are we with the matrix bridge


[6/28/2023 4:50 PM] szybet
that instead of doing audio im trying to compile nheko


[6/28/2023 4:50 PM] tux_linux
ok


[6/28/2023 4:50 PM] tux_linux
good luck


[6/28/2023 4:50 PM] szybet
first nheko then the bridge


[6/28/2023 4:50 PM] szybet
https://github.com/42wim/matterbridge

{Embed}
https://github.com/42wim/matterbridge
GitHub - 42wim/matterbridge: bridge between mattermost, IRC, gitter...
bridge between mattermost, IRC, gitter, xmpp, slack, discord, telegram, rocketchat, twitch, ssh-chat, zulip, whatsapp, keybase, matrix, microsoft teams, nextcloud, mumble, vk and more with REST API...


[6/28/2023 4:50 PM] tux_linux
and keyboard?


[6/28/2023 4:50 PM] szybet
i will use this one


[6/28/2023 4:51 PM] szybet
maybe later


[6/28/2023 4:51 PM] szybet
after bridge


[6/28/2023 4:51 PM] tux_linux
then I will try the go cli client too


[6/28/2023 4:51 PM] szybet
idk if its worth your time


[6/28/2023 4:51 PM] szybet
will work? yes, good? no


[6/28/2023 5:05 PM] szybet
```
/usr/include/qt/QtGui/qopengl.h:141:13: fatal error: GL/gl.h: No such file or directory
  141 | #   include <GL/gl.h>
```


[6/28/2023 5:06 PM] szybet
it was too easy, all the libraries had no problems


[6/28/2023 5:06 PM] tux_linux
OpenGL
Seriously


[6/28/2023 5:07 PM] tux_linux
Try neochat


[6/28/2023 5:07 PM] szybet
i havent given up yet


[6/28/2023 5:08 PM] tux_linux
You really expect it to run on something that doesn't even have a GPU?


[6/28/2023 5:08 PM] szybet
do you know what happened to walcom drivers in libinput?


[6/28/2023 5:09 PM] szybet
on inkbox


[6/28/2023 5:09 PM] szybet
"uh oh good luck"


[6/28/2023 5:09 PM] szybet
i deleted the code


[6/28/2023 5:09 PM] szybet
lol


[6/28/2023 5:12 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-32347.png


[6/28/2023 5:12 PM] szybet
it even runs on haiku


[6/28/2023 5:12 PM] szybet
haiku doesnt have GPU's at all


[6/28/2023 5:23 PM] tux_linux
Well ok


[6/28/2023 5:24 PM] tux_linux
You will make a guide to compile it if you succeed? Thanks


[6/28/2023 5:24 PM] szybet
im doing it

{Reactions}
👍 

[6/28/2023 5:24 PM] szybet
but i doubt it will work

{Reactions}
👍 

[6/28/2023 5:24 PM] szybet
it QQuickView


[6/28/2023 5:24 PM] tux_linux
Qml


[6/28/2023 5:24 PM] tux_linux
Hmm


[6/28/2023 5:24 PM] szybet
setSurfaceType


[6/28/2023 5:24 PM] szybet
disables opengl in qml


[6/28/2023 5:24 PM] szybet
but


[6/28/2023 5:25 PM] szybet
will it compile


[6/28/2023 5:25 PM] szybet
hm hm hm


[6/28/2023 5:25 PM] tux_linux
Hmm


[6/28/2023 5:29 PM] szybet
https://www.qt.io/blog/2015/01/22/introducing-the-qt-quick-2d-renderer\

{Embed}
https://www.qt.io/blog/2015/01/22/introducing-the-qt-quick-2d-renderer/
Introducing the Qt Quick 2D Renderer
Introducing the Qt Quick 2D Renderer


[6/28/2023 5:29 PM] szybet
pdnwui4etgb345ru89


[6/28/2023 5:33 PM] szybet
quaterion uses quickview 2


[6/28/2023 5:46 PM] kuratius
llvmpipe /softwareopengl


[6/28/2023 5:46 PM] szybet
what


[6/28/2023 5:47 PM] kuratius
LIBGL_ALWAYS_SOFTWARE=1 
Maybe? Idk


[6/28/2023 5:48 PM] szybet
we dont have mesa at all


[6/28/2023 5:51 PM] szybet
https://embeddeduse.com/2019/05/29/qt-quick-2d-renderer-under-lgplv3-since-qt-5-8/

{Embed}
Burkhard Stubert
https://embeddeduse.com/2019/05/29/qt-quick-2d-renderer-under-lgplv3-since-qt-5-8/
Qt Quick 2D Renderer: Under LGPLv3 since Qt 5.8
I know that this is pretty old news. Unfortunately, it is not very well known. I have been asked half a dozen times over the last two months, whether the QML software renderer – officially kn…
/mnt/data/projects/git/conversations/media/blank-6F087.jpg


[6/28/2023 5:51 PM] szybet
we need this so bad


[6/28/2023 5:51 PM] szybet
where is it


[6/28/2023 5:55 PM] szybet
its in 5.8


[6/28/2023 5:55 PM] szybet
@tux-linux qt 5.8 would work


[6/28/2023 5:59 PM] szybet
AAAAAAAA


[6/28/2023 5:59 PM] szybet
```
When configuring Qt, make sure to append -opengl es2 to your configure arguments.```


[6/28/2023 5:59 PM] szybet
```
  -opengl <api> ........ Enable OpenGL support. Supported APIs:
                         es2 (default on Windows), desktop (default on Unix),
                         dynamic (Windows only)

```


[6/28/2023 5:59 PM] szybet
https://doc.qt.io/QtQuick2DRenderer/qtquick2drenderer-installation-guide.html


[6/28/2023 5:59 PM] szybet
where is client-dummy


[6/28/2023 6:02 PM] kuratius
btw about the battery issue, my nia lost 5 % in like 2 days sleeping on nickel


[6/28/2023 6:02 PM] kuratius
dont thing I have your issue unless it only happens very rarely


[6/28/2023 6:02 PM] szybet
i have an old version of nickel


[6/28/2023 6:02 PM] szybet
and old nia


[6/28/2023 6:02 PM] szybet
it was pretty new when i buyed it


[6/28/2023 6:02 PM] szybet
i needed to port it to plato


[6/28/2023 6:27 PM] szybet
https://github.com/qt/qtdeclarative-render2d

{Embed}
https://github.com/qt/qtdeclarative-render2d
GitHub - qt/qtdeclarative-render2d: Raster backend for QtQuick scen...
Raster backend for QtQuick scene graph. Contribute to qt/qtdeclarative-render2d development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qtdeclarative-render2d-A284D


[6/28/2023 6:27 PM] szybet
foun it


[6/28/2023 7:36 PM] szybet
@tux-linux would qt 5.5 run


[6/28/2023 7:36 PM] szybet
minimal version for this...


[6/28/2023 7:37 PM] tux_linux
You won't compile whole qt 5.5 for this?


[6/28/2023 7:37 PM] szybet
i ask if it would work


[6/28/2023 7:37 PM] tux_linux
Idk
We use 5.15
More than enough?


[6/28/2023 7:37 PM] szybet
no???


[6/28/2023 7:37 PM] tux_linux
?


[6/28/2023 7:38 PM] tux_linux
Why


[6/28/2023 7:38 PM] szybet
you are right


[6/28/2023 7:38 PM] szybet
why doesnt it compile 😭


[6/28/2023 7:38 PM] tux_linux
Reasons


[6/28/2023 7:38 PM] tux_linux
What error


[6/28/2023 7:38 PM] szybet
fucking every one of them


[6/28/2023 7:39 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-CA325.txt


[6/28/2023 7:40 PM] tux_linux
Missing includes somewhere?


[6/28/2023 7:40 PM] szybet
this file doesnt exist


[6/28/2023 7:40 PM] szybet
at all


[6/28/2023 7:40 PM] tux_linux
Which one


[6/28/2023 7:41 PM] szybet
`qquickshadereffectnode_p.h`


[6/28/2023 7:41 PM] szybet
`   32 | #include <private/qquickshadereffectnode_p.h>`


[6/28/2023 7:41 PM] tux_linux
_p files are special iirc
Generated by compiler somehow?


[6/28/2023 7:41 PM] szybet
not really


[6/28/2023 7:41 PM] szybet
idk


[6/28/2023 7:41 PM] szybet
its nowehre


[6/28/2023 7:57 PM] szybet
i will 5.7


[6/28/2023 7:57 PM] szybet
otherwise i will go insane if i need to touch kde libraries one more time


[6/28/2023 8:10 PM] szybet
why doesnt anyway say that im stupid


[6/28/2023 8:10 PM] szybet
ths matrix app doesnt support this qt version anyway


[6/28/2023 8:10 PM] tux_linux
what will you do


[6/28/2023 8:10 PM] szybet
neochat


[6/28/2023 8:10 PM] szybet
and go insane


[6/28/2023 8:10 PM] tux_linux
ok


[6/28/2023 8:10 PM] tux_linux
good luck


[6/28/2023 8:47 PM] szybet
-- The following features have been disabled:

 * EnableE2EE, end-to-end encryption (WORK IN PROGRESS)
 * EnableApiCodeGeneration, build target update-api


[6/28/2023 8:57 PM] tux_linux
ok


[6/28/2023 8:58 PM] tux_linux
i will set up the matrix bridge


[6/28/2023 8:58 PM] szybet
nooo


[6/28/2023 8:59 PM] szybet
do you have a server for that?


[6/28/2023 8:59 PM] szybet
a fast one


[6/28/2023 8:59 PM] tux_linux
it's messages


[6/28/2023 8:59 PM] tux_linux
text


[6/28/2023 8:59 PM] szybet
images


[6/28/2023 9:29 PM] [matrix] <tux-linux>
test?


[6/28/2023 9:29 PM] tux_linux
test here


[6/28/2023 9:29 PM] szybet
test thererere


[6/28/2023 9:30 PM] tux_linux
it works


[6/28/2023 9:30 PM] [matrix] <tux-linux>
it works


[6/28/2023 9:30 PM] [matrix] <Szybet>
maybe remove from the prefix < >


[6/28/2023 9:31 PM] [matrix] <tux-linux>
I will start with dev


[6/28/2023 9:31 PM] [matrix] <tux-linux>
I think it's enough for now


[6/28/2023 9:31 PM] szybet
add more :(


[6/28/2023 9:31 PM] szybet
and quess the fuck what is inside one of the 20 kde libraries


[6/28/2023 9:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-CEA8E.txt

{Reactions}
🥴 

[6/28/2023 9:32 PM] szybet
impostor open gl


[6/28/2023 9:32 PM] [matrix] tux-linux
it doesn't send attachments


[6/28/2023 9:32 PM] [matrix] tux-linux
but ok


[6/28/2023 9:32 PM] szybet
you can configure that


[6/28/2023 9:32 PM] szybet
i think


[6/28/2023 9:32 PM] szybet
i mean images propaly work


[6/28/2023 9:33 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-FDAA6.png


[6/28/2023 9:33 PM] [matrix] Szybet
image.png


[6/28/2023 9:33 PM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-3DD95.png


[6/28/2023 9:33 PM] [matrix] tux-linux
yes


[6/28/2023 9:34 PM] szybet
you either compile mesa or we dont have a matrix client


[6/28/2023 9:34 PM] szybet
the end


[6/28/2023 9:35 PM] tux_linux
what is that nickname


[6/28/2023 9:35 PM] szybet
no one answers me this


[6/28/2023 9:35 PM] tux_linux
CLI


[6/28/2023 9:35 PM] szybet
andi ignores me


[6/28/2023 9:35 PM] szybet
wont be usable


[6/28/2023 9:35 PM] tux_linux
i will try the go one


[6/28/2023 9:35 PM] andi15701
weechat


[6/28/2023 9:35 PM] tux_linux
it will probably be more usable


[6/28/2023 9:35 PM] tux_linux
🥴


[6/28/2023 9:36 PM] szybet
maybe a gui one?


[6/28/2023 9:36 PM] szybet
well it could use the cli if it uses touch / mouse


[6/28/2023 9:37 PM] tux_linux
who said the gui one was going to be usable anyways


[6/28/2023 9:37 PM] andi15701
I played around with nheko on debian on x, but was not successful


[6/28/2023 9:37 PM] szybet
could be done to be work


[6/28/2023 9:37 PM] tux_linux
yes, actually the other option would be to find a gtk one, which X likes more, that would work on kobox


[6/28/2023 9:37 PM] tux_linux
but it would be clunky


[6/28/2023 9:38 PM] szybet
gtk4?


[6/28/2023 9:38 PM] szybet
maybe?


[6/28/2023 9:38 PM] tux_linux
gtk3


[6/28/2023 9:38 PM] szybet
https://matrix.org/ecosystem/clients/gotktrix/

{Embed}
https://matrix.org/ecosystem/clients/gotktrix/
gotktrix
Matrix, the open protocol for secure decentralised communications
/mnt/data/projects/git/conversations/media/matrix-logo-56B2E.png


[6/28/2023 9:38 PM] szybet
welp


[6/28/2023 9:38 PM] tux_linux
remember we are stuck on alpine 3.10


[6/28/2023 9:38 PM] szybet
its alpfa anyways


[6/28/2023 9:38 PM] andi15701
nheko  tends to have more and more animations


[6/28/2023 9:38 PM] andi15701
we are stuck because of 2.6 kernels?


[6/28/2023 9:38 PM] tux_linux
yes


[6/28/2023 9:38 PM] andi15701
in imx5 devices


[6/28/2023 9:39 PM] tux_linux
yes


[6/28/2023 9:39 PM] szybet
no


[6/28/2023 9:39 PM] szybet
we are stuck because of opengl under quick view


[6/28/2023 9:39 PM] tux_linux
about this i was talking


[6/28/2023 9:39 PM] szybet
animations at least in qt5 c++ can be turned off with one command


[6/28/2023 9:40 PM] szybet
https://gitlab.gnome.org/GNOME/fractal

{Embed}
https://gitlab.gnome.org/GNOME/fractal
GNOME / fractal · GitLab
Matrix group messaging app
/mnt/data/projects/git/conversations/media/fractal-avatar5-82FE1.png


[6/28/2023 9:40 PM] szybet
i think this one used gtk3 at some point


[6/28/2023 9:40 PM] andi15701
there is a purple plugin


[6/28/2023 9:40 PM] andi15701
but development stalled


[6/28/2023 9:40 PM] szybet
The previous version of Fractal was using GTK3 and its own backend to talk to a matrix homeserver,
the code can be found in the legacy branch.


[6/28/2023 9:41 PM] andi15701
I have used pidgin with telegram successfully on my clara


[6/28/2023 9:42 PM] tux_linux
I once installed the official telegram app on the libra


[6/28/2023 9:42 PM] tux_linux
it worked very well


[6/28/2023 9:42 PM] tux_linux
(on x11)


[6/28/2023 9:42 PM] andi15701
if that plugin would be developed further


[6/28/2023 9:43 PM] andi15701
I would be happy


[6/28/2023 9:43 PM] szybet
telegram is uhm


[6/28/2023 9:43 PM] szybet
tfu


[6/28/2023 9:43 PM] andi15701
matirx purple plugin


[6/28/2023 9:43 PM] szybet
@tux-linux please try this one, the gtk3 branch


[6/28/2023 9:44 PM] andi15701
to be used with pidgin


[6/28/2023 9:44 PM] tux_linux
where is that branch


[6/28/2023 9:45 PM] szybet
https://gitlab.gnome.org/GNOME/fractal/-/tree/legacy?ref_type=heads

{Embed}
https://gitlab.gnome.org/GNOME/fractal/-/tree/legacy?ref_type=heads
Files · legacy · GNOME / fractal · GitLab
Matrix group messaging app
/mnt/data/projects/git/conversations/media/fractal-avatar5-82FE1.png


[6/28/2023 9:45 PM] tux_linux
ok, i will try to compile it


[6/28/2023 9:46 PM] szybet
please


[6/28/2023 9:46 PM] szybet
let those 5 hours of my life dont go to waste


[6/28/2023 9:47 PM] tux_linux
whoa
gomuks launched on native alpine
without complaining about too old libc


[6/28/2023 9:49 PM] szybet
https://lily-is.land/kazv/kazv

{Embed}
https://lily-is.land/kazv/kazv
The Kazv Project / kazv · GitLab
Approval required | 需要批准
/mnt/data/projects/git/conversations/media/kazvlogo-256-946AF.png


[6/28/2023 9:49 PM] szybet
last hope


[6/28/2023 9:49 PM] szybet
its go


[6/28/2023 9:50 PM] tux_linux
yea


[6/28/2023 9:50 PM] tux_linux
qml


[6/28/2023 9:51 PM] tux_linux
I will try to compile fractal after gomuks


[6/28/2023 9:51 PM] szybet
less dependiences


[6/28/2023 9:51 PM] szybet
and maybe doesnt use this one class from kirigami extra


[6/28/2023 9:51 PM] [matrix] Szybet
213


[6/28/2023 9:51 PM] szybet
it uses the avatar


[6/28/2023 9:51 PM] szybet
cool


[6/28/2023 9:51 PM] szybet
on matrix doesnt


[6/28/2023 9:52 PM] szybet
;/


[6/28/2023 9:52 PM] szybet
maybe there is an option for that?


[6/28/2023 9:52 PM] szybet
test now


[6/28/2023 9:52 PM] szybet
nope


[6/28/2023 9:54 PM] tux_linux
whoops we don't have an equal sign in iterm


[6/28/2023 9:55 PM] tux_linux
I will put some more buttons


[6/28/2023 9:55 PM] szybet
what


[6/28/2023 9:55 PM] tux_linux
in the keyboard


[6/28/2023 9:55 PM] szybet
oh


[6/28/2023 10:01 PM] szybet
how do i build boost librry..


[6/28/2023 10:05 PM] tux_linux
didn't you use it for ipd?


[6/28/2023 10:05 PM] szybet
i didnt needed a .so file


[6/28/2023 10:05 PM] szybet
weird ugh


[6/28/2023 10:09 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/gomuks-7FC72.png


[6/28/2023 10:09 PM] tux_linux
we will see if this works


[6/28/2023 10:09 PM] szybet
does it work


[6/28/2023 10:10 PM] szybet
on clicks


[6/28/2023 10:10 PM] szybet
or just arrows


[6/28/2023 10:10 PM] tux_linux
arrows


[6/28/2023 10:10 PM] szybet
:(...


[6/28/2023 10:10 PM] kuratius
I have tried to compile fractal before, was not a good experience


[6/28/2023 10:12 PM] szybet
i hope tux linux manages to do it


[6/28/2023 10:12 PM] tux_linux
i will probably use a native alpine vm


[6/28/2023 10:12 PM] tux_linux
it will probably take a loooong time


[6/28/2023 10:12 PM] tux_linux
but those things usually have more odds to work


[6/28/2023 10:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-FB168.txt


[6/28/2023 10:21 PM] szybet
what the fuck


[6/28/2023 10:21 PM] szybet
what


[6/28/2023 10:21 PM] szybet
the


[6/28/2023 10:21 PM] szybet
fuck


[6/28/2023 10:21 PM] tux_linux
i386?


[6/28/2023 10:21 PM] tux_linux
?%$%#!


[6/28/2023 10:21 PM] szybet
fucking how


[6/28/2023 10:21 PM] szybet
@Kuratius what about iumgtool


[6/28/2023 10:22 PM] kuratius
The issue I had was that it's not really a rust app, it's a wrapper around a lot of C libraries


[6/28/2023 10:22 PM] kuratius
Will git pull and read through your instructions again


[6/28/2023 10:23 PM] kuratius
Have been distracted, some of the zig devs actually started fixing the compilation issues the compiler has on arm32


[6/28/2023 10:23 PM] kuratius
CMake having the wrong target was only the tip of the iceberg


[6/28/2023 10:24 PM] andi15701
what about trying things with existing alpine packages first?


[6/28/2023 10:28 PM] [matrix] Szybet
jo


[6/28/2023 10:28 PM] [matrix] Szybet
jo


[6/28/2023 10:30 PM] kuratius
https://pkgs.alpinelinux.org/package/edge/community/x86_64/gomuks
like this?


[6/28/2023 10:31 PM] [matrix] andi1
At the moment I am trying to tame some clocks


[6/28/2023 10:31 PM] [matrix] andi1
then I will play a bit around


[6/28/2023 10:31 PM] [matrix] andi1
with alpine packages on the kobo

{Reactions}
👍 

[6/28/2023 10:32 PM] andi15701
to have a first idea if the "water is fresh"


[6/28/2023 10:32 PM] andi15701
pmOS is also based on alpine, so it can be easily tried


[6/28/2023 10:35 PM] [matrix] tux-linux-kobo
hello sent from kobo :)


[6/28/2023 10:36 PM] szybet
wooo


[6/28/2023 10:36 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/gomuks-B1EC1.png


[6/28/2023 10:36 PM] szybet
is it usable?


[6/28/2023 10:36 PM] tux_linux
i think


[6/28/2023 10:36 PM] szybet
how much


[6/28/2023 10:37 PM] [matrix] tux-linux-kobo
i can write and see messages


[6/28/2023 10:39 PM] szybet
is it usable...


[6/28/2023 10:39 PM] kuratius
which one is this?


[6/28/2023 10:39 PM] szybet
maybe just record it


[6/28/2023 10:39 PM] tux_linux
gomuks


[6/28/2023 10:40 PM] [matrix] tux-linux-kobo
test recording :)


[6/28/2023 10:41 PM] szybet
```
CMake Error at /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/lib/cmake/Boost-1.83.0/BoostConfig.cmake:141 (find_package):
  Found package configuration file:

    /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/lib/cmake/boost_serialization-1.83.0/boost_serialization-config.cmake

  but it set boost_serialization_FOUND to FALSE so package
  "boost_serialization" is considered to be NOT FOUND.  Reason given by
  package:

  No suitable build variant has been found.

  The following variants have been tried and rejected:

  * libboost_serialization.so.1.83.0 (64 bit, need 32)

  * libboost_serialization.a (64 bit, need 32)

Call Stack (most recent call first):
  /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot/lib/cmake/Boost-1.83.0/BoostConfig.cmake:262 (boost_find_component)
  /usr/share/cmake/Modules/FindBoost.cmake:594 (find_package)
  CMakeLists.txt:57 (find_package)
```


[6/28/2023 10:41 PM] szybet
what is this


[6/28/2023 10:48 PM] tux_linux
https://www.youtube.com/shorts/wEFmNX0sAPk

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=wEFmNX0sAPk
gomuks (matrix client) on ITerm
/mnt/data/projects/git/conversations/media/hqdefault-138D1.jpg


[6/28/2023 10:48 PM] tux_linux
you can also toggle the two sidebars

{Attachments}
/mnt/data/projects/git/conversations/media/gomuks-0716B.png


[6/28/2023 10:48 PM] szybet
you have choosen the biggest device ;)


[6/28/2023 10:49 PM] tux_linux
or the whole keyboard

{Attachments}
/mnt/data/projects/git/conversations/media/gomuks-859B9.png


[6/28/2023 10:49 PM] szybet
well ok


[6/28/2023 10:49 PM] tux_linux
well nia should not be that bad


[6/28/2023 10:49 PM] szybet
can you enable keyboard for it?


[6/28/2023 10:49 PM] szybet
usb


[6/28/2023 10:49 PM] szybet
as we are on it


[6/28/2023 10:49 PM] szybet
a few changes here and therer


[6/28/2023 10:49 PM] [matrix] tux-linux-kobo
i dont even have that setup


[6/28/2023 10:50 PM] szybet
either this or i edit the image later


[6/28/2023 10:51 PM] kuratius
finished running it again, now what?


[6/28/2023 10:51 PM] szybet
did it worked?


[6/28/2023 10:51 PM] kuratius
I have .img files


[6/28/2023 10:51 PM] szybet
well flash the bigger one


[6/28/2023 10:51 PM] szybet
and test it


[6/28/2023 10:51 PM] szybet
if you want


[6/28/2023 10:51 PM] tux_linux
did he sign the gui bundle


[6/28/2023 10:52 PM] tux_linux
it won't work otherwise


[6/28/2023 10:52 PM] szybet
i did it


[6/28/2023 10:52 PM] tux_linux
ok


[6/28/2023 10:52 PM] szybet
automaticaly


[6/28/2023 10:52 PM] tux_linux
with his keys


[6/28/2023 10:52 PM] szybet
with his keys


[6/28/2023 10:52 PM] tux_linux
ok


[6/28/2023 10:56 PM] szybet
ok so final


[6/28/2023 10:56 PM] szybet
kazv doesnt uses anywhere opengl to my knowledge


[6/28/2023 10:56 PM] szybet
but i cant compile boost


[6/28/2023 10:56 PM] szybet
steps:


[6/28/2023 10:57 PM] [matrix] tux-linux-kobo
do i package gomuks in iterm user app


[6/28/2023 10:57 PM] szybet
```
git clone --recursive https://github.com/boostorg/boost.git|
./bootstrap.sh
./b2 --prefix=~/boostForBBB/ \
    --without-context \
    --without-coroutine \
    --without-fiber \
    --without-python \
    --address-model=64 \
    --stagedir=libsithink \
    -j8 \
    -toolset=arm-kobo-linux-gnueabihf-g++ \
    -threading=multi
```


[6/28/2023 10:58 PM] szybet
those are the steps - @tux-linux please try to compile https://lily-is.land/kazv/libkazv.git

{Embed}
https://lily-is.land/kazv/libkazv.git
The Kazv Project / libkazv · GitLab
Approval required | 需要批准
/mnt/data/projects/git/conversations/media/twitter_card-570ddb06edf56a2312253c5872489-68300.jpg


[6/28/2023 10:58 PM] tux_linux
`--address-model=64` you sure?


[6/28/2023 10:58 PM] szybet
it needs boost


[6/28/2023 10:58 PM] szybet
it was 32, the same error


[6/28/2023 10:58 PM] szybet
try it


[6/28/2023 10:58 PM] szybet
if you cant, go with the xorg one


[6/28/2023 10:58 PM] tux_linux
ok


[6/28/2023 10:58 PM] szybet
seperate in autostart would be better


[6/28/2023 10:58 PM] szybet
:)


[6/28/2023 10:59 PM] tux_linux
how do we bundle extensions with user apps


[6/28/2023 10:59 PM] tux_linux
we never programmed anything for it


[6/28/2023 10:59 PM] szybet
what


[6/28/2023 10:59 PM] szybet
dont over complicate things


[6/28/2023 10:59 PM] szybet
its a seperate app now


[6/28/2023 10:59 PM] szybet
just make sure it saves settings to app data


[6/28/2023 10:59 PM] tux_linux
you can't run anything from app-data


[6/28/2023 10:59 PM] szybet
XDG_HOME something like that


[6/28/2023 10:59 PM] szybet
saves session


[6/28/2023 10:59 PM] tux_linux
you need to copy it to /app-temp


[6/28/2023 10:59 PM] tux_linux
the binary


[6/28/2023 11:00 PM] szybet
seperate


[6/28/2023 11:00 PM] szybet
user


[6/28/2023 11:00 PM] szybet
app


[6/28/2023 11:00 PM] tux_linux
with whole sff included?


[6/28/2023 11:00 PM] szybet
yep


[6/28/2023 11:00 PM] tux_linux
two versions to manage? nightmare


[6/28/2023 11:00 PM] szybet
dont overcomplicate things


[6/28/2023 11:00 PM] szybet
2 scripts


[6/28/2023 11:00 PM] tux_linux
this is overcomplicating things


[6/28/2023 11:00 PM] szybet
make a script


[6/28/2023 11:00 PM] szybet
no


[6/28/2023 11:00 PM] szybet
you wont make any extensions to user apps


[6/28/2023 11:00 PM] szybet
no


[6/28/2023 11:00 PM] szybet
no


[6/28/2023 11:00 PM] szybet
n


[6/28/2023 11:00 PM] szybet
o


[6/28/2023 11:02 PM] tux_linux
i will think about it


[6/28/2023 11:03 PM] szybet
try the boost lib


[6/28/2023 11:03 PM] tux_linux
maybe just make a backend for cli apps
which would use iterm everytime


[6/28/2023 11:03 PM] szybet
ok simplest: make a simple script at start of sff that chooses the program


[6/28/2023 11:03 PM] szybet
even better: make a qdialog


[6/28/2023 11:04 PM] tux_linux
i am going to go jogging later, i will think about it there


[6/28/2023 11:04 PM] szybet
cool


[6/28/2023 11:56 PM] andi15701
no problems with smoke?


[6/28/2023 11:56 PM] tux_linux
We had a lot of it Sunday


[6/28/2023 11:56 PM] tux_linux
Air was not breathable


[6/28/2023 11:56 PM] tux_linux
Today it was fine


[6/28/2023 11:59 PM] andi15701
I had experienced level 9, I was happy to be able to have a place to stay


[6/28/2023 11:59 PM] tux_linux
In Europe?


[6/28/2023 11:59 PM] tux_linux
What caused it


[6/28/2023 11:59 PM] andi15701
Calgary


[6/28/2023 11:59 PM] tux_linux
Oh


[6/28/2023 11:59 PM] tux_linux
Nice that you are in Canada


[6/28/2023 11:59 PM] andi15701
that was 2017


[6/29/2023 12:00 AM] tux_linux
Oh ok


[6/29/2023 12:00 AM] andi15701
I had quite a lot of luck


[6/29/2023 12:00 AM] andi15701
in Europe until now


[6/29/2023 12:00 AM] andi15701
with that


[6/29/2023 12:00 AM] tux_linux
Well, forest fires here made the air really thick some days ago


[6/29/2023 12:00 AM] tux_linux
You walked outside and it was like something was in your throat


[6/29/2023 12:01 AM] andi15701
for me it was totally new experience in 2017


[6/29/2023 12:02 AM] andi15701
when there were bigger fires in Scandinavia while I was cycling there I had luck with the air currents


[6/29/2023 12:02 AM] andi15701
And time


[6/29/2023 12:03 AM] andi15701
At one place, I was 2 days before a fire started

{Reactions}
👍 

[6/29/2023 12:15 AM] kuratius
image booted


[6/29/2023 12:16 AM] tux_linux
Good


[6/29/2023 5:11 AM] the.mightydill
we had that a few weeks ago, schools were not permitted to let us go outside

{Reactions}
👍 

[6/29/2023 5:12 AM] the.mightydill
sorry it's Eid today or I would be testing sanki and inkbox 2.0


[6/29/2023 5:12 AM] tux_linux
np

{Reactions}
👍 

[6/29/2023 6:00 AM] tux_linux
```
kobo:/data/onboard# mount | wc -l
441
kobo:/data/onboard#
```
better not to look at it


[6/29/2023 6:00 AM] tux_linux
🥴


[6/29/2023 6:00 AM] tux_linux
and then...
```
kobo:/data/onboard# stop gui_apps
kobo:/data/onboard# mount | wc -l
125
kobo:/data/onboard#
```


[6/29/2023 6:02 AM] tux_linux
ITerm will allow *unsigned* extensions to run, but those extensions will be mounted as nodev/nosuid to prevent privilege escalation


[6/29/2023 6:05 AM] tux_linux
basically, the current procedure is
1. package some binary in a squashfs and name it `xyz.isa` (extension is important)
2. throw it in `.apps-data/ITerm/extensions`
3. relaunch gui_apps
4. profit, your extension should now be mounted with nodev,nosuid at `/app-data/extensions/xyz/`, so then you can run `/app-data/extensions/xyz/bin/hello` nicely
I will also add a script that adds those paths to `PATH` automatically


[6/29/2023 7:06 AM] szybet
At this point just sign an app with an additional key ( now 2 of them ) if the second passes then allow extensions


[6/29/2023 7:07 AM] szybet
Appname.Extensions.dgst


[6/29/2023 10:00 AM] szybet
Or just enable this option as an user app option in root kernels


[6/29/2023 10:25 AM] szybet
@andi @NiLuJe Is it possible to swap screeens between devices? Kobo aura 2 screen to the Kobo clara HD


[6/29/2023 10:25 AM] szybet
connectors all the same


[6/29/2023 11:40 AM] tux_linux
No


[6/29/2023 11:41 AM] tux_linux
Not same dpi


[6/29/2023 11:41 AM] tux_linux
Unless I'm mistaken


[6/29/2023 11:41 AM] szybet
yes, and?


[6/29/2023 11:41 AM] szybet
i can change that in software


[6/29/2023 11:41 AM] tux_linux
Controller


[6/29/2023 11:41 AM] tux_linux
Where


[6/29/2023 11:41 AM] szybet
well connector seems the same


[6/29/2023 11:41 AM] tux_linux
And?


[6/29/2023 11:41 AM] szybet
to match the dpi


[6/29/2023 11:42 AM] tux_linux
Eink controller handles that
Probably nothing else


[6/29/2023 11:43 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9646C.png


[6/29/2023 11:44 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5C294.png


[6/29/2023 11:44 AM] szybet
oh i can see the problem


[6/29/2023 11:44 AM] szybet
at least one


[6/29/2023 11:45 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-36AA2.png


[6/29/2023 11:45 AM] szybet
they wont match the connector :(


[6/29/2023 12:28 PM] szybet
So everything is fine?


[6/29/2023 12:28 PM] kuratius
No issues


[6/29/2023 12:29 PM] kuratius
Haven't  used it for more than a minute or two but I think it works


[6/29/2023 12:29 PM] kuratius
I did not check if it's rooted properly


[6/29/2023 1:07 PM] andi15701
The interesting question is whether that would also work with that 6.3 kernel


[6/29/2023 1:07 PM] mmathias_official
Is there a way to debug the creation of the LocalLibrary.db file? I uploaded a bunch of epub files to my Kobo and after rebuilding the database, the file is only 8 bytes long.


[6/29/2023 1:08 PM] szybet
Yes there is, you need to recompile inkbox


[6/29/2023 1:12 PM] mmathias_official
Ok, but is there a log file?


[6/29/2023 1:12 PM] szybet
you can ssh into the device and execute `service inkbox_gui restart`


[6/29/2023 1:12 PM] szybet
should give a few logts


[6/29/2023 1:13 PM] szybet
you can send me the books, i will debug it more


[6/29/2023 1:13 PM] mmathias_official
Ok, thanks, I'll try.


[6/29/2023 1:20 PM] mmathias_official
Everything seems normal, but I get "qUncompress: Input data is corrupted". Could this be due to a corrupted epub or pdf file?


[6/29/2023 1:20 PM] szybet
its a normal warning message


[6/29/2023 1:21 PM] szybet
do you want to further debug the issue?


[6/29/2023 1:21 PM] mmathias_official
I also getciniparser: cannot open /mnt/onboard/.kobo/nightmode.ini
and


[6/29/2023 1:21 PM] mmathias_official
can't open '/mnt/onboard/.kobo/Kobo/Kobo eReader.conf': No such file or directory


[6/29/2023 1:21 PM] szybet
also normal, at least not related


[6/29/2023 1:21 PM] szybet
also normal


[6/29/2023 1:21 PM] mmathias_official
I would like to, but I have very limited resources right now.


[6/29/2023 1:21 PM] szybet
resources = time?


[6/29/2023 1:21 PM] mmathias_official
yes 🙂


[6/29/2023 1:22 PM] szybet
in ssh. run `chroot /kobo`


[6/29/2023 1:22 PM] szybet
then in /mnt/onboard/.adds/inkbox is a file named explore local library


[6/29/2023 1:23 PM] szybet
copy it to /


[6/29/2023 1:23 PM] mmathias_official
done


[6/29/2023 1:23 PM] szybet
edit it, there should be `#!/bin/sh` in the first line, change to `#!/bin/sh -x`


[6/29/2023 1:23 PM] szybet
to edit exit the chroot


[6/29/2023 1:24 PM] szybet
with nano


[6/29/2023 1:24 PM] szybet
then chroot again


[6/29/2023 1:24 PM] szybet
and mount --bind the file in / to the file in /mnt/........


[6/29/2023 1:24 PM] szybet
and then with `tac` check if the file changed in `/mnt/onboard/.adds/inkbox`


[6/29/2023 1:24 PM] mmathias_official
first line is #!/bin/busybox-initrd sh


[6/29/2023 1:24 PM] szybet
ok then add -x at the end


[6/29/2023 1:24 PM] szybet
`#!/bin/busybox-initrd sh -x`

{Reactions}
👍 

[6/29/2023 1:25 PM] szybet
then after exiting the chroot check if you still get logs to the terminal


[6/29/2023 1:25 PM] szybet
if yes, trigger the regeneration of the library


[6/29/2023 1:25 PM] szybet
and post the logs


[6/29/2023 1:27 PM] szybet
if not, then say it and dont restart the service


[6/29/2023 1:27 PM] szybet
dont


[6/29/2023 1:30 PM] mmathias_official
Ok, I am getting logs and it says "Generating database"...


[6/29/2023 1:30 PM] szybet
nothing more?


[6/29/2023 1:30 PM] mmathias_official
Still "Generating database" on the screen. And sometimes the screen flashes and the log says "QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout"


[6/29/2023 1:30 PM] mmathias_official
But I suppose that's irrelevant for the database.


[6/29/2023 1:31 PM] szybet
show me the output of `cat /kobo/mnt/onboard/.adds/inkbox/explore_local_library.sh`


[6/29/2023 1:31 PM] mmathias_official
Still "Generating database" and there is no Library file yet.


[6/29/2023 1:32 PM] mmathias_official
Ok, apparently the -x is not there.


[6/29/2023 1:33 PM] szybet
you did something wrong


[6/29/2023 1:33 PM] szybet
maybe the mount bind, maybe the edit


[6/29/2023 1:33 PM] mmathias_official
the file in /kobo has the -x


[6/29/2023 1:34 PM] mmathias_official
i'll try the mount bind again


[6/29/2023 1:34 PM] szybet
you need to bind mount it while in chroot


[6/29/2023 1:34 PM] mmathias_official
yes, i did that.


[6/29/2023 1:34 PM] mmathias_official
hold on a sec


[6/29/2023 1:34 PM] szybet
mount --bind /explore_local_library.sh /kobo/mnt/onboard/.adds/inkbox/explore_local_library.sh


[6/29/2023 1:34 PM] mmathias_official
it's there now


[6/29/2023 1:34 PM] szybet
well good


[6/29/2023 1:34 PM] szybet
regenerate


[6/29/2023 1:35 PM] mmathias_official
So, I delete the Library file and restart the inkbox_gui service, right?


[6/29/2023 1:35 PM] szybet
noooooooo


[6/29/2023 1:36 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-07C12.png


[6/29/2023 1:36 PM] szybet
after exiting chroot, do you still get logs?


[6/29/2023 1:36 PM] szybet
from inkbox


[6/29/2023 1:36 PM] mmathias_official
yes


[6/29/2023 1:36 PM] szybet
then just delete the database


[6/29/2023 1:36 PM] szybet
and enter the library


[6/29/2023 1:36 PM] mmathias_official
ok


[6/29/2023 1:36 PM] szybet
it will regenerate it


[6/29/2023 1:36 PM] szybet
hwo do you delete it?


[6/29/2023 1:37 PM] mmathias_official
rm /data/onboard/.database/LocalLibrary.db


[6/29/2023 1:38 PM] szybet
good!


[6/29/2023 1:39 PM] mmathias_official
Ok, there aren't really any more log lines written when I enter the "Reader" on the main screen. Generating Database is much faster than it was before.


[6/29/2023 1:40 PM] szybet
this doesnt make sense


[6/29/2023 1:40 PM] mmathias_official
My explore_local_library.sh has the -x in the first line now.


[6/29/2023 1:41 PM] mmathias_official
Let me try the whole thing again - just to be sure.


[6/29/2023 1:41 PM] mmathias_official
Ok, here is what I do...


[6/29/2023 1:44 PM] mmathias_official
kobo:/# chroot /kobo
kobo:/# mount --bind explore_local_library.sh /mnt/onboard/.adds/inkbox/explore_local_library.sh 
kobo:/# cat /mnt/onboard/.adds/inkbox/explore_local_library.sh
*** RETURNS FIRST LINE: #!/bin/busybox-initrd sh -x
kobo:/# exit
*** CHECKING TO SEE IF I GET LOGS
kobo:/# rm data/onboard/.database/LocalLibrary.db
*** TAPPING THE "Reader" BUTTON


[6/29/2023 1:45 PM] szybet
` mount --bind /explore_local_library.sh /mnt/onboard/.adds/inkbox/explore_local_library.sh ` try this


[6/29/2023 1:46 PM] mmathias_official
same


[6/29/2023 1:47 PM] szybet
let me try


[6/29/2023 1:54 PM] szybet
do you have folders feature enabled?


[6/29/2023 1:54 PM] mmathias_official
If you mean the "Show folders", then yes.


[6/29/2023 1:55 PM] szybet
disable it and try everything again


[6/29/2023 1:56 PM] mmathias_official
Still the same. I'll reboot the Kobo and try everything again. Just to be sure. Hold on...


[6/29/2023 1:57 PM] szybet
horribly weird


[6/29/2023 2:04 PM] mmathias_official
Still the same after rebooting.


[6/29/2023 2:04 PM] szybet
im trying


[6/29/2023 2:04 PM] szybet
to do it myself on my books


[6/29/2023 2:04 PM] mmathias_official
ok


[6/29/2023 2:08 PM] szybet
i'm missing something


[6/29/2023 2:08 PM] szybet
@tux-linux help


[6/29/2023 2:12 PM] szybet
```
kobo:/mnt/onboard/.adds/inkbox# ./explore_local_library.sh 
sh -x: applet not found
```


[6/29/2023 2:12 PM] szybet
in fact im stupid


[6/29/2023 2:14 PM] szybet
@mmathias so actually it needs to be `#!/bin/sh -x`


[6/29/2023 2:14 PM] szybet
change it


[6/29/2023 2:15 PM] szybet
also do this:
`echo true > /boot/flags/GUI_DEBUG`


[6/29/2023 2:15 PM] szybet
not in chrot


[6/29/2023 2:16 PM] mmathias_official
Ok, it says "Generating database" on the screen. No log output except the "QLayout:" messages so far.


[6/29/2023 2:16 PM] szybet
but it still doesnt show anything


[6/29/2023 2:16 PM] szybet
yea


[6/29/2023 2:16 PM] mmathias_official
Do I need to reboot when setting the debug flag?


[6/29/2023 2:17 PM] szybet
service restart


[6/29/2023 2:17 PM] mmathias_official
ok


[6/29/2023 2:21 PM] mmathias_official
kobo:/# 29/06/2023 @ 12:20:23 | toast: Displaying message 'Generating database'
kobo:/# 29/06/2023 @ 12:20:25 | MainWindow: Checking for available updates
29/06/2023 @ 12:20:25 | MainWindow: checkForUpdate: No update available.
29/06/2023 @ 12:20:26 | MainWindow: Setting initial brightness to 50
29/06/2023 @ 12:20:26 | functions: cinematicBrightness: Setting brightness to 50
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
QLayout: Attempting to add QLayout "" to localLibraryWidget "localLibraryWidget", which already has a layout
29/06/2023 @ 12:20:29 | toast: Displaying message 'Generating database'
29/06/2023 @ 12:20:30 | localLibraryWidget: Generating database


[6/29/2023 2:21 PM] mmathias_official
still running...


[6/29/2023 2:21 PM] szybet
im going to give you a modified inkbox binary


[6/29/2023 2:21 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkbox-25D4E


[6/29/2023 2:22 PM] szybet
send this file to your kobo in /kobo/ dir


[6/29/2023 2:23 PM] szybet
name it inkbox.bin before sending


[6/29/2023 2:23 PM] szybet
then `mount --bind /inkbox.bin /mnt/onboard/.adds/inkbox/inkbox-bin`


[6/29/2023 2:23 PM] szybet
then `killall inkbox-bin`


[6/29/2023 2:24 PM] szybet
then check if explore library file still has -x


[6/29/2023 2:24 PM] szybet
if yes, regenerate the library


[6/29/2023 2:24 PM] szybet
this will cause an error on the screen


[6/29/2023 2:26 PM] mmathias_official
Ok, hold on. I am out of space on /kobo


[6/29/2023 2:26 PM] szybet
weird?


[6/29/2023 2:26 PM] mmathias_official
Also, the logs came back with29/06/2023 @ 12:26:21 | localLibraryWidget: Reading database
29/06/2023 @ 12:26:22 | localLibraryWidget: Database is empty


[6/29/2023 2:27 PM] mmathias_official
unionfs         117G  113G     0 100% /kobo


[6/29/2023 2:27 PM] szybet
what did you sended there


[6/29/2023 2:27 PM] mmathias_official
Not much, my library are about 7 or 8 gigs.


[6/29/2023 2:27 PM] szybet
thats a lot


[6/29/2023 2:27 PM] szybet
well remove some books for now


[6/29/2023 2:27 PM] mmathias_official
kobo:/data/onboard# du -hs 
7.0G    .


[6/29/2023 2:28 PM] mmathias_official
Could the onboard file be to large?


[6/29/2023 2:30 PM] szybet
yep


[6/29/2023 2:30 PM] mmathias_official
I'll try resizing the file to make it smaller.


[6/29/2023 2:30 PM] szybet
it will remove all data


[6/29/2023 2:30 PM] mmathias_official
Yes, I know. That's ok, it's all backed up. 🙂


[6/29/2023 4:00 PM] mmathias_official
Wow, that's a lot of debug output now.


[6/29/2023 4:04 PM] szybet
no one ever tested 7 gb of books


[6/29/2023 4:04 PM] szybet
1gb maybe


[6/29/2023 4:04 PM] szybet
well post it


[6/29/2023 4:05 PM] mmathias_official
Well, it listed all books with


[6/29/2023 4:05 PM] mmathias_official
29/06/2023 @ 14:00:19 | localLibraryWidget: Argument for database creation


[6/29/2023 4:05 PM] mmathias_official
And now...


[6/29/2023 4:05 PM] mmathias_official
29/06/2023 @ 14:04:54 | localLibraryWidget: stdout of process: TEST2
TEST
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
Aborted


[6/29/2023 4:05 PM] szybet
thats good


[6/29/2023 4:05 PM] mmathias_official
Out of RAM, maybe?


[6/29/2023 4:05 PM] szybet
oh my god no


[6/29/2023 4:05 PM] szybet
maybe...


[6/29/2023 4:05 PM] tux_linux
No, bad code somewhere


[6/29/2023 4:05 PM] szybet
monitor ram while generating with `watch -n 0.1 free -h`


[6/29/2023 4:06 PM] mmathias_official
It's definitely using a lot of ram...


[6/29/2023 4:06 PM] mmathias_official
Mem:         247.1M       97.4M        3.0M           0      146.7M           0


[6/29/2023 4:07 PM] szybet
thats fine


[6/29/2023 4:07 PM] szybet
monitor it


[6/29/2023 4:07 PM] mmathias_official
ok


[6/29/2023 4:07 PM] szybet
what is the limit for linux arguments to a program


[6/29/2023 4:07 PM] tux_linux
1024 chars I think


[6/29/2023 4:07 PM] tux_linux
Oh no


[6/29/2023 4:07 PM] szybet
hehe


[6/29/2023 4:08 PM] szybet
XDD


[6/29/2023 4:08 PM] szybet
https://www.google.com/search?q=what+is+the+limit+for+linux+arguments+to+a+program


[6/29/2023 4:08 PM] tux_linux
Well, we need to have a file instead


[6/29/2023 4:08 PM] szybet
we can use xargs


[6/29/2023 4:08 PM] szybet
maybe


[6/29/2023 4:09 PM] tux_linux
No
It would redo the whole process for pdf and image files


[6/29/2023 4:09 PM] tux_linux
Iterate through a file list .. in a file


[6/29/2023 4:09 PM] szybet
sure


[6/29/2023 4:09 PM] szybet
first focus with matrix client please


[6/29/2023 4:09 PM] szybet
than this


[6/29/2023 4:09 PM] tux_linux
Ok


[6/29/2023 4:10 PM] mmathias_official
Ok, doesnt seem to be running out of ram


[6/29/2023 4:11 PM] mmathias_official
Done. RAM is back to normal.


[6/29/2023 4:11 PM] mmathias_official
total        used        free      shared  buff/cache   available
Mem:         247.1M       70.9M      122.4M           0       53.8M           0


[6/29/2023 4:11 PM] mmathias_official
I need to go, probably be online later

{Reactions}
👍 

[6/29/2023 4:12 PM] szybet
sure


[6/29/2023 4:14 PM] tux_linux
fractal probably won't compile


[6/29/2023 4:14 PM] tux_linux
it needs rust


[6/29/2023 4:14 PM] szybet
whats the problem with that :)


[6/29/2023 4:15 PM] tux_linux
```
~/fractal-legacy # apk add rustc
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/armv7/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/APKINDEX.tar.gz
ERROR: unable to select packages:
  rustc (no such package):
    required by: world[rustc]
~/fractal-legacy # apk add cargo
ERROR: unable to select packages:
  cargo (no such package):
    required by: world[cargo]
~/fractal-legacy # apk add rust
ERROR: unable to select packages:
  rust (no such package):
    required by: world[rust]
~/fractal-legacy
```


[6/29/2023 4:15 PM] tux_linux
and


[6/29/2023 4:15 PM] szybet
thats not how you install rust


[6/29/2023 4:15 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-38DCC.txt


[6/29/2023 4:15 PM] szybet
anyway


[6/29/2023 4:15 PM] szybet
https?


[6/29/2023 4:16 PM] szybet
i wanted that you try boost first


[6/29/2023 4:16 PM] tux_linux
even in web browser it says it doesn't exist


[6/29/2023 4:17 PM] szybet
is this emu or some other sh*t


[6/29/2023 4:18 PM] szybet
maybe try rust?


[6/29/2023 4:18 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8ED1F.png


[6/29/2023 4:18 PM] szybet
??????????


[6/29/2023 4:18 PM] szybet
och


[6/29/2023 4:18 PM] szybet
the arch


[6/29/2023 4:18 PM] szybet
oopsie


[6/29/2023 4:18 PM] tux_linux
AAAAAA

{Attachments}
/mnt/data/projects/git/conversations/media/image-8E0DC.png


[6/29/2023 4:18 PM] kuratius
Rustup will probably work anyway


[6/29/2023 4:18 PM] tux_linux
no


[6/29/2023 4:19 PM] szybet
?


[6/29/2023 4:19 PM] tux_linux
it already doesn't


[6/29/2023 4:19 PM] tux_linux
well just a lot of submodules


[6/29/2023 4:19 PM] szybet
yep


[6/29/2023 4:21 PM] szybet
try this


[6/29/2023 4:21 PM] szybet
`curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sed 's#/proc/self/exe#\/bin\/sh#g' | sh -s -- -y`


[6/29/2023 4:21 PM] szybet
https://github.com/rust-lang/rustup/issues/2700

{Embed}
https://github.com/rust-lang/rustup/issues/2700
`rustup-init.sh` fails to detect platform correctly under `docker b...
rustup-init.sh installs the incorrect rustc and other binaries because of a failure to detect arch. Problems: /proc/self/exe does not exist during docker build, so i686/386 etc is detected incorrec...
/mnt/data/projects/git/conversations/media/2700-A7A32


[6/29/2023 4:22 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-8C44E.txt


[6/29/2023 4:22 PM] szybet
can you give me a normal output


[6/29/2023 4:22 PM] szybet
i dont need more


[6/29/2023 4:23 PM] kuratius
Even if you get rust, the thing stopping you is that fractal depends on on a bunch of font libraries that are annoying


[6/29/2023 4:23 PM] tux_linux
it's at the top


[6/29/2023 4:24 PM] kuratius
pango in particular was annoying


[6/29/2023 4:24 PM] szybet
well so lets try the boost one


[6/29/2023 4:24 PM] tux_linux
I native compile it or not?


[6/29/2023 4:24 PM] szybet
@tux-linux how big is your /tmp there


[6/29/2023 4:25 PM] szybet
no, cross


[6/29/2023 4:25 PM] tux_linux
ok


[6/29/2023 4:25 PM] tux_linux
big enough


[6/29/2023 4:26 PM] szybet
so?


[6/29/2023 4:26 PM] szybet
`LANG=C curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -v`


[6/29/2023 4:26 PM] szybet
try this


[6/29/2023 4:27 PM] tux_linux
```
~/fractal-legacy # LANG=C curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -v

head: /proc/self/exe: Bad file descriptor
rustup: unknown platform bitness
info: downloading installer
curl: (22) The requested URL returned error: 404 
rustup: command failed: downloader https://static.rust-lang.org/rustup/dist/armv7-unknown-linux-musleabihf/rustup-init /tmp/tmp.NpAnkf/rustup-init armv7-unknown-linux-musleabihf
```


[6/29/2023 4:28 PM] tux_linux
```
~/fractal-legacy # LANG=C curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs |  sed 's#/proc/self/exe#\/bin\/sh#g'| sh -s -- -v
info: downloading installer
curl: (22) The requested URL returned error: 404 
rustup: command failed: downloader https://static.rust-lang.org/rustup/dist/armv7-unknown-linux-musleabihf/rustup-init /tmp/tmp.IdpjOm/rustup-init armv7-unknown-linux-musleabihf
~/fractal-legacy #
```


[6/29/2023 4:28 PM] szybet
you alread tried


[6/29/2023 4:29 PM] tux_linux
head: /proc/self/exe: Bad file descriptor
I removed this


[6/29/2023 4:29 PM] szybet
i mean you used the other solution


[6/29/2023 4:31 PM] tux_linux
boost finished compiling, how do i check if it actually used the correct compiler


[6/29/2023 4:31 PM] szybet
`file` on a library


[6/29/2023 4:31 PM] szybet
file


[6/29/2023 4:32 PM] tux_linux
it has been compiled for aarch64


[6/29/2023 4:32 PM] tux_linux
so doesn't work


[6/29/2023 4:32 PM] tux_linux
(my native arch is aarch64)


[6/29/2023 4:32 PM] szybet
?


[6/29/2023 4:33 PM] szybet
youy need to specify the toolchain


[6/29/2023 4:33 PM] tux_linux
i used this


[6/29/2023 4:33 PM] szybet
and have it in path?


[6/29/2023 4:33 PM] tux_linux
i specified the toolchain


[6/29/2023 4:33 PM] tux_linux
yes


[6/29/2023 4:33 PM] szybet
idk try some more


[6/29/2023 4:33 PM] szybet
or use a normal pc


[6/29/2023 4:33 PM] tux_linux
what difference will it make


[6/29/2023 4:34 PM] tux_linux
gomuks is fine


[6/29/2023 4:34 PM] szybet
no.


[6/29/2023 4:34 PM] szybet
try some more...


[6/29/2023 4:34 PM] szybet
to rust: what even is musleabihf


[6/29/2023 4:35 PM] szybet
hf


[6/29/2023 4:35 PM] szybet
in musl


[6/29/2023 4:35 PM] tux_linux
it's the target for epubtool


[6/29/2023 4:35 PM] tux_linux
that wasn't a good sign anyway

{Attachments}
/mnt/data/projects/git/conversations/media/image-9C082.png


[6/29/2023 4:35 PM] szybet
no


[6/29/2023 4:35 PM] szybet
listen


[6/29/2023 4:36 PM] szybet
kirigami doesnt use opengl i think nowhere


[6/29/2023 4:36 PM] szybet
that its needed for 100%


[6/29/2023 4:36 PM] szybet
only kirigaim extra needs it


[6/29/2023 4:36 PM] szybet
that kazv doesnt use


[6/29/2023 4:37 PM] tux_linux
well, unless it's normal, the libs compiled won't work


[6/29/2023 4:37 PM] szybet
we could need boost at some point anyway


[6/29/2023 4:37 PM] szybet
try more...


[6/29/2023 4:37 PM] tux_linux
what more


[6/29/2023 4:37 PM] szybet
to compile it


[6/29/2023 4:38 PM] szybet
for what do you need rust


[6/29/2023 4:38 PM] kuratius
Hardware float


[6/29/2023 4:38 PM] szybet
there


[6/29/2023 4:38 PM] szybet
i know but still sounded weird


[6/29/2023 4:39 PM] tux_linux
[build@inkbox boost]$ ./b2 --prefix=~/boostForBBB/     --without-context     --without-coroutine     --without-fiber     --without-python     --address-model=32     --stagedir=libsithink     -j8     -toolset=arm-kobo-linux-gnueabihf-g++     -threading=multi
Performing configuration checks

    - default address-model    : 64-bit [1]
    - default architecture     : arm [1]

Building the Boost C++ Libraries.

this is already wrong


[6/29/2023 4:40 PM] szybet
try cmake


[6/29/2023 4:40 PM] tux_linux
how


[6/29/2023 4:42 PM] tux_linux
```
gcc.compile.c++ bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/dlmalloc.o

    "g++"   -fvisibility-inlines-hidden -fPIC -pthread -O3 -finline-functions -Wno-inline -Wall -fvisibility=hidden  -DBOOST_ALL_NO_LIB=1 -DBOOST_CONTAINER_DYN_LINK=1 -DNDEBUG   -I"."  -c -o "bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/dlmalloc.o" "libs/container/src/dlmalloc.cpp"

gcc.compile.c++ bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/global_resource.o

    "g++"   -fvisibility-inlines-hidden -fPIC -pthread -O3 -finline-functions -Wno-inline -Wall -fvisibility=hidden  -DBOOST_ALL_NO_LIB=1 -DBOOST_CONTAINER_DYN_LINK=1 -DNDEBUG   -I"."  -c -o "bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/global_resource.o" "libs/container/src/global_resource.cpp"

gcc.compile.c++ bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/monotonic_buffer_resource.o

    "g++"   -fvisibility-inlines-hidden -fPIC -pthread -O3 -finline-functions -Wno-inline -Wall -fvisibility=hidden  -DBOOST_ALL_NO_LIB=1 -DBOOST_CONTAINER_DYN_LINK=1 -DNDEBUG   -I"."  -c -o "bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/monotonic_buffer_resource.o" "libs/container/src/monotonic_buffer_resource.cpp"

gcc.compile.c++ bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/unsynchronized_pool_resource.o

    "g++"   -fvisibility-inlines-hidden -fPIC -pthread -O3 -finline-functions -Wno-inline -Wall -fvisibility=hidden  -DBOOST_ALL_NO_LIB=1 -DBOOST_CONTAINER_DYN_LINK=1 -DNDEBUG   -I"."  -c -o "bin.v2/libs/container/build/gcc-12/release/threading-multi/visibility-hidden/unsynchronized_pool_resource.o" "libs/container/src/unsynchronized_pool_resource.cpp"
```
`--toolset`
these things never work
it's cursed


[6/29/2023 4:44 PM] szybet
what even is this


[6/29/2023 4:44 PM] tux_linux
`-d2` added to b2 command


[6/29/2023 4:44 PM] szybet
what is d2


[6/29/2023 4:45 PM] tux_linux
debug


[6/29/2023 4:45 PM] tux_linux
go figure what 2 means


[6/29/2023 4:45 PM] szybet
XD


[6/29/2023 5:18 PM] ninuje
Ye olde bitdepth issue (probably 8 vs. 32). Or a broken nickel startup script. (or a broken <insert app here> startup script that then breaks a nickel hot start)


[6/29/2023 5:18 PM] tux_linux
well, why does it still show perfectly but it only takes some part of the screen?


[6/29/2023 5:19 PM] szybet
i fixed it thin by coppying koreader `nickel.sh`


[6/29/2023 5:19 PM] szybet
still, i wont support every nickel change and version


[6/29/2023 5:26 PM] ninuje
Because 32 == 8 * 4 😉


[6/29/2023 5:36 PM] tux_linux
hm ok...


[6/29/2023 5:36 PM] tux_linux
interesting


[6/29/2023 6:50 PM] szybet
inkbox works without onboard file


[6/29/2023 6:50 PM] szybet
🥴


[6/29/2023 6:50 PM] tux_linux
yes?


[6/29/2023 6:50 PM] szybet
yes


[6/29/2023 6:50 PM] szybet
i tested it


[6/29/2023 6:51 PM] tux_linux
you went into usbms with an ssh session on /data/onboard?


[6/29/2023 6:51 PM] szybet
also kazv compiled


[6/29/2023 6:51 PM] tux_linux
hm ok


[6/29/2023 6:51 PM] szybet
no, i removed onboard


[6/29/2023 6:51 PM] tux_linux
good?


[6/29/2023 6:51 PM] szybet
maybe


[6/29/2023 6:51 PM] tux_linux
well, it can work


[6/29/2023 6:53 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Category:User_applications
you can add sanki, feathernotes, rssguard there with screenshots if you want

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Category:User_applications
Index.php


[6/29/2023 6:53 PM] tux_linux
create a new page for each of them and begin it with `[[Category:User applications]]`


[6/29/2023 6:53 PM] szybet
maybe in the future


[6/29/2023 6:54 PM] szybet
im too lazy for docs


[6/29/2023 7:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/strace-3260E.txt


[6/29/2023 7:29 PM] szybet
kirigami is missing


[6/29/2023 7:49 PM] tux_linux
gh is down


[6/29/2023 7:49 PM] tux_linux
great


[6/29/2023 7:50 PM] tux_linux
well ok, gitlab is useful there


[6/29/2023 7:50 PM] tux_linux
hehe


[6/29/2023 8:06 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=ITerm
ITerm docs are pretty much complete

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=ITerm
Index.php


[6/29/2023 8:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/strace-7F268.txt


[6/29/2023 8:15 PM] szybet
more detailed strace


[6/29/2023 8:16 PM] szybet
help anyone?


[6/29/2023 8:21 PM] tux_linux
https://man7.org/linux/man-pages/man2/madvise.2.html


[6/29/2023 8:21 PM] tux_linux
probably means kernel doesn't support it


[6/29/2023 8:21 PM] tux_linux
or glibc


[6/29/2023 8:21 PM] szybet
what


[6/29/2023 8:22 PM] tux_linux
madvise(0x72365000, 262144, MADV_DONTNEED) = -1 ENOSYS (Function not implemented)


[6/29/2023 8:22 PM] szybet
what


[6/29/2023 8:22 PM] tux_linux
ENOSYS (Function not implemented)


[6/29/2023 8:22 PM] szybet
no


[6/29/2023 8:22 PM] tux_linux
well what then


[6/29/2023 8:23 PM] szybet
piece of shit


[6/29/2023 8:23 PM] [matrix] tux-linux-kobo
gomuks


[6/29/2023 8:25 PM] szybet
what do you need to do with rust


[6/29/2023 8:26 PM] szybet
is it indendent


[6/29/2023 8:26 PM] szybet
or in a build tool


[6/29/2023 8:26 PM] [matrix] tux-linux-kobo
idk


[6/29/2023 8:59 PM] tux_linux
for ITerm now you can set a font size, e.g. 5, to `.apps-data/ITerm/.terminal_font_size` and it will set it
default is 7


[6/29/2023 9:19 PM] szybet
@tux-linux do you use qemu with alpine musl for the xorg thing?


[6/29/2023 9:20 PM] szybet
or how


[6/29/2023 9:20 PM] szybet
tldr i want access to it


[6/29/2023 9:20 PM] szybet
easiest would be ssh


[6/29/2023 9:20 PM] szybet
harderst would be to replicate the setup


[6/29/2023 9:21 PM] tux_linux
install qemu-user-static on debian


[6/29/2023 9:22 PM] tux_linux
then


[6/29/2023 9:22 PM] szybet
why on debian


[6/29/2023 9:22 PM] szybet
can be a container debian


[6/29/2023 9:22 PM] tux_linux
well arch might work too


[6/29/2023 9:22 PM] tux_linux
basically you have to have a binary named `qemu-arm-static`


[6/29/2023 9:23 PM] tux_linux
then
```
wget https://dl-cdn.alpinelinux.org/alpine/v3.10/releases/armv7/alpine-minirootfs-3.10.9-armv7.tar.gz
mkdir alpine
cd alpine
tar -xvf ../alpine-minirootfs-3.10.9-armv7.tar.gz
```


[6/29/2023 9:23 PM] tux_linux
then


[6/29/2023 9:23 PM] tux_linux
```
sudo mount -t devtmpfs devtmpfs dev
sudo mount -t tmpfs tmpfs tmp
sudo mount -t tmpfs tmpfs run
sudo mount -t sysfs sysfs sys
sudo mount -t proc proc proc
sudo mount --bind /etc/resolv.conf etc/resolv.conf
```


[6/29/2023 9:24 PM] tux_linux
then


[6/29/2023 9:24 PM] tux_linux
```
cp /usr/bin/qemu-arm-static usr/bin
sudo chroot . /usr/bin/qemu-arm-static /bin/sh
```
profit


[6/29/2023 9:25 PM] szybet
if i will get rust to work, will you try fractal?


[6/29/2023 9:25 PM] tux_linux
yes
i don't really see how you would get it to work but surprise me


[6/29/2023 9:25 PM] szybet
im desperate at this point


[6/29/2023 9:25 PM] tux_linux
you never tried gomuks


[6/29/2023 9:26 PM] szybet
changing menus by keys on the keyboard on a touchscreen is stupid


[6/29/2023 9:27 PM] tux_linux
you should still try it


[6/29/2023 9:34 PM] szybet
```
21:33 szybet@hyperbookszyb /home/build/inkbox/alpine
% sudo chroot . /usr/bin/qemu-arm-static /bin/sh
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
[1]    243637 segmentation fault  sudo chroot . /usr/bin/qemu-arm-static /bin/sh
```


[6/29/2023 9:35 PM] tux_linux
https://github.com/docker/buildx/issues/1170 ?

{Embed}
https://github.com/docker/buildx/issues/1170
qemu: uncaught target signal 11 (Segmentation fault) - core dumped ...
This is follow-up of issue #1169 For repro steps follow #1169 Using latest image as mentioned in https://docs.docker.com/buildx/working-with-buildx/ didn't solve the issue. docker run --privile...
/mnt/data/projects/git/conversations/media/1170-725F7


[6/29/2023 9:35 PM] tux_linux
or do you have an rpi?


[6/29/2023 9:35 PM] szybet
i dont run in docker


[6/29/2023 9:36 PM] tux_linux
.


[6/29/2023 9:36 PM] szybet
a 2005 chinese one, no thank you


[6/29/2023 9:36 PM] tux_linux
you can try a debian vm
**vm**


[6/29/2023 9:36 PM] tux_linux
or compile via sshfs on kobo


[6/29/2023 9:36 PM] tux_linux
good luck with 256m of ram


[6/29/2023 9:39 PM] tux_linux
or maybe create a swap file and access it via sshfs


[6/29/2023 9:39 PM] tux_linux
unlimited ram 🥴


[6/29/2023 9:42 PM] szybet
armv7l-linux-musleabihf-cross in kernel repo doesnt have a sysroot?


[6/29/2023 9:42 PM] tux_linux
idk
probably not a good idea
no package manager


[6/29/2023 9:55 PM] szybet
xorg in gui rootfs?


[6/29/2023 9:55 PM] tux_linux
?


[6/29/2023 9:55 PM] szybet
not with musl


[6/29/2023 9:56 PM] szybet
fuck musl


[6/29/2023 9:56 PM] szybet
https://rust-lang.github.io/rustup-components-history/armv7-unknown-linux-musleabihf.html


[6/29/2023 9:56 PM] szybet
its not supported


[6/29/2023 9:56 PM] tux_linux
how did epubtool compile then


[6/29/2023 9:56 PM] szybet
cross-rs makes it work with cross compilation, but idk how to sysroot


[6/29/2023 9:56 PM] szybet
.


[6/29/2023 9:56 PM] tux_linux
oh ok


[6/29/2023 9:56 PM] szybet
so


[6/29/2023 9:56 PM] szybet
?


[6/29/2023 9:56 PM] szybet
in gui rootfs


[6/29/2023 9:56 PM] tux_linux
what
NO


[6/29/2023 9:57 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd/common/startx
you want to rewrite this?


[6/29/2023 9:57 PM] szybet
i want matrix client


[6/29/2023 9:59 PM] tux_linux
try gomuks


[6/29/2023 9:59 PM] tux_linux
how often do you even switch channels on discord


[6/29/2023 9:59 PM] tux_linux
just download it on your computer and see what it's like first maybe


[6/29/2023 10:17 PM] szybet
endgame


[6/29/2023 10:17 PM] szybet
`N: Skipping acquire of configured file 'restricted/binary-musl-linux-armhf/Packages' as repository 'http://ports.ubuntu.com/ubuntu-ports focal InRelease' doesn't support architecture "musl-linux-armhf"`


[6/29/2023 10:18 PM] tux_linux
try to do something else


[6/29/2023 10:22 PM] tux_linux
https://codeberg.org/yarmo/delightful-matrix

{Embed}
https://codeberg.org/yarmo/delightful-matrix
delightful-matrix
A curated list of delightful Matrix resources, implementations and clients.
/mnt/data/projects/git/conversations/media/35799-9625de3c8cf4d8252a23806bc26a44bc-A7D3F


[6/29/2023 10:23 PM] szybet
i was there yestarday


[6/29/2023 10:26 PM] tux_linux
maybe change the protocol? look for an irc client? idk


[6/29/2023 10:26 PM] szybet
irc


[6/29/2023 10:27 PM] tux_linux
yes


[6/29/2023 10:27 PM] szybet
https://tenor.com/view/cat-cough-coughing-sneezing-gif-23545528

{Embed}
https://tenor.com/view/cat-cough-coughing-sneezing-gif-23545528
/mnt/data/projects/git/conversations/media/cat-cough-A9EA4.png


[6/29/2023 10:27 PM] tux_linux
https://www.linuxlinks.com/communi-simple-qt-based-irc-client/
first thing I got upon

{Embed}
Steve Emms
https://www.linuxlinks.com/communi-simple-qt-based-irc-client/
Communi - simple Qt-based IRC client - LinuxLinks
Communi is an IRC client for desktop environments based on Qt and the Communi IRC framework. IRC (Internet Relay Chat protocol) is a simple text-based communication protocol.
/mnt/data/projects/git/conversations/media/Communi-8C0AB.png


[6/29/2023 10:29 PM] szybet
irc is bad


[6/29/2023 10:30 PM] tux_linux
try to compile neochat on debian vm + alpine chroot


[6/29/2023 10:30 PM] tux_linux
with built-in alpine qt


[6/29/2023 10:30 PM] tux_linux
or something else that uses qt


[6/29/2023 10:30 PM] tux_linux
it can work


[6/29/2023 10:30 PM] tux_linux
it can not work


[6/29/2023 10:30 PM] szybet
the problem is opengl


[6/29/2023 10:30 PM] szybet
and fucked up qml


[6/29/2023 10:30 PM] tux_linux
alpine has mesa 😉


[6/29/2023 10:30 PM] szybet
still no


[6/29/2023 10:31 PM] tux_linux
can run chromium


[6/29/2023 10:36 PM] tux_linux
https://mail-index.netbsd.org/netbsd-bugs/2013/08/29/msg034018.html
also I stumbled upon this again and it still impresses me


[6/29/2023 10:50 PM] tux_linux
https://www.reddit.com/r/ProgrammerHumor/comments/14m9jad/whyrubitin/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button

{Embed}
https://www.reddit.com/r/ProgrammerHumor/comments/14m9jad/whyrubitin/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button
r/ProgrammerHumor - whyRubItIn
4,224 votes and 94 comments so far on Reddit
/mnt/data/projects/git/conversations/media/yki7tbpwhz8b1-C5D81.jpg


[6/30/2023 6:13 PM] kuratius
apparently kindles have their serial port between the screen and board, so you need to remove the entire board to get to it


[6/30/2023 6:13 PM] kuratius
https://old.reddit.com/r/ereader/comments/14gbglg/inkbox_os_20_opensource_os_for_some_kobo_kindle/jq04mpr/

{Embed}
https://old.reddit.com/r/ereader/comments/14gbglg/inkbox_os_20_opensource_os_for_some_kobo_kindle/jq04mpr/
r/ereader - Comment by u/derkenblosh on ”InkBox OS 2.0 (open-source...
26 votes and 10 comments so far on Reddit
/mnt/data/projects/git/conversations/media/mGoo9stgGvIVIC6DUIdRJ2rYMLO0HENBgtSQ6WNgHN-60811.jpg


[7/1/2023 7:39 PM] szybet
you didnt tested my mini image


[7/1/2023 7:39 PM] szybet
:(


[7/1/2023 7:41 PM] szybet
better than nothing


[7/1/2023 8:25 PM] tux_linux
I will


[7/1/2023 10:27 PM] tux_linux
@Szybet convince him to install inkbox!! Don't have time to figure out if it's an A or C


[7/1/2023 10:27 PM] tux_linux
https://www.reddit.com/r/kobo/comments/14o1j8x/i_can_confirm_the_kobo_nia_has_an_internal_sd_card/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button

{Embed}
https://www.reddit.com/r/kobo/comments/14o1j8x/i_can_confirm_the_kobo_nia_has_an_internal_sd_card/?utm_source=share&utm_medium=android_app&utm_name=androidcss&utm_term=1&utm_content=share_button
r/kobo - I can confirm the kobo Nia has an internal SD card
15 votes and 0 comments so far on Reddit


[7/1/2023 10:32 PM] szybet
done

{Reactions}
👍 

[7/1/2023 10:33 PM] szybet
The pmic is good, but i'm not sure about the code below


[7/1/2023 10:33 PM] szybet
it says a B but maybe in the wrong place


[7/1/2023 10:58 PM] [matrix] Szybet
The bot is dead


[7/1/2023 10:58 PM] szybet
Well it was fore sure


[7/1/2023 10:59 PM] szybet
This post got more upvotes than sanki 🫡

{Reactions}
🥴 

[7/1/2023 11:13 PM] kuratius
@Szybet since it should only be a few lines, can you add an option for the script to check for a specifically named image file (like originalNiaFirmware.img and overwrite the relevant section of the inkbox image so that people can use their original waveform if it is present?`)


[7/1/2023 11:13 PM] kuratius
just since it seems easy


[7/1/2023 11:14 PM] kuratius
otherwise I can do a PR if you dont have time for it


[7/1/2023 11:14 PM] kuratius
are the offsets different between reader models?


[7/1/2023 11:23 PM] tux_linux
🧐🥴


[7/1/2023 11:23 PM] kuratius
dd command with offsets is easy


[7/1/2023 11:23 PM] tux_linux
It's doable but I don't know if it will work for all devices


[7/1/2023 11:24 PM] tux_linux
Depends
If you write to a file only it will overwrite the whole file, it needs to be a block device
Which is the case
Still


[7/1/2023 11:24 PM] kuratius
add a check for the nia for now, and maybe other devices where you know where it is stored


[7/1/2023 11:24 PM] kuratius
you can overwrite only parts of a file with dd I think


[7/1/2023 11:24 PM] kuratius
I dont see why that wouldnt work


[7/1/2023 11:25 PM] tux_linux
Well, from my experience you can't


[7/1/2023 11:25 PM] tux_linux
Or I don't use it the right way


[7/1/2023 11:25 PM] tux_linux
It works for block devices


[7/1/2023 11:26 PM] kuratius
like for example "copy the first 1000 bytes of file one to file 2, starting at byte 0" or "copy the first 1000 bytes of file 1 to file 2, starting at byte X"


[7/1/2023 11:26 PM] kuratius
I dont see how that is different for a block device or a file


[7/1/2023 11:27 PM] andi15701
well, just keep in mind, that all that near mainline stuff reads waveform from file


[7/1/2023 11:28 PM] andi15701
including the clara kernel


[7/1/2023 11:28 PM] tux_linux
Well I remember once writing to an image file and it was to flash a kernel, it overwrote the whole file and replaced its contents with the kernel image only


[7/1/2023 11:28 PM] kuratius
i.e. instead of from the unpartitioned block at the beginning?


[7/1/2023 11:28 PM] tux_linux
Partition


[7/1/2023 11:28 PM] tux_linux
vfat


[7/1/2023 11:28 PM] tux_linux
Usually


[7/1/2023 11:29 PM] tux_linux
Depends?


[7/1/2023 11:29 PM] andi15701
correct


[7/1/2023 11:29 PM] andi15701
pmOS extracts that on first boot from the unpartitioned space


[7/1/2023 11:30 PM] andi15701
also the clara kernel used in inkbox uses a regular file

{Reactions}
👍 

[7/2/2023 8:24 AM] szybet
as said, its not that easy, based on the device, kernel soo


[7/2/2023 8:24 AM] szybet
¯\_(ツ)_/¯


[7/2/2023 11:19 AM] szybet
inkbox installer, if it ever will exist will do that


[7/2/2023 4:17 PM] tux_linux
@Szybet do I package qt-games as a single user app or as multiple user apps?


[7/2/2023 4:17 PM] szybet
if its easier - than many


[7/2/2023 4:17 PM] szybet
if its not in any way, then in one


[7/2/2023 4:18 PM] tux_linux
I will have to write a selector for it


[7/2/2023 4:18 PM] szybet
tldr doesnt matter do as its easier


[7/2/2023 4:18 PM] tux_linux
ok


[7/2/2023 6:11 PM] szybet
what do i do if audio icon shifts the screen


[7/2/2023 6:11 PM] szybet
again


[7/2/2023 6:11 PM] szybet
on the status bar


[7/2/2023 7:04 PM] tux_linux
picture?


[7/2/2023 7:05 PM] szybet
not needed


[7/2/2023 7:05 PM] szybet
simply shifted screen


[7/2/2023 7:05 PM] tux_linux
i would still need a picture
`fbgrab /tmp/screen.png; scp /tmp/screen.png szybet@ip.address.here.0:/tmp`


[7/2/2023 7:06 PM] tux_linux
thanks


[7/3/2023 1:37 AM] tux_linux
@Kuratius (or someone else) I am trying to learn derivatives and integrals before next school year begins because my math skills aren't always up to the task on time for exams based on my experience
Do you have an idea on how I could implement them in InkBox while learning them at the same time? Thanks


[7/3/2023 8:52 AM] kuratius
PID regulator
Eink equation of motion (only interesting for making a simulator)
Audio processing


Honestly the most difficult parts for you are probably not the parts you'd find useful for implementing in inkbox.
Most people struggle with analytical integration, but computers can do numerical integrals


[7/3/2023 9:05 AM] kuratius
Maybe a weighted integral might be useful for some of the statistics stuff
For the time being just learn how to take derivatives in sympy and integrate in sage or something, should be more immediately useful for checking your homework


[7/3/2023 9:22 AM] kuratius
If you want a moderately difficult bit of physics homework, 
1. Derive this (hint: adding forces) 
2. Solve it for the position as a function of time

If you succeed I have some ideas for stuff it could be used for
Solution is in the eink thread

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230703-091343_Squid-1C1EF.png


[7/3/2023 11:56 AM] kuratius
If this is too difficult then just do 1) and I'll walk you through everything else (solving the differential equation, sympy stuff, etc). Also let me know if any of the other topics interest you more
You can probably see it as preparation for a presentation about  a topic like this, idk about the Canadian school system but in Germany you can do 1 Presentation per subject that counts like an exam in terms of grades


[7/3/2023 11:58 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-097BD.png


[7/3/2023 11:58 AM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[7/3/2023 12:07 PM] kuratius
Schrödinger's shell


[7/3/2023 12:10 PM] szybet
schrodinger's fish


[7/3/2023 12:10 PM] kuratius
Fish?


[7/3/2023 12:16 PM] szybet
https://fishshell.com

{Embed}
https://fishshell.com/
fish shell
A smart and user-friendly command line shell


[7/3/2023 1:25 PM] tux_linux
Thanks, I will look into that and the rest that you have sent


[7/3/2023 1:45 PM] tux_linux
fish mate!!


[7/3/2023 1:45 PM] tux_linux
how did that even happen


[7/3/2023 1:47 PM] szybet
i'm trying to port nuttx 6 to 12


[7/3/2023 1:48 PM] szybet
it runs on makefiles


[7/3/2023 1:48 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[7/3/2023 1:51 PM] szybet
https://github.com/CryFeiFei/Reader

{Embed}
https://github.com/CryFeiFei/Reader
GitHub - CryFeiFei/Reader: Reader for PDF，use Qt5 and Poppler
Reader for PDF，use Qt5 and Poppler. Contribute to CryFeiFei/Reader development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/Reader-53D19


[7/3/2023 1:51 PM] szybet
@tux-linux try

{Reactions}
👍 

[7/3/2023 7:47 PM] kuratius
@tux-linux Have you worked with sums and limits before?


[7/3/2023 7:47 PM] kuratius
Basically all you need to start with derivatives and integrals, the rest is practice and memorization


[7/3/2023 7:51 PM] kuratius
Simple exercise: From a suitable definition of the derivative as limit of [f(x+h)-f(x)]/h for h approaching zero ( h->0) find the limit for f(x)=x^2


[7/3/2023 10:03 PM] tux_linux
Nope, will need to go through that too


[7/3/2023 10:17 PM] kuratius
https://brilliant.org/wiki/epsilon-delta-definition-of-a-limit/

{Embed}
https://brilliant.org/wiki/epsilon-delta-definition-of-a-limit/
Epsilon-Delta Definition of a Limit | Brilliant Math & Science Wiki
In calculus, the ...
/mnt/data/projects/git/conversations/media/default-FBA79.png

{Reactions}
👍 

[7/3/2023 10:20 PM] kuratius
For sums you need the definition of the limit of a series, which is similar except instead of being within delta the term number has to greater than some value (so if you want to be within 0.001 of the limit, you'd have to prove that there exists some number N_epislon where if n>N_epsilon then all series terms a_n are within an epsilon of the limit. 0.001 is an example, the proof has to work for arbitrarily small distances)


[7/4/2023 3:37 PM] kuratius
Btw

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230704-153652_Discord-BE717.png


[7/4/2023 3:51 PM] tux_linux
Well, the current team doesn't seem to have much interest in our project


[7/4/2023 3:52 PM] kuratius
It's just weird that the reaction was different


[7/4/2023 3:52 PM] tux_linux
idk


[7/4/2023 4:33 PM] szybet
try it


[7/4/2023 4:33 PM] szybet
copy the email once more...


[7/4/2023 5:50 PM] szybet
https://www.mobileread.com/forums/showthread.php?t=354783

{Embed}
https://www.mobileread.com/forums/showthread.php?t=354783
RSS guard ported to kobo - MobileRead Forums
RSS guard ported to kobo Kobo Developer's Corner


[7/4/2023 6:08 PM] tux_linux
Cool


[7/4/2023 8:09 PM] [matrix] tux-linux
https://github.com/atlas-engineer/nyxt

{Embed}
https://github.com/atlas-engineer/nyxt
GitHub - atlas-engineer/nyxt: Nyxt - the hacker's browser.
Nyxt - the hacker's browser. Contribute to atlas-engineer/nyxt development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/nyxt-56848


[7/4/2023 8:10 PM] [matrix] tux-linux
good browservice candidate?


[7/4/2023 8:10 PM] szybet
not usable by mouse / touch?


[7/4/2023 8:11 PM] [matrix] tux-linux
hm


[7/4/2023 8:11 PM] [matrix] tux-linux
well if it's using browservice there should be no need for touch interaction except in the browser window


[7/4/2023 8:12 PM] szybet
i dont understand


[7/4/2023 8:12 PM] szybet
Tolino Vision 4 HD is which kobo clone?


[7/4/2023 8:13 PM] [matrix] tux-linux
idk


[7/4/2023 8:13 PM] [matrix] tux-linux
you never used browservice?


[7/4/2023 8:13 PM] szybet
not really


[7/4/2023 8:13 PM] szybet
https://www.kleinanzeigen.de/s-anzeige/tolino-fuer-bastler/2470997055-285-2147

{Embed}
https://www.kleinanzeigen.de/s-anzeige/tolino-fuer-bastler/2470997055-285-2147
Tolino für Bastler
Tolino für Bastler
Sie können sich den Tolino gerne anschauen kommen.
Beim Lesen erschien dieser...,Tolino für Bastler in Duisburg - Duisburg-Mitte
/mnt/data/projects/git/conversations/media/09c1a2a0-998b-4b2c-be37-f64eac50922f-7561E


[7/4/2023 8:13 PM] szybet
what is this tolino & what kobo clone is it


[7/4/2023 8:14 PM] [matrix] tux-linux
maybe a clara clone?


[7/4/2023 8:14 PM] [matrix] tux-linux
**maybe**


[7/4/2023 8:14 PM] szybet
from what i'm trying to google, every tolino is a clara clone -_-


[7/4/2023 8:15 PM] [matrix] tux-linux
ask andi maybe


[7/4/2023 8:15 PM] szybet
he ignores me when i talk about tolinos


[7/4/2023 8:16 PM] tux_linux
@andi do you know something about it?


[7/4/2023 8:18 PM] andi15701
i am looking it up


[7/4/2023 8:20 PM] andi15701
well, older tolinos typically have a homepad


[7/4/2023 8:20 PM] andi15701
as a difference


[7/4/2023 8:21 PM] andi15701
so some a/d in the msp430 behind it


[7/4/2023 8:21 PM] szybet
a list of tolino -> kobo would be cool


[7/4/2023 8:22 PM] andi15701
from what I know: kobo clara hd = tolino shine3 with 6sll, same pcb


[7/4/2023 8:22 PM] andi15701
kobo libra h2o = tolino vision 5 with 6sll


[7/4/2023 8:22 PM] szybet
well i'm most interested what tolinos models are from the kobo nia and kobo aura


[7/4/2023 8:22 PM] szybet
for possible screen compability


[7/4/2023 8:22 PM] andi15701
kobo glo hd very similar to shine 2


[7/4/2023 8:23 PM] andi15701
perhaps some tolino page


[7/4/2023 8:26 PM] kuratius
Tolino page 2 is supposed to be nia, but tolino page claims 512 mb ram


[7/4/2023 8:27 PM] andi15701
well, ram chip might be pin-compatible


[7/5/2023 8:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230705_201636-B7E8A.jpg


[7/5/2023 8:17 PM] tux_linux
Nooo


[7/5/2023 8:17 PM] szybet
:(


[7/5/2023 8:17 PM] szybet
well then a built in app in apps?


[7/5/2023 8:17 PM] szybet
+ a button in the new reader?


[7/5/2023 8:17 PM] tux_linux
Probably better


[7/5/2023 8:18 PM] tux_linux
No, better to keep it separate


[7/5/2023 8:18 PM] szybet
this is integrated in inkbox, not a seprate app


[7/5/2023 8:18 PM] szybet
what


[7/5/2023 8:18 PM] tux_linux
I mean in a built in "app"


[7/5/2023 8:18 PM] tux_linux
Even if it's just a class


[7/5/2023 8:18 PM] szybet
i want to be able to listen to music while reading


[7/5/2023 8:18 PM] tux_linux
Well ok then


[7/5/2023 8:18 PM] tux_linux
But your phone exists


[7/5/2023 8:19 PM] tux_linux
Also I will not accept those screen margins


[7/5/2023 8:19 PM] tux_linux
Just a warning


[7/5/2023 8:19 PM] szybet
dont try to convince me about something i have been working and wanting for a year now


[7/5/2023 8:20 PM] szybet
it simply sucks to have the cable go somewhere and ugh


[7/5/2023 8:20 PM] szybet
um idk its an old 1.9 build


[7/5/2023 8:20 PM] tux_linux
Ok


[7/5/2023 8:20 PM] tux_linux
Well, stick to the official screen margins


[7/5/2023 8:20 PM] szybet
i dont understand anyway

in reader and where else?


[7/5/2023 8:20 PM] tux_linux
You said in an app


[7/5/2023 8:20 PM] tux_linux
Maybe someone listens to podcasts


[7/5/2023 8:21 PM] szybet
i didn't planned to shift also

also we will see. i will make it customisable if you force me to


[7/5/2023 8:21 PM] szybet
in app too


[7/5/2023 8:21 PM] tux_linux
Ok


[7/5/2023 8:21 PM] szybet
both places will be only visible if audio is enabled


[7/5/2023 8:21 PM] tux_linux
Ok


[7/5/2023 8:21 PM] tux_linux
Maybe just do the user app for now because we might scrap the whole reader class


[7/5/2023 8:22 PM] tux_linux
*built in app


[7/5/2023 8:22 PM] szybet
its an built in dialog


[7/5/2023 8:22 PM] szybet
in inkbox


[7/5/2023 8:22 PM] tux_linux
Ok


[7/5/2023 8:22 PM] szybet
then where do i put it...


[7/5/2023 8:22 PM] szybet
you are finally convinced to do this?


[7/5/2023 8:23 PM] tux_linux
Make a file selector and then put the dialog full screen


[7/5/2023 8:23 PM] tux_linux
No


[7/5/2023 8:23 PM] szybet
what


[7/5/2023 8:23 PM] tux_linux
🥴


[7/5/2023 8:23 PM] szybet
then what


[7/5/2023 8:24 PM] tux_linux
Well, in the audio app, spawn some file chooser or a list of files in qlistview, let user select which one he wants to listen to and then make the play/pause dialog full screen


[7/5/2023 8:25 PM] szybet
there is a queue


[7/5/2023 8:26 PM] szybet
and i'm not interested in the full screen thing


[7/5/2023 8:26 PM] szybet
maybe in the future


[7/5/2023 8:26 PM] szybet
where do i put it in the second place


[7/5/2023 8:26 PM] szybet
and what were you talking about the built in app class


[7/5/2023 8:26 PM] szybet
continue


[7/5/2023 10:24 PM] szybet
well answer maybe


[7/5/2023 10:57 PM] tux_linux
well, keep it on the home screen


[7/5/2023 10:57 PM] tux_linux
we can probably manage something


[7/5/2023 10:58 PM] szybet
how, its shifted


[7/5/2023 10:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/1Y5ABWun3ssOa5Io-18076.png


[7/5/2023 10:58 PM] szybet
tolino shine


[7/5/2023 10:58 PM] szybet
doesnt have touch>


[7/5/2023 10:58 PM] szybet
or what


[7/5/2023 10:58 PM] tux_linux
?


[7/5/2023 10:58 PM] tux_linux
touch is the blue thingy i think


[7/5/2023 10:58 PM] szybet
where is the touch connector


[7/5/2023 10:58 PM] tux_linux
the red is the battery


[7/5/2023 10:58 PM] szybet
no i dont think so


[7/5/2023 10:59 PM] szybet
i didnt made the circles


[7/5/2023 10:59 PM] tux_linux
well what is it then


[7/5/2023 10:59 PM] szybet
third connector is missing


[7/5/2023 10:59 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/rueckseite-ab-596F6.png


[7/5/2023 10:59 PM] szybet
kobo glo and tolino shine


[7/5/2023 10:59 PM] szybet
what is going on


[7/5/2023 10:59 PM] tux_linux
you didn't pull main repo into inkbox-audio yet?


[7/5/2023 11:00 PM] szybet
what is this third connector


[7/5/2023 11:00 PM] szybet
tommorow


[7/5/2023 11:00 PM] tux_linux
tolino shine looks like a glo hd at first sight


[7/5/2023 11:00 PM] tux_linux
not glo


[7/5/2023 11:00 PM] szybet
i do see diffrences


[7/5/2023 11:00 PM] szybet
but one connector is missing anyway


[7/5/2023 11:00 PM] tux_linux
it looks like the back of my glo hd


[7/5/2023 11:01 PM] tux_linux
touch controller is the zforce thing


[7/5/2023 11:01 PM] tux_linux
on the shine


[7/5/2023 11:01 PM] tux_linux
.


[7/5/2023 11:02 PM] szybet
backlight


[7/5/2023 11:02 PM] szybet
2 pins


[7/5/2023 11:02 PM] tux_linux
why is it not in the main connector then


[7/5/2023 11:02 PM] szybet
and?


[7/5/2023 11:02 PM] andi15701
do talk about a shine or a shine2?


[7/5/2023 11:02 PM] szybet
shine


[7/5/2023 11:02 PM] tux_linux
well, the 300 ppi one probably


[7/5/2023 11:02 PM] szybet
regular one


[7/5/2023 11:03 PM] andi15701
left one is shine2


[7/5/2023 11:04 PM] tux_linux
left one is a kobo glo


[7/5/2023 11:04 PM] tux_linux
aka 213 ppi


[7/5/2023 11:04 PM] tux_linux
no?


[7/5/2023 11:04 PM] andi15701
I have the shine 2


[7/5/2023 11:04 PM] andi15701
and cannot find differences


[7/5/2023 11:04 PM] tux_linux
shine 2 hd?


[7/5/2023 11:05 PM] andi15701
yes


[7/5/2023 11:05 PM] andi15701
kobo glo is imx5 I think?


[7/5/2023 11:05 PM] tux_linux
yes


[7/5/2023 11:05 PM] tux_linux
no


[7/5/2023 11:05 PM] tux_linux
well yes


[7/5/2023 11:05 PM] tux_linux
imx507


[7/5/2023 11:05 PM] tux_linux
cybertan wifi chip


[7/5/2023 11:05 PM] tux_linux
etc


[7/5/2023 11:05 PM] andi15701
kobo glo hd is imx.6sl, and people booted the shine2 pmos port on the kobo glo hd


[7/5/2023 11:06 PM] andi15701
there are two board revisions of shine2hd


[7/5/2023 11:06 PM] andi15701
one with cybertan


[7/5/2023 11:06 PM] andi15701
and one with rtl8189f


[7/5/2023 11:06 PM] tux_linux
oh really


[7/5/2023 11:06 PM] tux_linux
my two glo hd boards had only cybertan chip


[7/5/2023 11:06 PM] tux_linux
well, interesting


[7/5/2023 11:30 PM] the.mightydill
just installed 2.0


[7/5/2023 11:39 PM] the.mightydill
good experience so far, will sideload a book soon

{Reactions}
👍 

[7/5/2023 11:43 PM] the.mightydill
it says time 21:43 but it's 15:43 here


[7/5/2023 11:44 PM] szybet
Set the timezone


[7/5/2023 11:44 PM] the.mightydill
windows does not recognize it as a USB device


[7/5/2023 11:45 PM] tux_linux
In settings page 2

{Reactions}
👍 

[7/5/2023 11:45 PM] tux_linux
Bad cable?


[7/5/2023 11:45 PM] the.mightydill
doubtful


[7/5/2023 11:45 PM] the.mightydill
I'll try a different one


[7/5/2023 11:45 PM] the.mightydill
later

{Reactions}
👍 

[7/5/2023 11:49 PM] the.mightydill
still not recognized


[7/5/2023 11:49 PM] the.mightydill
inkbox recognizes it, but windows gives no indication


[7/5/2023 11:49 PM] the.mightydill
should I boot into Ubuntu? it hasn't updated in months :/


[7/5/2023 11:55 PM] tux_linux
Probably

{Reactions}
👍 

[7/6/2023 12:26 AM] the.mightydill
still nothing...


[7/6/2023 12:26 AM] tux_linux
Show dmesg

{Reactions}
👍 

[7/6/2023 12:27 AM] the.mightydill
-H?


[7/6/2023 12:27 AM] tux_linux
Just dmesg


[7/6/2023 12:28 AM] the.mightydill
oh from the ereader 🤦‍♂️


[7/6/2023 12:28 AM] the.mightydill
how


[7/6/2023 12:28 AM] tux_linux
No


[7/6/2023 12:28 AM] tux_linux
Your computer


[7/6/2023 12:28 AM] the.mightydill
the output is massive


[7/6/2023 12:28 AM] tux_linux
All of it

{Reactions}
👍 

[7/6/2023 12:29 AM] tux_linux
Redirect to file idk


[7/6/2023 12:29 AM] the.mightydill


{Attachments}
/mnt/data/projects/git/conversations/media/dmesg-28216.txt


[7/6/2023 12:32 AM] tux_linux
It doesn't seem to detect it at all


[7/6/2023 12:32 AM] tux_linux
Maybe an usb issue on the mini itself


[7/6/2023 12:32 AM] tux_linux
You could still transfer books with wifi via rooted kernel


[7/6/2023 12:34 AM] tux_linux
Or you can download books from Gutenberg in the online library


[7/6/2023 12:34 AM] tux_linux
With wifi


[7/6/2023 12:39 AM] the.mightydill
I'm using a USB hub maybe that's the issue


[7/6/2023 12:39 AM] the.mightydill
I'll plug it directly


[7/6/2023 12:41 AM] the.mightydill
I still don't see anything...

{Attachments}
/mnt/data/projects/git/conversations/media/dmesg-D14A1.txt


[7/6/2023 2:10 PM] tux_linux
it's probably the mini's usb port then

{Reactions}
👍 

[7/6/2023 2:11 PM] szybet
where do i put the audio button


[7/6/2023 2:11 PM] szybet
https://tenor.com/view/skeleto-skeleton-fire-hell-burn-gif-26129219

{Embed}
https://tenor.com/view/skeleto-skeleton-fire-hell-burn-gif-26129219
/mnt/data/projects/git/conversations/media/skeleto-skeleton-43F8A.png


[7/6/2023 2:11 PM] tux_linux
First you pull inkbox repo from latest sources


[7/6/2023 2:11 PM] szybet
and then you hope that with your smaller margins it will fit?


[7/6/2023 2:15 PM] tux_linux
***if*** audio is enabled, hide battery percentage label


[7/6/2023 2:16 PM] szybet
no, if that then the battery icon


[7/6/2023 2:16 PM] tux_linux
?


[7/6/2023 2:16 PM] szybet
maybe do it properly


[7/6/2023 2:16 PM] szybet
brightness buton will be a option chooser


[7/6/2023 2:16 PM] szybet
audio 
brightness


[7/6/2023 2:17 PM] tux_linux
i thought of that but i was sure you wouldn't accept it


[7/6/2023 2:17 PM] tux_linux
well, let me think


[7/6/2023 2:17 PM] szybet
better than hiding the battery


[7/6/2023 2:17 PM] szybet
you can think if we can use an existing dialog or a new one is needed


[7/6/2023 2:19 PM] tux_linux
well, first try to hide "inkbox" label at the top and see if anything improves


[7/6/2023 2:19 PM] szybet
it will


[7/6/2023 2:19 PM] szybet
well we can do that


[7/6/2023 2:19 PM] tux_linux
if audio is enabled, then a spacer might be enough to keep it looking fine


[7/6/2023 2:19 PM] tux_linux
sometimes it's more complicated than that, you have to hide it and delete it


[7/6/2023 2:20 PM] tux_linux
deleteLater


[7/6/2023 2:20 PM] tux_linux
well, try and see if it's any good


[7/6/2023 2:20 PM] szybet
i will try to make the font smaller first


[7/6/2023 2:20 PM] szybet
and remove - -


[7/6/2023 2:20 PM] tux_linux
ok, try removing - -


[7/6/2023 2:20 PM] tux_linux
don't make the font smaller


[7/6/2023 2:20 PM] tux_linux
either no - - or no inkbox label at all i think


[7/6/2023 2:21 PM] szybet
stop overcomplicating


[7/6/2023 2:21 PM] szybet
only I and you will use the audio feature propably


[7/6/2023 2:21 PM] szybet
the audio itself is very basic


[7/6/2023 2:22 PM] tux_linux
it will need to follow design guidelines


[7/6/2023 2:22 PM] szybet
it uses a one direction unix socket, so the audio can sometimes not launch imidietielly after the last song for  example


[7/6/2023 2:22 PM] szybet
it looks good


[7/6/2023 2:22 PM] tux_linux
pic?


[7/6/2023 2:22 PM] szybet
later


[7/6/2023 2:23 PM] szybet
when will clara arrive?


[7/6/2023 2:23 PM] tux_linux
did you change font to u001


[7/6/2023 2:23 PM] tux_linux
it already arrived but i am away


[7/6/2023 2:23 PM] tux_linux
so will get it next week


[7/6/2023 2:23 PM] szybet
https://tenor.com/view/%E0%B8%87%E0%B8%AD%E0%B8%99-gif-25027914

{Embed}
https://tenor.com/view/%E0%B8%87%E0%B8%AD%E0%B8%99-gif-25027914
/mnt/data/projects/git/conversations/media/%25E0%25B8%2587%25E0%25B8%25AD%25E0%25B8%2-93608.png


[7/6/2023 2:23 PM] tux_linux
it needs to follow design guidelines


[7/6/2023 2:23 PM] szybet
i hope you will get into inkbox soon


[7/6/2023 2:23 PM] tux_linux
i should probably write a wiki page about it


[7/6/2023 2:24 PM] tux_linux
well i can do that today probably


[7/6/2023 2:24 PM] szybet
i hope you will make some changes to inkbox, a bit of the redesign part before i start the reader


[7/6/2023 2:24 PM] tux_linux
what will you do for the reader


[7/6/2023 2:24 PM] tux_linux
what is there to do


[7/6/2023 2:24 PM] szybet
i will make a list today of what i want


[7/6/2023 2:24 PM] tux_linux
we haven't found anything


[7/6/2023 2:24 PM] szybet
rewrite it


[7/6/2023 2:24 PM] tux_linux
still


[7/6/2023 2:24 PM] tux_linux
how


[7/6/2023 2:24 PM] szybet
my demo from half a year ago


[7/6/2023 2:25 PM] szybet
remember?


[7/6/2023 2:25 PM] szybet
implement this


[7/6/2023 2:25 PM] tux_linux
calculating pages?


[7/6/2023 2:25 PM] szybet
i will use mutool directly i think


[7/6/2023 2:25 PM] szybet
if not, fuck those pages


[7/6/2023 2:25 PM] tux_linux
i want a perfect reader, don't want to deal with scrollbars ever again, i want it to be just perfect like koreader
*cries*


[7/6/2023 2:25 PM] szybet
look at the demo


[7/6/2023 2:25 PM] tux_linux
it was not perfect no?


[7/6/2023 2:25 PM] szybet
it already doesnt have scroll bars...


[7/6/2023 2:26 PM] tux_linux
well yes, but did you have text on the full length of the page


[7/6/2023 2:26 PM] tux_linux
for every page


[7/6/2023 2:26 PM] tux_linux
like koreader


[7/6/2023 2:27 PM] szybet
yep


[7/6/2023 2:27 PM] szybet
it was good


[7/6/2023 2:27 PM] szybet
for sure better than the one we have now


[7/6/2023 2:27 PM] tux_linux
do you have a video because i dont remember seeing it


[7/6/2023 2:28 PM] szybet
streamable deleted it


[7/6/2023 2:28 PM] szybet
:D...


[7/6/2023 2:28 PM] szybet
maybe its on matrix?


[7/6/2023 2:30 PM] [matrix] Szybet
tux-linux:


[7/6/2023 2:30 PM] szybet
its there


[7/6/2023 2:30 PM] szybet
look


[7/6/2023 2:30 PM] szybet
only once text was cutted


[7/6/2023 2:30 PM] szybet
and its with very low tolerance


[7/6/2023 2:30 PM] szybet
the other times scrollbar appeared was unneceserry


[7/6/2023 2:31 PM] tux_linux
how did you do it


[7/6/2023 2:31 PM] szybet
magic


[7/6/2023 2:31 PM] szybet
i mean rust


[7/6/2023 2:31 PM] tux_linux
i want explanation


[7/6/2023 2:31 PM] tux_linux
does it mess up page numbers in reader


[7/6/2023 2:31 PM] szybet
https://github.com/Szybet/libreader-rs

{Embed}
https://github.com/Szybet/libreader-rs
GitHub - Szybet/libreader-rs: Library in rust for inkbox binary
Library in rust for inkbox binary. Contribute to Szybet/libreader-rs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/libreader-rs-C0EEB


[7/6/2023 2:31 PM] szybet
what


[7/6/2023 2:32 PM] szybet
i managed with rust to use `html`, you used `xhtml` which is just dumb format


[7/6/2023 2:32 PM] szybet
its massive hackery but it works


[7/6/2023 2:32 PM] tux_linux
its not perfect


[7/6/2023 2:32 PM] tux_linux
sure it's better but then we should do it properly


[7/6/2023 2:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D9C8F.png


[7/6/2023 2:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-BA42B.png
/mnt/data/projects/git/conversations/media/image-DA007.png


[7/6/2023 2:32 PM] tux_linux
still


[7/6/2023 2:33 PM] tux_linux
never happens with koreader or plato


[7/6/2023 2:33 PM] szybet
nope, perfect


[7/6/2023 2:33 PM] tux_linux
.


[7/6/2023 2:33 PM] szybet
-_-


[7/6/2023 2:33 PM] szybet
the fix is to disable the scroll bar completly and height -3


[7/6/2023 2:33 PM] tux_linux
i will search for some options today


[7/6/2023 2:33 PM] szybet
what


[7/6/2023 2:33 PM] szybet
i send you a pdf one


[7/6/2023 2:34 PM] szybet
it would be cool if i wouldnt need to do pdf


[7/6/2023 2:34 PM] tux_linux
what does pdf have to do here


[7/6/2023 2:34 PM] szybet
that i dont need to do it


[7/6/2023 2:34 PM] szybet
check it out i sended it


[7/6/2023 2:34 PM] tux_linux
i still don't understand


[7/6/2023 2:35 PM] szybet
i want to focus on epubs


[7/6/2023 2:35 PM] szybet
is that enough?


[7/6/2023 2:35 PM] tux_linux
well pdfs in comparison are already better


[7/6/2023 2:35 PM] tux_linux
we should both focus on epub


[7/6/2023 2:35 PM] szybet
i know but still


[7/6/2023 2:35 PM] tux_linux
maybe adding more zoom levels, i can do that


[7/6/2023 2:35 PM] szybet
leave the reader to me, you do the rest


[7/6/2023 2:36 PM] szybet
with poppler there is maybe text selection


[7/6/2023 2:36 PM] szybet
check it out just to be sure


[7/6/2023 2:36 PM] tux_linux
we are not there yet


[7/6/2023 2:36 PM] szybet
just try it


[7/6/2023 2:36 PM] szybet
i dont expect more


[7/6/2023 2:36 PM] tux_linux
please make a thread and log your experiments
i will follow development closely


[7/6/2023 2:37 PM] tux_linux
Started a thread.


[7/6/2023 2:37 PM] szybet
ok, but before i start you need at least start to refine inkbox code a bit


[7/6/2023 2:37 PM] szybet
i will write the list today


[7/6/2023 2:37 PM] tux_linux
well, explain what


[7/6/2023 2:37 PM] tux_linux
ok


[7/6/2023 2:37 PM] tux_linux
are those big changes


[7/6/2023 2:37 PM] szybet
basically sanki code


[7/6/2023 2:37 PM] szybet
qDebug, proper global functions


[7/6/2023 2:37 PM] tux_linux
Qdebug?


[7/6/2023 2:38 PM] szybet
and settings refined so i have place to put ereader things


[7/6/2023 2:38 PM] tux_linux
We use log


[7/6/2023 2:38 PM] szybet
we will not ;)


[7/6/2023 2:38 PM] tux_linux
Why


[7/6/2023 2:38 PM] szybet
qdebug is awesome


[7/6/2023 2:38 PM] tux_linux
I will remake settings completely
Wanted to do it last week but didn't work out


[7/6/2023 2:38 PM] tux_linux
Well, what do you need to do with it


[7/6/2023 2:39 PM] szybet
for settings: no horizontal scroll bar, vertical is fine and proper sections / pages


[7/6/2023 2:39 PM] szybet
use it


[7/6/2023 2:39 PM] tux_linux
Explain


[7/6/2023 2:39 PM] szybet
look up sanki main.cpp


[7/6/2023 2:39 PM] szybet
its awesome trust me


[7/6/2023 2:39 PM] szybet
i can dump the entire config struct variable in one line


[7/6/2023 2:39 PM] szybet
or even all items of a qscrollbar


[7/6/2023 2:40 PM] tux_linux
I want to have log headers before every qdebug call


[7/6/2023 2:40 PM] szybet
its possible to add them


[7/6/2023 2:40 PM] szybet
even line numbers


[7/6/2023 2:40 PM] tux_linux
And that will be commented code I hope


[7/6/2023 2:40 PM] szybet
and functions / file names


[7/6/2023 2:40 PM] szybet
in sanki its not hehe


[7/6/2023 3:14 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_design_guidelines
I wrote a tiny bit about fonts

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_GUI_design_guidelines
Index.php


[7/6/2023 3:15 PM] szybet
maybe just overwrite it in stylesheets?


[7/6/2023 3:15 PM] szybet
:)


[7/6/2023 3:15 PM] tux_linux
it doesn't always work


[7/6/2023 3:15 PM] tux_linux
i could try it


[7/6/2023 3:16 PM] szybet
whatever


[7/6/2023 3:16 PM] szybet
better try the pdf app


[7/6/2023 3:26 PM] szybet
tried the pdf app - nothing special and interesting


[7/6/2023 3:26 PM] szybet
not worth it propably


[7/6/2023 3:29 PM] szybet
https://gitlab.com/cubocore/coreapps/corepdf

{Embed}
https://gitlab.com/cubocore/coreapps/corepdf
CuboCore / CoreApps / corepdf · GitLab
A PDF viewer for C Suite.
/mnt/data/projects/git/conversations/media/CorePDF-A55ED.png


[7/6/2023 3:29 PM] szybet
similar story


[7/6/2023 3:30 PM] szybet
um wow


[7/6/2023 3:30 PM] szybet
they have a lot of apps


[7/6/2023 3:30 PM] szybet
https://gitlab.com/cubocore/coreapps/coreterminal

{Embed}
https://gitlab.com/cubocore/coreapps/coreterminal
CuboCore / CoreApps / coreterminal · GitLab
A terminal emulator for C Suite.
/mnt/data/projects/git/conversations/media/CoreTerminal-E04D7.png


[7/6/2023 3:30 PM] szybet
for example


[7/6/2023 3:30 PM] szybet
sad that i find it now


[7/6/2023 3:31 PM] szybet (pinned)
https://gitlab.com/cubocore/coreapps/

{Embed}
https://gitlab.com/cubocore/coreapps/
CoreApps · GitLab
An App Suite of core apps based on Qt called C Suite.
/mnt/data/projects/git/conversations/media/twitter_card-570ddb06edf56a2312253c5872489-60AF3.jpg


[7/6/2023 3:31 PM] szybet
Pinned a message.


[7/6/2023 3:32 PM] szybet
https://gitlab.com/cubocore/coreapps/corekeyboard

{Embed}
https://gitlab.com/cubocore/coreapps/corekeyboard
CuboCore / CoreApps / corekeyboard · GitLab
A x11 based virtual keyboard for C Suite.
/mnt/data/projects/git/conversations/media/corekeyboard-F8701.png


[7/6/2023 3:32 PM] szybet
no way


[7/6/2023 3:33 PM] szybet
A whole desktop suite


[7/6/2023 3:41 PM] szybet
What a gold mine


[7/6/2023 3:55 PM] szybet
They created a x11 keyboard and a wayland wm


[7/6/2023 3:55 PM] szybet
Hmm


[7/6/2023 10:22 PM] tux_linux
wdym

{Attachments}
/mnt/data/projects/git/conversations/media/image-03560.png


[7/6/2023 10:22 PM] szybet
look at the changes


[7/6/2023 10:22 PM] szybet
IDK from where they got there


[7/6/2023 10:22 PM] tux_linux
oh no

{Attachments}
/mnt/data/projects/git/conversations/media/image-B47AE.png


[7/6/2023 10:22 PM] szybet
.,...


[7/6/2023 10:36 PM] szybet
@tux-linux i added like another page in the todo explaining all things

{Reactions}
👍 

[7/6/2023 10:36 PM] szybet
please read them, if any questions share them


[7/6/2023 10:37 PM] szybet
unrelated


[7/6/2023 10:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-58E8A.png


[7/7/2023 6:35 PM] szybet
so you dont have time?


[7/7/2023 6:55 PM] tux_linux
I will look at it tonight


[7/8/2023 12:03 PM] szybet
if you dont have time to read it, then no point in it at all>?


[7/8/2023 1:35 PM] tux_linux
i won't replace log calls


[7/8/2023 1:37 PM] szybet
then enable me to use qdebug


[7/8/2023 1:37 PM] tux_linux
you can, I already said so
add a log header before


[7/8/2023 1:37 PM] tux_linux
example


[7/8/2023 1:37 PM] szybet
what header


[7/8/2023 1:38 PM] tux_linux
```
log("List contents:", className);
qDebug << list;
```
or smth like that


[7/8/2023 1:38 PM] szybet
no.


[7/8/2023 1:38 PM] tux_linux
yes


[7/8/2023 1:38 PM] szybet
no


[7/8/2023 1:38 PM] tux_linux
yes


[7/8/2023 1:38 PM] szybet
this is stupid i wont


[7/8/2023 1:39 PM] tux_linux
No it's not stupid, it gives user information about the time at which the qDebug thing is printed, from what class and why


[7/8/2023 1:39 PM] szybet
!@(*#&@!(*


[7/8/2023 1:42 PM] szybet
```
Debug: "Reset grid called" (mainMenu/fancyGrid.cpp:28, void fancyGrid::reset())
```


[7/8/2023 1:42 PM] tux_linux
?

{Attachments}
/mnt/data/projects/git/conversations/media/image-052B6.png


[7/8/2023 1:42 PM] szybet
this is pure qdebug call


[7/8/2023 1:42 PM] szybet
file path, line, function name


[7/8/2023 1:42 PM] szybet
i will do it


[7/8/2023 1:42 PM] tux_linux
no


[7/8/2023 1:42 PM] tux_linux
it doesn't give the time


[7/8/2023 1:43 PM] tux_linux
explain why


[7/8/2023 1:43 PM] tux_linux
you already added an option to disable the prompt


[7/8/2023 1:43 PM] szybet
ok good nevermind then


[7/8/2023 1:43 PM] szybet
i can add that


[7/8/2023 1:43 PM] szybet
stop complaining, qdebug or nothing


[7/8/2023 1:43 PM] tux_linux
nothing


[7/8/2023 1:44 PM] szybet
i will fork inkbox and wont pull request because of qdebug


[7/8/2023 1:44 PM] szybet
log() is stupid at this point


[7/8/2023 1:44 PM] tux_linux
what is the code that calls this


[7/8/2023 1:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-E946D.png


[7/8/2023 1:45 PM] tux_linux
how did it come to show this output


[7/8/2023 1:46 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-C0B46.txt


[7/8/2023 1:46 PM] szybet
yuou can custimiser it


[7/8/2023 1:46 PM] szybet
you call this in main() and thats it


[7/8/2023 1:47 PM] tux_linux
then rename qDebug to log and make it print the ***exact same output*** that log currently prints


[7/8/2023 1:48 PM] szybet
this could be done using a define


[7/8/2023 1:48 PM] szybet
but the syntax is diffrent


[7/8/2023 1:48 PM] tux_linux
i don't mind the syntax


[7/8/2023 1:48 PM] tux_linux
i just mind that


[7/8/2023 1:48 PM] szybet
the syntax is the problem, to replace it


[7/8/2023 1:48 PM] tux_linux
chatgpt can do the rest, probably


[7/8/2023 1:49 PM] tux_linux
prove that it works first, then you can define it to log and ask chatgpt to change the reset


[7/8/2023 1:49 PM] szybet
that do i prove? that sanki code isint magic?????


[7/8/2023 1:50 PM] tux_linux
no, the output


[7/8/2023 1:50 PM] tux_linux
make it look the same


[7/8/2023 1:50 PM] tux_linux
then start replacing log calls


[7/8/2023 1:50 PM] szybet
the same like what


[7/8/2023 1:51 PM] tux_linux
```
29/06/2023 @ 14:00:19 | localLibraryWidget: Argument for database creation
```
like this


[7/8/2023 1:52 PM] szybet
the point of qdebug is more debug output


[7/8/2023 1:52 PM] tux_linux
dd/mm/yyyy @ hh:mm:ss | Message


[7/8/2023 1:52 PM] szybet
+ you do it, to understand this and so i can do apps


[7/8/2023 1:52 PM] tux_linux
no, you asked


[7/8/2023 1:52 PM] szybet
you didnt readed the whole todo


[7/8/2023 1:52 PM] szybet
what i asked


[7/8/2023 1:53 PM] tux_linux
to replace log


[7/8/2023 1:53 PM] szybet
yes, to you to you do it


[7/8/2023 1:53 PM] szybet
you can write a simple script to do that btw


[7/8/2023 1:53 PM] tux_linux
probably not


[7/8/2023 1:53 PM] szybet
so you wont do any of that that i propose in the todo?


[7/8/2023 1:53 PM] tux_linux
i was speaking of the script


[7/8/2023 1:54 PM] szybet
you decission


[7/8/2023 1:54 PM] tux_linux
?

{Attachments}
/mnt/data/projects/git/conversations/media/image-F5DCB.png


[7/8/2023 1:55 PM] szybet
do you want me to send you sanki code for every point in the todo or you look at it simply


[7/8/2023 1:55 PM] szybet
just look at .pro file


[7/8/2023 1:55 PM] tux_linux
how is clean broken


[7/8/2023 1:55 PM] szybet
make clea no such target


[7/8/2023 1:55 PM] tux_linux
???

{Attachments}
/mnt/data/projects/git/conversations/media/image-78D3F.png


[7/8/2023 1:55 PM] tux_linux
```
qmake && make clean
```


[7/8/2023 1:56 PM] szybet
it doesnt delete the build files


[7/8/2023 1:56 PM] tux_linux
it does

{Attachments}
/mnt/data/projects/git/conversations/media/message-A25A4.txt


[7/8/2023 1:56 PM] tux_linux
i build it in the folder


[7/8/2023 1:57 PM] szybet
ok, i will look into it then


[7/8/2023 1:59 PM] szybet
read the whole context


[7/8/2023 2:00 PM] tux_linux
i don't understand what you wrote


[7/8/2023 2:01 PM] szybet
so i can port mainline


[7/8/2023 2:02 PM] tux_linux
why do we need pmos to port mainline


[7/8/2023 2:02 PM] szybet
for the kernel...


[7/8/2023 2:03 PM] tux_linux
the clara kernel is already "mainline" in inkbox repo


[7/8/2023 2:03 PM] szybet
i mean for the nia...


[7/8/2023 2:12 PM] tux_linux
🥴

{Attachments}
/mnt/data/projects/git/conversations/media/image-73EB1.png


[7/8/2023 2:12 PM] tux_linux
then I say no


[7/8/2023 2:12 PM] tux_linux
debug build of inkbox is like 28 mb


[7/8/2023 2:12 PM] tux_linux
it's crazy


[7/8/2023 2:12 PM] szybet
you are going to get me crazy


[7/8/2023 2:13 PM] szybet
1. i think inline makes debug build big
2. debug build is only for us
3. qdebug works with release build too but with less info


[7/8/2023 2:14 PM] tux_linux
it's 72M ?!


[7/8/2023 2:15 PM] tux_linux
```
build@inkbox ~/D/i/build-inkbox-Kobo-Debug> ls -shal inkbox 
72M -rwxr-xr-x 1 build build 72M Jul  8 08:14 inkbox*
build@inkbox ~/D/i/build-inkbox-Kobo-Debug>
```


[7/8/2023 2:15 PM] szybet
you need debug build with gdb anyway


[7/8/2023 2:15 PM] szybet
+ there is a release with debug info option


[7/8/2023 2:15 PM] tux_linux
which is


[7/8/2023 2:16 PM] szybet
https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html


[7/8/2023 2:16 PM] szybet
Debug, Release, RelWithDebInfo and MinSizeRel


[7/8/2023 2:16 PM] tux_linux
when did we start using cmake


[7/8/2023 2:16 PM] szybet
qmake uses


[7/8/2023 2:35 PM] szybet
so, will you do it>?


[7/8/2023 2:46 PM] tux_linux
I am trying to make existing log function to keep same syntax but print more than qstrings
using auto instead of QString in the function declaration


[7/8/2023 2:46 PM] szybet
reimplementing qdebug


[7/8/2023 2:46 PM] szybet
;-;


[7/8/2023 2:46 PM] szybet
no...


[7/8/2023 2:47 PM] tux_linux
log is already using qdebug


[7/8/2023 2:47 PM] tux_linux
so in theory it just provides it to qdebug and this does the rest of the work


[7/8/2023 2:47 PM] szybet
well maybe it would work


[7/8/2023 2:47 PM] szybet
yea


[7/8/2023 2:48 PM] szybet
but you wont achieve the line / function name with this


[7/8/2023 2:48 PM] szybet
so pointless


[7/8/2023 2:49 PM] tux_linux
we already have function name


[7/8/2023 2:49 PM] tux_linux
as for the line, well, searching for that log in the code will give it to us


[7/8/2023 2:49 PM] tux_linux
and there is probably a way to include it in the log function definition


[7/8/2023 2:49 PM] szybet
which is bad, its allocating another variable


[7/8/2023 2:49 PM] tux_linux
probably what qdebug is doing internally?


[7/8/2023 2:49 PM] szybet
you dont think about making it just pass the line as argument?


[7/8/2023 2:50 PM] tux_linux
no, probably with a macro or something


[7/8/2023 2:50 PM] tux_linux
idk


[7/8/2023 2:50 PM] szybet
who dont you simply use qdebug as god intended


[7/8/2023 2:51 PM] szybet
you are overcomplicating thins


[7/8/2023 2:52 PM] tux_linux
well, first it will allow it to include line number even in non debug build


[7/8/2023 2:52 PM] tux_linux
probably


[7/8/2023 2:53 PM] szybet
which will use even more binary space and ram


[7/8/2023 2:56 PM] tux_linux
works

{Attachments}
/mnt/data/projects/git/conversations/media/message-01F15.txt


[7/8/2023 2:56 PM] tux_linux
discord where has gone line wrapping


[7/8/2023 2:56 PM] szybet
i dont know how but its worse than plain qdebug


[7/8/2023 2:57 PM] szybet
use plain qdebug


[7/8/2023 2:57 PM] szybet
please


[7/8/2023 2:57 PM] tux_linux
now you can do that

{Attachments}
/mnt/data/projects/git/conversations/media/image-5271D.png


[7/8/2023 2:57 PM] szybet
use plain qdebug...


[7/8/2023 2:58 PM] tux_linux
explain


[7/8/2023 2:58 PM] szybet
dont you see this?


[7/8/2023 2:58 PM] szybet
no line, no function name


[7/8/2023 2:59 PM] szybet
and even stop implementing this


[7/8/2023 2:59 PM] szybet
i want plain qdebug


[7/8/2023 2:59 PM] szybet
and you should too


[7/8/2023 2:59 PM] tux_linux
?


[7/8/2023 2:59 PM] szybet
.


[7/8/2023 3:10 PM] szybet
I still didn't received an answer

will you do it in arround that time that i said so i can focus on some apps


[7/8/2023 3:15 PM] tux_linux
Qdebug also breaks ability to redirect output to file while simultaneously printing it to stdout


[7/8/2023 3:17 PM] szybet
here you have litterally the qstring and you can do anything with it


[7/8/2023 3:17 PM] szybet
i can spam a satelite with inkbox debug output


[7/8/2023 3:17 PM] szybet
and output to a file


[7/8/2023 3:26 PM] szybet
idk how they did it but syncthing works in musl and in libc, and the syncthing binary doesnt even use musl propably


[7/8/2023 3:27 PM] szybet
go is god of crosscompiling


[7/8/2023 3:27 PM] szybet
will you answer me some day?


[7/8/2023 3:35 PM] matterbridge#2154
[matrix] tux-linux 
static build


[7/8/2023 3:35 PM] szybet
still, impresive


[7/8/2023 3:47 PM] szybet
https://github.com/Ralith/nachat

{Embed}
https://github.com/Ralith/nachat
GitHub - Ralith/nachat: Portable desktop chat client for Matrix
Portable desktop chat client for Matrix. Contribute to Ralith/nachat development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/nachat-66723


[7/8/2023 3:47 PM] szybet
https://tenor.com/view/confused-face-gif-24004933

{Embed}
https://tenor.com/view/confused-face-gif-24004933
/mnt/data/projects/git/conversations/media/confused-face-F1AEE.png


[7/8/2023 3:49 PM] matterbridge#2154
[matrix] tux-linux 
i certainly don't have time to do that


[7/8/2023 3:50 PM] szybet
none at all?


[7/8/2023 3:52 PM] [matrix] tux-linux
idk


[7/8/2023 3:52 PM] szybet
sad


[7/8/2023 3:55 PM] szybet
can you at least accept pull requests this weekend?


[7/8/2023 4:00 PM] [matrix] tux-linux
image.png


[7/8/2023 4:00 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-CC64F.png


[7/8/2023 4:00 PM] [matrix] tux-linux
okular is not relevant


[7/8/2023 4:00 PM] szybet
its just dbus


[7/8/2023 4:01 PM] [matrix] tux-linux
ok
and then why do we need dbus


[7/8/2023 4:01 PM] szybet
other apps can use it, or refuse to launch without it


[7/8/2023 4:01 PM] [matrix] tux-linux
ok


[7/8/2023 4:01 PM] szybet
the more apps we port, the more qt libs we need


[7/8/2023 4:03 PM] [matrix] tux-linux
did you update qt libs in gui bundle


[7/8/2023 4:03 PM] [matrix] Szybet
image.png


[7/8/2023 4:03 PM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B11A9.png


[7/8/2023 4:03 PM] [matrix] Szybet
why is that


[7/8/2023 4:03 PM] matterbridge#2154
[matrix] Szybet 
no


[7/8/2023 4:04 PM] [matrix] tux-linux
well
...


[7/8/2023 4:04 PM] [matrix] Szybet
do something asbout it


[7/8/2023 4:04 PM] [matrix] trebys (@trebys:matrix.
test


[7/8/2023 4:04 PM] kuratius
@tux-linux Any progress on the integration/differentiation stuff?
Try spending 5-10 min on the limit I gave you, it's not difficult, just plugging stuff in and using the binomial formula (or multiplying the brackets manually)


[7/8/2023 4:05 PM] [matrix] trebys (@trebys:matrix.
test from 7 year old qt app


[7/8/2023 4:05 PM] [matrix] trebys (@trebys:matrix.
holy fuck


[7/8/2023 4:05 PM] [matrix] trebys (@trebys:matrix.
NFCIUSDAHBNFVUIYWSDEHFGUIEWSHFUIEWQFJHCIUEWOQJNFGOIWENIONBOI


[7/8/2023 4:06 PM] [matrix] tux-linux
um hello


[7/8/2023 4:06 PM] szybet
read the nick backwards


[7/8/2023 4:06 PM] kuratius
sybert


[7/8/2023 4:06 PM] [matrix] Szybet
even sendong files works


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
sad


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
dsa


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
fsed


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
gf


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
dsg


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
bsd


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
fgv


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
erw


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
wohhohohoh


[7/8/2023 4:07 PM] matterbridge#2154
[matrix] tux-linux 
i will work on it next week, i hope
i am on a musical camp (I play the pipe organ) right now


[7/8/2023 4:07 PM] [matrix] trebys (@trebys:matrix.
nice


[7/8/2023 4:07 PM] matterbridge#2154
[matrix] tux-linux 
?!


[7/8/2023 4:07 PM] [matrix] tux-linux
are you szybet with an r?


[7/8/2023 4:08 PM] matterbridge#2154
[matrix] tux-linux 
you should?


[7/8/2023 4:08 PM] matterbridge#2154
[matrix] tux-linux 
ok, well it's not properly typed


[7/8/2023 4:08 PM] [matrix] trebys (@trebys:matrix.
yep i see that


[7/8/2023 4:08 PM] [matrix] trebys (@trebys:matrix.
ther point im trying to make


[7/8/2023 4:09 PM] [matrix] Szybet
image.png


[7/8/2023 4:09 PM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-D7880.png


[7/8/2023 4:09 PM] [matrix] Szybet
it works


[7/8/2023 4:09 PM] [matrix] trebys (@trebys:matrix.
it cant load old messages tho


[7/8/2023 4:09 PM] [matrix] tux-linux
good
but you didn't try on kobo yet
it has every reason it wants to fail


[7/8/2023 4:09 PM] [matrix] trebys (@trebys:matrix.
and its very basic


[7/8/2023 4:09 PM] [matrix] trebys (@trebys:matrix.
but hey


[7/8/2023 4:09 PM] [matrix] trebys (@trebys:matrix.
this doesnt use qml at all


[7/8/2023 4:09 PM] [matrix] trebys (@trebys:matrix.
i dont see here any fancy widgets


[7/8/2023 4:10 PM] [matrix] tux-linux
i will only be convinced when you show it running on kobo


[7/8/2023 4:10 PM] [matrix] tux-linux
then send me a video so I can put it on the user apps playlist


[7/8/2023 4:10 PM] [matrix] trebys (@trebys:matrix.
i will just pack it


[7/8/2023 4:10 PM] matterbridge#2154
[matrix] tux-linux 
= irc


[7/8/2023 4:10 PM] [matrix] tux-linux
so, which is better then ;)


[7/8/2023 4:11 PM] [matrix] trebys (@trebys:matrix.
what


[7/8/2023 4:11 PM] [matrix] tux-linux
gomuks can load old messages


[7/8/2023 4:11 PM] matterbridge#2154
[matrix] tux-linux 
this qt app behaves like an irc client


[7/8/2023 4:11 PM] [matrix] tux-linux
you come in, it sees and sends messages, then you close it and they're gone?


[7/8/2023 4:12 PM] [matrix] tux-linux
this is pretty much how irc is


[7/8/2023 4:12 PM] [matrix] trebys (@trebys:matrix.
it isint ancient 1970~ where mouses didnt exists lol


[7/8/2023 4:12 PM] [matrix] tux-linux
well, what's the point of having such an user app


[7/8/2023 4:13 PM] [matrix] tux-linux
if there already is one that does things better


[7/8/2023 4:13 PM] [matrix] trebys (@trebys:matrix.
how do you scroll in gomuks


[7/8/2023 4:13 PM] [matrix] tux-linux
shortcuts probably


[7/8/2023 4:13 PM] [matrix] trebys (@trebys:matrix.
XDDDDDD


[7/8/2023 4:13 PM] [matrix] trebys (@trebys:matrix.
hehe


[7/8/2023 4:36 PM] szybet
https://github.com/bendikro/qpdfview

{Embed}
https://github.com/bendikro/qpdfview
GitHub - bendikro/qpdfview
Contribute to bendikro/qpdfview development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qpdfview-6D888


[7/8/2023 4:36 PM] szybet
bookmarks, chapters, and others


[7/8/2023 4:36 PM] szybet
pretty good


[7/8/2023 4:52 PM] [matrix] tux-linux
oh actually scrolling in gomuks seems to be just pageup-pagedown


[7/8/2023 4:52 PM] [matrix] tux-linux
so not complicated as we have those buttons in iterm


[7/8/2023 4:53 PM] szybet
still


[7/8/2023 4:53 PM] [matrix] tux-linux
what still


[7/8/2023 4:53 PM] [matrix] tux-linux
are you trying to tell me that scrolling a scrollbar on the edge of the screen is better?


[7/8/2023 4:53 PM] szybet
~~haha hehe i have a scroll bar~~ yes


[7/8/2023 4:54 PM] [matrix] tux-linux
i still think buttons are better


[7/8/2023 5:10 PM] [matrix] tux-linux
what did the audio icon become in the end?


[7/8/2023 5:14 PM] [matrix] tux-linux-kobo
i confirm that pgup/pgdown work on kobo w/ gomuks


[7/8/2023 5:15 PM] szybet
it works if i deleted - -


[7/8/2023 5:16 PM] [matrix] tux-linux
ok


[7/8/2023 5:16 PM] [matrix] tux-linux
did you add an if for when audio is enabled or not?


[7/8/2023 5:16 PM] szybet
yep


[7/8/2023 5:16 PM] [matrix] tux-linux
good


[7/8/2023 5:17 PM] szybet
idk if you want to implement it in rootfs


[7/8/2023 5:17 PM] szybet
i takes a lot of space


[7/8/2023 5:17 PM] szybet
a few packages


[7/8/2023 5:18 PM] [matrix] tux-linux-kobo
well, it doesnt work otherwise?


[7/8/2023 5:18 PM] szybet
um yes it doesnt?


[7/8/2023 7:05 PM] szybet
https://github.com/Szybet/inkbox-maps

{Embed}
https://github.com/Szybet/inkbox-maps
GitHub - Szybet/inkbox-maps: Maps written in qt, c++ for ereaders, ...
Maps written in qt, c++ for ereaders, inkbox os. Contribute to Szybet/inkbox-maps development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-maps-EFE8F


[7/8/2023 7:05 PM] szybet
@tux-linux


[7/8/2023 7:05 PM] szybet
/etc/SSL/ doesnt exist


[7/8/2023 7:05 PM] szybet
at all


[7/8/2023 7:05 PM] szybet
;o


[7/8/2023 7:07 PM] szybet
i coppied from my machine - but we need this handled


[7/8/2023 7:20 PM] [matrix] Szybet
Hello im proving a point of the the matrix client working on ereader but i cant resize the dialog yet so no photos yet hehe


[7/9/2023 2:27 PM] tux_linux
maps work?


[7/9/2023 2:27 PM] szybet
no idea


[7/9/2023 2:27 PM] szybet
try them


[7/9/2023 2:27 PM] tux_linux
is the feature 0 enabled


[7/9/2023 2:27 PM] tux_linux
in app.json


[7/9/2023 2:27 PM] tux_linux
but you have no history


[7/9/2023 2:27 PM] tux_linux
check your app.json


[7/9/2023 2:27 PM] szybet
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659

{Embed}
https://tenor.com/view/spongebob-rainbow-imagination-meme-idc-gif-17331659
/mnt/data/projects/git/conversations/media/spongebob-rainbow-D9E9B.png


[7/9/2023 2:28 PM] szybet
its not an user app yet


[7/9/2023 2:28 PM] szybet
how would this help?


[7/9/2023 2:30 PM] tux_linux
i'm talking about maps


[7/9/2023 2:31 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/blob/b8b9e2b05113b0bf95879925ac5a4c2f013c4d4e/etc/init.d/gui_apps#L122-L125

{Embed}
https://github.com/Kobo-InkBox/rootfs/blob/b8b9e2b05113b0bf95879925ac5a4c2f013c4d4e/etc/init.d/gui_apps
rootfs/etc/init.d/gui_apps at b8b9e2b05113b0bf95879925ac5a4c2f013c4...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-08054


[7/9/2023 2:32 PM] szybet
so it is in gui-rootfs?


[7/9/2023 2:32 PM] tux_linux
no


[7/9/2023 2:32 PM] tux_linux
in rootfs


[7/9/2023 2:33 PM] tux_linux
check your cache


[7/9/2023 2:33 PM] tux_linux
maybe you deleted it


[7/9/2023 2:33 PM] tux_linux
https://github.com/Kobo-InkBox/rootfs/tree/b8b9e2b05113b0bf95879925ac5a4c2f013c4d4e/etc/ssl

{Embed}
https://github.com/Kobo-InkBox/rootfs/tree/b8b9e2b05113b0bf95879925ac5a4c2f013c4d4e/etc/ssl
rootfs/etc/ssl at b8b9e2b05113b0bf95879925ac5a4c2f013c4d4e · Kobo-I...
InkBox OS root filesystem. Contribute to Kobo-InkBox/rootfs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/rootfs-08054


[7/9/2023 2:33 PM] tux_linux
or maybe you wrote it uppercase


[7/9/2023 2:33 PM] tux_linux
it's lowercase


[7/9/2023 2:34 PM] szybet
i have an old 1.9 build


[7/9/2023 2:34 PM] tux_linux
🥴


[7/9/2023 2:34 PM] szybet
yea


[7/9/2023 2:34 PM] szybet
thanks for explaining

{Reactions}
👍 

[7/9/2023 2:48 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Direct_Firmware_Loader_mode
I am continuing the wiki a bit

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Direct_Firmware_Loader_mode
Index.php


[7/9/2023 2:52 PM] tux_linux
as for qdebug, i won't replace log with it for now but you can use it **when needed**
ideally precede it with an indication with log of what qdebug will print before
i won't have the time nor the will to do it this soon, probably


[7/9/2023 2:53 PM] szybet
i hoped to simply focus on the reader


[7/9/2023 2:53 PM] szybet
but whatever


[7/9/2023 2:53 PM] szybet
i will do it


[7/9/2023 2:53 PM] szybet
myself


[7/9/2023 2:54 PM] szybet
also give me access to kernel & inkbox repo on github


[7/9/2023 2:54 PM] tux_linux
but this means that in release builds users won't be able to debug what is happening


[7/9/2023 2:54 PM] szybet
im asking the last time, otherwise i will be angry


[7/9/2023 2:54 PM] szybet
you dont listen


[7/9/2023 2:54 PM] szybet
qdebug works in release builds but without the extra ancy info


[7/9/2023 2:55 PM] tux_linux
well, yes, but for now in release builds we have got the class it is running in


[7/9/2023 2:55 PM] tux_linux
with qdebug we will lose it


[7/9/2023 2:55 PM] szybet
i dont care


[7/9/2023 2:55 PM] szybet
you complained about binary size


[7/9/2023 2:56 PM] szybet
and at the same time you are shipping unneceserry qstrings in releaser build


[7/9/2023 2:56 PM] tux_linux
Well, it helps us debug when users send reports
It's not useless


[7/9/2023 2:57 PM] szybet
and at the same time you dont allow to ship logs that are actually helpfull for me to help debug users


[7/9/2023 2:57 PM] szybet
https://tenor.com/view/stop-sign-pointing-serious-face-gif-14774198

{Embed}
https://tenor.com/view/stop-sign-pointing-serious-face-gif-14774198
/mnt/data/projects/git/conversations/media/stop-sign-pointing-1A274.png


[7/9/2023 3:04 PM] tux_linux
Then I would like it to use log when in release build and qdebug when in debug build
There is probably an ifdef thing that can help us do that
I will look into it


[7/9/2023 3:04 PM] szybet
fucking no


[7/9/2023 3:04 PM] szybet
just stop already


[7/9/2023 3:05 PM] szybet
all qt projects use qdebug and we use handicapped log function that uses inline and makes compiling, and binary size big


[7/9/2023 3:06 PM] szybet
fgvsdjn;moigfhnverwsiougbhnerwsioughbnrwseuigberwsuiofgvnhbweoifghbewsfuigobwerguoierbwsufgoi


[7/9/2023 3:06 PM] tux_linux
Do debug builds slow down performance on device?


[7/9/2023 3:07 PM] szybet
not with my knowledge


[7/9/2023 3:07 PM] szybet
sanki works fine.


[7/9/2023 3:08 PM] tux_linux
Then we must find out
1. Do inline definitions make it this big
2. Does it really run at the same speed
3. With extern variables can it weigh under 20m
If these three conditions are met then we can ship debug build in gui bundle


[7/9/2023 3:09 PM] tux_linux
So that users don't need to install a new gui bundle if we need to debug a problem
I also thought about this, I need to add an "export logs" button in settings


[7/9/2023 3:10 PM] szybet
another stupid idea

debug is for debug and not for releases.


[7/9/2023 3:10 PM] szybet
cant you do things like god binary fathers intended


[7/9/2023 3:10 PM] szybet
please


[7/9/2023 3:10 PM] szybet
please


[7/9/2023 3:10 PM] szybet
please


[7/9/2023 3:11 PM] tux_linux
This will make debugging for users harder, some will be lazy and won't want to install anything else on their device, we could lose contributors or testers
We have to find a solution
Just having plain logs without class name will be a mess on release builds


[7/9/2023 3:12 PM] tux_linux
I know shipping debug build is probably not an idea but then having a release build like this is not good either


[7/9/2023 3:12 PM] szybet
do you really think we dont have contributors because we dont have currently line numbers in debug logs?


[7/9/2023 3:13 PM] szybet
L O G S are for us to use, if i show it to dill he can do anything anyway with them


[7/9/2023 3:14 PM] tux_linux
I have an idea
We can ship both debug and release builds in each gui-bundle
Then put an option "debug mode" or smth that allows users to debug it in launching the other binary, then export logs


[7/9/2023 3:15 PM] szybet
you can do it

but you never again complain to me about rust binary sizes :D


[7/9/2023 3:16 PM] tux_linux
Well can you try to see if extern variables reduce binary size? Maybe just try one class


[7/9/2023 3:16 PM] tux_linux
One part of the program


[7/9/2023 3:16 PM] tux_linux
Thanks


[7/9/2023 3:17 PM] szybet
even if they dont ( they should ) its bad practice as you said and need to be changed anyway


[7/9/2023 3:17 PM] szybet
i will do it after i finish apps so dont wait for me


[7/9/2023 3:17 PM] tux_linux
?


[7/9/2023 3:17 PM] tux_linux
oh ok


[7/9/2023 3:17 PM] szybet
130 warnings tell you its bad :)


[7/9/2023 3:17 PM] tux_linux
Well please try one when you have time


[7/9/2023 3:17 PM] szybet
in a weerk


[7/9/2023 3:18 PM] tux_linux
Yea
Will see


[7/9/2023 3:26 PM] szybet
.


[7/9/2023 3:26 PM] [matrix] tux-linux
well, can you ask chatgpt "Do extern variables makes a binary smaller compared to inlining them?"
on a slow internet connection now


[7/9/2023 3:27 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-A3440.txt


[7/9/2023 3:27 PM] szybet
Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.Inlining can result in code duplication, especially if the variable is used in multiple places or across multiple translation units.v


[7/9/2023 3:28 PM] [matrix] tux-linux
ok, good, then we know it now


[7/9/2023 3:28 PM] [matrix] tux-linux
I can give you access to kernel repo but you have to promise me that

1. you won't transform it into another docker thing
2. you will make good use of it

as for inkbox repo i am still thinking


[7/9/2023 3:29 PM] szybet
1. lol
2. yes because after a year of contributing i will post cat images to the repo


[7/9/2023 3:30 PM] [matrix] tux-linux
ok


[7/9/2023 3:30 PM] [matrix] tux-linux
what does lol mean in this case


[7/9/2023 3:30 PM] szybet
that you should want it but whatever


[7/9/2023 3:30 PM] [matrix] tux-linux
well, i will first take care of imgtool then decide


[7/9/2023 3:31 PM] [matrix] tux-linux
you have to push to gitlab for kernel repo
or it will not be mirrored


[7/9/2023 3:31 PM] [matrix] tux-linux
maybe i can find a way for it to do it the reverse way


[7/9/2023 3:31 PM] szybet
yes because i love slow repos


[7/9/2023 3:31 PM] szybet
no.


[7/9/2023 3:32 PM] [matrix] tux-linux
what is no for


[7/9/2023 3:33 PM] szybet
do you know a project where contributors need to use a slow home server of the owner?


[7/9/2023 3:34 PM] szybet
no? quess what


[7/9/2023 3:34 PM] szybet
sorry im being harsh today, i'm just tired of all things


[7/9/2023 3:34 PM] [matrix] tux-linux
alpine linux?
Well it's not slow


[7/9/2023 3:34 PM] [matrix] tux-linux
but still


[7/9/2023 3:34 PM] [matrix] tux-linux
i will try to find a way to make github push to gitlab as well


[7/9/2023 3:34 PM] szybet
they use a organisation owned gitl;ab instance, if thats it


[7/9/2023 3:36 PM] [matrix] tux-linux
for regular commits home server works fine
of course for sending whole kernel source it will take more time
but thankfully you only do that once in a while


[7/9/2023 3:36 PM] szybet
still, no. no.


[7/9/2023 3:37 PM] szybet
its sad that i need to fight that we use a normal repo


[7/9/2023 3:37 PM] [matrix] tux-linux
well, for now, yes. yes.
i promise i will fight with github for it to do reverse mirroring


[7/9/2023 3:37 PM] szybet
wgbreiusydhgvnuiorsdeap


[7/9/2023 3:38 PM] [matrix] tux-linux
https://github.com/marketplace/actions/mirroring-repository
this could help

{Embed}
https://github.com/marketplace/actions/mirroring-repository
Mirroring Repository - GitHub Marketplace
Mirror a repository to another repository on GitHub, GitLab, BitBucket, AWS CodeCommit, etc
/mnt/data/projects/git/conversations/media/3306626-75BE8


[7/9/2023 3:39 PM] [matrix] tux-linux
i hope it is free
i don't have much internet to actually look at the page
i was browsing it with frogfind


[7/9/2023 3:39 PM] [matrix] tux-linux
matrix is very useful when it comes to slow data connections


[7/9/2023 3:43 PM] [matrix] tux-linux
image.png


[7/9/2023 3:43 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-EAACD.png


[7/9/2023 3:44 PM] [matrix] tux-linux
I added you


[7/9/2023 3:44 PM] szybet
what


[7/9/2023 3:44 PM] szybet
gitlab.com?


[7/9/2023 3:44 PM] szybet
or what


[7/9/2023 3:45 PM] [matrix] tux-linux
```
git remote set-url git@inkbox.ddns.net:tux-linux/kernel
```


[7/9/2023 3:45 PM] [matrix] tux-linux
for now


[7/9/2023 3:45 PM] [matrix] tux-linux
don't forget to git pull before doing anything thanks


[7/9/2023 3:46 PM] szybet
for now i will still with forking


[7/9/2023 3:46 PM] [matrix] tux-linux
no


[7/9/2023 3:46 PM] [matrix] tux-linux
i am looking into gh options for mirroring


[7/9/2023 3:47 PM] [matrix] tux-linux
well, i will add you on github as well


[7/9/2023 3:47 PM] [matrix] tux-linux
sometime soon i hope i will be able to set up mirroring


[7/9/2023 3:48 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[7/9/2023 3:48 PM] [matrix] tux-linux
it is done


[7/9/2023 3:48 PM] [matrix] tux-linux
please don't make a mess


[7/9/2023 3:49 PM] [matrix] tux-linux
what do you want to do exactly


[7/9/2023 3:49 PM] szybet
https://tenor.com/view/cat-cats-what-wut-crazy-gif-15043161

{Embed}
https://tenor.com/view/cat-cats-what-wut-crazy-gif-15043161
/mnt/data/projects/git/conversations/media/cat-cats-7AC98.png


[7/9/2023 3:50 PM] matterbridge#2154
[matrix] tux-linux 
.


[7/9/2023 3:51 PM] szybet
kobo nia model c


[7/9/2023 3:53 PM] [matrix] tux-linux
ok


[7/9/2023 3:54 PM] [matrix] tux-linux
please respect naming conventions and locations of sources
`kernel/linux-x.x.x-n306c`
also we should probably rename nia kernel source to `kernel/linux-4.x.x-n306a`


[7/9/2023 3:54 PM] [matrix] tux-linux
sometime soon


[7/10/2023 4:19 AM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Developer_mode
I wrote about developer mode and also found a bug I wouldn't have wanted to see

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Developer_mode
Index.php


[7/10/2023 4:20 AM] tux_linux
it is not critical currently because we don't use uid for anything else than developer mode but nice that it was found before


[7/10/2023 12:00 PM] szybet
cool


[7/10/2023 12:00 PM] szybet
`Kobo Glo with developer mode enabled; a watermark is visible at the top of the screen for security reasons`


[7/10/2023 12:00 PM] szybet
hwo does it make it more secure


[7/10/2023 12:04 PM] kuratius
Is the source code amazon uploads for their kindles due to licenses useful at all or is it all  just assembly disguised as source code?


[7/10/2023 12:04 PM] kuratius
It says "machine readable "


[7/10/2023 12:04 PM] szybet
lol what


[7/10/2023 12:04 PM] szybet
show it


[7/10/2023 12:04 PM] szybet
~~C is sometimes only machine readable hehe~~


[7/10/2023 12:05 PM] kuratius
https://www.amazon.com/gp/help/customer/display.html%3FnodeId%3D200203720

{Embed}
https://www.amazon.com/gp/help/customer/display.html%3FnodeId%3D200203720
Source Code Notice for Kindle E-Readers and Fire Tablets - Amazon C...
In accordance with certain free and open source software licenses, Amazon is pleased to make available to you for download an archive file of machine readable source code (


[7/10/2023 12:06 PM] szybet
I will tell you in a moment, just looking at it


[7/10/2023 12:06 PM] szybet
but its propably good? usable idk


[7/10/2023 12:08 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-5DE29.txt


[7/10/2023 12:08 PM] szybet
they even provide a build kernel script


[7/10/2023 12:08 PM] szybet
wow


[7/10/2023 12:08 PM] szybet
as for the rest, idk


[7/10/2023 12:09 PM] andi15701
well, is the kobo stuff human readable?


[7/10/2023 12:09 PM] kuratius
Guess that may be useful for future kindle ports


[7/10/2023 12:09 PM] andi15701
It is like a mirror house


[7/10/2023 12:10 PM] szybet
the problem are people, not the source code 😉


[7/10/2023 12:10 PM] szybet
i came to the project with stock kobo nia kernel compiled and working, after a week of tinkering


[7/10/2023 12:11 PM] szybet
there was no one that did that for other devices, sadly


[7/10/2023 12:24 PM] tux_linux
Well, it tells users that didn't know it that the software that is running on it might have been tampered with


[7/10/2023 12:25 PM] szybet
~~that an idiot hacked your device because he could just replace the kernel or put things in cache~~


[7/10/2023 12:25 PM] szybet
its a cool banner nothing against it


[7/10/2023 12:25 PM] szybet
but security reasons? nah


[7/10/2023 10:30 PM] [matrix] Szybet
keyboard tedt


[7/10/2023 10:30 PM] [matrix] Szybet
nice


[7/10/2023 10:31 PM] tux_linux
?


[7/10/2023 10:31 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230710_223126-4FAE9.jpg


[7/10/2023 10:32 PM] szybet
https://tenor.com/view/success-great-job-nice-great-success-great-gif-5586706

{Embed}
https://tenor.com/view/success-great-job-nice-great-success-great-gif-5586706
/mnt/data/projects/git/conversations/media/success-great-job-38CE1.png


[7/10/2023 10:32 PM] tux_linux
well, good
but no history is a no-go for me...


[7/10/2023 10:33 PM] szybet
yea, we have diffrent use cases for it


[7/10/2023 10:33 PM] szybet
you could look into text loading


[7/10/2023 10:33 PM] szybet
¯\_(ツ)_/¯


[7/10/2023 10:33 PM] tux_linux
i already have gomuks
¯\_(ツ)_/¯


[7/10/2023 10:35 PM] szybet
i will add image support


[7/10/2023 10:37 PM] tux_linux
i have worked a bit on functions.h today


[7/10/2023 10:37 PM] tux_linux
deleted string_writeconfig


[7/10/2023 10:37 PM] tux_linux
it's not pushed yet because i didn't test it


[7/10/2023 10:37 PM] tux_linux
but it compiles fine


[7/10/2023 10:38 PM] szybet
did i said that you need to move such generic functions to the library?


[7/10/2023 10:38 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A380C.png


[7/10/2023 10:38 PM] szybet
yep


[7/10/2023 10:39 PM] tux_linux
well, ok
but major work of renaming has been done in the source files
so for the function definition i will relocate it at some point

{Reactions}
👍 

[7/10/2023 11:52 PM] tux_linux
Got the Clara


[7/11/2023 12:12 AM] kuratius
clara 2e?


[7/11/2023 12:12 AM] szybet
Hd


[7/11/2023 12:17 AM] szybet
If you value your time first implement library enums for device checking, then apply the clara in inkbox binary


[7/11/2023 12:20 AM] tux_linux
wdym exactly


[7/11/2023 6:53 AM] szybet
If else clara


[7/11/2023 11:05 AM] szybet
oh


[7/11/2023 11:05 AM] szybet
also


[7/11/2023 11:05 AM] szybet
are you insane


[7/11/2023 11:06 AM] szybet
changing things in functions.h while not accepting audio pull request?


[7/11/2023 1:42 PM] tux_linux
yes
I didn't think about it


[7/11/2023 1:42 PM] tux_linux
I think I will do it by hand like user apps then


[7/11/2023 2:03 PM] szybet
what


[7/11/2023 2:03 PM] szybet
what user apps


[7/11/2023 2:04 PM] tux_linux
when you initially submitted user apps pr


[7/11/2023 2:04 PM] szybet
and what was there


[7/11/2023 2:04 PM] szybet
apart from questionable code


[7/11/2023 2:04 PM] tux_linux
i copied the code by hand


[7/11/2023 2:04 PM] szybet
scary


[7/11/2023 3:37 PM] tux_linux
i think i will start clara hd porting
then focus on audio


[7/11/2023 5:52 PM] andi15701
I think starting point for the clara is what is already done

{Reactions}
👍 

[7/11/2023 5:52 PM] andi15701
and documented


[7/11/2023 5:52 PM] andi15701
so not that 6.3 thing


[7/11/2023 9:49 PM] tux_linux
So I take the kernel sources that are already in my repo?


[7/11/2023 9:49 PM] andi15701
yes

{Reactions}
👍 

[7/11/2023 9:50 PM] andi15701
+ the description already given


[7/11/2023 9:50 PM] szybet
@tux-linux for once document interesting things on the way


[7/11/2023 9:50 PM] tux_linux
I will try


[7/11/2023 9:50 PM] szybet
🥺


[7/13/2023 11:40 PM] [matrix] Szybet
test


[7/13/2023 11:41 PM] [matrix] Szybet
fuck


[7/13/2023 11:41 PM] tux_linux
Hello


[7/13/2023 11:41 PM] [matrix] Szybet
without status bar i cant get rid of flickering


[7/13/2023 11:41 PM] [matrix] Szybet
the sdtatus bar can be empty


[7/13/2023 11:41 PM] [matrix] Szybet
i cant even overwrite it using platform plugin


[7/13/2023 11:42 PM] [matrix] Szybet
fewf


[7/13/2023 11:42 PM] [matrix] Szybet
ewfewewfewf


[7/13/2023 11:43 PM] [matrix] Szybet
dsqwaefdewf


[7/13/2023 11:43 PM] [matrix] Szybet
so stupid


[7/13/2023 11:43 PM] [matrix] Szybet
my god


[7/14/2023 7:36 PM] [matrix] Szybet
test


[7/14/2023 7:36 PM] [matrix] Szybet
test


[7/14/2023 7:36 PM] [matrix] Szybet
test


[7/14/2023 7:36 PM] [matrix] Szybet
test


[7/14/2023 7:36 PM] [matrix] Szybet
there is no way to do that sadly


[7/15/2023 12:23 AM] [matrix] Szybet
resolv.conf


[7/15/2023 12:23 AM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/resolv-6F32D.conf


[7/15/2023 12:24 AM] szybet
sended from kobo 😎


[7/15/2023 7:35 PM] szybet
As we make the annoucement about matrix clients, please make the bridge full


[7/16/2023 9:52 PM] szybet
@tux-linux


[7/16/2023 9:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-5DE13.png


[7/16/2023 9:58 PM] tux_linux
Wtf


[7/16/2023 10:00 PM] [matrix] andi1
about all that pine note thing, I have really to readjust some strategy, I hoped they would define epd-related interfaces in the kernel... that would flatten the path for a lot of kobo stuff.


[7/16/2023 10:01 PM] szybet
from what i can seen they just dropped the devices, and the open source community is developing everything for them. An invidual cant propably set standarts

this is sad i hope im wrong


[7/16/2023 10:03 PM] [matrix] andi1
What would be a good step anyways is to make it easier to have more things probed, like leds, power buttons, batteries, so less if (model) in inkbox


[7/16/2023 10:04 PM] szybet
if inkbox will survive, i would love to make everything clean, following the mainline kernel


[7/16/2023 10:05 PM] [matrix] andi1
about defining interfaces, adding new interfaces to kernel is possible, but it is a lot more than coding work


[7/16/2023 10:06 PM] [matrix] andi1
so other skills are important


[7/16/2023 10:08 PM] szybet
andi, as you are here: im transplanting kobo nia c dtb and waveform to inkbox image - how bad would it be if i misplaced it? is there error detection?


[7/17/2023 1:36 PM] tux_linux
why does the PR say "add initial Kobo Nia A sources" while it's for model C


[7/17/2023 1:37 PM] szybet
https://tenor.com/view/yes-penguin-gif-26365947

{Embed}
https://tenor.com/view/yes-penguin-gif-26365947
/mnt/data/projects/git/conversations/media/yes-penguin-ED80A.png


[7/17/2023 1:37 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[7/17/2023 1:37 PM] tux_linux
it means


[7/17/2023 1:38 PM] szybet
i m not good at model numbers and names, to remember them


[7/17/2023 1:38 PM] tux_linux
É@#$%?%&$


[7/17/2023 1:38 PM] szybet
is it only in the pr name?


[7/17/2023 1:38 PM] tux_linux
let's do some renaming


[7/17/2023 1:38 PM] tux_linux
no...


[7/17/2023 1:38 PM] tux_linux
🥴


[7/17/2023 1:38 PM] szybet
really 😂


[7/17/2023 1:38 PM] szybet
i will repair it today


[7/17/2023 1:38 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-8EBEF.png


[7/17/2023 1:38 PM] szybet
or if you dont want to wait, you can do it


[7/17/2023 1:38 PM] szybet
oh crap XD


[7/17/2023 1:38 PM] tux_linux
i think i can do it


[7/17/2023 1:39 PM] szybet
your decission


[7/17/2023 1:50 PM] tux_linux
well, it's closed but i merged it
complicated


[7/17/2023 1:50 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/commit/2c8084f529cd158438e0199170803496f67190fb


[7/17/2023 1:59 PM] szybet
github is down?


[7/17/2023 2:45 PM] tux_linux
no?


[7/17/2023 7:04 PM] szybet
Litwo, Ojczyzno moja! ty jesteś jak zdrowie;
Ile cię trzeba cenić, ten tylko się dowie,
Kto cię stracił. Dziś piękność twą w całej ozdobie
Widzę i opisuję, bo tęsknię po tobie.

Panno święta, co Jasnej bronisz Częstochowy
I w Ostrej świecisz Bramie! Ty, co gród zamkowy
Nowogródzki ochraniasz z jego wiernym ludem!
Jak mnie dziecko do zdrowia powróciłaś cudem
(— Gdy od płaczącej matki, pod Twoją opiekę
Ofiarowany martwą podniosłem powiekę;
I zaraz mogłem pieszo, do Twych świątyń progu
Iść za wrócone życie podziękować Bogu —)
Tak nas powrócisz cudem na Ojczyzny łono!...
Tymczasem, przenoś moją duszę utęsknioną
Do tych pagórków leśnych, do tych łąk zielonych,
Szeroko nad błękitnym Niemnem rozciągnionych;
Do tych pól malowanych zbożem rozmaitem,
Wyzłacanych pszenicą, posrebrzanych żytem;
Gdzie bursztynowy świerzop, gryka jak śnieg biała,
Gdzie panieńskim rumieńcem dzięcielina pała,
A wszystko przepasane jakby wstęgą, miedzą
Zieloną, na niej zrzadka ciche grusze siedzą.


[7/17/2023 7:05 PM] szybet
im just testing


[7/17/2023 7:05 PM] szybet
ignore me


[7/17/2023 7:05 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message1-2ED13.txt


[7/17/2023 8:39 PM] szybet
@tux-linux i almost finished the matrix client, would you like to record it?


[7/17/2023 8:40 PM] szybet
i have personal stuff on matrix and i simply wont


[7/17/2023 8:45 PM] tux_linux
you can't record only the dev channel of inkbox?


[7/17/2023 8:45 PM] tux_linux
i can but it will be after clara hd port


[7/17/2023 8:52 PM] szybet
i could


[7/17/2023 8:52 PM] szybet
still nah


[7/17/2023 8:52 PM] szybet
too lazy


[7/17/2023 8:52 PM] szybet
a few images will do


[7/17/2023 9:50 PM] [matrix] tux-linux
andi1: tell me if you could be able to check discord soon, otherwise can I ask for guidance on a problem here on matrix?


[7/17/2023 9:50 PM] [matrix] tux-linux
thanks


[7/17/2023 10:14 PM] [matrix] Szybet
test in user app


[7/17/2023 10:14 PM] szybet
awesome


[7/17/2023 10:14 PM] szybet
first try at user app creation and it worked


[7/17/2023 10:14 PM] szybet
i perfected using my own code


[7/17/2023 10:14 PM] szybet
astonishing


[7/17/2023 10:18 PM] [matrix] Szybet
hehehe


[7/17/2023 10:34 PM] szybet
@tux-linux give me permissions to #announcements


[7/17/2023 10:34 PM] szybet
or you will announce it?


[7/17/2023 10:41 PM] szybet
well @tux-linux you can announce it there with @ever... i can call it? why? it shouldt be like that? anyway do that


[7/17/2023 10:41 PM] szybet
announce iterm and nachat + the go client


[7/17/2023 10:41 PM] szybet
and inform that this channel will be used for notyfications about updated to the project


[7/17/2023 10:42 PM] szybet
i also posted about it on mobilereads to leave a trace on the internet


[7/17/2023 11:47 PM] tux_linux
You can do it


[7/18/2023 12:58 AM] tux_linux
env -i is important


[7/18/2023 7:04 AM] szybet
Nope, it breaks things


[7/18/2023 9:33 PM] szybet
@tux-linux select a path for user apps to have access to onboard


[7/18/2023 9:33 PM] szybet
for syncthing


[7/18/2023 9:33 PM] tux_linux
app-data?


[7/18/2023 9:34 PM] szybet
if else it?


[7/18/2023 9:34 PM] szybet
and mount directly?


[7/18/2023 9:34 PM] tux_linux
what do you want to do with it


[7/18/2023 9:35 PM] szybet
sync books


[7/18/2023 9:35 PM] szybet
aaaand school notes


[7/18/2023 9:35 PM] szybet
🥴


[7/18/2023 9:37 PM] tux_linux
i will do it


[7/18/2023 9:37 PM] tux_linux
the change


[7/18/2023 9:38 PM] szybet
add a feature


[7/18/2023 9:38 PM] tux_linux
no


[7/18/2023 9:38 PM] szybet
what


[7/18/2023 9:38 PM] tux_linux
i will tell gui_apps service to switch mount point if it encounters an app named `Syncthing`


[7/18/2023 9:38 PM] szybet
no...


[7/18/2023 9:39 PM] szybet
just give me access


[7/18/2023 9:39 PM] szybet
and warn the user


[7/18/2023 9:39 PM] szybet
any converter / reading app would need that


[7/18/2023 9:39 PM] szybet
oh also not in app-data because it would break things for older apps if i want to implement it for feathernotes for example


[7/18/2023 9:40 PM] szybet
so /mnt/onboard


[7/18/2023 9:40 PM] szybet
fine?


[7/18/2023 9:40 PM] szybet
either this or i hack my ereader with gui apps patch and dont publish this app


[7/18/2023 9:41 PM] tux_linux
`/system-onboard`


[7/18/2023 9:41 PM] szybet
fine


[7/18/2023 9:41 PM] szybet
also, syncing decks for sanki would need that


[7/18/2023 9:41 PM] szybet
¯\_(ツ)_/¯


[7/18/2023 9:43 PM] tux_linux
does fat32 care about user ids?


[7/18/2023 9:43 PM] szybet
it doesnt support linux permissions i think


[7/18/2023 9:43 PM] tux_linux
good


[7/18/2023 9:52 PM] matterbridge#2154
[matrix] Maximilian Gaedig ⚡️ (@mg:maximiliangaedig.com) 
For syncthing? Please publish it I'd love to use it to sync my books/other stuff


[7/18/2023 9:52 PM] szybet
we came to a conclusion, it will be supported i will publish the app soon


[7/18/2023 9:53 PM] [matrix] Maximilian Gaedig ⚡
Awesome


[7/18/2023 9:53 PM] szybet
@tux-linux accept audio in inkbox


[7/18/2023 9:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230718_113113117-DA2BD.png


[7/18/2023 9:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230718_113113117-47E33.png


[7/18/2023 9:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230718_113113117-CE709.png


[7/18/2023 9:54 PM] szybet
if you dont have time for things then at least dont slow me down


[7/18/2023 9:54 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230718_113113117-BB735.png


[7/18/2023 9:54 PM] szybet
its not a bug, its a feature ~~if the touchscreen also overflowed~~


[7/18/2023 9:54 PM] tux_linux
there is no touchscreen


[7/18/2023 9:55 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[7/18/2023 9:55 PM] tux_linux
I Hate This


[7/18/2023 9:55 PM] szybet
wait for andi


[7/18/2023 9:55 PM] szybet
simply


[7/18/2023 9:55 PM] tux_linux
i still have other problems


[7/18/2023 9:56 PM] tux_linux
not only that one


[7/18/2023 10:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F281B.png


[7/18/2023 10:53 PM] szybet
my god really


[7/18/2023 10:53 PM] szybet
cant you release a feature


[7/18/2023 10:57 PM] tux_linux
It's specific to iterm


[7/18/2023 11:00 PM] szybet
still


[7/18/2023 11:16 PM] szybet
syncthing speed for the nia is really good, as for a 200 Mb library


[7/18/2023 11:16 PM] szybet
less than in a few minutes, 2? 3?


[7/18/2023 11:16 PM] szybet
on wifi


[7/18/2023 11:17 PM] szybet
100#% cpu


[7/19/2023 12:07 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/syncthing-440F6.zip


[7/19/2023 12:07 AM] szybet
i will tommorow upload it to the repo


[7/19/2023 1:12 AM] tux_linux
Good


[7/19/2023 4:03 AM] tux_linux
also how can you live with dejavu sans as a programming font?


[7/19/2023 4:03 AM] tux_linux
fine if you find it ok, but my eyes are bleeding... 😅


[7/19/2023 4:51 AM] tux_linux
even some confusion here...

{Attachments}
/mnt/data/projects/git/conversations/media/image-E6DCE.png


[7/19/2023 4:51 AM] tux_linux
btw


[7/19/2023 4:52 AM] tux_linux
oops again? 😉

{Attachments}
/mnt/data/projects/git/conversations/media/image-BA09C.png


[7/19/2023 8:04 AM] szybet
I didnt noticed

only you have the power to look at text and quess the font


[7/19/2023 8:04 AM] szybet
ye XD


[7/19/2023 2:27 PM] szybet
https://www.youtube.com/watch?v=AA1dulBeBKc

{Embed}
Mertcan Özdemir
https://www.youtube.com/watch?v=AA1dulBeBKc
QtDoom: Portable Doom wrapper written in Qt
I wrote a wrapper for original doom in qt so it can work on any platform. Originally it was only working on linux. Now it should be able to run anywhere. It is at rough stage but it's working. 
Working:
-Gameplay
-Mouse/Keyboard inputs
-Save/load
-Resizing

Not working:
-Sounds(WIP)
/mnt/data/projects/git/conversations/media/maxresdefault-132CA.jpg


[7/19/2023 2:27 PM] tux_linux
o k


[7/19/2023 2:28 PM] szybet
where is the s o u r c e


[7/19/2023 2:36 PM] szybet
nowhere


[7/19/2023 2:36 PM] szybet
https://github.com/ozkl/doomgeneric/tree/master/doomgeneric

{Embed}
https://github.com/ozkl/doomgeneric/tree/master/doomgeneric
doomgeneric/doomgeneric at master · ozkl/doomgeneric
Easily portable doom. Contribute to ozkl/doomgeneric development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/doomgeneric-B401F


[7/19/2023 2:37 PM] szybet
i will use this


[7/19/2023 2:37 PM] tux_linux
you really need to do it?


[7/19/2023 2:37 PM] szybet
why not


[7/19/2023 2:37 PM] szybet
lol


[7/19/2023 2:38 PM] tux_linux
well ok


[7/19/2023 2:38 PM] szybet
hehe


[7/19/2023 2:46 PM] tux_linux
also I would like you to try the rootfs with this new commit, see if it improves anything on the Nia regarding display behavior with qt
https://github.com/Kobo-InkBox/rootfs/commit/fd0b0a88255a545346a7ba5a645008b3d2673486
thanks

{Embed}
https://github.com/Kobo-InkBox/rootfs/commit/fd0b0a88255a545346a7ba5a645008b3d2673486
`inkbox_gui`: Device ID fix · Kobo-InkBox/rootfs@fd0b0a8
/mnt/data/projects/git/conversations/media/fd0b0a88255a545346a7ba5a645008b3d2673486-4BA68


[7/19/2023 2:46 PM] szybet
why would it


[7/19/2023 2:47 PM] tux_linux
well, the device code changes fbink's behavior


[7/19/2023 2:47 PM] tux_linux
from what I understood


[7/19/2023 2:47 PM] tux_linux
the nia was using the mini device code


[7/19/2023 2:47 PM] tux_linux
the glo hd too


[7/19/2023 2:47 PM] tux_linux
the clara hd didn't want to work with it and then I found out fbink doesn't rely only on kobo_config.sh but also on the device id at the end of the `version` file


[7/19/2023 2:47 PM] tux_linux
that's what made it work on clara hd


[7/19/2023 2:48 PM] szybet
it was detecting the nia?


[7/19/2023 2:48 PM] szybet
fbink


[7/19/2023 2:48 PM] tux_linux
no


[7/19/2023 2:48 PM] tux_linux
well, yes


[7/19/2023 2:48 PM] tux_linux
but in some ways it still thought it was a mini i think


[7/19/2023 2:48 PM] szybet
i speak for mine


[7/19/2023 2:48 PM] szybet
my god


[7/19/2023 2:48 PM] szybet
ok i will try

{Reactions}
👍 

[7/19/2023 2:48 PM] tux_linux
maybe that's why a2 partially worked


[7/19/2023 2:48 PM] szybet
but i doubt it


[7/19/2023 2:48 PM] tux_linux
or maybe it will make it worse


[7/19/2023 2:48 PM] tux_linux
hehe


[7/19/2023 5:11 PM] tux_linux
test


[7/19/2023 5:11 PM] szybet
tset


[7/19/2023 5:12 PM] szybet
yea matrix bridge is down


[7/19/2023 5:12 PM] szybet
ok not anymore


[7/19/2023 5:17 PM] tux_linux
test


[7/19/2023 5:18 PM] szybet
are you alright


[7/19/2023 5:18 PM] tux_linux
yes


[7/19/2023 5:18 PM] szybet
are you testing a discord cli client


[7/19/2023 5:18 PM] tux_linux
no


[7/19/2023 5:18 PM] szybet
then


[7/19/2023 5:19 PM] tux_linux
hello there


[7/19/2023 5:20 PM] szybet
are you drunk


[7/19/2023 5:20 PM] tux_linux
check matrix


[7/19/2023 5:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-48885.png


[7/19/2023 5:20 PM] szybet
oh finally


[7/19/2023 5:20 PM] szybet
thank you


[7/19/2023 5:20 PM] tux_linux
most of the channels are there


[7/19/2023 5:21 PM] matty123458687
Whats matrix?


[7/19/2023 5:22 PM] matty123458687
Figured it out. 👍


[7/19/2023 6:12 PM] [matrix] Szybet
image.png


[7/19/2023 6:12 PM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-7D122.png


[7/19/2023 6:12 PM] [matrix] Szybet
doom


[7/19/2023 6:12 PM] [matrix] Szybet
🧙


[7/19/2023 6:13 PM] tux_linux
ye


[7/19/2023 9:12 PM] szybet
```
Using . for configuration and saves
V_Init: allocate screens.
M_LoadDefaults: Load system defaults.
saving config in .default.cfg
-iwad not specified, trying a few iwad names
Trying IWAD file:doom2.wad
Trying IWAD file:plutonia.wad
Trying IWAD file:tnt.wad
Trying IWAD file:doom.wad
Trying IWAD file:DOOM1.WAD
W_Init: Init WADfiles.
 adding DOOM1.WAD
Using ./.savegame/ for savegames
===========================================================================
                            DOOM Shareware
===========================================================================
 Doom Generic is free software, covered by the GNU General Public
 License.  There is NO warranty; not even for MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE. You are welcome to change and distribute
 copies under certain conditions. See the source for more information.
===========================================================================
I_Init: Setting up machine state.
M_Init: Init miscellaneous info.
R_Init: Init DOOM refresh daemon - ...................
P_Init: Init Playloop state.
S_Init: Setting up sound.
D_CheckNetGame: Checking network game status.
startskill 2  deathmatch: 0  startmap: 1  startepisode: 1
player 1 of 1 (1 nodes)
Emulating the behavior of the 'Doom 1.9' executable.
HU_Init: Setting up heads up display.
ST_Init: Init status bar.
I_InitGraphics: framebuffer: x_res: 640, y_res: 400, x_virtual: 640, y_virtual: 400, bpp: 32
I_InitGraphics: framebuffer: RGBA: 8888, red_off: 16, green_off: 8, blue_off: 0, transp_off: 24
I_InitGraphics: DOOM screen size: w x h: 320 x 200
I_InitGraphics: Auto-scaling factor: 2
```


[7/19/2023 9:12 PM] szybet
well this is progress


[7/19/2023 9:12 PM] szybet
quess what


[7/19/2023 9:13 PM] tux_linux
it was programmed in qt4


[7/19/2023 9:13 PM] szybet
im using doomgeneric-rs to make a library to use with qt because its fucked up to use a makefile program with qt cmake / qmake lol


[7/19/2023 9:13 PM] szybet
what?


[7/19/2023 9:14 PM] tux_linux
well i was just guessing


[7/19/2023 9:14 PM] szybet
there is nothing


[7/19/2023 9:14 PM] szybet
NOTHING


[7/19/2023 9:14 PM] szybet
with qt


[7/19/2023 9:16 PM] tux_linux
ok


[7/19/2023 11:13 PM] szybet
anyone any idea how to efficiently transfer 1.024Mb of data between processess 3 times a second in a kobo?


[7/19/2023 11:14 PM] szybet
i think i will just go with a file in tmpfs because i dont care that much but well


[7/19/2023 11:16 PM] tux_linux
fifo?


[7/19/2023 11:16 PM] tux_linux
netcat?


[7/19/2023 11:16 PM] szybet
https://tenor.com/view/hug-sad-gif-22067065

{Embed}
https://tenor.com/view/hug-sad-gif-22067065
/mnt/data/projects/git/conversations/media/hug-sad-35079.png


[7/19/2023 11:16 PM] szybet
not fifo


[7/19/2023 11:16 PM] szybet
something easy


[7/19/2023 11:16 PM] tux_linux
netcat


[7/19/2023 11:16 PM] szybet
netcat what


[7/19/2023 11:16 PM] tux_linux
nc


[7/19/2023 11:17 PM] tux_linux
https://en.wikipedia.org/wiki/Netcat

{Embed}
https://en.wikipedia.org/wiki/Netcat
Netcat
netcat (often abbreviated to nc) is a computer networking utility for reading from and writing to network connections using TCP or UDP. The command is designed to be a dependable back-end that can be used directly or easily driven by other programs and scripts. At the same time, it is a feature-rich network debugging and investigation tool, sinc...
/mnt/data/projects/git/conversations/media/Netcat-DB136.png


[7/19/2023 11:17 PM] szybet
what protocol is this


[7/19/2023 11:17 PM] tux_linux
transfer something from some port to another port


[7/19/2023 11:18 PM] szybet
maybe


[7/20/2023 1:02 AM] kuratius
Does that avoid disk writes?


[7/20/2023 1:02 AM] tux_linux
of course


[7/20/2023 1:02 AM] tux_linux
we don't use swap ;p


[7/20/2023 1:03 AM] kuratius
So tmpfs is rammapped?


[7/20/2023 1:03 AM] tux_linux
yes


[7/20/2023 1:03 AM] tux_linux
thankfully


[7/20/2023 1:06 AM] kuratius
I wonder how inter process communication normally happens, I've used stuff like openMPI for it once but it does lots of unnecessary copying so it has bad performance


[7/20/2023 1:06 AM] tux_linux
we do too 😉


[7/20/2023 1:06 AM] tux_linux
well, not openmpi


[7/20/2023 1:06 AM] tux_linux
we use a lot of tmpfs files because we don't know how to properly handle ipc


[7/20/2023 1:06 AM] tux_linux
hehe


[7/20/2023 1:06 AM] tux_linux
(yet)


[7/20/2023 1:07 AM] kuratius
Shared memory is probably difficult to implement with address randomization and whatnot, so a file sounds like it'd actually be a good option


[7/20/2023 1:07 AM] tux_linux
idk


[7/20/2023 1:08 AM] tux_linux
in Qt we use signal and slots for simple strings or ints


[7/20/2023 1:08 AM] tux_linux
that's about it


[7/20/2023 1:08 AM] kuratius
Apparently there is a way to make a shared mmap region or something


[7/20/2023 1:08 AM] kuratius
https://man7.org/linux/man-pages/man7/shm_overview.7.html

{Reactions}
👍 

[7/20/2023 3:37 AM] tux_linux
A bit too much "Small fix"'es out there...

{Attachments}
/mnt/data/projects/git/conversations/media/image-928B4.png


[7/20/2023 9:06 PM] [matrix] Szybet
doom.png


[7/20/2023 9:06 PM] [matrix] Szybet


{Attachments}
/mnt/data/projects/git/conversations/media/doom-CB6D0.png


[7/20/2023 9:06 PM] [matrix] Szybet
finally...


[7/20/2023 9:08 PM] tux_linux
good


[7/20/2023 9:08 PM] tux_linux
how do you play it now


[7/20/2023 9:13 PM] szybet
by spilling blood on demons


[7/20/2023 9:14 PM] tux_linux
can you play it with a touchscreen


[7/20/2023 9:14 PM] tux_linux
please say yes


[7/20/2023 9:16 PM] szybet
i mean i will add buttons?


[7/20/2023 9:16 PM] tux_linux
good


[7/20/2023 9:16 PM] szybet
it will be not playable anyway


[7/20/2023 9:16 PM] szybet
eink


[7/20/2023 9:16 PM] tux_linux
still


[7/20/2023 9:16 PM] tux_linux
vnc maybe


[7/20/2023 9:16 PM] szybet
im just proving a point with it


[7/20/2023 9:16 PM] szybet
what vnc


[7/20/2023 9:16 PM] szybet
int native


[7/20/2023 9:17 PM] tux_linux
`QT_QPA_PLATFORM="vnc:size=758x1024"`


[7/20/2023 9:17 PM] szybet
@tux-linux decide on the model identify


[7/20/2023 9:17 PM] tux_linux
wdym


[7/20/2023 9:17 PM] szybet
i dont see any reason to use vnc on ereader to launch doom on vnc


[7/20/2023 9:17 PM] tux_linux
well, people see reasons


[7/20/2023 9:17 PM] tux_linux
sometimes


[7/20/2023 9:17 PM] szybet
you could run doom on your toaster


[7/20/2023 9:17 PM] szybet
nah


[7/20/2023 9:17 PM] tux_linux
of course


[7/20/2023 9:18 PM] szybet
im suprised noone did it before


[7/20/2023 9:18 PM] szybet
just one guy 12 years before on pocketbook


[7/20/2023 9:19 PM] szybet
and someone on remarkable


[7/20/2023 9:19 PM] tux_linux
no one


[7/20/2023 9:19 PM] tux_linux
well, yes


[7/20/2023 9:59 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Peek_2023-07-20_21-58-0F590.gif


[7/20/2023 9:59 PM] szybet
this will be the worst code i have ever written


[7/20/2023 10:15 PM] tux_linux
how do you move


[7/21/2023 12:02 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Peek_2023-07-21_00-02-595E8.gif


[7/21/2023 12:02 AM] szybet
like that


[7/21/2023 12:04 AM] tux_linux
good


[7/21/2023 12:16 AM] szybet
i doubt it will be efficient enough for kobo


[7/21/2023 12:17 AM] tux_linux
test it


[7/21/2023 12:18 AM] szybet
https://doc.qt.io/qt-6/qgraphicsview.html#OptimizationFlag-enum

{Embed}
https://doc.qt.io/qt-6/qgraphicsview.html
The QGraphicsView class provides a widget for displaying the contents of a


[7/21/2023 12:18 AM] szybet
tomorow

{Reactions}
👍 

[7/21/2023 12:18 AM] szybet
m


[7/21/2023 3:37 AM] tux_linux
Go to page is broken since 2.0 probably
how did THAT break now


[7/21/2023 3:38 AM] tux_linux
well at this point 2.0 has so many bugs that i don't care


[7/21/2023 3:39 AM] tux_linux
i will fix it when i can


[7/21/2023 4:07 AM] tux_linux
the fix was so stupid i don't even see how we could have missed it in months of testing


[7/21/2023 4:07 AM] tux_linux
but well, it is what it is


[7/21/2023 4:56 AM] tux_linux
well, how do you want nachat to even work

{Attachments}
/mnt/data/projects/git/conversations/media/image-5DAD9.png


[7/21/2023 9:40 AM] szybet
https://github.com/Kobo-InkBox/compiled-binaries/pull/2

{Embed}
https://github.com/Kobo-InkBox/compiled-binaries/pull/2
rss + okular update - its not for 2.0 by Szybet · Pull Request #2 ·...
/mnt/data/projects/git/conversations/media/2-1B3C3


[7/21/2023 9:41 AM] szybet
thats your fault


[7/21/2023 9:43 AM] szybet
i will rewrite it anyway


[7/21/2023 2:11 PM] tux_linux
existing users won't even be able to run it

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230721-081118-68C2B.png


[7/21/2023 5:09 PM] szybet
If someone will care i will repair it


[7/21/2023 5:09 PM] szybet
as for now, you can do it yourself


[7/21/2023 8:11 PM] [matrix] tux-linux
i can't bridge discord threads with matterbridge because they are not channels


[7/21/2023 8:11 PM] [matrix] tux-linux
so it doesn't work


[7/21/2023 8:12 PM] szybet
they are


[7/21/2023 8:12 PM] szybet
lol


[7/21/2023 8:12 PM] szybet
from what i remember the channel id is taken from the url


[7/21/2023 8:51 PM] tux_linux
Then it doesn't work because I tried that


[7/21/2023 8:52 PM] szybet
really


[7/21/2023 8:52 PM] tux_linux
yes


[7/21/2023 8:54 PM] szybet
sad


[7/21/2023 8:54 PM] szybet
i will upload full doom video


[7/21/2023 8:54 PM] szybet
and you will upload it to your youtube ok?


[7/21/2023 8:54 PM] szybet
and credit me


[7/21/2023 8:54 PM] tux_linux
ok


[7/21/2023 8:55 PM] szybet
also i wont release a user app because its unusable anyway, its only a bit better with what niluje suggested


[7/21/2023 8:55 PM] szybet
the ppocketbook video has a monochrome special doom propably


[7/21/2023 8:56 PM] szybet
i just wanted to prove a point


[7/21/2023 8:59 PM] szybet
https://github.com/Szybet/doomgeneric-rs-inkbox/blob/main/doom.mp4

{Embed}
https://github.com/Szybet/doomgeneric-rs-inkbox/blob/main/doom.mp4
doomgeneric-rs-inkbox/doom.mp4 at main · Szybet/doomgeneric-rs-inkbox
Using doomgeneric from rust. Contribute to Szybet/doomgeneric-rs-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/doomgeneric-rs-inkbox-E2772


[7/21/2023 8:59 PM] szybet
grab it


[7/21/2023 9:00 PM] tux_linux
make a user app anyway
plenty of people will install inkbox just to try it


[7/21/2023 9:00 PM] szybet
one person requests it


[7/21/2023 9:00 PM] szybet
1


[7/21/2023 9:01 PM] szybet
1 1o 1n 1e 1


[7/21/2023 9:01 PM] tux_linux
it may attract more


[7/21/2023 9:01 PM] tux_linux
please


[7/21/2023 9:01 PM] szybet
i will do it

{Reactions}
👍 

[7/21/2023 9:01 PM] szybet
god


[7/21/2023 9:01 PM] szybet
can you just make anbother table


[7/21/2023 9:01 PM] szybet
"not packed" or smth


[7/21/2023 9:02 PM] szybet
im really not interested in packing it up


[7/21/2023 9:02 PM] szybet
works like crap really


[7/21/2023 9:02 PM] szybet
oh yes


[7/21/2023 9:02 PM] szybet
listen


[7/21/2023 9:02 PM] szybet
make another table in application repo


[7/21/2023 9:02 PM] szybet
and list there okular and doom


[7/21/2023 9:02 PM] szybet
working but not packed because they work like crap


[7/21/2023 9:04 PM] tux_linux
do it


[7/21/2023 9:04 PM] szybet
make a second table


[7/21/2023 9:05 PM] szybet
please


[7/21/2023 9:05 PM] szybet
at least okular will be there


[7/21/2023 9:05 PM] szybet
also can you please upload the video fast


[7/21/2023 9:05 PM] szybet
i want to finish, publish it on mobile reads and go to sleep


[7/21/2023 9:06 PM] szybet
you can pack it if you want, you need to launch qt-doom and image-doom at the same time + /tmp must exists


[7/21/2023 9:06 PM] tux_linux
ok


[7/21/2023 9:07 PM] tux_linux
you know that no one will reply on mobileread?


[7/21/2023 9:07 PM] tux_linux
probably


[7/21/2023 9:07 PM] szybet
i know


[7/21/2023 9:07 PM] szybet
nachat and rss guard, noone


[7/21/2023 9:07 PM] szybet
not like i care


[7/21/2023 9:08 PM] szybet
im just doing it for the google search


[7/21/2023 9:08 PM] tux_linux
also maybe you can give me access to the repo itself, i would like to change the buttons that have < > with proper arrows


[7/21/2023 9:08 PM] szybet
i dont want my work to vanish the moment my github is banned because microsoft is a bad company


[7/21/2023 9:08 PM] tux_linux
?


[7/21/2023 9:08 PM] szybet
what


[7/21/2023 9:08 PM] szybet
they ban random people


[7/21/2023 9:08 PM] tux_linux
they banned you?


[7/21/2023 9:09 PM] tux_linux
oh ok


[7/21/2023 9:09 PM] tux_linux
your down button has an arrow
the three others don't


[7/21/2023 9:09 PM] szybet
sure, please upload the video, then i will edit the readme and add you


[7/21/2023 9:09 PM] tux_linux
it is uploading


[7/21/2023 9:09 PM] tux_linux
i am on a slow network


[7/21/2023 9:09 PM] tux_linux
it says ~10m


[7/21/2023 9:10 PM] szybet
i dont care
the code literally writes every frame to /tmp and reads it


[7/21/2023 9:10 PM] szybet
its not a project for me


[7/21/2023 9:10 PM] szybet
its a break from programming


[7/21/2023 9:10 PM] szybet
i wanted to do something funny


[7/21/2023 9:51 PM] szybet
Please till end of this weekend figure the model identyfication for inkbox


[7/21/2023 9:51 PM] szybet
i will port vnc and then i wont to finish nia c, and do the reader finally


[7/21/2023 9:51 PM] tux_linux
what do you mean


[7/21/2023 9:52 PM] tux_linux
vnc?


[7/21/2023 9:54 PM] szybet
also for the reader: i will only support epub ( txt maybe too ), but not pdf because there is a better alternative already - sended it to you, it supports simple bookmarks saving directly to the pdf which is awesome but will need some love to make it touch friendly

tldr i will not spend time on something that will be replaced by something else anyways, so you can do the pdf app ( app but integrated tightly )

propably because you dont have time, use the old one for pdfs ( maybe txt too pls? ) and the new one for epubs


[7/21/2023 9:54 PM] szybet
the fancy rust one


[7/21/2023 9:55 PM] tux_linux
and highlighting?


[7/21/2023 9:55 PM] tux_linux
what do you mean


[7/21/2023 9:55 PM] szybet
pdf app? nope sadly


[7/21/2023 9:55 PM] szybet
but bookmarks are better than nothing


[7/21/2023 9:55 PM] szybet
so certain apps can find out its a model c not a


[7/21/2023 9:55 PM] szybet
propably a if else in kernel repo somewhere


[7/21/2023 9:56 PM] tux_linux
i will put it in the kernel version


[7/21/2023 9:56 PM] tux_linux
hang on a second


[7/21/2023 9:56 PM] szybet
oh cool


[7/21/2023 9:56 PM] szybet
yes good idea


[7/21/2023 9:56 PM] szybet
but like do it properly


[7/21/2023 9:56 PM] szybet
add like -model:a


[7/21/2023 9:57 PM] szybet
and model:c


[7/21/2023 9:59 PM] tux_linux
done


[7/21/2023 10:00 PM] szybet
this will be shown in uname?


[7/21/2023 10:00 PM] tux_linux
yes


[7/21/2023 10:01 PM] szybet
i hope there is a c++ command to get it


[7/21/2023 10:01 PM] szybet
or /proc


[7/21/2023 10:01 PM] szybet
but anyway


[7/21/2023 10:01 PM] szybet
thank


[7/21/2023 10:02 PM] tux_linux
i made small changes


[7/21/2023 10:02 PM] tux_linux
it will be `-inkbox-n306x`


[7/21/2023 10:02 PM] szybet
okok


[7/21/2023 10:02 PM] tux_linux
`cat /proc/version`


[7/21/2023 10:02 PM] tux_linux
um well maybe not


[7/21/2023 10:03 PM] tux_linux
actually i think yes


[7/21/2023 10:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230721_200333814-6E17A.jpg


[7/21/2023 10:04 PM] tux_linux
yes


[7/21/2023 10:04 PM] szybet
ye


[7/22/2023 2:46 AM] tux_linux
https://github.com/Szybet/inkbox-list-networks/commit/abc4bdd79c58970e93a8ae8cf2a2f96a0470c4b9
I did it

{Embed}
https://github.com/Szybet/inkbox-list-networks/commit/abc4bdd79c58970e93a8ae8cf2a2f96a0470c4b9
N249: Account for wlan0 interface · Szybet/inkbox-list-networks@abc...
/mnt/data/projects/git/conversations/media/abc4bdd79c58970e93a8ae8cf2a2f96a0470c4b9-03033


[7/22/2023 8:38 AM] szybet
I have doubts about it but whatever, yes you did it, i pointed what to change


[7/22/2023 2:36 PM] tux_linux
you pointed what to change? where


[7/22/2023 2:54 PM] szybet
The only thing in main


[7/22/2023 2:55 PM] tux_linux
?


[7/22/2023 2:55 PM] szybet
Only to change the if else

Or is the name diffrent again?


[7/22/2023 2:56 PM] tux_linux
it was not only that


[7/22/2023 2:56 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-A6C37.png


[7/22/2023 4:52 PM] tux_linux
did you try new rootfs with modified gui_apps file?


[7/22/2023 5:11 PM] szybet
yestarday I said tommorow


[7/22/2023 5:11 PM] szybet
and now is tommorow


[7/22/2023 5:12 PM] [matrix] tux-linux
well, then it is today


[7/22/2023 5:12 PM] [matrix] tux-linux
good


[7/22/2023 5:12 PM] szybet
and it will be fhe next day today for the next 8 hours


[7/22/2023 5:12 PM] szybet
so no worryeis


[7/22/2023 5:12 PM] [matrix] tux-linux
ok


[7/22/2023 5:12 PM] [matrix] tux-linux
np


[7/23/2023 10:25 PM] szybet
Tryied rootfs - no noticable change, maybe? idk... could be just placebo


[7/23/2023 10:40 PM] tux_linux
maybe


[7/24/2023 7:21 PM] szybet
.


[7/24/2023 7:21 PM] szybet
You said


[7/24/2023 7:22 PM] tux_linux
.


[7/24/2023 7:22 PM] szybet
yes and?


[7/24/2023 8:09 PM] szybet
```
uname -r | grep -o '[^-]*$'"), "n306c")
```
nevermind me


[7/24/2023 8:09 PM] tux_linux
seriously

{Attachments}
/mnt/data/projects/git/conversations/media/image-67AB7.png


[7/24/2023 8:09 PM] szybet
lol


[7/24/2023 8:09 PM] szybet
lets say its a poland reference


[7/24/2023 8:09 PM] szybet
PL


[7/24/2023 8:09 PM] szybet
hehe


[7/24/2023 8:34 PM] tux_linux
```
int topButtonsSize = 55;
int menuButtonsSize = 80;
int playButtonsSize = 50;
```
is that fixed size?


[7/24/2023 8:40 PM] szybet
where is it


[7/24/2023 8:40 PM] tux_linux
audiodialog.cpp


[7/24/2023 8:40 PM] szybet
um yes


[7/24/2023 8:40 PM] szybet
they should be good for all devices


[7/24/2023 8:40 PM] szybet
maybe the mini


[7/24/2023 8:40 PM] tux_linux
no


[7/24/2023 8:41 PM] szybet
you shouldnt care, audio is a obscure feature anyway


[7/24/2023 8:41 PM] szybet
also the whole dialog can resize / adjust itself


[7/24/2023 8:41 PM] szybet
so no worries


[7/24/2023 9:16 PM] tux_linux
i forgot to credit you in commit description
will do it on next one


[7/25/2023 4:23 AM] tux_linux
is it normal that the refresh button doesn't show up there?

{Attachments}
/mnt/data/projects/git/conversations/media/audio-F63C2.png


[7/25/2023 4:24 AM] tux_linux
well, forgot again ;-;


[7/25/2023 6:58 AM] szybet
Yes


[7/25/2023 9:27 AM] tux_linux
Ok


[7/25/2023 2:22 PM] tux_linux
really?


[7/25/2023 2:23 PM] szybet
we dont want to refresh the database of files


[7/25/2023 2:23 PM] szybet
it takes time to load thm & inspect them for time etc


[7/25/2023 2:23 PM] tux_linux
hm ok and why is the button named refreshBtn


[7/25/2023 2:23 PM] szybet
it refreshes the queue


[7/25/2023 2:23 PM] tux_linux
it only cleans it


[7/25/2023 2:24 PM] szybet
it shouldnt be needed, its there only of something went wrong - everything should refresh oob


[7/25/2023 2:24 PM] szybet
what


[7/25/2023 2:24 PM] tux_linux
when i go into queue mode, refreshBtn transforms itself into a clean button with a mop icon


[7/25/2023 2:24 PM] szybet
oh okay


[7/25/2023 2:25 PM] szybet
yea it cleans


[7/25/2023 2:25 PM] szybet
refreshing and cleaning is similar


[7/25/2023 2:25 PM] szybet
i forgot


[7/25/2023 2:25 PM] tux_linux
hm ok


[7/25/2023 2:31 PM] tux_linux
also, now that i think of it, there isn't any option to enable audio in settings


[7/25/2023 2:31 PM] tux_linux
that's normal i guess?


[7/25/2023 2:32 PM] szybet
yes


[7/25/2023 2:32 PM] tux_linux
ok


[7/25/2023 2:32 PM] szybet
you need to install manually packages, and set up audio service


[7/25/2023 2:32 PM] tux_linux
maybe write a wiki page about it?


[7/25/2023 2:33 PM] szybet
apart from that, you need USB host and drivers lol


[7/25/2023 2:33 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Audio_support


[7/25/2023 2:33 PM] szybet
if someone will care - sure


[7/25/2023 2:33 PM] tux_linux
Well, I care, because I still don't know how you got audio to work on nia


[7/25/2023 2:34 PM] szybet
magic and fairy tails


[7/25/2023 2:34 PM] szybet
the informations is scattered across repos - most in niaudio


[7/25/2023 2:34 PM] tux_linux
well, maybe now is a good time to pack it together


[7/25/2023 2:35 PM] tux_linux
i can't advertise a feature if i don't even know how to make it work


[7/25/2023 2:35 PM] szybet
uh uh uhm kindle touch


[7/25/2023 2:36 PM] tux_linux
well, will it really work if i plug my headphones in


[7/25/2023 2:36 PM] tux_linux
i heavily doubt it


[7/25/2023 2:36 PM] tux_linux
why would it work in the first place


[7/25/2023 2:36 PM] tux_linux
explain


[7/25/2023 2:36 PM] szybet
i mean that you didnt prepared an image


[7/25/2023 2:36 PM] szybet
i will write it, maybe even today but you need to finish kobo nia c


[7/25/2023 2:37 PM] tux_linux
well, that too, but now that we are at it, maybe i will wait until audio works on it to make the image


[7/25/2023 2:37 PM] szybet
There is a diffrent PMIC - it will work in a worse way


[7/25/2023 2:38 PM] tux_linux
great


[7/25/2023 2:38 PM] tux_linux
so it can work


[7/25/2023 2:38 PM] szybet
it could work on any ereader if usb host is possible


[7/25/2023 2:39 PM] tux_linux
but with a headphone jack


[7/25/2023 2:39 PM] szybet
I will write the guide but i wont test it on the C, kitkat wont agree and there is no reason to do that


[7/25/2023 2:39 PM] szybet
as long as also can output sound, then it will work


[7/25/2023 2:39 PM] tux_linux
ok


[7/25/2023 2:39 PM] szybet
if usb audio card or some native thing, it shouldnt care


[7/25/2023 2:40 PM] tux_linux
ok


[7/25/2023 2:40 PM] tux_linux
thanks


[7/25/2023 2:40 PM] tux_linux
did you symlink nia c modules to the root of the archive?


[7/25/2023 2:40 PM] tux_linux
like `/modules/g_ether.ko`


[7/25/2023 2:40 PM] szybet
yes, this is the reason usb net now works


[7/25/2023 2:59 PM] szybet
oh also
either you provide me with an automated way to export the wiki, i will send you an md file of the audio page


[7/25/2023 2:59 PM] szybet
you can convert it and paste it, should be fine


[7/25/2023 3:00 PM] tux_linux
you already used pandoc for ipd


[7/25/2023 3:00 PM] tux_linux
you don't remember?


[7/25/2023 3:01 PM] szybet
yes, now you will propably


[7/25/2023 3:24 PM] tux_linux
@Szybet why do you enable `metadata_csum` and `orphan_file` features here


[7/25/2023 3:24 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-D8C37.png


[7/25/2023 3:25 PM] tux_linux
and why did you do that

{Attachments}
/mnt/data/projects/git/conversations/media/image-8016C.png


[7/25/2023 3:30 PM] szybet
it didnt worked


[7/25/2023 3:30 PM] szybet
now it does


[7/25/2023 3:30 PM] szybet
we talked about it


[7/25/2023 3:30 PM] tux_linux
when


[7/25/2023 3:30 PM] szybet
long time ago


[7/25/2023 3:30 PM] tux_linux
enabling orphan_file will make older models fail to boot


[7/25/2023 3:30 PM] tux_linux
probably recent ones too


[7/25/2023 3:30 PM] szybet
look here


[7/25/2023 3:31 PM] tux_linux
we are using debian 12


[7/25/2023 3:31 PM] szybet
we are


[7/25/2023 3:31 PM] tux_linux
maybe e2fsprogs are old enough so that it doesn't make it error out


[7/25/2023 3:32 PM] szybet
idk, just test it with mini


[7/25/2023 4:08 PM] tux_linux
mini screen when left turned off for a long time vs. when i power it on

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230725_140705690-DDDC3.jpg
/mnt/data/projects/git/conversations/media/PXL_20230725_140610237-99F8D.jpg


[7/25/2023 4:14 PM] szybet
i dont see a diffrence


[7/25/2023 4:15 PM] tux_linux
look at bottom right


[7/25/2023 4:16 PM] szybet
ghosting?


[7/25/2023 4:16 PM] tux_linux
idk


[7/25/2023 4:16 PM] tux_linux
its just strange


[7/25/2023 4:17 PM] tux_linux
it's like a spot of 'ink'


[7/25/2023 4:17 PM] tux_linux
it disappears when i refresh the screen
it appears when powered off for like 2 months


[7/25/2023 4:17 PM] szybet
isint it just because booting screen


[7/25/2023 4:17 PM] tux_linux
maybe even just a week


[7/25/2023 4:17 PM] szybet
oh


[7/25/2023 4:17 PM] tux_linux
you see it


[7/25/2023 4:17 PM] szybet
@Kuratius will explain further, but the "ink cells" get apart because of lost of charge


[7/25/2023 4:17 PM] tux_linux
it's always at the same spot


[7/25/2023 4:18 PM] tux_linux
why only on this device


[7/25/2023 4:18 PM] szybet
faulty screen / old device


[7/25/2023 4:19 PM] tux_linux
It also does this when left un-refreshed for a long time

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230427_114933729-34CAC.jpg


[7/25/2023 4:19 PM] szybet
yea, the answer is the same


[7/25/2023 6:29 PM] tux_linux
do i also remove include folder?


[7/25/2023 6:30 PM] szybet
yes


[7/25/2023 6:30 PM] tux_linux
ok


[7/25/2023 6:31 PM] szybet
only needed to copmpile


[7/25/2023 6:31 PM] tux_linux
looks good?

{Attachments}
/mnt/data/projects/git/conversations/media/message-A8507.txt


[7/25/2023 6:31 PM] szybet
cmake folder is not needed


[7/25/2023 6:32 PM] szybet
static libraries too


[7/25/2023 6:32 PM] tux_linux
ok


[7/25/2023 6:32 PM] szybet
.prl files too?


[7/25/2023 6:32 PM] szybet
.la files too


[7/25/2023 6:32 PM] szybet
pkgconfig dir not needed


[7/25/2023 6:33 PM] szybet
thats it


[7/25/2023 6:34 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-0B8B4.txt


[7/25/2023 6:35 PM] szybet
remove bluetooth and nfc


[7/25/2023 6:35 PM] szybet
libs


[7/25/2023 6:35 PM] szybet
idk why they are there


[7/25/2023 6:35 PM] szybet
apart from that, goof


[7/25/2023 6:36 PM] tux_linux
i think qt is going to scream if i do that


[7/25/2023 6:36 PM] tux_linux
like for dbus


[7/25/2023 6:36 PM] szybet
well test it then


[7/25/2023 6:38 PM] szybet
test nachat specifically


[7/25/2023 6:58 PM] kuratius
If I didn't know any better I would say there is something wrong with the fluid in that spot.
If the screen display changes it means particles are moving when they shouldn't 
If it's higher in a specific spot that could be due to heat or the cells in that area have less viscous fluid or smaller particles than normal. Maybe wrong cell size could be an issue, if the particles can't move far from the surface they can get back to the top more easily.  The wrong cell size thing could also be particles not moving far enough during a refresh if they are blocked somehow.


I would still think sunlight or heat is probably the issue

{Reactions}
👍 

[7/25/2023 7:29 PM] tux_linux
```
25/07/2023 @ 13:28:37 | apps: showUserApps: Main user applications' JSON is valid
25/07/2023 @ 13:28:42 | userapps: Launching user application at: '[/mnt/onboard/onboard/.apps/nachat/nachat]/app-bin/nachat.sh'
/app-bin/nachat.bin: error while loading shared libraries: libereaderdev.so.1: cannot open shared object file: No such file or directory
```
🥴


[7/25/2023 8:55 PM] szybet
Tolino Shine 2 is a glo?


[7/25/2023 8:56 PM] szybet
you packet it wrong?


[7/25/2023 8:56 PM] szybet
or I?


[7/25/2023 8:56 PM] tux_linux
Well, I probably don't have ereaderlib in my qt libs?


[7/25/2023 8:57 PM] szybet
i will repack nachat today


[7/25/2023 8:57 PM] szybet
to many errors


[7/25/2023 8:57 PM] szybet
can i create nia c image?


[7/25/2023 8:57 PM] szybet
did you updated the server update isa something?


[7/25/2023 9:00 PM] szybet
i ask seriously


[7/25/2023 9:00 PM] szybet
i bought it


[7/25/2023 9:10 PM] tux_linux
I will do it
But you can as well


[7/25/2023 9:11 PM] szybet
no


[7/25/2023 9:11 PM] szybet
i dont even know what it is


[7/25/2023 9:11 PM] szybet
and im lazy lately


[7/25/2023 9:14 PM] tux_linux
Well, I can't upload it until 45m at least


[7/25/2023 9:15 PM] tux_linux
I will explain


[7/25/2023 9:18 PM] tux_linux
First you make regular update.isa with gui-bundle
Then you put update.isa into new folder
Then you `mksquashfs . ../inkbox-update-2.0.upd.isa -b 1048576 -comp xz -Xdict-size 100% -always-use-fragments`
Then upload it to 23.163.0.39 and don't forget to chmod it


[7/25/2023 9:22 PM] szybet
well you do it


[7/25/2023 9:22 PM] szybet
i dont have time currently either


[7/25/2023 9:22 PM] tux_linux
Then good


[7/25/2023 11:36 PM] tux_linux
i uploaded the nia c package


[7/25/2023 11:37 PM] szybet
i will create the image tommorow


[7/25/2023 11:37 PM] tux_linux
http://23.163.0.39/bundles/inkbox/native/update/2.0/n306c/inkbox-update-2.0.upd.isa


[7/25/2023 11:37 PM] szybet
i just hope imgtool will grab it outb


[7/25/2023 11:37 PM] tux_linux
me too


[7/25/2023 11:37 PM] tux_linux
it should


[7/25/2023 11:43 PM] szybet
can i upload to my server n306 image fully working niaudio project


[7/25/2023 11:43 PM] szybet
and enabled dev stuff


[7/25/2023 11:43 PM] tux_linux
in misc


[7/25/2023 11:43 PM] szybet
sure


[7/25/2023 11:53 PM] szybet
```
Linux inkbox #1 SMP PREEMPT Tue Jul 25 23:01:40 CEST 2023 GNU/Linux
InkBox OS, kernel build HwPtQHnA, commit f25a068

Copyright (C) 2021-2023 Nicolas Mailloux <nicolecrivain@gmail.com>
 * Checking filesystems ...

e2fsck 1.46.2 (28-Feb-2021)
boot: clean, 18/3840 files, 2252/15360 blocks
e2fsck 1.46.2 (28-Feb-2021)
recoveryfs: clean, 15/128016 files, 497273/512000 blocks
e2fsck 1.46.2 (28-Feb-2021)
rootfs: clean, 15/32768 files, 72774/131072 blocks
e2fsck 1.46.2 (28-Feb-2021)
user: clean, 51/192768 files, 580920/769894 blocks

(initrd) Hit ENTER to stop auto-boot ... 

 * Device is rooted; not enforcing security policy
open: Bad address
The system is going down NOW!
Sent SIGTERM to all processes
Sent SIGKILL to all processes
Requesting system poweroff
[   14.254075] reboot: Power down
```


[7/25/2023 11:53 PM] szybet
nia a


[7/25/2023 11:53 PM] szybet
newest kernel


[7/25/2023 11:53 PM] szybet
@tux-linux


[7/25/2023 11:54 PM] tux_linux
Input device


[7/25/2023 11:54 PM] tux_linux
It had to mess up


[7/25/2023 11:55 PM] tux_linux
Try to touch event2 then run /etc/init.d/init to see if there's still a bug


[7/25/2023 11:56 PM] szybet
```
~ # /etc/init.d/init
Failed to mount /proc: Resource busy
```


[7/25/2023 11:57 PM] tux_linux
Umount it before running
Also sys


[7/25/2023 11:57 PM] szybet
```
~ # /etc/init.d/init
Failed to mount /dev: Resource busy
```


[7/25/2023 11:57 PM] szybet
yea this wont work


[7/25/2023 11:57 PM] tux_linux
Same thing


[7/25/2023 11:57 PM] szybet
by umounting dev you remove event2


[7/25/2023 11:58 PM] szybet
imagine having logs in init


[7/25/2023 11:58 PM] szybet
we would have known what went wrong


[7/25/2023 11:58 PM] tux_linux
Try strace


[7/25/2023 11:58 PM] tux_linux
There is a static copy in rootfs repo


[7/25/2023 11:58 PM] tux_linux
You can copy it to p1


[7/25/2023 11:58 PM] tux_linux
With ums or idk


[7/25/2023 11:59 PM] szybet
this wont solve the issue not allowing to launch init


[7/25/2023 11:59 PM] szybet
or nevermind


[7/25/2023 11:59 PM] tux_linux
Yes


[7/25/2023 11:59 PM] szybet
still stupi


[7/25/2023 11:59 PM] tux_linux
No init is smaller without logs


[7/26/2023 12:00 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-308D8.png


[7/26/2023 12:00 AM] szybet
#define is your friend


[7/26/2023 12:01 AM] szybet
repair it, send an init binary i will try it


[7/26/2023 12:01 AM] szybet
but this wont solve the issue lols


[7/26/2023 12:01 AM] tux_linux
Try strace


[7/26/2023 12:05 AM] szybet
```
~ # mount /dev/mmcblk0p1 /mnt
[   18.798028] EXT3-fs (mmcblk0p1): error: couldn't mount because of unsupported optional featu)
[   18.811219] EXT2-fs (mmcblk0p1): error: couldn't mount because of unsupported optional featu)
```


[7/26/2023 12:13 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-6C5BC.png


[7/26/2023 12:13 AM] szybet
are you sure what you are doing?


[7/26/2023 12:13 AM] szybet
is nia A and is not nia C?


[7/26/2023 12:15 AM] szybet
```
Non-Blocking Open: The O_NONBLOCK flag is used when opening the input device. This means that the open call will not block if the device is not immediately available. Depending on the requirements, this behavior might be desired, but if you intend to read from the device later, you should ensure you handle the non-blocking behavior correctly during the read operations.
```


[7/26/2023 12:18 AM] tux_linux
Yes


[7/26/2023 12:32 AM] tux_linux
nia c doesn't need these modules


[7/26/2023 12:33 AM] tux_linux
harmless


[7/26/2023 3:53 PM] szybet
do you have any ideas


[7/26/2023 3:53 PM] szybet
what to do with the error


[7/26/2023 3:53 PM] tux_linux
You didn't provide strace


[7/26/2023 3:53 PM] szybet
not harmless, this is an error it didnt mounted it


[7/26/2023 3:54 PM] tux_linux
Well, maybe mkfs
I will check the script once again


[7/26/2023 3:54 PM] tux_linux
But does mount really errors out?


[7/26/2023 3:55 PM] tux_linux
In Debian docker, please try `mkfs.ext4 -O "^metadata_csum,^orphan_file" /dev/nbd0p1`


[7/26/2023 3:56 PM] tux_linux
I removed these from the script because I edited the config to also remove them there
It doesn't seem to have worked


[7/26/2023 3:56 PM] szybet
you mean in imgtool dockerfile


[7/26/2023 3:56 PM] tux_linux
Well yea


[7/26/2023 3:56 PM] szybet
this is an old 2.0 image


[7/26/2023 3:56 PM] szybet
with never kernel


[7/26/2023 3:57 PM] tux_linux
Oh


[7/26/2023 3:57 PM] tux_linux
Then nvm


[7/26/2023 3:57 PM] szybet
partitions unedited


[7/26/2023 3:57 PM] tux_linux
Show me complete mount output


[7/26/2023 3:57 PM] tux_linux
Ext3 ext2 errors are normal


[7/26/2023 4:00 PM] szybet
This was the whole


[7/26/2023 4:00 PM] tux_linux
Then it should have mounted


[7/26/2023 4:00 PM] szybet
Welp propablt im stupid


[7/26/2023 4:00 PM] tux_linux
Otherwise there would have been an ext4 error too


[7/26/2023 4:01 PM] tux_linux
Because ext4 has some similarities with ext2 and ext3 so kernel tries to mount it with these frameworks first
It doesn't work, then it tries ext4


[7/26/2023 4:01 PM] szybet
I know i know


[7/26/2023 4:01 PM] szybet
Still, thats an error not a warning


[7/26/2023 4:02 PM] tux_linux
It's normal


[7/26/2023 4:02 PM] tux_linux
You can mount with -t ext4 if you don't want to see it


[7/26/2023 4:04 PM] szybet
https://libretranslate.com/

{Embed}
https://libretranslate.com/
LibreTranslate - Free and Open Source Machine Translation API
/mnt/data/projects/git/conversations/media/102724116-32a6df00-42db-11eb-8cc0-129ab39c-8DF60.png


[7/26/2023 4:04 PM] szybet
I will add it to the new reader


[7/26/2023 4:05 PM] tux_linux
Well ok


[7/26/2023 5:53 PM] tux_linux
mini after one day

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230726_155138336-9F0A2.jpg


[7/26/2023 5:54 PM] tux_linux
@Szybet tried new init on my glo hd and can't reproduce the error


[7/26/2023 6:01 PM] szybet
Cool


[7/26/2023 6:02 PM] szybet
And horrible


[7/26/2023 6:02 PM] tux_linux
try strace


[7/26/2023 6:02 PM] tux_linux
please


[7/26/2023 6:10 PM] szybet
I will

{Reactions}
👍 

[7/26/2023 6:52 PM] szybet
i cant umount /dev


[7/26/2023 6:53 PM] szybet
even after unmounting o1


[7/26/2023 6:53 PM] szybet
p1


[7/26/2023 6:53 PM] tux_linux
umount -l -f


[7/26/2023 6:55 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-475DF.txt


[7/26/2023 6:55 PM] szybet
weird


[7/26/2023 6:56 PM] tux_linux
oh i know the problem


[7/26/2023 6:56 PM] tux_linux
hang on


[7/26/2023 6:57 PM] szybet
are you sure?


[7/26/2023 6:57 PM] tux_linux
yes


[7/26/2023 6:57 PM] szybet
nonblock?


[7/26/2023 6:57 PM] tux_linux
no


[7/26/2023 6:58 PM] tux_linux
i pushed the fix


[7/26/2023 6:58 PM] szybet
binary please


[7/26/2023 6:59 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/init-3937F


[7/26/2023 6:59 PM] szybet
yea we are both stupid


[7/26/2023 6:59 PM] tux_linux
yea


[7/26/2023 6:59 PM] szybet
how couldnt i see that


[7/26/2023 7:11 PM] szybet
so you changed things, did you tested them?


[7/26/2023 7:11 PM] szybet
diagnostics now work on nia a


[7/26/2023 7:12 PM] tux_linux
try to make nia c image, if it boots, it means it worked


[7/26/2023 7:12 PM] tux_linux
good


[7/26/2023 7:13 PM] szybet
ok sure

{Reactions}
👍 

[7/26/2023 7:13 PM] tux_linux
i removed `orphan_file` and `metadata_csum`, `metadata_csum_seed` options from `mkfs.conf` , then I removed the `-O` argument of mkfs.ext4 in the script


[7/26/2023 7:27 PM] szybet
@tux-linux i only inform you that to my knowledge nia c is using the same keys as nia a


[7/26/2023 7:27 PM] szybet
public ones


[7/26/2023 7:27 PM] szybet
and it stays like that


[7/26/2023 7:27 PM] tux_linux
Yes I know


[7/26/2023 7:28 PM] szybet
what is the state of the clara port


[7/26/2023 7:32 PM] tux_linux
waiting for andi


[7/26/2023 7:36 PM] szybet
and the last problem is?


[7/26/2023 7:36 PM] szybet
eink?


[7/26/2023 7:36 PM] tux_linux
Slow eink


[7/26/2023 7:37 PM] szybet
ok


[7/26/2023 7:37 PM] tux_linux
Everything else should work


[7/26/2023 7:37 PM] szybet
the tolino shine 2, is it the glo? i know andi has this devce too


[7/26/2023 7:37 PM] tux_linux
Maybe


[7/26/2023 7:38 PM] szybet
i ordered it thanks to kuratius money


[7/26/2023 7:39 PM] szybet
i want to use it specifically to develop inkbox


[7/26/2023 7:39 PM] szybet
so i would want it to run inkkbox


[7/26/2023 7:39 PM] szybet
;D


[7/26/2023 7:50 PM] tux_linux
Nice


[7/26/2023 7:50 PM] szybet
```
2.0
+ wget http://23.163.0.39/bundles/inkbox/native/update/2.0/n306c/inkbox-update-2.0.upd.isa
--2023-07-26 17:49:48--  http://23.163.0.39/bundles/inkbox/native/update/2.0/n306c/inkbox-update-2.0.upd.isa
Connecting to 23.163.0.39:80... connected.
HTTP request sent, awaiting response... 403 Forbidden
2023-07-26 17:49:48 ERROR 403: Forbidden.

root@73122c59e08c /h/b/i/imgtool [8]# 
```


[7/26/2023 7:50 PM] tux_linux
Chmod 755 it


[7/26/2023 7:50 PM] tux_linux
Maybe I forgot


[7/26/2023 7:51 PM] szybet
what


[7/26/2023 8:00 PM] szybet
idk done?


[7/26/2023 8:00 PM] tux_linux
?


[7/26/2023 8:00 PM] szybet
chmod


[7/26/2023 8:01 PM] tux_linux
Did you do it?


[7/26/2023 8:01 PM] szybet
chmod it


[7/26/2023 8:01 PM] szybet
yes


[7/26/2023 8:01 PM] szybet
i think


[7/26/2023 8:01 PM] szybet
filezilla had that option


[7/26/2023 8:01 PM] szybet
so thats nice


[7/26/2023 8:01 PM] tux_linux
Ok
Well try to get it with a web browser


[7/26/2023 8:01 PM] tux_linux
If it works the script should work


[7/26/2023 8:02 PM] szybet
works


[7/26/2023 8:02 PM] szybet
and slow


[7/26/2023 8:02 PM] tux_linux
Good


[7/26/2023 8:02 PM] tux_linux
At least not too big


[7/26/2023 8:37 PM] szybet
```
+ sudo mkdir -p /tmp/inkbox-eug49IclAW/user/config
+ root_command tar -xvf /home/build/inkbox/imgtool/sd/config-n306c.tar.xz -C /tmp/inkbox-eug49IclAW/user/config
+ '[' '' == 1 ']'
+ sudo tar -xvf /home/build/inkbox/imgtool/sd/config-n306c.tar.xz -C /tmp/inkbox-eug49IclAW/user/config
tar: /home/build/inkbox/imgtool/sd/config-n306c.tar.xz: Cannot open: No such file or directory
tar: Error is not recoverable: exiting now
+ exit 1
```


[7/26/2023 8:37 PM] szybet
@tux-linux


[7/26/2023 8:37 PM] tux_linux
Just copy n306 config


[7/26/2023 8:37 PM] tux_linux
To a new file


[7/26/2023 8:37 PM] tux_linux
It should work


[7/26/2023 8:37 PM] tux_linux
I will commit it when I can


[7/26/2023 8:38 PM] szybet
this must work, and be automated


[7/26/2023 8:38 PM] tux_linux
Or symlink it
Idk


[7/26/2023 8:38 PM] szybet
what, where


[7/26/2023 8:38 PM] szybet
i dont even know what this is


[7/26/2023 8:39 PM] tux_linux
ln -s config-n306.tar.xz config-n306c.tar.xz


[7/26/2023 8:39 PM] szybet
no


[7/26/2023 8:39 PM] szybet
what even is this


[7/26/2023 8:39 PM] szybet
i wont do those hacks because i want to know if the final automated image will work


[7/26/2023 8:39 PM] szybet
so either i apply those patches directly to the repo or i wait for you to prepare it


[7/26/2023 8:40 PM] tux_linux
It's not a hack


[7/26/2023 8:41 PM] tux_linux
It's the .config dir


[7/26/2023 8:41 PM] tux_linux
I will commit exactly the same thing


[7/26/2023 8:41 PM] tux_linux
So no worries


[7/26/2023 8:42 PM] szybet
the process is automated and deleted all previous things


[7/26/2023 8:42 PM] szybet
i will wait for you to do it


[7/26/2023 8:42 PM] szybet
because imagine what


[7/26/2023 8:42 PM] tux_linux
Then wait


[7/26/2023 8:42 PM] szybet
i dont have access


[7/26/2023 8:42 PM] szybet
dsajnsfiuoewngiuerjgoiwedhngvuioerghbniuernbgioeruwgnhwreiu


[7/26/2023 8:43 PM] tux_linux
The thing you have to modify isn't even in a script
Did you even look at the sd/ folder?


[7/26/2023 8:43 PM] szybet
i know what it is, not exactly where and from where


[7/26/2023 8:44 PM] tux_linux
Just cd into it and run this


[7/26/2023 8:45 PM] szybet
so its in imgtool?


[7/26/2023 8:45 PM] szybet
no downloaded things


[7/26/2023 8:46 PM] tux_linux
Yes, no


[7/26/2023 9:46 PM] szybet
audio works after your changes

{Reactions}
👍 

[7/26/2023 9:47 PM] szybet
```
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# cat /sys/class/power_supply/mc13892_bat/status 
Unknown
bash-5.0# 

```


[7/26/2023 9:48 PM] szybet
https://tenor.com/view/judging-gif-4584572

{Embed}
https://tenor.com/view/judging-gif-4584572
Judging you
/mnt/data/projects/git/conversations/media/judging-FD93E.png


[7/26/2023 10:22 PM] tux_linux
Nia a?


[7/26/2023 10:22 PM] szybet
yes


[7/26/2023 10:23 PM] szybet
niuaudui


[7/26/2023 10:23 PM] tux_linux
Welp


[7/27/2023 12:53 AM] szybet
I tryied the vnc client written in rust


100% cpu
Only refreshes small rects
The more i used it the less it worked
Unusable, you would need hours and hours to figurr out the perfect setup only for a basic text editor, if ever


[7/27/2023 12:54 AM] szybet
You can try it if you want, i already figured how to run it


[7/27/2023 12:54 AM] szybet
Maybe im doing something wrong


[7/27/2023 12:54 AM] szybet
Idk


[7/27/2023 12:57 AM] szybet
Tldr im not interested in porting it


[7/27/2023 8:46 AM] szybet
https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/creating-a-commit-with-multiple-authors

{Embed}
https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/creating-a-commit-with-multiple-authors
Creating a commit with multiple authors - GitHub Docs
/mnt/data/projects/git/conversations/media/github-logo-EE79A.png


[7/27/2023 8:46 AM] szybet
something 4you


[7/27/2023 1:06 PM] matterbridge#2154
[matrix] Maximilian Gaedig ⚡️ 
But its written in rust (written in rust btw)


[7/27/2023 1:08 PM] szybet
yes i know, thats why i had hopes for it


[7/27/2023 4:34 PM] tux_linux
I think RW rootfs flag was renamed to MOUNT_RW somehow in init


[7/27/2023 4:34 PM] tux_linux
I will fix it


[7/27/2023 6:38 PM] tux_linux
please test it because that's suspect

{Attachments}
/mnt/data/projects/git/conversations/media/image-B14AA.png


[7/27/2023 6:39 PM] szybet
i would trust github with binaries


[7/27/2023 6:45 PM] .kitkat1.
it works

{Reactions}
👍 

[7/27/2023 10:37 PM] szybet
3 hours my god

{Attachments}
/mnt/data/projects/git/conversations/media/image-F42A9.png


[7/27/2023 10:37 PM] tux_linux
Good
To both servers?


[7/27/2023 10:38 PM] szybet
fuck


[7/27/2023 10:38 PM] szybet
i uploaded the wrong image


[7/27/2023 10:38 PM] szybet
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619

{Embed}
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619
/mnt/data/projects/git/conversations/media/noooo-no-1AE19.png


[7/27/2023 10:38 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-70A6D.png


[7/27/2023 10:38 PM] tux_linux
?!


[7/27/2023 10:38 PM] szybet
for nia a


[7/27/2023 10:38 PM] tux_linux
Well, congrats


[7/27/2023 10:39 PM] tux_linux
Also was x11 ever tested on Nia c


[7/27/2023 10:41 PM] szybet
it once caused fbdepth issues
other time it runned fine, really stable
the last time it caused the screen to freeze and backlight off


[7/27/2023 10:41 PM] szybet
so unstable, sometimes usable


[7/27/2023 10:46 PM] tux_linux
I see
Well fine


[7/28/2023 12:13 AM] tux_linux
@Szybet why is audio running on kt even if it is disabled

{Attachments}
/mnt/data/projects/git/conversations/media/image-0F370.png


[7/28/2023 12:14 AM] tux_linux
oh nvm


[7/28/2023 12:14 AM] tux_linux
i had both kt and clara connected at the same time


[7/28/2023 12:14 AM] tux_linux
mismatched device


[7/28/2023 12:27 AM] szybet
Skynet


[7/28/2023 12:27 AM] szybet
🫡


[7/28/2023 12:28 AM] szybet
For audio you need the second part in rootfa


[7/28/2023 12:28 AM] szybet
Rootfs


[7/28/2023 12:28 AM] szybet
Inkaudio


[7/28/2023 12:28 AM] tux_linux
well, and that is


[7/28/2023 12:28 AM] tux_linux
you never told me


[7/28/2023 12:28 AM] szybet
Either look at the repo and niaudio files


[7/28/2023 12:28 AM] szybet
And figure it out


[7/28/2023 12:29 AM] szybet
Or remind me tommorow


[7/28/2023 12:29 AM] szybet
I will make a guide


[7/28/2023 12:29 AM] tux_linux
ok


[7/28/2023 12:29 AM] tux_linux
i am still struggling with usbms


[7/28/2023 12:29 AM] tux_linux
it seems it broke again


[7/28/2023 12:29 AM] szybet
Works on nia c


[7/28/2023 12:29 AM] tux_linux
did you try to put a book in it


[7/28/2023 12:29 AM] szybet
Kitkat did


[7/28/2023 12:30 AM] szybet
On rooted kernel btw


[7/28/2023 12:30 AM] szybet
Try 2.0 images


[7/28/2023 12:30 AM] szybet
If its kindle its another story


[7/28/2023 12:30 AM] szybet
But yea


[7/28/2023 12:32 AM] tux_linux
```
27/07/2023 @ 22:31:45 | MainWindow: Showing USB Mass Storage dialog
27/07/2023 @ 22:31:45 | functions: checkconfig: Warning: File '/inkbox/resetDialog' doesn't exist, returning false
27/07/2023 @ 22:31:45 | functions: checkconfig: Warning: File '/inkbox/updateDialog' doesn't exist, returning false
27/07/2023 @ 22:31:49 | MainWindow: Showing USB Mass Storage dialog
27/07/2023 @ 22:31:49 | functions: checkconfig: Warning: File '/inkbox/resetDialog' doesn't exist, returning false
27/07/2023 @ 22:31:49 | functions: checkconfig: Warning: File '/inkbox/updateDialog' doesn't exist, returning false
27/07/2023 @ 22:31:51 | usbmsSplash: Exiting USBMS session
27/07/2023 @ 22:31:53 | MainWindow: Showing USB Mass Storage dialog
27/07/2023 @ 22:31:53 | functions: checkconfig: Warning: File '/inkbox/resetDialog' doesn't exist, returning false
27/07/2023 @ 22:31:53 | functions: checkconfig: Warning: File '/inkbox/updateDialog' doesn't exist, returning false
 * Starting USBNet ...                                                                                                                                                                                                                                   [ ok ]
 * Checking for available updates ...
mkdir: cannot create directory ‘/data/onboard/.inkbox’: Read-only file system
```


[7/28/2023 12:32 AM] tux_linux
yea


[7/28/2023 12:32 AM] tux_linux
a mess


[7/28/2023 12:32 AM] tux_linux
on clara


[7/28/2023 7:44 AM] szybet
https://www.mobileread.com/forums/showthread.php?t=336210&page=4

{Embed}
https://www.mobileread.com/forums/showthread.php?t=336210&page=4
[HOWTO][WIP] Run Xorg on your Kobo + full-blown Firefox - Page 4 -...
Page 4- [HOWTO][WIP] Run Xorg on your Kobo + full-blown Firefox Kobo Developer's Corner


[7/28/2023 7:44 AM] szybet
maybe you could try opera mini


[7/28/2023 11:24 AM] szybet
@tux-linux update the page about the c


[7/28/2023 11:24 AM] szybet
i will later chmod it


[7/28/2023 11:24 AM] szybet
or you can


[7/28/2023 1:23 PM] tux_linux
It's 10 years old


[7/28/2023 1:24 PM] szybet
and what


[7/28/2023 1:24 PM] szybet
netsurf is older propably


[7/28/2023 1:31 PM] tux_linux
No


[7/28/2023 1:31 PM] szybet
maybe it will be faster


[7/28/2023 1:35 PM] tux_linux
I have usbms to fix


[7/28/2023 1:35 PM] szybet
sure sure


[7/28/2023 10:38 PM] tux_linux
you kidding me??

{Attachments}
/mnt/data/projects/git/conversations/media/image-C8D73.png
/mnt/data/projects/git/conversations/media/image-7A470.png


[7/28/2023 10:53 PM] tux_linux
well, here you see that using fixed size buttons is bad


[7/28/2023 10:53 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/size-AA575.png


[7/28/2023 11:20 PM] tux_linux
where
didn't find it


[7/28/2023 11:21 PM] tux_linux
i don't see any rootfs stuff in it


[7/28/2023 11:27 PM] szybet
um


[7/28/2023 11:28 PM] szybet
https://github.com/Kobo-InkBox/inkbox-audio

{Embed}
https://github.com/Kobo-InkBox/inkbox-audio
GitHub - Kobo-InkBox/inkbox-audio
Contribute to Kobo-InkBox/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-6951C


[7/28/2023 11:28 PM] szybet
thats here?


[7/28/2023 11:28 PM] szybet
just build it and run in rootfs


[7/28/2023 11:28 PM] szybet
follow instructions in niaudio repo too


[7/28/2023 11:31 PM] szybet
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/inkbox-audio.md

{Embed}
https://github.com/Szybet/niAudio/blob/main/apps-on-kobo/inkbox-audio.md
niAudio/apps-on-kobo/inkbox-audio.md at main · Szybet/niAudio
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/niAudio-613C3


[7/28/2023 11:32 PM] tux_linux
yeah i just saw it


[7/28/2023 11:32 PM] szybet
https://github.com/Kobo-InkBox/inkbox-audio/blob/main/lib/prebuild/instructions.txt

{Embed}
https://github.com/Kobo-InkBox/inkbox-audio/blob/main/lib/prebuild/instructions.txt
inkbox-audio/lib/prebuild/instructions.txt at main · Kobo-InkBox/in...
Contribute to Kobo-InkBox/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-6951C


[7/28/2023 11:32 PM] szybet
also here


[7/28/2023 11:32 PM] szybet
double nstructions


[7/28/2023 11:32 PM] tux_linux
but how is the socket created


[7/28/2023 11:32 PM] szybet
you can write the guide as you do it


[7/28/2023 11:32 PM] szybet
inside of the program?


[7/28/2023 11:33 PM] tux_linux
then why does it say error connecting to socket everytime


[7/28/2023 11:33 PM] szybet
what does say it


[7/28/2023 11:33 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-25103.txt


[7/28/2023 11:34 PM] szybet
did you run this program?


[7/28/2023 11:34 PM] tux_linux
oh, ok


[7/28/2023 11:35 PM] tux_linux
it needs to go into rootfs?


[7/28/2023 11:35 PM] szybet
-_-


[7/28/2023 11:35 PM] tux_linux
where


[7/28/2023 11:35 PM] szybet
bro


[7/28/2023 11:35 PM] tux_linux
ok


[7/28/2023 11:35 PM] tux_linux
sorry


[7/28/2023 11:35 PM] tux_linux
well i will put it somewhere


[7/28/2023 11:35 PM] tux_linux
in usr local bin


[7/28/2023 11:37 PM] szybet
yes


[7/28/2023 11:37 PM] szybet
thats the path


[7/28/2023 11:37 PM] szybet
i have a service for it


[7/28/2023 11:37 PM] szybet
didnt posted it yet


[7/28/2023 11:37 PM] tux_linux
ok
well


[7/28/2023 11:37 PM] tux_linux
do
it


[7/28/2023 11:38 PM] tux_linux
maybe you can just put it in inkbox-audio/rootfs or smth
thanks


[7/28/2023 11:38 PM] szybet
what?


[7/28/2023 11:38 PM] tux_linux
oh nvm


[7/28/2023 11:38 PM] tux_linux
well, you can share it here and i will put it in etc/init.d


[7/28/2023 11:38 PM] szybet
every program that is an extension to inkbox goes to usr local bin


[7/28/2023 11:39 PM] tux_linux
well, not the services


[7/28/2023 11:39 PM] szybet
ok, dont enable it at default


[7/28/2023 11:39 PM] tux_linux
i wont


[7/28/2023 11:39 PM] tux_linux
well, i will make it run at default so that users won't need to mount rootfs rw, but will make it check for a flag to actually run itself or not


[7/28/2023 11:40 PM] szybet
no


[7/28/2023 11:40 PM] tux_linux
why


[7/28/2023 11:40 PM] szybet
user needs to install alpine packeges anyway


[7/28/2023 11:40 PM] szybet
alsa


[7/28/2023 11:40 PM] szybet
so, no


[7/28/2023 11:40 PM] tux_linux
they will already be there


[7/28/2023 11:40 PM] szybet
they are heavy


[7/28/2023 11:40 PM] szybet
and not needed


[7/28/2023 11:40 PM] szybet
bloat literally


[7/28/2023 11:40 PM] szybet
also the user will need a modified audio kernel


[7/28/2023 11:40 PM] szybet
so stop


[7/28/2023 11:41 PM] tux_linux
even on kt?


[7/28/2023 11:41 PM] szybet
you can make it default


[7/28/2023 11:41 PM] tux_linux
1.5m of bloat?


[7/28/2023 11:41 PM] szybet
but dont do it on kobos


[7/28/2023 11:41 PM] szybet
yes?


[7/28/2023 11:41 PM] tux_linux
lets see how much it amounts in squashfs size


[7/28/2023 11:41 PM] szybet
still


[7/28/2023 11:41 PM] szybet
also shouldnt be running at default


[7/28/2023 11:42 PM] tux_linux
it wont run as default


[7/28/2023 11:42 PM] szybet
so whats the point of installing it


[7/28/2023 11:42 PM] szybet
if the user still needs to enable it


[7/28/2023 11:42 PM] tux_linux
i can live with that

{Attachments}
/mnt/data/projects/git/conversations/media/message-E157B.txt


[7/28/2023 11:42 PM] tux_linux
he won't need to on kt


[7/28/2023 11:43 PM] tux_linux
can you share your service file?


[7/28/2023 11:45 PM] szybet
how do ou enable something only on specific devices


[7/28/2023 11:45 PM] tux_linux
well, the image will have the flag set to true by default


[7/28/2023 11:45 PM] tux_linux
or smth like that


[7/28/2023 11:45 PM] tux_linux
idk


[7/28/2023 11:45 PM] szybet
ok nice


[7/28/2023 11:45 PM] szybet
flag is ok

{Reactions}
👍 

[7/28/2023 11:47 PM] szybet
```
root@kobo ~# cat /etc/init.d/inkaudio 
#!/sbin/openrc-run

description="Launches InkAudio"

depend() {
    keyword -prefix -lxc
    before inkbox_gui gui_apps
    after modules_init usbnet splash onboard_mount
}

start() {
    ebegin "Starting InkAudio"
    rm /dev/iaudio.socket
    /usr/local/bin/inkaudio &
    eend ${?}
}

stop() {
    ebegin "Stopping InkAudio"
    killall -9 inkaudio
    eend ${?}
}
root@kobo ~# 

```
the problem i had that it wasnt restarting when exiting


[7/28/2023 11:48 PM] szybet
so make it restart itself if it exits


[7/28/2023 11:48 PM] tux_linux
hm ok


[7/28/2023 11:48 PM] szybet
it can fail, if the device for example errors itself


[7/28/2023 11:51 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=Boot_flags

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=Boot_flags
Index.php


[7/28/2023 11:51 PM] tux_linux
i added it


[7/28/2023 11:51 PM] tux_linux
thanks for the service


[7/28/2023 11:57 PM] szybet
link niaudio there


[7/28/2023 11:57 PM] szybet
"Or if you are insane: niaudio"


[7/28/2023 11:58 PM] tux_linux
i think you had an issue with the service not restarting because it has the same name as inkaudio binary


[7/28/2023 11:58 PM] tux_linux
a bit like ipd


[7/28/2023 11:58 PM] szybet
it was just `stopped`


[7/28/2023 11:58 PM] tux_linux
i can just morph it into InkAudio instead of inkaudio and it should solve it


[7/28/2023 11:58 PM] szybet
no


[7/28/2023 11:58 PM] szybet
mess


[7/28/2023 11:58 PM] szybet
make it .biun


[7/28/2023 11:58 PM] szybet
.bin


[7/28/2023 11:59 PM] tux_linux
well ok


[7/29/2023 12:00 AM] tux_linux
and i need special kernel modules


[7/29/2023 12:00 AM] tux_linux
right


[7/29/2023 12:00 AM] szybet
yea


[7/29/2023 12:00 AM] szybet
idk which specifically


[7/29/2023 12:00 AM] tux_linux
can it work for non usb soundcards?


[7/29/2023 12:00 AM] szybet
just make the `play` command output sound


[7/29/2023 12:01 AM] szybet
it can, it depends on alsa


[7/29/2023 12:01 AM] tux_linux
oh nooo not you again

{Attachments}
/mnt/data/projects/git/conversations/media/image-DCC65.png


[7/29/2023 12:01 AM] szybet
you need to make alsa work


[7/29/2023 12:01 AM] szybet
lolololol


[7/29/2023 12:02 AM] tux_linux
well why do i see thousands of snd_* calls in the program


[7/29/2023 12:02 AM] tux_linux
and you say i need to make the play command work


[7/29/2023 12:02 AM] szybet
you DAC could be over I2C, SPI, uart, usb, maybe even some DMA crap


[7/29/2023 12:02 AM] szybet
what


[7/29/2023 12:02 AM] szybet
i dont understand


[7/29/2023 12:02 AM] tux_linux
in there

{Attachments}
/mnt/data/projects/git/conversations/media/image-97EDE.png


[7/29/2023 12:02 AM] szybet
library


[7/29/2023 12:02 AM] szybet
calls


[7/29/2023 12:02 AM] tux_linux
ok


[7/29/2023 12:03 AM] szybet
play command, in cli i meant


[7/29/2023 12:03 AM] tux_linux
does it launch `play` directly or not


[7/29/2023 12:03 AM] szybet
nope


[7/29/2023 12:03 AM] szybet
pure calls


[7/29/2023 12:03 AM] szybet
otherwise pausing would be an issue


[7/29/2023 12:04 AM] tux_linux
ok
but it doesn't mess with internal alsa stuff


[7/29/2023 12:04 AM] tux_linux
good


[7/29/2023 12:04 AM] szybet
it sets mixer sound level


[7/29/2023 12:04 AM] szybet
and needs config for some things


[7/29/2023 12:04 AM] tux_linux
should not be too bad


[7/29/2023 12:04 AM] szybet
default should be fine


[7/29/2023 12:04 AM] szybet
otherwise change


[7/29/2023 12:05 AM] tux_linux
ok


[7/29/2023 12:19 AM] tux_linux
do you have a guide on compiling alsa


[7/29/2023 12:20 AM] tux_linux
```
build@inkbox ~/i/i/build (main)> cmake --build . -j16
[ 20%] Building CXX object CMakeFiles/inkaudio.dir/src/functions.cpp.o
[ 40%] Building CXX object CMakeFiles/inkaudio.dir/src/communication/usocket.cpp.o
[ 60%] Building CXX object CMakeFiles/inkaudio.dir/src/sound/play.cpp.o
[ 80%] Building CXX object CMakeFiles/inkaudio.dir/src/main.cpp.o
/home/build/inkbox/inkbox-audio/src/sound/play.cpp:5:10: fatal error: alsa/asoundlib.h: No such file or directory
    5 | #include <alsa/asoundlib.h>
      |          ^~~~~~~~~~~~~~~~~~
compilation terminated.
make[2]: *** [CMakeFiles/inkaudio.dir/build.make:118: CMakeFiles/inkaudio.dir/src/sound/play.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [CMakeFiles/Makefile2:839: CMakeFiles/inkaudio.dir/all] Error 2
make: *** [Makefile:121: all] Error 2
```


[7/29/2023 12:21 AM] szybet
https://github.com/Kobo-InkBox/inkbox-audio/blob/main/lib/prebuild/instructions.txt

{Embed}
https://github.com/Kobo-InkBox/inkbox-audio/blob/main/lib/prebuild/instructions.txt
inkbox-audio/lib/prebuild/instructions.txt at main · Kobo-InkBox/in...
Contribute to Kobo-InkBox/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-6951C


[7/29/2023 12:21 AM] szybet
by ignoring my messages


[7/29/2023 12:21 AM] szybet
you wont go further with my software


[7/29/2023 12:21 AM] tux_linux
ok, well i didn't see the right instructions.txt


[7/29/2023 12:21 AM] tux_linux
i was in lib


[7/29/2023 12:21 AM] szybet
.


[7/29/2023 12:22 AM] tux_linux
well, i didn't see it, that's all


[7/29/2023 12:31 AM] tux_linux
well, now THAT is good news

{Attachments}
/mnt/data/projects/git/conversations/media/image-A909F.png


[7/29/2023 12:31 AM] tux_linux
now i will try to find out why `play` isn't in my rootfs


[7/29/2023 12:32 AM] szybet
did you installed the packages


[7/29/2023 12:32 AM] tux_linux
oh, aplay


[7/29/2023 12:32 AM] szybet
hmm


[7/29/2023 12:32 AM] tux_linux
it's called


[7/29/2023 12:32 AM] szybet
play also exists


[7/29/2023 12:32 AM] szybet
but requires more packages


[7/29/2023 12:32 AM] tux_linux
well not in my case


[7/29/2023 12:32 AM] tux_linux
which are


[7/29/2023 12:32 AM] szybet
so i maybe dropped it


[7/29/2023 12:32 AM] szybet
idk


[7/29/2023 12:32 AM] tux_linux
well, audio plays


[7/29/2023 12:32 AM] tux_linux
good


[7/29/2023 12:34 AM] tux_linux
but i can't bring volume down


[7/29/2023 12:34 AM] tux_linux
bad


[7/29/2023 12:34 AM] szybet
https://github.com/Kobo-InkBox/inkbox-audio/blob/3f718ff7e0e4c4d8cbdcfa23420d8451feb0fe1d/src/sound/play.cpp#L207-L220

{Embed}
https://github.com/Kobo-InkBox/inkbox-audio/blob/3f718ff7e0e4c4d8cbdcfa23420d8451feb0fe1d/src/sound/play.cpp
inkbox-audio/src/sound/play.cpp at 3f718ff7e0e4c4d8cbdcfa23420d8451...
Contribute to Kobo-InkBox/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-6951C


[7/29/2023 12:35 AM] szybet
maybe your mixert name is diffrent


[7/29/2023 12:35 AM] szybet
doubt it


[7/29/2023 12:35 AM] szybet
show the logs


[7/29/2023 12:35 AM] tux_linux
i am still in cli


[7/29/2023 12:35 AM] szybet
oh


[7/29/2023 12:35 AM] szybet
welp


[7/29/2023 12:35 AM] szybet
good luck


[7/29/2023 12:35 AM] tux_linux
i brought alsamixer's sliders down


[7/29/2023 12:35 AM] tux_linux
it still plays


[7/29/2023 12:35 AM] tux_linux
so


[7/29/2023 12:35 AM] szybet
no idea


[7/29/2023 12:36 AM] tux_linux
maybe there is a way to fake it by reducing the volume of the file itself


[7/29/2023 12:36 AM] tux_linux
idk


[7/29/2023 12:36 AM] szybet
yes


[7/29/2023 12:36 AM] szybet
and its not easy


[7/29/2023 12:36 AM] szybet
and im not doing that


[7/29/2023 12:36 AM] szybet
+ performance reasons


[7/29/2023 12:37 AM] tux_linux
oh wait


[7/29/2023 12:37 AM] tux_linux
there are like 50 sliders


[7/29/2023 12:37 AM] szybet
awesome


[7/29/2023 12:37 AM] tux_linux
nvm


[7/29/2023 12:37 AM] szybet
https://tenor.com/view/good-luck-kekkai-sensen-blood-blockade-battlefront-chain-sumeragi-anime-gif-13511494

{Embed}
https://tenor.com/view/good-luck-kekkai-sensen-blood-blockade-battlefront-chain-sumeragi-anime-gif-13511494
/mnt/data/projects/git/conversations/media/good-luck-kekkai-sensen-73105.png


[7/29/2023 12:38 AM] tux_linux
i lowered them all and no luck


[7/29/2023 12:39 AM] szybet
maybe aplay is dumb


[7/29/2023 12:39 AM] tux_linux
i can lower beep volume


[7/29/2023 12:39 AM] szybet
beep?


[7/29/2023 12:39 AM] tux_linux
`beep`


[7/29/2023 12:39 AM] tux_linux
there is a command


[7/29/2023 12:40 AM] tux_linux
it beeps


[7/29/2023 12:40 AM] tux_linux
thats it


[7/29/2023 12:40 AM] tux_linux
BusyBox v1.34.1 (2022-05-30 18:54:43 EDT) multi-call binary.

Usage: beep -f FREQ -l LEN -d DELAY -r COUNT -n

    -f    Frequency in Hz
    -l    Length in ms
    -d    Delay in ms
    -r    Repetitions
    -n    Start new tone


[7/29/2023 12:40 AM] tux_linux
it randomly stops working


[7/29/2023 12:40 AM] tux_linux
i need aplay to bring it back


[7/29/2023 12:41 AM] szybet
this doesnt use alsa


[7/29/2023 12:41 AM] szybet
stop


[7/29/2023 12:41 AM] tux_linux
ok


[7/29/2023 12:41 AM] tux_linux
aplay or beep?


[7/29/2023 12:41 AM] szybet
beep


[7/29/2023 12:52 AM] tux_linux
https://alsa.opensrc.org/How_to_use_softvol_to_control_the_master_volume
hmm hmm

{Embed}
https://alsa.opensrc.org/How_to_use_softvol_to_control_the_master_volume
Alsa Opensrc Org - Independent ALSA and linux audio support site
Alsa Opensrc Org - Independent ALSA and linux audio support site


[7/29/2023 12:59 AM] szybet
what


[7/29/2023 12:59 AM] szybet
idk


[7/29/2023 12:59 AM] szybet
no idea


[7/29/2023 1:00 AM] szybet
figure it out with pure alsa, thats it


[7/29/2023 1:05 AM] szybet
also maybe just try my program?


[7/29/2023 1:05 AM] szybet
maybe aplay is stupid


[7/29/2023 1:06 AM] tux_linux
i dont think so


[7/29/2023 1:06 AM] tux_linux
alsa rules everything


[7/29/2023 1:06 AM] szybet
try other programs


[7/29/2023 1:06 AM] szybet
i posted here once about them


[7/29/2023 1:06 AM] szybet
cli clients


[7/30/2023 4:13 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-07122.png


[7/30/2023 4:17 PM] tux_linux
and


[7/30/2023 4:17 PM] szybet
camelcase


[7/30/2023 4:17 PM] tux_linux
well, this is an old function


[7/30/2023 4:18 PM] tux_linux
a 2021 one


[7/30/2023 4:18 PM] tux_linux
so


[7/30/2023 4:18 PM] szybet
ye sure


[7/30/2023 4:18 PM] tux_linux
it will get changed at some point


[7/30/2023 10:52 PM] szybet
https://mupdf.com/docs/mupdf_explored.pdf


[7/30/2023 10:54 PM] szybet
in short: i cant find anything with `fz_new_document_writer` or `fz_page` to obtain the page - i can only see a way to write it to a file which is stupid, i would need to write it, then read it


[7/30/2023 10:55 PM] szybet
@Kuratius @tux-linux idk who elde please if you can look up this problem before i go further, its just stupid


[7/30/2023 10:57 PM] szybet
maybe here something: https://mupdf.readthedocs.io/_/downloads/en/latest/pdf/


[8/1/2023 5:54 PM] tux_linux
.


[8/1/2023 5:54 PM] tux_linux
you agreed


[8/1/2023 5:54 PM] szybet
oh this


[8/1/2023 5:54 PM] szybet
it was a joke


[8/1/2023 5:54 PM] szybet
but whatever do what you want


[8/1/2023 5:55 PM] tux_linux
how could i know it was a joke


[8/1/2023 5:55 PM] tux_linux
whatever


[8/1/2023 5:55 PM] tux_linux
ok


[8/1/2023 5:55 PM] szybet
the users will complain about available space, i can just purge xorg out of existence if i need


[8/1/2023 5:55 PM] tux_linux
well, yea, but its in p4, plenty of space there by default


[8/1/2023 5:55 PM] tux_linux
even with xorg


[8/1/2023 5:55 PM] tux_linux
iirc


[8/1/2023 11:36 PM] szybet
on matrix is the video


[8/1/2023 11:36 PM] szybet
it sometimes doesnt fit, leaves space - thats the book, its normal


[8/1/2023 11:37 PM] szybet
this is pure mupdf, using 2 threads with qt signals, no mutexes

**without caching, its opening those pages on the run** holy crap its fast


[8/1/2023 11:38 PM] szybet
the book opens normally for 5 seconds, which is not ideal, i will work on it


[8/1/2023 11:38 PM] szybet
obviously i havent touched the refreshing


[8/1/2023 11:39 PM] szybet
i would still set a bit more tolerance, on one page it cutted the text off


[8/1/2023 11:40 PM] szybet
tldr of it: its reliable to not cut the text of, unlike the previous implementation

it will be propably needed to calibrate it per device screen / options, but it shouldnt need user intervention. still we will allow it


[8/1/2023 11:49 PM] szybet
well not always... hmmm... i will tinker a bit more. i doubt we can do something about it, its pure mutool at this point


[8/2/2023 9:15 AM] szybet
yep, my fault for sure


[8/2/2023 9:15 AM] szybet
idk where exactly for now


[8/2/2023 1:04 PM] [matrix] tux-linux
When did I say you could change reader screen margins


[8/2/2023 1:05 PM] [matrix] tux-linux
Apart from that it's good but do you account for font changes or anything
Also why does it refresh each time


[8/2/2023 1:06 PM] szybet
when i didnt implemented this lol


[8/2/2023 1:06 PM] szybet
you ignore half my text


[8/2/2023 1:06 PM] szybet
not yet


[8/2/2023 1:07 PM] tux_linux
.


[8/2/2023 1:07 PM] szybet
nope


[8/2/2023 1:08 PM] szybet
everything resizable by user


[8/2/2023 1:08 PM] tux_linux
I would start now because qt can cause you big problems with it if you don't take care of it


[8/2/2023 1:08 PM] szybet
nope


[8/2/2023 1:09 PM] szybet
i have the power of controlling the platform plugin now


[8/2/2023 1:09 PM] tux_linux
Where are these settings


[8/2/2023 1:09 PM] szybet
i implemented screen refreshes at the last thing in sanki


[8/2/2023 1:09 PM] szybet
ui file


[8/2/2023 1:09 PM] tux_linux
What if you try with a 3000+ pages book


[8/2/2023 1:10 PM] tux_linux
Everything resizable by user?!


[8/2/2023 1:10 PM] szybet
text margins


[8/2/2023 1:10 PM] tux_linux
I'm talking about the screen margins


[8/2/2023 1:10 PM] szybet
its the same thing


[8/2/2023 1:10 PM] tux_linux
No


[8/2/2023 1:10 PM] szybet
yes


[8/2/2023 1:10 PM] tux_linux
No


[8/2/2023 1:10 PM] szybet
the text is on the screen


[8/2/2023 1:10 PM] tux_linux
Check 2.0 video


[8/2/2023 1:10 PM] szybet
no, explain


[8/2/2023 1:12 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230802-071130-56907.png


[8/2/2023 1:12 PM] szybet
and


[8/2/2023 1:12 PM] szybet
i still dont get it


[8/2/2023 1:14 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230802-071329-A188A.png


[8/2/2023 1:14 PM] szybet
yes, and?


[8/2/2023 1:14 PM] tux_linux
You get it now?


[8/2/2023 1:14 PM] szybet
i have wrong margins


[8/2/2023 1:14 PM] szybet
and?


[8/2/2023 1:14 PM] tux_linux
Change them


[8/2/2023 1:14 PM] tux_linux
Please


[8/2/2023 1:15 PM] szybet
margins in the menu adjust text margins, yes?


[8/2/2023 1:20 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_2023-08-02_at_7.18.01_AM-00978.png


[8/2/2023 1:21 PM] szybet
so its screen margins


[8/2/2023 1:21 PM] szybet
whatever, fine, yes

{Reactions}
👍 

[8/2/2023 1:21 PM] szybet
i will make then resizable


[8/2/2023 1:21 PM] szybet
all of them


[8/2/2023 1:21 PM] szybet
thats it


[8/2/2023 1:23 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-8D8E9.png


[8/2/2023 1:23 PM] tux_linux
then is it reliable or not


[8/2/2023 1:23 PM] szybet
with such a dialog


[8/2/2023 1:23 PM] szybet
im not sure about the arrows


[8/2/2023 1:23 PM] szybet
give me some more time

{Reactions}
👍 

[8/2/2023 1:23 PM] tux_linux
where will the button to open it be


[8/2/2023 1:24 PM] tux_linux
on mini if you have more than three buttons on bottom left of the top menu (where is the home button), the screen overflows


[8/2/2023 1:25 PM] szybet
where


[8/2/2023 1:25 PM] tux_linux
where is the home button


[8/2/2023 1:26 PM] szybet
it will be above


[8/2/2023 1:26 PM] szybet
there


[8/2/2023 1:26 PM] szybet
somewhere


[8/2/2023 1:26 PM] tux_linux
i have to hide the power button on it to make things fit


[8/2/2023 1:26 PM] szybet
which power button


[8/2/2023 1:26 PM] tux_linux
i would maybe put this in settings instead


[8/2/2023 1:26 PM] szybet
nope


[8/2/2023 1:26 PM] szybet
book specific


[8/2/2023 1:27 PM] tux_linux
i doubt user is going to want this book specific


[8/2/2023 1:28 PM] tux_linux
text margins, probably
imo screen margins shouldn't be changed and would need to stay like the default ones


[8/2/2023 1:28 PM] szybet
obviously we will set defaults

the best way to do this is to prepare a public domain book, we will open it and save the values


[8/2/2023 1:29 PM] tux_linux
but whats the point of changing screen margins


[8/2/2023 1:29 PM] szybet
you wont allow me to se them for the nia and it hurts my eyes


[8/2/2023 1:29 PM] tux_linux
you don't find that ugly?


[8/2/2023 1:30 PM] szybet
i didnt set them at all


[8/2/2023 1:30 PM] szybet
i mean the previous one, default ones


[8/2/2023 1:31 PM] tux_linux
then what do you want to change about them


[8/2/2023 1:31 PM] szybet
make them diffrent


[8/2/2023 1:31 PM] szybet
we were talking about this 3 timer already


[8/2/2023 1:32 PM] tux_linux
try to set them at 4 and send a picture


[8/2/2023 1:32 PM] tux_linux
4.5


[8/2/2023 1:32 PM] szybet
too much


[8/2/2023 1:32 PM] szybet
and shifted


[8/2/2023 1:32 PM] tux_linux
shifted?


[8/2/2023 1:32 PM] tux_linux
isn't it supposed to adapt?


[8/2/2023 1:33 PM] szybet
my screen is shifted


[8/2/2023 1:33 PM] szybet
about 2 pixels


[8/2/2023 1:33 PM] tux_linux
what


[8/2/2023 1:33 PM] szybet
yes


[8/2/2023 1:33 PM] tux_linux
show


[8/2/2023 1:33 PM] szybet
later


[8/2/2023 1:33 PM] szybet
we talked about this...


[8/2/2023 1:33 PM] tux_linux
how do you set settings for book


[8/2/2023 1:34 PM] szybet
?...


[8/2/2023 1:34 PM] szybet
defaults?


[8/2/2023 1:35 PM] tux_linux
font size


[8/2/2023 1:35 PM] szybet
qfontdialog will be used


[8/2/2023 1:35 PM] tux_linux
where are they saved


[8/2/2023 1:35 PM] tux_linux
also please try to make qfontdialog display ui in u001 font


[8/2/2023 1:36 PM] szybet
/mnt/onboard/onboard/.progress/sha1ofthebook/font


[8/2/2023 1:37 PM] szybet
maybe even not sha 1, we will see


[8/2/2023 1:37 PM] szybet
i want it to not take more than a second for 10Mb book


[8/2/2023 1:37 PM] szybet
i might sha the author / name / date etc together to make it faster


[8/2/2023 1:38 PM] tux_linux
and you dont use bookconfig_mount anymore


[8/2/2023 1:38 PM] tux_linux
right


[8/2/2023 1:38 PM] szybet
nope


[8/2/2023 1:38 PM] szybet
its awfull confusing


[8/2/2023 1:38 PM] szybet
i will want to grab default values if needed


[8/2/2023 1:38 PM] tux_linux
ok
then why don't just use a new folder in default settings to set screen margins


[8/2/2023 1:39 PM] szybet
per book


[8/2/2023 1:39 PM] tux_linux
why


[8/2/2023 1:39 PM] szybet
why not


[8/2/2023 1:39 PM] tux_linux
text margins will do the same things


[8/2/2023 1:39 PM] szybet
what


[8/2/2023 1:40 PM] tux_linux
im not sure i want my next and previous page buttons to shift in place depending on the book i read


[8/2/2023 1:40 PM] szybet
i will set one type of margins, of the whole main window


[8/2/2023 1:40 PM] szybet
your decission


[8/2/2023 1:40 PM] szybet
i want choice


[8/2/2023 1:40 PM] tux_linux
so text margins disappear?


[8/2/2023 1:41 PM] szybet
what are text margins


[8/2/2023 1:41 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-2A20A.png


[8/2/2023 1:41 PM] szybet
whats the point of them


[8/2/2023 1:42 PM] szybet
well sure i can set it to text only


[8/2/2023 1:42 PM] szybet
i dont care


[8/2/2023 1:42 PM] tux_linux
https://youtu.be/cyWu_pHwqNg?t=153

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=cyWu_pHwqNg&start=153
InkBox OS 2.0
InkBox OS 2.0 is an open-source, fully-functional operating system for eReaders. It primarily runs on Kobo, but has been ported to other devices such as the Kindle Touch.

00:00 Boot on Kindle Touch
01:39 ePUB reading
05:24 PDF reading
06:48 Pictures display
07:10 Local library widget
08:24 Home page widget
09:30 Online library widget (Gutenberg...
/mnt/data/projects/git/conversations/media/hqdefault-6DDB9.jpg


[8/2/2023 1:42 PM] szybet
the same effect


[8/2/2023 1:42 PM] tux_linux
2:50


[8/2/2023 1:42 PM] tux_linux
except it doesnt shift the buttons


[8/2/2023 1:43 PM] szybet
sure then


[8/2/2023 1:43 PM] tux_linux
good
so you can set screen margins as a general setting


[8/2/2023 1:43 PM] tux_linux
not book specific


[8/2/2023 1:44 PM] tux_linux
and text margins book specific


[8/2/2023 1:44 PM] szybet
nope, only text margins then


[8/2/2023 1:44 PM] tux_linux
well ok
make screen margins 9,9,9,9


[8/2/2023 1:44 PM] szybet
we will see


[8/2/2023 1:44 PM] szybet
propably less


[8/2/2023 1:45 PM] tux_linux
then make a setting


[8/2/2023 1:45 PM] szybet
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619

{Embed}
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619
/mnt/data/projects/git/conversations/media/noooo-no-1AE19.png


[8/2/2023 1:45 PM] tux_linux
also text margin setting is already implemented, you can just copy the code probably


[8/2/2023 1:46 PM] szybet
i will reuse it

{Reactions}
👍 

[8/2/2023 2:12 PM] tux_linux
ok

{Attachments}
/mnt/data/projects/git/conversations/media/image-1C84A.png


[8/2/2023 2:12 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-0A904.png


[8/2/2023 2:13 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-6868A.png


[8/2/2023 2:14 PM] szybet
the code is open source! i can use it for free! its real! such a scam!


[8/2/2023 2:14 PM] szybet
those are russian animals, not worth listening to


[8/2/2023 2:15 PM] tux_linux
i replied for fun


[8/2/2023 2:15 PM] szybet
also for real: there is a russian guy that provides  a paid system launcher for some ereaders, i once sended it
propably related


[8/2/2023 2:15 PM] szybet
closed source of course lol


[8/2/2023 2:15 PM] tux_linux
yes


[8/2/2023 2:16 PM] szybet
i dont see those comments


[8/2/2023 2:16 PM] szybet
oh diffrent video


[8/2/2023 2:16 PM] szybet
wait


[8/2/2023 2:16 PM] szybet
its not the 2.0 video


[8/2/2023 2:16 PM] tux_linux
no


[8/2/2023 6:16 PM] [matrix] Szybet
its just my confusing book, the rust code is needed overall


[8/2/2023 6:16 PM] [matrix] Szybet
and yes, no more cutted off text


[8/2/2023 6:25 PM] [matrix] tux-linux
Good


[8/2/2023 6:25 PM] [matrix] tux-linux
Do we support images?


[8/2/2023 6:25 PM] szybet
if i dont figure out how to set PPI, every font change will need calibration


[8/2/2023 6:26 PM] szybet
well, automatic calibration then, we will see


[8/2/2023 6:26 PM] tux_linux
Hmm ok


[8/2/2023 6:26 PM] tux_linux
What about pictures


[8/2/2023 6:26 PM] szybet
1136211764539826318


[8/2/2023 6:26 PM] tux_linux
In epub


[8/2/2023 6:26 PM] szybet
https://discord.com/channels/809205711778480158/1126492035818467378/1136211764539826318


[8/2/2023 6:26 PM] szybet
you do not read my messages


[8/2/2023 6:26 PM] tux_linux
Yes I saw that


[8/2/2023 6:26 PM] tux_linux
It's only the cover


[8/2/2023 6:26 PM] tux_linux
Is it able to embed images


[8/2/2023 6:26 PM] tux_linux
In the text


[8/2/2023 6:27 PM] szybet
it the first page of the book


[8/2/2023 6:27 PM] szybet
and its an image


[8/2/2023 6:27 PM] szybet
yes there will be images


[8/2/2023 6:27 PM] tux_linux
With books that have images


[8/2/2023 6:27 PM] tux_linux
Inside


[8/2/2023 6:27 PM] tux_linux
Ok


[8/2/2023 6:27 PM] szybet
ye


[8/2/2023 6:27 PM] szybet
maybe scrollbar will be needed


[8/2/2023 6:27 PM] szybet
we will see


[8/2/2023 6:27 PM] tux_linux
Ok


[8/2/2023 6:33 PM] szybet
now i understand why plato uses svg


[8/2/2023 6:33 PM] szybet
its raster


[8/2/2023 6:33 PM] szybet
and mupdf supports raster


[8/2/2023 6:34 PM] szybet
and ppi in them


[8/2/2023 6:34 PM] szybet
cra


[8/2/2023 6:34 PM] szybet
maybe math could help us


[8/2/2023 6:35 PM] szybet
like calculate the resolution based on our ppi, accounting of what mupdf expects


[8/2/2023 6:35 PM] szybet
i think 70


[8/2/2023 6:37 PM] tux_linux
70 what


[8/2/2023 6:37 PM] szybet
ppi


[8/2/2023 6:37 PM] tux_linux
and you forget highlighting


[8/2/2023 6:37 PM] szybet
we have like 220


[8/2/2023 6:37 PM] tux_linux
yes


[8/2/2023 6:37 PM] szybet
i will not switch to svg


[8/2/2023 6:37 PM] tux_linux
ok


[8/2/2023 6:37 PM] szybet
either math or calibration


[8/2/2023 6:37 PM] tux_linux
what do you want to do with ppi


[8/2/2023 6:37 PM] tux_linux
we have to scale 220 to 70?


[8/2/2023 6:38 PM] szybet
we with a screen of 1024 × 758 and 212 ppi need to calculate what mutool expects at 70 ppi


[8/2/2023 6:39 PM] tux_linux
why are you sure its 70


[8/2/2023 6:39 PM] szybet
i dont think its possible or it makes sense at all


[8/2/2023 6:39 PM] szybet
i readed it somewhere


[8/2/2023 6:39 PM] szybet
cant find it now


[8/2/2023 6:39 PM] tux_linux
also, it depends on the font too


[8/2/2023 6:39 PM] tux_linux
on margins


[8/2/2023 6:39 PM] tux_linux
on too many things


[8/2/2023 6:40 PM] szybet
automatic calibration then


[8/2/2023 6:40 PM] szybet
20 seconds waiting


[8/2/2023 6:40 PM] szybet
i will try to stop the screen from flashing in that time


[8/2/2023 6:41 PM] tux_linux
ok good luck


[8/2/2023 6:56 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B35FE.png


[8/2/2023 6:56 PM] szybet
undocumented feature...


[8/2/2023 6:56 PM] tux_linux
dont forget that everything changes depending on font size and font and margins and line spacing and everything else


[8/2/2023 6:57 PM] szybet
thats why the user can adjust it


[8/2/2023 6:57 PM] szybet
if you tinker, you have problems


[8/2/2023 6:57 PM] tux_linux
ok


[8/2/2023 11:30 PM] [matrix] Szybet
and the same thing for other 'x' pages to be sure


[8/2/2023 11:30 PM] [matrix] Szybet
this will be an option, manual will be bether propably


[8/2/2023 11:56 PM] szybet
it gets extremely reliable after 20 pages, which take 2 minutes


[8/2/2023 11:56 PM] szybet
and that with a big font which likes to "shift"


[8/2/2023 11:57 PM] szybet
more pages = better reliability


[8/2/2023 11:57 PM] szybet
one minute and 10 seconds takes the first page, after it it goes faster


[8/2/2023 11:59 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-C046C.txt


[8/2/2023 11:59 PM] szybet
thats a lot of code


[8/2/2023 11:59 PM] szybet
almost as complicated as split txt


[8/3/2023 1:29 PM] szybet
to much work


[8/3/2023 1:30 PM] szybet
so, nope


[8/3/2023 1:30 PM] szybet
you can rewrite the dialog completly


[8/3/2023 1:32 PM] matterbridge#2154
[matrix] Maximilian Gaedig ⚡️ 
You read 20 pages in 2 mins?


[8/3/2023 1:32 PM] [matrix] Maximilian Gaedig ⚡
Or you mean it takes 2mins to flip 20 pages?


[8/3/2023 1:33 PM] szybet
no i mean calibration


[8/3/2023 1:33 PM] szybet
so no more cutted off text


[8/3/2023 1:33 PM] szybet
sadly its needed for every font change


[8/3/2023 1:34 PM] szybet
limitation of our engine and the implementation we go for


[8/3/2023 1:37 PM] szybet
maybe someone in the future will figure it out, in mupdf source code


[8/3/2023 1:37 PM] szybet
i didnt found anything


[8/3/2023 2:42 PM] [matrix] Maximilian Gaedig ⚡
And how does plato do it? It also uses mupdf no?


[8/3/2023 2:43 PM] szybet
it uses raster graphics, svg - we use html out of mupdf


[8/3/2023 2:44 PM] szybet
both solutions have problems


[8/3/2023 2:45 PM] szybet
we have this loading time after every change, plato has problem with rendering anything more complicated


[8/3/2023 2:47 PM] szybet
we could render some custom css, html items, markdown etc - plato not eassly


[8/3/2023 2:48 PM] szybet
but the tldr is easy of use - plato is OOLD compared to inkbox, where plato has a good reader after years of programming, i have a good demo after a few weeks of programming


[8/3/2023 2:49 PM] szybet
+ more customisation with html, like margins, line widths etc


[8/3/2023 2:54 PM] tux_linux
we can't calculate values for every font?
and font size?
after all, there is a finite number of font and font sizes
or it will be too big?


[8/3/2023 2:56 PM] szybet
and margins? and screens? and line widths? not even talking about left right center justify


[8/3/2023 2:56 PM] szybet
nope


[8/3/2023 2:56 PM] tux_linux
oh yea then no


[8/3/2023 2:57 PM] tux_linux
i doubt that justification could change a lot but the rest yes


[8/3/2023 2:59 PM] [matrix] tux-linux
it seems good
how do you trigger calibration


[8/3/2023 2:59 PM] szybet
in settings
for testing i binded it to the left button


[8/3/2023 3:00 PM] tux_linux
also message that got eaten by bot

{Attachments}
/mnt/data/projects/git/conversations/media/image-2D90F.png


[8/3/2023 3:00 PM] szybet
you can see it yourself, no scroll bars after


[8/3/2023 3:01 PM] tux_linux
yea, how much pages do you test


[8/3/2023 3:01 PM] szybet
if there were - just run a longer calibration

it will make higher tolerance and sometimes not all screen will be used, but hey better than too much


[8/3/2023 3:02 PM] szybet
i writed already, read what i send


[8/3/2023 3:03 PM] tux_linux
yes, you said 20


[8/3/2023 3:03 PM] tux_linux
not enough probably?


[8/3/2023 3:03 PM] szybet
look at the video


[8/3/2023 3:03 PM] szybet
no more scroll bars after


[8/3/2023 3:03 PM] tux_linux
the video stops at the end of calibration


[8/3/2023 3:04 PM] szybet
20 will be the default


[8/3/2023 3:04 PM] szybet
oh really


[8/3/2023 3:04 PM] szybet
oops


[8/3/2023 3:04 PM] tux_linux
it only tests one page with right amount of text and no scrollbar


[8/3/2023 3:05 PM] szybet
the 2 minute video where i go another 20 pages vanished somehow

tldr no scroll bars


[8/3/2023 3:05 PM] tux_linux
add a button to do calibration
probably replace the old info button with it
use this icon

{Attachments}
/mnt/data/projects/git/conversations/media/calibration-AEC7A.png


[8/3/2023 3:06 PM] szybet
it simply tests at what width and height will be scrollbar visible, if it will it sets max value, if ever scroll bar appears on next pages it makes the max smaller


[8/3/2023 3:06 PM] szybet
its bullet proof


[8/3/2023 3:06 PM] szybet
time consuming sadly


[8/3/2023 3:07 PM] tux_linux
ok


[8/3/2023 3:07 PM] tux_linux
well, still relevant


[8/3/2023 3:07 PM] tux_linux
i will pack kt image today hopefully


[8/3/2023 3:07 PM] tux_linux
without audio


[8/3/2023 3:07 PM] szybet
ok

{Reactions}
👍 

[8/3/2023 3:07 PM] tux_linux
should i wait for new reader?


[8/3/2023 3:07 PM] szybet
nope


[8/3/2023 3:07 PM] szybet
will take half a month for sure


[8/3/2023 3:08 PM] tux_linux
ok


[8/3/2023 3:08 PM] tux_linux
andi did not reappear yet


[8/3/2023 3:08 PM] tux_linux
well, it's just over three weeks


[8/3/2023 3:08 PM] tux_linux
I hope he comes back soon


[8/3/2023 3:09 PM] szybet
ye


[8/3/2023 3:12 PM] [matrix] Maximilian Gaedig ⚡
Is the calibration trial and error?


[8/3/2023 3:13 PM] tux_linux
yes


[8/3/2023 3:16 PM] [matrix] Maximilian Gaedig ⚡
No way to make it a calculation?


[8/3/2023 3:16 PM] [matrix] Maximilian Gaedig ⚡
Or at least do the trial and error off screen


[8/3/2023 3:16 PM] szybet
well yes obviously


[8/3/2023 3:17 PM] szybet
only for font change, and not bullet proof, and i didnt figured it out


[8/4/2023 10:17 AM] szybet
https://astyle.sourceforge.net/


[8/4/2023 10:20 AM] szybet
https://github.com/uncrustify/uncrustify

{Embed}
https://github.com/uncrustify/uncrustify
GitHub - uncrustify/uncrustify: Code beautifier
Code beautifier. Contribute to uncrustify/uncrustify development by creating an account on GitHub.


[8/4/2023 10:20 AM] szybet
https://universalindent.sourceforge.net/

{Embed}
https://universalindent.sourceforge.net/
UniversalIndentGUI
UniversalIndentGUI is a graphical UI for multiple
    source code indent, format and beautify tools like GNU Indent, Astyle, GreatCode etc.


[8/4/2023 10:20 AM] szybet
thats cool


[8/5/2023 4:00 PM] szybet
If you plan to make qsettings, look up datastreams.cpp in toreader branch and follow it


[8/5/2023 4:00 PM] szybet
like the same file


[8/5/2023 4:32 PM] tux_linux
ok


[8/5/2023 4:32 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-02929.png


[8/5/2023 4:32 PM] szybet
algorithm for identifying books


[8/5/2023 4:32 PM] tux_linux
what


[8/5/2023 4:33 PM] szybet
if a file is 150 Mb


[8/5/2023 4:33 PM] szybet
we wont make a sha of all of it


[8/5/2023 4:33 PM] szybet
just some parts of it


[8/5/2023 4:34 PM] tux_linux
hm ok
are you sure thats a good idea


[8/5/2023 4:34 PM] szybet
do you have a better idea


[8/5/2023 6:22 PM] szybet
As we move away from the file naming, lets remove the numbers before the dir names


[8/5/2023 6:26 PM] tux_linux
well, in settings redesign there won't be any more folders


[8/5/2023 6:27 PM] szybet
oh like that, um sure


[8/5/2023 6:27 PM] szybet
`toreader.ini` then


[8/5/2023 6:27 PM] tux_linux
`reader.ini`
please


[8/5/2023 6:27 PM] tux_linux
and no


[8/5/2023 6:27 PM] tux_linux
actually


[8/5/2023 6:27 PM] tux_linux
it should just be `settings.ini`


[8/5/2023 6:27 PM] tux_linux
put everything in there


[8/5/2023 6:27 PM] tux_linux
starting with reader


[8/5/2023 6:28 PM] szybet
so the key will be toreader


[8/5/2023 6:28 PM] szybet
and value the struct


[8/5/2023 6:28 PM] szybet
sure


[8/5/2023 6:28 PM] tux_linux
i will run sed and rename it reader


[8/5/2023 6:29 PM] szybet
we cant have nice things, i cant have a nice internal code name for things


[8/5/2023 6:29 PM] szybet
you will, sure i dont care


[8/5/2023 6:29 PM] tux_linux
reader is nice enough?

{Reactions}
😒 

[8/5/2023 6:33 PM] tux_linux
where is your repo?


[8/5/2023 6:35 PM] tux_linux
oh ok, on that branch


[8/5/2023 6:35 PM] szybet
https://youtu.be/EIM78NrhixA?t=37


[8/5/2023 6:35 PM] szybet
what do you want to do


[8/5/2023 6:36 PM] tux_linux
i just wanted to see the code


[8/5/2023 6:37 PM] szybet
hmm you can in the mean time figure out how to convert a txt file to a epub one


[8/5/2023 6:37 PM] szybet
because thats how i will support them


[8/5/2023 6:37 PM] szybet
no other way


[8/5/2023 6:37 PM] tux_linux
you can't just throw this text file into a `<pre>` block?


[8/5/2023 6:38 PM] szybet
um no, that would be a html file


[8/5/2023 6:38 PM] szybet
we need an epub one


[8/5/2023 6:38 PM] tux_linux
well, then package it to epub


[8/5/2023 6:38 PM] tux_linux
its a zip


[8/5/2023 6:38 PM] tux_linux
probably


[8/5/2023 6:38 PM] tux_linux
have a skeleton


[8/5/2023 6:38 PM] tux_linux
probably not much to change


[8/5/2023 6:38 PM] szybet
and make mupdf not freak out? and use a zip library?


[8/5/2023 6:38 PM] szybet
its not that easy


[8/5/2023 6:38 PM] szybet
and im lazy about it


[8/5/2023 6:38 PM] tux_linux
i can do it


[8/5/2023 6:39 PM] szybet
yea


[8/5/2023 6:39 PM] szybet
just create an epub out of a txt file, put it in a hidden folder and thats it


[8/5/2023 6:39 PM] szybet
you can do it when library creation is going on


[8/5/2023 6:39 PM] tux_linux
and for pdf what will you do


[8/5/2023 6:39 PM] szybet
use native mupdf


[8/5/2023 6:41 PM] tux_linux
ok


[8/6/2023 1:55 PM] tux_linux
🥴

{Attachments}
/mnt/data/projects/git/conversations/media/image-8A1B7.png


[8/6/2023 1:58 PM] szybet
there was a major shift in the 2000s to go from qt -> javascript html and shit, so no wonder the go with qml which is kinda javascript but still compiled and efficient


[8/6/2023 1:58 PM] szybet
¯\_(ツ)_/¯


[8/6/2023 2:02 PM] szybet
the problem with highlights was that we could get only plain text, not html one?


[8/6/2023 2:02 PM] szybet
@tux-linux


[8/6/2023 2:05 PM] tux_linux
the problem with highlights was that we couldn't highlight formatted text because of html tags


[8/6/2023 2:06 PM] tux_linux
this


[8/6/2023 2:07 PM] szybet
now it will be worse because mupdf in html uses spans after every line


[8/6/2023 2:07 PM] szybet
i will think of a solution


[8/6/2023 2:07 PM] tux_linux
we used xhtml prior to what you did now


[8/6/2023 2:07 PM] tux_linux
probably didn't have spans


[8/6/2023 2:07 PM] tux_linux
iirc


[8/6/2023 2:09 PM] szybet
i need to find a smart way to detect where the text to highlight ends and starts in html code, using only the bare text


[8/6/2023 2:09 PM] szybet
a smart way


[8/6/2023 2:09 PM] tux_linux
how do you highlight it back


[8/6/2023 2:10 PM] szybet
regex & position in text & rust


[8/6/2023 2:11 PM] tux_linux
can't we avoid running another binary?


[8/6/2023 2:11 PM] tux_linux
regex exists in cpp


[8/6/2023 2:11 PM] tux_linux
QRegExp


[8/6/2023 2:12 PM] szybet
its a fucking library written in rust called natively from cpp


[8/6/2023 2:12 PM] szybet
https://tenor.com/view/anakin-skywalker-anakin-skywalker-dark-side-obi-wan-gif-18082857

{Embed}
https://tenor.com/view/anakin-skywalker-anakin-skywalker-dark-side-obi-wan-gif-18082857
/mnt/data/projects/git/conversations/media/anakin-skywalker-5A49E.png


[8/6/2023 2:12 PM] tux_linux
ok that


[8/6/2023 2:12 PM] tux_linux
well, whats the point of throwing it in ereader lib


[8/6/2023 2:12 PM] tux_linux
its too specific


[8/6/2023 2:12 PM] szybet
rust and its awesome html libraries


[8/6/2023 2:13 PM] szybet
have you looked at the code i sended that ended being actually needed?


[8/6/2023 2:13 PM] szybet
try to write this in cpp


[8/6/2023 2:13 PM] szybet
lol


[8/6/2023 2:13 PM] tux_linux
im just saying, maybe these functions should go in libreader.so instead or smth


[8/6/2023 2:13 PM] tux_linux
no one on nickel will take advantage of this


[8/6/2023 2:14 PM] szybet
what?


[8/6/2023 2:14 PM] szybet
what?


[8/6/2023 2:14 PM] szybet
what?


[8/6/2023 2:14 PM] tux_linux
make a separate rust library


[8/6/2023 2:14 PM] szybet
https://github.com/Szybet/libreader-rs

{Embed}
https://github.com/Szybet/libreader-rs
GitHub - Szybet/libreader-rs: Library in rust for inkbox binary
Library in rust for inkbox binary. Contribute to Szybet/libreader-rs development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/libreader-rs-C0EEB


[8/6/2023 2:14 PM] szybet
what do you think this is?


[8/6/2023 2:14 PM] tux_linux
well ok


[8/6/2023 2:15 PM] szybet
how will rust stop them


[8/6/2023 2:15 PM] tux_linux
why is the last commit 7 months ago


[8/6/2023 2:15 PM] szybet
because its working


[8/6/2023 2:15 PM] szybet
i will add highliting / font support soon to it


[8/6/2023 2:15 PM] tux_linux
why isn't the rust code you wrote last week in there


[8/6/2023 2:16 PM] szybet
because the rust code is 7 months old


[8/6/2023 2:16 PM] tux_linux
i thought you said you just wrote it


[8/6/2023 2:16 PM] szybet
nope


[8/6/2023 2:16 PM] tux_linux
well, ok


[8/6/2023 2:16 PM] szybet
i said its maybe not needed anymore


[8/6/2023 2:16 PM] szybet
its needed


[8/6/2023 2:16 PM] tux_linux
then put highlighting there


[8/6/2023 2:16 PM] szybet
first i figure out how


[8/6/2023 2:17 PM] tux_linux
yes


[8/6/2023 2:17 PM] tux_linux
ask chatgpt maybe


[8/6/2023 2:17 PM] szybet
its stupid as fuck


[8/6/2023 2:18 PM] szybet
the moment you try to do something original it says nothing


[8/6/2023 2:18 PM] tux_linux
it worked for init


[8/6/2023 2:18 PM] szybet
its c


[8/6/2023 2:18 PM] szybet
people are making memory mistakes for almost 80 years


[8/6/2023 2:19 PM] szybet
how many people have written a reader with highliting using mupdf?


[8/6/2023 2:19 PM] szybet
plato, thats it


[8/6/2023 2:19 PM] szybet
idk how he does it


[8/6/2023 2:19 PM] tux_linux
still ask
maybe it can give you ideas


[8/6/2023 2:20 PM] szybet
its stupid as safljkdnsdakjfgnsdjkhfnfkhujwsdenk


[8/6/2023 2:20 PM] tux_linux
also before you make spelling mistakes
h i g h l i g h t i n g


[8/6/2023 2:20 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-D5429.txt


[8/6/2023 2:20 PM] tux_linux
those regex patterns are probably supported by qt


[8/6/2023 2:21 PM] szybet
it doesnt makes sense, it doesnt work, its stupid.


[8/6/2023 2:21 PM] tux_linux
i know it's stupid but if you end up only using regex like this, what's the point of calling a library


[8/6/2023 2:21 PM] tux_linux
you can just use internal qt functions


[8/6/2023 2:22 PM] szybet
wserdcgfvhbj


[8/6/2023 2:31 PM] szybet
i will make an algorithm hand picking words in a efficient way i think


[8/6/2023 2:59 PM] tux_linux
well, then this isn't regex
it's ok then


[8/6/2023 3:19 PM] tux_linux
512x512 icons


[8/6/2023 3:19 PM] tux_linux
please


[8/6/2023 3:19 PM] szybet
svgs please


[8/6/2023 3:19 PM] szybet
---


[8/6/2023 3:20 PM] tux_linux
well, you want to implement it?


[8/6/2023 3:20 PM] szybet
https://tenor.com/view/pokemon-no-nope-mad-pikachu-gif-17858170

{Embed}
https://tenor.com/view/pokemon-no-nope-mad-pikachu-gif-17858170
/mnt/data/projects/git/conversations/media/pokemon-no-2D29E.png


[8/6/2023 3:54 PM] tux_linux
here

{Attachments}
/mnt/data/projects/git/conversations/media/margins-233EF.png
/mnt/data/projects/git/conversations/media/font-C0CFC.png


[8/6/2023 6:42 PM] szybet
@tux-linux submit to distrowatch please


[8/6/2023 7:12 PM] szybet
dont ignore me


[8/6/2023 8:10 PM] tux_linux
what did you actually mean in this commit message
where does cold come from
i am still puzzled one year later


[8/6/2023 8:11 PM] szybet
replacing wifi?


[8/6/2023 8:11 PM] szybet
what are you doing


[8/6/2023 8:12 PM] tux_linux
I'm trying to find the highlighting problem with formatted text I experienced last year


[8/6/2023 8:14 PM] tux_linux
oh


[8/8/2023 1:06 PM] szybet
https://opensource.guide/maintaining-balance-for-open-source-maintainers/

{Embed}
https://opensource.guide/maintaining-balance-for-open-source-maintainers/
Maintaining Balance for Open Source Maintainers
Tips for self-care and avoiding burnout as a maintainer.
/mnt/data/projects/git/conversations/media/maintaining-balance-for-open-source-mainta-2DDBC.png


[8/8/2023 1:06 PM] szybet
something for you


[8/8/2023 2:06 PM] tux_linux
yes


[8/9/2023 9:28 PM] szybet
I hoped you will be more active in the summer


[8/9/2023 9:34 PM] tux_linux
- I'm not paid for this
- I don't pay you
- You do what you want
- I do what I want
- I'm learning calculus


[8/9/2023 9:35 PM] szybet
fancy markdown

- I said ***hope***, i obviously understand you
- my god calculus

{Reactions}
👍 

[8/9/2023 9:36 PM] tux_linux
i just used -


[8/9/2023 9:36 PM] tux_linux
didn't you already learn it?


[8/9/2023 9:36 PM] szybet
discord recently added it


[8/13/2023 12:15 AM] tux_linux
its qt 4.8?

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_2023-08-12_at_6.14.36_PM-12C32.png


[8/13/2023 12:15 AM] szybet
still weird


[8/13/2023 4:08 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230813-100757-F1CD2.png


[8/13/2023 4:27 PM] szybet
pain


[8/17/2023 9:16 AM] szybet
@tux-linux look at #deleted-channel


[8/17/2023 9:16 AM] szybet
you can't set the url of a submodule as ssh, not all people have access to it, change it


[8/17/2023 10:15 PM] szybet
http://www.lightofdawn.org/wiki/wiki.cgi/NewAppsOnOldGlibc


[8/18/2023 11:00 PM] szybet
```
/app-bin $ PATH="/app-bin:/system-bin" LD_LIBRARY_PATH="/system-lib/lib:/system-lib/qt/lib:/app-lib" /system-lib/lib/ld-linux-armhf.so.3 ./Sketch.bin /app-data
./Sketch.bin: symbol lookup error: ./Sketch.bin: undefined symbol: _binary_NotoSansSundanese_Regular_otf
```


[8/18/2023 11:00 PM] szybet
sketch broke


[8/18/2023 11:00 PM] szybet
for whatever reason


[8/18/2023 11:01 PM] szybet
oh, i replaced mupdf with mine


[8/18/2023 11:01 PM] szybet
welp


[8/18/2023 11:01 PM] szybet
@Kuratius try sketch user app yourself on inkbox, im too lazy to reset my system


[8/18/2023 11:02 PM] szybet
https://www.youtube.com/embed/Uz1CcqDgtQU

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=Uz1CcqDgtQU
InkBox OS user app: FeatherNotes demo
FeatherNotes is a (forked) note-taking app for eReaders running InkBox OS. It can be installed as an user app and work with a standalone keyboard connected via USB OTG. It currently only has been tested on Kobo Nia.

FeatherNotes was ported by Szybet, there on GitHub : https://github.com/Szybet/FeatherNotes-inkbox (credits also go to tsujan for ...
/mnt/data/projects/git/conversations/media/maxresdefault-7700B.jpg


[8/18/2023 11:02 PM] szybet
for now there is that for you to see


[8/20/2023 3:23 PM] szybet
Reasons why you included todo code and highlight code in functions.h is unknown to me.


[8/20/2023 3:24 PM] tux_linux
?


[8/20/2023 10:19 PM] szybet
forgot to mention: ini files, qsettings, qvariants structs are not backwards compatible, soif you choose to use structs:
1. split them to many "key values" to make updating easier, not one global one
2. one time config update will be needed, even chatgpt will be able to manage it

this only applies to structures. you wont need to use them mostly because your settings are more splitted from another, it makes sense to do this for a reader because there are many values, or for translate, where it wont change, ever


[8/22/2023 10:07 PM] szybet
@tux-linux would you have time for me for 5 minutes today or tommorow?


[8/22/2023 10:12 PM] tux_linux
now


[8/22/2023 10:12 PM] tux_linux
5 min


[8/22/2023 10:13 PM] tux_linux
what do you want


[8/22/2023 10:14 PM] szybet
can it be now in 20 minutes?


[8/22/2023 10:14 PM] szybet
upload marble yt video


[8/22/2023 10:14 PM] szybet
thats it


[8/22/2023 10:14 PM] tux_linux
just send it


[8/22/2023 10:14 PM] szybet
im recording it


[8/22/2023 10:14 PM] tux_linux
ok


[8/22/2023 10:17 PM] szybet
i think it runned out of memory


[8/22/2023 10:17 PM] szybet
+ 10 min


[8/22/2023 10:17 PM] tux_linux
ok


[8/22/2023 10:37 PM] szybet
uploaded it

in the description say something like
kde's marble ported to InkBox - this is just a demo ( the app is not polished in any way ), build instructions can be aquired on request


[8/22/2023 10:37 PM] szybet
its in misc folder


[8/22/2023 10:40 PM] szybet
also @andi you used another map app on kobo, marble works and is "good", you may be interested

i was able to compile it and run it, i wasn't a year ago... i have more experience in fights with opengl


[8/22/2023 10:40 PM] tux_linux
Well, will upload it at home


[8/22/2023 10:40 PM] tux_linux
Commuting now


[8/22/2023 10:41 PM] szybet
today?


[8/22/2023 10:41 PM] tux_linux
Yes


[8/22/2023 10:41 PM] szybet
in 20 minutes or 1h?


[8/22/2023 10:43 PM] szybet
well considering your internet speed, 1h propably


[8/22/2023 10:53 PM] tux_linux
When you are asleep probably


[8/22/2023 10:54 PM] szybet
understandable


[8/22/2023 10:54 PM] szybet
https://www.mobileread.com/forums/showthread.php?t=355765

{Embed}
https://www.mobileread.com/forums/showthread.php?t=355765
Requests for firmware images in one thread - MobileRead Forums
Requests for firmware images in one thread Kobo Developer's Corner


[8/22/2023 10:54 PM] szybet
back this up someone pls


[8/22/2023 11:12 PM] andi15701
well, tried marble jus on the desktop


[8/22/2023 11:12 PM] andi15701
does not look so mobile-friendly


[8/22/2023 11:13 PM] szybet
They have an android version


[8/22/2023 11:13 PM] szybet
i didnt compiled it, wpuld require a few days of replacing android calls but welp


[8/23/2023 11:43 PM] szybet
I will post it here too, maybe someone is a hidden rust wizart


[8/23/2023 11:44 PM] szybet
Hello
I have a problem. I'm trying to use a second rust library ( via cbindgen ) with my cpp program on a musl target. I use cross to crosscompile. The exact error is in the attachement file:

I had a similar problem ( also glibc ) in the first library when i added to `[lib]` `crate-type` the value `rlib`( I have there only staticlib, i link those libraries statically ) to make integration tests to work ( solution from https://users.rust-lang.org/t/does-crate-type-has-effect-on-integration-test/76634 )

Now i don't have any tests, but a lot more libraries, in that open ssl vendored and some hacky tokio futures
```
futures = "0.3"
futures-executor = { version = "0.3", features = ["thread-pool"] }
libretranslate = { path = "lib-rs/libretranslate-rs" }
openssl = { version = '0.10', features = ["vendored"] }
```
i'm completly lost with this. Here is a readelf of the rust library ( it's 250Mb because it's debug build to include all info, be aware ):
http://pkgs-inkbox.duckdns.org:25560/misc/readelf.txt

Here is the repository with the code:
https://github.com/Szybet/Libretranslate-rs-to-cpp

Here is the cpp program i'm linking it against
https://github.com/Szybet/inkbox/tree/toreader

Any ideas? I'm completly lost


[8/23/2023 11:44 PM] szybet
```/mnt/HDD/Project/inkbox-build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: /mnt/HDD/Project/inkbox-build/inkbox/inkbox-toreader/libs/Libretranslate-rs-to-cpp/lib//libLibretranslate_rs_to_cpp.a(Libretranslate_rs_to_cpp-da46da90a85dac4d.Libretranslate_rs_to_cpp.a677ed00b91c84d4-cgu.0.rcgu.o): in function `rust_eh_personality':
/rustc/03a119b0b0e310d22d94399b24ed030056050f13/library/std/src/sys/personality/gcc.rs:99: multiple definition of `rust_eh_personality'; /mnt/HDD/Project/inkbox-build/inkbox/inkbox-toreader/libs/libreader-rs/lib//libreader_rs.a(reader_rs-08f466727572406f.reader_rs.16ecb517c7176846-cgu.0.rcgu.o):/rustc/03a119b0b0e310d22d94399b24ed030056050f13/library/std/src/sys/personality/gcc.rs:99: first defined here
/mnt/HDD/Project/inkbox-build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: /mnt/HDD/Project/inkbox-build/inkbox/inkbox-toreader/libs/Libretranslate-rs-to-cpp/lib//libLibretranslate_rs_to_cpp.a(Libretranslate_rs_to_cpp-da46da90a85dac4d.Libretranslate_rs_to_cpp.a677ed00b91c84d4-cgu.0.rcgu.o): undefined reference to symbol 'clock_gettime@@GLIBC_2.4'
/mnt/HDD/Project/inkbox-build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/bin/../lib/gcc/arm-kobo-linux-gnueabihf/11.2.0/../../../../arm-kobo-linux-gnueabihf/bin/ld.bfd: /home/build/inkbox/compiled-binaries/arm-kobo-linux-gnueabihf/arm-kobo-linux-gnueabihf/sysroot//lib/librt.so.1: error adding symbols: DSO missing from command line
collect2: error: ld returned 1 exit status```


[8/24/2023 12:55 AM] kuratius
https://github.com/rust-cross/cargo-zigbuild
Is this likely to be useful?

{Embed}
https://github.com/rust-cross/cargo-zigbuild
GitHub - rust-cross/cargo-zigbuild: Compile Cargo project with zig ...
Compile Cargo project with zig as linker. Contribute to rust-cross/cargo-zigbuild development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/cargo-zigbuild-7544E


[8/24/2023 12:56 AM] kuratius
Your problem is just cross comp, it compiles for native tsrgets right?


[8/24/2023 7:08 AM] szybet
Propably not, no


[8/24/2023 8:36 AM] szybet
yes?


[8/24/2023 8:37 AM] szybet
maybe? looks too much like magic


[8/24/2023 9:04 AM] szybet
tried, impressive that it compiled for musl but no change and slower


[8/24/2023 9:04 AM] szybet
maybe if i could select a sysroot?


[8/24/2023 10:08 AM] szybet
vendored ssl is the problem


[8/24/2023 10:09 AM] szybet
i need to provide it a local build


[8/24/2023 10:09 AM] szybet
@Kuratius how does zig compile it? it doesnt use containers right?


[8/24/2023 10:30 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-A3A9C.txt


[8/24/2023 10:41 AM] szybet
welp


[8/24/2023 10:41 AM] szybet
https://stackoverflow.com/questions/76967572/undefined-reference-to-sigsetjmp-in-rust-static-library-musl-build-with-openss


[8/24/2023 11:38 AM] kuratius
Iirc zig executable contains source code for libc + other compatibility hacks like defaulting to static linking. It also uses LTO for everything by default. I think there are also some extra tricks it uses to compile for mingw and mac, but I don't know them well.

Why's your target triple unknown?

Nothing is containerized, no.


[8/24/2023 11:38 AM] szybet
okay, sounds cool


[8/24/2023 11:39 AM] szybet
this doesnt explain my error


[8/24/2023 11:39 AM] szybet
this one


[8/24/2023 11:39 AM] szybet
i dont understand the question


[8/24/2023 11:40 AM] kuratius
Isn't  a target triple arch-os-libc-float support?

Like arm-linux-musleabihf?


[8/24/2023 11:40 AM] kuratius
Maybe it's a rust thing


[8/24/2023 11:40 AM] szybet
what are you talking about


[8/24/2023 11:41 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20230824-114121_Firefox-02DA2.png


[8/24/2023 11:42 AM] kuratius
Apparently rust specifies PC or not


[8/24/2023 11:42 AM] kuratius
Weird


[8/24/2023 11:42 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-A5FD6.txt


[8/24/2023 11:42 AM] szybet
¯\_(ツ)_/¯


[8/24/2023 11:48 AM] szybet
from where does zig get the compiler? toolchain?...


[8/24/2023 11:48 AM] kuratius
llvm glued in


[8/24/2023 11:48 AM] szybet
cool


[8/24/2023 11:49 AM] kuratius
Iirc you can swap to alternate backends, but they dont always work


[8/24/2023 11:49 AM] kuratius
Like there is  a backend that compiles stuff to C code


[8/24/2023 11:51 AM] kuratius
And there is work on backends that compile zig code without llvm, but they're all various degrees of broken except for x86-64


[8/24/2023 12:04 PM] szybet
https://github.com/openssl/openssl/blob/f430713c8c5e579b513ffa16133b8c178978c5b6/crypto/armcap.c#L240

{Embed}
https://github.com/openssl/openssl/blob/f430713c8c5e579b513ffa16133b8c178978c5b6/crypto/armcap.c
openssl/crypto/armcap.c at f430713c8c5e579b513ffa16133b8c178978c5b6...
TLS/SSL and crypto library. Contribute to openssl/openssl development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/openssl-6A12F


[8/24/2023 12:04 PM] szybet
uh nu


[8/24/2023 12:14 PM] kuratius
https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/

{Embed}
https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/
Zig Makes Rust Cross-compilation Just Work · Um, actually...


[8/24/2023 12:15 PM] szybet
rust compilation just works without zig*


[8/24/2023 12:15 PM] szybet
my problem is cpp glibc


[8/24/2023 12:16 PM] kuratius
Does this compile with zigbuild? Your response seemedlike it does


[8/24/2023 12:16 PM] szybet
it does


[8/24/2023 12:16 PM] szybet
it does albo build with cross, the issue is the same


[8/24/2023 12:17 PM] szybet
i can with zigbuild use local openssl libs easier than with cross so thats cool


[8/24/2023 12:17 PM] kuratius
This article says rust needs a target compatible linker specified in the toml


[8/24/2023 12:18 PM] szybet
thats why i use cross


[8/24/2023 12:19 PM] kuratius
Then is the problem an old glibc?


[8/24/2023 12:19 PM] szybet
not really, idk how but glibc searches for function that musl exposed to him


[8/24/2023 12:20 PM] szybet
musl should handle it, not glibc...


[8/24/2023 12:20 PM] szybet
and glibc complains because its too old ;p


[8/24/2023 12:21 PM] szybet
tldr musl is never than glibc


[8/24/2023 12:21 PM] szybet
i would need to downgrade musl


[8/24/2023 12:21 PM] szybet
and openssl with it


[8/24/2023 12:21 PM] szybet
but its too much work for me


[8/24/2023 12:49 PM] szybet
its not worth it


[8/24/2023 12:49 PM] szybet
all things just went to fuck themselves


[8/24/2023 12:49 PM] szybet
i will just call a rust binary


[8/24/2023 8:09 PM] szybet
why don't you mount bind ssl to gui rootfs too?...


[8/24/2023 8:09 PM] szybet
choose a place to add this line


[8/24/2023 8:09 PM] szybet
inkbox_gui i think


[8/24/2023 9:09 PM] tux_linux
I don't do it?


[8/24/2023 9:09 PM] tux_linux
Well, ok


[8/24/2023 11:48 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230824_234743-BDDB4.jpg
/mnt/data/projects/git/conversations/media/IMG_20230824_234540-BD880.jpg


[8/24/2023 11:48 PM] szybet
I got scammed, it should be a tolino 2


[8/24/2023 11:48 PM] szybet
Anyway, which inkbox image do i flash on it🥴


[8/25/2023 1:18 AM] tux_linux
What soc


[8/25/2023 8:36 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-4B55B.png


[8/25/2023 8:37 AM] szybet
https://github.com/LinusCDE/doomgeneric-rs


[8/25/2023 8:37 AM] szybet
nice


[8/25/2023 8:42 AM] szybet
will check later


[8/25/2023 8:42 AM] szybet
but i dont think we should only look at sock?...


[8/25/2023 2:02 PM] kuratius
https://allesebook.de/software/kobo-shine-tolino-shine-software-am-kobo-glo-973746/
this seems to imply glo?

{Embed}
https://allesebook.de/software/kobo-shine-tolino-shine-software-am-kobo-glo-973746/
Kobo Shine: Tolino Shine Software am Kobo Glo - ALLESebook.de
Einen neu gekauften kann man aktuell nicht mehr rooten (ohne das Gerät zu öffnen), das heißt aber nicht, dass der für die Modding-Community nicht doch noch nützlich ist. Wie der Nutzer „SyreKron“ im englischen Mobileread-Forum herausgefunden hat, kann man die des Tolino Shine nämlich einfach auf einen eReader spielen – und alles funktioniert. Di...
/mnt/data/projects/git/conversations/media/kobo-glo-android-1C35F.jpg


[8/25/2023 2:03 PM] kuratius
meant to reply to this


[8/25/2023 2:03 PM] szybet
will check internals


[8/25/2023 2:52 PM] tux_linux
SoC


[8/25/2023 2:52 PM] tux_linux
it is probably a glo original iirc


[8/25/2023 2:52 PM] szybet
system on chip i know


[8/25/2023 2:52 PM] tux_linux
so n613 image


[8/25/2023 2:52 PM] tux_linux
probably


[8/25/2023 2:53 PM] szybet
the external sd card is awesome


[8/25/2023 2:53 PM] szybet
it is possible to boot from it, right?


[8/25/2023 2:54 PM] tux_linux
there

{Attachments}
/mnt/data/projects/git/conversations/media/image-662CE.png


[8/25/2023 2:54 PM] tux_linux
probably not inkbox


[8/25/2023 2:54 PM] szybet
whyyyyy


[8/25/2023 2:54 PM] szybet
https://www.mobileread.com/forums/showthread.php?p=3829039

{Embed}
https://www.mobileread.com/forums/showthread.php?p=3829039
NTX hwconfig tutorial, updating values - MobileRead Forums
NTX hwconfig tutorial, updating values Kobo Developer's Corner


[8/25/2023 2:54 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A3DF6.png


[8/25/2023 2:55 PM] tux_linux
on kobo the uboot only changed the `root=/dev/mmcblkXpX`


[8/25/2023 2:55 PM] tux_linux
kernel arg


[8/25/2023 2:55 PM] szybet
?


[8/25/2023 2:55 PM] szybet
so what


[8/25/2023 2:55 PM] tux_linux
so obviously impossible to make inkbox and kobo kernel coexist like this


[8/25/2023 2:55 PM] tux_linux
it only runs one kernel


[8/25/2023 2:55 PM] tux_linux
only changes rootfs part arg


[8/25/2023 2:55 PM] szybet
obviously i dont want it


[8/25/2023 2:56 PM] tux_linux
well then why do you want external sd boot


[8/25/2023 2:56 PM] szybet
to have easy access to inkbox?


[8/25/2023 2:57 PM] tux_linux
well, unless you flash a new uboot, its not possible oob


[8/25/2023 2:57 PM] andi15701
well, external sd: afaik, the imx6 does not have a boot order, just a single device defined (and usb/serial fallback)


[8/25/2023 2:57 PM] szybet
so i need uboot on the internal sd card to boot the external one?


[8/25/2023 2:58 PM] andi15701
i think it will not be much different on a imx5


[8/25/2023 2:58 PM] andi15701
so you need u-boot on the internal sd


[8/25/2023 2:58 PM] tux_linux
well, thats complicated


[8/25/2023 2:58 PM] tux_linux
u-boot can load another u-boot
but i think it's a bit difficult


[8/25/2023 2:59 PM] tux_linux
you would need to at least change the internal u-boot code to point it to inkbox's sd card, load the kernel from there, then run it
the kernel has an embedded cmdline so no need to worry with ntx u-boot quirks


[8/25/2023 2:59 PM] szybet
so the soc is just stupid?


[8/25/2023 3:00 PM] szybet
can i resolder some resistors / anything to make it work?


[8/25/2023 3:00 PM] szybet
it somehow chooses the first boot device


[8/25/2023 3:00 PM] andi15701
if it is resistors and no just pins put to GND


[8/25/2023 3:00 PM] szybet
oh no :(


[8/25/2023 3:01 PM] szybet
@tux-linux which cpu has the glo


[8/25/2023 3:01 PM] szybet
serial number


[8/25/2023 3:01 PM] tux_linux
i.mx507


[8/25/2023 3:01 PM] tux_linux
well idk


[8/25/2023 3:01 PM] tux_linux
if you have 507 written somewhere it should be ok


[8/25/2023 3:01 PM] tux_linux
take a picture of the mainboard


[8/25/2023 3:02 PM] szybet
i dont have it right now


[8/25/2023 3:02 PM] tux_linux
ok


[8/25/2023 3:03 PM] andi15701
the problem here is probably an extremely stripped-down commandline command set of the original u-boot


[8/25/2023 3:03 PM] tux_linux
yes


[8/25/2023 3:03 PM] tux_linux
you basically need to code it in c


[8/25/2023 3:03 PM] szybet
https://www.nxp.com/docs/en/data-sheet/IMX50CEC.pdf


[8/25/2023 3:04 PM] szybet
`Consult the “System Boot” chapter ofthe Reference Manual for more details`


[8/25/2023 3:04 PM] szybet
there is no such chapter


[8/25/2023 3:04 PM] szybet
well this got too hard


[8/25/2023 3:04 PM] szybet
i will just use the internal one...


[8/25/2023 3:21 PM] kuratius
@Szybet inkbox imgtool may be broken? 
I did a git pull to the newest version
++ nproc
+ env GITDIR=/home/build/inkbox/kernel TOOLCHAINDIR=/home/build/inkbox/kernel/toolchain/arm-nickel-linux-gnueabihf THREADS=8 TARGET=arm-nickel-linux-gnueabihf scripts/build_kernel.sh n306 std
You must specify the 'INIT_GCC' and 'INIT_STRIP' variables.
root@3948992f4ff5 /h/b/i/imgtool [1]#


[8/25/2023 3:22 PM] szybet
nicolas broke it


[8/25/2023 3:22 PM] szybet
but he did a good thing


[8/25/2023 3:22 PM] szybet
just revert the kernel repo a few commits


[8/25/2023 3:22 PM] szybet
for now


[8/25/2023 3:23 PM] kuratius
also does the current script redownload the repo even when it already exists?


[8/25/2023 3:23 PM] szybet
nope


[8/25/2023 3:23 PM] andi15701
or recompile original u-boot with some more options enabled


[8/25/2023 4:28 PM] tux_linux
oh yes, i remembered i needed to change that
i didn't do it yet


[8/25/2023 4:50 PM] szybet
so much fucking glue


[8/25/2023 4:50 PM] szybet
whjat the fuck tolino


[8/25/2023 4:57 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230825_165643-F075E.jpg
/mnt/data/projects/git/conversations/media/IMG_20230825_165640-DBDF5.jpg
/mnt/data/projects/git/conversations/media/IMG_20230825_165638-DB9C3.jpg
/mnt/data/projects/git/conversations/media/IMG_20230825_165635-C7500.jpg
/mnt/data/projects/git/conversations/media/IMG_20230825_165633-F6082.jpg


[8/25/2023 4:57 PM] szybet
decide then


[8/25/2023 5:08 PM] tux_linux
yes, imx507


[8/25/2023 5:08 PM] tux_linux
in theory it should work


[8/25/2023 5:08 PM] tux_linux
also i think it looks about the same as my glo's internals


[8/25/2023 5:12 PM] szybet
can you double check?


[8/25/2023 5:12 PM] szybet
i will migrate dts and waveform anyway


[8/25/2023 5:13 PM] tux_linux
there is no dts


[8/25/2023 5:13 PM] szybet
device tree?


[8/25/2023 5:13 PM] tux_linux
nope, not on this model


[8/25/2023 5:13 PM] szybet
what the fuck


[8/25/2023 5:13 PM] szybet
then what is in there


[8/25/2023 5:13 PM] tux_linux
kernel hack


[8/25/2023 5:14 PM] szybet
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619

{Embed}
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619
/mnt/data/projects/git/conversations/media/noooo-no-80F30.png


[8/25/2023 5:14 PM] szybet
everyday


[8/25/2023 5:14 PM] szybet
i learn about another ntx hack and my day is ruined


[8/25/2023 5:14 PM] tux_linux
this is what means 'it uses a heavily-modified kernel'
that's the heavily modified part


[8/25/2023 5:14 PM] tux_linux
yay


[8/25/2023 5:16 PM] szybet
why


[8/25/2023 5:16 PM] szybet
kobo did that?


[8/25/2023 5:16 PM] tux_linux
yes


[8/25/2023 5:16 PM] tux_linux
well, ntx


[8/25/2023 5:17 PM] szybet
😞


[8/25/2023 5:17 PM] tux_linux
in the past device tree was less popular
so most embedded linux companies just manufactured a heavily patched kernel that only supported their hardware and nothing else


[8/25/2023 5:18 PM] szybet
im not sure what is worse ;p


[8/25/2023 5:18 PM] tux_linux
it directly deals with ram with modified code i think
and other things


[8/25/2023 5:18 PM] szybet
what


[8/25/2023 5:21 PM] tux_linux
The kernel code


[8/25/2023 5:21 PM] tux_linux
Ntx mess


[8/25/2023 10:28 PM] szybet
N613 then


[8/27/2023 2:11 PM] szybet
i couldnt find the vaveform on the n613 image and the tolino


[8/27/2023 2:11 PM] szybet
¯\_(ツ)_/¯


[8/27/2023 2:13 PM] szybet
interesting things on the tolino image:
```
/home/arthur/Workspace/E606PP/bootable/bootloader/uboot-imx/cpu/arm_cortexa8
```


[8/27/2023 2:13 PM] szybet
arthur flashed the uboot


[8/27/2023 2:14 PM] szybet
lol


[8/27/2023 2:15 PM] szybet
and what is this


[8/27/2023 2:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-037BB.txt


[8/27/2023 2:32 PM] tux_linux
?


[8/27/2023 2:32 PM] tux_linux
where


[8/27/2023 2:57 PM] szybet
eemc


[8/27/2023 3:19 PM] tux_linux
doesn't have an sd card?


[8/27/2023 3:19 PM] szybet
i meant the flash storage


[8/27/2023 3:19 PM] szybet
simply


[8/27/2023 3:19 PM] szybet
raw bytes


[8/27/2023 3:19 PM] tux_linux
ok


[8/27/2023 3:19 PM] tux_linux
what is around it


[8/27/2023 3:19 PM] tux_linux
binwalk maybe?


[8/27/2023 3:20 PM] szybet
uboot


[8/27/2023 3:20 PM] szybet
arround this one almost nothing


[8/27/2023 4:19 PM] szybet
```
Image Name:   linux-2.6.35.3-inkbox+
Created:      Sun Aug 27 16:18:44 2023
Image Type:   ARM Linux Kernel Image (uncompressed)
Data Size:    7255248 Bytes = 7085.20 KiB = 6.92 MiB
Load Address: 70008000
Entry Point:  70008000
```
has the glo the kernel on a diffrent address?


[8/27/2023 4:20 PM] tux_linux
hm
i think yes


[8/27/2023 4:20 PM] tux_linux
oops


[8/27/2023 4:20 PM] tux_linux
maybe not


[8/27/2023 4:20 PM] tux_linux
it doesn't work?


[8/27/2023 4:25 PM] szybet
idk


[8/27/2023 4:25 PM] szybet
can you check


[8/27/2023 4:25 PM] tux_linux
no


[8/27/2023 4:26 PM] szybet
can you share the glo keys?


[8/27/2023 4:26 PM] tux_linux
touch n905c has 70800000 load sector


[8/27/2023 4:26 PM] tux_linux
same soc


[8/27/2023 4:27 PM] tux_linux
so i guess that address' wrong


[8/27/2023 4:27 PM] tux_linux
why


[8/27/2023 4:27 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-9ABA5.png


[8/27/2023 4:27 PM] tux_linux
from the 1.5 video


[8/27/2023 4:29 PM] szybet
i have now a glo?


[8/27/2023 4:29 PM] szybet
and you should stop being so protective about sharing this project


[8/27/2023 4:29 PM] szybet
is this a open source, community project our your personal one?


[8/27/2023 4:30 PM] tux_linux
plenty of people like the security features of this os
i won't stop


[8/27/2023 4:30 PM] szybet
i mean about the wiki not being on github


[8/27/2023 4:30 PM] tux_linux
what


[8/27/2023 4:31 PM] szybet
you prefer it being on your local slow server


[8/27/2023 4:31 PM] tux_linux
what does this have to do with keys


[8/27/2023 4:31 PM] szybet
we would prefer it on github


[8/27/2023 4:31 PM] szybet
nothing, i just mentioned it next to each other


[8/27/2023 5:24 PM] szybet
@tux-linux @andi The touchscreen in the glo / tolino shine goes through using the bigger flex cable or the smaller one?


[8/27/2023 5:24 PM] szybet
i have a dead zone on my tolino shine


[8/27/2023 5:28 PM] szybet
the communication is I2C, so i dont think i can do anything


[8/27/2023 5:31 PM] szybet
the touchscreen overall reports weird thingd


[8/27/2023 5:32 PM] szybet
working touch
```
Event: time 1335843734.736229, type 3 (EV_ABS), code 1 (ABS_Y), value 465
Event: time 1335843734.736240, type 3 (EV_ABS), code 0 (ABS_X), value 933
Event: time 1335843734.736243, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 100
Event: time 1335843734.736246, type 1 (EV_KEY), code 330 (BTN_TOUCH), value 1
Event: time 1335843734.736249, -------------- SYN_REPORT ------------
Event: time 1335843734.786115, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 101
Event: time 1335843734.786128, -------------- SYN_REPORT ------------
Event: time 1335843734.796092, type 3 (EV_ABS), code 0 (ABS_X), value 932
Event: time 1335843734.796100, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 100
Event: time 1335843734.796104, -------------- SYN_REPORT ------------
Event: time 1335843734.806108, type 3 (EV_ABS), code 1 (ABS_Y), value 467
Event: time 1335843734.806119, type 3 (EV_ABS), code 0 (ABS_X), value 931
Event: time 1335843734.806121, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 101
Event: time 1335843734.806125, -------------- SYN_REPORT ------------
Event: time 1335843734.816083, type 3 (EV_ABS), code 1 (ABS_Y), value 470
Event: time 1335843734.816094, type 3 (EV_ABS), code 0 (ABS_X), value 929
Event: time 1335843734.816096, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 100
Event: time 1335843734.816100, -------------- SYN_REPORT ------------
Event: time 1335843734.825598, type 3 (EV_ABS), code 24 (ABS_PRESSURE), value 0
Event: time 1335843734.825606, type 1 (EV_KEY), code 330 (BTN_TOUCH), value 0
Event: time 1335843734.825608, -------------- SYN_REPORT ------------

```


[8/27/2023 5:51 PM] tux_linux
Smaller i think


[8/27/2023 7:53 PM] szybet
@tux-linux is wifi disabled on the glo?


[8/27/2023 7:53 PM] szybet
its the only button i cant click?


[8/27/2023 7:55 PM] szybet
also, please give me access to the github wiki in main inkbox repo


[8/27/2023 7:55 PM] szybet
i will migrate everything and start writing docs there


[8/27/2023 7:55 PM] szybet
i promise


[8/27/2023 7:56 PM] tux_linux
no


[8/27/2023 7:56 PM] tux_linux
if it was disabled it wouldnt show up


[8/27/2023 7:56 PM] tux_linux
what with the other wiki


[8/27/2023 7:57 PM] szybet
either you write a migration / copy script then nothing really


[8/27/2023 8:01 PM] tux_linux
try to write in it now


[8/27/2023 8:09 PM] szybet
I have access


[8/27/2023 8:09 PM] tux_linux
everyone has


[8/27/2023 8:09 PM] szybet
i have maybe too much of it


[8/27/2023 8:09 PM] szybet
what


[8/27/2023 8:09 PM] szybet
what


[8/27/2023 8:09 PM] szybet
what


[8/27/2023 8:09 PM] tux_linux
i only have two options


[8/27/2023 8:10 PM] tux_linux
restrict to push-enabled users
allow to everyone


[8/27/2023 8:10 PM] szybet
restrict it


[8/27/2023 8:11 PM] szybet
actually not


[8/27/2023 8:11 PM] szybet
its not stupid


[8/27/2023 8:11 PM] szybet
look here


[8/27/2023 8:11 PM] szybet
https://github.com/Kobo-InkBox/inkbox/wiki/Welcome-page/_history

{Embed}
https://github.com/Kobo-InkBox/inkbox/wiki/Welcome-page/_history
History for Welcome page · Kobo-InkBox/inkbox Wiki
An open-source, Qt-based eBook reader for Kobos (and other devices). - History for Welcome page · Kobo-InkBox/inkbox Wiki
/mnt/data/projects/git/conversations/media/inkbox-A29FB


[8/27/2023 8:11 PM] szybet
there is a history


[8/27/2023 8:11 PM] szybet
so leave it as it is


[8/27/2023 8:12 PM] szybet
Idk what your plans are to the project, but consider giving me full access to everything


[8/27/2023 8:13 PM] szybet
my point is you are not so active lately ( 2 months ) at all


[8/27/2023 8:28 PM] szybet
@tux-linux which qt platform plugin does glo use


[8/27/2023 8:29 PM] tux_linux
old one


[8/27/2023 8:33 PM] szybet
why exactly?


[8/27/2023 8:33 PM] szybet
why is it


[8/27/2023 8:34 PM] tux_linux
because it worked before the new one


[8/27/2023 8:34 PM] szybet
you didnt debug anything?


[8/27/2023 8:34 PM] tux_linux
i didn't bother changing it and potentially creating new issues i didn't have time to find


[8/27/2023 8:34 PM] szybet
ok


[8/27/2023 8:34 PM] szybet
i will look into it


[8/27/2023 8:34 PM] tux_linux
i think it will work, maybe i tried it once


[8/27/2023 8:35 PM] tux_linux
as far as i recall refresh was better on the old one, less artifacts


[8/27/2023 8:35 PM] tux_linux
that's part of the reasons i left it like that


[8/27/2023 8:36 PM] szybet
i have touch issues


[8/27/2023 8:36 PM] szybet
but evtest reports it


[8/27/2023 8:37 PM] szybet
i will port it to the never one


[8/27/2023 8:41 PM] tux_linux
what does `/bin/kobo_config.sh` spit out


[8/27/2023 8:41 PM] szybet
daylight?


[8/27/2023 8:41 PM] szybet
on inkbox obviouslt


[8/27/2023 8:41 PM] tux_linux
`/opt/inkbox_device` is `n613`?


[8/27/2023 8:41 PM] szybet
yes, i flashed this image?


[8/27/2023 8:42 PM] tux_linux
ok, then it should be ok


[8/27/2023 8:44 PM] szybet
https://github.com/Rain92/qt5-kobo-platform-plugin/commit/b740474e27b87b306fca82ba80c50d8b44bc4731

{Embed}
https://github.com/Rain92/qt5-kobo-platform-plugin/commit/b740474e27b87b306fca82ba80c50d8b44bc4731
Refactor touchmanager and add experimental touchhandler · Rain92/qt...
/mnt/data/projects/git/conversations/media/b740474e27b87b306fca82ba80c50d8b44bc4731-E2706


[8/27/2023 8:44 PM] szybet
this is an interesting commit


[8/27/2023 10:19 PM] szybet
its just broken, the touch screen


[8/27/2023 10:19 PM] szybet
welp, i would use vnc anyway


[8/27/2023 10:20 PM] szybet (pinned)
also note: Original platform plugin from rain doesnt have ghosting as our fork of it on the newest commit: propably fbink update fixed it


[8/27/2023 10:20 PM] szybet
Pinned a message.


[8/27/2023 10:23 PM] tux_linux
probably won't work on this model


[8/27/2023 10:23 PM] tux_linux
for unknown reasons


[8/27/2023 10:23 PM] tux_linux
nice


[8/27/2023 11:55 PM] szybet
why are you right


[8/27/2023 11:55 PM] szybet
it wont work


[8/27/2023 11:55 PM] szybet
whatever i do


[8/28/2023 12:31 AM] tux_linux
I don't know


[8/28/2023 12:31 AM] tux_linux
It just doesn't


[8/28/2023 12:32 AM] tux_linux
SoC maybe


[8/28/2023 3:01 AM] tux_linux
maybe try 600x800 resolution instead?


[8/28/2023 3:01 AM] tux_linux
dpi will have to be set to 160 but if it works there's that


[8/28/2023 8:00 PM] szybet
@tux-linux have you tried emulating touch?


[8/28/2023 8:09 PM] tux_linux
yes
once
nightmare
didn't work


[8/28/2023 8:10 PM] tux_linux
have you tried this


[8/28/2023 9:04 PM] szybet
nothing


[8/28/2023 9:04 PM] szybet
doesnt work


[8/28/2023 9:04 PM] szybet
i dont even think vnc grabs my input to it


[8/28/2023 9:04 PM] szybet
like arguments


[8/28/2023 9:04 PM] szybet
eg


[8/28/2023 9:04 PM] szybet
```
kobo:/mnt/onboard/.adds/inkbox# LD_LIBRARY_PATH="/mnt/onboard/.adds/qt-linux-5.15.2-kobo/lib:/lib" QT_QPA_PLATFORM="vnc:size=600x800:mode=websocket:addr=0.0.0.0:depth=32:0" QT_DEBUG_PLUGINS=1
 DEBUG=true QT_FONT_DPI=$(cat /kobo/mnt/onboard/.adds/inkbox/.config/09-dpi/config) DEBUG=true /mnt/onboard/.adds/inkbox/2048-bin -display "VNC::size=600x800:mode=websocket:addr=0.0.0.0:depth
=32:0"
```


[8/28/2023 9:29 PM] tux_linux
what is cpu usage


[8/28/2023 9:29 PM] tux_linux
also, can you see if the vnc port is open?


[8/28/2023 9:31 PM] szybet
almost nothing


[8/28/2023 9:31 PM] szybet
i see it, vnc software says its connecting with no further logs


[8/28/2023 9:31 PM] tux_linux
what is dmesg saying


[8/28/2023 9:31 PM] szybet
@tux-linux can you give me access to touch_emulate on github


[8/28/2023 9:31 PM] szybet
i want to push something


[8/28/2023 9:31 PM] szybet
and its not worth an pull request


[8/28/2023 9:32 PM] szybet
nothing


[8/28/2023 9:32 PM] tux_linux
done


[8/28/2023 9:34 PM] szybet
thanks

{Reactions}
👍 

[8/28/2023 9:34 PM] szybet
pushed


[8/28/2023 9:34 PM] szybet
anyway i figured out touch emulating for real


[8/28/2023 9:34 PM] szybet
so i will write a rust gui to show the eink screen on pc


[8/28/2023 9:52 PM] tux_linux
ok


[8/29/2023 12:02 AM] szybet
https://github.com/grantshandy/libretranslate-rs/pull/10

{Embed}
https://github.com/grantshandy/libretranslate-rs/pull/10
add polish by Szybet · Pull Request #10 · grantshandy/libretranslat...
/mnt/data/projects/git/conversations/media/10-4DB65


[8/29/2023 12:02 AM] szybet
🥳


[8/29/2023 11:31 PM] szybet
@tux-linux if any devices have some weird touch hacks and all, now is the time to mention it


[8/30/2023 11:34 AM] tux_linux
They are pretty much all weird


[8/30/2023 11:36 AM] [matrix] Szybet
🫨


[8/30/2023 1:09 PM] tux_linux
NiLuJe is more knowledgeable about it probably


[8/30/2023 5:27 PM] szybet
https://youtu.be/algDLvbl1YY

{Embed}
Logan Smith
https://www.youtube.com/watch?v=algDLvbl1YY
The Dark Side of .reserve()
.reserve(...) is a method you might've seen in the API of your favorite dynamic array (or hash table or whatnot), and it's an excellent tool for making simple, impactful performance optimizations while you are building up data structures. But just like all tools, it has sharp edges. In this video we'll dive into where .reserve() can make your pe...
/mnt/data/projects/git/conversations/media/maxresdefault-D7D71.jpg


[8/30/2023 5:31 PM] szybet
https://github.com/Szybet/inkbox-audio/blob/20c2ac88cc37ddc6e99e21ac87cc7f844d6e2516/src/communication/usocket.cpp#L83-L87

{Embed}
https://github.com/Szybet/inkbox-audio/blob/20c2ac88cc37ddc6e99e21ac87cc7f844d6e2516/src/communication/usocket.cpp
inkbox-audio/src/communication/usocket.cpp at 20c2ac88cc37ddc6e99e2...
Contribute to Szybet/inkbox-audio development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/inkbox-audio-E6A12


[8/30/2023 5:31 PM] szybet
hehe


[9/1/2023 7:58 PM] szybet
https://github.com/Szybet/kobo-screen-mirror

{Embed}
https://github.com/Szybet/kobo-screen-mirror
GitHub - Szybet/kobo-screen-mirror: Mirror your kobo screen to PC, ...
Mirror your kobo screen to PC, on InkBox OS. Contribute to Szybet/kobo-screen-mirror development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-screen-mirror-DBCC9


[9/1/2023 7:58 PM] szybet
done


[9/2/2023 10:27 AM] matterbridge#2154
[matrix] Maximilian Gaedig ⚡️ 
Rust!!!!!!!!!!!!


[9/2/2023 10:27 AM] [matrix] Maximilian Gaedig ⚡
🦀


[9/2/2023 11:09 AM] [matrix] Szybet
🦀🦀🦀


[9/2/2023 1:37 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/unknown-C6300.png


[9/3/2023 6:03 PM] szybet
https://github.com/Szybet/gui-bundle/blob/1dd1465bde2345098d7a4823d0abfd425cb3c655/release.sh#L3

{Embed}
https://github.com/Szybet/gui-bundle/blob/1dd1465bde2345098d7a4823d0abfd425cb3c655/release.sh
gui-bundle/release.sh at 1dd1465bde2345098d7a4823d0abfd425cb3c655 ·...
InkBox GUI bundle contents and generation script. Contribute to Szybet/gui-bundle development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/gui-bundle-51239


[9/3/2023 6:03 PM] szybet
what is this weird nblock sie


[9/3/2023 6:34 PM] tux_linux
1 megabyte


[9/7/2023 7:39 PM] szybet
why is on most recent rootfs sanki reporting im a kobo touch c


[9/7/2023 7:41 PM] tux_linux
Check rootfs cache


[9/7/2023 7:41 PM] tux_linux
Maybe


[9/7/2023 7:44 PM] szybet
nope


[9/7/2023 7:44 PM] szybet
found it


[9/7/2023 7:44 PM] szybet
/bin/kobo_config.sh doesnt excist in gui apps


[9/7/2023 7:44 PM] szybet
and my lib for identyfying it doesnt like it


[9/7/2023 7:58 PM] tux_linux
Hmm ok


[9/7/2023 8:43 PM] szybet
i can set brightnes via echo in user app sysroot, sanki can set it via qt code via in gui rootfs but cant in user apps


[9/7/2023 8:44 PM] szybet
i will make a work arround, but propably something with permissions...


[9/7/2023 8:56 PM] tux_linux
Just write to the sys node with qt?


[9/7/2023 9:08 PM] szybet
doesnt work


[9/7/2023 9:43 PM] szybet
shit, i cant even make it work with echo inside qt


[9/7/2023 9:50 PM] tux_linux
Investigate the problem


[9/7/2023 9:51 PM] tux_linux
sh+echo?


[9/7/2023 10:42 PM] szybet
nothing works


[9/7/2023 10:42 PM] szybet
https://tenor.com/view/f-is-for-fuck-spongebob-f-is-for-fuck-gif-18893949

{Embed}
https://tenor.com/view/f-is-for-fuck-spongebob-f-is-for-fuck-gif-18893949
/mnt/data/projects/git/conversations/media/f-is-for-fuck-spongebob-7061E.png


[9/7/2023 10:42 PM] tux_linux
so what does that mean


[9/7/2023 10:44 PM] szybet
nothing fucking works


[9/7/2023 10:44 PM] szybet
the library doesnt even update, the code isint runned most of the time


[9/7/2023 10:44 PM] szybet
no fucking idea why


[9/7/2023 11:01 PM] szybet
You could try it


[9/7/2023 11:01 PM] szybet
I wont, i give up on this stupid thing


[9/7/2023 11:06 PM] tux_linux
did you try strace


[9/7/2023 11:07 PM] szybet
No


[9/8/2023 12:22 AM] tux_linux
well


[9/8/2023 1:07 AM] tux_linux
implementing semi-working algebraic euclidean divisions in cpp
that was fun
https://github.com/tux-linux/omnimath/commit/e427e91c6158c07591a386a9fc02657dd02d9b4f

{Attachments}
/mnt/data/projects/git/conversations/media/image-E0D97.png


[9/8/2023 2:39 AM] kuratius
You mean polynomial division?


[9/8/2023 2:39 AM] tux_linux
well, yes


[9/8/2023 2:40 AM] tux_linux
it half-works
i tried some examples, some did, some others did not


[9/8/2023 2:40 AM] tux_linux
but anyway


[9/8/2023 2:40 AM] tux_linux
it helps me study for exams


[9/8/2023 2:41 AM] kuratius
https://www.geeksforgeeks.org/python-sympy-div-method/

{Embed}
https://www.geeksforgeeks.org/python-sympy-div-method/
Python | sympy.div() method - GeeksforGeeks
A Computer Science portal for geeks. It contains well written, well thought and well explained computer science and programming articles, quizzes and practice/competitive programming/company interview Questions.


[9/8/2023 2:41 AM] tux_linux
if i go through all the pain of making it (and the actual division isn't hard to do in real-life, but the actual operations leading to it will be, probably) understandable by a computer, i've probably understood it enough myself


[9/8/2023 2:41 AM] tux_linux
well, nice
but the point was to make it myself


[9/8/2023 2:41 AM] kuratius
That's a good way of thinking

{Reactions}
👍 

[9/8/2023 2:41 AM] tux_linux
so i don't mind reinventing the wheel


[9/8/2023 2:43 AM] tux_linux
https://www.youtube.com/watch?v=kcwGBkjeNk4
last june I programmed it to guess functions from points

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=kcwGBkjeNk4
« omnimath » (démo)
Programme conçu pour définir des fonctions à partir de points dans un graphique. Démo.
Il n'est pour autant pas toujours fiable...

https://github.com/tux-linux/omnimath
/mnt/data/projects/git/conversations/media/maxresdefault-99832.jpg


[9/8/2023 2:43 AM] tux_linux
*that* was hard


[9/8/2023 2:45 AM] kuratius
Piecewise functions or curve fitting?


[9/8/2023 2:45 AM] tux_linux
not any one of these


[9/8/2023 2:45 AM] tux_linux
just simple functions


[9/8/2023 2:46 AM] tux_linux
well, I mean, not piecewise


[9/8/2023 2:47 AM] tux_linux
for example, the absolute value function, which in the way we learnt it back then was a 'V'-shaped function, I needed to teach cpp to do easy human thinking but it's actually not easy at all to get a computer to do it


[9/8/2023 2:47 AM] tux_linux
just for example to determine what point belonged to what side of the V
https://github.com/tux-linux/omnimath/blob/e427e91c6158c07591a386a9fc02657dd02d9b4f/omnimath.cpp#L269-L298

{Embed}
https://github.com/tux-linux/omnimath/blob/e427e91c6158c07591a386a9fc02657dd02d9b4f/omnimath.cpp
omnimath/omnimath.cpp at e427e91c6158c07591a386a9fc02657dd02d9b4f ·...
Contribute to tux-linux/omnimath development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/omnimath-BC5E2


[9/8/2023 2:47 AM] kuratius
I think scipi has curve_fit, but it's NOT guaranteed to converge


[9/8/2023 2:48 AM] tux_linux
well, the curve functions I programmed were logarithmic and exponential ones


[9/8/2023 2:48 AM] tux_linux
there was no curve-fitting


[9/8/2023 2:48 AM] tux_linux
we are not there yet


[9/8/2023 2:50 AM] kuratius
One important distinction: Curve fitting can be used when you can't solve for variables directly.

Two options : linear regression and gradient descent.

Linear regression works for polynomials, gradient descent for anything differentiable


[9/8/2023 2:51 AM] kuratius
You probably already know neural networks, it's basically the same but less complicated


[9/8/2023 2:51 AM] tux_linux
I've never really learnt in-depth about any of those two, maybe linear regression in statistics but it was hand-drawn and a bit janky, otherwise, I'm still a 'beginner' so to speak


[9/8/2023 2:51 AM] tux_linux
Yes, I think


[9/8/2023 2:53 AM] kuratius
Error function is a known term to you yes/no?


[9/8/2023 2:53 AM] tux_linux
No


[9/8/2023 2:55 AM] tux_linux
http://www.education.gouv.qc.ca/fileadmin/site_web/documents/education/jeunes/pfeq/PFEQ_mathematique-deuxieme-cycle-secondaire_EN.pdf


[9/8/2023 2:55 AM] kuratius
Ok I don't mean erf(x), I mean the literal squared error of fit vs should,

Sum (y_i-f(x_i, a,b,c)^2


[9/8/2023 2:55 AM] tux_linux
look at p. 136 and onwards


[9/8/2023 2:55 AM] tux_linux
to the sec v column
that was me last year


[9/8/2023 2:56 AM] kuratius
This sum is what you minimize for curve fitting

{Reactions}
👍 

[9/8/2023 2:56 AM] tux_linux
well, "S", then "V" under it


[9/8/2023 2:57 AM] kuratius
e.g. to fit a linear function you minimize

Sum (y_i-a*x_i+b)^2


[9/8/2023 2:57 AM] kuratius
Can do gradient descent or calculus


[9/8/2023 2:57 AM] kuratius
Calculus leads to linear regression


[9/8/2023 2:57 AM] tux_linux
Ok
Maybe I understand
Someday I will know


[9/8/2023 2:58 AM] tux_linux
Then I will know


[9/8/2023 2:59 AM] kuratius
Do you know the derivative of x^2?


[9/8/2023 2:59 AM] kuratius
If you do you can already solve this if I give a hint


[9/8/2023 2:59 AM] tux_linux
I self-learnt it three weeks ago
It's 2x
But I will need to remember why


[9/8/2023 3:00 AM] kuratius
Chain rule known?


[9/8/2023 3:00 AM] kuratius
If not I can tell you


[9/8/2023 3:01 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image0-073DC.png


[9/8/2023 3:01 AM] tux_linux
I had followed a video series


[9/8/2023 3:01 AM] tux_linux
took notes


[9/8/2023 3:03 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image0-5944D.png


[9/8/2023 3:03 AM] tux_linux
these were my notes on the chain rule
i don't understand them now
i wrote them three weeks ago
yay


[9/8/2023 3:04 AM] kuratius
Alright, so if you have a function of multiple variables, the minimum will have the property that all derivatives are 0.

So df(a,b,c)/da=0, df/db=0 etc


[9/8/2023 3:05 AM] tux_linux
I did not get into multiple-variable functions yet
I think we have a somewhat retarded school system here
We learn things much later than a lot of other people


[9/8/2023 3:06 AM] kuratius
So you set f=your error function and calculate these derivatives, and then you notice it gives you a set of equations that allow you to get the parameters a nd b of the function you wanted to fit to your data


[9/8/2023 3:06 AM] kuratius
And bam you have done linear regression

{Reactions}
👍 

[9/8/2023 3:08 AM] kuratius
What's the derivative of f(x)=(sin(x))^2 arccording to the chain rule? 
You can use d/dx x^2 =2x and d/dx sin(x)=cos(x)


[9/8/2023 3:10 AM] kuratius
All the complex matrix stuff you see on Wikipedia is exactly the same just harder to follow


[9/8/2023 3:11 AM] kuratius
With gradient descent you wiggle a and b and check which direction is down, kind of like newton's method


[9/8/2023 3:13 AM] tux_linux
it's too far in memory


[9/8/2023 3:14 AM] kuratius
d /df f^2=2f


[9/8/2023 3:15 AM] tux_linux
yes


[9/8/2023 3:16 AM] kuratius
d/dx f(x) ^2= d/df (f(x)^2) df/dx


[9/8/2023 3:16 AM] kuratius
=2f(x) df/dx


[9/8/2023 3:23 AM] tux_linux
how does dx become df


[9/8/2023 3:25 AM] kuratius
d/dx f = df/dx= df/df df/dx


[9/8/2023 3:26 AM] kuratius
Sorry maybe this doesn't help if you dont know the chain rule, but can you see that this is true?


[9/8/2023 3:26 AM] kuratius
df/df=1


[9/8/2023 3:28 AM] kuratius
chain rule says: d/dx g(f(x))= dg(f )/df * df/dx


[9/8/2023 3:29 AM] kuratius
g(f)=f , then the trivial example I wrote down follows


[9/8/2023 3:32 AM] kuratius
Had a typo here


[9/8/2023 3:36 AM] kuratius
Just watch an example video for the chainrule and you'll see better

{Reactions}
👍 

[9/8/2023 9:05 PM] szybet
between reboots, feathernotes file formatting ( special characters ) go fuck themselves and garbage is born


[9/8/2023 9:06 PM] szybet
how do i even debug this...


[9/8/2023 9:08 PM] tux_linux
i probably once told you that an evil entity is hiding in inkbox os code?


[9/8/2023 9:09 PM] szybet
not funny


[9/8/2023 9:09 PM] tux_linux
well, this really seems it's doing nonsense stuff
so, i have no explanation


[9/8/2023 9:10 PM] tux_linux
maybe fat32 doesn't like them
it would still make no sense


[9/8/2023 9:29 PM] szybet
it fixes in half when i launch it from shell


[9/8/2023 9:29 PM] szybet
in gui app


[9/8/2023 9:29 PM] szybet
https://tenor.com/view/unibrow-burt-and-ernie-judgmental-contempt-angry-gif-3470859

{Embed}
https://tenor.com/view/unibrow-burt-and-ernie-judgmental-contempt-angry-gif-3470859
Mother of god...
/mnt/data/projects/git/conversations/media/unibrow-burt-and-ernie-6BFC7.png


[9/8/2023 9:30 PM] tux_linux
🤣


[9/8/2023 9:31 PM] tux_linux
I have experienced things like this ***so*** many times


[9/8/2023 9:31 PM] tux_linux
Never found out why it worked in shell and not in real life


[9/8/2023 9:32 PM] tux_linux
did you implement your special chars fix from inkbox in feathernotes?


[9/8/2023 9:32 PM] tux_linux
https://github.com/Kobo-InkBox/inkbox/blob/02543229fe85ecdafa9c2440311532a477cc1ac3/src/main.cpp#L38
this probably


[9/8/2023 9:36 PM] szybet
yes its there...


[9/8/2023 9:37 PM] tux_linux
then, idk


[9/8/2023 9:37 PM] tux_linux
maybe it's missing locales in gui apps chroot


[9/8/2023 9:38 PM] szybet
i can input them


[9/8/2023 9:38 PM] tux_linux
try it


[9/8/2023 9:38 PM] szybet
?


[9/8/2023 9:38 PM] tux_linux
oh


[9/8/2023 9:38 PM] tux_linux
input them where


[9/8/2023 9:39 PM] szybet
literally next to the garbage it loaded


[9/8/2023 9:39 PM] szybet
and it inputs them correctly


[9/8/2023 9:40 PM] tux_linux
file corruption?
does the file look good


[9/8/2023 9:45 PM] szybet
no file corruption, imagine god just deciding only special characters go fuck themselves


[9/8/2023 9:46 PM] szybet
it doesnt if after wrong loading of the characters it saves them again


[9/8/2023 9:46 PM] szybet
then its just garbage everywhere


[9/8/2023 10:20 PM] szybet
LC_ALL does the tirck


[9/8/2023 10:51 PM] tux_linux
Good


[9/9/2023 1:27 PM] szybet
W̸e̴ ̴a̵r̵e̵ ̸t̴h̸e̷ ̸d̷e̶v̴i̷l̶,̵ ̷w̸e̸ just co̸d̶e̶d̴ ̵o̴u̶r̴ ̷s̷o̴u̷l̴s̸ ̷i̴n̴to a m̸a̵chi̸ne̵


[9/9/2023 8:55 PM] szybet
Started a thread.


[9/10/2023 1:46 PM] szybet
@tux-linux any ideas


[9/10/2023 1:46 PM] szybet
`os_defines.h:39:10: fatal error: features.h: No such file or directory`


[9/10/2023 1:47 PM] tux_linux
no


[9/16/2023 3:42 AM] tux_linux
I don't get how this guy has time for keeping on doing these things for almost a year
respect

{Attachments}
/mnt/data/projects/git/conversations/media/image-18249.png


[9/21/2023 4:22 PM] szybet
@tux-linux bot died?


[9/21/2023 4:22 PM] szybet
matrix bridge


[9/21/2023 4:22 PM] szybet
yep


[9/21/2023 4:50 PM] tux_linux
I will check


[9/23/2023 1:16 PM] szybet
accept the pull request


[9/23/2023 1:16 PM] szybet
repair the boty


[9/23/2023 3:01 PM] [matrix] Szybet
it's back


[9/23/2023 3:05 PM] [matrix] joe
we're so back


[9/23/2023 4:21 PM] szybet
```
 * Stopping InkBox GUI ...
 * Call to flock failed: Resource temporarily unavailable
 * WARNING: gui_apps is already stopping
```
```
kobo:~# service inkbox_gui restart
 * Stopping InkBox GUI ...
 * WARNING: gui_apps is already stopped                                                  [ !! ]
 * ERROR: inkbox_gui failed to stop
```


[9/23/2023 4:21 PM] szybet
any ideas


[9/23/2023 4:21 PM] szybet
happens sometimes when i develop user apps


[9/23/2023 4:50 PM] szybet
just openrc being dump `rc-service inkbox_gui zap`


[9/26/2023 9:11 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230926_211112-4DF47.jpg
/mnt/data/projects/git/conversations/media/IMG_20230926_211059-47F4E.jpg
/mnt/data/projects/git/conversations/media/IMG_20230926_211119-A62D2.jpg
/mnt/data/projects/git/conversations/media/IMG_20230926_210831-5BF4F.jpg
/mnt/data/projects/git/conversations/media/IMG_20230926_210839-E901D.jpg


[9/26/2023 9:11 PM] szybet
im stupid haha


[9/26/2023 9:12 PM] szybet
rss guard has a litteral browser tab


[9/26/2023 9:12 PM] tux_linux
Qt assistant?


[9/26/2023 9:12 PM] szybet
it is what it is on pictures, but hey, native


[9/26/2023 9:12 PM] tux_linux
Looks a lot like it


[9/26/2023 9:12 PM] szybet
its qtextedit


[9/26/2023 9:12 PM] tux_linux
Hmm


[9/26/2023 9:12 PM] szybet
it sometimes freezes forever


[9/26/2023 9:13 PM] tux_linux
Not surprising


[9/26/2023 10:40 PM] db.qp.db
lol


[9/26/2023 10:40 PM] db.qp.db
I'm confused by the in depth forum postings from them, it seems like having a site or other methods might be better to collect that info, but it's cool to watch their progress


[9/26/2023 10:41 PM] szybet
yea the forum is awfull


[9/26/2023 10:41 PM] szybet
on the other hand its better than discord - and nicolas refuses to implement google search for this server


[9/26/2023 11:24 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20230926_232332-40646.jpg


[9/26/2023 11:24 PM] szybet
wake up nicolas, new nightmare just dropped


[9/26/2023 11:29 PM] tux_linux
Another user app side effect


[9/26/2023 11:31 PM] szybet
what do you mean


[9/26/2023 11:31 PM] szybet
happened randomly between reboots, now it works


[9/26/2023 11:31 PM] tux_linux
I don't care


[9/26/2023 11:32 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20230926_213135901-A16D6.jpg
/mnt/data/projects/git/conversations/media/PXL_20230926_213144980-B125B.jpg
/mnt/data/projects/git/conversations/media/PXL_20230926_213150199-5C763.jpg


[9/26/2023 11:32 PM] szybet
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619

{Embed}
https://tenor.com/view/noooo-no-no-emote-emote-nooo-emote-gif-23071619
/mnt/data/projects/git/conversations/media/noooo-no-80F30.png


[10/10/2023 11:42 PM] szybet
```
kobo:~# ls /data/onboard/.apps/koreader/koreader/sys/
kobo:~# ls /data/onboard/.apps/feathernotes/feathernotes/sys
bus      class    dev      devices  kernel
kobo:~# 

```
koreader decided to commit suicide


[10/10/2023 11:42 PM] szybet
and i fully support this decission and decide to not change it.


[10/10/2023 11:57 PM] tux_linux
ok


[10/15/2023 3:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-47F36.png


[10/15/2023 7:04 PM] szybet
UI eink improvements?
QApplication::setEffectEnabled
QGraphicsProxyWidget

dark mode, native?
QWidget::setGraphicsEffect(QGraphicsEffect *effect)


[10/15/2023 7:04 PM] szybet
qt docs are a rabbit hole


[10/15/2023 7:17 PM] [matrix] tux-linux
you found a dark mode?


[10/15/2023 7:41 PM] szybet
just looking arround, propably not


[10/15/2023 7:42 PM] szybet
Fuck it, inkbox window manager:


[10/15/2023 7:42 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/VID_20231015_193044-4A362.mp4


[10/15/2023 7:43 PM] szybet
idk how I achieved it lol but its possible at least


[10/15/2023 7:51 PM] [matrix] tux-linux
oh please no


[10/15/2023 7:52 PM] szybet
it's possible


[10/15/2023 7:52 PM] szybet
not like i want


[10/15/2023 7:52 PM] [matrix] tux-linux
yes


[10/15/2023 11:17 PM] [matrix] Szybet
QWidget::updatesEnabled

nice


[10/16/2023 1:57 PM] szybet
this is awesome


[10/16/2023 3:11 PM] tux_linux
what does it do


[10/16/2023 3:15 PM] [matrix] Szybet
disables refreshing of this widget


[10/16/2023 3:15 PM] tux_linux
ok


[10/16/2023 3:15 PM] tux_linux
video?


[10/16/2023 3:16 PM] [matrix] Szybet
so i disable it and enable when it "loaded" - i had problem with text browser when it showed the first word for half a second, not it doesnt
its ideal for inkbox keyboard, for example


[10/16/2023 3:16 PM] matterbridge#2154
[matrix] Szybet 
no chance i will be able to catch that


[10/16/2023 3:17 PM] tux_linux
Well, ok


[10/16/2023 3:17 PM] tux_linux
even keyboard?


[10/16/2023 3:23 PM] [matrix] Szybet
i dont have that much time to implement it there


[10/30/2023 11:45 AM] szybet
```
ERROR: "gSleep_Mode_Suspend" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!
ERROR: "gIsCustomerUi" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!
ERROR: "gptHWCFG" [drivers/input/touchscreen/elan_touch_i2c.ko] undefined!
```


[10/30/2023 11:45 AM] szybet
trying to compile as module


[10/30/2023 11:50 AM] szybet
I can quess all the values but these dont.

{Attachments}
/mnt/data/projects/git/conversations/media/image-B0B32.png


[10/30/2023 10:27 PM] szybet
elan touch as module after succesfull loading and working, unloading it:
```
[  272.918716] ------------[ cut here ]------------
[  272.918753] WARNING: CPU: 0 PID: 1738 at kernel/irq/manage.c:1346 __free_irq+0xa4/0x1ec()
[  272.918762] Trying to free already-free IRQ 32
[  272.918771] Modules linked in: elan_touch_i2c(-) g_ether usb_f_rndis usb_f_ecm_subset usb_f_eem usb_f_ecm u_ether libcomposite configfs
[  272.918822] CPU: 0 PID: 1738 Comm: rmmod Not tainted 4.1.15-inkbox-n306a #1
[  272.918831] Hardware name: Freescale i.MX6 Ultralite (Device Tree)
[  272.918866] [<80016240>] (unwind_backtrace) from [<800126e8>] (show_stack+0x10/0x14)
[  272.918887] [<800126e8>] (show_stack) from [<80532940>] (dump_stack+0x84/0xc4)
[  272.918906] [<80532940>] (dump_stack) from [<8003956c>] (warn_slowpath_common+0x80/0xb0)
[  272.918924] [<8003956c>] (warn_slowpath_common) from [<800395cc>] (warn_slowpath_fmt+0x30/0x40)
[  272.918943] [<800395cc>] (warn_slowpath_fmt) from [<80071b5c>] (__free_irq+0xa4/0x1ec)
[  272.918960] [<80071b5c>] (__free_irq) from [<80071d38>] (free_irq+0x4c/0xa4)
[  272.918989] [<80071d38>] (free_irq) from [<7f044a40>] (elan_touch_remove+0x60/0x6c [elan_touch_i2c])
[  272.919024] [<7f044a40>] (elan_touch_remove [elan_touch_i2c]) from [<8036ffd0>] (i2c_device_remove+0x50/0x78)
[  272.919046] [<8036ffd0>] (i2c_device_remove) from [<802d181c>] (__device_release_driver+0x70/0xe4)
[  272.919064] [<802d181c>] (__device_release_driver) from [<802d1fac>] (driver_detach+0xac/0xb0)
[  272.919081] [<802d1fac>] (driver_detach) from [<802d157c>] (bus_remove_driver+0x4c/0xa0)
[  272.919100] [<802d157c>] (bus_remove_driver) from [<80096114>] (SyS_delete_module+0x160/0x1dc)
[  272.919120] [<80096114>] (SyS_delete_module) from [<8000f440>] (ret_fast_syscall+0x0/0x3c)
[  272.919131] ---[ end trace 37be703dabaee751 ]---
```


[10/30/2023 10:27 PM] szybet
the system still works


[10/30/2023 10:28 PM] szybet
loading once more:

{Attachments}
/mnt/data/projects/git/conversations/media/message-4C870.txt


[10/30/2023 10:58 PM] szybet
doesnt work at all...


[10/30/2023 10:58 PM] szybet
second loading results in this

{Attachments}
/mnt/data/projects/git/conversations/media/message-7E080.txt


[10/30/2023 11:00 PM] szybet
here is the driver


[10/30/2023 11:00 PM] szybet
https://github.com/Kobo-InkBox/kernel/blob/master/kernel/linux-4.1.15-n306/drivers/input/touchscreen/elan_touch_i2c.c

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/kernel/linux-4.1.15-n306/drivers/input/touchscreen/elan_touch_i2c.c
kernel/kernel/linux-4.1.15-n306/drivers/input/touchscreen/elan_touc...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-5A1D7


[10/30/2023 11:01 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-0FBCF.txt


[10/30/2023 11:01 PM] szybet
here is the module modified version with static values because of missing externs


[10/30/2023 11:01 PM] szybet
@andi any ideas


[10/30/2023 11:02 PM] szybet
i tryied to reset it in init but nothing worked


[10/31/2023 8:08 PM] andi15701
well, first the irq problem: free_irq must be called with the same last argument as request_irq


[10/31/2023 8:08 PM] andi15701
or better use devm_request_irq instead


[10/31/2023 8:08 PM] andi15701
then no cleanup is needed


[10/31/2023 8:09 PM] andi15701
you have often devm_-variants of kernel functions


[10/31/2023 8:09 PM] szybet
solved it and implemented it almost


[10/31/2023 8:10 PM] szybet
https://tenor.com/view/thumbs-up-double-thumbs-up-like-agreed-yup-gif-11663223

{Embed}
https://tenor.com/view/thumbs-up-double-thumbs-up-like-agreed-yup-gif-11663223
/mnt/data/projects/git/conversations/media/thumbs-up-double-thumbs-up-93E7C.png


[10/31/2023 8:10 PM] andi15701
you can use devm_-stuff if the life time of the object allocated is the same as the device


[10/31/2023 8:11 PM] andi15701
i.e. allocated at probe and freed/released at remove


[11/5/2023 4:52 PM] szybet
```
[  350.041827] dpm_run_callback(): platform_pm_suspend+0x0/0x50 returns -2
[  350.048498] PM: Device 228c000.epdc failed to suspend: error -2
[  350.054427] PM: Some devices failed to suspend, or early wake event detected
[  350.061936] genirq: Flags mismatch irq 32. 00002002 (elan-touch) vs. 00002002 (elan-touch)
```


[11/5/2023 4:52 PM] szybet
thats a problem


[11/5/2023 4:52 PM] szybet
it doesnt wake up after that


[11/5/2023 5:02 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-0C121.txt


[11/5/2023 5:27 PM] szybet
```
[  265.248614] genirq: Flags mismatch irq 32. 00002002 (elan-touch) vs. 00002002 (elan-touch)
[  265.256975] drivers/input/touchscreen/elan_touch_i2c.c(elan_touch_register_interrupt): Can't allocate irq 32
[  265.256993] elan ts starts in polling mode.
```
um


[11/5/2023 5:30 PM] szybet
i fucked something up with wakeups and irq, i see it now...


[11/5/2023 5:30 PM] szybet
pooling mode shouldnt be on at all


[11/5/2023 5:31 PM] andi15701
well, if you are messing around there, you can also clean up the irq registration


[11/5/2023 5:31 PM] szybet
i made it worse ;p...


[11/5/2023 5:31 PM] andi15701
client->irq gets populated


[11/5/2023 5:32 PM] andi15701
if interrupts and interrupt-parent are both specified


[11/5/2023 5:32 PM] andi15701
in the devicetree


[11/5/2023 5:32 PM] andi15701
no custom gpio-irq node is needed


[11/5/2023 5:33 PM] andi15701
and use devm_irq stuff


[11/5/2023 6:26 PM] szybet
```
[    5.716573] ==== calc_soc_by_voltageMethod E60U22 ====
[    5.925423] imx_epdc_v2_fb 228c000.epdc:  *** Extra Waveform Data checksum error ***
[    5.951027] imx6ul-pinctrl 2290000.iomuxc-snvs: pin MX6ULL_PAD_SNVS_TAMPER3 already requested by 21f8000.i2c; cannot claim for gpio-keys
[    5.965366] imx6ul-pinctrl 2290000.iomuxc-snvs: pin-5 (gpio-keys) status -22
[    5.972525] imx6ul-pinctrl 2290000.iomuxc-snvs: could not request pin 5 (MX6ULL_PAD_SNVS_TAMPER3) from group gpio_snvs_keys_grp  on device 2290000.iomuxc-snvs
[    5.986766] imx_epdc_v2_fb 228c000.epdc:  *** Extra Waveform Data checksum error ***
[    5.994557] gpio-keys gpio-keys: Error applying setting, reverse things back
[    6.002874]  adjusted VCOM is out of range, -66605625 uV (offset:0xcfc5)
Interface 'lo': flags set to 0001.
[FBInk] Couldn't find a Kobo version tag (onboard unmounted or not running on a Kobo?)!
[FBInk] Detected a Kobo Nia (382 => Luna @ Mark 7)
[FBInk] Enabled Kobo Mark 7 quirks
[FBInk] Clock tick frequency appears to be 100 Hz
[FBInk] Screen density set to 212 dpi
[FBInk] Variable fb info: 758x1024, 16bpp @ rotation: 3 (Counter Clockwise, 270°)
[FBInk] Fixed fb info: ID is "mxc_epdc_fb", length of fb mem: 3145728 bytes & line length: 1536 bytes
[FBInk] Canonical rotation: 0 (Upright, 0°)
[FBInk] Fontsize set to 12x26 (Tewi base glyph size: 6x13)
[FBInk] Line length: 63 cols, Page size: 39 rows
[FBInk] Vertical fit isn't perfect, shifting rows down by 5 pixels
[FBInk] Pen colors set to #000000 for the foreground and #FFFFFF for the background
[FBInk] [refresh_kobo_mk7] MXCFB_SEND_UPDATE_V2: Operation not permitted!
[FBInk] [fbink_cls] Failed to refresh the screen!
[FBInk] [refresh_kobo_mk7] MXCFB_SEND_UPDATE_V2: Operation not permitted!
[FBInk] [grid_to_region] Failed to refresh the screen!
[   10.458432] imx_epdc_v2_fb 228c000.epdc: Mode0 init failed!
[   13.688537] imx_epdc_v2_fb 228c000.epdc:  *** Extra Waveform Data checksum error ***
```


[11/5/2023 6:26 PM] szybet
corrupted waveform


[11/5/2023 6:26 PM] szybet
*yes*


[11/5/2023 6:35 PM] szybet
pmic stopped responding?...


[11/5/2023 6:37 PM] andi15701
well, yes, waveform seem o be corrupted


[11/5/2023 6:37 PM] andi15701
Operation not permitted: Display blanked


[11/5/2023 6:38 PM] szybet
sd card maybe died


[11/5/2023 8:08 PM] andi15701
66V


[11/5/2023 8:15 PM] szybet
um?...


[11/5/2023 8:15 PM] szybet
it booted a clean image sooo


[11/5/2023 8:15 PM] szybet
idk i corrupted something


[11/5/2023 8:15 PM] andi15701
adjusted VCOM is out of range, -66605625 uV (offset:0xcfc5)


[11/5/2023 8:16 PM] szybet
ye i see


[11/5/2023 8:16 PM] szybet
and what


[11/5/2023 8:17 PM] andi15701
hmm, partly overwritten waveform?


[11/5/2023 8:17 PM] szybet
could be


[11/5/2023 8:17 PM] szybet
i have written a few kernels


[11/5/2023 8:19 PM] szybet
ye works now


[11/5/2023 8:20 PM] szybet (pinned)
good to see that its save to fuck things up, even if warning of 66V appears


[11/5/2023 8:20 PM] szybet
Pinned a message.


[11/6/2023 9:59 PM] andi15701
btw: what needs to be done to get rid of 2.6 kernels in inkbox?


[11/6/2023 9:59 PM] andi15701
- having imx5 epdc work with something more recent


[11/6/2023 9:59 PM] szybet
port devices that use it


[11/6/2023 10:00 PM] andi15701
- understanding how things are wired up


[11/6/2023 10:00 PM] andi15701
which drivers are involved?


[11/6/2023 10:00 PM] szybet
idk


[11/6/2023 10:00 PM] szybet
its not like nicolas who has those devices has time for this


[11/6/2023 10:02 PM] andi15701
well, I am wondering whether it would be helpful if I get hold on one of these devices


[11/6/2023 10:02 PM] andi15701
and do some hacking there


[11/6/2023 10:03 PM] szybet
ask nicolas on pv


[11/6/2023 10:05 PM] andi15701
the general point is that mxc_epdc_v2 from nxp 4.1.15 kernels contains the stuff for imx6sl devices behind some #ifdef, and apparently also stuff for imx5 behind some if (EPDC_VERSION < x), so that might be possible


[11/7/2023 3:54 PM] tux_linux
nope
exam thursday

{Attachments}
/mnt/data/projects/git/conversations/media/image-E24E9.png
/mnt/data/projects/git/conversations/media/image-2796E.png
/mnt/data/projects/git/conversations/media/image-C5ABF.png
/mnt/data/projects/git/conversations/media/image-71AEC.png
/mnt/data/projects/git/conversations/media/image-BD1F4.png


[11/7/2023 3:54 PM] tux_linux
teachers are really crazy here


[11/7/2023 3:55 PM] szybet
your school is crazy.


[11/7/2023 3:55 PM] tux_linux
*school system probably


[11/7/2023 3:55 PM] szybet
nope


[11/7/2023 3:56 PM] szybet
its fundamentally still the prussian one

{Reactions}
🥴 

[11/7/2023 3:56 PM] szybet
but yours is more opressive, thats it


[11/7/2023 3:56 PM] tux_linux
https://en.wikipedia.org/wiki/R_score
have you heard about this
our life is centered on exams and grades
how can you like learning with that

{Embed}
https://en.wikipedia.org/wiki/R_score
R score
The R score (French: cote de rendement au collégial, CRC or cote R) is a statistical method that classifies college students' academic performances in Quebec. It is used by Quebec universities for selection purposes.
The R score is in fact a z-score (Zcol) multiplied by a group dispersion indicator (IDGZ) to which an indicator of group strength ...


[11/7/2023 3:57 PM] szybet
insane


[11/7/2023 3:57 PM] szybet
we have something similar in poland


[11/7/2023 3:58 PM] szybet
but still its not as opressive


[11/7/2023 3:58 PM] tux_linux
well, life is pretty much a nightmare now


[11/7/2023 3:59 PM] tux_linux
homework in bus, subway, in bed, from 5am to 1am round the clock


[11/7/2023 3:59 PM] tux_linux
so yea


[11/7/2023 9:30 PM] szybet
its not the touchscreen that what wakes up -_-

{Attachments}
/mnt/data/projects/git/conversations/media/message-6F6E1.txt


[11/7/2023 9:30 PM] szybet
what are youuu ;-;


[11/7/2023 9:30 PM] szybet
whatever, ipd will handle this.


[11/10/2023 12:28 AM] hajimen8903
Hello, is this instruction valid now? I tried to follow it and this https://inkbox.ddns.net/wiki/index.php?title=ITerm#Extensions but failed. I haven't see "my-extension" directory in ITerm yet.

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=ITerm
Index.php


[11/10/2023 12:42 AM] [matrix] tux-linux
Nice that you have tried it
You might need the latest dev version
Which device are you on?


[11/10/2023 3:02 AM] hajimen8903
Thanks, my kobo is N905B. The SD card image is SHA-256: 3e0a. ITerm is ZIP from here: https://github.com/Kobo-InkBox/user-applications

{Embed}
https://github.com/Kobo-InkBox/user-applications
GitHub - Kobo-InkBox/user-applications: User applications repository
User applications repository. Contribute to Kobo-InkBox/user-applications development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/user-applications-362B1


[11/10/2023 3:03 AM] hajimen8903
Where is the signed dev version of ITerm?


[11/10/2023 6:11 AM] szybet
What do you all mean dev version of iterm?


[11/10/2023 6:17 AM] hajimen8903
I guessed that there is newer version of ITerm or InkBox and they are called dev version


[11/10/2023 7:19 AM] [matrix] Szybet
Well propably inkbox


[11/10/2023 7:19 AM] [matrix] Szybet
You need to update rootfs


[11/10/2023 11:50 AM] hajimen8903
Where is the rootfs update instruction?


[11/10/2023 11:52 AM] [matrix] Szybet
Nowhere hehe...


[11/10/2023 11:52 AM] [matrix] Szybet
Wait till i get home then i will post it in the wiki


[11/10/2023 11:53 AM] [matrix] Szybet
If you dont want to wait its on discord and partially on my niaudio inkbox.md repo and file


[11/10/2023 11:53 AM] [matrix] Szybet
You need your own image with your own keys


[11/10/2023 11:57 AM] hajimen8903
Thanks, I'll wait


[11/10/2023 12:15 PM] [matrix] Szybet
In the meantime use imgtool to create your own image


[11/10/2023 12:15 PM] [matrix] Szybet
Its dovker with a guide so you will figure it out


[11/10/2023 5:22 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-71DB3.png


[11/10/2023 5:22 PM] szybet
basically that


[11/10/2023 5:22 PM] szybet
if anything is unclear, ask


[11/12/2023 10:04 AM] hajimen8903
Tested and two problems:


[11/12/2023 10:05 AM] hajimen8903
signing command should be "../rootfs.squashfs" I guess


[11/12/2023 10:06 AM] hajimen8903
My kobo shows "InkBox crash / Error code 3"


[11/12/2023 10:07 AM] hajimen8903
I guess that my own generated private key doesn't work as is. Isn't there another step to make it available?


[11/12/2023 10:22 AM] [matrix] Szybet
I said you need to create your own image


[11/12/2023 10:35 AM] szybet
https://github.com/Kobo-InkBox/imgtool

{Embed}
https://github.com/Kobo-InkBox/imgtool
GitHub - Kobo-InkBox/imgtool: Reproducible image builder for InkBox OS
Reproducible image builder for InkBox OS. Contribute to Kobo-InkBox/imgtool development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/imgtool-0EE5B


[11/13/2023 2:12 AM] hajimen8903
Thanks, but I stuck into this problem https://discord.com/channels/809205711778480158/958419944243089479/1144622539214164038


[11/13/2023 2:12 AM] hajimen8903
I gave up for now


[11/13/2023 2:13 AM] hajimen8903
hopefully I will see again when most thing looks well


[11/13/2023 9:42 AM] kuratius
I think going back to the last commit by szybet worked for me


[11/13/2023 9:47 AM] [matrix] Szybet
In kernel repo, yes


[11/13/2023 9:48 AM] [matrix] Szybet
Or look at inkbox.md in niaudio my repo on github i updated the command with 2 arguments, ads them


[11/13/2023 5:53 PM] szybet
add to your command line: ` INIT_GCC="/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/bin/armv7l-linux-musleabihf-gcc" INIT_STRIP="/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/bin/armv7l-linux-musleabihf-strip"`


[11/14/2023 5:12 AM] [matrix] tux-linux
LaTeX is fun


[11/14/2023 5:12 AM] [matrix] tux-linux
Maybe it should be used to make an InkBox user guide


[11/14/2023 5:13 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-62553.png


[11/14/2023 8:30 AM] matterbridge#2154
[matrix] Szybet 
You are insane.


[11/14/2023 8:30 AM] [matrix] Szybet
We are not writing a php in chemistry or physics


[11/14/2023 8:30 AM] [matrix] Szybet
🫡


[11/14/2023 2:05 PM] tux_linux
It's not hard


[11/14/2023 2:13 PM] kuratius
People use Latex for autodocs too


[11/14/2023 2:14 PM] kuratius
At my uni we had a script that wrote documentation for the instruction set ofa virtual machine we used in a course on compiler construction


[11/14/2023 2:20 PM] tux_linux
honestly its so much better than word


[11/14/2023 2:39 PM] szybet
you use markdown


[11/14/2023 2:39 PM] szybet
and if markdown cant do something, you embed latex into it


[11/14/2023 2:39 PM] szybet
the end.


[11/14/2023 2:40 PM] tux_linux
github embedded latex in markdown


[11/27/2023 12:26 PM] [matrix] haitam-kenwai
Hi everyone! A couple of days ago I installed InkBox to my Kobo Nia and loving it so far! I was wondering if there is the possibility to implement a function that keep track of the page number when closing and reopening a book.

Asking here and not opening a request on Github just because:

1 I want to make sure that no one is already working on it (I didn't saw something like that on GH but I could have missed it)

2 I want to make sure that this project accept external contributions, since I'm open to make some testing and development myself


[11/27/2023 12:51 PM] [matrix] Szybet
Hello

It is already implemented, but as you can see the current reader is baaad and noty ng works

A complete better rewrite is on the go, written in 60% already but:

The project is in hibernation which means the creator doesnt have time to do anything and i, the only contributor have only enough time to fix minor bugs which bother me. I will have enough time to help you and review your contributions. They are really welcome. Making a project like this in only 2 people is pain.

As for the fix for tha bad reader
Install the koreader user app and use it for now. You may need to update the rootfs too


[11/27/2023 1:00 PM] [matrix] haitam-kenwai
Ok, that's a shame to hear! I will start to study the code and see how I can help regardless.

Just another question: is Koreader running with InkBox as an OS?
I know it is a stupid question (or at least, to me it sound like that...) but I'm very new in e-reader hacking and I always try to use FOSS whenever possible


[11/27/2023 1:17 PM] [matrix] Szybet
As a sandboxed app

The os is still below and is managing other things, like sleep


[11/27/2023 2:25 PM] [matrix] haitam-kenwai
Ok then, for now I will use that


[11/27/2023 2:27 PM] [matrix] haitam-kenwai
I will still try to contribute in some way, I hope sooner than later, so I will show up again :)


[11/27/2023 2:35 PM] [matrix] Szybet
Cool


[11/30/2023 1:35 PM] tux_linux
You need to disable "global reading settings" in settings


[12/25/2023 2:38 PM] tux_linux
today's mission: update ipd in rootfs and check if it works on most devices


[12/25/2023 2:39 PM] szybet
yea i made it work finally


[12/25/2023 2:39 PM] tux_linux
wdym


[12/25/2023 2:39 PM] szybet
works flawlessly on my nia for the past few months


[12/25/2023 2:39 PM] szybet
no weird wake ups


[12/25/2023 2:39 PM] tux_linux
good


[12/25/2023 2:39 PM] szybet
or erors


[12/25/2023 2:39 PM] szybet
ya


[12/25/2023 2:39 PM] szybet
accept my pull requests


[12/25/2023 2:40 PM] tux_linux
i will start by reviewing their content


[12/25/2023 2:40 PM] tux_linux
also installing a new dev env since i have native linux on mac now


[12/25/2023 7:47 PM] tux_linux
oh no


[12/25/2023 7:47 PM] tux_linux
i have to compile qt from scratch


[12/25/2023 7:47 PM] tux_linux
ouch


[12/25/2023 7:47 PM] tux_linux
maybe i can grab it from my old vm


[12/25/2023 7:48 PM] szybet
what are you talking about


[12/25/2023 7:48 PM] szybet
compiled binaries


[12/25/2023 7:48 PM] szybet
repo


[12/25/2023 7:48 PM] tux_linux
hi


[12/25/2023 7:48 PM] tux_linux
im on arm64


[12/25/2023 7:48 PM] szybet
dont be a mad man, i wont help you


[12/25/2023 7:48 PM] tux_linux
i had already compiled it


[12/25/2023 7:48 PM] szybet
use a translater


[12/25/2023 7:48 PM] tux_linux
i will try to just grab them


[12/25/2023 7:48 PM] tux_linux
not sure that's really efficient


[12/25/2023 7:49 PM] szybet
it will wok


[12/25/2023 7:49 PM] szybet
you should only replace qmake


[12/25/2023 7:49 PM] szybet
nothing more, leave the libraries alone


[12/25/2023 7:49 PM] tux_linux
because


[12/25/2023 7:49 PM] szybet
because it will work


[12/25/2023 7:49 PM] szybet
qmake is the only native binary


[12/25/2023 7:49 PM] szybet
the rest is kobo compiled


[12/25/2023 7:50 PM] tux_linux
yes, in theory qmake was compiled native too


[12/25/2023 7:50 PM] tux_linux
i basically have the same setup i had except now it's on bare metal


[12/25/2023 7:50 PM] szybet
dont replace the libraries


[12/25/2023 7:50 PM] szybet
dont you remember the problems where we had compiled our qt separate


[12/25/2023 7:51 PM] szybet
we need to use the same set of libraries for compability


[12/25/2023 7:52 PM] tux_linux
yes
in theory the libraries i had were ok?


[12/25/2023 7:52 PM] szybet
use the ones in the repo


[12/25/2023 7:52 PM] szybet
i dont care which ones you had


[12/25/2023 7:53 PM] tux_linux
ok


[12/25/2023 9:11 PM] tux_linux
where is libsndfile


[12/25/2023 9:11 PM] tux_linux
is it in qt-bin folder


[12/25/2023 9:11 PM] tux_linux
or elsewhere


[12/25/2023 9:12 PM] [matrix] Szybet
find . | grep libsndfile


[12/25/2023 9:12 PM] [matrix] Szybet
idk


[12/25/2023 9:12 PM] tux_linux
ok


[12/25/2023 9:12 PM] tux_linux
im just trying to understand how it built fine on my previous setup


[12/25/2023 9:13 PM] szybet
cant remember


[12/25/2023 9:13 PM] tux_linux
i will see


[12/26/2023 1:43 AM] tux_linux
dumb me


[12/26/2023 1:43 AM] tux_linux
its in the repo itself


[12/26/2023 3:24 PM] tux_linux
any other PRs I missed?


[12/26/2023 3:31 PM] szybet
platform plugin


[12/26/2023 3:33 PM] tux_linux
ok


[12/26/2023 3:33 PM] tux_linux
is it normal libsndfile.so is missing with my august gui bundle?


[12/26/2023 3:33 PM] szybet
yep


[12/26/2023 3:33 PM] tux_linux
good


[12/26/2023 3:33 PM] tux_linux
so what more to do


[12/26/2023 3:33 PM] szybet
.


[12/26/2023 3:33 PM] tux_linux
ok


[12/26/2023 3:38 PM] tux_linux
is it normal this doesn't exist in your last commit

{Attachments}
/mnt/data/projects/git/conversations/media/image-A6F66.png


[12/26/2023 3:38 PM] szybet
it is not


[12/26/2023 3:38 PM] szybet
it should


[12/26/2023 3:38 PM] tux_linux
well, then there's a problem


[12/26/2023 3:38 PM] tux_linux
i pulled your repo


[12/26/2023 3:38 PM] szybet
then add those 2 lines, the end


[12/26/2023 3:39 PM] tux_linux
what if other things are missing


[12/26/2023 3:43 PM] tux_linux
where are libinput libs supposed to be


[12/26/2023 3:43 PM] szybet
tools like git and merge should help you.


[12/26/2023 3:43 PM] szybet
GUI ROOTfs


[12/26/2023 3:44 PM] tux_linux
ok


[12/26/2023 3:44 PM] tux_linux
how do you make qt find it


[12/26/2023 3:44 PM] szybet
its in /lib or usr/somewhere


[12/26/2023 3:44 PM] szybet
qt does need to find it


[12/26/2023 3:45 PM] tux_linux
but what did you do to make it compile


[12/26/2023 3:45 PM] szybet
just paths /lib:/usr/


[12/26/2023 3:45 PM] tux_linux
ok


[12/26/2023 3:45 PM] szybet
compile what


[12/26/2023 3:45 PM] tux_linux
platform plugin


[12/26/2023 3:45 PM] szybet
to compile it is in the compiler sysroot


[12/26/2023 3:45 PM] szybet
i said use the same libraries


[12/26/2023 3:46 PM] tux_linux
well i cant


[12/26/2023 3:46 PM] tux_linux
you dont have arm64 arm-kobo-linux-gnueabihf


[12/26/2023 3:46 PM] szybet
because


[12/26/2023 3:46 PM] szybet
the sysroot can be the same


[12/26/2023 3:46 PM] tux_linux
so you just compiled it then installed it in the sysroot?


[12/26/2023 3:46 PM] tux_linux
hmm


[12/26/2023 3:47 PM] szybet
my god do you understand anything

cross compiling means that the compiler or qmake runs on your architecture and the rest is in the architecture of the target device like the sysroot or qt libs


[12/26/2023 3:47 PM] szybet
should be there


[12/26/2023 3:47 PM] tux_linux
ok


[12/26/2023 3:47 PM] tux_linux
its been 5 months i havent done anything related to this


[12/26/2023 3:48 PM] tux_linux
do you have access to your sysroot?


[12/26/2023 3:48 PM] tux_linux
can you squash it?


[12/26/2023 3:48 PM] szybet
its in compiled-binaries repo next to the compiler


[12/26/2023 3:48 PM] tux_linux
i dont feel like cloning the whole compiled binaries repo


[12/26/2023 3:49 PM] szybet
what is the diffrence


[12/26/2023 3:49 PM] tux_linux
anyway


[12/26/2023 3:49 PM] szybet
you need qt libs from there anyway


[12/26/2023 3:49 PM] tux_linux
also, diff**e**rence

{Reactions}
🫡 

[12/26/2023 3:49 PM] szybet
the end


[12/26/2023 3:55 PM] tux_linux
i will recompile qt native


[12/26/2023 3:55 PM] tux_linux
replacing libs didnt work


[12/26/2023 3:55 PM] szybet
show errors


[12/26/2023 3:56 PM] szybet
stop


[12/26/2023 3:56 PM] szybet
this is not a solution


[12/26/2023 3:56 PM] tux_linux
```
src/koboplatformintegration.cpp:207:59: warning: missing terminating ' character
  207 |         #error libinput libraries are missing - If you don't care or you want to debug something unrelated, comment this error, but if you want to ship a InkBox OS binary, you need to make this work
      |                                                           ^
src/koboplatformintegration.cpp:207:10: error: #error libinput libraries are missing - If you don't care or you want to debug something unrelated, comment this error, but if you want to ship a InkBox OS binary, you need to make this work
  207 |         #error libinput libraries are missing - If you don't care or you want to debug something unrelated, comment this error, but if you want to ship a InkBox OS binary, you need to make this work
      |          ^~~~~
make: *** [Makefile:2253: koboplatformintegration.o] Error 1
```


[12/26/2023 3:56 PM] tux_linux
i will use your config


[12/26/2023 3:57 PM] szybet
maybe look where libinput really is? i can be wrong about where they are???


[12/26/2023 3:57 PM] szybet
no and stop


[12/26/2023 3:57 PM] szybet
i already talked about it


[12/26/2023 3:57 PM] tux_linux
well, it was in qt-bin lib folder


[12/26/2023 3:57 PM] tux_linux
i removed my lib folder


[12/26/2023 3:57 PM] tux_linux
i copied the one from the compiled binaries repo


[12/26/2023 3:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-4ACC2.txt


[12/26/2023 3:58 PM] szybet
its in sysroot


[12/26/2023 3:58 PM] tux_linux
true


[12/26/2023 3:58 PM] tux_linux
well then, nothing changed


[12/26/2023 3:58 PM] tux_linux
sysroot changed


[12/26/2023 3:59 PM] tux_linux
sysroot has libinput


[12/26/2023 3:59 PM] tux_linux
but error stays there


[12/26/2023 3:59 PM] szybet
check if it has it


[12/26/2023 3:59 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/message-41EF5.txt


[12/26/2023 3:59 PM] tux_linux
i think it does


[12/26/2023 4:00 PM] szybet
copy /usr/lib to /lib in the sysroot


[12/26/2023 4:00 PM] tux_linux
why


[12/26/2023 4:00 PM] tux_linux
this was the compiled binaries sysroot


[12/26/2023 4:00 PM] szybet
some compilers dont like usr lib


[12/26/2023 4:03 PM] tux_linux
error


[12/26/2023 4:04 PM] tux_linux
```
 #if QT_CONFIG(libinput)
```
this is probably why qt needs to be recompiled


[12/26/2023 4:05 PM] tux_linux
the problem is deeper in it


[12/26/2023 4:05 PM] tux_linux
it doesnt care if it has libinput in its libs


[12/26/2023 4:05 PM] tux_linux
it wasnt configured to search for them


[12/26/2023 4:05 PM] szybet
you need to compile your qmake with support for libinput obviously


[12/26/2023 4:05 PM] tux_linux
yea


[12/26/2023 4:06 PM] tux_linux
so
what was the latest command to compile qt
i saw it yesterday but can't find it


[12/26/2023 4:07 PM] szybet
https://github.com/Kobo-InkBox/compiled-binaries/blob/main/informations.md

{Embed}
https://github.com/Kobo-InkBox/compiled-binaries/blob/main/informations.md
compiled-binaries/informations.md at main · Kobo-InkBox/compiled-bi...
Compiled binaries of stuff used for InkBox OS. WARNING : Don't ever expect this to be regularly updated and/or maintained. - Kobo-InkBox/compiled-binaries
/mnt/data/projects/git/conversations/media/compiled-binaries-36460


[12/26/2023 4:07 PM] tux_linux
thanks


[12/26/2023 4:11 PM] [matrix] tux-linux
testing nheko


[12/26/2023 4:12 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-973F8.png


[12/26/2023 4:12 PM] tux_linux
it's a bit ugly


[12/26/2023 4:12 PM] szybet
what sense does this os have


[12/26/2023 4:12 PM] tux_linux
wdym


[12/26/2023 4:13 PM] szybet
what is it purpuse


[12/26/2023 4:13 PM] szybet
why does it exist


[12/26/2023 4:13 PM] tux_linux
my fedora install?


[12/26/2023 4:13 PM] [matrix] tux-linux
i think it is better in dark mode


[12/26/2023 4:13 PM] [matrix] tux-linux
but still a bit ugly


[12/26/2023 4:13 PM] [matrix] tux-linux
clipboard.png


[12/26/2023 4:13 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/clipboard-5CD4D.png


[12/26/2023 4:15 PM] szybet
oh i thought you were talking about haiku os


[12/26/2023 4:15 PM] szybet
whatever nevermind


[12/27/2023 3:25 AM] tux_linux
@Szybet everything should be merged now, in theory


[12/27/2023 4:08 PM] [matrix] tux-linux
neochat is better


[12/27/2023 4:08 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/neochat_is_better-5CA40.png


[12/27/2023 4:12 PM] matterbridge#2154
[matrix] tux-linux 
please test platform plugins with new rootfs if possible
thanks


[12/27/2023 4:19 PM] szybet
I dont have time


[12/27/2023 4:19 PM] szybet
works for me now, if you have broken anything then im sorry


[12/27/2023 4:23 PM] [matrix] tux-linux
ok


[12/29/2023 6:47 PM] [matrix] tux-linux
settings-1.png


[12/29/2023 6:47 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/settings-1-E80D7.png


[12/29/2023 6:47 PM] [matrix] tux-linux
settings-2.png


[12/29/2023 6:47 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/settings-2-F06D2.png


[12/29/2023 6:47 PM] szybet
are you using qsettings


[12/29/2023 6:47 PM] [matrix] tux-linux
settings-3.png


[12/29/2023 6:47 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/settings-3-58727.png


[12/29/2023 6:47 PM] szybet
please say yes


[12/29/2023 6:47 PM] szybet
qsettings?


[12/29/2023 6:47 PM] [matrix] tux-linux
no
but it can be transformed for it


[12/29/2023 6:47 PM] szybet
then do it ;/


[12/29/2023 6:47 PM] [matrix] tux-linux
its the same backend


[12/29/2023 6:47 PM] szybet
well ok


[12/29/2023 6:47 PM] [matrix] tux-linux
only design changed


[12/29/2023 6:48 PM] szybet
ok, sure


[12/29/2023 6:48 PM] [matrix] tux-linux
how did you get the lines in the first screenshot to disappear in wifilogger


[12/29/2023 6:48 PM] [matrix] tux-linux
i remember we had a problem with qscrollarea like that


[12/29/2023 6:48 PM] szybet
which ones


[12/29/2023 6:48 PM] szybet
horizontal?


[12/29/2023 6:49 PM] [matrix] tux-linux
there are two lines


[12/29/2023 6:49 PM] [matrix] tux-linux
they are glued to the buttons


[12/29/2023 6:49 PM] szybet
those a qbuttons?


[12/29/2023 6:49 PM] szybet
qpusbuttons


[12/29/2023 6:49 PM] [matrix] tux-linux
they touch the margins of the buttons, like the reading button


[12/29/2023 6:50 PM] szybet
can you just mark them red in paint and show me


[12/29/2023 6:53 PM] [matrix] tux-linux
compare with original image


[12/29/2023 6:53 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/compare_with_original_image-92EE8.png


[12/29/2023 6:53 PM] szybet
sow me the structure in qt designer


[12/29/2023 6:55 PM] [matrix] tux-linux
2023-12-29-12-55-09.png


[12/29/2023 6:55 PM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/2023-12-29-12-55-09-F5252.png


[12/29/2023 6:56 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-0F1FF.png


[12/29/2023 6:56 PM] szybet
look up every object and what frame it has


[12/29/2023 6:56 PM] tux_linux
ok, i will try that


[12/29/2023 6:57 PM] [matrix] tux-linux
works, thanks


[12/29/2023 6:58 PM] szybet
are we interested in branding my watchy firmware with inkbox


[12/29/2023 6:58 PM] szybet
i read books on it already


[12/29/2023 6:58 PM] [matrix] tux-linux
wdym exactly


[12/29/2023 6:59 PM] szybet
idk

inkbox is a os for ereaders

i have written a firmware for a eink watch which is special in many ways

kinda related, idk


[12/29/2023 7:00 PM] [matrix] tux-linux
does it do any inkbox-related stuff


[12/29/2023 7:00 PM] [matrix] tux-linux
does it use libs from inkbox


[12/29/2023 7:00 PM] [matrix] tux-linux
anything


[12/29/2023 7:00 PM] szybet
what would it be
i plan page changing with it for inkbox

its fully custom


[12/29/2023 7:01 PM] szybet
Idk, just asking if you dont have any idea then whatever


[12/29/2023 7:01 PM] [matrix] tux-linux
so your watch can read books


[12/29/2023 7:01 PM] [matrix] tux-linux
what else


[12/29/2023 7:02 PM] szybet
shows weather informations, charts and such


[12/29/2023 7:02 PM] szybet
and the code is not shitty


[12/29/2023 7:02 PM] [matrix] tux-linux
was it a class assignment


[12/29/2023 7:02 PM] szybet
what


[12/29/2023 7:03 PM] [matrix] tux-linux
idk, maybe you did a project in school


[12/29/2023 7:03 PM] szybet
😂


[12/29/2023 7:03 PM] szybet
in school we write basic php sites


[12/29/2023 7:03 PM] [matrix] tux-linux
well, you can name it InkWatch


[12/29/2023 7:03 PM] [matrix] tux-linux
or inkbox watch


[12/29/2023 7:05 PM] szybet
the teacher that was supposed to teach us c++ told us its named c++ because of incrementation

i laughed him off and he stopped teaching us, we were practicing our own things from that point😂 

so dont expect anything from my school


[12/29/2023 7:05 PM] szybet
Inkbox-watch


[12/29/2023 7:05 PM] szybet
thanks


[12/29/2023 7:05 PM] szybet
cool name


[12/29/2023 7:06 PM] matterbridge#2154
[matrix] tux-linux i laughed him off and he stopped teaching us, we were practicing our own things from that point😂
so dont expect anything from my school

sad


[12/29/2023 7:06 PM] szybet
`firmware written by the second developer of inkbox, and blessed by the creator of inkbox`🥴


[12/29/2023 7:06 PM] [matrix] tux-linux
good
only not forget to write InkBox properly


[12/29/2023 7:07 PM] szybet
yes, liNKbtux


[12/29/2023 7:08 PM] [matrix] tux-linux
almost my username


[12/29/2023 8:56 PM] kuratius
LinkBox


[12/29/2023 9:48 PM] [matrix] tux-linux
Nice


[12/29/2023 11:03 PM] szybet
@tux-linux do you want to show a demo of the firmware as for now on your yt channel


[12/29/2023 11:05 PM] [matrix] tux-linux
Why not
But it has to work somehow with inkbox


[12/29/2023 11:06 PM] [matrix] tux-linux
Show a demo of it


[12/29/2023 11:06 PM] szybet
not yet


[12/29/2023 11:06 PM] szybet
demo i said


[12/29/2023 11:07 PM] szybet
i reads books, no more similarietes for now


[12/29/2023 11:07 PM] [matrix] tux-linux
Well ok


[12/29/2023 11:08 PM] [matrix] tux-linux
You can send it but depending on size I might not be able to upload it before tomorrow or after tomorrow


[12/29/2023 11:25 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/inkwatch-demo-AA826.mp4


[12/29/2023 11:25 PM] szybet
20 Mb


[12/29/2023 11:25 PM] szybet
how long will it take?


[12/29/2023 11:26 PM] [matrix] tux-linux
I can probably upload it now


[12/29/2023 11:26 PM] szybet
cool


[12/29/2023 11:26 PM] szybet
leave the sound


[12/29/2023 11:26 PM] szybet
its a easter egg for people "who know"


[12/29/2023 11:31 PM] tux_linux
do you have a gh repo link


[12/29/2023 11:31 PM] szybet
not yet


[12/29/2023 11:31 PM] szybet
not ready for release


[12/29/2023 11:32 PM] szybet
just link my github profile for now and say it will be soon released


[12/29/2023 11:33 PM] tux_linux
https://youtu.be/gFOCqalJidQ

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=gFOCqalJidQ
Szybet's InkWatch demo
More details to come...
/mnt/data/projects/git/conversations/media/hqdefault-E88AD.jpg


[12/29/2023 11:33 PM] szybet
add in the description that its a custom firmware for https://watchy.sqfmi.com/

{Embed}
https://watchy.sqfmi.com/
Watchy by SQFMI | Watchy
Watchy by SQFMI
/mnt/data/projects/git/conversations/media/watchy_social_card-933E0.png


[12/29/2023 11:33 PM] szybet
we can tell something ;)


[12/29/2023 11:35 PM] szybet
also lets say its InkWatchy


[12/29/2023 11:35 PM] szybet
y at the end


[12/29/2023 11:35 PM] szybet
so the title needs to be changed too


[12/29/2023 11:35 PM] szybet
thanks


[12/29/2023 11:36 PM] [matrix] tux-linux
Can't it be inkwatch


[12/29/2023 11:36 PM] [matrix] tux-linux
Inkwatchy is ugly imo


[12/29/2023 11:37 PM] szybet
the full name is InkWatchy firmware


[12/29/2023 11:37 PM] szybet
maybe this makes more sense to you


[12/29/2023 11:37 PM] szybet
Ink from inkbox watchy that its the watchy


[12/29/2023 11:37 PM] szybet
perfect sense


[12/29/2023 11:39 PM] [matrix] tux-linux
Ok


[12/29/2023 11:39 PM] [matrix] tux-linux
Done


[12/29/2023 11:39 PM] szybet
its not based on


[12/29/2023 11:39 PM] szybet
its fully custom


[12/29/2023 11:39 PM] szybet
its for the watchy


[12/29/2023 11:39 PM] szybet
watchy is the device


[12/29/2023 11:39 PM] tux_linux
Oh ok


[12/29/2023 11:40 PM] szybet
thats the point of my work really


[12/29/2023 11:40 PM] tux_linux
Corrected


[12/29/2023 11:40 PM] szybet
most firmwares are just subclasses of the watchy class so you cant control everything eassly, and split it into many files eassly soo


[12/29/2023 11:41 PM] tux_linux
Design is great


[12/29/2023 11:41 PM] szybet
design of what


[12/29/2023 11:41 PM] szybet
https://github.com/GuruSR/Watchy_GSR/blob/master/src/Watchy_GSR.cpp

{Embed}
https://github.com/GuruSR/Watchy_GSR/blob/master/src/Watchy_GSR.cpp
Watchy_GSR/src/Watchy_GSR.cpp at master · GuruSR/Watchy_GSR
Watchy code that offers a large feature set:  OTA settings with backup and restore, NVS storage, Alarms, Timers, 10 WiFi Access Points, Compile AddOns, OpenWeatherMap support, Automatic TimeZone an...
/mnt/data/projects/git/conversations/media/Watchy_GSR-FD97C


[12/29/2023 11:41 PM] tux_linux
Looks like a 2000s ipod


[12/29/2023 11:41 PM] tux_linux
But nice


[12/29/2023 11:41 PM] szybet
look at this code, the most advanced firmware for the watchy as for now

{Reactions}
👍 

[12/29/2023 11:41 PM] tux_linux
Also what is the inside joke with the music


[12/29/2023 11:42 PM] szybet
fucking 5000 lines of code and the code sample is:

```cpp
    J++; A = 0;
    while (L > J){
        Ok = false;
        if (L > J){ // get APx
            if (NewV > 129) { GSRWiFi.AP[A].TPWRIndex=constrain(O[J],0,10); J++; }
            W = O[J]; J++; S = "";
            if (L > J + (W - 1)) {  // Read APx.
                for (I = 0; L > J && I < W; I++){
                     S += String(char(O[J])); J++;
                }
                memcpy(&GSRWiFi.AP[A].APID,S.c_str(),strlen(S.c_str()));
                Ok = true;
            }
            if (L > J){ // get APx
                W = O[J]; J++; S = "";
                if (L > J + (W - 1)) {  // Read PAx.
                    for (I = 0; L > J && I < W; I++){
                        S += String(char(O[J])); J++;
                    }
                    memcpy(&GSRWiFi.AP[A].PASS,S.c_str(),strlen(S.c_str()));
                    Ok = true;
                }
            }
        }
        if (Ok) A++;
    }
```
like understand anything


[12/29/2023 11:42 PM] szybet
madness


[12/29/2023 11:42 PM] tux_linux
Lack of comments


[12/29/2023 11:42 PM] szybet
that too


[12/29/2023 11:42 PM] tux_linux
This code is worse than InkBox's


[12/29/2023 11:42 PM] szybet
mine is written in style of ipd so lots of files


[12/29/2023 11:42 PM] szybet
yea...


[12/29/2023 11:43 PM] tux_linux
At least when it comes to clarity


[12/29/2023 11:43 PM] tux_linux
Maybe better


[12/29/2023 11:44 PM] szybet
https://youtu.be/asr6_eNCuoUhttps://youtu.be/asr6_eNCuoU its that
its the mechanicus from warhammer 40k so basically:
https://youtu.be/9gIMZ0WyY88

{Embed}
Kasedo Games
https://www.youtube.com/watch?v=9gIMZ0WyY88
Warhammer 40,000: Mechanicus | Teaser Trailer
Take control of one of the most technologically advanced armies in the Imperium - The Adeptus Mechanicus. As Magos Dominus Faustinius, you’ll lead the expedition on the newly rediscovered planet of Silva Tenebris. Manage resources, discover long-forgotten tech, plan tactical operations using the Noosphere technology and control your Tech-Priests...
/mnt/data/projects/git/conversations/media/maxresdefault-96256.jpg


[12/29/2023 11:45 PM] szybet
||those are guys that replace their bodies with electronics to expand their capabilites - just like im doing with this "watch"||


[12/29/2023 11:45 PM] [matrix] tux-linux
nice
cant really watch it now but cool


[12/29/2023 11:45 PM] szybet
🥴


[12/29/2023 11:45 PM] szybet
im going to post it on the watchy discord


[12/29/2023 11:45 PM] [matrix] tux-linux
how does a 18gb mobile plan cost in poland


[12/29/2023 11:45 PM] szybet
your video


[12/29/2023 11:45 PM] [matrix] tux-linux
np


[12/29/2023 11:45 PM] szybet
what speed


[12/29/2023 11:45 PM] [matrix] tux-linux
4g lte+


[12/29/2023 11:48 PM] szybet
random operator: 10 Gb is for 10 zł per month so it's 2 dolars? so 18 is like 4$?

well my internet on my phone is 500kb/s only but its **free** i only paid 4 years ago for a sim card, thats it
~~and i need to solve a easy captcha every hour, but at this point im doing this blindly 🥴 ~~

tldr: it can be even cheaper


[12/29/2023 11:48 PM] [matrix] tux-linux
lmaooooooooo


[12/29/2023 11:48 PM] [matrix] tux-linux
want to know how much here


[12/29/2023 11:48 PM] szybet
20


[12/29/2023 11:49 PM] szybet
?


[12/29/2023 11:49 PM] szybet
$


[12/29/2023 11:49 PM] [matrix] tux-linux
33$


[12/29/2023 11:49 PM] szybet
🫥


[12/29/2023 11:49 PM] [matrix] tux-linux
i get a 2gb bonus from auto payments so 20gb


[12/29/2023 11:49 PM] [matrix] tux-linux
unlimited calls and texts


[12/29/2023 11:49 PM] [matrix] tux-linux
whatever


[12/29/2023 11:49 PM] szybet
how much does cost internet at home, like cable?


[12/29/2023 11:49 PM] [matrix] tux-linux
not that much


[12/29/2023 11:50 PM] [matrix] tux-linux
unlimited internet and tv can be about $50/mo or even $40/mo for cheaper plans


[12/29/2023 11:50 PM] [matrix] tux-linux
at least with my mobile plan i get free unlimited 128kbps internet when i have used all the data in the plan


[12/29/2023 11:51 PM] [matrix] tux-linux
matrix is useful for saving data


[12/29/2023 11:58 PM] szybet
I cant find mine but but i think its cheaper and a lot faster


[12/29/2023 11:59 PM] szybet
you know my internet speeds, those are crazy


[12/29/2023 11:59 PM] [matrix] tux-linux
yea


[12/30/2023 12:00 AM] [matrix] tux-linux
at my place they are not so fast


[12/30/2023 12:00 AM] [matrix] tux-linux
downlink is better


[12/30/2023 12:00 AM] [matrix] tux-linux
i get about 8mb/s


[12/30/2023 12:03 AM] szybet
canada is bigger


[12/30/2023 12:03 AM] szybet
so thats understandable


[12/30/2023 12:03 AM] [matrix] tux-linux
not really


[12/30/2023 12:03 AM] [matrix] tux-linux
well, idk how much you get in europe


[12/30/2023 12:03 AM] [matrix] tux-linux
i have max 1.3mb/s uplink


[12/30/2023 12:04 AM] [matrix] tux-linux
never went to europe


[12/30/2023 12:04 AM] [matrix] tux-linux
something to do someday


[12/30/2023 12:04 AM] szybet
yes i know the population lives mainly to the border of usa but still


[12/30/2023 12:05 AM] [matrix] tux-linux
yea


[12/30/2023 12:06 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-B8F5A.png


[12/30/2023 12:06 AM] szybet
optical fiber


[12/30/2023 12:06 AM] szybet
and i live in a shithole nowhere


[12/30/2023 12:06 AM] szybet
30 km to the nearest reasonable city


[12/30/2023 12:07 AM] szybet
~~there are places in major cities that are worse than that, more like your speed but thats another conversation~~


[12/30/2023 12:07 AM] [matrix] tux-linux
30km is not a lot


[12/30/2023 12:07 AM] szybet
```
Polish Internet 31st in the world It is the same position as a year earlier. However, the median throughput has changed – currently it is 65.8 Mbps, almost 10 Mbps more than last year.
```


[12/30/2023 12:07 AM] szybet
for a canadian🥴


[12/30/2023 12:07 AM] [matrix] tux-linux
To visit family we traveled 700km yesterday


[12/30/2023 12:07 AM] [matrix] tux-linux
🤣


[12/30/2023 12:08 AM] [matrix] tux-linux
7hrs on the road


[12/30/2023 12:08 AM] szybet
¯\_(ツ)_/¯


[12/30/2023 12:08 AM] szybet
but i need to move those 30 km almost everyday to school


[12/30/2023 12:08 AM] szybet
in both sides


[12/30/2023 12:08 AM] [matrix] tux-linux
How long is your commute


[12/30/2023 12:08 AM] [matrix] tux-linux
Mine is 1hr


[12/30/2023 12:08 AM] szybet
45 minutes on average


[12/30/2023 12:08 AM] szybet
well, close


[12/30/2023 12:09 AM] [matrix] tux-linux
I had to wake up at 5am almost every day


[12/30/2023 12:09 AM] [matrix] tux-linux
And it's not even 15km away


[12/30/2023 12:09 AM] szybet
I at 5:45


[12/30/2023 12:09 AM] szybet
What? how is that


[12/30/2023 12:09 AM] [matrix] tux-linux
Public transport here is... Meh


[12/30/2023 12:09 AM] szybet
well i have 3 reasonable busses


[12/30/2023 12:09 AM] szybet
1 to school 2 from school


[12/30/2023 12:11 AM] szybet
when do you start school?


[12/30/2023 12:11 AM] [matrix] tux-linux
I use 2 buses in the morning and 1 bus+1 subway station+1 bus on evening


[12/30/2023 12:11 AM] [matrix] tux-linux
I start on the 22nd


[12/30/2023 12:11 AM] [matrix] tux-linux
Finished the 22nd Dec
Physics exam


[12/30/2023 12:12 AM] [matrix] tux-linux
Day before, chemistry exam


[12/30/2023 12:12 AM] [matrix] tux-linux
Day before, math exam


[12/30/2023 12:12 AM] [matrix] tux-linux
All exams last 4hrs


[12/30/2023 12:12 AM] [matrix] tux-linux
I was dead


[12/30/2023 12:14 AM] szybet
i have only one bus


[12/30/2023 12:14 AM] szybet
so thats a lot better


[12/30/2023 12:14 AM] [matrix] tux-linux
Yea


[12/30/2023 12:14 AM] szybet
the advanced math exam that i will write at the end of school lasts only 3h


[12/30/2023 12:14 AM] szybet
its not enough to write the exam, more time would be nice but still


[12/30/2023 12:15 AM] [matrix] tux-linux
My math grades were the worst


[12/30/2023 12:15 AM] [matrix] tux-linux
I'm pretty sure I passed the class but still waiting on results


[12/30/2023 12:16 AM] [matrix] tux-linux
It was calc 1


[12/30/2023 12:16 AM] [matrix] tux-linux
Go figure how I am good in programming and logic but I sucked at derivatives


[12/30/2023 12:16 AM] [matrix] tux-linux
The last exam went much better though


[12/30/2023 12:17 AM] [matrix] tux-linux
So, probably everything decided to fit in at the last minute


[12/30/2023 12:17 AM] szybet
school math has nothing to do with programming, sadly


[12/30/2023 12:18 AM] [matrix] tux-linux
Yea


[12/30/2023 12:18 AM] szybet
i couldnt find any educational rankings that are official but canada is 7 and poland is 22 where usa 21


[12/30/2023 12:18 AM] [matrix] tux-linux
Yes we are pretty good here


[12/30/2023 12:19 AM] [matrix] tux-linux
Especially in Quebec


[12/30/2023 12:19 AM] szybet
im fine with being so much less educated if that means i dont get treated like that


[12/30/2023 12:19 AM] [matrix] tux-linux
I think we have the highest ranking in Canada for science or math


[12/30/2023 12:19 AM] szybet
it seems more like because being harsh on students instead of having good teachers 😬


[12/30/2023 12:20 AM] [matrix] tux-linux
Depends


[12/30/2023 12:20 AM] szybet
yep, it depends but i see what you tell


[12/30/2023 12:21 AM] [matrix] tux-linux
Look in chemistry how much 1% or 2% exams we had


[12/30/2023 12:21 AM] [matrix] tux-linux
1000001423.png


[12/30/2023 12:21 AM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/1000001423-02EC2.png


[12/30/2023 12:21 AM] [matrix] tux-linux
It was ridiculous


[12/30/2023 12:21 AM] [matrix] tux-linux
Do you get grades in percentage in Poland


[12/30/2023 12:21 AM] szybet
bruh, chemistry


[12/30/2023 12:22 AM] szybet
kind of, at the end its just scaled to 6-1 where  at the end 4.75 is called "nice"


[12/30/2023 12:22 AM] [matrix] tux-linux
Ok
Here it's just in percentages


[12/30/2023 12:22 AM] [matrix] tux-linux
So everyone stresses out all the time


[12/30/2023 12:23 AM] szybet
i had good chemstry teachers, and as of im in a IT focused class, they just got us a bit of interesting stuff to learn, some easy presentation to make and thats it - i didnt learned nothing serious there and thats good - i had more time for programming


[12/30/2023 12:24 AM] szybet
the biology teachers forced us to learn all bones in humans... i dont remember anything anyway now


[12/30/2023 12:24 AM] szybet
learning something advanced that you wont use or wont be helpfull in the future is pointless, you will forget it anyway...


[12/30/2023 12:25 AM] [matrix] tux-linux
in chemistry we had to learn how to draw molecules


[12/30/2023 12:25 AM] szybet
i mean i learned that too


[12/30/2023 12:25 AM] szybet
those are basics


[12/30/2023 12:25 AM] szybet
but when circle molecules appeared the teacher said "enough for you, you dont need to learn this"


[12/30/2023 12:26 AM] [matrix] tux-linux
image.png


[12/30/2023 12:26 AM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-817FA.png


[12/30/2023 12:26 AM] szybet
btw you could buy the watchy too if you like the concept - its just 34$


[12/30/2023 12:26 AM] [matrix] tux-linux
did you have to learn all the names and patterns by heart


[12/30/2023 12:26 AM] [matrix] tux-linux
and the angles


[12/30/2023 12:26 AM] [matrix] tux-linux
because we did


[12/30/2023 12:26 AM] matterbridge#2154
[matrix] tux-linux 
nice


[12/30/2023 12:27 AM] matterbridge#2154
[matrix] tux-linux 
we didn't learn cycles either


[12/30/2023 12:27 AM] szybet
nope, just to learn what the connections are between the atoms and draw them in diffrent drawing systems - nothing memorizing just rules


[12/30/2023 12:27 AM] [matrix] tux-linux
did you do what i showed in my screenshot


[12/30/2023 12:27 AM] szybet
we learned like 10 patterns of the most popular CxHx molecules, thats it


[12/30/2023 12:27 AM] szybet
easier things, not so advanced


[12/30/2023 12:28 AM] [matrix] tux-linux
we had to learn this
and hybridization


[12/30/2023 12:28 AM] [matrix] tux-linux
image.png


[12/30/2023 12:28 AM] [matrix] tux-linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-D0396.png


[12/30/2023 12:28 AM] szybet
like i had CH4, i need to learn its name, how to draw it but it was a easier way just lines between atoms and rules how many of those lines


[12/30/2023 12:28 AM] [matrix] tux-linux
sp2,sp3,sp3d,sp3d2


[12/30/2023 12:28 AM] szybet
hahah no no way


[12/30/2023 12:29 AM] [matrix] tux-linux
so just lewis structures?


[12/30/2023 12:29 AM] [matrix] tux-linux
those are easier


[12/30/2023 12:29 AM] [matrix] tux-linux
did you learn quantic numbers


[12/30/2023 12:29 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/images-A9B7F.png


[12/30/2023 12:29 AM] [matrix] tux-linux
idk if you call them like that in english


[12/30/2023 12:29 AM] szybet
something like that we did


[12/30/2023 12:30 AM] [matrix] tux-linux
yea, lewis structures
we did that before drawing molecules


[12/30/2023 12:30 AM] szybet
i dont recognice anything on google so no, nope


[12/30/2023 12:30 AM] szybet
those werent even in the teachers book, im sure of that


[12/30/2023 12:30 AM] [matrix] tux-linux
if a central atom has free electrons you draw it differently
and it also depends on the number of links it makes with other atoms


[12/30/2023 12:31 AM] szybet
if i would have gone to a chemistry class then yes, i would have learned tat


[12/30/2023 12:31 AM] matterbridge#2154
[matrix] tux-linux 
it literally says 'lewis structure' in your picture


[12/30/2023 12:31 AM] szybet
im talking about quantum something


[12/30/2023 12:31 AM] [matrix] tux-linux
yea, it's sort of needed to draw molecules


[12/30/2023 12:33 AM] szybet
idk, maybe it was a easier version of that


[12/30/2023 3:33 AM] kuratius
link and I will think about it


[12/30/2023 10:21 AM] szybet
https://github.com/Szybet/E-Watch-FOSS

{Embed}
https://github.com/Szybet/E-Watch-FOSS
GitHub - Szybet/E-Watch-FOSS: A clone of the Watchy with USB-C, sol...
A clone of the Watchy with USB-C, sold mostly on aliexpress. Now thanks to the kindness of the creator and my relentless requests - it&#39;s open source - GitHub - Szybet/E-Watch-FOSS: A clone ...
/mnt/data/projects/git/conversations/media/E-Watch-FOSS-37C5B


[12/30/2023 10:21 AM] szybet
everything you need to know is here


[12/30/2023 10:22 AM] szybet
read all of it


[12/30/2023 10:25 AM] szybet
also there have been like 10 people already that just canceled order from SQFMI and ordered on ali because it was delayed once more


[12/30/2023 2:26 PM] kuratius
https://www.youtube.com/watch?v=rAVV4kAYlI8
may be relevant for keyboard stuff

{Embed}
Enrico Tartarotti
https://www.youtube.com/watch?v=rAVV4kAYlI8
The Hidden Tricks That Make Your Tech ACTUALLY Work
📮 JOIN MY (FREE) EMAIL CLUB
https://enricotartarotti.com/email-club/?utm_source=desc-link
Exclusive videos and thoughts about tech, behind the scenes of how I make videos and building stuff on the internet

🖖 Hey! I'm Enrico and I am a Product Manager working in tech. On this channel I go behind the scenes of the design, psychology and stories b...
/mnt/data/projects/git/conversations/media/maxresdefault-7C7B9.jpg


[12/30/2023 2:26 PM] kuratius
the thing with dictionary based hitbox size is interesting


[12/30/2023 2:33 PM] kuratius
ali says it cant be shipped to Germany 😦


[12/30/2023 2:34 PM] kuratius
and this one is sold out https://thepihut.com/products/sqfmi-watchy

{Embed}
https://thepihut.com/products/sqfmi-watchy
SQFMI Watchy
The SQFMI Watchy is a fully open-source, hackable ePaper watch based on the ESP32 with a crisp, glare-free 1.54" 200x200 ePaper display which can be programmed using the Arduino IDE and lots of your favourite Arduino/ESP libraries! Watchy has built-in WiFi and Bluetooth via the ESP32-PICO-D4 microcontroller, a 3-axis a
/mnt/data/projects/git/conversations/media/sqfmi-watchy-sqfmi-105350-40353409204419-C0D8D.jpg


[12/30/2023 2:35 PM] szybet
there are many resellers of those


[12/30/2023 2:35 PM] szybet
this one is a scam


[12/30/2023 2:35 PM] szybet
just look for others


[12/30/2023 2:36 PM] szybet
HUH


[12/30/2023 2:37 PM] szybet
is there a library to do this?


[12/30/2023 2:37 PM] kuratius
I assume android has one


[12/30/2023 2:37 PM] kuratius
idk if Linux has


[12/30/2023 2:37 PM] kuratius
but it explains why the steam deck keyboard feels like shit


[12/30/2023 2:38 PM] kuratius
partially


[12/30/2023 2:39 PM] szybet
¯\_(ツ)_/¯


[12/30/2023 2:41 PM] szybet
https://pl.aliexpress.com/item/1005005218333395.html
https://pl.aliexpress.com/item/1005005121728401.html
https://pl.aliexpress.com/item/1005006288201180.html
https://pl.aliexpress.com/item/1005006287664143.html


[12/30/2023 2:41 PM] szybet
there are many sellers


[12/30/2023 2:42 PM] kuratius
ali express search sucks balls, couldnt find them


[12/30/2023 2:42 PM] kuratius
thank you


[12/30/2023 2:43 PM] szybet
https://pl.aliexpress.com/w/wholesale-open-source-ewatch.html


[12/30/2023 2:43 PM] szybet
thats one way to find them


[12/30/2023 2:43 PM] szybet
e-watch


[12/30/2023 2:43 PM] szybet
epaper open source ewatch


[12/30/2023 2:43 PM] szybet
etc


[12/30/2023 2:44 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-197D8.png


[12/30/2023 2:44 PM] szybet
these are all the sellers as of a few months ago


[12/30/2023 2:44 PM] szybet
I already sended you a few more


[12/30/2023 2:45 PM] szybet
these cant be shipped without seller doing something like idk certification because of li po batteries?


[12/30/2023 2:45 PM] tux_linux
Maybe there are some on eBay


[12/30/2023 2:46 PM] szybet
doubt


[12/30/2023 2:47 PM] szybet
the original ones maybe, but those will be used and costier


[12/30/2023 3:11 PM] kuratius
bought one


[12/30/2023 3:11 PM] kuratius
now the only thing I am unsure about is whether I will


[12/30/2023 3:11 PM] kuratius
get a v1 or a v2


[12/30/2023 3:12 PM] kuratius
this is the one I bought https://pl.aliexpress.com/item/1005006288201180.html


[12/30/2023 3:13 PM] kuratius
do you know what the difference between v1 and v2 is?


[12/30/2023 3:24 PM] szybet
woah that was fast


[12/30/2023 3:24 PM] szybet
mainly a diffrent RTC and micro usb instead of usb c ( long story )


[12/30/2023 3:25 PM] kuratius
wait I can get usb c?


[12/30/2023 3:25 PM] szybet
tldr: a bit longer battery life with v2


[12/30/2023 3:25 PM] kuratius
the one I bought is micro usb I think


[12/30/2023 3:25 PM] kuratius
I can cancel it right?


[12/30/2023 3:25 PM] szybet
the v2 are micro usb to make them fit inside of official metal cases


[12/30/2023 3:25 PM] szybet
idk


[12/30/2023 3:25 PM] kuratius
ah


[12/30/2023 3:25 PM] szybet
v1 from ali were usb c


[12/30/2023 3:25 PM] szybet
and i needed to create and print a custom case for it


[12/30/2023 3:26 PM] kuratius
usb c sounds so much better


[12/30/2023 3:26 PM] kuratius
tbh


[12/30/2023 3:26 PM] szybet
yep


[12/30/2023 3:26 PM] szybet
but well


[12/30/2023 3:26 PM] szybet
¯\_(ツ)_/¯


[12/30/2023 3:26 PM] szybet
i ordered a v2 a month ago


[12/30/2023 3:26 PM] szybet
has not arrived yet


[12/30/2023 3:27 PM] kuratius
where would I look for the v1?


[12/30/2023 3:28 PM] szybet
they are depracated


[12/30/2023 3:28 PM] kuratius
aww


[12/30/2023 3:28 PM] szybet
maybe on ali a seller has an option to buy one from old stock


[12/30/2023 3:28 PM] szybet
or smth


[12/30/2023 3:28 PM] szybet
idk


[12/30/2023 3:28 PM] kuratius
then I guess I'll stick with my order


[12/30/2023 3:28 PM] szybet
micro usb is fine, you wont charge it every day, more like once a week


[12/30/2023 3:29 PM] szybet
and with my firmware every 20 days, calculated by chat gpt


[12/30/2023 3:29 PM] szybet
with my settings


[12/30/2023 3:29 PM] szybet
yea you can tinker ;p


[12/30/2023 3:29 PM] kuratius
also ali gave me random numbers as a name


[12/30/2023 3:30 PM] szybet
where


[12/30/2023 3:30 PM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/image-3407F.png


[12/30/2023 3:30 PM] kuratius
fuckers


[12/30/2023 3:30 PM] szybet
normal


[12/30/2023 3:31 PM] szybet
Well I'm my name because i gived them shipping info at registration


[12/30/2023 5:08 PM] szybet
@tux-linux im creating libera pay


[12/30/2023 5:08 PM] szybet
https://liberapay.com/about/teams


[12/30/2023 5:08 PM] szybet
¯\_(ツ)_/¯


[12/30/2023 5:22 PM] tux_linux
Why


[12/30/2023 5:22 PM] tux_linux
We have gh sponsors


[12/30/2023 5:27 PM] szybet
I will put libera in my other repos


[12/30/2023 5:27 PM] szybet
its easier than what i have seen in comparison to gh sponsors


[12/30/2023 5:27 PM] szybet
to setup and add


[12/30/2023 5:31 PM] tux_linux
I already had a liberapay account


[12/30/2023 5:31 PM] tux_linux
But whatever


[12/30/2023 5:32 PM] szybet
i mean if its an inkbox organisation then i could join


[12/30/2023 5:32 PM] szybet
for the inkbxo logo on my profile


[12/30/2023 5:48 PM] kuratius
@andi Do you know if pmOS has a library for this?


[12/30/2023 5:50 PM] kuratius
since it runs on phones with small screens like the pinePhone I imagine the probability that someone has thought about this before is pretty high


[12/30/2023 6:07 PM] szybet
the most popular linux onscreen keyboard is onboard


[12/30/2023 6:07 PM] szybet
its in python


[12/30/2023 6:07 PM] szybet
*oh no*


[12/30/2023 6:08 PM] szybet
well idk how you are good with code but i hope you will contribute to my project instead of creating your own


[12/30/2023 6:08 PM] tux_linux
Don't you remember when it ran on InkBox


[12/30/2023 6:08 PM] tux_linux
It was so slow


[12/30/2023 6:08 PM] szybet
yep, i know


[12/30/2023 6:09 PM] szybet
watchy exists for a few years and they still dont have proper bluetooth - phone support


[12/30/2023 6:09 PM] szybet
or configurable os on compile time


[12/30/2023 6:09 PM] tux_linux
Well, eReader support is cool


[12/30/2023 6:09 PM] szybet
or apps


[12/30/2023 6:09 PM] szybet
or weather


[12/30/2023 6:09 PM] tux_linux
Matchbox is better


[12/30/2023 6:10 PM] kuratius
displaying phone messages isnt implemented?


[12/30/2023 6:10 PM] szybet
for such a cool device it lacks so much as for software options


[12/30/2023 6:10 PM] szybet
nope, recently a guy implemented it but only for his firmware


[12/30/2023 6:10 PM] szybet
like couldnt he had done a library


[12/30/2023 6:10 PM] szybet
or a few basic functions


[12/30/2023 6:11 PM] szybet
ugh...


[12/30/2023 6:11 PM] szybet
its easy as fuck to implement something like that, there are ready android apps for this for other esp projects


[12/30/2023 8:19 PM] [matrix] tux-linux
Szybet: do you have ideas for inkbox that i could do now
something motivating
not refactoring functions.h
thanks


[12/30/2023 8:24 PM] matterbridge#2154
[matrix] tux-linux 
it's nice to know that inkbox is still better than some other open source projects


[12/30/2023 8:26 PM] szybet
Haha


[12/30/2023 8:26 PM] szybet
Idk


[12/30/2023 8:26 PM] szybet
Qdebug


[12/30/2023 8:26 PM] tux_linux
That's worse


[12/30/2023 8:26 PM] szybet
You could change the app chooser into how sanki displays sessions


[12/30/2023 8:26 PM] tux_linux
Picture?


[12/30/2023 8:27 PM] szybet
Squares next to each other


[12/30/2023 8:27 PM] szybet
should work 3 next to each other


[12/30/2023 8:27 PM] szybet
like icon and name


[12/30/2023 8:27 PM] szybet
It would be more touch firendly


[12/30/2023 8:27 PM] tux_linux
Like iPad layout


[12/30/2023 8:27 PM] szybet
gnome app choser


[12/30/2023 8:27 PM] szybet
the full screen one


[12/30/2023 8:28 PM] [matrix] tux-linux
yea


[12/30/2023 8:28 PM] [matrix] tux-linux
maybe


[12/30/2023 8:28 PM] [matrix] tux-linux
anything else?


[12/30/2023 8:28 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F6DDF.png


[12/30/2023 8:28 PM] szybet
something like that


[12/30/2023 8:28 PM] szybet
there is a ready layout class to copy and simple use from sanki


[12/30/2023 8:29 PM] szybet
implement dark mode via qt platform plugin


[12/30/2023 8:29 PM] szybet
i added that support


[12/30/2023 8:29 PM] szybet
may not work on all devices for now


[12/30/2023 8:29 PM] szybet
you could figure that out too


[12/30/2023 8:29 PM] [matrix] tux-linux
yes
i was thinking about a framework of ipd that calculates battery time remaining


[12/30/2023 8:29 PM] matterbridge#2154
[matrix] tux-linux 
in sanki?


[12/30/2023 8:29 PM] szybet
yep


[12/30/2023 8:29 PM] szybet
and in platform plugin


[12/30/2023 8:30 PM] szybet
nah, maybe no


[12/30/2023 8:30 PM] [matrix] tux-linux
hm ok


[12/30/2023 8:31 PM] [matrix] tux-linux
maybe add a calendar overlay if i click on the time in the home screen


[12/30/2023 8:31 PM] [matrix] tux-linux
maybe it would help for future frameworks with overlays


[12/30/2023 8:33 PM] szybet
overlay? qdialog?


[12/30/2023 8:33 PM] [matrix] tux-linux
kinda


[12/30/2023 8:33 PM] [matrix] tux-linux
but it scales and positions itself on the screen next to the widget that is clicked


[12/30/2023 8:33 PM] szybet
yea


[12/30/2023 8:33 PM] szybet
would be cool


[12/30/2023 8:33 PM] szybet
and scales itself before showing itself


[12/30/2023 8:33 PM] [matrix] tux-linux
i will see if its possible


[12/30/2023 8:33 PM] szybet
before show()


[12/30/2023 8:33 PM] szybet
before exec()


[12/30/2023 8:33 PM] szybet
it is


[12/30/2023 8:34 PM] [matrix] tux-linux
yes
i just dont know how well i will be able to handle scaling


[12/30/2023 8:34 PM] szybet
you just cant rely on any functions that "may" calculate something from the widget like width or available height - not possible


[12/30/2023 8:34 PM] [matrix] tux-linux
how many pixels to move it down, right


[12/30/2023 8:34 PM] [matrix] tux-linux
well, there is a function to put it directly on the widget or the last clicked spot


[12/30/2023 8:34 PM] szybet
make it adjustable via config file


[12/30/2023 8:34 PM] [matrix] tux-linux
(see highlight dialog)


[12/30/2023 8:35 PM] szybet
and the settings for it made dynamically


[12/30/2023 8:35 PM] matterbridge#2154
[matrix] tux-linux 
what would this have to do with a config file


[12/30/2023 8:35 PM] szybet
everyone can eassly modify that to their needs


[12/30/2023 8:36 PM] szybet
and it would scale well because you could also control default values


[12/30/2023 8:36 PM] szybet
¯\_(ツ)_/¯


[12/30/2023 10:24 PM] szybet
@tux-linux can i name myself co creator of inkbox


[12/30/2023 10:25 PM] szybet
second developer sounds too long


[12/30/2023 10:43 PM] [matrix] tux-linux
well, technically you are not co-creator


[12/30/2023 10:44 PM] [matrix] tux-linux
you came along ~1yr after i started the project


[12/30/2023 10:49 PM] szybet
i do know that


[12/30/2023 10:50 PM] szybet
the question is have i have done enough to write this down in a readme in my other project


[12/30/2023 10:50 PM] [matrix] tux-linux
yes
but writing co-creator is not technically true


[12/30/2023 10:51 PM] szybet
is there a better way to write it down then second developer


[12/30/2023 10:51 PM] [matrix] tux-linux
maybe one of the two principal maintainers of inkbox project


[12/30/2023 10:51 PM] szybet
this is worse than second developer


[12/30/2023 10:51 PM] [matrix] tux-linux
ik


[12/30/2023 10:51 PM] [matrix] tux-linux
but it sounds like you are more invested in it than 'second developer' imo


[12/30/2023 10:52 PM] [matrix] tux-linux
co-maintainer


[12/30/2023 10:52 PM] [matrix] tux-linux
is that better


[12/30/2023 10:52 PM] szybet
the diffrence between co-maintainer and contributor is too small


[12/30/2023 10:53 PM] [matrix] tux-linux
well it implies only two people


[12/30/2023 10:53 PM] szybet
no one will check that


[12/30/2023 10:54 PM] [matrix] tux-linux
second maintainer


[12/30/2023 10:54 PM] [matrix] tux-linux
idk


[12/30/2023 10:55 PM] [matrix] tux-linux
principal contributor of inkbox os project


[12/30/2023 10:55 PM] [matrix] tux-linux
probably worse


[12/30/2023 11:01 PM] szybet
i will stick to second developer


[12/30/2023 11:12 PM] [matrix] tux-linux
ok


[12/30/2023 11:17 PM] szybet
https://github.com/Szybet/InkWatchy

{Embed}
https://github.com/Szybet/InkWatchy
GitHub - Szybet/InkWatchy
Contribute to Szybet/InkWatchy development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/InkWatchy-29079


[12/30/2023 11:17 PM] szybet
look at the code features


[12/30/2023 11:18 PM] szybet
those are basic things to do...


[12/30/2023 11:18 PM] szybet
@Kuratius I still dont know if you code at all but when you get your watchy I hope you will contribute instead of writing your own ;p


[12/30/2023 11:25 PM] tux_linux
Glad I had some influence

{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20231230-172434-81260.png


[12/30/2023 11:25 PM] tux_linux
Looks great


[12/30/2023 11:42 PM] szybet
🥴


[12/30/2023 11:43 PM] szybet
i was using previously this_way_of_things_because_of_rust


[12/30/2023 11:43 PM] szybet
but_now_rust_is_weird_so_i_stick_to_camel_case


[12/30/2023 11:45 PM] tux_linux
Ok so you changed your mind about rust?


[12/30/2023 11:45 PM] tux_linux
notSureThatsCamelCase


[12/30/2023 11:47 PM] szybet
i only dont like that it forces diffrent naming syntax on diffrent things like class names need to be camelCase and variables mostly this_thing something like that


[12/30/2023 11:47 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-9B2F5.png


[12/30/2023 11:47 PM] szybet
but this still scares me


[12/30/2023 11:47 PM] tux_linux
Hmm ok


[12/30/2023 11:47 PM] kuratius
lately I've been doing math and gpu programming a lot


[12/30/2023 11:47 PM] kuratius
and C


[12/30/2023 11:47 PM] kuratius
for a lecture


[12/30/2023 11:48 PM] tux_linux
I am learning integration now


[12/30/2023 11:48 PM] tux_linux
I decided to start during holidays


[12/30/2023 11:48 PM] szybet
woah you are insane


[12/30/2023 11:48 PM] szybet
gpu programming

{Reactions}
😁 

[12/30/2023 11:48 PM] kuratius
openCl is basically C


[12/30/2023 11:49 PM] szybet
https://tenor.com/view/scared-spongebob-spongebob-meme-scared-face-bed-gif-10784861565647957595

{Embed}
https://tenor.com/view/scared-spongebob-spongebob-meme-scared-face-bed-gif-10784861565647957595
/mnt/data/projects/git/conversations/media/scared-spongebob-96AF9.png


[12/30/2023 11:49 PM] szybet
gpu programming


[12/30/2023 11:49 PM] szybet
https://tenor.com/view/squidward-squidward-tentacles-spongebob-look-around-awkward-gif-496727432057798195

{Embed}
https://tenor.com/view/squidward-squidward-tentacles-spongebob-look-around-awkward-gif-496727432057798195
/mnt/data/projects/git/conversations/media/squidward-squidward-tentacles-02FDD.png


[12/30/2023 11:49 PM] kuratius
it's not bad if you dont have to sychronize anything


[12/30/2023 11:50 PM] kuratius
I cant tell if you're being sarcastic or not


[12/30/2023 11:50 PM] tux_linux
Dealing with locked Kindle uboot is probably worse tho


[12/30/2023 11:50 PM] kuratius
I'm using gpus for parallel computation and not for graphics


[12/30/2023 11:51 PM] szybet
oh


[12/30/2023 11:51 PM] szybet
thats ok


[12/30/2023 11:51 PM] szybet
or dont?


[12/30/2023 11:52 PM] szybet
https://tenor.com/view/vsauce-i-dont-think-so-michael-stevens-confused-gif-16452841

{Embed}
https://tenor.com/view/vsauce-i-dont-think-so-michael-stevens-confused-gif-16452841
/mnt/data/projects/git/conversations/media/vsauce-i-dont-think-so-202EE.png


[12/30/2023 11:52 PM] tux_linux
What are you thinking about


[12/30/2023 11:52 PM] kuratius
you literally just write a function in C, test it, then rewrite so it changes its behavior based on the work item id, and plug it into the openCl code


[12/30/2023 11:52 PM] kuratius
done


[12/30/2023 11:53 PM] szybet
im just scared because there is only one company on this planet that developed gpu accelerated - computated charts and every other company uses it - tesla for example


[12/30/2023 11:53 PM] szybet
which means its hard as check to do that


[12/30/2023 11:53 PM] kuratius
wdym?


[12/30/2023 11:53 PM] szybet
this software from what i know is costly


[12/30/2023 11:53 PM] kuratius
cuda vs openCl?


[12/30/2023 11:54 PM] szybet
nope, gpu accelerated charts


[12/30/2023 11:54 PM] szybet
3d charts


[12/30/2023 11:54 PM] szybet
i dont know more


[12/30/2023 11:54 PM] szybet
just scared


[12/30/2023 11:54 PM] kuratius
are you sure?


[12/30/2023 11:54 PM] kuratius
pretty sure I've seen lots of gpu accelerated 3d viewers


[12/30/2023 11:54 PM] kuratius
almost every game engine is nothing but a fance gpu accelerated 3d viewer


[12/30/2023 11:55 PM] kuratius
the only thing that doesnt have gpu acceleration is things like matplotlib


[12/30/2023 11:55 PM] kuratius
and I think mathematica on some systems?


[12/30/2023 11:56 PM] kuratius
what software were you thinking of?


[12/30/2023 11:56 PM] szybet
for 70%


[12/30/2023 11:56 PM] szybet
cant remember, it was talked about on my IT practice that my school organised


[12/30/2023 11:56 PM] szybet
there i learned rust


[1/2/2024 5:03 AM] kuratius
have any of you written arm assembly before?


[1/2/2024 5:04 AM] kuratius
or used an assembly function?


[1/2/2024 5:05 AM] kuratius
I'm trying to compile an example project on the nds and the arm assembly finds the symbol but doesnt return the value I'm expecting


[1/2/2024 5:55 AM] tux_linux
Sadly, I haven't


[1/2/2024 5:56 AM] kuratius
I figured out the issue


[1/2/2024 5:56 AM] kuratius
was using C syntax in a C++ file


[1/2/2024 5:56 AM] tux_linux
Nice


[1/2/2024 5:56 AM] tux_linux
Weren't you writing assembly?


[1/2/2024 5:56 AM] kuratius
but now I'm stuck trying to figure out how to get the assembly function to run correctly


[1/2/2024 5:56 AM] tux_linux
Oh, assembly in c


[1/2/2024 5:57 AM] kuratius
assembly file being used in C

{Reactions}
👍 

[1/2/2024 5:57 AM] kuratius
basically just trying to use 1 function


[1/2/2024 5:57 AM] kuratius
maybe I have to save registers manually idk


[1/2/2024 5:57 AM] tux_linux
Good luck


[1/2/2024 5:58 AM] kuratius
trying to run these assembly functions on an nds emulator http://www.coranac.com/2009/07/sines/

{Embed}
cearn
http://www.coranac.com/2009/07/sines/
Another fast fixed-point sine approximation


[1/2/2024 6:00 AM] tux_linux
Totally out of my knowledge currently but I will probably understand later this year
At least when it comes to the math stuff


[1/2/2024 6:33 AM] szybet
Nickel menu depends on assembly something


[1/2/2024 6:33 AM] szybet
So the people who created it know a thing


[1/2/2024 6:33 AM] szybet
You could ask them


[1/2/2024 8:06 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-02D2D.png


[1/2/2024 8:06 PM] szybet
watchy server is something different


[1/2/2024 9:27 PM] kuratius
apparently gcc ignores calling convention if you dont tell it that a label is a function


[1/2/2024 9:27 PM] kuratius
and maybe there are also issues with switching between arm and thumb mode without it


[1/2/2024 9:35 PM] tux_linux
Nice


[1/3/2024 4:00 AM] tux_linux
https://github.com/SheepWizard/kobo-minesweeper
nice way to use python when something more efficient could have been chosen

{Embed}
https://github.com/SheepWizard/kobo-minesweeper
GitHub - SheepWizard/kobo-minesweeper
Contribute to SheepWizard/kobo-minesweeper development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-minesweeper-B7A78


[1/4/2024 6:32 AM] tux_linux
34$ you say?

{Attachments}
/mnt/data/projects/git/conversations/media/image-A93CD.png


[1/4/2024 6:33 AM] szybet
Usd


[1/4/2024 6:33 AM] szybet
Idk about canadian dollars


[1/4/2024 6:33 AM] szybet
It was 130 zł but kuratius bought from another store for 170 zl


[1/4/2024 6:33 AM] master_of_derp
even with that conversion, it still shouldnt be that way, cad is roughly 1.33x usd


[1/4/2024 6:34 AM] master_of_derp


{Attachments}
/mnt/data/projects/git/conversations/media/image-4D7DD.png


[1/4/2024 6:35 AM] tux_linux
well, more like around 46 cad then
maybe price went up


[1/4/2024 6:36 AM] szybet
Its 160 zl so not really


[1/4/2024 6:37 AM] szybet
Maybe shipping?


[1/4/2024 6:37 AM] master_of_derp
the whole point of it is that you can hack a set together on your own, its all open source. just have to be smart enough, also seems theres a tutorial.


[1/4/2024 6:37 AM] tux_linux
Idk
It didn't mention shipping


[1/4/2024 6:37 AM] tux_linux
And have time


[1/4/2024 6:37 AM] master_of_derp
true


[1/4/2024 6:37 AM] szybet
I use it already and have written a custom firmware for it, already


[1/4/2024 6:37 AM] szybet
I didnt had time


[1/4/2024 6:37 AM] tux_linux
Welp


[1/4/2024 6:38 AM] szybet
Now i have exams in a week


[1/4/2024 6:38 AM] szybet
🥴


[1/4/2024 6:38 AM] tux_linux
Sad


[1/4/2024 6:38 AM] master_of_derp
i have (highschool canadian grade 10) exams in a few weeks


[1/4/2024 6:38 AM] tux_linux
Why do you start so early (szybet)
I start back on the 22nd


[1/4/2024 6:38 AM] tux_linux
Cégep


[1/4/2024 6:39 AM] tux_linux
They don't seem to give you enough vacation time in Poland


[1/4/2024 6:40 AM] master_of_derp
just be glad hes not in south korea (or north ig but south is still a nightmare for school)

{Reactions}
🥴 

[1/4/2024 6:41 AM] master_of_derp
nvm south korea has alot of vacation time but its worse then any other country (4x higher suicide rate in young adults/teenagers , due to their intense schooling.)


[1/4/2024 6:42 AM] tux_linux
cegep is intense schooling
but probably that i havent seen worse


[1/4/2024 6:42 AM] tux_linux
i often cried in my science classes


[1/4/2024 6:42 AM] tux_linux
literally


[1/4/2024 6:42 AM] tux_linux
its that bad


[1/4/2024 6:44 AM] master_of_derp


{Attachments}
/mnt/data/projects/git/conversations/media/image-2FA71.png


[1/4/2024 6:44 AM] tux_linux
this was me


[1/4/2024 6:44 AM] master_of_derp
15 hours is baisically a rush eat and breaks for washroom and then sleep


[1/4/2024 6:44 AM] master_of_derp
thats it


[1/4/2024 6:44 AM] tux_linux
wake up at 5 am, study during commute, class from 8 am to 6 pm, study during commute, dinner, study till midnight


[1/4/2024 6:45 AM] master_of_derp
tip ill tell you right now


[1/4/2024 6:45 AM] master_of_derp
reguardless of your circumstance, lack of sleep will make your grade and overall health, worse


[1/4/2024 6:46 AM] tux_linux
yes, well depends on who you are talking about


[1/4/2024 6:46 AM] tux_linux
i was trying to get to bed at 11pm
sometimes i succeeded


[1/4/2024 6:46 AM] master_of_derp
unless you are part of the really small percentage that can get off on 5-6 hours of sleep naturally, which is REALLY RARE, you cant.


[1/4/2024 6:47 AM] master_of_derp
minimum of 7 and a half hours


[1/4/2024 6:47 AM] master_of_derp
its night and day


[1/4/2024 6:47 AM] master_of_derp
trust me


[1/4/2024 6:47 AM] master_of_derp
your grade will most likely improve if you do that, even if you study less


[1/4/2024 6:47 AM] tux_linux
it seems i survived

{Attachments}
/mnt/data/projects/git/conversations/media/image-0E704.png


[1/4/2024 6:48 AM] master_of_derp
give your brain to actually comprehend the information you learned


[1/4/2024 6:48 AM] tux_linux
yes, one of my goals for the second term is to actually have a life


[1/4/2024 6:48 AM] master_of_derp
ah yes


[1/4/2024 6:48 AM] master_of_derp
that does help


[1/4/2024 6:48 AM] master_of_derp
alot


[1/4/2024 6:48 AM] master_of_derp
i have a half life


[1/4/2024 6:48 AM] master_of_derp
pun not intended for once


[1/4/2024 6:49 AM] tux_linux
hehe


[1/4/2024 6:49 AM] tux_linux
well, good


[1/4/2024 6:49 AM] master_of_derp
i can barely figure out what that even says lol


[1/4/2024 6:49 AM] master_of_derp
alot of assuming


[1/4/2024 6:50 AM] tux_linux
in order:
- physics education
- math calc 1
- chemistry
- physics
- philosophy
- french
- english


[1/4/2024 6:50 AM] master_of_derp
HEY I GUESSED RIGHT


[1/4/2024 6:50 AM] tux_linux
well, then you are not that bad


[1/4/2024 6:51 AM] master_of_derp
alot of it was using english tho


[1/4/2024 6:51 AM] master_of_derp
and in school, french isnt as easy. i hate something called **verbs**


[1/4/2024 6:51 AM] master_of_derp
which happen


[1/4/2024 6:51 AM] master_of_derp
to be quite necessary


[1/4/2024 6:52 AM] tux_linux
did you learn 'accord des participes passés'?


[1/4/2024 6:52 AM] master_of_derp
my class learned, i didnt.


[1/4/2024 6:53 AM] tux_linux
'Les pommes que j'ai mangées'
but not
'J'ai mangée[sic, should be 'mangé'] des pommes'


[1/4/2024 6:53 AM] tux_linux
lmao


[1/4/2024 6:53 AM] master_of_derp
french keyboard?


[1/4/2024 6:53 AM] master_of_derp
well


[1/4/2024 6:53 AM] master_of_derp
english one


[1/4/2024 6:54 AM] tux_linux
the trick that works most of the time (*most* of the time) is that you have to make the verb agree with the noun only when the noun (or subject) is put before it


[1/4/2024 6:54 AM] master_of_derp
or maybe, i just know we learned participes passes


[1/4/2024 6:54 AM] master_of_derp
french is almost done with


[1/4/2024 6:54 AM] master_of_derp
and im so happy about it


[1/4/2024 6:55 AM] master_of_derp
only have 2-3 more weeks of it


[1/4/2024 6:55 AM] tux_linux
french is a great language


[1/4/2024 6:55 AM] master_of_derp
then its gone


[1/4/2024 6:55 AM] tux_linux
but yea
probably hard


[1/4/2024 6:55 AM] tux_linux
good luck


[1/4/2024 6:55 AM] master_of_derp
**thats debatable**


[1/4/2024 6:55 AM] master_of_derp
i prefer english, just due to its able to sound more casual, rather then sounding formal all the goddamn time


[1/4/2024 6:56 AM] master_of_derp
casual french still has the tone of formal to me


[1/4/2024 6:56 AM] master_of_derp
not the actual language


[1/4/2024 6:56 AM] tux_linux
ever heard about quebec's version of spoken french


[1/4/2024 6:56 AM] master_of_derp
just the sound of it


[1/4/2024 6:56 AM] master_of_derp
ive heard of it, being rough as shit


[1/4/2024 6:56 AM] master_of_derp
quebecois


[1/4/2024 6:56 AM] tux_linux
yes


[1/4/2024 6:57 AM] master_of_derp
im assuming i can swear here, no rules channel


[1/4/2024 6:57 AM] tux_linux
probably


[1/4/2024 6:57 AM] tux_linux
https://www.youtube.com/watch?v=BXnP8MuXmTo&
the best example i have in mind to introduce literally anybody to it is this

{Embed}
mikeboilard
https://www.youtube.com/watch?v=BXnP8MuXmTo
Slap Shot en répliques
Voici le film culte Slapshot en répliques. Reg, les Hanson, Maurice... Un peu d'humour pour se remémorer ce chef d'oeuvre de l'histoire du hockey!
/mnt/data/projects/git/conversations/media/hqdefault-A6AF8.jpg


[1/4/2024 6:59 AM] master_of_derp
WAIT


[1/4/2024 6:59 AM] master_of_derp
I CAN ACTUALLY HEAR THE WORDS


[1/4/2024 6:59 AM] tux_linux
achievement completed: understand quebecois


[1/4/2024 7:00 AM] tux_linux
at least partially i guess


[1/4/2024 7:01 AM] master_of_derp
its like:
france french: i can understand that was just a french sentence, but due to speaking too fast, i have no idea a single word you just said
quebecois french: all of the words are clearly said and now i can tell partly what your saying


[1/4/2024 7:01 AM] tux_linux
at least youre living in the right country


[1/4/2024 7:01 AM] master_of_derp
yep


[1/4/2024 7:01 AM] master_of_derp
except my teacher learned french in france


[1/4/2024 7:01 AM] master_of_derp
so


[1/4/2024 7:01 AM] master_of_derp
fuck


[1/4/2024 7:01 AM] tux_linux
hm


[1/4/2024 7:01 AM] tux_linux
probably not that helpful


[1/4/2024 7:01 AM] master_of_derp
yep, its **a pain in my ass**


[1/4/2024 7:02 AM] tux_linux
maybe you can listen to videos on radio-canada


[1/4/2024 7:02 AM] tux_linux
reportages


[1/4/2024 7:02 AM] tux_linux
subtitled


[1/4/2024 7:02 AM] tux_linux
probably


[1/4/2024 7:02 AM] master_of_derp
you see i dont like doing homework


[1/4/2024 7:02 AM] tux_linux
short


[1/4/2024 7:02 AM] master_of_derp
i just wanna pass french class and thats it


[1/4/2024 7:02 AM] tux_linux
once a day
you learn french and you learn whats going on around


[1/4/2024 7:02 AM] tux_linux
i understand


[1/4/2024 7:03 AM] master_of_derp
and im on the line of passing


[1/4/2024 7:03 AM] master_of_derp
so


[1/4/2024 7:03 AM] master_of_derp
aslong as a get a 51 or higher, im happy


[1/4/2024 7:03 AM] master_of_derp
if not


[1/4/2024 7:03 AM] master_of_derp
TIME FOR A NEW ELECTIVE IN SUMMER SCHOOL


[1/4/2024 7:03 AM] tux_linux
welp


[1/4/2024 7:04 AM] master_of_derp
(i was doing a program that forces you to take french in grade 10, 11, however i dropped out of it this year)

{Reactions}
👍 

[1/4/2024 7:04 AM] master_of_derp
it gives too little freedom


[1/4/2024 7:04 AM] master_of_derp
in ib grade 11, you dont pick your courses, your courses pick you


[1/4/2024 7:06 AM] master_of_derp
my french pronounciation is actually pretty decent compared to some of my class, just my knowledge is fucked


[1/4/2024 7:08 AM] master_of_derp
in grade 10 ib, you have to take a 2 maths (grade 10 and 11), one english, one science, one french, two electives, and one history


[1/4/2024 7:08 AM] master_of_derp
now thats pretty close to normal


[1/4/2024 7:08 AM] master_of_derp
normal is 1 math, one english, one science, one history, and rest are electives


[1/4/2024 7:08 AM] master_of_derp
in ib grade 11, every course is picked for you


[1/4/2024 7:08 AM] master_of_derp
same in 12


[1/4/2024 7:09 AM] master_of_derp
in grade 11 only have to do math and english then rest are electives.


[1/4/2024 7:09 AM] master_of_derp
grade 12 only english


[1/4/2024 7:10 AM] master_of_derp
however to get into a university you have to do 6 academic credits in grade 12. however some courses like photography and film studies are part of academic


[1/4/2024 7:10 AM] master_of_derp
and that is fun enough, much better then doing french or smth like that


[1/4/2024 12:16 PM] tux_linux
nice
seems very different from what we have here


[1/4/2024 9:37 PM] andi15701
about me and French, I had 5 year French in school, but not that much stayed in my head. Well, a language which did not seem useful at that time for me. Childhood memories were probably also a blocker, mostly having to eat strange things. So I think it can help a lot if you have a use for what you are learning

{Reactions}
👍 

[1/4/2024 9:38 PM] andi15701
probably also depends on what motivates you to learn


[1/4/2024 9:39 PM] master_of_derp
Im motivated on what i find interesting and or useful. Also if i can tinker with it its alot more fun.


[1/4/2024 9:40 PM] master_of_derp
French isnt useful in most cases to me, aslong as i can read basic french, i dont care about the rest of it


[1/4/2024 9:41 PM] andi15701
For IT things using things in a personal project often helped me to learn.


[1/4/2024 9:43 PM] andi15701
At the moment, I am often looking it maps how to deal with this issue:


[1/4/2024 9:43 PM] andi15701
https://www.dieharke.de/resizer/KrRjFGceR20UbE1dCKPxjKLAFEI=/596x335/filters:quality(70):format(webp)/cloudfront-eu-central-1.images.arcpublishing.com/madsack/YSXFRNKYJ5EYLDX52Z4O4DKZL4.jpg

{Embed}
https://www.dieharke.de/resizer/KrRjFGceR20UbE1dCKPxjKLAFEI=/596x335/filters:quality(70):format(webp)/cloudfront-eu-central-1.images.arcpublishing.com/madsack/YSXFRNKYJ5EYLDX52Z4O4DKZL4.jpg
/mnt/data/projects/git/conversations/media/YSXFRNKYJ5EYLDX52Z4O4DKZL4-C1342.jpg


[1/4/2024 9:43 PM] andi15701
well, I want to go out


[1/4/2024 9:43 PM] andi15701
but do not want to swim.... 😉


[1/4/2024 9:44 PM] andi15701
lots of closed roads


[1/4/2024 9:44 PM] master_of_derp
Best way is to just find someone that does know how to swim (and isnt horrible at teaching) and learn from them


[1/4/2024 9:44 PM] master_of_derp
Find shallow water and use that before


[1/4/2024 9:44 PM] master_of_derp
Anything deep


[1/4/2024 9:44 PM] master_of_derp
I know how to swim, but obviously i cant meet you in person


[1/4/2024 9:45 PM] master_of_derp
Ah


[1/4/2024 9:45 PM] andi15701
Flood


[1/4/2024 9:45 PM] master_of_derp
Well shit


[1/4/2024 9:45 PM] master_of_derp
Thats bad


[1/4/2024 9:51 PM] andi15701
So what might be like 7km in normal conditions now might be a lot more, sometimes 100km


[1/4/2024 9:51 PM] master_of_derp
Yeah


[1/4/2024 9:56 PM] andi15701
Well, now Covid is not that critical anymore, but you cannot easily visit everyone here...


[1/5/2024 5:29 AM] tux_linux
nice to see you around
how did the place get flooded


[1/5/2024 5:31 AM] tux_linux
i remember you saying you had an eink monitor of the current temperature of nearby river or smth like that


[1/5/2024 7:47 PM] andi15701
well, repeated heavy rain + some melting snow


[1/5/2024 7:48 PM] tux_linux
you weren't very lucky it seems


[1/5/2024 7:48 PM] andi15701
Practically the whole Novembec + December was with very unusual lot of rain


[1/5/2024 7:48 PM] tux_linux
here snow hasn't even come yet


[1/5/2024 7:48 PM] andi15701
well, at least I live some meters above the water

{Reactions}
👍 

[1/5/2024 7:49 PM] tux_linux
it stayed for a few days in mid-december and then it vanished
we're supposed to have some kind of storm this week-end


[1/5/2024 7:54 PM] andi15701
but some days, it really gets noisy here with all kinds of sirens yelling


[1/5/2024 7:56 PM] tux_linux
emergencies?


[1/5/2024 7:56 PM] andi15701
yes


[1/5/2024 7:56 PM] tux_linux
because of the flood?


[1/5/2024 7:56 PM] andi15701
stabilizing dykes and so on


[1/5/2024 7:56 PM] andi15701
yes


[1/5/2024 7:56 PM] tux_linux
oh


[1/5/2024 7:57 PM] tux_linux
we had some news here too that people were evacuated in north of quebec
also because of unstable dikes


[1/5/2024 7:57 PM] tux_linux
they fixed the issue before christmas iirc


[1/5/2024 8:08 PM] andi15701
well, last summer I was on one of the last trains passing a bridge in Norway which has been washed away by the flood.... so after me the deluge


[1/5/2024 8:17 PM] tux_linux
It must be a special feeling


[1/5/2024 9:57 PM] szybet
you live near hamburg, i was spending many vacations there when i was young

its raining there really often that i cant imagine it could even more often ;p


[1/7/2024 11:43 PM] tux_linux
@Szybet 
i just thought of something
maybe we could add a program that pings a server on inkbox side to know how many users use inkbox
maybe it could motivate us
of course, said users could decide not to send a ping too


[1/7/2024 11:46 PM] szybet
at this point "a random message to the creator" would be funnier


[1/7/2024 11:46 PM] szybet
yea we could


[1/7/2024 11:46 PM] tux_linux
maybe


[1/7/2024 11:47 PM] tux_linux
im just trying to decide where we would ask the user


[1/7/2024 11:47 PM] tux_linux
in oobe, user isnt connected to wifi yet


[1/7/2024 11:47 PM] szybet
in setup


[1/7/2024 11:47 PM] tux_linux
maybe it can be delayed


[1/7/2024 11:47 PM] szybet
oh


[1/7/2024 11:47 PM] szybet
after connecting to wifi


[1/7/2024 11:47 PM] tux_linux
also, i was thinking of buying clara 2e
good idea?


[1/7/2024 11:47 PM] szybet
first finish setting with qsettings


[1/7/2024 11:47 PM] szybet
then that


[1/7/2024 11:47 PM] szybet
first finish clara hd


[1/7/2024 11:47 PM] szybet
:(


[1/7/2024 11:47 PM] szybet
first finish xyz please


[1/7/2024 11:47 PM] tux_linux
cant really


[1/7/2024 11:48 PM] szybet
then dont start zyx please


[1/7/2024 11:50 PM] tux_linux
?


[1/7/2024 11:50 PM] tux_linux
i probably need @andi's help, at least for the slow speed of the eink screen


[1/7/2024 11:50 PM] tux_linux
it does work


[1/7/2024 11:50 PM] tux_linux
but its slower than on the mini
that gives you an idea i think


[1/8/2024 12:00 AM] szybet
finish current things


[1/8/2024 12:00 AM] szybet
you have a whole todo list


[1/8/2024 12:00 AM] szybet
i dont have time, exams in may


[1/8/2024 12:00 AM] szybet
https://tenor.com/view/the-office-michael-scott-turntables-tables-gif-5195238

{Embed}
https://tenor.com/view/the-office-michael-scott-turntables-tables-gif-5195238
/mnt/data/projects/git/conversations/media/the-office-michael-scott-32669.png


[1/8/2024 12:02 AM] tux_linux
We will see


[1/8/2024 5:02 AM] tux_linux
i bought libra 2
idk if i will start porting it right away
probably do some other things before


[1/8/2024 6:03 AM] master_of_derp
https://tenor.com/view/recursive-thumbs-up-gif-24006075

{Embed}
https://tenor.com/view/recursive-thumbs-up-gif-24006075
/mnt/data/projects/git/conversations/media/recursive-thumbs-up-49460.png


[1/8/2024 11:38 AM] kuratius
does it have an sd card?


[1/8/2024 1:27 PM] tux_linux
Yes


[1/8/2024 1:28 PM] kuratius
good, it's somewhat hard to find that out for some models via google


[1/8/2024 1:28 PM] kuratius
should make a wiki article with a table

{Reactions}
👍 

[1/8/2024 5:56 PM] tux_linux
@Szybet how is kernel loaded on nia


[1/8/2024 5:56 PM] tux_linux
unpartitioned space or boot partition?


[1/8/2024 5:59 PM] tux_linux
i think it's from unpartitioned space


[1/8/2024 5:59 PM] szybet
unpart space


[1/8/2024 6:00 PM] tux_linux
good


[1/8/2024 6:00 PM] tux_linux
i think i will release a beta clara image


[1/8/2024 6:00 PM] tux_linux
and post it on mobileread


[1/8/2024 6:00 PM] szybet
first make it work


[1/8/2024 6:00 PM] tux_linux
i said beta


[1/8/2024 6:00 PM] szybet
aaaaaaaaaaaaaaaaandi


[1/8/2024 6:00 PM] tux_linux
i will warn that it will be slow


[1/8/2024 6:01 PM] szybet
isint this more fbink + kernel issue?


[1/8/2024 6:01 PM] szybet
niluje and andi


[1/8/2024 6:01 PM] tux_linux
idk
it works enough to be usable


[1/8/2024 6:01 PM] szybet
please help?


[1/8/2024 6:01 PM] szybet
does everything work?


[1/8/2024 6:01 PM] szybet
ipd?


[1/8/2024 6:01 PM] szybet
wifi?


[1/8/2024 6:01 PM] tux_linux
yes


[1/8/2024 6:01 PM] tux_linux
iirc


[1/8/2024 6:01 PM] tux_linux
i think i need to fix some usbms thing but apart from that it seems fine


[1/8/2024 6:01 PM] szybet
fix that


[1/8/2024 6:02 PM] tux_linux
well yea, im also writing a recipe for imgtool to actually make an image


[1/8/2024 6:02 PM] szybet
docker


[1/8/2024 6:02 PM] szybet
use docker


[1/8/2024 6:02 PM] tux_linux
its not even in the script yet


[1/8/2024 6:02 PM] szybet
use docker


[1/8/2024 6:02 PM] tux_linux
i am not even there


[1/8/2024 6:03 PM] szybet
yea, use docker


[1/8/2024 6:03 PM] szybet
XD


[1/8/2024 6:03 PM] tux_linux
i need to write device specific stuff for it to even run


[1/8/2024 6:03 PM] szybet
fix kernel latest commit compiling


[1/8/2024 6:03 PM] tux_linux
?


[1/8/2024 6:03 PM] szybet
like compile init automatically


[1/8/2024 6:03 PM] tux_linux
?


[1/8/2024 6:03 PM] szybet
its always musl compiled anyway i think?


[1/8/2024 6:03 PM] tux_linux
it compiles it automatically


[1/8/2024 6:03 PM] szybet
you added it?


[1/8/2024 6:04 PM] szybet
did you changed the init link to http?


[1/8/2024 6:04 PM] tux_linux
hm


[1/8/2024 6:04 PM] tux_linux
maybe not


[1/8/2024 6:04 PM] szybet
yea


[1/8/2024 6:04 PM] szybet
do that


[1/8/2024 6:04 PM] tux_linux
hm yes


[1/8/2024 6:04 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/0340332208c0091caa0f5157c8a74159bb2b8f2b/scripts/build_kernel.sh#L51

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/0340332208c0091caa0f5157c8a74159bb2b8f2b/scripts/build_kernel.sh
kernel/scripts/build_kernel.sh at 0340332208c0091caa0f5157c8a74159b...
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-2FE48


[1/8/2024 6:04 PM] tux_linux
?


[1/8/2024 6:04 PM] tux_linux
oh


[1/8/2024 6:04 PM] tux_linux
no i didnt


[1/8/2024 6:04 PM] szybet
INIT_GCC


[1/8/2024 6:05 PM] tux_linux
yes


[1/8/2024 6:05 PM] szybet
set it automatically


[1/8/2024 6:05 PM] szybet
to musl


[1/8/2024 6:05 PM] tux_linux
to compiled binaries?


[1/8/2024 6:05 PM] szybet
no


[1/8/2024 6:05 PM] tux_linux
where


[1/8/2024 6:05 PM] szybet
just use musl aways for init


[1/8/2024 6:05 PM] szybet
in kernel script


[1/8/2024 6:05 PM] tux_linux
where is musl


[1/8/2024 6:05 PM] szybet
no additionall arguments


[1/8/2024 6:05 PM] szybet
in kernel


[1/8/2024 6:05 PM] tux_linux
what path will it point to


[1/8/2024 6:05 PM] tux_linux
it needs to be in the user's path?


[1/8/2024 6:05 PM] szybet
toolchain/muslsomething


[1/8/2024 6:06 PM] szybet
nope, can be relative


[1/8/2024 6:06 PM] tux_linux
ok
what if youre using arm64


[1/8/2024 6:06 PM] tux_linux
toolchain/musl something is amd64


[1/8/2024 6:06 PM] tux_linux
i have my musl toolchain in compiled binaries folder


[1/8/2024 6:06 PM] szybet
then make it dependent on the device


[1/8/2024 6:06 PM] szybet
yea its wrong


[1/8/2024 6:06 PM] szybet
make it that you can override it


[1/8/2024 6:06 PM] tux_linux
where is your musl toolchain


[1/8/2024 6:07 PM] szybet
toolchain in kernel repo


[1/8/2024 6:07 PM] tux_linux
i think i will just set it to `armv7l-linux-musleabihf-*` and let the user add it in their path beforehand


[1/8/2024 6:07 PM] szybet
make it work oob


[1/8/2024 6:07 PM] szybet
with an option to override


[1/8/2024 6:08 PM] tux_linux
ok


[1/8/2024 9:20 PM] tux_linux
nice how my clara has stayed at 12% firm for the last day even though it was plugged in


[1/8/2024 10:08 PM] andi15701
well, I think we should go the mtp road


[1/8/2024 10:08 PM] andi15701
at least when kernel supports


[1/8/2024 10:08 PM] tux_linux
it would be ideal


[1/8/2024 10:08 PM] tux_linux
but on 2.6 devices
probably not doable currently


[1/8/2024 10:08 PM] tux_linux
do you think you will have time to look into clara hd screen issue with qt soon?


[1/8/2024 10:09 PM] tux_linux
i will be publishing a beta image today or tomorrow


[1/8/2024 10:09 PM] andi15701
I think so


[1/8/2024 10:09 PM] tux_linux
thanks


[1/8/2024 10:10 PM] tux_linux
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/10306aaee751223f21251c9e2dc0f812a61da1a7

{Embed}
https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin/commit/10306aaee751223f21251c9e2dc0f812a61da1a7
Clara HD display fix until something faster is found · Kobo-InkBox/...
/mnt/data/projects/git/conversations/media/10306aaee751223f21251c9e2dc0f812a61da1a7-2D782


[1/8/2024 10:10 PM] tux_linux
probably helpful for you to know where i left it


[1/8/2024 10:12 PM] andi15701
well, I think you can enable it where supported


[1/8/2024 10:12 PM] andi15701
Afaik it is mostly userland issue


[1/8/2024 10:12 PM] tux_linux
ok, maybe i can change some configs


[1/8/2024 10:12 PM] tux_linux
it's already there in 2.6 kernels?


[1/8/2024 10:13 PM] andi15701
you need support for defining gadgets in userspace


[1/8/2024 10:13 PM] andi15701
usb gadgets


[1/8/2024 10:13 PM] tux_linux
configfs?


[1/8/2024 10:13 PM] andi15701
that is for configuration and would allow e.g. multiple functions at the same time


[1/8/2024 10:14 PM] andi15701
something like gadgetfs


[1/8/2024 10:14 PM] tux_linux
oh


[1/8/2024 10:14 PM] tux_linux
ok


[1/8/2024 10:14 PM] andi15701
configfs is for selecting the gadgets

{Reactions}
👍 

[1/8/2024 10:14 PM] andi15701
mtp = define a gadget and implementing it in userspace


[1/8/2024 10:15 PM] tux_linux
hm


[1/8/2024 10:15 PM] andi15701
there is support for such things long time ago


[1/8/2024 10:15 PM] andi15701
in kernel


[1/8/2024 10:15 PM] tux_linux
ok, encouraging


[1/8/2024 10:15 PM] andi15701
its name has changed a bit


[1/8/2024 10:17 PM] andi15701
config USB_GADGETFS
        tristate "Gadget Filesystem (EXPERIMENTAL)"
        depends on EXPERIMENTAL
        help
          This driver provides a filesystem based API that lets user mode
          programs implement a single-configuration USB device, including
          endpoint I/O and control requests that don't relate to enumeration.


[1/8/2024 10:18 PM] andi15701
in 3.0.35


[1/8/2024 10:18 PM] tux_linux
Ok, we have some devices on 3.0.35


[1/8/2024 10:18 PM] tux_linux
glo hd namely


[1/8/2024 10:18 PM] andi15701
you can still have mass storage as a fallback

{Reactions}
👍 

[1/8/2024 10:20 PM] andi15701
so if usb is plugged, check if mtp is initialized, if no, do the msd thing (dialog and so on)


[1/8/2024 10:20 PM] tux_linux
ok


[1/8/2024 10:20 PM] tux_linux
what do you mean with msd


[1/8/2024 10:20 PM] andi15701
mass storage device


[1/8/2024 10:21 PM] tux_linux
like 'do you want to connect' dialog?


[1/8/2024 10:21 PM] andi15701
yes

{Reactions}
👍 

[1/9/2024 2:49 PM] tux_linux
@Szybet 
UID of device
InkBox OS version
Device model
Rooted/not rooted kernel
Developer key


[1/9/2024 2:49 PM] tux_linux
things to send to server


[1/9/2024 2:49 PM] tux_linux
ok?


[1/9/2024 2:51 PM] szybet
what are you talking about


[1/9/2024 2:51 PM] tux_linux
telemetry


[1/9/2024 2:51 PM] tux_linux
we talked about it recently


[1/9/2024 2:51 PM] szybet
UID is overriten?


[1/9/2024 2:52 PM] tux_linux
what


[1/9/2024 2:52 PM] szybet
and a random message


[1/9/2024 2:52 PM] szybet
lets be silly


[1/9/2024 2:52 PM] szybet
its just a random number?


[1/9/2024 2:52 PM] tux_linux
ok
but more complicated to implement in gui


[1/9/2024 2:52 PM] tux_linux
256 chars letters and numbers


[1/9/2024 2:53 PM] szybet
no UID


[1/9/2024 2:53 PM] szybet
why would we want that?


[1/9/2024 2:53 PM] tux_linux
discriminate devices


[1/9/2024 2:53 PM] tux_linux
otherwise we might just get the same reports


[1/9/2024 2:53 PM] szybet
send it only once


[1/9/2024 2:53 PM] szybet
after a week of using the device


[1/9/2024 2:53 PM] szybet
lets say


[1/9/2024 2:53 PM] tux_linux
and if the setting is reset, it may send it again


[1/9/2024 2:53 PM] szybet
no, not really


[1/9/2024 2:54 PM] szybet
thats too much


[1/9/2024 2:54 PM] szybet
one time only


[1/9/2024 2:54 PM] szybet
or ask every 3 months


[1/9/2024 2:54 PM] szybet
and an easy option to disable the question


[1/9/2024 2:54 PM] tux_linux
no, i mean if someone resets the setting we will have duplicate reports


[1/9/2024 2:54 PM] szybet
well okay


[1/9/2024 2:55 PM] tux_linux
also, i will put it in inkbox bin because existing users probably wont see it if they update without reflashing the image


[1/9/2024 2:56 PM] szybet
what?


[1/9/2024 2:56 PM] szybet
how otherwise?


[1/9/2024 2:56 PM] tux_linux
not in oobe setup


[1/9/2024 2:56 PM] szybet
yea sure

{Reactions}
👍 

[1/9/2024 2:56 PM] szybet
make it only check those things when connecting to wifi


[1/9/2024 2:56 PM] szybet
connected to wifi


[1/9/2024 2:56 PM] tux_linux
yes


[1/9/2024 2:56 PM] szybet
and time delay as i said


[1/9/2024 2:56 PM] szybet
and setting


[1/9/2024 2:56 PM] szybet
implement qsetting before


[1/9/2024 2:56 PM] tux_linux
no


[1/9/2024 2:56 PM] tux_linux
i want to get clara image out


[1/9/2024 2:57 PM] szybet
otherwise you will need to redesign it


[1/9/2024 2:57 PM] szybet
ok whatever


[1/9/2024 2:58 PM] tux_linux
but we need a way to know since how much time inkbox was installed


[1/9/2024 2:58 PM] tux_linux
and this cant work for existing users


[1/9/2024 2:58 PM] tux_linux
maybe send a monthly ping instead?


[1/9/2024 3:02 PM] szybet
since first wifi connection and agreaing to that


[1/9/2024 3:02 PM] szybet
no


[1/9/2024 3:03 PM] tux_linux
ok


[1/9/2024 3:06 PM] szybet
first send a request to github raw file to check if we want this telemetry


[1/9/2024 3:06 PM] szybet
otherwise we can just ddos our server if more users get in


[1/9/2024 3:06 PM] szybet
or something wents wrong


[1/9/2024 3:07 PM] tux_linux
how
i dont understand


[1/9/2024 3:07 PM] szybet
check if a file on github says true


[1/9/2024 3:07 PM] szybet
if its not it indicates we dont want telemetry


[1/9/2024 3:07 PM] szybet
like if we lost the domain or the server


[1/9/2024 3:07 PM] tux_linux
ok


[1/9/2024 3:07 PM] tux_linux
where to put it


[1/9/2024 3:08 PM] tux_linux
new repo?


[1/9/2024 3:08 PM] szybet
yep


[1/9/2024 3:08 PM] szybet
also use qt / c++ for that


[1/9/2024 3:08 PM] szybet
no bash scripts


[1/9/2024 3:08 PM] tux_linux
will try


[1/9/2024 3:08 PM] tux_linux
it needs to get uid


[1/9/2024 3:08 PM] tux_linux
from dd


[1/9/2024 3:08 PM] szybet
only dd


[1/9/2024 3:08 PM] szybet
nothing more


[1/9/2024 3:08 PM] tux_linux
not reading mmc contents with c++ code
have had enough of that in init


[1/9/2024 3:09 PM] szybet
also you dont need shell for dd


[1/9/2024 3:09 PM] szybet
just launch pure dd


[1/9/2024 3:09 PM] tux_linux
sure


[1/9/2024 3:09 PM] tux_linux
i can send a json document from qt


[1/9/2024 3:09 PM] tux_linux
probably


[1/9/2024 3:09 PM] szybet
yes, json communication


[1/9/2024 3:09 PM] szybet
but first a handshake or smth


[1/9/2024 3:10 PM] tux_linux
testPing


[1/9/2024 3:10 PM] tux_linux
i check for internet


[1/9/2024 3:10 PM] szybet
check for the server too


[1/9/2024 3:10 PM] szybet
like ready for request


[1/9/2024 3:11 PM] tux_linux
i can add args to testping


[1/9/2024 3:11 PM] szybet
and the program on the server will ban requests from the same ip address if they are sended more reports than 1 day apart


[1/9/2024 3:11 PM] szybet
no, dont use ping for that


[1/9/2024 3:11 PM] szybet
proper communication


[1/9/2024 3:12 PM] tux_linux
well ok
i am extremely bad in anything web related


[1/9/2024 3:12 PM] tux_linux
i will try my best


[1/9/2024 3:12 PM] szybet
do it properly as i say


[1/9/2024 3:12 PM] tux_linux
i will try my best


[1/9/2024 3:12 PM] szybet
and use rust on the server side


[1/9/2024 3:12 PM] tux_linux
no


[1/9/2024 3:12 PM] szybet
then what


[1/9/2024 3:13 PM] tux_linux
node


[1/9/2024 3:13 PM] tux_linux
js


[1/9/2024 3:13 PM] tux_linux
i dont even know how to write code in rust


[1/9/2024 3:13 PM] szybet
on which server do you want to run it?


[1/9/2024 3:13 PM] tux_linux
with node its at least a bit more intuitive


[1/9/2024 3:13 PM] tux_linux
probably 23.163.0.39


[1/9/2024 3:13 PM] tux_linux
or maybe mine at home
but maybe not a good idea


[1/9/2024 3:13 PM] szybet
well the second one wont handle node


[1/9/2024 3:13 PM] szybet
nope, bad idea


[1/9/2024 3:13 PM] szybet
not with your internet speeds


[1/9/2024 3:13 PM] tux_linux
its sending bytes


[1/9/2024 3:14 PM] tux_linux
no problem with that


[1/9/2024 3:14 PM] szybet
node is heavy


[1/9/2024 3:14 PM] szybet
no matter what you do


[1/9/2024 3:14 PM] tux_linux
yea i know


[1/9/2024 3:14 PM] tux_linux
on 23.163.0.39 there is a debian vm


[1/9/2024 3:14 PM] tux_linux
should be reliable enough


[1/9/2024 3:17 PM] szybet
run it inside docker


[1/9/2024 3:17 PM] szybet
layer of protection


[1/9/2024 4:03 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/telemetry-A1593.png


[1/9/2024 4:21 PM] tux_linux
i will publish clara image without telemetry
this will take a long time to finish


[1/9/2024 4:23 PM] szybet
then do qsettingsd


[1/9/2024 6:17 PM] tux_linux
@NiLuJe , would you reword this or does it seem fine to you?
Thanks


[1/9/2024 6:26 PM] tux_linux
Started a thread.


[1/9/2024 6:30 PM] tux_linux
@andi I was just wondering, would it technically be possible to tinker with a Kobo to the point where we could send serial output via usb through some usb serial driver? That would be so awesome


[1/9/2024 6:42 PM] tux_linux
yay
clara image boots kernel


[1/9/2024 6:43 PM] kuratius
nice


[1/9/2024 6:46 PM] tux_linux
even goes to ui
i'm impressed


[1/9/2024 6:47 PM] tux_linux
it's always looking to fail


[1/9/2024 6:47 PM] tux_linux
of course it had to fail on the dpi setting part


[1/9/2024 6:47 PM] ninuje
We, *the* ... if you *would* allow.


[1/9/2024 6:47 PM] ninuje
Sounds roughly fine otherwise


[1/9/2024 6:48 PM] tux_linux
ok, thanks


[1/9/2024 6:48 PM] ninuje
We *would* be extremely


[1/9/2024 6:48 PM] kuratius
maybe device type and country could be interesting


[1/9/2024 6:48 PM] tux_linux
yeah


[1/9/2024 6:48 PM] tux_linux
country is probably too much


[1/9/2024 6:48 PM] tux_linux
we already plan to collect model number


[1/9/2024 6:48 PM] kuratius
well how do you know what translation to support?


[1/9/2024 6:49 PM] tux_linux
translations aren't on the roadmap yet


[1/9/2024 6:49 PM] kuratius
then maybe just transmit the language setting instead


[1/9/2024 6:49 PM] kuratius
country would be what I would use if I didnt know if I wanted to support different translations


[1/9/2024 6:49 PM] kuratius
so that I could know ahead of time


[1/9/2024 6:51 PM] tux_linux
Timezone?


[1/9/2024 6:51 PM] tux_linux
Maybe


[1/9/2024 6:52 PM] tux_linux
Also
Xorg on Clara
Wow

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20240109_1751056762-7075E.jpg


[1/9/2024 7:09 PM] tux_linux
InkBox programming on the go

{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20240109_180920376-4278D.jpg


[1/9/2024 7:46 PM] andi15701
I think even u-boot can be configured to register as usb serial


[1/9/2024 7:49 PM] tux_linux
Nice
So it's specific to uboot and not the soc?


[1/9/2024 7:50 PM] andi15701
well, the driver need to be there for the soc in u-boot


[1/9/2024 7:51 PM] andi15701
but if mass storage and fastboot are working, then why not...


[1/9/2024 7:51 PM] andi15701
probably such would interfere with fastboot/mass storage


[1/9/2024 7:52 PM] andi15701
have not tried it since a long time


[1/9/2024 7:53 PM] tux_linux
It would be nice to get it to work
Thanks for the insight


[1/9/2024 10:02 PM] tux_linux
@andi here is the beta clara hd image you can work with
https://www.mobileread.com/forums/showpost.php?p=4387514&postcount=102

{Embed}
https://www.mobileread.com/forums/showpost.php?p=4387514&postcount=102
MobileRead Forums - View Single Post -  InkBox: a new open-source O...
MobileRead - the resource for mobile geeks seeking information and advice for keeping their gadgets happy.


[1/10/2024 2:08 AM] tux_linux
anyone here who knows more about web development and nodejs (or rust) than me?
if you want to contribute to the project, this is your moment to shine 😉


[1/10/2024 6:10 PM] tux_linux
@andi do you know if there was some mainline kernel for libra 2 or not at all?


[1/10/2024 6:10 PM] tux_linux
thanks


[1/12/2024 9:05 AM] tux_linux
Some great memories
https://photos.app.goo.gl/dGVhEoGwUKHKxFjj7

{Embed}
https://photos.app.goo.gl/dGVhEoGwUKHKxFjj7
8 new items by Nicolas Mailloux
/mnt/data/projects/git/conversations/media/ABLVV86SSiKUAdxI6oUxf1-D8IA2aSeTuIdaKkDObo-A5FA2


[1/13/2024 10:34 PM] tux_linux
any idea why a qobject crashes when i execute a function inside it, but not when i launch qdebug inside its mainloop


[1/13/2024 10:40 PM] szybet
give me a code snippet


[1/13/2024 10:40 PM] szybet
i dont really know what are you talking about


[1/13/2024 10:41 PM] tux_linux
```
#include "telemetry.h"

telemetry::telemetry(QObject *parent)
    : QObject{parent}
{
    collectDeviceInformation();
}

QJsonObject collectDeviceInformation() {
    // ---------- Makes the program crash even if I run nothing inside of it ----------
    /*global::telemetry::collectedData::deviceUID = getUID();
    global::telemetry::collectedData::systemVersion = readFile("/opt/version").trimmed();
    global::telemetry::collectedData::device = global::deviceID.trimmed();
    if(checkconfig("/external_root/opt/root/rooted")) {
        global::telemetry::collectedData::deviceRooted = "true";
    }
    else {
        global::telemetry::collectedData::deviceRooted = "false";
    }
    if(checkconfig("/external_root/opt/developer/valid-key")) {
        global::telemetry::collectedData::developerKeyInstalled = "true";
    }
    else {
        global::telemetry::collectedData::developerKeyInstalled = "false";
    }*/
}

bool sendDeviceInformation(QJsonObject data) {
    qDebug() << data;
}

```


[1/13/2024 10:41 PM] tux_linux
header


[1/13/2024 10:41 PM] tux_linux
```
#ifndef TELEMETRY_H
#define TELEMETRY_H

#include <QObject>
#include "functions.h"

class telemetry : public QObject
{
    Q_OBJECT
public:
    explicit telemetry(QObject *parent = nullptr);

private:
    void test();
    QJsonObject collectDeviceInformation();
    bool sendDeviceInformation(QJsonObject data);

signals:
};

#endif // TELEMETRY_H
```


[1/13/2024 10:43 PM] szybet
you need to return something


[1/13/2024 10:44 PM] tux_linux
Maybe


[1/13/2024 10:44 PM] tux_linux
Will try
Was not finished writing it


[1/13/2024 10:44 PM] szybet
anyway,  why do you use again global values


[1/13/2024 10:45 PM] szybet
anyway, if you want to try what i was talking about you should return a reference to it


[1/13/2024 11:16 PM] tux_linux
well, i wont


[1/13/2024 11:16 PM] tux_linux
its a placeholder


[1/13/2024 11:21 PM] tux_linux
well it works thanks


[1/13/2024 11:22 PM] tux_linux
i didnt know that not returning something could crash a function


[1/13/2024 11:26 PM] szybet
if you mess up with memory things can go randomly


[1/13/2024 11:26 PM] szybet
so its best to do what the computer expects

{Reactions}
👍 

[1/14/2024 3:38 AM] kuratius
Well, if you never jump back the computer will just execute whatever comes after the function label, which is probably random garbage. Not necessarily a crash, but you know. The weird thing is more that your compiler didn't detect it. Not returning from a function with a return type should be a compiler error. I think for void type it automatically generates the epilogue and main() is special.

{Reactions}
👍 

[1/14/2024 3:40 AM] kuratius
Maybe it tried to return 0 as the address to the object being return, similar to how main returns 0.


[1/14/2024 3:40 AM] kuratius
You can check the assembly with -S I think


[1/14/2024 3:41 AM] kuratius
it should generate an assembly file with a label containing the function name.


[1/14/2024 3:41 AM] kuratius
You can check what it does and why it crashes.


[1/14/2024 3:43 AM] kuratius
if you don't put it, the compiler inserts return 0 at the end of main I think


[1/14/2024 3:44 AM] kuratius
https://stackoverflow.com/questions/4260048/c-function-defined-as-int-but-having-no-return-statement-in-the-body-still-compi

{Embed}
https://stackoverflow.com/questions/4260048/c-function-defined-as-int-but-having-no-return-statement-in-the-body-still-compi
C function defined as int but having no return statement in the bod...
Say you have a C code like this:
#include <stdio.h>

int main(){
    printf("Hello, world!\n");
    printf("%d\n", f());    
}

int f(){

}

It compiles fine with gcc, and...
/mnt/data/projects/git/conversations/media/apple-touch-icon%402-C50E4.png


[1/14/2024 3:44 AM] kuratius
Apparently it just reads the return register lol.


[1/14/2024 3:45 AM] kuratius
So in your case that was probably a pointer to some random thing in memory that it tried to interpret as an object I guess.


[1/14/2024 3:45 AM] kuratius
Wait are you compiling without -Wall?


[1/14/2024 3:46 AM] kuratius
That explains why you didn't get a warning


[1/14/2024 3:49 AM] kuratius
Also dont global variables  prevent the compiler from using simd in loops for example?


[1/14/2024 3:52 AM] kuratius
I'll send the example I was playing around with, sec


[1/14/2024 5:24 AM] kuratius
I cant reproduce it anymore, idk what I'm doing wrong


[1/14/2024 5:25 AM] kuratius


{Attachments}
/mnt/data/projects/git/conversations/media/cosftest-D4CBD.c


[1/14/2024 5:26 AM] kuratius
when I was playing around with this a week or two ago I had the issue that cos was slower by an order or two of magnitude if I returned a struct or used global variables instead of returning the value normally


[1/15/2024 5:58 AM] tux_linux
Thanks for the detailed explanation


[1/15/2024 5:58 AM] tux_linux
Yes, probably


[1/15/2024 8:54 PM] szybet
@tux-linux are you here? i have something to upload


[1/15/2024 8:54 PM] szybet
to yt


[1/15/2024 8:54 PM] szybet
its awesome


[1/15/2024 9:05 PM] tux_linux
Yes


[1/15/2024 9:06 PM] tux_linux
What is it


[1/15/2024 9:07 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/mirror_demo-27BD1.mp4


[1/15/2024 9:07 PM] szybet
they are desynced but whatever


[1/15/2024 9:08 PM] szybet
mainly look at the video playing on the left one


[1/15/2024 9:08 PM] szybet
yea and if you would upload it to yt quickly it would be cool


[1/15/2024 9:11 PM] tux_linux
ok what is the difference with an already existing vnc client


[1/15/2024 9:13 PM] szybet
this one works lol


[1/15/2024 9:13 PM] tux_linux
what do i name the video


[1/15/2024 9:14 PM] szybet
and im able to apply filters and thats why the video on the left looks so good


[1/15/2024 9:14 PM] szybet
custom vnc client test - dithering vs native grey for eink


[1/15/2024 9:15 PM] tux_linux
is it using vnc protocol


[1/15/2024 9:16 PM] szybet
it is super lazy and no


[1/15/2024 9:16 PM] szybet
i use the same rust lib as mirroring kobo screen to pc


[1/15/2024 9:17 PM] szybet
this could be 50% faster if I would use some proper data transfer and not creating files


[1/15/2024 9:17 PM] tux_linux
https://www.youtube.com/watch?v=Rzl7wBZpc2U

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=Rzl7wBZpc2U
@Szybet's screen mirroring application for InkBox
On the right: eInk screen without dithering
On the left: eInk screen with dithering
/mnt/data/projects/git/conversations/media/maxresdefault-9FB7F.jpg


[1/15/2024 9:17 PM] szybet
its even transfering png, not just pure bytes


[1/15/2024 9:17 PM] szybet
so its lazy, just a demo


[1/15/2024 9:17 PM] tux_linux
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA


[1/15/2024 9:17 PM] szybet
its already fast lol


[1/15/2024 9:17 PM] szybet
and its not like i cared


[1/15/2024 9:17 PM] tux_linux
why dont you use `nc`or something like that at worst


[1/15/2024 9:18 PM] szybet
i dont have time to do this properly

{Reactions}
👍 

[1/15/2024 9:21 PM] szybet
On the right: eInk screen without dithering
On the left: eInk screen with dithering


[1/15/2024 9:21 PM] szybet
you got it wrong ;p


[1/15/2024 9:22 PM] tux_linux
done


[1/15/2024 9:24 PM] tux_linux
https://github.com/everydayanchovies/eink-vnc
look at the video

{Embed}
https://github.com/everydayanchovies/eink-vnc
GitHub - everydayanchovies/eink-vnc
Contribute to everydayanchovies/eink-vnc development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/eink-vnc-71F50


[1/15/2024 9:25 PM] tux_linux
also, its written in rust
so you cant hate it


[1/15/2024 9:26 PM] szybet
add link to this repo
https://github.com/Szybet/kobo-screen-mirror-reverse

{Embed}
https://github.com/Szybet/kobo-screen-mirror-reverse
GitHub - Szybet/kobo-screen-mirror-reverse
Contribute to Szybet/kobo-screen-mirror-reverse development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-screen-mirror-reverse-3F578


[1/15/2024 9:26 PM] szybet
yea this is horrible


[1/15/2024 9:26 PM] szybet
tested it


[1/15/2024 9:26 PM] szybet
tryied to use it for 10h


[1/15/2024 9:26 PM] tux_linux
hm ok


[1/15/2024 9:26 PM] szybet
1. it only uses A2 so only black and white


[1/15/2024 9:27 PM] tux_linux
done


[1/15/2024 9:27 PM] szybet
2. It doesn't work with any vnc client - at all - random errors everywhere


[1/15/2024 9:27 PM] szybet
3. is not even fast


[1/15/2024 9:27 PM] tux_linux
its faster than yours though


[1/15/2024 9:27 PM] szybet
Mine is a code disaster


[1/15/2024 9:27 PM] szybet
his doesn't work


[1/15/2024 9:27 PM] tux_linux
did you use tightvnc server


[1/15/2024 9:28 PM] szybet
i used every single one


[1/15/2024 9:28 PM] tux_linux
he says it's the only one that works


[1/15/2024 9:28 PM] tux_linux
ok


[1/15/2024 9:28 PM] szybet
i recompiled it


[1/15/2024 9:28 PM] szybet
i compiled never and older version


[1/15/2024 9:28 PM] szybet
nothing


[1/15/2024 9:28 PM] szybet
if I wasn't able to run then who will?


[1/15/2024 9:28 PM] tux_linux
i have a libra2


[1/15/2024 9:29 PM] tux_linux
his device


[1/15/2024 9:29 PM] tux_linux
so


[1/15/2024 9:29 PM] tux_linux
i might try it


[1/15/2024 9:29 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A2771.png


[1/15/2024 9:29 PM] szybet
did it worked?


[1/15/2024 9:29 PM] szybet
it uses plato background so it should work on all devices


[1/15/2024 9:29 PM] szybet
so thats not the issue


[1/15/2024 9:29 PM] tux_linux
it was his fault


[1/15/2024 9:29 PM] szybet
the issue is vnc protocol fuckery


[1/15/2024 9:29 PM] tux_linux
he didnt reply


[1/15/2024 9:30 PM] tux_linux
no, look


[1/15/2024 9:30 PM] tux_linux
https://github.com/everydayanchovies/eink-vnc/blob/5b9a6a0a61c878ad11db5c83c06140bc84a9b95e/client/src/main.rs#L207

{Embed}
https://github.com/everydayanchovies/eink-vnc/blob/5b9a6a0a61c878ad11db5c83c06140bc84a9b95e/client/src/main.rs
eink-vnc/client/src/main.rs at 5b9a6a0a61c878ad11db5c83c06140bc84a9...
Contribute to everydayanchovies/eink-vnc development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/eink-vnc-71F50


[1/15/2024 9:31 PM] szybet
so he used plato structured but pulled out everything that made it good


[1/15/2024 9:31 PM] szybet
lol


[1/15/2024 9:31 PM] tux_linux
i guess


[1/17/2024 6:01 PM] tux_linux
btw, koreader worked on my touch n905c


[1/17/2024 6:01 PM] tux_linux
go figure out how


[1/17/2024 6:03 PM] tux_linux
whoa, pgaskin starred your repo


[1/17/2024 6:03 PM] tux_linux
it's a kobo guru if you didn't know


[1/17/2024 6:03 PM] szybet
i know


[1/18/2024 5:01 PM] kuratius
Apparently xxd can't generate arrays with a size larger than 2^32 btw


[1/18/2024 5:01 PM] kuratius
Even with the size_t fix xD


[1/18/2024 5:01 PM] tux_linux
oops


[1/18/2024 5:01 PM] tux_linux
maybe you should file an issue


[1/18/2024 5:02 PM] kuratius
Maybe


[1/18/2024 5:03 PM] kuratius
Easiest fix is probably letting the compiler figure out the array size


[1/18/2024 5:04 PM] kuratius
Thing is, if you are generating arrays that large, you are generating 4-5GB binaries


[1/18/2024 5:04 PM] kuratius
So you are kind of doing something wrong to be doing that


[1/18/2024 5:04 PM] tux_linux
hmm


[1/18/2024 5:04 PM] tux_linux
well, maybe in the far future it will become necessary


[1/18/2024 5:04 PM] tux_linux
idk


[1/18/2024 5:08 PM] szybet
That's 4Gb of data, 4294967296 bytes


[1/18/2024 5:08 PM] szybet
the esp32 has 4Mb of flash space.


[1/18/2024 5:08 PM] tux_linux
yea i was thinking about that too


[1/18/2024 5:21 PM] kuratius
4 GiB


[1/19/2024 6:56 PM] szybet
@tux-linux do you want that?
https://www.linen.dev/landing

{Embed}
https://www.linen.dev/landing
/mnt/data/projects/git/conversations/media/logo63448d11-cc57-4c35-8b16-5064ebae803c-77D63.png


[1/19/2024 6:56 PM] szybet
make this discord server google searchable


[1/19/2024 6:56 PM] szybet
here is too much knowledge to be lost


[1/19/2024 6:58 PM] tux_linux
hm


[1/19/2024 6:58 PM] tux_linux
not sure


[1/19/2024 6:59 PM] szybet
because


[1/19/2024 7:02 PM] tux_linux
Don't you think our personal info is collected enough already?


[1/19/2024 7:13 PM] tux_linux
Also, is it me or it only seems you can create a new server and not import an old one


[1/19/2024 7:16 PM] szybet
its about sharing knowledge here


[1/19/2024 7:16 PM] szybet
just imagine making this discord a open web forum


[1/19/2024 7:16 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-FE572.png


[1/19/2024 7:34 PM] kuratius
Maybe do it for specific threads at least


[1/19/2024 7:34 PM] kuratius
But not actually every channel


[1/19/2024 7:35 PM] kuratius
Or you can add a forum section to the discord


[1/19/2024 7:53 PM] szybet
my point is the knowledge that is already here


[1/19/2024 9:40 PM] kuratius
Anonymize users, strip files, then it probably isn't an issue to post things as one gigantic pseudo forum thread?


[1/19/2024 9:42 PM] szybet
no one is anonymous on discord


[1/19/2024 9:42 PM] szybet
+ its a public server


[1/19/2024 9:43 PM] szybet
i have already published on my github a few conversations from this server because knowledge


[1/19/2024 9:43 PM] kuratius
Degrees of privacy


[1/20/2024 6:47 PM] kuratius
@Szybet I think the dithered mode is slower because it is doing full rather than partial refreshes, not 100% sure why


[1/20/2024 6:47 PM] kuratius
It's not doing direct updates


[1/20/2024 6:48 PM] szybet
its slower because the conversion on my pc is slower ;p


[1/20/2024 6:48 PM] szybet
as i said, bad code


[1/20/2024 7:26 PM] kuratius
I can see black frames being inserted


[1/20/2024 7:29 PM] kuratius
With dithered mode you have to do more pixels at once, maybe that leads to it changing the update mode


[1/20/2024 7:31 PM] kuratius
Like, maybe they have a hardcoded "full refresh every X pixel updates"


[1/20/2024 7:31 PM] kuratius
It's a bit hard to compare properly because you didn't play the same video at the same time


[1/21/2024 12:23 AM] szybet
Comparing anything so closely doesnt makr sense because of bad code


[1/22/2024 12:34 AM] szybet
@tux-linux 
1. the matrix bot is down
2. why when making access for user apps to onboard they dont see other gui apps being mounted in there?


[1/22/2024 12:35 AM] tux_linux
1. Fixing it soon
2. Because it isn't bind mounting them and also because it would be way too much of a security risk


[1/22/2024 12:35 AM] szybet
but shouldn't it be already there?


[1/22/2024 12:36 AM] szybet
its bind mounting onboard where those things are already mounted


[1/22/2024 12:36 AM] tux_linux
You need mount --rbind for that


[1/22/2024 12:36 AM] tux_linux
recursive bind


[1/22/2024 12:36 AM] tux_linux
But we won't do that


[1/22/2024 12:36 AM] tux_linux
Why do you want it


[1/22/2024 12:38 AM] szybet
https://tenor.com/view/troll-face-evil-laugh-gif-23504328

{Embed}
https://tenor.com/view/troll-face-evil-laugh-gif-23504328
/mnt/data/projects/git/conversations/media/troll-face-evil-laugh-CAA42.png


[1/22/2024 12:38 AM] szybet
launching koreader from sanki


[1/22/2024 12:38 AM] tux_linux
.


[1/22/2024 12:38 AM] tux_linux
Ok?


[1/22/2024 12:38 AM] tux_linux
Probably bad


[1/22/2024 12:38 AM] szybet
how much is it a security risk


[1/22/2024 12:38 AM] szybet
we already have access to onboard


[1/22/2024 12:38 AM] szybet
to all the data


[1/22/2024 12:38 AM] szybet
at this point


[1/22/2024 12:39 AM] szybet
i wonder if this will be a infinite loop bind and something will go wrong


[1/22/2024 12:39 AM] tux_linux
Well, if an app does privilege escalation, it can modify the behavior of the apps it executes by bind mounting files to the app's files


[1/22/2024 12:39 AM] tux_linux
No


[1/22/2024 12:40 AM] tux_linux
Do `mount | wc -l`
You will understand


[1/22/2024 12:41 AM] szybet
its not privilege it's just, friendly communication


[1/22/2024 12:41 AM] tux_linux
I mean an exploit


[1/22/2024 12:41 AM] szybet
¯\_(ツ)_/¯


[1/22/2024 12:41 AM] szybet
kind of nonsense


[1/22/2024 12:41 AM] tux_linux
But actually


[1/22/2024 12:41 AM] tux_linux
We sign the apps


[1/22/2024 12:41 AM] tux_linux
So we have the power


[1/22/2024 12:41 AM] tux_linux
Go for it


[1/22/2024 12:41 AM] tux_linux
reqf


[1/22/2024 12:42 AM] szybet
feathernotes already ships their own rust paint because of that
no reason sanki ships with koreader duplicate


[1/22/2024 12:42 AM] tux_linux
Well, also try to update koreader each 6mo at least


[1/22/2024 12:42 AM] szybet
i dont care that much


[1/22/2024 12:42 AM] szybet
not now


[1/22/2024 12:43 AM] tux_linux
Our users do


[1/22/2024 12:43 AM] tux_linux
I do


[1/22/2024 12:43 AM] tux_linux
I tried to do it last week
It was not great
You should make a script


[1/22/2024 12:43 AM] tux_linux
Or something


[1/22/2024 12:45 AM] szybet
patching koreader to work with inkbox requires at least some lua understanding


[1/22/2024 12:45 AM] szybet
script will not work for newer versions


[1/22/2024 12:45 AM] szybet
a guide maybe


[1/22/2024 12:45 AM] szybet
in the future, maybe


[1/22/2024 12:46 AM] tux_linux
Well, lua stuff was not the problem
I had problems with launching stuff and env vars


[1/22/2024 12:46 AM] szybet
at this point we could kindly ask koreader to include inkbox as a device


[1/22/2024 12:46 AM] tux_linux
Yes


[1/22/2024 12:46 AM] szybet
i DOUBT they will do all the work


[1/22/2024 12:47 AM] tux_linux
It's not like we will require much changes in the future


[1/22/2024 12:47 AM] szybet
but i used existing modules of koreader, replaced the ones in kobo, some more hacking and it worked


[1/22/2024 12:47 AM] tux_linux
We manage everything


[1/22/2024 12:48 AM] tux_linux
We could submit a pr
That would be worthwhile


[1/22/2024 12:49 AM] tux_linux
I guess we have been around long enough for the os to be considered as sustainable


[1/22/2024 12:49 AM] szybet
koreader works oob launched from sanki


[1/22/2024 12:50 AM] tux_linux
Wdym


[1/22/2024 12:50 AM] szybet
can i just update it to rbind in rootfs repo?


[1/22/2024 12:50 AM] szybet
it just works


[1/22/2024 12:50 AM] tux_linux
Well, ok


[1/22/2024 12:50 AM] szybet
.


[1/22/2024 12:50 AM] tux_linux
Y


[1/22/2024 12:50 AM] szybet
🫡


[1/22/2024 4:56 PM] tux_linux
why did you use this if/else structure

{Attachments}
/mnt/data/projects/git/conversations/media/image-B3357.png


[1/22/2024 4:56 PM] tux_linux
just put `reqf_onboard_storage_access_extra` before `reqf_onboard_storage_access`
otherwise it's not consistent


[1/22/2024 5:01 PM] szybet
if reqf_onboard_storage_access_extra is used dont use reqf_onboard_storage_access at any cost


[1/22/2024 5:01 PM] szybet
because wrong things can happen


[1/22/2024 5:02 PM] tux_linux
hm


[1/22/2024 5:02 PM] tux_linux
ok


[1/22/2024 5:05 PM] kuratius
Why is there an expectation that it should retry mounting  if it failed once and why is there three ifs and two fis?


[1/22/2024 5:05 PM] tux_linux
because it's a git diff


[1/22/2024 5:05 PM] kuratius
Aaah


[1/30/2024 5:44 PM] szybet
hear me out


[1/30/2024 5:44 PM] szybet
could I just save a class ( mupdf class ) to a file and then load it back? in c++? to not load it every time


[1/30/2024 7:39 PM] tux_linux
Wdym


[1/30/2024 9:37 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/message-9F5D5.txt


[1/31/2024 3:53 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-A6DC9.png


[1/31/2024 3:53 PM] szybet
at this point just remote the digits


[1/31/2024 4:08 PM] tux_linux
Oh no


[1/31/2024 4:08 PM] tux_linux
What a mess


[2/3/2024 4:08 AM] tux_linux
test


[2/3/2024 4:11 AM] [matrix] tux-linux
test


[2/4/2024 8:00 PM] szybet
the stars alligned, I once again compile qt things for fun
```
sirius :: build/inkbox/qtwebengine » ../compiled-binaries/qt-bin/qt-linux-5.15.2-kobo/bin/qmake .

    glibc ................................ yes
```
huh


[2/4/2024 8:10 PM] tux_linux
how to lose both your evening and your mind at once


[2/4/2024 8:12 PM] szybet
as a hobby


[2/4/2024 8:13 PM] szybet
https://tenor.com/view/asuka-evangelion-neon-genesis-neon-genesis-evangelion-asuka-mom-gif-502759302481437660

{Embed}
https://tenor.com/view/asuka-evangelion-neon-genesis-neon-genesis-evangelion-asuka-mom-gif-502759302481437660
/mnt/data/projects/git/conversations/media/asuka-evangelion-10BC8.png


[2/4/2024 10:26 PM] szybet
version origin/5.10 of webengine reported that, but `nss` building system defeated me for now


[2/4/2024 10:57 PM] tux_linux
is it just me or discord is now more light-gray than gray


[2/5/2024 7:37 PM] szybet
nss has the worst build system i have ever seen


[2/5/2024 7:37 PM] szybet
i give up


[2/9/2024 2:08 AM] tux_linux
look here


[2/9/2024 2:08 AM] tux_linux
@rats


[2/9/2024 2:08 AM] tux_linux
so, not really a good choice from what I can gather


[2/9/2024 2:08 AM] .mouseless
well that sucks. do you know if there's anything better?


[2/9/2024 2:09 AM] tux_linux
you would be better off with a boox device for example, and an android vnc app


[2/9/2024 2:09 AM] .mouseless
makes sense. depending on how expensive it is i'll either get one of those, or settle for just SSHing into my computer lol


[2/9/2024 2:10 AM] tux_linux
for that case you can use iterm


[2/9/2024 2:10 AM] tux_linux
https://www.youtube.com/watch?v=7piH2415cnY

{Embed}
Nicolas Mailloux
https://www.youtube.com/watch?v=7piH2415cnY
InkBox OS user app: ITerm (sff) demo
ITerm or InkBox Terminal (originally sff), is a Qt-native app using libvterm for interacting with a tty, allowing an user to run shell commands on their device without the need of launching an X11 app which usually takes more time.

ITerm was ported from @jsbronder's sff and its source code is available there: https://github.com/Kobo-InkBox/sff
...
/mnt/data/projects/git/conversations/media/maxresdefault-1F179.jpg


[2/9/2024 2:10 AM] tux_linux
it is very good


[2/9/2024 2:11 AM] .mouseless
wow yeah, that looks great


[2/9/2024 2:11 AM] tux_linux
but you need an inkbox-compatible device


[2/9/2024 2:14 AM] .mouseless
i was thinking about getting the kobo libra 2, but from what i can tell it's not supported :( 

I'll make sure to check the list of supported devices before i buy anything, of course


[2/9/2024 2:14 AM] tux_linux
it's not


[2/9/2024 2:14 AM] tux_linux
kobo glo hd is probably your best bet


[2/9/2024 2:14 AM] tux_linux
best screen


[2/9/2024 2:14 AM] tux_linux
512 mb ram


[2/9/2024 2:14 AM] tux_linux
libra 1 is supported but it's dangerous to install inkbox on it


[2/9/2024 2:14 AM] tux_linux
since it has no internal sd card but rather a soldered mmc


[2/9/2024 2:17 AM] .mouseless
is the glo hd an older model? i can't find it for sale new where i live


[2/9/2024 2:18 AM] tux_linux
yes


[2/9/2024 2:18 AM] tux_linux
it's from 2015


[2/9/2024 2:18 AM] tux_linux
but it's still fast


[2/9/2024 2:18 AM] tux_linux
be sure not to buy the glo


[2/9/2024 2:18 AM] tux_linux
this one is older and has a lower resolution screen


[2/9/2024 2:18 AM] tux_linux
the glo hd is better


[2/9/2024 2:20 AM] .mouseless
there arent many on ebay, but i'll keep an eye out for one :)


[2/9/2024 2:20 AM] tux_linux
if you don't find it, the glo is also supported by inkbox


[2/9/2024 2:21 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-B34CD.png


[2/9/2024 2:21 AM] tux_linux
these are all the ones we support


[2/9/2024 2:24 AM] .mouseless
thanks for the list! i will look around and compare the specs/price/etc. i would like to get a bigger screen if possible, but I don't earn a lot of money lol. but i tested and i can make do with 7 inches, its just a bit annoying on some sites. like i had to make custom CSS for discord to make it fit better, stuff like that

{Reactions}
👍 

[2/9/2024 2:26 AM] tux_linux
on ebay there are some great deals sometimes


[2/9/2024 2:26 AM] tux_linux
but you can also check for local listings on fb marketplace maybe


[2/9/2024 2:26 AM] tux_linux
or kijiji if you live in canada


[2/9/2024 6:31 PM] szybet
has anyone here tinkered with CI/CD things? I'm thinking of creating a discord bot for creating components for InkBox


[2/9/2024 6:31 PM] szybet
like you ask it for newest rootfs and it gives you a download link


[2/9/2024 6:31 PM] szybet
or kernel for a device


[2/9/2024 6:31 PM] szybet
would allow to eassly update things


[2/9/2024 6:55 PM] tux_linux
not really
but it would be useful


[2/9/2024 6:55 PM] tux_linux
especially for people that want to upgrade but cant sign packages


[2/9/2024 6:55 PM] tux_linux
though it should be a bridged matrix-discord bot


[2/9/2024 7:00 PM] szybet
it will be automatically but


[2/9/2024 7:00 PM] szybet
only with access to trusted people


[2/9/2024 7:00 PM] szybet
for reasons you know i hope


[2/11/2024 10:35 PM] szybet
a german IP is downloading the whole mirror of inkbox


[2/11/2024 10:35 PM] szybet
w h y ?


[2/11/2024 10:35 PM] kuratius
I am innocent


[2/11/2024 10:36 PM] tux_linux
Hm ok


[2/11/2024 10:36 PM] szybet
you


[2/11/2024 10:36 PM] tux_linux
Internet Archive?


[2/11/2024 10:36 PM] szybet
i catched you


[2/11/2024 10:36 PM] szybet
go to #future now


[2/11/2024 10:36 PM] szybet
I think I would see their domain name then, not a random .de one which looks like a isp one


[2/11/2024 10:46 PM] szybet
wwwb-nomad809.us.archive.org


[2/11/2024 10:46 PM] szybet
new one, the same thing


[2/11/2024 10:46 PM] szybet
but this one, well


[2/11/2024 10:46 PM] szybet
they dont archive 2Gb files anyway, so whats the point?


[2/11/2024 10:47 PM] kuratius
inb4 tolino is planning to steal inkbox


[2/11/2024 10:47 PM] szybet
good


[2/11/2024 10:47 PM] szybet
their software is shit


[2/12/2024 4:58 AM] pgaskin
which ip, cause one just downloaded my entire mirror of Kobo firmware


[2/12/2024 4:59 AM] pgaskin
also a german ip


[2/12/2024 6:00 AM] szybet
Ip connect. De


[2/12/2024 6:00 AM] szybet
Something like that?


[2/12/2024 11:43 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20240212-234333_Firefox-647E6.png


[2/12/2024 11:45 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/8fls1m-0324A.jpg


[2/12/2024 11:46 PM] szybet
If someone doesnt answer him i will in my passive aggressive mode🥴


[2/12/2024 11:52 PM] tux_linux
you are the best at it


[2/13/2024 12:22 AM] tux_linux
.


[2/13/2024 12:22 AM] tux_linux
@PassiveAggressor


[2/13/2024 12:24 AM] passiveaggressor
So I take it nobody has actually ever tried using it apart from szybet and anchovy and elinkser on mobile reads


[2/13/2024 12:25 AM] passiveaggressor
And yet it has 139 stars


[2/13/2024 12:28 AM] passiveaggressor
Did szybet test in Jan 2024 or earlier? Since it was released in 2022


[2/13/2024 12:30 AM] tux_linux
i think in late 23


[2/13/2024 12:31 AM] passiveaggressor
Plan:find firmware dated 2022, test


[2/13/2024 12:34 AM] passiveaggressor
Kobo Libra 2 anchovy, DNSB? AND elinkser kobo Clara HD got it working in 2022


[2/13/2024 12:35 AM] tux_linux
Well, szybet has a nia


[2/13/2024 12:35 AM] tux_linux
so you know


[2/13/2024 12:35 AM] tux_linux
you have a nia too


[2/13/2024 12:35 AM] tux_linux
...


[2/13/2024 12:35 AM] tux_linux
maybe?
if stars are aligned?


[2/13/2024 12:38 AM] passiveaggressor
U mean it's unlikely I'll get it working, unless the stars are aligned


[2/13/2024 12:38 AM] passiveaggressor
Ha


[2/13/2024 12:38 AM] passiveaggressor
Ur right


[2/13/2024 12:38 AM] passiveaggressor
Maybe vnc itself has changed


[2/13/2024 2:48 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2ACEC.png


[2/13/2024 2:49 PM] szybet
firmware has nothing to do with it


[2/13/2024 2:49 PM] szybet
I looked through the code of it, no OS dependent code, just stripped down plato backend


[2/13/2024 2:52 PM] tux_linux
edit this asap or you will be banned


[2/13/2024 2:52 PM] tux_linux
i am serious


[2/13/2024 2:53 PM] tux_linux
please


[2/13/2024 2:53 PM] tux_linux
this is not passive agressive, it's agressive


[2/13/2024 2:53 PM] tux_linux
remove it


[2/13/2024 2:53 PM] tux_linux
delete


[2/13/2024 2:53 PM] tux_linux
please


[2/13/2024 2:53 PM] tux_linux
please


[2/13/2024 2:53 PM] tux_linux
please


[2/13/2024 2:53 PM] szybet
🥴


[2/13/2024 2:53 PM] szybet
ok


[2/13/2024 2:53 PM] tux_linux
thanks


[2/13/2024 2:54 PM] tux_linux
remove everything


[2/13/2024 2:54 PM] tux_linux
save


[2/13/2024 2:54 PM] tux_linux
then edit it again and write something else maybe


[2/13/2024 2:55 PM] szybet
why


[2/13/2024 2:59 PM] szybet
Btw this forum is slow as heck, from a month now


[2/13/2024 3:00 PM] tux_linux
so you don't get banned while you edit it


[2/13/2024 3:00 PM] tux_linux
also hopefully the guy hasnt read it


[2/13/2024 3:00 PM] szybet
Anyway, You think I care? The only valuable person on this forums is elinkser, no one else


[2/13/2024 3:00 PM] szybet
I hate this forum


[2/13/2024 3:00 PM] szybet
And now there are idiots there


[2/13/2024 3:00 PM] tux_linux
Well, whatever
But it may be useful in the future


[2/13/2024 3:00 PM] szybet
too


[2/13/2024 3:00 PM] tux_linux
just for sanki


[2/13/2024 3:01 PM] tux_linux
for example


[2/13/2024 3:01 PM] szybet
ah whatever


[2/13/2024 3:01 PM] szybet
the can find me at github


[2/13/2024 3:01 PM] szybet
this forums was abandoned by god, the creator and the rest of humanity


[2/13/2024 3:02 PM] tux_linux
sure, the guy's message was plainly dumb, but ideally i wouldn't want him to read this


[2/13/2024 3:02 PM] szybet
he can see the post history


[2/13/2024 3:02 PM] szybet
you think I care?


[2/13/2024 3:02 PM] tux_linux
if you edit it it will change


[2/13/2024 3:02 PM] tux_linux
and you cant see history of edits of another user


[2/13/2024 3:02 PM] tux_linux
only you


[2/13/2024 3:03 PM] szybet
there are 2 people on this world
stupid but wants to know more
stupid and ignorant


[2/13/2024 3:03 PM] szybet
nothing more nothing less


[2/13/2024 3:03 PM] szybet
sad ;p


[2/13/2024 6:33 PM] szybet
https://github.com/Szybet/fbink-sys

{Embed}
https://github.com/Szybet/fbink-sys
GitHub - Szybet/fbink-sys
Contribute to Szybet/fbink-sys development by creating an account on GitHub.


[2/13/2024 6:33 PM] szybet
look, inkbox init in rust beggins to form!


[2/13/2024 6:33 PM] szybet
making rust bindings to fbink was hell a bit


[2/13/2024 6:34 PM] szybet
but managable


[2/13/2024 6:34 PM] szybet
i doubt zig would do better


[2/13/2024 6:34 PM] szybet
if it would, prove me and create them ;p


[2/14/2024 7:26 PM] szybet
Started a thread.


[2/14/2024 7:42 PM] szybet
feel free to explain to me a few things


[2/14/2024 7:59 PM] szybet
init could be used to monitor the state of OS and intervene if that's needed


[2/14/2024 7:59 PM] szybet
eg, check if IPD is running and check if something is using the screen. If not, restart inkbox gui


[2/14/2024 8:00 PM] szybet
also monitor the battery


[2/14/2024 8:01 PM] szybet
We need a central thing that will manage other things


[2/14/2024 10:08 PM] szybet (pinned)
12k of lines in the linux kernel for making sound work on all the laptops for realtec

So our device specific code is not that bad
https://github.com/torvalds/linux/blob/master/sound/pci/hda/patch_realtek.c

{Embed}
https://github.com/torvalds/linux/blob/master/sound/pci/hda/patch_realtek.c
linux/sound/pci/hda/patch_realtek.c at master · torvalds/linux
Linux kernel source tree. Contribute to torvalds/linux development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/linux-FB6A4


[2/14/2024 10:08 PM] szybet
Pinned a message.


[2/14/2024 10:28 PM] passiveaggressor
Does the gui disappear when you fbi nk anything, if you click will it still register?


[2/14/2024 10:28 PM] tux_linux
?


[2/14/2024 10:29 PM] szybet
it will


[2/14/2024 10:29 PM] tux_linux
what does he mean


[2/14/2024 10:29 PM] passiveaggressor
If I fbink a black screen, if I click around will those blocks be registered on the previous gui


[2/14/2024 10:30 PM] szybet
they will


[2/14/2024 10:30 PM] tux_linux
yes
it's just blanking the screen


[2/14/2024 10:30 PM] passiveaggressor
Hmm


[2/14/2024 10:30 PM] passiveaggressor
I see


[2/14/2024 11:58 PM] [matrix] Angus (@angus.ainslie:t
Hi I have a Kobo Aura H20 and was wondering if I can help port inkbox to it ?


[2/15/2024 12:41 AM] [matrix] Angus (@angus.ainslie:t
It seems to run the same kernel as the 905b


[2/15/2024 12:42 AM] tux_linux
what is the model number


[2/15/2024 12:42 AM] tux_linux
hello btw


[2/15/2024 12:43 AM] [matrix] Angus (@angus.ainslie:t
Hi N250


[2/15/2024 12:45 AM] [matrix] tux-linux
Hm, we had a porting thread on discord for that model
The initial poster disappeared after a month and no progress was made


[2/15/2024 12:46 AM] [matrix] tux-linux
Usually we manage porting in discord
Because bridging discord threads to matrix is currently not doable afaik


[2/15/2024 12:46 AM] [matrix] Angus
ok I'll spin discord up


[2/15/2024 12:47 AM] [matrix] tux-linux
nice


[2/15/2024 6:55 PM] tux_linux
what

{Attachments}
/mnt/data/projects/git/conversations/media/image-3215C.png


[2/15/2024 6:58 PM] szybet
where is that asked?


[2/15/2024 6:58 PM] tux_linux
in the form


[2/15/2024 6:58 PM] szybet
ah


[2/15/2024 6:59 PM] szybet
whatever then


[2/15/2024 6:59 PM] szybet
how did he expect we reply?


[2/15/2024 6:59 PM] tux_linux
well, sometimes people are people


[2/15/2024 7:00 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/image-3135A.png


[2/15/2024 7:00 PM] tux_linux
another example of people being people


[2/15/2024 7:03 PM] szybet
🥴


[2/23/2024 9:26 AM] nick.tan_
Hi i'm trying to run the `emu` from github, but am stuck at trying to retrieve `ota_update` from http://23.163.0.39/bundles/inkbox/native/update/


[2/23/2024 9:26 AM] nick.tan_
unfortunately it seems like that file is unavailable.


[2/23/2024 9:27 AM] nick.tan_
does anyone know a mirror or how i can generate this file?


[2/23/2024 9:43 AM] szybet
Emu is trash


[2/23/2024 9:43 AM] szybet
Give up on it


[2/23/2024 9:43 AM] szybet
Like really trash, qemu fault


[2/24/2024 2:21 PM] szybet (pinned)
https://github.com/pigshell/qtbase maybe working qt5 vnc plugin

{Embed}
https://github.com/pigshell/qtbase
GitHub - pigshell/qtbase: VNC platform plugin for Qt 5
VNC platform plugin for Qt 5. Contribute to pigshell/qtbase development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/qtbase-ED065


[2/24/2024 2:21 PM] szybet
Pinned a message.


[2/24/2024 2:29 PM] szybet (pinned)
https://wiki.qt.io/Qt_Based_Games

{Embed}
https://wiki.qt.io/Qt_Based_Games
Qt Based Games


[2/24/2024 2:29 PM] szybet
Pinned a message.


[2/24/2024 2:35 PM] szybet
https://github.com/azrilrahim/qt-rfb-client

{Embed}
https://github.com/azrilrahim/qt-rfb-client
GitHub - azrilrahim/qt-rfb-client: rfb or vnc client that is 100% b...
rfb or vnc client that is 100% based on Qt Framework. All modules do not link to any external libraries. Suitable for cross platform compilation - azrilrahim/qt-rfb-client
/mnt/data/projects/git/conversations/media/qt-rfb-client-BC99B


[2/24/2024 5:15 PM] szybet
newest alpine mini rootfs works fine on kobo, inkbox


[2/24/2024 5:15 PM] szybet
¯\_(ツ)_/¯


[2/24/2024 5:16 PM] tux_linux
you are on nia


[2/24/2024 5:16 PM] tux_linux
you dont have a cursed kernel


[2/24/2024 5:53 PM] szybet
this was on the glo i have


[2/24/2024 5:54 PM] tux_linux
huh


[2/24/2024 5:54 PM] tux_linux
musl fixed itself?


[2/24/2024 5:54 PM] szybet
¯\_(ツ)_/¯


[2/24/2024 5:54 PM] tux_linux
you are on 2.6.35.3?


[2/24/2024 5:54 PM] szybet
im thinking of making xorg suck less


[2/24/2024 5:54 PM] szybet
idk, the tolino one


[2/24/2024 5:54 PM] tux_linux
check it


[2/24/2024 5:55 PM] tux_linux
at this point you can install chromium on glo


[2/24/2024 5:55 PM] szybet
i gived up because xdamage wouldnt compile and i dont have time for this


[2/24/2024 5:55 PM] szybet
https://github.com/bjesus/air/issues/5

{Embed}
https://github.com/bjesus/air/issues/5
description of the architecture of this program · Issue #5 · bjesus...
Hello I'm thinking of replacing the current xorg implementation on InkBox OS with this program. To do that I would need to know how this program works. Reading the lua code doesn't help me....
/mnt/data/projects/git/conversations/media/5-07F81


[2/24/2024 5:55 PM] szybet
thinking of this


[2/24/2024 6:02 PM] szybet
kobo:~# uname -a
Linux kobo 2.6.35.3-inkbox+ #1 PREEMPT Sun Aug 27 16:18:39 CEST 2023 armv7l GNU/Linux


[2/24/2024 6:02 PM] szybet
yea


[2/24/2024 6:02 PM] tux_linux
hm ok


[2/24/2024 6:03 PM] szybet
restructure xorg and make it less suck


[2/24/2024 6:03 PM] szybet
because not its a mess


[2/24/2024 6:08 PM] szybet
and inkbox build that work without compression of any packages


[2/28/2024 8:57 AM] szybet (pinned)
New redesign idea: every if else device dependent will call a device subclass which will do the thing there: everything in one place


[2/28/2024 8:57 AM] szybet
Pinned a message.


[2/28/2024 8:57 AM] szybet
Its better than making dome configs or smth


[2/28/2024 1:19 PM] tux_linux
What


[2/28/2024 2:31 PM] szybet
You create a generic class
And then subclases for every device


[2/28/2024 2:31 PM] szybet
If you ask him for icon size its just device->iconsize() for example


[2/28/2024 2:31 PM] szybet
The ifs are splitted through classes and files


[2/28/2024 2:32 PM] szybet
In fact there is just on if that creates the device object


[2/28/2024 3:12 PM] ansraer
^ this.
The goal is that to add a new port you just need to create a new object that inherits from `Device` and implement all the missing methods.


[2/28/2024 3:21 PM] szybet
This is something what andi was talking about but next level


[2/28/2024 5:41 PM] ansraer
Uhm, What exactly is the purpose of the uiScalingSlider in Settings? from what I can tell the value is written to .`config/09-dpi/config` and then never used again.


[2/28/2024 5:41 PM] tux_linux
It's messed up


[2/28/2024 5:41 PM] tux_linux
Supposed to be removed


[2/28/2024 5:42 PM] ansraer
Wait, I can just axe that from settings entirely?


[2/28/2024 5:42 PM] tux_linux
Yea


[2/28/2024 5:43 PM] tux_linux
It used to scale things for accessibility purposes
But that always ends up causing more problems


[2/28/2024 5:43 PM] tux_linux
In ui scaling


[2/28/2024 5:45 PM] ansraer
Its gone now


[2/28/2024 5:46 PM] ansraer
Is there a chart that details what actual ereaders the HW numbers correspond to?


[2/28/2024 7:30 PM] szybet
loop up todo


[2/28/2024 7:30 PM] szybet
there is in detail about the slider


[2/28/2024 7:30 PM] szybet
but yes, axe it out


[2/28/2024 7:30 PM] szybet
sadly i think not


[2/28/2024 7:30 PM] ansraer
nvm, found it on the wiki


[2/28/2024 7:31 PM] ansraer
Need to fix up functions.h  a bit (and oh boy, that gile gives me nightmares) and I should have a very basic first draft


[2/28/2024 7:31 PM] ansraer
276 edited files so far


[2/28/2024 8:24 PM] szybet
oh god hehe


[2/28/2024 8:24 PM] szybet
listennn functions.h should be converted to functions.cpp and use it as a proper header file - and all those variables should be just extern


[2/28/2024 8:25 PM] szybet
we are students, you are more knowledgable than us so you decide


[2/28/2024 8:25 PM] szybet
but we already know it's a mess


[2/28/2024 8:25 PM] szybet
@Ansraer


[2/28/2024 8:25 PM] ansraer
tbh functions.h shouldn't exist in the first place


[2/28/2024 8:25 PM] szybet
well, yes it should be object oriented


[2/28/2024 8:26 PM] szybet
if you figure out a proper way to share object references across... objects then do that
I have sawn other Qt programs and they use a linker class and inside of if the object in every class in private, which is a mess in my opinion


[2/28/2024 8:27 PM] szybet
rssguard to be the primary example


[2/28/2024 8:27 PM] ansraer
I started extracting some of the functionality into the new device.h
So it's a bit smaller but I really hope that future PRs can move even more stuff out of it


[2/28/2024 8:28 PM] szybet
yes that's too


[2/28/2024 8:28 PM] szybet
also from which branch do you do it?


[2/28/2024 8:28 PM] ansraer
Good news is that I managed to clean up all the device related if statements


[2/28/2024 8:28 PM] szybet
do you started from master or from toreader?


[2/28/2024 8:28 PM] ansraer
master


[2/28/2024 8:28 PM] ansraer
since toreader was quite out of date iirc


[2/28/2024 8:28 PM] szybet
because toreader is obviously getting merged some day
but if you do it first then its my problem hehe


[2/28/2024 8:28 PM] szybet
yea


[2/28/2024 8:29 PM] szybet
very cool


[2/28/2024 8:29 PM] szybet
you did it in the way i have done?


[2/28/2024 8:29 PM] ansraer
I also made sure that every classname was UpperCamelCase, since right now it is a mess.


[2/28/2024 8:29 PM] szybet
also cool


[2/28/2024 8:30 PM] szybet
https://github.com/Kobo-InkBox/ereaderdev-lib

{Embed}
https://github.com/Kobo-InkBox/ereaderdev-lib
GitHub - Kobo-InkBox/ereaderdev-lib: A library to use to interact w...
A library to use to interact with kobo hardware. Contribute to Kobo-InkBox/ereaderdev-lib development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/ereaderdev-lib-DB23E


[2/28/2024 8:30 PM] szybet
this lib is for things that could be used in other apps


[2/28/2024 8:30 PM] szybet
for now it manages brightness and device identyfication in a better way


[2/28/2024 8:30 PM] szybet
use it or not, your decission


[2/28/2024 8:31 PM] ansraer
I moved some functionality into the device class and introduced a new ScreenSize enum (SMALL, MEDIUM, LARGE, VERY_LARGE), so in the few cases when we need to have different UI depending on the device it is now far simpler and easier to read.


[2/28/2024 8:31 PM] szybet
oh and its maybe the place of all device info you have been looking for in devicedescriptor.cpp


[2/28/2024 8:32 PM] szybet
yea cool


[2/28/2024 8:43 PM] tux_linux
What


[2/28/2024 8:43 PM] szybet
WifiDialog


[2/28/2024 8:43 PM] szybet
QTextBrowser


[2/28/2024 8:43 PM] tux_linux
No


[2/28/2024 8:43 PM] szybet
yes


[2/28/2024 8:43 PM] szybet
rust forces it


[2/28/2024 8:44 PM] tux_linux
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines

{Embed}
https://inkbox.ddns.net/wiki/index.php?title=InkBox_project_code_contributing_guidelines
Index.php


[2/28/2024 8:44 PM] szybet
Qt uses it


[2/28/2024 8:44 PM] ansraer
It's the cpp standard


[2/28/2024 8:44 PM] szybet
all other Qt programs use it


[2/28/2024 8:44 PM] szybet
yea that too


[2/28/2024 8:44 PM] ansraer
and also what QT uses


[2/28/2024 8:44 PM] szybet
let me edit it ;P


[2/28/2024 8:44 PM] ansraer
plus, you were already using it for halrf your class names


[2/28/2024 8:46 PM] szybet
https://tenor.com/view/i-love-it-gif-18812641

{Embed}
https://tenor.com/view/i-love-it-gif-18812641
/mnt/data/projects/git/conversations/media/i-love-it-567FD.png


[2/28/2024 8:46 PM] tux_linux
Where


[2/28/2024 8:50 PM] tux_linux
Ok


[2/28/2024 8:52 PM] szybet
https://tenor.com/view/star-wars-yoda-agreed-we-are-agreed-we-agreed-gif-22136703

{Embed}
https://tenor.com/view/star-wars-yoda-agreed-we-are-agreed-we-agreed-gif-22136703
/mnt/data/projects/git/conversations/media/star-wars-yoda-098B3.png


[2/28/2024 8:52 PM] tux_linux
Do you have a device to test the changes you make?


[2/28/2024 8:53 PM] szybet
well, read the chat


[2/28/2024 8:53 PM] ansraer
Not yet


[2/28/2024 8:53 PM] tux_linux
I know


[2/28/2024 8:53 PM] szybet
he wants to port it to PC


[2/28/2024 8:53 PM] tux_linux
But nothing else?


[2/28/2024 8:53 PM] ansraer
Right now I am testing it on PC


[2/28/2024 8:53 PM] ansraer
I have a libra 2 that will arrive in two days


[2/28/2024 8:53 PM] tux_linux
You could make a proper emulator


[2/28/2024 8:53 PM] tux_linux
Well, current one works


[2/28/2024 8:53 PM] tux_linux
But janky


[2/28/2024 8:54 PM] szybet
even running the Qt binary natively is fine enough for 60% of things


[2/28/2024 8:54 PM] szybet
the other 40 is UI


[2/28/2024 8:54 PM] szybet
to make a proper emulator we would need to talk to niluje to make fbink work with a virtual framebuffer


[2/28/2024 11:31 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20240228-233133_Discord-58AD6.png


[2/28/2024 11:31 PM] szybet
🫡


[2/29/2024 11:44 AM] ansraer
uhm, which device is n249?


[2/29/2024 11:45 AM] ansraer
ah, clarahd


[2/29/2024 11:54 AM] szybet
Yep, porting threads have those names and the lib i sended has them described too


[2/29/2024 5:06 PM] ansraer
What is the point of cinematicBrightnessDelayMs? As far as I can tell we write to that but then never use it again


[2/29/2024 5:07 PM] tux_linux
Rate at which brightness is incremented/decremented by one degree


[2/29/2024 5:08 PM] ansraer
Is this used outside of the app itself?


[2/29/2024 5:21 PM] ansraer
Ok, opened a PR with what I have right now.


[2/29/2024 5:21 PM] ansraer
Have fun reviewing that behemoth of a PR. 😁


[2/29/2024 5:23 PM] tux_linux
yes


[2/29/2024 5:23 PM] tux_linux
thanks a lot
i will look into it soon™️


[2/29/2024 5:28 PM] ansraer
Tell me when you have a verdict
I have some future things I would like to work on, but there is no point in doing that now and risk having to rebase stuff.

{Reactions}
👍 

[2/29/2024 6:21 PM] szybet
IPD - Inkbox power daemon ( i think )


[2/29/2024 6:27 PM] szybet
awesome, first PR from someone else than me


[2/29/2024 6:51 PM] tux_linux
note: we should rather use inkboxOS, not inkOS

{Attachments}
/mnt/data/projects/git/conversations/media/image-F89D5.png


[2/29/2024 6:51 PM] tux_linux
@Szybet


[2/29/2024 6:51 PM] szybet
no


[2/29/2024 6:51 PM] szybet
i mean


[2/29/2024 6:51 PM] szybet
maybe


[2/29/2024 6:51 PM] szybet
send the email to the tatoo company


[2/29/2024 6:52 PM] tux_linux
yea


[2/29/2024 7:02 PM] szybet
Aaanyway:
@Ansraer don't stop yourself from coding because of merging the pull request, we don't have time currently to test it but it's awesome so consider it accepted and don't worry to code on top of it


[2/29/2024 7:05 PM] tux_linux
why is this empty

{Attachments}
/mnt/data/projects/git/conversations/media/image-D37F3.png


[2/29/2024 7:07 PM] szybet
because he knew that I will want to redesign it


[2/29/2024 7:07 PM] szybet
well no, but I plan too so just leave it


[2/29/2024 7:09 PM] tux_linux
a pr like this needs to work
the goal is not to push half working code and leave it there for months until you redesign that part


[2/29/2024 7:10 PM] ansraer
thats the default implementation


[2/29/2024 7:10 PM] ansraer
we only need this on some platforms


[2/29/2024 7:10 PM] ansraer
according to you code at least


[2/29/2024 7:10 PM] tux_linux
hm
so you moved it elsewhere?


[2/29/2024 7:10 PM] ansraer
no, check the child classes

{Reactions}
👍 

[2/29/2024 7:10 PM] szybet
its not a release, it's master


[2/29/2024 7:11 PM] tux_linux
still not cool to say 'hey! we can provide you the dev version, just be aware that usbms will not work'


[2/29/2024 7:11 PM] tux_linux
but then it seems usbms will work


[2/29/2024 7:11 PM] tux_linux
according to ansraer


[2/29/2024 7:11 PM] tux_linux
maybe its further down in the pr


[2/29/2024 7:11 PM] szybet
there is no such person


[2/29/2024 7:11 PM] tux_linux
so sorry for that part


[2/29/2024 7:11 PM] tux_linux
angus


[2/29/2024 7:11 PM] szybet
and we can always point it to a commit


[2/29/2024 7:12 PM] tux_linux
ok, then that makes sense, thanks


[2/29/2024 7:15 PM] angus9356
Huh ?


[2/29/2024 7:15 PM] tux_linux
no we were just saying that if you had to install a dev version on your aura h2o and usbms wouldn't work it wouldn't be great


[2/29/2024 7:16 PM] szybet
he is a kernel developer, he can change commits


[2/29/2024 7:16 PM] szybet
🦗


[2/29/2024 7:16 PM] tux_linux
?


[2/29/2024 7:16 PM] ansraer
My changes shouldn't break anything that wasn't broken before


[2/29/2024 7:16 PM] ansraer
Finctionaly the code should be pretty much identical


[2/29/2024 7:16 PM] ansraer
I just moved it around a bit


[2/29/2024 7:16 PM] tux_linux
It should just work oob?


[2/29/2024 7:16 PM] angus9356
I'd be fine with that as long as ethernet or acm worked and I could stop dicking around with QT libraries

{Reactions}
👍 

[2/29/2024 7:17 PM] ansraer
And those devices that don't implement loadUSBMassStorage didn't have any custom code for that before my commit


[2/29/2024 7:17 PM] szybet
there is a thing we use called git which allows us to roll back to a previous version


[2/29/2024 7:17 PM] tux_linux
yea
but what has this to do with kernel commits


[2/29/2024 7:17 PM] szybet
there was probably a default else { implementation, right?


[2/29/2024 7:17 PM] ansraer
no


[2/29/2024 7:17 PM] angus9356
If someone can point me at the dev isa's to load I can do that


[2/29/2024 7:17 PM] ansraer
there wasn't


[2/29/2024 7:17 PM] tux_linux
you'd need to compile it


[2/29/2024 7:17 PM] ansraer
So I left the default empty

{Reactions}
👍 

[2/29/2024 7:18 PM] szybet
ah... just stop defending the master branch like it would be a castle


[2/29/2024 7:18 PM] angus9356
Ok are there instructions for that ?


[2/29/2024 7:18 PM] tux_linux
hm
let szybet guide you


[2/29/2024 7:18 PM] tux_linux
;p


[2/29/2024 7:19 PM] szybet
you dont need to, you already have recent libs
i just provided you with an experimental plugin
I gived you directions on what needs to be done in the thread now


[2/29/2024 7:19 PM] szybet
https://discord.com/channels/809205711778480158/972252738362695710/1211901982454054972


[2/29/2024 7:20 PM] tux_linux
but i still dont see your point
this is inkbox repo, not kernel repo


[2/29/2024 7:20 PM] tux_linux
im curious
does it still show the same 250+ warnings when compiling


[2/29/2024 7:20 PM] szybet
nevermind, you dont understand me at all and there is no point in this conversation


[2/29/2024 7:21 PM] tux_linux
ok


[2/29/2024 7:21 PM] ansraer
Probably. I didn't bother looking into them.


[2/29/2024 7:21 PM] tux_linux
ok, np


[2/29/2024 7:21 PM] tux_linux
thanks for your work


[2/29/2024 7:21 PM] szybet
when functions.h will be gone half of them will be gone too


[2/29/2024 7:26 PM] ansraer
Just checked, looks like my changes cut the number of warnings in half


[2/29/2024 7:26 PM] ansraer
Wanna guess which file causes ALL the remaining warnings?


[2/29/2024 7:27 PM] szybet
functions.h


[2/29/2024 7:27 PM] szybet
🥳


[2/29/2024 7:27 PM] ansraer
🎉


[2/29/2024 7:27 PM] ansraer
Hmm, I guess I could get rid of at least some of them... will update the PR, be back in a moment


[2/29/2024 7:28 PM] szybet
get rid of functions.h, no reason for it to exist or patch it


[2/29/2024 7:28 PM] tux_linux
maybe also change inkOS to InkBoxOS for now


[2/29/2024 7:28 PM] szybet
send the email


[2/29/2024 7:28 PM] szybet
it will be the first email we will be happy if they ignore


[2/29/2024 7:33 PM] tux_linux
yea
im a bit scared to send it


[2/29/2024 7:34 PM] szybet
there are 3 outcomes


[2/29/2024 7:35 PM] szybet
1 they send a dmca and we arent prepared
2 they send a dmca if we dont change the name after they agreed we need too
3 they dont send it because we changed it already
~~4 they dont care~~


[2/29/2024 7:35 PM] tux_linux
5 they file a lawsuit against us


[2/29/2024 7:36 PM] szybet
thats not how that works


[2/29/2024 7:36 PM] szybet
lawsuits costs, its cheaper to ask daddy microsoft to just remove it


[2/29/2024 7:36 PM] tux_linux
yea, but anyway


[2/29/2024 7:36 PM] szybet
send it


[2/29/2024 7:36 PM] szybet
and make a backup of all repos


[2/29/2024 7:36 PM] szybet
im doing it too


[2/29/2024 7:37 PM] tux_linux
gitlab: exists


[2/29/2024 7:37 PM] szybet
gitlab requires a credit card on register


[2/29/2024 7:37 PM] tux_linux
not my instance


[2/29/2024 7:37 PM] szybet
and they once planned already to remove unused repos


[2/29/2024 7:37 PM] tux_linux
its a personal instance


[2/29/2024 7:37 PM] szybet
your instance is slow


[2/29/2024 7:37 PM] tux_linux
so what


[2/29/2024 7:37 PM] tux_linux
its a backup


[2/29/2024 7:37 PM] szybet
oh in this context


[2/29/2024 7:37 PM] szybet
yea


[3/5/2024 12:57 PM] szybet
Has anyone here hosted vscode over http


[3/5/2024 12:57 PM] szybet
Like vscode.dev but locally with a local terminal


[3/5/2024 12:57 PM] tux_linux
me


[3/5/2024 12:58 PM] tux_linux
code-server


[3/5/2024 1:02 PM] szybet
My point is opening regular vscode over http without installing the app and having a terminal too


[3/5/2024 3:45 PM] szybet
nicolas, you can have a readme for an organisation
https://github.com/Awesome-Watchy

{Embed}
https://github.com/Awesome-Watchy
Awesome-Watchy
Awesome-Watchy has one repository available. Follow their code on GitHub.
/mnt/data/projects/git/conversations/media/162332741-5F2FA

{Reactions}
👍 

[3/5/2024 9:14 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2BFC9.png


[3/5/2024 9:15 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/dragon-protecting-its-treasure-hoard-fanta-3F270.png


[3/5/2024 9:16 PM] szybet
Ok, it might me my fault this time?


[3/5/2024 9:17 PM] tux_linux
Idk


[3/5/2024 9:18 PM] tux_linux
I added you


[3/6/2024 11:46 AM] szybet
😭


[3/6/2024 11:46 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20240306_114521-12453.jpg


[3/6/2024 11:46 AM] szybet
This is just so bad


[3/6/2024 11:46 AM] szybet
I will remove this as it doesnt work anyway


[3/6/2024 3:00 PM] tux_linux
it makes clara work


[3/6/2024 3:00 PM] tux_linux
dont remove it


[3/6/2024 3:17 PM] szybet
It doesnt work, clara still had issues?


[3/6/2024 3:17 PM] szybet
i will implement it in another way


[3/6/2024 3:23 PM] tux_linux
it made it half work at least


[3/6/2024 3:37 PM] szybet
that's not a solution


[3/6/2024 3:38 PM] tux_linux
instead of making it print things over themselves, it made sure everything was fully refreshed before printing something else


[3/6/2024 3:39 PM] tux_linux
so, yes its a solution until someone else finds something better\


[3/6/2024 3:41 PM] szybet
no need for me to leave it then


[3/6/2024 3:42 PM] szybet
why doesnt wait for marker in fbink work?


[3/6/2024 3:44 PM] tux_linux
dont ask me


[3/6/2024 6:33 PM] [matrix] andi1
hmm, that code is from what? Again we should have some test sequences ready for such stuff so that can be used on top of any epd abstraction.


[3/6/2024 6:35 PM] [matrix] andi1
the full blown setup would be to have automated camera-based testing (or maybe just displaying QR codes), but yes that might be overkill, but you need always methods to narrow down issues


[3/6/2024 6:37 PM] szybet
that's too much effort for one device


[3/6/2024 6:37 PM] szybet
also nicolas doesnt have the resources and time to setup an automated ci cl or smth


[3/6/2024 6:38 PM] [matrix] andi1
I think it would be good for every device


[3/6/2024 6:38 PM] [matrix] andi1
having full-blown ci is of course hard to implement


[3/6/2024 6:39 PM] [matrix] andi1
but at least having *some* tests would be helpful here


[3/6/2024 6:47 PM] szybet
we dont even know what to test


[3/6/2024 7:14 PM] [matrix] andi1
well, draw something, send some ioctl to the fb, draw something again, send again some ioctl to the driver


[3/6/2024 7:14 PM] [matrix] andi1
just something linke that


[3/6/2024 7:22 PM] tux_linux
I think i will make something so that you can see my Clara with a camera and debug it remotely


[3/6/2024 7:23 PM] tux_linux
I have lost my energy for dealing with things like that


[3/6/2024 7:23 PM] [matrix] andi1
and that I can understand


[3/6/2024 7:23 PM] tux_linux
Should be ready by end of week


[3/6/2024 7:24 PM] tux_linux
Do you have an idea of what platform i could use or just remote ssh would be the only option


[3/6/2024 7:24 PM] tux_linux
I am trusting you very much🥴


[3/6/2024 7:25 PM] tux_linux
Maybe teamviewer mess?


[3/6/2024 7:28 PM] [matrix] andi1
I am a bit wondering how to split the debugging up efficiently, what is overall best when I am doing that and what not


[3/6/2024 7:29 PM] [matrix] tux-linux
You don't have to do it in only one time, the idea would be to have it available for you when you have time for it


[3/6/2024 7:29 PM] [matrix] tux-linux
And maybe szybet too


[3/6/2024 7:30 PM] [matrix] andi1
what is the status of your libra h2o?


[3/6/2024 7:31 PM] [matrix] tux-linux
Working


[3/6/2024 7:31 PM] [matrix] tux-linux
With some fastboot to get it to boot


[3/6/2024 7:32 PM] [matrix] andi1
hmm, with the drm driver, we had that pattern mess?


[3/6/2024 7:32 PM] [matrix] tux-linux
Yes


[3/6/2024 7:32 PM] [matrix] tux-linux
It was in 2022?


[3/6/2024 7:32 PM] [matrix] tux-linux
New year 2022


[3/6/2024 7:32 PM] [matrix] tux-linux
I think


[3/6/2024 7:32 PM] [matrix] andi1
maybe


[3/6/2024 8:20 PM] [matrix] andi1
regarding remote access, you can bind ssh keys to specific commands, maybe attaching a certain screen session


[3/6/2024 8:42 PM] [matrix] andi1
the point is whenever you debug something complex, you need some strategy to narrow the problem down


[3/6/2024 8:43 PM] [matrix] andi1
well, and it is totally fine that you do not want to do everything


[3/6/2024 8:49 PM] [matrix] andi1
and when I would seriously debug that issue, I probably would first add some debug printk to the ioctl stuff in the kernel


[3/6/2024 8:49 PM] [matrix] andi1
and probably then recreate the same sequence of ioctls in userspace


[3/6/2024 9:14 PM] [matrix] andi1
fix things and then retest


[3/6/2024 9:14 PM] [matrix] andi1
also with newer kernel


[3/6/2024 9:14 PM] [matrix] andi1
and anything else falling into my hands


[3/6/2024 9:20 PM] tux_linux
ok, you need that i flash some new kernel to make debugging for you easier afterwards?


[3/6/2024 9:20 PM] tux_linux
seems good


[3/9/2024 1:00 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-39B0F.png


[3/9/2024 1:01 PM] szybet
https://tenor.com/view/stupidme-whyi-why-you-hurt-gif-26181664

{Embed}
https://tenor.com/view/stupidme-whyi-why-you-hurt-gif-26181664
/mnt/data/projects/git/conversations/media/stupidme-whyi-52AAA.png


[3/9/2024 2:55 PM] tux_linux
Fix


[3/9/2024 3:48 PM] szybet
~~add me to all repos~~


[3/9/2024 3:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-F46A0.png


[3/9/2024 3:49 PM] szybet
i mean that will work probably too


[3/9/2024 3:49 PM] szybet
```
 You have been made an owner of the "Kobo-InkBox" organization. Owners have full rights to the organization and have complete access to all repositories and teams. 
```


[3/9/2024 3:50 PM] szybet
https://tenor.com/view/anime-congratulations-evangelion-gif-24596040

{Embed}
https://tenor.com/view/anime-congratulations-evangelion-gif-24596040
/mnt/data/projects/git/conversations/media/anime-congratulations-D4E71.png


[3/12/2024 1:09 PM] szybet
Any reason we use 1MB block size for rootfs?


[3/12/2024 1:10 PM] szybet
I will go with 600K for some extra space


[3/12/2024 1:10 PM] tux_linux
Best compression


[3/12/2024 1:17 PM] szybet
Nope


[3/12/2024 1:17 PM] szybet
300K then


[3/12/2024 1:17 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20240312_131716-879ED.jpg


[3/12/2024 1:19 PM] tux_linux
Does it really take less space


[3/12/2024 1:22 PM] szybet
We need to balance speed / size


[3/12/2024 1:22 PM] szybet
i use a gui bundle with no compression and its a lot faster


[3/12/2024 1:33 PM] tux_linux
.


[3/12/2024 1:41 PM] szybet
I will do test


[3/12/2024 1:41 PM] szybet
Any reason we use xz?


[3/12/2024 1:41 PM] szybet
I want to test other ones too


[3/12/2024 1:48 PM] szybet
Also, any way from rootfs to get into initrd and from it run ssh?


[3/12/2024 1:48 PM] szybet
Ssh server to be exact


[3/12/2024 6:24 PM] tux_linux
Best compression


[3/12/2024 6:24 PM] tux_linux
What


[3/12/2024 6:25 PM] szybet
i want to get into initrd from rootfs


[3/12/2024 6:25 PM] szybet
chroot /initrd


[3/12/2024 6:25 PM] szybet
if it was that simple


[3/12/2024 6:25 PM] tux_linux
Noooo


[3/12/2024 6:25 PM] tux_linux
You can get into it with telnet


[3/12/2024 6:25 PM] tux_linux
INITRD_DEBUG


[3/12/2024 6:25 PM] szybet
any easier way?


[3/12/2024 6:25 PM] tux_linux
Flash


[3/12/2024 6:25 PM] tux_linux
Flag


[3/12/2024 6:26 PM] tux_linux
Not that I know of


[3/12/2024 6:26 PM] tux_linux
And initrd couldn't handle a dropbear binary
It has reached the size limit for some older devices


[3/12/2024 6:26 PM] tux_linux
Otherwise if it's too big kernel simply hangs on boot


[3/12/2024 6:27 PM] tux_linux
You could have reverse shell via fifo


[3/12/2024 6:27 PM] tux_linux
I guess


[3/12/2024 6:51 PM] szybet
i want a way of hot updating rootfs


[3/12/2024 6:51 PM] tux_linux
How


[3/12/2024 6:52 PM] tux_linux
Soft reboot?


[3/12/2024 6:54 PM] szybet
unmounting everything


[3/12/2024 6:54 PM] szybet
from p3


[3/12/2024 7:04 PM] szybet
https://github.com/Kobo-InkBox/inkbox/wiki/A-look-at-compression-algorithms-on-the-topic-of-InkBox-filesystems

{Embed}
https://github.com/Kobo-InkBox/inkbox/wiki/A-look-at-compression-algorithms-on-the-topic-of-InkBox-filesystems
A look at compression algorithms on the topic of InkBox filesystems
An open-source, Qt-based eBook reader for Kobos (and other devices). - Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-368DD


[3/12/2024 7:13 PM] tux_linux
well, thanks for the tests


[3/12/2024 7:13 PM] tux_linux
so basically a soft reboot


[3/12/2024 7:16 PM] szybet
obviously a reboot


[3/12/2024 7:17 PM] szybet
but to be done the upodate remotely


[3/12/2024 7:17 PM] tux_linux
i already transfer my rootfs via ssh


[3/12/2024 7:17 PM] tux_linux
dont you?


[3/12/2024 7:17 PM] szybet
its not reliable as the rootfs dies and you need to force reboot via button


[3/12/2024 7:17 PM] szybet
its not safe either


[3/12/2024 7:17 PM] tux_linux
you telnet to initrd


[3/12/2024 7:17 PM] tux_linux
then sync


[3/12/2024 7:17 PM] tux_linux
then reboot -f


[3/12/2024 7:18 PM] szybet
still nottrustable


[3/12/2024 7:20 PM] tux_linux
How InkBox update system does it:
step 1 https://github.com/Kobo-InkBox/rootfs/blob/05c1ee57c8a836090823ef687d842e2badea0fa4/etc/init.d/update.sh#L332-L350
step 2 https://github.com/Kobo-InkBox/rootfs/blob/05c1ee57c8a836090823ef687d842e2badea0fa4/etc/init.d/update_inkbox#L43-L45
step 3 https://github.com/Kobo-InkBox/rootfs/blob/05c1ee57c8a836090823ef687d842e2badea0fa4/sbin/prepare_shutdown#L49-L51
step 4 https://github.com/Kobo-InkBox/kernel/blob/31a9cd8e77ba4df582103d0a4858fca714f73398/initrd/common/initrd-fifo#L29-L40


[3/12/2024 7:34 PM] szybet
yes, it's in init


[3/12/2024 7:34 PM] szybet
that's what i know too


[3/12/2024 7:34 PM] szybet
and it doesn't help


[3/12/2024 7:34 PM] szybet
libfbink is going away, right?


[3/12/2024 7:34 PM] szybet
as we just use static builds


[3/12/2024 7:34 PM] szybet
because it's a mess anyway


[3/13/2024 2:26 PM] szybet
Is something somewhere doing something with libfbink?


[3/13/2024 2:27 PM] tux_linux
Qpa?


[3/13/2024 2:27 PM] szybet
Nope, qpa not


[3/13/2024 2:27 PM] szybet
Like you bind mounting it for kindle or smth


[3/13/2024 2:28 PM] tux_linux
Hmm, i think some binaries were dynamically compiled


[3/13/2024 2:28 PM] tux_linux
If you make all of them static maybe it's not needed anymore
But isn't ipd using it?


[3/13/2024 2:28 PM] szybet
I know that toi


[3/13/2024 2:28 PM] szybet
Well not anymore


[3/13/2024 2:28 PM] tux_linux
How then


[3/13/2024 2:28 PM] szybet
I dont think so


[3/13/2024 2:28 PM] szybet
Static builds


[3/13/2024 2:28 PM] tux_linux
Ipd?


[3/13/2024 2:29 PM] szybet
Idk


[3/13/2024 2:29 PM] tux_linux
There are a lot of fbink lib calls in ipd


[3/13/2024 2:29 PM] tux_linux
I think


[3/13/2024 2:29 PM] szybet
Initrd does have wget? I will just launch a rust http server


[3/13/2024 2:29 PM] tux_linux
What do you want to do


[3/13/2024 2:29 PM] szybet
Its static i think


[3/13/2024 2:29 PM] szybet
Update rootfs


[3/13/2024 2:29 PM] tux_linux
Also busybox has httpd


[3/13/2024 2:30 PM] tux_linux
Hmm?!


[3/13/2024 2:30 PM] szybet
Whatever


[3/13/2024 2:30 PM] szybet
Whatever i will look at it


[3/13/2024 2:30 PM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20240313-093040-456AA.png


[3/13/2024 2:33 PM] szybet
The code you are showing doesnt sat if its static or dynamic link


[3/13/2024 2:33 PM] szybet
Cmake config does


[3/13/2024 2:33 PM] tux_linux
Ok


[3/13/2024 2:33 PM] tux_linux
So what is it


[3/13/2024 2:33 PM] szybet
Probably dynamic


[3/13/2024 2:33 PM] szybet
How do you manage kindle to grab tge correct lib?


[3/13/2024 2:34 PM] tux_linux
I bind mount it


[3/13/2024 2:34 PM] tux_linux
So it's always looking for libfbink.so


[3/13/2024 2:34 PM] tux_linux
Only the file contents change


[3/13/2024 2:35 PM] szybet
WHEREEEEE


[3/13/2024 2:35 PM] tux_linux
In initrd ?


[3/13/2024 2:35 PM] szybet
I looked there and found nothing


[3/13/2024 2:36 PM] szybet
Probably in a script, huh?


[3/13/2024 2:36 PM] szybet
So irs in kernel repo


[3/13/2024 2:36 PM] tux_linux
https://github.com/Kobo-InkBox/kernel/blob/master/initrd%2Fcommon%2Foverlay-mount#L109-L116

{Embed}
https://github.com/Kobo-InkBox/kernel/blob/master/initrd%2Fcommon%2Foverlay-mount
kernel/initrd/common/overlay-mount at master · Kobo-InkBox/kernel
Kernel sources for InkBox OS. Contribute to Kobo-InkBox/kernel development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kernel-81DA0


[3/13/2024 2:55 PM] szybet
Yea that explains it


[3/14/2024 11:48 AM] szybet
@tux-linux is there just 1 device specific key per device?


[3/14/2024 11:48 AM] tux_linux
Yes


[3/14/2024 11:48 AM] szybet
Everything is signed with him?


[3/14/2024 11:49 AM] tux_linux
It


[3/14/2024 11:49 AM] szybet
Kernel, rootfs, gui bundle


[3/14/2024 11:49 AM] tux_linux
Yes


[3/14/2024 11:49 AM] szybet
Okay


[3/14/2024 11:49 AM] szybet
Im making great progress with scripts

{Reactions}
👍 

[3/14/2024 11:49 AM] tux_linux
Only userapps and kobox packages use common keys


[3/14/2024 11:49 AM] szybet
Ye i see

{Reactions}
👍 

[3/14/2024 7:49 PM] szybet
hmm


[3/14/2024 7:49 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-2242A.png


[3/14/2024 10:19 PM] tux_linux
What


[3/14/2024 10:43 PM] szybet
The arch specific thing


[3/14/2024 10:43 PM] szybet
doesnt do anything it seems after i tested it


[3/14/2024 10:44 PM] tux_linux
Then it's probably not important


[3/14/2024 10:44 PM] szybet
I hoped for a speed boost


[3/15/2024 10:01 PM] szybet
should this ftp something run?

{Attachments}
/mnt/data/projects/git/conversations/media/image-029BA.png


[3/15/2024 10:55 PM] tux_linux
Yes


[3/15/2024 10:55 PM] tux_linux
INITRD_DEBUG


[3/15/2024 11:18 PM] szybet
ftp is not described in the wiki


[3/15/2024 11:18 PM] szybet
i should add it probably


[3/15/2024 11:18 PM] tux_linux
Ok


[3/21/2024 11:01 AM] szybet
Use -older repos for now as i clean and split things up


[3/21/2024 11:14 AM] tux_linux
Why are you doing that


[3/21/2024 11:15 AM] szybet
In script as I manage and use toolchains from kernel repo, its stupid


[3/21/2024 11:15 AM] szybet
Its used everywhere


[3/21/2024 11:16 AM] szybet
And in rootfs and others we need to delete binaries because now they will be generated while creating


[3/21/2024 11:16 AM] szybet
20GB for all the things is stupid, it shouldnt weight that much


[3/21/2024 4:58 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-ED434.png


[3/21/2024 4:58 PM] szybet
github is drunk?


[3/21/2024 4:58 PM] tux_linux
Idk


[3/21/2024 4:59 PM] tux_linux
Just ensure inkbox can still build after your changes


[3/21/2024 4:59 PM] szybet
obviously


[3/22/2024 2:18 PM] szybet
I explored rust binary size once again


[3/22/2024 2:18 PM] szybet
They added so many things in a year


[3/22/2024 2:19 PM] szybet
Another 40% gone with possibly 10% to go too


[3/22/2024 7:48 PM] andi15701
what do one-button kobos with rohm pmic (nia c, clara2e, libra2) typically use for enabling fastboot?


[3/22/2024 7:50 PM] andi15701
btw, about clara2e: it also has a/b


[3/22/2024 7:53 PM] andi15701
a new pmic for the display


[3/22/2024 7:59 PM] andi15701
I am trying to convince the 2e to run a mainline kernel now. Esp. because of bluetooth security I want something recent and maintained there


[3/22/2024 8:19 PM] szybet
@tux-linux


[3/22/2024 8:20 PM] tux_linux
i dont know


[3/22/2024 8:20 PM] tux_linux
i didnt play around with fastboot with libra 2


[3/22/2024 10:02 PM] spagettioso
Hi, iIjust made a change to the wiki but i didnt realise there would be no review process (i assumed it would be like a PR) but it seems to have gone ahead and just applied it


[3/22/2024 10:03 PM] spagettioso
It was just some spelling fixes but if i had known it was gonna go ahead and add it I would have asked first


[3/22/2024 10:03 PM] spagettioso
https://github.com/Kobo-InkBox/inkbox/wiki/How-to-disassemble-the-device%3F
the page in question

{Embed}
https://github.com/Kobo-InkBox/inkbox/wiki/How-to-disassemble-the-device%3F
How to disassemble the device?
An open-source, Qt-based eBook reader for Kobos (and other devices). - Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-8CC43


[3/22/2024 10:21 PM] szybet
Yea looks good


[3/22/2024 10:21 PM] szybet
there is no review process, i just from time to time look at the changes to make sure everything is fine


[3/22/2024 10:24 PM] spagettioso
Ok cool


[3/23/2024 12:56 AM] spagettioso
I'm trying to run the inkbox emulator in order to attempt writing a program for inkbox, however upon running the bootstrap command it cannot find the  release.sh file.

The Log:
```
+ sudo git clone https://github.com/Kobo-InkBox/rootfs
Cloning into 'rootfs'...
remote: Enumerating objects: 15963, done.
remote: Counting objects: 100% (15963/15963), done.
remote: Compressing objects: 100% (10373/10373), done.
remote: Total 15963 (delta 4746), reused 15946 (delta 4740), pack-reused 0
Receiving objects: 100% (15963/15963), 137.13 MiB | 4.36 MiB/s, done.
Resolving deltas: 100% (4746/4746), done.
Updating files: 100% (9051/9051), done.
+ cd rootfs
+ sudo env GITDIR=/home/spagett/emu/out/rootfs ./release.sh
env: ‘./release.sh’: No such file or directory
+ sudo openssl dgst -sha256 -sign /home/spagett/emu/keys/private.pem -out rootfs.squashfs.dgst rootfs.squashfs
rootfs.squashfs: No such file or directory
40A70C11F97D0000:error:80000002:system library:file_ctrl:No such file or directory:crypto/bio/bss_file.c:297:calling fopen(rootfs.squashfs, r)
40A70C11F97D0000:error:10080002:BIO routines:file_ctrl:system lib:crypto/bio/bss_file.c:300:
```


[3/23/2024 12:56 AM] spagettioso
Im running artixlinux (arch linux but with openrc) and have all the dependencies mentioned in the github


[3/23/2024 12:58 AM] szybet
the emulator is not worth your effor of trying to run it


[3/23/2024 12:58 AM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/image-C1CF7.png


[3/23/2024 12:58 AM] szybet
its just so bad.


[3/23/2024 12:58 AM] spagettioso
thats unfortunate


[3/23/2024 12:58 AM] spagettioso
cause im on holiday till july and wont have my kobo glo to do stuff on till then


[3/23/2024 12:59 AM] szybet
and no way of getting it back?


[3/23/2024 12:59 AM] spagettioso
not from the other side of the planet :p


[3/23/2024 12:59 AM] szybet
actually yes, its possible


[3/23/2024 12:59 AM] spagettioso
from my understanding though i can write any program that targets the linux framebuffer though and that should work?


[3/23/2024 12:59 AM] spagettioso
well yeah i could ask someone to mail it ig


[3/23/2024 1:00 AM] szybet
I have a setup where I have a inkbox device connected via usbnet to a old laptop and on it code server so i can remotely develop inkbox things


[3/23/2024 1:00 AM] szybet
nope lol


[3/23/2024 1:00 AM] szybet
i mean maybe


[3/23/2024 1:00 AM] szybet
but nope


[3/23/2024 1:00 AM] spagettioso
ive been reading through this ive been reading up on https://github.com/Kobo-InkBox/inkbox/wiki/InkBox-GUI-user-apps

{Embed}
https://github.com/Kobo-InkBox/inkbox/wiki/InkBox-GUI-user-apps
InkBox GUI user apps
An open-source, Qt-based eBook reader for Kobos (and other devices). - Kobo-InkBox/inkbox
/mnt/data/projects/git/conversations/media/inkbox-8CC43


[3/23/2024 1:00 AM] szybet
yes and what do you want to write?


[3/23/2024 1:01 AM] spagettioso
well id start with a hello world box or something


[3/23/2024 1:01 AM] szybet
so you are not an experienced programmer?


[3/23/2024 1:02 AM] spagettioso
but i was thinking of a handwriten notes kinda thing, not sure if thats even feasible with my kobo glow's screen but i remember the stock firmware has a drawing program


[3/23/2024 1:02 AM] szybet
because you could write an emulator for fbink / partially inkbox to run qpa apps in it, natively on pc


[3/23/2024 1:02 AM] szybet
this already exists, kind of


[3/23/2024 1:03 AM] spagettioso
ive built a few things, one program ive made has around 10k downloads on github, i dont have any experience targeting framebuffers or low level stuff though


[3/23/2024 1:03 AM] szybet
well then you can do that ;p


[3/23/2024 1:04 AM] szybet
basically make a docker image in which you make https://github.com/Kobo-InkBox/qt5-kobo-platform-plugin to work, so it would need to compile for x86_64 create a framebuffer, configure fbink for it etc


[3/23/2024 1:04 AM] spagettioso
interesting


[3/23/2024 1:04 AM] szybet
https://www.youtube.com/watch?v=Uz1CcqDgtQU


[3/23/2024 1:04 AM] szybet
the sketch app is from plato and feathernotes is a qt app i ported


[3/23/2024 1:05 AM] szybet
combined you can store pngs in it, but no editing etc.


[3/23/2024 1:05 AM] spagettioso
thats cool


[3/23/2024 1:05 AM] szybet
idk if its worth for you to write such app, handwriting on such small screen with fingers is almost impossible without some serious zoom magic


[3/23/2024 1:06 AM] spagettioso
idk, i was thinking of experimenting with a stylus (one of the ones that simulate human touch since the screen obviously doesnt support those fancy active ones.) and seeing if that would be reasonable to take notes with


[3/23/2024 1:06 AM] spagettioso
may just be wishful thinking though :p


[3/23/2024 1:06 AM] szybet
the result would be acceptable at best


[3/23/2024 1:07 AM] szybet
you would be better of making a stylis tablet something to work with the glo


[3/23/2024 1:07 AM] szybet
but old kernel would probably kill that idea


[3/23/2024 1:07 AM] spagettioso
yeah


[3/23/2024 1:08 AM] szybet
¯\_(ツ)_/¯


[3/23/2024 1:09 AM] spagettioso
from what you are saying then i would need to use the fb-ink library not just any library targetting a linux framebuffer then?


[3/23/2024 1:09 AM] szybet
fbink is tied with qpa


[3/23/2024 1:09 AM] szybet
qpa enables us to run qt apps


[3/23/2024 1:09 AM] spagettioso
ah gotcha


[3/23/2024 1:10 AM] spagettioso
also i just found there are rust bindings for fbink


[3/23/2024 1:10 AM] szybet
quess who did them


[3/23/2024 1:10 AM] spagettioso
just saw the credit lol


[3/23/2024 1:10 AM] szybet
;p


[3/23/2024 1:10 AM] spagettioso
thats awesome, ive got a lot more experience with rust than c++


[3/23/2024 1:10 AM] szybet
yea idk what you want to do with them but probably not a good idea to use pure fbink


[3/23/2024 1:11 AM] spagettioso
aight


[3/23/2024 1:11 AM] szybet
let me graph it


[3/23/2024 1:14 AM] spagettioso
thank you so much for all this information btw


[3/23/2024 1:23 AM] szybet
np


[3/23/2024 1:23 AM] szybet
Pinned a message.


[3/23/2024 1:24 AM] szybet (pinned)
now, i forgot a line there

{Attachments}
/mnt/data/projects/git/conversations/media/image-AF7C1.png


[3/23/2024 1:24 AM] szybet
Pinned a message.


[3/23/2024 1:24 AM] spagettioso
lmao, thats beautiful, also very helpful


[3/23/2024 1:25 AM] spagettioso
man i wish i had the skills to make an egui backend


[3/23/2024 1:25 AM] szybet
yea


[3/23/2024 1:25 AM] spagettioso
the one "successful" program ive written is using egui


[3/23/2024 1:26 AM] szybet
my egui program broke because on wayland egui freezes the drawing task when screen is locked where i have put my logick to make things easier and faster for me to write


[3/23/2024 1:27 AM] spagettioso
yeah i had to do some really hacky workarounds to make my UI not freeze when downloading some stuff


[3/23/2024 1:27 AM] spagettioso
i probably should have sucked it up and multithreaded it properly


[3/23/2024 1:27 AM] spagettioso
but ive made it work somehow


[3/23/2024 1:30 AM] szybet
¯\_(ツ)_/¯


[3/23/2024 1:31 AM] szybet
this would trigger the hell of mobileread people ;p


[3/23/2024 1:32 AM] spagettioso
are they python fans or smth \;)


[3/23/2024 1:36 AM] szybet
idk if you will write the emulator I suggested or smth but I could ( maybe, with some *"precautions"* ) give you access to my setup and the kobo over ssh, there is even this simple app https://github.com/Szybet/kobo-screen-mirror which could give you access to the screen but no idea how would you view it inside of code-server as it's a egui app and you would have only access to vscode over a browser

{Embed}
https://github.com/Szybet/kobo-screen-mirror
GitHub - Szybet/kobo-screen-mirror: Mirror your kobo screen to PC, ...
Mirror your kobo screen to PC, on InkBox OS. Contribute to Szybet/kobo-screen-mirror development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/kobo-screen-mirror-D3950


[3/23/2024 1:36 AM] szybet
¯\_(ツ)_/¯


[3/23/2024 1:36 AM] szybet
july is a really long time


[3/23/2024 1:37 AM] spagettioso
In all honesty ive never written an emulator before, not sure id be able to. While I appreciate the potential offer I can wait haha


[3/23/2024 1:37 AM] szybet
🫡


[3/23/2024 1:37 AM] szybet
in theory it would be just compiling the things for the native arch and then a docker image which would create the framebuffer / some files with some linux commands and thats it? optimistic


[3/23/2024 1:38 AM] spagettioso
hmm


[3/23/2024 1:38 AM] spagettioso
perchance


[3/23/2024 2:11 AM] spagettioso
well, its not getting fbink-sys working but i could experiment with the bash and fbink binary option ;p

{Attachments}
/mnt/data/projects/git/conversations/media/file-B951C.png


[3/23/2024 2:26 AM] spagettioso


{Attachments}
/mnt/data/projects/git/conversations/media/file-5510A.png


[3/23/2024 2:26 AM] spagettioso
this could be fun


[3/23/2024 9:37 AM] andi15701
hmm, and that does not match to many things I am doing


[3/23/2024 9:37 AM] andi15701
and using


[3/23/2024 10:02 AM] andi15701
in general the big picture is: as long as you are not absolutely finetuning eink refreshes, you have some more options. As long as you are using some eink display with a drm driver (this includes some kobos, some spi eink displays to be used as rpi hats, the PineNote, ...) you get refresh handling for free.  It also depends what you are using you ebook reader for.  The nearer your use cases are to the standard ones, you will probably find something as an addon (or started as such) to the existing installation on the reader expecting an environment like the original software.  That will bring another set of limitations and advantages.


[3/23/2024 9:53 PM] andi15701
there are e.g. people which use their reader only to display some smart home related things


[3/23/2024 9:56 PM] szybet
buttons to those things are a cool thing


[3/23/2024 10:00 PM] andi15701
fastboot is also enabled by long press of power button on the 2e


[3/23/2024 10:01 PM] andi15701
but if you do not do anything with usb, it will trigger recovery mode, which will do a factory reset including the fat partition. *Without* *Questions*!


[3/24/2024 12:13 AM] spagettioso
I feel really dumb but i cant get fbink-sys to compile, maybe im doing it wrong? 

i downloaded it, did a `git submodule update --init`

downloaded `armv7l-linux-musleabihf-cross` from the musl website

updated paths in the build.rs from `/home/build/inkbox/kernel/toolchain/armv7l-linux-musleabihf-cross/bin` to `/home/spagett/armv7l-linux-musleabihf-cross/bin`


[3/24/2024 12:13 AM] spagettioso
installed the `armv7-unknown-linux-musleabihf` target via rustup


[3/24/2024 12:13 AM] spagettioso
added `/home/spagett/armv7l-linux-musleabihf-cross/bin` tp PATH


[3/24/2024 12:14 AM] spagettioso
tried to compile with `cargo build --target=armv7-unknown-linux-musleabihf`


[3/24/2024 12:15 AM] spagettioso
failes on line 77 of build.rs as no   `FBInk/Release/static/libfbink.a` was generated


[3/24/2024 12:15 AM] spagettioso
```
  fatal: No names found, cannot describe anything.
  cat: VERSION: No such file or directory
  make[1]: *** No rule to make target 'distclean'.  Stop.
  make: [Makefile:875: libunibreakclean] Error 2 (ignored)
  make[1]: *** No rule to make target 'distclean'.  Stop.
  make: [Makefile:887: libevdevclean] Error 2 (ignored)
  make: [Makefile:952: distclean] Error 1 (ignored)
  Makefile:105: Detected a musl TC: it *may* be built without linker plugins support, which are a hard dependency of the utils target!
  fatal: No names found, cannot describe anything.
  cat: VERSION: No such file or directory
  Makefile:105: Detected a musl TC: it *may* be built without linker plugins support, which are a hard dependency of the utils target!
  fatal: No names found, cannot describe anything.
  cat: VERSION: No such file or directory
  In file included from libunibreak/src/linebreakdata.c:6:
  libunibreak/src/linebreakdef.h:160:9: warning: padding struct to align ‘cLb30aRI’ [-Wpadded]
```
This seems to be the error


[3/24/2024 12:16 AM] spagettioso
and this is the whole output

{Attachments}
/mnt/data/projects/git/conversations/media/error-91450.txt


[3/24/2024 12:58 AM] szybet
nope thats fine


[3/24/2024 12:59 AM] szybet
also reads the readme


[3/24/2024 12:59 AM] szybet
`For some reason compiling it dynamically produces Debug libraries for fbink and not release ones... run the command manually once, should be enough :/ or just fix this somehow help`


[3/24/2024 1:25 AM] spagettioso
sorry i thought i tried that, i guess i must have cleaned accidentally afterwards


[3/24/2024 1:26 AM] spagettioso
thank you for pointing that out


[3/24/2024 1:36 AM] szybet
You can repair these issues you know


[3/24/2024 1:36 AM] szybet
🥴


[3/24/2024 1:41 AM] spagettioso
thats what im working on now, seeing if i can get it to compile first time from a cleaned FBink folder


[3/24/2024 2:22 AM] spagettioso
If i write code in a main.rs file in a new project it compiles fbink but using the exact same code in the build.rs fails

{Attachments}
/mnt/data/projects/git/conversations/media/image-2E9E8.png


[3/24/2024 10:32 PM] tux_linux
lmao


[3/25/2024 2:18 AM] spagettioso
Mr Szybet, thanks to your help and library ive got the example demo of the rust fbink-sys library running on linux

{Attachments}
/mnt/data/projects/git/conversations/media/file-52CB1.png


[3/25/2024 2:41 AM] spagettioso
images too, i think this works pretty well

{Attachments}
/mnt/data/projects/git/conversations/media/file-72F83.png


[3/25/2024 3:38 PM] szybet
cool
I'm not a Mr, I'm younger than you probably


[3/25/2024 3:48 PM] spagettioso
I dunno about younger, maybe maybe not lol


[3/25/2024 3:49 PM] szybet
I'm not even 20


[3/25/2024 3:49 PM] spagettioso
Neither


[3/25/2024 3:49 PM] leo_chrom
Neither me


[3/25/2024 3:49 PM] szybet
18?


[3/25/2024 3:49 PM] szybet
you played roblox, I know your age :P


[3/25/2024 3:50 PM] leo_chrom
Well I meet all the minimum requirements of age


[3/25/2024 3:50 PM] szybet
¯\_(ツ)_/¯


[3/25/2024 3:50 PM] leo_chrom
Lol


[3/25/2024 3:50 PM] spagettioso
17


[3/25/2024 3:50 PM] szybet
im 19


[3/25/2024 3:50 PM] szybet
damn im old


[3/25/2024 3:51 PM] spagettioso
Alright Mr szybet


[3/25/2024 3:51 PM] leo_chrom
So I'm the youngest


[3/25/2024 3:51 PM] szybet
https://tenor.com/view/crying-emoji-dies-gif-21956120

{Embed}
https://tenor.com/view/crying-emoji-dies-gif-21956120
/mnt/data/projects/git/conversations/media/crying-emoji-dies-BD302.png


[3/25/2024 3:51 PM] szybet
Idk, There was a guy named dill here but i think he is older now


[3/25/2024 3:51 PM] spagettioso
Infant ;\)


[3/25/2024 3:51 PM] leo_chrom
No...


[3/25/2024 3:51 PM] szybet
he installed windows server for some reason


[3/25/2024 3:52 PM] leo_chrom
I'm older lol


[3/25/2024 3:52 PM] spagettioso
That's an interesting decision


[3/25/2024 3:52 PM] szybet
yea, not infant but a bit more


[3/25/2024 3:52 PM] szybet
1.5 infant


[3/25/2024 3:52 PM] leo_chrom
I can do everything I want with my pc


[3/25/2024 3:52 PM] leo_chrom
Probably


[3/25/2024 3:53 PM] szybet
install linux then


[3/25/2024 3:53 PM] leo_chrom
Why?


[3/25/2024 3:53 PM] leo_chrom
Please we have already been into this


[3/25/2024 3:53 PM] szybet
https://tenor.com/view/america-hurricane-happy4th-of-july-america-flag-independence-day-gif-9338065310670481220

{Embed}
https://tenor.com/view/america-hurricane-happy4th-of-july-america-flag-independence-day-gif-9338065310670481220
/mnt/data/projects/git/conversations/media/america-hurricane-F2FE8.png


[3/25/2024 3:53 PM] szybet
im joking


[3/25/2024 3:53 PM] spagettioso
https://tenor.com/view/freedom-gif-25824935

{Embed}
https://tenor.com/view/freedom-gif-25824935
/mnt/data/projects/git/conversations/media/freedom-BFADF.png


[3/25/2024 3:54 PM] leo_chrom
...


[3/25/2024 3:54 PM] szybet
you are at a good age to start programming


[3/25/2024 3:54 PM] szybet
so install linux and start


[3/25/2024 3:54 PM] leo_chrom
When I'll need it I'll do that


[3/25/2024 3:55 PM] spagettioso
I started programming before I knew about Linux and man I wish it was the other way around

{Reactions}
😄 

[3/25/2024 3:55 PM] leo_chrom
Well probably you are right idk nothing at the moment


[3/25/2024 3:55 PM] szybet
develop inkbox


[3/25/2024 3:55 PM] szybet
i mean qos


[3/25/2024 3:55 PM] szybet
it was my first big big big project too


[3/25/2024 3:55 PM] szybet
still is


[3/25/2024 3:55 PM] szybet
¯\_(ツ)_/¯


[3/25/2024 3:55 PM] leo_chrom
Don't know how to code


[3/25/2024 3:55 PM] szybet
you will learn lol


[3/25/2024 3:56 PM] szybet
my point is start programming and so something usefull with the code to stay motivated


[3/25/2024 3:56 PM] szybet
programming snake is not funny anymore, anyone has done that


[3/25/2024 3:56 PM] szybet
or learn basics of electronics


[3/25/2024 3:56 PM] szybet
get a solder iron and unsolder old electronics as a hobby


[3/25/2024 3:56 PM] szybet
my advice at least


[3/25/2024 3:57 PM] spagettioso
Expanding on that, design a microcontroller board, the rp2040 actually has great documentation and an almost step by step guide


[3/25/2024 3:57 PM] spagettioso
Even I managed to make one


[3/25/2024 3:58 PM] szybet
Yea maybe, or do something original https://github.com/Szybet/niAudio

{Embed}
https://github.com/Szybet/niAudio
GitHub - Szybet/niAudio: Kobo nia ereader with audio added
Kobo nia ereader with audio added. Contribute to Szybet/niAudio development by creating an account on GitHub.


[3/25/2024 3:58 PM] szybet
and then spend a year finding your own mistakes and learning from them


[3/25/2024 3:58 PM] szybet
¯\_(ツ)_/¯


[3/25/2024 3:58 PM] spagettioso
That's pretty awesome


[3/25/2024 3:59 PM] szybet
thanks


[3/25/2024 3:59 PM] leo_chrom
Roblox isn't only for kiddos btw


[3/25/2024 4:00 PM] szybet
its a game younger people play


[3/25/2024 4:00 PM] szybet
¯\_(ツ)_/¯


[3/25/2024 4:00 PM] leo_chrom
Yes


[3/25/2024 4:02 PM] spagettioso
Also I still can't figure out how to get build.rs to compile FBInk first time, I even tried writing a shell script which compiles it when run from a shell but if I run the script from build.rs it fails. Truely a mystery


[3/25/2024 4:03 PM] spagettioso
I am really intrigued about it


[3/25/2024 4:03 PM] szybet
the easiest way would be just to create a fork of fbink that compiled only to release


[3/25/2024 4:03 PM] szybet
you could do that with the inkbox one


[3/25/2024 4:04 PM] szybet
but my quess of why its happening is some env variables that rust uses affect the makefile somehow and we need to clear it properly but env -i didn't worked


[3/25/2024 4:04 PM] spagettioso
A bit later I'll do a bit more head bashing and see if I can figure it out lol


[3/25/2024 4:04 PM] spagettioso
I was guessing something to do with env variables too


[3/25/2024 4:06 PM] szybet
also you see like a guy that would be interested in developing inkbox.... Quill OS


[3/25/2024 4:06 PM] szybet
have you thinked about that?


[3/25/2024 4:06 PM] spagettioso
Interested? Yes.

I need to learn more about C/C++ and qt though


[3/25/2024 4:06 PM] spagettioso
I've never done more than a hello world in C


[3/25/2024 4:07 PM] spagettioso
Or a bit of stuff with microcontrollers (just blinking lights and interacting with the SDK for gpio and whatnot)


[3/25/2024 4:10 PM] szybet
we have a lot of things that dont require c or c++, and we dont use C anywhere*

there is a lot of rust and shell scripts which could be rewritten to rust


[3/25/2024 4:10 PM] spagettioso
Interesting, that is something I may be able to help with


[3/25/2024 4:10 PM] szybet
im currently working on a build system which is just shell scripts for example


[3/25/2024 4:10 PM] spagettioso
Cool


[3/25/2024 4:10 PM] szybet
there is also a need to create a new website using a simple cms->html


[3/25/2024 4:10 PM] szybet
its named publii


[3/25/2024 4:11 PM] spagettioso
I have a lot of experience with shell and a bit of rust


[3/25/2024 4:11 PM] szybet
awesome


[3/25/2024 4:12 PM] spagettioso
I'm probably gonna be busy for a few days but I definitely want to help


[3/25/2024 4:12 PM] szybet
very cool


[3/25/2024 4:12 PM] szybet
@tux-linux look, a good information once again!


[3/25/2024 4:12 PM] spagettioso
~~inkbox~~ quill os, is a very cool project


[3/25/2024 4:12 PM] szybet
yea


[3/25/2024 4:12 PM] leo_chrom
Isn't it


[3/25/2024 4:12 PM] szybet
its sadly not so popular as i would want to


[3/25/2024 4:12 PM] leo_chrom
Yh


[3/25/2024 4:13 PM] spagettioso
I mean if the pinenote ever releases I could see it gaining popularity


[3/25/2024 4:13 PM] szybet
these times its great, but there were times that me, nicolas and one more guy sitted here with andi and niluje just spawning in sometimes


[3/25/2024 4:13 PM] szybet
not really, but a bit yea


[3/25/2024 4:14 PM] szybet
pinenote has such good specs and the price will mean people will expect a full OS with a DE and not a what inkbox is at this moment


[3/25/2024 4:15 PM] spagettioso
True, there may be some though who buy it and are dissatisfied with the Os and De and want something more integrated for an ereader


[3/25/2024 4:15 PM] szybet
yea, maybe


[3/25/2024 4:15 PM] szybet
we focus on cheap ereaders to expand their capabilities


[3/25/2024 4:16 PM] spagettioso
Yeah, and I personally am very grateful for that fact lol


[3/25/2024 4:16 PM] szybet
😄


[3/25/2024 4:16 PM] spagettioso
I wouldn't really be able to justify buying something like a pinenote


[3/25/2024 4:17 PM] szybet
me neither, a device which can break when i drop it is not worth above 200$ for me


[3/25/2024 4:17 PM] spagettioso
Very fair


[3/25/2024 4:17 PM] spagettioso
Although I have dropped my Kobo quite a few times and it is remarkably resilient


[3/25/2024 4:18 PM] szybet
bigger screen = easier to break


[3/25/2024 4:18 PM] szybet
also luck


[3/25/2024 4:18 PM] spagettioso
Yeah


[3/25/2024 4:18 PM] spagettioso
And big bezels help too


[3/25/2024 4:27 PM] spagettioso
Oh yeah, I noticed that http://inkbox.ddns.net/ links to a gitlab but the docs and repo seem to mention github, I'm guessing the gitlab is just a mirror?


[3/25/2024 4:27 PM] szybet
its nicolas home server so its slow


[3/25/2024 4:29 PM] spagettioso
Righto


[3/26/2024 3:42 PM] szybet
now that the name was changed, here are my other nightmares for you nicolas:

my proposal to include in the quill os redesign:
- rust init program which does ALWAYS recover from a brick
- remove the recovery partition to gain more space
- any simple recovery things which require input could be done from rust init with fbink-rs
- boot partition remains but is small, 5Mb? for boot flags, not more
- the rest of partitions are merged into one
- clear the gui bundle update mess
- more space for the kernel initrd for newer devices
- clara kernel is placed in p2 /kernels or smth
- Xorg will be now available only on root, updated to newer alpine version and there will be a mode where you boot to xorg only which has it's own lightweight DE so no conflicts with the rest of the system


[3/26/2024 3:43 PM] tux_linux
gui bundle update mess?


[3/26/2024 3:44 PM] tux_linux
isnt a boot partition made for kernel and initrd stuff?


[3/26/2024 3:44 PM] tux_linux
thats the standard for every linux distro out there


[3/26/2024 3:44 PM] tux_linux
what


[3/26/2024 3:44 PM] tux_linux
you dont need root for xorg


[3/26/2024 3:45 PM] szybet
i dont care, there is too much mess with it and currently and doing it in that way will isolate things / give users a full linux which will BURN the sense of postmarket os on ereaders lol


[3/26/2024 3:46 PM] szybet
filesystem in filesystem, layer of encryption upon layer of encryption, like please not anymore


[3/26/2024 3:46 PM] szybet
i know it was a hotfix for an older version but now we can do things properly


[3/26/2024 3:46 PM] szybet
if we could boot kernel from partition on every device I would do that too, sadly we can so no


[3/26/2024 3:49 PM] szybet
As im redesigning the build system anyway, most of the things will be done anyway


[3/26/2024 3:54 PM] tux_linux
?
encryption?


[3/26/2024 3:55 PM] szybet
Compression


[3/26/2024 3:55 PM] szybet
Ugh


[3/26/2024 4:01 PM] szybet
I don't hear complains about the recovery partition?


[3/26/2024 5:57 PM] spagettioso
Hey szybet, I'm starting work on the desktop app and I kinda need a name


[3/26/2024 5:57 PM] tux_linux
QuillFlash


[3/26/2024 5:57 PM] spagettioso
You reckon?


[3/26/2024 5:58 PM] spagettioso
Cause I was thinking that but wasn't sure if it was the best


[3/26/2024 5:58 PM] tux_linux
what else were you thinking of


[3/26/2024 5:58 PM] spagettioso
Nothing lol


[3/26/2024 5:58 PM] tux_linux
QuillWrite


[3/26/2024 5:58 PM] tux_linux
kinda appropriate


[3/26/2024 5:58 PM] spagettioso
Ooh that's better


[3/26/2024 5:58 PM] spagettioso
I like that


[3/26/2024 6:35 PM] pgaskin
I would do a two-stage bootloader


[3/26/2024 6:36 PM] pgaskin
one doesn't use libs like fbink, is not updated unless absolutely necessary, and is just responsible for choosing what to boot to next and for providing a wired recovery mechanism


[3/26/2024 6:36 PM] pgaskin
the next stage is responsible for everything else


[3/26/2024 6:36 PM] pgaskin
this is a common design for embedded systems


[3/26/2024 6:40 PM] szybet
this won't help for everything obviously


[3/26/2024 6:41 PM] szybet
also booting uboot from uboot is impossible as we concluded?


[3/26/2024 6:41 PM] szybet
also read the thing i wrote on the other server


[3/26/2024 6:42 PM] szybet
ummm maybe use that as the base as i mentioned before https://github.com/Szybet/sketch-inkbox

{Embed}
https://github.com/Szybet/sketch-inkbox
GitHub - Szybet/sketch-inkbox: Draw sketches on e-paper - fork for ...
Draw sketches on e-paper - fork for inkbox. Contribute to Szybet/sketch-inkbox development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/sketch-inkbox-75A1A


[3/26/2024 6:42 PM] szybet
it rusty


[3/26/2024 6:42 PM] spagettioso
right now im just working on the desktop part


[3/26/2024 6:42 PM] spagettioso
the one which deploys the payload


[3/26/2024 6:43 PM] szybet
OH the installer


[3/26/2024 6:43 PM] tux_linux
what


[3/26/2024 6:43 PM] szybet
i thought the handwriting app


[3/26/2024 6:43 PM] spagettioso
ohhh


[3/26/2024 6:43 PM] spagettioso
nah


[3/26/2024 6:44 PM] spagettioso
ive decided im not gonna try that particular thing until i have my ereader so i can decide whether it would be a waste of my time

{Reactions}
👍 

[3/26/2024 7:10 PM] spagettioso


{Attachments}
/mnt/data/projects/git/conversations/media/image-82BAA.png


[3/26/2024 7:10 PM] spagettioso
ive added a json file which can be updated when new devices get added


[3/26/2024 7:10 PM] spagettioso
that way quillwrite can load the info dynamically rather than needing to update the binary when new devices get added


[3/26/2024 7:12 PM] szybet
awesome


[3/26/2024 7:12 PM] szybet
also n306C model c


[3/26/2024 7:25 PM] spagettioso
added


[3/26/2024 7:25 PM] spagettioso


{Attachments}
/mnt/data/projects/git/conversations/media/image-68FD5.png


[3/26/2024 7:25 PM] spagettioso
(the print device list button is just for helping me debug stuff)


[3/26/2024 7:28 PM] spagettioso
https://github.com/Spagett1/QuillWrite

{Embed}
https://github.com/Spagett1/QuillWrite
GitHub - Spagett1/QuillWrite
Contribute to Spagett1/QuillWrite development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/QuillWrite-06A98


[3/26/2024 7:29 PM] szybet
maybe you would want to write it in the Quill os org?


[3/26/2024 7:30 PM] spagettioso
oh yeah id be happy to do that


[3/26/2024 7:30 PM] szybet
so we would see #bot updated


[3/26/2024 7:30 PM] szybet
do you want me to fork this repo or create a clean one


[3/26/2024 7:30 PM] spagettioso
eh, maybe a clean one?


[3/26/2024 7:30 PM] spagettioso
just for the sake of tidyness


[3/26/2024 7:30 PM] spagettioso
ill delete this one


[3/26/2024 7:31 PM] spagettioso
deleted


[3/26/2024 7:32 PM] szybet
I added you https://github.com/Quill-OS/QuillWrite

{Embed}
https://github.com/Quill-OS/QuillWrite
Quill-OS/QuillWrite
Contribute to Quill-OS/QuillWrite development by creating an account on GitHub.
/mnt/data/projects/git/conversations/media/QuillWrite-2176F


[3/26/2024 7:33 PM] spagettioso
thanks


[3/26/2024 7:35 PM] spagettioso
everything is pushed now


[3/26/2024 7:37 PM] spagettioso
I think that will be all i do for today, a lot of the boilerplate is in place


[3/26/2024 7:40 PM] szybet
cool


[3/27/2024 5:32 PM] spagettioso
Hey szybet, when you are free could you show me what `dmesg` says when you plug an ereader in mtp mode into a computer? Just so I can see the kind of data it gives the PC for quillwrite to work with


[3/27/2024 5:33 PM] szybet
you mean on the stock os?


[3/27/2024 5:33 PM] spagettioso
Yeah


[3/27/2024 5:33 PM] spagettioso
If you have any still running it


[3/27/2024 5:33 PM] szybet
well maybe now, give me a minute


[3/27/2024 5:33 PM] szybet
@Kitkat / Szybet ( sometimes ) @Kitkat / Szybet ( sometimes ) @Kitkat / Szybet ( sometimes )


[3/27/2024 5:33 PM] szybet
@Kitkat / Szybet ( sometimes ) @Kitkat / Szybet ( sometimes ) @Kitkat / Szybet ( sometimes )


[3/27/2024 5:33 PM] spagettioso
Lol


[3/27/2024 5:33 PM] szybet
well i do not but he has ;p


[3/27/2024 5:33 PM] spagettioso
Lmao


[3/27/2024 5:34 PM] spagettioso
Otherwise I'll have to wait till July cause I do have an SD card with the stock os lying around


[3/27/2024 5:36 PM] szybet
nah he will do it


[3/27/2024 5:36 PM] szybet
give him a second


[3/27/2024 5:36 PM] szybet
:D


[3/27/2024 5:36 PM] spagettioso
Cool


[3/27/2024 5:36 PM] spagettioso
Thanks Mr KitKat


[3/27/2024 5:36 PM] kuratius
What kind of app is quillwrite?


[3/27/2024 5:37 PM] szybet
He is not Mr for you :P


[3/27/2024 5:37 PM] szybet
finally an installer


[3/27/2024 5:37 PM] spagettioso
It's going to make installing quillOs very easy


[3/27/2024 5:37 PM] spagettioso
Without removing the sd card


[3/27/2024 5:37 PM] kuratius
That's possible?


[3/27/2024 5:37 PM] szybet
and im making building QuillOS easy with scripts repo


[3/27/2024 5:37 PM] szybet
look kuratius, your dreams come true


[3/27/2024 5:38 PM] szybet (pinned)


{Attachments}
/mnt/data/projects/git/conversations/media/image-655AA.png


[3/27/2024 5:38 PM] szybet
Pinned a message.


[3/27/2024 5:38 PM] spagettioso
Every app on a Kobo runs as root so if we can transmit a payload and then receive a backup  it should be great


[3/27/2024 5:38 PM] szybet
no problemo


[3/27/2024 5:39 PM] kuratius
could probably contribute it to pmOS too if you make it generic-ish


[3/27/2024 5:40 PM] kuratius
or maybe it already has that


[3/27/2024 5:40 PM] andi15701
well, flash a bootscript to enter msd mode


[3/27/2024 5:41 PM] andi15701
I personally prefer the approach of removing sd card and storing it in a safe place


[3/27/2024 5:41 PM] andi15701
and cloning it


[3/27/2024 5:41 PM] .kitkat1.
We are gonna modify xorg so there is a xorg only mode, pm os will lose any reason then? - Szybet


[3/27/2024 5:41 PM] spagettioso
I mean that option will always be available


[3/27/2024 5:42 PM] spagettioso
But quillwrite will lower the barrier of entry


[3/27/2024 5:42 PM] andi15701
yes, might be


[3/27/2024 5:42 PM] andi15701
well, I don't think pmOS will loose any reason


[3/27/2024 5:43 PM] kuratius
How is that related?


[3/27/2024 5:43 PM] andi15701
the main point is that all QuillOS, pmOS, Debian and yocto have different set of features


[3/27/2024 5:44 PM] andi15701
something is overlapping, but nothing is a clear subset of something else


[3/27/2024 5:44 PM] .kitkat1.
¯\_(ツ)_/¯


[3/27/2024 5:45 PM] .kitkat1.
I see that its just splitting things apart instead of focusing on one OS and making it great

yea already know me and my opinions on that


[3/27/2024 5:45 PM] spagettioso
Make quillos great


[3/27/2024 5:46 PM] andi15701
and happily reinventing everything missing?


[3/27/2024 5:47 PM] .kitkat1.
@Spagett the kobo nia model c died, probably battery so it will take more time


[3/27/2024 5:47 PM] spagettioso
No worries


[3/27/2024 5:58 PM] spagettioso
Well if anyone has a device or SD card with the stock os on it and has access to a Linux machine please let me know


[3/27/2024 6:20 PM] .kitkat1.
stupid kobo battery cutted off even charging when ts 2.95 😦


[3/27/2024 6:21 PM] andi15701
which device are you talking about?


[3/27/2024 6:25 PM] szybet
kobo nia model c


[3/27/2024 6:25 PM] andi15701
Well, the question is how to combine things together which are split now


[3/27/2024 6:25 PM] szybet
i will charge it directly bypassing the protection but its stupid it was needed


[3/27/2024 6:26 PM] szybet
welp whatever


[3/27/2024 6:26 PM] szybet
how much does postmarket os weight


[3/27/2024 6:26 PM] szybet
like its rootfs


[3/27/2024 6:26 PM] szybet
( i hope no kernel dependent things )?


[3/27/2024 6:29 PM] andi15701
well, recent alpine minirootfs starts at 4MB, so add kernel stuff to it


[3/27/2024 6:30 PM] andi15701
and then comes the ui stuff, there you are free of choice


[3/27/2024 6:33 PM] szybet
couldnt postmarket os run inside of inkbox os?


[3/27/2024 6:33 PM] szybet
kernel version is a problem probably?


[3/27/2024 6:34 PM] andi15701
probably the other way round


[3/27/2024 6:34 PM] szybet
well no


[3/27/2024 6:34 PM] szybet
the point is to make postmarket os work on devices supported by inkbox


[3/27/2024 6:34 PM] szybet
not the other way arround


[3/27/2024 6:35 PM] spagettioso
i mean pmos is based on alpine like quillos so i imagine it would be possible


[3/27/2024 6:37 PM] andi15701
the question is what you want to achieve


[3/27/2024 6:37 PM] andi15701
e.g. pmos boot has some mechanism to let everything work via nbd


[3/27/2024 6:38 PM] andi15701
that would help for some initial testing on devices


[3/27/2024 6:38 PM] szybet
you working your stuff + making inkbox a free xorg env


[3/27/2024 6:38 PM] szybet
yea we dont need such things


[3/27/2024 6:38 PM] szybet
just the rootfs & friends


[3/27/2024 6:39 PM] spagettioso
szybet, ive done some research and if im right the usb productId is part of the usb controller so it should be the same regardless of whether it is running inkbox or stock


[3/27/2024 6:39 PM] spagettioso
so if you dont mind it would be handy if you could show the dmesg


[3/27/2024 6:40 PM] andi15701
might be a security issue


[3/27/2024 6:40 PM] szybet
so it should be in inkbox too?


[3/27/2024 6:40 PM] spagettioso
i reckon


[3/27/2024 6:40 PM] szybet
the same


[3/27/2024 6:40 PM] andi15701
had that discussion in pmOS


[3/27/2024 6:40 PM] szybet
im hacking the battery to charge it via a powerfull charger


[3/27/2024 6:40 PM] spagettioso
i mean my pixel 4 shows the same uiid running lineageOs as it does on the stock


[3/27/2024 6:40 PM] szybet
then it will work


[3/27/2024 6:40 PM] spagettioso
no rush


[3/27/2024 6:40 PM] spagettioso
whenever you are free


[3/27/2024 6:41 PM] szybet
i have a week of vacation and @Kitkat / Szybet ( sometimes ) too


[3/27/2024 6:41 PM] szybet
well i need to study but i can test things from time to time


[3/27/2024 6:41 PM] spagettioso
cool


[3/27/2024 6:41 PM] andi15701
several USB devices have several product ids depending on circumstances


[3/27/2024 6:41 PM] andi15701
it is often a more logical thing


[3/27/2024 6:42 PM] andi15701
so a logical device


[3/27/2024 6:42 PM] andi15701
userspace may have user access rules depending on product ids


[3/27/2024 6:43 PM] spagettioso
the idea is to determine what device kobo device is connected to a pc


[3/27/2024 6:43 PM] andi15701
there are some standard combinations reserved for the standard kernel gadgets


[3/27/2024 6:43 PM] szybet
i dont get why its a security thing? we need root anyway


[3/27/2024 6:43 PM] andi15701
you also have the usb strings


[3/27/2024 6:44 PM] andi15701
to differntiate


[3/27/2024 6:45 PM] andi15701
I try to find the pmOS ticket


[3/27/2024 6:45 PM] andi15701
about that question


[3/27/2024 6:52 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/IMG_20240327_185125-13319.jpg


[3/27/2024 6:52 PM] szybet
charging lol


[3/27/2024 6:52 PM] szybet
will be done in a few h


[3/27/2024 6:52 PM] andi15701
https://gitlab.com/postmarketOS/pmaports/-/issues/1718

{Embed}
https://gitlab.com/postmarketOS/pmaports/-/issues/1718
Require USB VID and PID to be set in deviceinfo (#1718) · Issues · ...
USB VID and PID usage VID and PID values for the USB connection can be set in deviceinfo, like in
/mnt/data/projects/git/conversations/media/icon_mobile-9A834.png


[3/27/2024 6:53 PM] szybet
its about changing the ID's


[3/27/2024 6:53 PM] szybet
not just reading them


[3/27/2024 6:53 PM] szybet
and yes the implications there have a fair point


[3/27/2024 6:54 PM] szybet
but if kobo manages them properly we could use them too


[3/27/2024 6:56 PM] spagettioso
Nice


[3/27/2024 6:57 PM] andi15701
but you know that you can change ids and strings?


[3/27/2024 6:57 PM] andi15701
ore maybe only strings


[3/27/2024 6:58 PM] andi15701
but if you are just reading the ones, kobo gives you


[3/27/2024 6:58 PM] andi15701
then no issue


[3/27/2024 6:58 PM] szybet
yes yes


[3/27/2024 6:58 PM] szybet
yes


[3/27/2024 7:17 PM] andi15701
That is not the point that *you* do not need that. For example I am now hacking the clara2e and I am a bit afraid to remove the sd card (water proof things). I will postpone that until I have done any porting work that can be done without it, so if I break something while removing it, the device has left its live for something. So I am playing around with fastboot + debian via nfsroot to test things. And that debian also has a FBInk install. So it might be useful for someone. But of course you cannot pave the roads en every direction for everyone crazy around, maybe just avoid building fences.


[3/27/2024 7:18 PM] szybet
yea yes but yes yea


[3/27/2024 7:21 PM] andi15701
That is not the exact truth and I think it is important that you understand to avoid too much ruffled feathers


[3/27/2024 7:32 PM] andi15701
The issue is to again to have the choice without walls. And still have a main road. Maybe today I would just use stuff as x11 applications right, but I want to have other things for free (without doing additional work), like having bluetooth working with latest security features. Maybe tomorrow I use it together with FBInk without X but with QPA. And present a video about how different the refreshes look. Maybe tomorrow me or somebody else improves something in the apps because he/she can work in their favorite environment and that comes back.


[3/27/2024 7:55 PM] szybet
yea i get it


[3/27/2024 7:56 PM] szybet
but yea you get my point too


[3/27/2024 11:24 PM] andi15701
one thing I stumbled across, maybe that is important for QuillWriter, I made the device go into manufacturer mode from kernel where you can boot with uuu into a uboot (which then can enable mass storage mode). So that would be quite non-invasive, not touching anything vital before backup. If such a method is not known for a device, something else can be used as a fallback.


[3/27/2024 11:29 PM] szybet
we need something universal and easy to use


[3/27/2024 11:29 PM] szybet
this doesnt sound like that


[3/27/2024 11:30 PM] andi15701
well, invisible for the user


[3/27/2024 11:30 PM] szybet
compressed dd over network is fine i quess


[3/27/2024 11:30 PM] szybet
rust is awesome enough to dothat


[3/27/2024 11:30 PM] tux_linux
guess


[3/27/2024 11:30 PM] szybet
huh


[3/27/2024 11:31 PM] szybet
yea


[3/27/2024 11:31 PM] andi15701
hmm, maybe force-remount things to readonly before


[3/27/2024 11:33 PM] andi15701
well, providing msd over usb is universal


[3/27/2024 11:36 PM] andi15701
if you write you would probably need to move the whole system out of the way


[3/27/2024 11:38 PM] tux_linux
yea, it would probably be better like that


[3/27/2024 11:48 PM] andi15701
I can check that uuu road. So on Kobo side we need a program to enter uuu mode, on PC side we need the uuu stuff hidden away. If uuu is not possible for that device, we can back up the stock kernel to a file, replace it with a kernel/initrd providing only usbmsd of the whole disk.


[3/27/2024 11:52 PM] szybet
why not just write the kernel and uboot and then download inkbox components?


[3/27/2024 11:52 PM] szybet
overcomplicating things for no reason


[3/27/2024 11:53 PM] andi15701
if you want to have a good backup first


[3/27/2024 11:54 PM] szybet
yea, rust can probably read a the sd card and send it over network?


[3/27/2024 11:54 PM] szybet
if not, dd will handle it anyway


[3/27/2024 11:54 PM] szybet
s i m p l e


[3/27/2024 11:56 PM] szybet
https://www.google.com/search?q=rust+dd#ip=1

{Embed}
https://www.google.com/search?q=rust+dd
🔎 rust dd - Google Search
/mnt/data/projects/git/conversations/media/gsa_ios_250dp-EF84E.png


[3/27/2024 11:56 PM] szybet
a lot of that


[3/27/2024 11:57 PM] andi15701
ok, with that step included, then it is something dfferent


[3/27/2024 11:57 PM] andi15701
provided that your network is stable


[3/27/2024 11:58 PM] szybet
we obviously recheck things


[3/27/2024 11:58 PM] szybet
like sha sums


[3/27/2024 11:58 PM] andi15701
network=wifi? or usb cdc/rndis?


[3/27/2024 11:59 PM] szybet
like damn, using the rust library i used for kobo screen mirroring i could write all the backup things in one evening


[3/27/2024 11:59 PM] szybet
wifi


[3/28/2024 12:04 AM] andi15701
can you put the system into readonly on kobos?


[3/28/2024 12:05 AM] andi15701
like force-remount via /proc/sysrq-trigger


[3/28/2024 12:05 AM] andi15701
to have a consistent backup


[3/28/2024 12:06 AM] szybet
idk


[3/28/2024 12:06 AM] szybet
not needed


[3/28/2024 12:07 AM] szybet
but would be cool


[3/28/2024 12:07 AM] andi15701
well, for consistent backup, it would be needed


[3/28/2024 12:13 AM] szybet
i think a "fine" and "working" backup is good enough


[3/28/2024 12:15 AM] andi15701
why do you think it will not be needed?


[3/28/2024 12:15 AM] tux_linux
kobos have sysrq?


[3/28/2024 12:16 AM] tux_linux
i can check on mine


[3/28/2024 12:18 AM] andi15701
[root@kobo ~]# mount -o remount,ro /
[root@kobo ~]# mount -o remount,ro /mnt/onboard 
mount: mounting /dev/mmcblk0p3 on /mnt/onboard failed: Device or resource busy


[3/28/2024 12:18 AM] andi15701
no, they have not


[3/28/2024 12:30 AM] spagettioso
If it's possible I think we should definitely do it


[3/28/2024 12:33 AM] spagettioso
Stops the chance of stuff messing up mid transfer


[3/28/2024 12:36 AM] andi15701
if you do something from a running system, you could also simply provide an nbd server


[3/28/2024 12:37 AM] andi15701
nbd is lightweight


[3/28/2024 12:37 AM] andi15701
and on the other side you can use anything operating on block devices


[3/28/2024 12:38 AM] andi15701
to do the backup


[3/28/2024 12:38 AM] tux_linux
nbd exists for 2.6.35.3 kernels?


[3/28/2024 12:38 AM] andi15701
userland only on server side


[3/28/2024 12:38 AM] tux_linux
oh awesome


[3/28/2024 12:56 AM] spagettioso
Nbd sounds like a good way to do it to me


[3/28/2024 8:58 AM] andi15701
nbd is available also as a client in 2.6.35.3 kernels


[3/28/2024 9:00 AM] andi15701
so if anyone feels like using the nbd thing is a good idea and wants to put effort into it


[3/28/2024 9:15 AM] andi15701
mean the nbd thing the other way round, pc provides nbd-server with an inkbox disk image to test things first


[3/28/2024 9:15 AM] andi15701
but for QuillWrite purpose you do not need that


[3/28/2024 10:10 AM] szybet
okay, this is awesome
https://www.reddit.com/r/eink/comments/1bpq9yq/ok_you_all_are_going_to_love_this_the_future_of/

{Embed}
https://www.reddit.com/r/eink/comments/1bpq9yq/ok_you_all_are_going_to_love_this_the_future_of/
From the eink community on Reddit: Ok, you all are going to love th...
Explore this post and more from the eink community
/mnt/data/projects/git/conversations/media/1bpq9yq-21048


[3/28/2024 10:10 AM] szybet
inkbox could do that


[3/28/2024 10:10 AM] szybet
via an api


[3/28/2024 10:10 AM] szybet
@Kuratius do you know an ready to use api for something like that?


[3/28/2024 10:10 AM] szybet
i quess self hosted


[3/28/2024 10:17 AM] tux_linux
g


[3/28/2024 10:18 AM] szybet
dont expect me with my english to understand single word shortcuts


[3/28/2024 10:18 AM] tux_linux
guess
g


[3/28/2024 10:19 AM] szybet
https://tenor.com/view/cat-no-nonono-noooo-cat-no-gif-25423213

{Embed}
https://tenor.com/view/cat-no-nonono-noooo-cat-no-gif-25423213
/mnt/data/projects/git/conversations/media/cat-no-AC216.png


[3/28/2024 10:20 AM] tux_linux


{Attachments}
/mnt/data/projects/git/conversations/media/PXL_20240326_203952187-1F0DF.jpg


[3/28/2024 10:21 AM] szybet
nice cat

{Reactions}
👍 

[3/28/2024 10:26 AM] szybet
this device runs on a rpi


[3/28/2024 10:27 AM] szybet
it could run inkbox with the features they want and be a functioning ereader...


[3/28/2024 10:27 AM] szybet
we could have a dedicated inkbox device :(


[3/28/2024 10:30 AM] andi15701
Limitations of that backup/install via nbd: you can read the whole disk, nothing stops you from writing anywhere. but can be dangerous, writing to the partition table (there is a cache in the kernel for that), unpartitioned space and area of not mounted partitions is fine, but if you write to areas of running programs you can have funny results, like crashing wpa_supplicant or init and wifi will stop


[3/28/2024 10:36 AM] andi15701
and if inkbox would have some more if device=something removed, and would just work if you throw a somewhat reasonable kernel and maybe FBInk at it that would actually be easy for everyone to get something started


[3/28/2024 10:37 AM] andi15701
a friend of mine is playing around with souch a display hat and trying to get it to work at a ultra low power mips device with rpi-compatible header


[3/28/2024 10:38 AM] szybet
we are working on that


[3/28/2024 10:38 AM] szybet
but whatever


[3/28/2024 1:18 PM] szybet
Started a thread.


[3/28/2024 11:51 PM] andi15701
And you hopefully know I have also actively helped with that, but some init cleanups went away when you switched from shell init script to a c program


[3/28/2024 11:51 PM] andi15701
So I do not always bash arounnd


[3/28/2024 11:58 PM] szybet
we will rewrite it to rust


[3/28/2024 11:59 PM] szybet
because its a mess, right?


[3/28/2024 11:59 PM] szybet
if you want, and I suggest that i can give you access to the init repo and you can apply these patches there directly

{Reactions}
👍 

[3/28/2024 11:59 PM] szybet
nicolas doesnt have time to apply them


[3/29/2024 12:00 AM] andi15701
yes, ok


[3/29/2024 12:04 AM] szybet
what is your gh profile


[3/29/2024 12:04 AM] andi15701
akemnade


[3/29/2024 12:06 AM] szybet
sended


[3/29/2024 2:07 PM] tux_linux
Don't do that for everyone


[3/29/2024 2:09 PM] szybet
stop -_-


[3/29/2024 2:09 PM] szybet
its andi


[3/29/2024 2:10 PM] szybet
i was supriced he doesnt have access


[3/29/2024 2:10 PM] tux_linux
Yes, it's fine for him


[3/29/2024 2:10 PM] tux_linux
He's a wizard


[3/29/2024 2:10 PM] szybet
and you are the dragon


[3/29/2024 2:10 PM] szybet
;p


[3/30/2024 2:05 PM] szybet
1/3 Of qt6 compiled


[3/30/2024 2:09 PM] tux_linux
my god


[3/30/2024 2:11 PM] szybet
the building process is elegant compared to qt5


[3/30/2024 2:11 PM] szybet
still confusing mess but hey


[3/30/2024 2:15 PM] szybet
it worked???


[3/30/2024 2:17 PM] tux_linux
sus


[3/30/2024 2:18 PM] szybet
We will work with 2 qt version it seems


[3/30/2024 2:18 PM] szybet
if it runs lol


[3/30/2024 2:19 PM] szybet
ok the platform plugin doesnt build lol `Project ERROR: Unknown module(s) in QT: service_support-private eventdispatcher_support-private fontdatabase_support-private`


[3/30/2024 2:27 PM] szybet
```
While qmake is still supported for building Qt applications, it can no longer be used to compile custom Qt plugins, or libraries that rely on internals from the Qt 5 build system. Such libraries or plugins must be ported to CMake for use with Qt 6.

At the time of the release of Qt 6.0, the API for building custom Qt plugins or libraries is still in tech preview, which means that it may still change in future versions. A public stable API will be made available in a later Qt 6 release.
```


[3/30/2024 2:27 PM] szybet
fuck


[3/30/2024 2:27 PM] szybet
https://doc.qt.io/qt-6/qt6-buildsystem.html

{Embed}
https://doc.qt.io/qt-6/qt6-buildsystem.html
Build System Changes in Qt 6 | Qt 6.6
Changes in Qt 6 how Qt is built


[3/30/2024 2:29 PM] tux_linux
lmao


[3/30/2024 2:29 PM] tux_linux
sad


[3/30/2024 2:35 PM] szybet
how the fuck did it build against x86 anyway


[3/30/2024 11:02 PM] szybet
kobo qt6 scripts and files, a few of them at least:


[3/30/2024 11:02 PM] szybet
it doesnt work and im tired


[3/30/2024 11:02 PM] szybet
i mean it compiled but cmake screams at everything if trying to compile an app


[3/30/2024 11:02 PM] szybet
not even to mention trying to compile qpa


[3/30/2024 11:02 PM] tux_linux
Maybe it's trying to tell you something


[3/30/2024 11:02 PM] szybet
https://tenor.com/view/dying-monkey-dying-gif-13123180

{Embed}
https://tenor.com/view/dying-monkey-dying-gif-13123180
/mnt/data/projects/git/conversations/media/dying-monkey-dying-9AC82.png


[3/30/2024 11:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/build-82B72.sh


[3/30/2024 11:03 PM] szybet
qt-everywhere-src-6.6.1


[3/30/2024 11:03 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/linux-kobo-gnueabihf-g-4FAA5.zip


[3/30/2024 11:04 PM] szybet
to compile qt quick and opengl use this
git clone http://code.qt.io/qt/qtdeclarative-render2d.git
and the guide for Qt quick software renderer


[3/31/2024 8:49 PM] szybet
@Spagett why running an egui app `qt.qpa.wayland: Setting cursor position is not possible on wayland` appears?


[3/31/2024 8:49 PM] spagettioso
im honestly not sure


[3/31/2024 8:51 PM] szybet
to my understanding it would mean that it uses qt platform plugins


[3/31/2024 8:51 PM] szybet
which would mean they could run on kobo without* issue


[3/31/2024 8:51 PM] tux_linux
*


[3/31/2024 8:53 PM] szybet
\**qpa doesnt support all things, just the bare minimum so egui could be upset*


[3/31/2024 8:53 PM] tux_linux
what does egui mean


[3/31/2024 8:53 PM] spagettioso
what egui program shows that for you? i remember seeing it recently but cant remember where


[3/31/2024 8:53 PM] szybet
a very easy to use rust library


[3/31/2024 8:53 PM] spagettioso
egui is a rust UI library


[3/31/2024 8:53 PM] spagettioso
its awesome


[3/31/2024 8:53 PM] tux_linux
oh


[3/31/2024 8:53 PM] szybet
it worse than qt in features


[3/31/2024 8:54 PM] szybet
but rust!


[3/31/2024 8:54 PM] tux_linux
hm ok


[3/31/2024 8:54 PM] szybet
mine


[3/31/2024 8:54 PM] szybet
written 2 days ago


[3/31/2024 8:54 PM] spagettioso
an example of something ive made using egui

{Attachments}
/mnt/data/projects/git/conversations/media/234575696-e6ea62ae-7189-4a9b-bcfb-7f0c3627-39E09.png

{Reactions}
👍 

[3/31/2024 8:54 PM] tux_linux
at least let's hope a demon is not inhabiting it


[3/31/2024 8:54 PM] spagettioso
yeah righto, i remember seeing it recently too


[3/31/2024 8:54 PM] szybet
thats mine, like 3 hours of work and it looks great

{Attachments}
/mnt/data/projects/git/conversations/media/image-46303.png


[3/31/2024 8:55 PM] spagettioso
nice


[3/31/2024 8:55 PM] szybet
and i didn't even cared for UI


[3/31/2024 8:55 PM] tux_linux
ok, because i find it ugly


[3/31/2024 8:55 PM] tux_linux
;p


[3/31/2024 8:55 PM] szybet
I have written some logic in the UI render part of gui, mess


[3/31/2024 8:56 PM] szybet
I gived 0 effort to it


[3/31/2024 8:56 PM] szybet
so imagine if i gived a bit


[3/31/2024 8:56 PM] tux_linux
then its good


[3/31/2024 8:56 PM] tux_linux
also what on earth is 921600 baud rate


[3/31/2024 8:56 PM] tux_linux
115200 wasnt enough?


[3/31/2024 9:26 PM] spagettioso
Im no expert but from poking through the egui docs.rs page and its dependancies i only see a couple references to qt, mainly from the wayland_protocols_plasma crate


[3/31/2024 9:27 PM] spagettioso
i dont think qt or eframe actually uses qt for anything


[3/31/2024 9:27 PM] spagettioso
it just shows up as it handles some wayland stuff for kwin


[3/31/2024 9:31 PM] spagettioso
I wouldnt know how to do it but in the future if someone was sufficiently motivated it may be possible to write an egui integration for fbink

{Attachments}
/mnt/data/projects/git/conversations/media/image-63536.png


[3/31/2024 9:32 PM] spagettioso


{Attachments}
/mnt/data/projects/git/conversations/media/image-542EB.png


[3/31/2024 10:36 PM] szybet
Im sending bytes as strings of uint8 then converting it back
Yes


[3/31/2024 10:36 PM] szybet
I could probably move to something... Normal


[3/31/2024 10:37 PM] szybet
Sad


[3/31/2024 10:38 PM] spagettioso
Yeah, it is


[4/2/2024 3:45 PM] szybet
https://www.linen.dev/landing

{Embed}
https://www.linen.dev/landing
/mnt/data/projects/git/conversations/media/logo63448d11-cc57-4c35-8b16-5064ebae803c-77D63.png


[4/2/2024 3:45 PM] szybet
can i add this


[4/2/2024 3:45 PM] szybet
I want this server to be searchable via google, there is so much knowledge about kobos


[4/2/2024 3:45 PM] szybet
@tux-linux @Kuratius


[4/2/2024 3:48 PM] tux_linux
ok


[4/2/2024 3:48 PM] tux_linux
but we stay on discord


[4/2/2024 3:50 PM] szybet
obv yes


[4/2/2024 3:50 PM] szybet
matrix is shit


[4/2/2024 3:50 PM] szybet
looks like shit exactly speaking


[4/2/2024 3:51 PM] szybet
discord search recently got so worse


[4/2/2024 3:51 PM] tux_linux
it has always been bad?


[4/2/2024 3:51 PM] tux_linux
element does at least


[4/2/2024 3:51 PM] szybet
nope


[4/2/2024 3:51 PM] szybet
i loved it


[4/2/2024 3:52 PM] szybet
you cant organise things like on discord


[4/2/2024 3:52 PM] szybet
so its shit anyways


[4/2/2024 3:52 PM] tux_linux
well, do the linen thing


[4/2/2024 4:33 PM] szybet
It's syncing things


[4/2/2024 4:33 PM] szybet
I quess a few hours will pass


[4/2/2024 4:33 PM] linen#4328
Started a thread.


[4/2/2024 4:34 PM] linen#4328
Started a thread.


[4/2/2024 4:34 PM] linen#4328
Started a thread.


[4/2/2024 4:34 PM] szybet
oh welp


[4/2/2024 4:39 PM] tux_linux
what


[4/2/2024 4:39 PM] szybet
i cant figure it out yet


[4/2/2024 4:45 PM] tux_linux
g


[4/2/2024 5:47 PM] szybet
https://www.linen.dev/s/quill-os

{Embed}
https://www.linen.dev/s/quill-os
/mnt/data/projects/git/conversations/media/logo63448d11-cc57-4c35-8b16-5064ebae803c-77D63.png


[4/2/2024 5:56 PM] szybet
https://www.google.com/search?q=site%3Alinen.dev%2Fs%2Fquill-os&sca_upv=1&udm=

{Embed}
https://www.google.com/search?q=site%3Alinen.dev%2Fs%2Fquill-os&sca_upv=1&udm=
🔎 site:linen.dev/s/quill-os - Google Search
/mnt/data/projects/git/conversations/media/gsa_ios_250dp-EF84E.png


[4/2/2024 5:59 PM] tux_linux
Ok, i don't see anything


[4/2/2024 5:59 PM] szybet
give it time lol


[4/2/2024 5:59 PM] szybet
domain names need a few days to work


[4/2/2024 5:59 PM] szybet
google search? weeks or months


[4/2/2024 6:00 PM] tux_linux
Does it support threads


[4/2/2024 6:00 PM] tux_linux
Yea


[4/2/2024 6:02 PM] szybet
hard to tell?


[4/2/2024 6:04 PM] szybet
it does


[4/2/2024 6:04 PM] szybet
BUT


[4/2/2024 6:05 PM] szybet
they are hard to access on linen via the ui, google search will work tho


[4/2/2024 8:51 PM] szybet


{Attachments}
/mnt/data/projects/git/conversations/media/Screenshot_20240402-204941_Firefox-19CC0.png


[4/2/2024 8:51 PM] szybet
Oh, @tux-linux please do that when you can


[4/2/2024 8:51 PM] szybet
I cant today


[4/2/2024 8:52 PM] tux_linux
i cant either


[4/2/2024 11:07 PM] andi15701
does anyone know what the night mode on epd pmics is? For me night mode means, frontlight needed, preferably warm. And slower refreshes due to low temperatures


[4/2/2024 11:22 PM] szybet
Um what


[4/2/2024 11:22 PM] szybet
night mode = inverted colors?


[4/2/2024 11:22 PM] szybet
@NiLuJe ?


[4/3/2024 12:52 AM] ninuje
Usually, yes. Also, eclipse waveform modes on recent enough devices, which are optimized for white on black instead of black on white (there's usually a REAGL and GC pair, GLK/GLKW & GCK)


[4/3/2024 12:53 AM] ninuje
(inverted colors, I mean. Which can be handled by the PxP on mxc, and the MDP on MTK)


[4/3/2024 12:55 AM] ninuje
e.g., https://github.com/NiLuJe/FBInk/blob/07aee7beb7505abba9e8dbc7ec482d444884dd09/fbink.c#L2676-L2678

{Embed}
https://github.com/NiLuJe/FBInk/blob/07aee7beb7505abba9e8dbc7ec482d444884dd09/fbink.c
FBInk/fbink.c at 07aee7beb7505abba9e8dbc7ec482d444884dd09 · NiLuJe/...
FrameBuffer eInker, a small tool & library to print text & images to an eInk Linux framebuffer - NiLuJe/FBInk
/mnt/data/projects/git/conversations/media/FBInk-3D7A7


[4/3/2024 12:56 AM] ninuje
(On mxc, at 8bpp, setting the gayscale vinfo flag to 2 also enforces it silently)


[4/3/2024 3:02 PM] szybet
https://discuss.online/post/6700767?scrollToComments=true

{Embed}
https://discuss.online/post/6700767?scrollToComments=true
Discord to start showing ads in the coming week after resisting for...
I don’t think people on this sub use it, but it’s great news for us. The worse
it gets the likelier people move on.
/mnt/data/projects/git/conversations/media/e96b1e8c-7c8a-41ac-a448-f50938aa5bea-7FDC2.jpeg


[4/3/2024 3:03 PM] szybet
good that we created linen


[4/3/2024 3:04 PM] tux_linux
Ok, we should move to matrix full time


[4/3/2024 3:04 PM] tux_linux
Even if it's ugly


[4/3/2024 3:04 PM] szybet
well first


[4/3/2024 3:04 PM] tux_linux
Porting threads ... €5$£%!


[4/3/2024 3:04 PM] szybet
we should export all threads


[4/3/2024 3:05 PM] szybet
actually let me do a full discord backup once again


[4/3/2024 3:05 PM] tux_linux
Ok


[4/3/2024 3:05 PM] szybet
thanks for the remainder


[4/3/2024 3:05 PM] szybet
reminder


[4/3/2024 3:05 PM] tux_linux
Yes


[4/3/2024 3:05 PM] tux_linux
Do you know both words exist


[4/3/2024 3:05 PM] tux_linux
But don't mean same thing


[4/3/2024 3:05 PM] szybet
huh


[4/3/2024 3:05 PM] szybet
remainder = rest


[4/3/2024 3:06 PM] tux_linux
Yes


[4/3/2024 3:06 PM] szybet
yea i would never use that

{Reactions}
👍 

==============================================================
Exported 34,566 message(s)
==============================================================
