```
void myMessageOutput(QtMsgType type, const QMessageLogContext &context, const QString &msg)
{
    QByteArray localMsg = msg.toLocal8Bit();
    const char *file = context.file ? context.file : "";
    const char *function = context.function ? context.function : "";

    switch (type) {
    case QtDebugMsg: {
        if(enableDebug == true) {
            if(context.line != 0) {
                fprintf(stderr, "Debug: \"%s\" (%s:%u, %s)\n", localMsg.constData(), file, context.line, function);
            } else {
                fprintf(stderr, "Debug: \"%s\"\n", localMsg.constData());
            }
        }
        break;
    }
    case QtInfoMsg: {


        if(ereader) {
            qDebug() << "Info dialog ereader mode";
            // Doesn't work ;/
            // msgBox.setFixedWidth(ereaderVars::screenX);
            infoDialog* infoDialogEreader = new infoDialog();
            infoDialogEreader->setModal(true);
            infoDialogEreader->show(); // Size and stuff
            infoDialogEreader->move(0, infoDialogEreader->y());
            infoDialogEreader->setFixedWidth(ereaderVars::screenX);
            infoDialogEreader->setText(localMsg.constData());
        } else {
            QMessageBox msgBox;
            msgBox.setIcon(QMessageBox::Information);
            msgBox.setText(localMsg.constData());
            msgBox.exec();
        }

        fprintf(stderr, "Info: \"%s\" (%s:%u, %s)\n", localMsg.constData(), file, context.line, function);
        break;
    }
    case QtWarningMsg: {

        fprintf(stderr, "Warning: \"%s\" (%s:%u, %s)\n", localMsg.constData(), file, context.line, function);

        if(warningsEnabled == true) {
            QMessageBox msgBox;
            msgBox.setIcon(QMessageBox::Warning);
            msgBox.setText(localMsg.constData());
            msgBox.exec();
        }

        break;
    }
    case QtCriticalMsg: {
        fprintf(stderr, "Critical: \"%s\" (%s:%u, %s)\n", localMsg.constData(), file, context.line, function);

        QMessageBox msgBox;
        msgBox.setIcon(QMessageBox::Critical);
        msgBox.setText(localMsg.constData());
        msgBox.exec();

        break;
    }
    case QtFatalMsg: {

        fprintf(stderr, "Fatal: \"%s\" (%s:%u, %s)\n", localMsg.constData(), file, context.line, function);

        QMessageBox msgBox;
        msgBox.setIcon(QMessageBox::Critical);
        msgBox.setText(localMsg.constData());
        msgBox.exec();

        break;
    }
    }
}**
`

``
```**