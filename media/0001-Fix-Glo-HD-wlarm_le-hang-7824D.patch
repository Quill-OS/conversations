From 2643bb00287d6a96c7cc8322c6708f70dbdc1cac Mon Sep 17 00:00:00 2001
From: Nicolas Mailloux <nicolecrivain@gmail.com>
Date: Sun, 28 Aug 2022 16:40:45 -0400
Subject: [PATCH] Fix Glo HD wlarm_le hang

---
 inkbox-list-networks/src/wlarm_le_wrapper.rs | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

diff --git a/inkbox-list-networks/src/wlarm_le_wrapper.rs b/inkbox-list-networks/src/wlarm_le_wrapper.rs
index 2f19480..36bcf4d 100644
--- a/inkbox-list-networks/src/wlarm_le_wrapper.rs
+++ b/inkbox-list-networks/src/wlarm_le_wrapper.rs
@@ -5,10 +5,18 @@ use std::str;
 
 pub fn wlarm_le_scan() {
     //println!("wlarm_le wrapper");
+
+    // Because Glo HD is finicky in every possible way
+    Command::new("ifconfig")
+        .arg("wlan0")
+        .arg("up")
+        .output()
+        .expect("failed to execute ifconfig");
+
     let output = Command::new("wlarm_le")
-    .arg("escanresults")
-    .output()
-    .expect("failed to execute wlarm_le");
+        .arg("escanresults")
+        .output()
+        .expect("failed to execute wlarm_le");
 
     let output_data = str::from_utf8(&output.stdout).expect("Failed to get stdout").to_owned();
 
-- 
2.30.2

